!(function(){var OS=Object.defineProperty,IS=Object.defineProperties;var DS=Object.getOwnPropertyDescriptors;var Mh=Object.getOwnPropertySymbols;var R0=Object.prototype.hasOwnProperty,k0=Object.prototype.propertyIsEnumerable;var Av=Math.pow,N0=(Ne,G,_)=>G in Ne?OS(Ne,G,{enumerable:!0,configurable:!0,writable:!0,value:_}):Ne[G]=_,wa=(Ne,G)=>{for(var _ in G||(G={}))R0.call(G,_)&&N0(Ne,_,G[_]);if(Mh)for(var _ of Mh(G))k0.call(G,_)&&N0(Ne,_,G[_]);return Ne},lo=(Ne,G)=>IS(Ne,DS(G));var _h=(Ne,G)=>{var _={};for(var g in Ne)R0.call(Ne,g)&&G.indexOf(g)<0&&(_[g]=Ne[g]);if(Ne!=null&&Mh)for(var g of Mh(Ne))G.indexOf(g)<0&&k0.call(Ne,g)&&(_[g]=Ne[g]);return _};var B0=(Ne,G,_)=>new Promise((g,R)=>{var w=L=>{try{P(_.next(L))}catch(p){R(p)}},M=L=>{try{P(_.throw(L))}catch(p){R(p)}},P=L=>L.done?g(L.value):Promise.resolve(L.value).then(w,M);P((_=_.apply(Ne,G)).next())});(self.webpackChunkantd=self.webpackChunkantd||[]).push([[7338],{62238:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var _=function(w,M){var P=w.nodes,L=w.edges,p=[],b={};if(!P)throw new Error("invalid nodes data!");return P&&P.forEach(function(S,x){b[S.id]=x;var y=[];p.push(y)}),L&&L.forEach(function(S){var x=S.source,y=S.target,A=b[x],E=b[y];!A&&A!==0||!E&&E!==0||(p[A][E]=1,M||(p[E][A]=1))}),p},g=_;G.default=g},810369:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"GADDIAsync",{enumerable:!0,get:function(){return g.GADDIAsync}}),Object.defineProperty(G,"connectedComponentAsync",{enumerable:!0,get:function(){return g.connectedComponentAsync}}),G.default=void 0,Object.defineProperty(G,"detectAllCyclesAsync",{enumerable:!0,get:function(){return g.detectAllCyclesAsync}}),Object.defineProperty(G,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return g.detectAllDirectedCycleAsync}}),Object.defineProperty(G,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return g.detectAllUndirectedCycleAsync}}),Object.defineProperty(G,"detectCycleAsync",{enumerable:!0,get:function(){return g.detectCycleAsync}}),G.detectDirectedCycleAsync=void 0,Object.defineProperty(G,"dijkstraAsync",{enumerable:!0,get:function(){return g.dijkstraAsync}}),Object.defineProperty(G,"findAllPathAsync",{enumerable:!0,get:function(){return g.findAllPathAsync}}),Object.defineProperty(G,"findShortestPathAsync",{enumerable:!0,get:function(){return g.findShortestPathAsync}}),Object.defineProperty(G,"floydWarshallAsync",{enumerable:!0,get:function(){return g.floydWarshallAsync}}),Object.defineProperty(G,"getAdjMatrixAsync",{enumerable:!0,get:function(){return g.getAdjMatrixAsync}}),Object.defineProperty(G,"getDegreeAsync",{enumerable:!0,get:function(){return g.getDegreeAsync}}),Object.defineProperty(G,"getInDegreeAsync",{enumerable:!0,get:function(){return g.getInDegreeAsync}}),Object.defineProperty(G,"getNeighborsAsync",{enumerable:!0,get:function(){return g.getNeighborsAsync}}),Object.defineProperty(G,"getOutDegreeAsync",{enumerable:!0,get:function(){return g.getOutDegreeAsync}}),Object.defineProperty(G,"labelPropagationAsync",{enumerable:!0,get:function(){return g.labelPropagationAsync}}),Object.defineProperty(G,"louvainAsync",{enumerable:!0,get:function(){return g.louvainAsync}}),Object.defineProperty(G,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return g.minimumSpanningTreeAsync}}),Object.defineProperty(G,"pageRankAsync",{enumerable:!0,get:function(){return g.pageRankAsync}});var g=_(430485),R=g.detectCycleAsync;G.detectDirectedCycleAsync=R;var w={getAdjMatrixAsync:g.getAdjMatrixAsync,connectedComponentAsync:g.connectedComponentAsync,getDegreeAsync:g.getDegreeAsync,getInDegreeAsync:g.getInDegreeAsync,getOutDegreeAsync:g.getOutDegreeAsync,detectCycleAsync:g.detectCycleAsync,detectDirectedCycleAsync:R,detectAllCyclesAsync:g.detectAllCyclesAsync,detectAllDirectedCycleAsync:g.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:g.detectAllUndirectedCycleAsync,dijkstraAsync:g.dijkstraAsync,findAllPathAsync:g.findAllPathAsync,findShortestPathAsync:g.findShortestPathAsync,floydWarshallAsync:g.floydWarshallAsync,labelPropagationAsync:g.labelPropagationAsync,louvainAsync:g.louvainAsync,minimumSpanningTreeAsync:g.minimumSpanningTreeAsync,pageRankAsync:g.pageRankAsync,getNeighborsAsync:g.getNeighborsAsync,GADDIAsync:g.GADDIAsync};G.default=w},683764:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=w(_(893026)),R=_(770643);function w(p){return p&&p.__esModule?p:{default:p}}function M(p){p===void 0&&(p={});var b=p,S=function(){},x=function(){var y={};return function(A){var E=A.next,D=E;return y[D]?!1:(y[D]=!0,!0)}}();return b.allowTraversal=p.allowTraversal||x,b.enter=p.enter||S,b.leave=p.leave||S,b}var P=function(b,S,x,y){y===void 0&&(y=!0);var A=M(x),E=new g.default,D=b.edges,B=D===void 0?[]:D;E.enqueue(S);for(var m="",f=function(){var X=E.dequeue();A.enter({current:X,previous:m}),(0,R.getNeighbors)(X,B,y?"target":void 0).forEach(function(z){A.allowTraversal({previous:m,current:X,next:z})&&E.enqueue(z)}),A.leave({current:X,previous:m}),m=X};!E.isEmpty();)f()},L=P;G.default=L},759527:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=M,G.detectStrongConnectComponents=G.detectConnectedComponents=void 0;var g=_(770643),R=function(L){for(var p=L.nodes,b=p===void 0?[]:p,S=L.edges,x=S===void 0?[]:S,y=[],A={},E=[],D=function W(X){E.push(X),A[X.id]=!0;for(var z=(0,g.getNeighbors)(X.id,x),U=function(J){var Q=z[J];if(!A[Q]){var et=b.filter(function(ut){return ut.id===Q});et.length>0&&W(et[0])}},j=0;j<z.length;++j)U(j)},B=0;B<b.length;B++){var m=b[B];if(!A[m.id]){D(m);for(var f=[];E.length>0;)f.push(E.pop());y.push(f)}}return y};G.detectConnectedComponents=R;var w=function(L){for(var p=L.nodes,b=p===void 0?[]:p,S=L.edges,x=S===void 0?[]:S,y=[],A={},E={},D={},B=[],m=0,f=function U(j){E[j.id]=m,D[j.id]=m,m+=1,y.push(j),A[j.id]=!0;for(var V=(0,g.getNeighbors)(j.id,x,"target").filter(function(it){return b.map(function(yt){return yt.id}).indexOf(it)>-1}),J=function(yt){var ft=V[yt];if(!E[ft]&&E[ft]!==0){var Bt=b.filter(function(St){return St.id===ft});Bt.length>0&&U(Bt[0]),D[j.id]=Math.min(D[j.id],D[ft])}else A[ft]&&(D[j.id]=Math.min(D[j.id],E[ft]))},Q=0;Q<V.length;Q++)J(Q);if(D[j.id]===E[j.id]){for(var et=[];y.length>0;){var ut=y.pop();if(A[ut.id]=!1,et.push(ut),ut===j)break}et.length>0&&B.push(et)}},W=0,X=b;W<X.length;W++){var z=X[W];!E[z.id]&&E[z.id]!==0&&f(z)}return B};G.detectStrongConnectComponents=w;function M(P,L){return L?w(P):R(P)}},592935:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.secondReg=G.dateReg=void 0;var _=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;G.secondReg=_;var g=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;G.dateReg=g},182556:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getOutDegree=G.getInDegree=G.default=void 0;var _=function(P){var L={},p=P.nodes,b=p===void 0?[]:p,S=P.edges,x=S===void 0?[]:S;return b.forEach(function(y){L[y.id]={degree:0,inDegree:0,outDegree:0}}),x.forEach(function(y){L[y.source].degree++,L[y.source].outDegree++,L[y.target].degree++,L[y.target].inDegree++}),L},g=_;G.default=g;var R=function(P,L){var p=_(P);return p[L]?_(P)[L].inDegree:0};G.getInDegree=R;var w=function(P,L){var p=_(P);return p[L]?_(P)[L].outDegree:0};G.getOutDegree=w},994282:function(Ne,G,_){"use strict";function g(E){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},g(E)}Object.defineProperty(G,"__esModule",{value:!0}),G.detectAllUndirectedCycle=G.detectAllDirectedCycle=G.detectAllCycles=G.default=void 0;var R=p(_(45891)),w=L(_(759527)),M=_(770643);function P(E){if(typeof WeakMap!="function")return null;var D=new WeakMap,B=new WeakMap;return(P=function(f){return f?B:D})(E)}function L(E,D){if(!D&&E&&E.__esModule)return E;if(E===null||g(E)!=="object"&&typeof E!="function")return{default:E};var B=P(D);if(B&&B.has(E))return B.get(E);var m={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in E)if(W!=="default"&&Object.prototype.hasOwnProperty.call(E,W)){var X=f?Object.getOwnPropertyDescriptor(E,W):null;X&&(X.get||X.set)?Object.defineProperty(m,W,X):m[W]=E[W]}return m.default=E,B&&B.set(E,m),m}function p(E){return E&&E.__esModule?E:{default:E}}var b=function(D){var B=null,m=D.nodes,f=m===void 0?[]:m,W={},X={},z={},U={};f.forEach(function(J){X[J.id]=J});for(var j={enter:function(Q){var et=Q.current,ut=Q.previous;if(z[et]){B={};for(var it=et,yt=ut;yt!==et;)B[it]=yt,it=yt,yt=W[yt];B[it]=yt}else z[et]=et,delete X[et],W[et]=ut},leave:function(Q){var et=Q.current;U[et]=et,delete z[et]},allowTraversal:function(Q){var et=Q.next;return B?!1:!U[et]}};Object.keys(X).length;){var V=Object.keys(X)[0];(0,R.default)(D,V,j)}return B},S=function(D,B,m){var f,W;m===void 0&&(m=!0);for(var X=[],z=(0,w.default)(D,!1),U=0,j=z;U<j.length;U++){var V=j[U];if(V.length)for(var J=V[0],Q=J.id,et=[J],ut=(f={},f[Q]=J,f),it=(W={},W[Q]=new Set,W);et.length>0;)for(var yt=et.pop(),ft=yt.id,Bt=(0,M.getNeighbors)(ft,D.edges),St=function(q){var bt,Ct=Bt[q],nt=D.nodes.find(function(Yt){return Yt.id===Ct});if(Ct===ft)X.push((bt={},bt[Ct]=yt,bt));else if(!(Ct in it))ut[Ct]=yt,et.push(nt),it[Ct]=new Set([yt]);else if(!it[ft].has(nt)){for(var ht=!0,At=[nt,yt],Ot=ut[ft];it[Ct].size&&!it[Ct].has(Ot)&&(At.push(Ot),Ot!==ut[Ot.id]);)Ot=ut[Ot.id];if(At.push(Ot),B&&m?(ht=!1,At.findIndex(function(Yt){return B.indexOf(Yt.id)>-1})>-1&&(ht=!0)):B&&!m&&At.findIndex(function(Yt){return B.indexOf(Yt.id)>-1})>-1&&(ht=!1),ht){for(var xt={},Dt=1;Dt<At.length;Dt+=1)xt[At[Dt-1].id]=At[Dt];At.length&&(xt[At[At.length-1].id]=At[0]),X.push(xt)}it[Ct].add(yt)}},Et=0;Et<Bt.length;Et+=1)St(Et)}return X};G.detectAllUndirectedCycle=S;var x=function(D,B,m){m===void 0&&(m=!0);for(var f=[],W=new Set,X=[],z=[],U={},j={},V=function(Ot){for(var xt=[Ot];xt.length>0;){var Dt=xt.pop();W.has(Dt)&&(W.delete(Dt),X[Dt.id].forEach(function(Yt){xt.push(Yt)}),X[Dt.id].clear())}},J=function At(Ot,xt,Dt){var Yt=!1;if(B&&m===!1&&B.indexOf(Ot.id)>-1)return Yt;f.push(Ot),W.add(Ot);for(var ie=Dt[Ot.id],re=0;re<ie.length;re+=1){var Pt=U[ie[re]];if(Pt===xt){for(var ee={},ce=1;ce<f.length;ce+=1)ee[f[ce-1].id]=f[ce];f.length&&(ee[f[f.length-1].id]=f[0]),z.push(ee),Yt=!0}else W.has(Pt)||At(Pt,xt,Dt)&&(Yt=!0)}if(Yt)V(Ot);else for(var re=0;re<ie.length;re+=1){var Pt=U[ie[re]];X[Pt.id].has(Ot)||X[Pt.id].add(Ot)}return f.pop(),Yt},Q=D.nodes,et=Q===void 0?[]:Q,ut=0;ut<et.length;ut+=1){var it=et[ut],yt=it.id;j[yt]=ut,U[ut]=it}if(B&&m)for(var ft=function(Ot){var xt=B[Ot];j[et[Ot].id]=j[xt],j[xt]=0,U[0]=et.find(function(Dt){return Dt.id===xt}),U[j[et[Ot].id]]=et[Ot]},ut=0;ut<B.length;ut++)ft(ut);for(var Bt=function(Ot){for(var xt,Dt,Yt=1/0,ie=0;ie<Ot.length;ie+=1)for(var re=Ot[ie],Pt=0;Pt<re.length;Pt++){var ee=j[re[Pt].id];ee<Yt&&(Yt=ee,Dt=ie)}for(var ce=Ot[Dt],Ut=[],ie=0;ie<ce.length;ie+=1){var te=ce[ie];Ut[te.id]=[];for(var ye=0,ge=(0,M.getNeighbors)(te.id,D.edges,"target").filter(function(Tt){return ce.map(function(Ae){return Ae.id}).indexOf(Tt)>-1});ye<ge.length;ye++){var Kt=ge[ye];Kt===te.id&&!(m===!1&&B.indexOf(te.id)>-1)?z.push((xt={},xt[te.id]=te,xt)):Ut[te.id].push(j[Kt])}}return{component:ce,adjList:Ut,minIdx:Yt}},St=0;St<et.length;){var Et=et.filter(function(At){return j[At.id]>=St}),Z=(0,w.detectStrongConnectComponents)({nodes:Et,edges:D.edges}).filter(function(At){return At.length>1});if(Z.length===0)break;var q=Bt(Z),bt=q.minIdx,Ct=q.adjList,nt=q.component;if(nt.length>1){nt.forEach(function(At){X[At.id]=new Set});var ht=U[bt];if(B&&m&&B.indexOf(ht.id)===-1)return z;J(ht,ht,Ct),St=bt+1}else break}return z};G.detectAllDirectedCycle=x;var y=function(D,B,m,f){return f===void 0&&(f=!0),B?x(D,m,f):S(D,m,f)};G.detectAllCycles=y;var A=b;G.default=A},45891:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=M;var g=_(770643);function R(P){P===void 0&&(P={});var L=P,p=function(){},b=function(){var S={};return function(x){var y=x.next;return S[y]?!1:(S[y]=!0,!0)}}();return L.allowTraversal=P.allowTraversal||b,L.enter=P.enter||p,L.leave=P.leave||p,L}function w(P,L,p,b){b.enter({current:L,previous:p});var S=P.edges,x=S===void 0?[]:S;(0,g.getNeighbors)(L,x,"target").forEach(function(y){b.allowTraversal({previous:p,current:L,next:y})&&w(P,y,L,b)}),b.leave({current:L,previous:p})}function M(P,L,p){w(P,L,"",R(p))}},878089:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=_(570655),R=_(413810),w=_(770643),M=function(S,x,y){for(var A=1/0,E,D=0;D<x.length;D++){var B=x[D].id;!y[B]&&S[B]<=A&&(A=S[B],E=x[D])}return E},P=function(S,x,y,A){var E=S.nodes,D=E===void 0?[]:E,B=S.edges,m=B===void 0?[]:B,f=[],W={},X={},z={};D.forEach(function(ut,it){var yt=ut.id;f.push(yt),X[yt]=1/0,yt===x&&(X[yt]=0)});for(var U=D.length,j=function(it){var yt=M(X,D,W),ft=yt.id;if(W[ft]=!0,X[ft]===1/0)return"continue";var Bt=[];y?Bt=(0,w.getOutEdgesNodeId)(ft,m):Bt=(0,w.getEdgesByNodeId)(ft,m),Bt.forEach(function(St){var Et=St.target,Z=St.source,q=Et===ft?Z:Et,bt=A&&St[A]?St[A]:1;X[q]>X[yt.id]+bt?(X[q]=X[yt.id]+bt,z[q]=[yt.id]):X[q]===X[yt.id]+bt&&z[q].push(yt.id)})},V=0;V<U;V++)j(V);z[x]=[x];var J={};for(var Q in X)X[Q]!==1/0&&p(x,Q,z,J);var et={};for(var Q in J)et[Q]=J[Q][0];return{length:X,path:et,allPath:J}},L=P;G.default=L;function p(b,S,x,y){if(b===S)return[b];if(y[S])return y[S];for(var A=[],E=0,D=x[S];E<D.length;E++){var B=D[E],m=p(b,B,x,y);if(!m)return;for(var f=0,W=m;f<W.length;f++){var X=W[f];(0,R.isArray)(X)?A.push((0,g.__spreadArray)((0,g.__spreadArray)([],X,!0),[S],!1)):A.push([X,S])}}return y[S]=A,y[S]}},241727:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.findShortestPath=G.findAllPath=void 0;var g=w(_(878089)),R=_(770643);function w(L){return L&&L.__esModule?L:{default:L}}var M=function(p,b,S,x,y){var A=(0,g.default)(p,b,x,y),E=A.length,D=A.path,B=A.allPath;return{length:E[S],path:D[S],allPath:B[S]}};G.findShortestPath=M;var P=function(p,b,S,x){var y;if(b===S)return[[b]];var A=p.edges,E=A===void 0?[]:A,D=[b],B=(y={},y[b]=!0,y),m=[],f=[],W=x?(0,R.getNeighbors)(b,E,"target"):(0,R.getNeighbors)(b,E);for(m.push(W);D.length>0&&m.length>0;){var X=m[m.length-1];if(X.length){var z=X.shift();z&&(D.push(z),B[z]=!0,W=x?(0,R.getNeighbors)(z,E,"target"):(0,R.getNeighbors)(z,E),m.push(W.filter(function(V){return!B[V]})))}else{var U=D.pop();B[U]=!1,m.pop();continue}if(D[D.length-1]===S){var j=D.map(function(J){return J});f.push(j);var U=D.pop();B[U]=!1,m.pop()}}return f};G.findAllPath=P},975033:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=R(_(62238));function R(P){return P&&P.__esModule?P:{default:P}}var w=function(L,p){for(var b=(0,g.default)(L,p),S=[],x=b.length,y=0;y<x;y+=1){S[y]=[];for(var A=0;A<x;A+=1)y===A?S[y][A]=0:b[y][A]===0||!b[y][A]?S[y][A]=1/0:S[y][A]=b[y][A]}for(var E=0;E<x;E+=1)for(var y=0;y<x;y+=1)for(var A=0;A<x;A+=1)S[y][A]>S[y][E]+S[E][A]&&(S[y][A]=S[y][E]+S[E][A]);return S},M=w;G.default=M},821146:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=_(413810),R=_(368575),w=function(){function A(E,D,B,m,f){this.fromNode=E,this.toNode=D,this.nodeEdgeNodeLabel={nodeLabel1:B||R.VACANT_NODE_LABEL,edgeLabel:m||R.VACANT_EDGE_LABEL,nodeLabel2:f||R.VACANT_NODE_LABEL}}return A.prototype.equalTo=function(E){return this.fromNode===E.formNode&&this.toNode===E.toNode&&this.nodeEdgeNodeLabel===E.nodeEdgeNodeLabel},A.prototype.notEqualTo=function(E){return!this.equalTo(E)},A}(),M=function(){function A(){this.rmpath=[],this.dfsEdgeList=[]}return A.prototype.equalTo=function(E){var D=this.dfsEdgeList.length,B=E.length;if(D!==B)return!1;for(var m=0;m<D;m++)if(this.dfsEdgeList[m]!==E[m])return!1;return!0},A.prototype.notEqualTo=function(E){return!this.equalTo(E)},A.prototype.pushBack=function(E,D,B,m,f){return this.dfsEdgeList.push(new w(E,D,B,m,f)),this.dfsEdgeList},A.prototype.toGraph=function(E,D){E===void 0&&(E=R.VACANT_GRAPH_ID),D===void 0&&(D=!1);var B=new R.Graph(E,!0,D);return this.dfsEdgeList.forEach(function(m){var f=m.fromNode,W=m.toNode,X=m.nodeEdgeNodeLabel,z=X.nodeLabel1,U=X.edgeLabel,j=X.nodeLabel2;z!==R.VACANT_NODE_LABEL&&B.addNode(f,z),j!==R.VACANT_NODE_LABEL&&B.addNode(W,j),z!==R.VACANT_NODE_LABEL&&j!==z&&B.addEdge(void 0,f,W,U)}),B},A.prototype.buildRmpath=function(){this.rmpath=[];for(var E=void 0,D=this.dfsEdgeList.length,B=D-1;B>=0;B--){var m=this.dfsEdgeList[B],f=m.fromNode,W=m.toNode;f<W&&(E===void 0||W===E)&&(this.rmpath.push(B),E=f)}return this.rmpath},A.prototype.getNodeNum=function(){var E={};return this.dfsEdgeList.forEach(function(D){E[D.fromNode]||(E[D.fromNode]=!0),E[D.toNode]||(E[D.toNode]=!0)}),Object.keys(E).length},A}(),P=function(){function A(E){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!E){for(;E;){var D=E.edge;this.edges.push(D),this.nodesUsed[D.from]=1,this.nodesUsed[D.to]=1,this.edgesUsed[D.id]=1,E=E.preNode}this.edges=this.edges.reverse()}}return A.prototype.hasNode=function(E){return this.nodesUsed[E.id]===1},A.prototype.hasEdge=function(E){return this.edgesUsed[E.id]===1},A}(),L=function(){function A(E){var D=E.graphs,B=E.minSupport,m=B===void 0?2:B,f=E.minNodeNum,W=f===void 0?1:f,X=E.maxNodeNum,z=X===void 0?4:X,U=E.top,j=U===void 0?10:U,V=E.directed,J=V===void 0?!1:V,Q=E.verbose,et=Q===void 0?!1:Q;this.graphs=D,this.dfsCode=new M,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=m,this.top=j,this.directed=J,this.counter=0,this.maxNodeNum=z,this.minNodeNum=W,this.verbose=et,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return A.prototype.findForwardRootEdges=function(E,D){var B=this,m=[],f=E.nodeMap;return D.edges.forEach(function(W){(B.directed||D.label<=f[W.to].label)&&m.push(W)}),m},A.prototype.findBackwardEdge=function(E,D,B,m){if(!this.directed&&D===B)return null;for(var f=E.nodeMap,W=f[B.to],X=W.edges,z=X.length,U=0;U<z;U++){var j=X[U];if(!(m.hasEdge(j)||j.to!==D.from)){if(this.directed){if(f[D.from].label<f[B.to].label||f[D.from].label===f[B.to].label&&D.label<=j.label)return j}else if(D.label<j.label||D.label===j.label&&f[D.to].label<=f[B.to].label)return j}}return null},A.prototype.findForwardPureEdges=function(E,D,B,m){for(var f=[],W=D.to,X=E.nodeMap[W].edges,z=X.length,U=0;U<z;U++){var j=X[U],V=E.nodeMap[j.to];B<=V.label&&!m.hasNode(V)&&f.push(j)}return f},A.prototype.findForwardRmpathEdges=function(E,D,B,m){for(var f=[],W=E.nodeMap,X=W[D.to].label,z=W[D.from],U=z.edges,j=U.length,V=0;V<j;V++){var J=U[V],Q=W[J.to].label;D.to===J.to||B>Q||m.hasNode(W[J.to])||(D.label<J.label||D.label===J.label&&X<=Q)&&f.push(J)}return f},A.prototype.getSupport=function(E){var D={};return E.forEach(function(B){D[B.graphId]||(D[B.graphId]=!0)}),Object.keys(D).length},A.prototype.findMinLabel=function(E){var D=void 0;return Object.keys(E).forEach(function(B){var m=E[B],f=m.nodeLabel1,W=m.edgeLabel,X=m.nodeLabel2;if(!D){D={nodeLabel1:f,edgeLabel:W,nodeLabel2:X};return}(f<D.nodeLabel1||f===D.nodeLabel1&&W<D.edgeLabel||f===D.nodeLabel1&&W===D.edgeLabel&&X<D.nodeLabel2)&&(D={nodeLabel1:f,edgeLabel:W,nodeLabel2:X})}),D},A.prototype.isMin=function(){var E=this,D=this.dfsCode;if(this.verbose&&console.log("isMin checking",D),D.dfsEdgeList.length===1)return!0;var B=this.directed,m=D.toGraph(R.VACANT_GRAPH_ID,B),f=m.nodeMap,W=new M,X={};m.nodes.forEach(function(V){var J=E.findForwardRootEdges(m,V);J.forEach(function(Q){var et=f[Q.to],ut="".concat(V.label,"-").concat(Q.label,"-").concat(et.label);X[ut]||(X[ut]={projected:[],nodeLabel1:V.label,edgeLabel:Q.label,nodeLabel2:et.label});var it={graphId:m.id,edge:Q,preNode:null};X[ut].projected.push(it)})});var z=this.findMinLabel(X);if(z){W.dfsEdgeList.push(new w(0,1,z.nodeLabel1,z.edgeLabel,z.nodeLabel2));var U=function V(J){for(var Q=W.buildRmpath(),et=W.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ut=W.dfsEdgeList[Q[0]].toNode,it={},yt=!1,ft=0,Bt=B?-1:0,St=function(ie){if(yt)return"break";J.forEach(function(re){var Pt=new P(re),ee=E.findBackwardEdge(m,Pt.edges[Q[ie]],Pt.edges[Q[0]],Pt);ee&&(it[ee.label]||(it[ee.label]={projected:[],edgeLabel:ee.label}),it[ee.label].projected.push({graphId:m.id,edge:it,preNode:re}),ft=W.dfsEdgeList[Q[ie]].fromNode,yt=!0)})},Et=Q.length-1;Et>Bt;Et--){var Z=St(Et);if(Z==="break")break}if(yt){var q=E.findMinLabel(it);W.dfsEdgeList.push(new w(ut,ft,R.VACANT_NODE_LABEL,q.edgeLabel,R.VACANT_NODE_LABEL));var bt=W.dfsEdgeList.length-1;return E.dfsCode.dfsEdgeList[bt]!==W.dfsEdgeList[bt]?!1:V(it[q.edgeLabel].projected)}var Ct={};yt=!1;var nt=0;J.forEach(function(Yt){var ie=new P(Yt),re=E.findForwardPureEdges(m,ie.edges[Q[0]],et,ie);re.length>0&&(yt=!0,nt=ut,re.forEach(function(Pt){var ee="".concat(Pt.label,"-").concat(f[Pt.to].label);Ct[ee]||(Ct[ee]={projected:[],edgeLabel:Pt.label,nodeLabel2:f[Pt.to].label}),Ct[ee].projected.push({graphId:m.id,edge:Pt,preNode:Yt})}))});for(var ht=Q.length,At=function(ie){if(yt)return"break";var re=Q[ie];J.forEach(function(Pt){var ee=new P(Pt),ce=E.findForwardRmpathEdges(m,ee.edges[re],et,ee);ce.length>0&&(yt=!0,nt=W.dfsEdgeList[re].fromNode,ce.forEach(function(Ut){var te="".concat(Ut.label,"-").concat(f[Ut.to].label);Ct[te]||(Ct[te]={projected:[],edgeLabel:Ut.label,nodeLabel2:f[Ut.to].label}),Ct[te].projected.push({graphId:m.id,edge:Ut,preNode:Pt})}))})},Et=0;Et<ht;Et++){var Ot=At(Et);if(Ot==="break")break}if(!yt)return!0;var xt=E.findMinLabel(Ct);W.dfsEdgeList.push(new w(nt,ut+1,R.VACANT_NODE_LABEL,xt.edgeLabel,xt.nodeLabel2));var Dt=W.dfsEdgeList.length-1;return D.dfsEdgeList[Dt]!==W.dfsEdgeList[Dt]?!1:V(Ct["".concat(xt.edgeLabel,"-").concat(xt.nodeLabel2)].projected)},j="".concat(z.nodeLabel1,"-").concat(z.edgeLabel,"-").concat(z.nodeLabel2);return U(X[j].projected)}},A.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var E=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,g.clone)(E))}},A.prototype.subGraphMining=function(E){var D=this,B=this.getSupport(E);if(!(B<this.minSupport)&&this.isMin()){this.report();var m=this.dfsCode.getNodeNum(),f=this.dfsCode.buildRmpath(),W=this.dfsCode.dfsEdgeList[f[0]].toNode,X=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,z={},U={};E.forEach(function(j){for(var V=D.graphs[j.graphId],J=V.nodeMap,Q=new P(j),et=f.length-1;et>=0;et--){var ut=D.findBackwardEdge(V,Q.edges[f[et]],Q.edges[f[0]],Q);if(ut){var it="".concat(D.dfsCode.dfsEdgeList[f[et]].fromNode,"-").concat(ut.label);U[it]||(U[it]={projected:[],toNodeId:D.dfsCode.dfsEdgeList[f[et]].fromNode,edgeLabel:ut.label}),U[it].projected.push({graphId:j.graphId,edge:ut,preNode:j})}}if(!(m>=D.maxNodeNum)){var yt=D.findForwardPureEdges(V,Q.edges[f[0]],X,Q);yt.forEach(function(Bt){var St="".concat(W,"-").concat(Bt.label,"-").concat(J[Bt.to].label);z[St]||(z[St]={projected:[],fromNodeId:W,edgeLabel:Bt.label,nodeLabel2:J[Bt.to].label}),z[St].projected.push({graphId:j.graphId,edge:Bt,preNode:j})});for(var ft=function(St){var Et=D.findForwardRmpathEdges(V,Q.edges[f[St]],X,Q);Et.forEach(function(Z){var q="".concat(D.dfsCode.dfsEdgeList[f[St]].fromNode,"-").concat(Z.label,"-").concat(J[Z.to].label);z[q]||(z[q]={projected:[],fromNodeId:D.dfsCode.dfsEdgeList[f[St]].fromNode,edgeLabel:Z.label,nodeLabel2:J[Z.to].label}),z[q].projected.push({graphId:j.graphId,edge:Z,preNode:j})})},et=0;et<f.length;et++)ft(et)}}),Object.keys(U).forEach(function(j){var V=U[j],J=V.toNodeId,Q=V.edgeLabel;D.dfsCode.dfsEdgeList.push(new w(W,J,"-1",Q,"-1")),D.subGraphMining(U[j].projected),D.dfsCode.dfsEdgeList.pop()}),Object.keys(z).forEach(function(j){var V=z[j],J=V.fromNodeId,Q=V.edgeLabel,et=V.nodeLabel2;D.dfsCode.dfsEdgeList.push(new w(J,W+1,R.VACANT_NODE_LABEL,Q,et)),D.subGraphMining(z[j].projected),D.dfsCode.dfsEdgeList.pop()})}},A.prototype.generate1EdgeFrequentSubGraphs=function(){var E=this.graphs,D=this.directed,B=this.minSupport,m=this.frequentSize1Subgraphs,f={},W={},X={},z={};return Object.keys(E).forEach(function(U){var j=E[U],V=j.nodeMap;j.nodes.forEach(function(J,Q){var et=J.label,ut="".concat(U,"-").concat(et);if(!X[ut]){var it=f[et]||0;it++,f[et]=it}X[ut]={graphKey:U,label:et},J.edges.forEach(function(yt){var ft=et,Bt=V[yt.to].label;if(!D&&ft>Bt){var St=Bt;Bt=ft,ft=St}var Et=yt.label,Z="".concat(U,"-").concat(ft,"-").concat(Et,"-").concat(Bt),q="".concat(ft,"-").concat(Et,"-").concat(Bt);if(!W[q]){var bt=W[q]||0;bt++,W[q]=bt}z[Z]={graphId:U,nodeLabel1:ft,edgeLabel:Et,nodeLabel2:Bt}})})}),Object.keys(f).forEach(function(U){var j=f[U];if(!(j<B)){var V={nodes:[],edges:[]};V.nodes.push({id:"0",label:U}),m.push(V)}}),m},A.prototype.run=function(){var E=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var D=this.graphs,B=this.directed,m={};Object.keys(D).forEach(function(f){var W=D[f],X=W.nodeMap;W.nodes.forEach(function(z){var U=E.findForwardRootEdges(W,z);U.forEach(function(j){var V=X[j.to],J="".concat(z.label,"-").concat(j.label,"-").concat(V.label);m[J]||(m[J]={projected:[],nodeLabel1:z.label,edgeLabel:j.label,nodeLabel2:V.label});var Q={graphId:f,edge:j,preNode:null};m[J].projected.push(Q)})})}),Object.keys(m).forEach(function(f){var W=m[f],X=W.projected,z=W.nodeLabel1,U=W.edgeLabel,j=W.nodeLabel2;E.dfsCode.dfsEdgeList.push(new w(0,1,z,U,j)),E.subGraphMining(X),E.dfsCode.dfsEdgeList.pop()})}},A}(),p=function(E,D,B,m){var f={};return Object.keys(E).forEach(function(W,X){var z=E[W],U=new R.Graph(X,!0,D),j={};z.nodes.forEach(function(V,J){U.addNode(J,V[B]),j[V.id]=J}),z.edges.forEach(function(V,J){var Q=j[V.source],et=j[V.target];U.addEdge(-1,Q,et,V[m])}),U&&U.getNodeNum()&&(f[U.id]=U)}),f},b=function(E,D,B){var m=[];return E.forEach(function(f){var W={nodes:[],edges:[]};f.nodes.forEach(function(X){var z;W.nodes.push((z={id:"".concat(X.id)},z[D]=X.label,z))}),f.edges.forEach(function(X){var z;W.edges.push((z={source:"".concat(X.from),target:"".concat(X.to)},z[B]=X.label,z))}),m.push(W)}),m},S="cluster",x=function(E){var D=E.graphs,B=E.directed,m=B===void 0?!1:B,f=E.nodeLabelProp,W=f===void 0?S:f,X=E.edgeLabelProp,z=X===void 0?S:X,U=p(D,m,W,z),j=E.minSupport,V=E.maxNodeNum,J=E.minNodeNum,Q=E.verbose,et=E.top,ut={graphs:U,minSupport:j,maxNodeNum:V,minNodeNum:J,top:et,verbose:Q,directed:m},it=new L(ut);it.run();var yt=b(it.frequentSubgraphs,W,z);return yt},y=x;G.default=y},368575:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.VACANT_NODE_LABEL=G.VACANT_NODE_ID=G.VACANT_GRAPH_ID=G.VACANT_EDGE_LABEL=G.VACANT_EDGE_ID=G.Node=G.Graph=G.Edge=G.AUTO_EDGE_ID=void 0;var _=-1;G.VACANT_EDGE_ID=_;var g=-1;G.VACANT_NODE_ID=g;var R="-1";G.VACANT_EDGE_LABEL=R;var w="-1";G.VACANT_NODE_LABEL=w;var M=-1;G.VACANT_GRAPH_ID=M;var P="-1";G.AUTO_EDGE_ID=P;var L=function(){function S(x,y,A,E){x===void 0&&(x=_),y===void 0&&(y=g),A===void 0&&(A=g),E===void 0&&(E=R),this.id=x,this.from=y,this.to=A,this.label=E}return S}();G.Edge=L;var p=function(){function S(x,y){x===void 0&&(x=g),y===void 0&&(y=w),this.id=x,this.label=y,this.edges=[],this.edgeMap={}}return S.prototype.addEdge=function(x){this.edges.push(x),this.edgeMap[x.id]=x},S}();G.Node=p;var b=function(){function S(x,y,A){x===void 0&&(x=g),y===void 0&&(y=!0),A===void 0&&(A=!1),this.id=x,this.edgeIdAutoIncrease=y,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=A}return S.prototype.getNodeNum=function(){return this.nodes.length},S.prototype.addNode=function(x,y){if(!this.nodeMap[x]){var A=new p(x,y);this.nodes.push(A),this.nodeMap[x]=A,this.nodeLabelMap[y]||(this.nodeLabelMap[y]=[]),this.nodeLabelMap[y].push(x)}},S.prototype.addEdge=function(x,y,A,E){if((this.edgeIdAutoIncrease||x===void 0)&&(x=this.counter++),!(this.nodeMap[y]&&this.nodeMap[A]&&this.nodeMap[A].edgeMap[x])){var D=new L(x,y,A,E);if(this.edges.push(D),this.edgeMap[x]=D,this.nodeMap[y].addEdge(D),this.edgeLabelMap[E]||(this.edgeLabelMap[E]=[]),this.edgeLabelMap[E].push(D),!this.directed){var B=new L(x,A,y,E);this.nodeMap[A].addEdge(B),this.edgeLabelMap[E].push(B)}}},S}();G.Graph=b},882812:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=_(570655),R=L(_(975033)),w=L(_(821146)),M=L(_(878089)),P=_(770643);function L(z){return z&&z.__esModule?z:{default:z}}var p=function(U,j,V,J){V===void 0&&(V="cluster"),J===void 0&&(J=2);var Q=[],et=U.nodes;return j.forEach(function(ut,it){Q.push(b(et,ut,it,V,J))}),Q},b=function(U,j,V,J,Q){var et=[V],ut=[],it={};return j.forEach(function(yt,ft){if(yt<=Q&&V!==ft){et.push(ft),ut.push(U[ft]);var Bt=U[ft][J];it[Bt]?(it[Bt].count++,it[Bt].dists.push(yt)):it[Bt]={count:1,dists:[yt]}}}),Object.keys(it).forEach(function(yt){it[yt].dists=it[yt].dists.sort(function(ft,Bt){return ft-Bt})}),{nodeIdx:V,nodeId:U[V].id,nodeIdxs:et,neighbors:ut,neighborNum:et.length-1,nodeLabelCountMap:it}},S=function(U,j,V,J,Q){var et=Math.ceil(V/j),ut={},it=0;return J.forEach(function(yt,ft){for(var Bt=0,St=0,Et=yt.nodeIdxs,Z=yt.neighborNum-1;Bt<et;){for(var q=Et[1+Math.floor(Math.random()*Z)],bt=0;(ut["".concat(ft,"-").concat(q)]||ut["".concat(q,"-").concat(ft)])&&(q=Math.floor(Math.random()*j),bt++,!(bt>2*j)););if(bt<2*j&&(ut["".concat(ft,"-").concat(q)]={start:ft,end:q,distance:Q[ft][q]},Bt++,it++,it>=V))return ut;if(St++,St>2*j)break}if(Bt<et){var Ct=et-Bt;et=(et+Ct)/(j-ft-1)}}),ut},x=function(U,j,V,J){var Q=V.nodes;return J||(J={}),Object.keys(U).forEach(function(et){var ut,it;if(!(J&&J[et])){J[et]={nodes:[],edges:[]};var yt=U[et],ft=(ut=j[yt.start])===null||ut===void 0?void 0:ut.nodeIdxs,Bt=(it=j[yt.end])===null||it===void 0?void 0:it.nodeIdxs;if(!(!ft||!Bt)){var St=new Set(Bt),Et=ft.filter(function(nt){return St.has(nt)});if(!(!Et||!Et.length)){for(var Z={},q=Et.length,bt=0;bt<q;bt++){var Ct=Q[Et[bt]];J[et].nodes.push(Ct),Z[Ct.id]=!0}V.edges.forEach(function(nt){Z[nt.source]&&Z[nt.target]&&J[et].edges.push(nt)})}}}}),J},y=function(U,j,V,J){var Q,et,ut={};U.nodes.forEach(function(yt){ut[yt.id]=yt});var it=0;return!(!((Q=j==null?void 0:j.edges)===null||Q===void 0)&&Q.length)||((et=j==null?void 0:j.nodes)===null||et===void 0?void 0:et.length)<2?0:(U.edges.forEach(function(yt){var ft=ut[yt.source][V],Bt=ut[yt.target][V],St=j==null?void 0:j.nodes[0][V],Et=j==null?void 0:j.nodes[1][V],Z=j==null?void 0:j.edges[0][J];yt[J]===Z&&(ft===St&&Bt===Et||ft===Et&&Bt===St)&&it++}),it)},A=function(U,j,V){for(var J=1/0,Q=0,et=function(yt){var ft=U[yt],Bt=Object.keys(ft).sort(function(nt,ht){return ft[nt]-ft[ht]}),St=10,Et=[];Bt.forEach(function(nt,ht){Et[ht%St]||(Et[ht%St]={graphs:[],totalCount:0,aveCount:0}),Et[ht%St].graphs.push(nt),Et[ht%St].totalCount+=ft[nt]});var Z=0,q=[];Et.forEach(function(nt){var ht=nt.totalCount/nt.graphs.length;nt.aveCount=ht,q.push(ht);var At=0,Ot=nt.length;nt.graphs.forEach(function(xt,Dt){var Yt=ft[xt];nt.graphs.forEach(function(ie,re){Dt!==re&&(At+=Math.abs(Yt-ft[ie]))})}),At/=Ot*(Ot-1)/2,Z+=At}),Z/=Et.length;var bt=0;q.forEach(function(nt,ht){q.forEach(function(At,Ot){ht!==Ot&&(bt+=Math.abs(nt-At))}),bt/=q.length*(q.length-1)/2});var Ct=bt-Z;J<Ct&&(J=Ct,Q=yt)},ut=0;ut<j;ut++)et(ut);return{structure:V[Q],structureCountMap:U[Q]}},E=function(U,j){var V={},J={};return U.forEach(function(Q,et){V[Q.id]={idx:et,node:Q,degree:0,inDegree:0,outDegree:0};var ut=Q[j];J[ut]||(J[ut]=[]),J[ut].push(Q)}),{nodeMap:V,nodeLabelMap:J}},D=function(U,j,V){var J={},Q={};return U.forEach(function(et,ut){J["".concat(P.uniqueId)]={idx:ut,edge:et};var it=et[j];Q[it]||(Q[it]=[]),Q[it].push(et);var yt=V[et.source];yt&&(yt.degree++,yt.outDegree++);var ft=V[et.target];ft&&(ft.degree++,ft.inDegree++)}),{edgeMap:J,edgeLabelMap:Q}},B=function(U,j,V){var J=j.length,Q={};return j.forEach(function(et,ut){for(var it=V?0:ut+1,yt=U[ut].id,ft=it;ft<J;ft++)if(ut!==ft){var Bt=U[ft].id,St=et[ft];Q["".concat(yt,"-").concat(Bt)]=St,V||(Q["".concat(Bt,"-").concat(yt)]=St)}}),Q},m=function(U,j,V,J,Q,et,ut,it,yt,ft,Bt){var St,Et="".concat(j.id,"-").concat(V.id);if(ft&&ft[Et])return ft[Et];var Z=Bt?Bt[Et]:void 0;if(!Z){var q=(St={},St[Et]={start:J[j.id].idx,end:J[V.id].idx,distance:Q},St);Bt=x(q,et,U,Bt),Z=Bt[Et]}return y(Z,ut,it,yt)},f=function(U,j,V,J){var Q,et,ut,it=(Q=U[j])===null||Q===void 0?void 0:Q.degree,yt=(et=U[j])===null||et===void 0?void 0:et.inDegree,ft=(ut=U[j])===null||ut===void 0?void 0:ut.outDegree;return U[j]===void 0&&(it=1/0,yt=1/0,ft=1/0,J[j].forEach(function(Bt){var St=V[Bt.id].degree;it>St&&(it=St);var Et=V[Bt.id].inDegree;yt>Et&&(yt=Et);var Z=V[Bt.id].outDegree;ft>Z&&(ft=Z)}),U[j]={degree:it,inDegree:yt,outDegree:ft}),{minPatternNodeLabelDegree:it,minPatternNodeLabelInDegree:yt,minPatternNodeLabelOutDegree:ft}},W=function(U,j,V,J,Q,et,ut){var it;if(V===void 0&&(V=!1),et===void 0&&(et="cluster"),ut===void 0&&(ut="cluster"),!(!U||!U.nodes)){var yt=U.nodes.length;if(yt){var ft=(0,R.default)(U,V),Bt=(0,R.default)(j,V),St=B(U.nodes,ft,V),Et=B(j.nodes,Bt,V),Z=E(U.nodes,et),q=Z.nodeMap,bt=Z.nodeLabelMap,Ct=E(j.nodes,et),nt=Ct.nodeMap,ht=Ct.nodeLabelMap;D(U.edges,ut,q);var At=D(j.edges,ut,nt).edgeLabelMap,Ot=[];Bt==null||Bt.forEach(function(Zr){Ot=Ot.concat(Zr)}),Q||(Q=Math.max.apply(Math,(0,g.__spreadArray)((0,g.__spreadArray)([],Ot,!1),[2],!1))),J||(J=Q);var xt=p(U,ft,et,J),Dt=p(j,Bt,et,J),Yt=Math.min(100,yt*(yt-1)/2),ie=S(J,yt,Yt,xt,ft),re=x(ie,xt,U),Pt=10,ee=1,ce=1,Ut=4,te={graphs:re,nodeLabelProp:et,edgeLabelProp:ut,minSupport:ee,minNodeNum:ce,maxNodeNum:Ut,directed:V},ye=(0,w.default)(te).slice(0,Pt),ge=ye.length,Kt=[];ye.forEach(function(Zr,wn){Kt[wn]={},Object.keys(re).forEach(function(ln){var bn=re[ln],Pn=y(bn,Zr,et,ut);Kt[wn][ln]=Pn})});var xe=A(Kt,ge,ye),Tt=xe.structure,Ae=xe.structureCountMap,br=j.nodes[0],Sr=[],Mr=(it=j.nodes[0])===null||it===void 0?void 0:it[et],Pr=-1/0;j.nodes.forEach(function(Zr){var wn=Zr[et],ln=bt[wn];(ln==null?void 0:ln.length)>Pr&&(Pr=ln.length,Sr=ln,Mr=wn,br=Zr)});var on={},Hr={},Sn={},In={},Nn={},vr={};Object.keys(ht).forEach(function(Zr,wn){Nn[Zr]=[],V&&(vr[Zr]=[]);var ln=-1/0,bn=ht[Zr],Pn={};bn.forEach(function(Mt){var be=Et["".concat(br.id,"-").concat(Mt.id)];if(be&&Nn[Zr].push(be),ln<be&&(ln=be),Pn["".concat(br.id,"-").concat(Mt.id)]={start:0,end:nt[Mt.id].idx,distance:be},V){var Nt=Et["".concat(Mt.id,"-").concat(br.id)];Nt&&vr[Zr].push(Nt)}}),Nn[Zr]=Nn[Zr].sort(function(Mt,be){return Mt-be}),V&&(vr[Zr]=vr[Zr].sort(function(Mt,be){return Mt-be})),Hr=x(Pn,Dt,j,Hr);var at=[];if(Object.keys(Pn).forEach(function(Mt){if(Sn[Mt]){at.push(Sn[Mt]);return}var be=Hr[Mt];Sn[Mt]=y(be,Tt,et,ut),at.push(Sn[Mt])}),at=at.sort(function(Mt,be){return be-Mt}),In["".concat(br.id,"-").concat(Zr)]=at,Zr!==Mr)for(var je=(Sr==null?void 0:Sr.length)||0,Zt=function(be){var Nt=Sr[be],Ht=xt[q[Nt.id].idx],dt=Ht.nodeLabelCountMap[Zr],Gt=ht[Zr].length;if(!dt||dt.count<Gt)return Sr.splice(be,1),"continue";for(var tt=!1,ot=0;ot<Gt;ot++)if(dt.dists[ot]>Nn[Zr][ot]){tt=!0;break}if(tt)return Sr.splice(be,1),"continue";var k={};Ht.neighbors.forEach(function(H){var gt=St["".concat(Nt.id,"-").concat(H.id)];k["".concat(Nt.id,"-").concat(H.id)]={start:q[Nt.id].idx,end:q[H.id].idx,distance:gt}}),re=x(k,xt,U,re);var C=[];Object.keys(k).forEach(function(H){if(Ae[H]){C.push(Ae[H]);return}var gt=re[H];Ae[H]=y(gt,Tt,et,ut),C.push(Ae[H])}),C=C.sort(function(H,gt){return gt-H});for(var I=!1,ot=0;ot<Gt;ot++)if(C[ot]<at[ot]){I=!0;break}if(I)return Sr.splice(be,1),"continue"},$t=je-1;$t>=0;$t--)Zt($t)});var Ze=[];Sr==null||Sr.forEach(function(Zr){for(var wn=q[Zr.id].idx,ln=b(U.nodes,ft[wn],wn,et,Q),bn=ln.neighbors,Pn=bn.length,at=!1,je=Pn-1;je>=0;je--){if(bn.length+1<j.nodes.length){at=!0;return}var Zt=bn[je],$t=Zt[et];if(!ht[$t]||!ht[$t].length){bn.splice(je,1);continue}if(!Nn[$t]||!Nn[$t].length){bn.splice(je,1);continue}var Mt="".concat(Zr.id,"-").concat(Zt.id),be=St[Mt],Nt=Nn[$t].length-1,Ht=Nn[$t][Nt];if(be>Ht){bn.splice(je,1);continue}if(V){var dt="".concat(Zt.id,"-").concat(Zr.id),Gt=St[dt];Nt=vr[$t].length-1;var tt=vr[$t][Nt];if(Gt>tt){bn.splice(je,1);continue}}var ot=Ae[Mt]?Ae[Mt]:m(U,Zr,Zt,q,be,xt,Tt,et,ut,Ae,re),k="".concat(br.id,"-").concat($t),C=In[k][In[k].length-1];if(ot<C){bn.splice(je,1);continue}var I=f(on,$t,nt,ht),H=I.minPatternNodeLabelDegree,gt=I.minPatternNodeLabelInDegree,zt=I.minPatternNodeLabelOutDegree;if(q[Zt.id].degree<H){bn.splice(je,1);continue}}at||Ze.push({nodes:[Zr].concat(bn)})});var Er=(0,M.default)(j,br.id,!1).length,ke={};V?(Object.keys(Er).forEach(function(Zr){var wn=nt[Zr].node[et];ke[wn]?ke[wn].push(Er[Zr]):ke[wn]=[Er[Zr]]}),Object.keys(ke).forEach(function(Zr){ke[Zr].sort(function(wn,ln){return wn-ln})})):ke=Nn;for(var Xe=Ze.length,jr=function(wn){var ln=Ze[wn],bn=ln.nodes[0],Pn={},at={};ln.nodes.forEach(function(Cr,se){at[Cr.id]={idx:se,node:Cr,degree:0,inDegree:0,outDegree:0};var Xt=Cr[et];Pn[Xt]?Pn[Xt]++:Pn[Xt]=1});var je=[],Zt={};U.edges.forEach(function(Cr){at[Cr.source]&&at[Cr.target]&&(je.push(Cr),Zt[Cr[ut]]?Zt[Cr[ut]]++:Zt[Cr[ut]]=1,at[Cr.source].degree++,at[Cr.target].degree++,at[Cr.source].outDegree++,at[Cr.target].inDegree++)});for(var $t=Object.keys(At).length,Mt=!1,be=0;be<$t;be++){var Nt=Object.keys(At)[be];if(!Zt[Nt]||Zt[Nt]<At[Nt].length){Mt=!0;break}}if(Mt)return Ze.splice(wn,1),"continue";var Ht=je.length;if(Ht<j.edges.length)return Ze.splice(wn,1),"break";for(var dt=!1,Gt=function(se){var Xt=je[se],fe=Xt[ut],Me=At[fe];if(!Me||!Me.length)return Zt[fe]--,Me&&Zt[fe]<Me.length?(dt=!0,"break"):(je.splice(se,1),at[Xt.source].degree--,at[Xt.target].degree--,at[Xt.source].outDegree--,at[Xt.target].inDegree--,"continue");var pe=at[Xt.source].node[et],Re=at[Xt.target].node[et],nr=!1;if(Me.forEach(function(fr){var tn=nt[fr.source].node,Ln=nt[fr.target].node;tn[et]===pe&&Ln[et]===Re&&(nr=!0),!V&&tn[et]===Re&&Ln[et]===pe&&(nr=!0)}),!nr)return Zt[fe]--,Me&&Zt[fe]<Me.length?(dt=!0,"break"):(je.splice(se,1),at[Xt.source].degree--,at[Xt.target].degree--,at[Xt.source].outDegree--,at[Xt.target].inDegree--,"continue")},be=Ht-1;be>=0;be--){var tt=Gt(be);if(tt==="break")break}if(dt)return Ze.splice(wn,1),"continue";ln.edges=je;var ot=(0,M.default)(ln,ln.nodes[0].id,!1).length;if(Object.keys(ot).reverse().forEach(function(Cr){if(!(Cr===ln.nodes[0].id||dt)){if(ot[Cr]===1/0){var se=at[Cr].node[et];if(Pn[se]--,Pn[se]<ht[se].length){dt=!0;return}var Xt=ln.nodes.indexOf(at[Cr].node);ln.nodes.splice(Xt,1),at[Cr]=void 0;return}var fe=q[Cr].node[et];if(!ke[fe]||!ke[fe].length||ot[Cr]>ke[fe][ke[fe].length-1]){var se=at[Cr].node[et];if(Pn[se]--,Pn[se]<ht[se].length){dt=!0;return}var Xt=ln.nodes.indexOf(at[Cr].node);ln.nodes.splice(Xt,1),at[Cr]=void 0}}}),dt)return Ze.splice(wn,1),"continue";for(var k=!0,C=0;k&&!dt;){k=!1;var I=V?at[bn.id].degree<nt[br.id].degree||at[bn.id].inDegree<nt[br.id].inDegree||at[bn.id].outDegree<nt[br.id].outDegree:at[bn.id].degree<nt[br.id].degree;if(I){dt=!0;break}if(Pn[bn[et]]<ht[bn[et]].length){dt=!0;break}for(var H=ln.nodes.length,gt=H-1;gt>=0;gt--){var zt=ln.nodes[gt],Rt=at[zt.id].degree,qt=at[zt.id].inDegree,Te=at[zt.id].outDegree,he=zt[et],Ue=f(on,he,nt,ht),cr=Ue.minPatternNodeLabelDegree,Ve=Ue.minPatternNodeLabelInDegree,Tr=Ue.minPatternNodeLabelOutDegree,nn=V?Rt<cr||qt<Ve||Te<Tr:Rt<cr;if(nn){if(Pn[zt[et]]--,Pn[zt[et]]<ht[zt[et]].length){dt=!0;break}ln.nodes.splice(gt,1),at[zt.id]=void 0,k=!0}}if(dt||!k&&C!==0)break;Ht=je.length;for(var He=Ht-1;He>=0;He--){var ur=je[He];if(!at[ur.source]||!at[ur.target]){je.splice(He,1);var Ar=ur[ut];if(Zt[Ar]--,at[ur.source]&&(at[ur.source].degree--,at[ur.source].outDegree--),at[ur.target]&&(at[ur.target].degree--,at[ur.target].inDegree--),At[Ar]&&Zt[Ar]<At[Ar].length){dt=!0;break}k=!0}}C++}if(dt||dt||ln.nodes.length<j.nodes.length||je.length<j.edges.length)return Ze.splice(wn,1),"continue"},rn=Xe-1;rn>=0;rn--){var ir=jr(rn);if(ir==="break")break}for(var Lr=Ze.length,dn=function(wn){var ln=Ze[wn],bn={};ln.edges.forEach(function(je){var Zt="".concat(je.source,"-").concat(je.target,"-").concat(je.label);bn[Zt]?bn[Zt]++:bn[Zt]=1});for(var Pn=function(Zt){var $t=Ze[Zt],Mt={};$t.edges.forEach(function(Nt){var Ht="".concat(Nt.source,"-").concat(Nt.target,"-").concat(Nt.label);Mt[Ht]?Mt[Ht]++:Mt[Ht]=1});var be=!0;Object.keys(Mt).length!==Object.keys(bn).length?be=!1:Object.keys(bn).forEach(function(Nt){Mt[Nt]!==bn[Nt]&&(be=!1)}),be&&Ze.splice(Zt,1)},at=Lr-1;at>wn;at--)Pn(at);Lr=Ze.length},rn=0;rn<=Lr-1;rn++)dn(rn);return Ze}}},X=W;G.default=X},505170:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=w(_(62238)),R=_(770643);function w(L){return L&&L.__esModule?L:{default:L}}var M=function(p,b,S,x){b===void 0&&(b=!1),S===void 0&&(S="weight"),x===void 0&&(x=1e3);var y=p.nodes,A=y===void 0?[]:y,E=p.edges,D=E===void 0?[]:E,B={},m={};A.forEach(function(et,ut){var it=(0,R.uniqueId)();et.clusterId=it,B[it]={id:it,nodes:[et]},m[et.id]={node:et,idx:ut}});var f=(0,g.default)(p,b),W=[],X={};f.forEach(function(et,ut){var it=0,yt=A[ut].id;X[yt]={},et.forEach(function(ft,Bt){if(ft){it+=ft;var St=A[Bt].id;X[yt][St]=ft}}),W.push(it)});for(var z=0,U=function(){var ut=!1;if(A.forEach(function(it){var yt={};Object.keys(X[it.id]).forEach(function(Ct){var nt=X[it.id][Ct],ht=m[Ct].node,At=ht.clusterId;yt[At]||(yt[At]=0),yt[At]+=nt});var ft=-1/0,Bt=[];if(Object.keys(yt).forEach(function(Ct){ft<yt[Ct]?(ft=yt[Ct],Bt=[Ct]):ft===yt[Ct]&&Bt.push(Ct)}),!(Bt.length===1&&Bt[0]===it.clusterId)){var St=Bt.indexOf(it.clusterId);if(St>=0&&Bt.splice(St,1),Bt&&Bt.length){ut=!0;var Et=B[it.clusterId],Z=Et.nodes.indexOf(it);Et.nodes.splice(Z,1);var q=Math.floor(Math.random()*Bt.length),bt=B[Bt[q]];bt.nodes.push(it),it.clusterId=bt.id}}}),!ut)return"break";z++};z<x;){var j=U();if(j==="break")break}Object.keys(B).forEach(function(et){var ut=B[et];(!ut.nodes||!ut.nodes.length)&&delete B[et]});var V=[],J={};D.forEach(function(et){var ut=et.source,it=et.target,yt=et[S]||1,ft=m[ut].node.clusterId,Bt=m[it].node.clusterId,St="".concat(ft,"---").concat(Bt);if(J[St])J[St].weight+=yt,J[St].count++;else{var Et={source:ft,target:Bt,weight:yt,count:1};J[St]=Et,V.push(Et)}});var Q=[];return Object.keys(B).forEach(function(et){Q.push(B[et])}),{clusters:Q,clusterEdges:V}},P=M;G.default=P},135179:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=_(413810),R=L(_(62238)),w=L(_(29741)),M=_(103665),P=_(526838);function L(y){return y&&y.__esModule?y:{default:y}}var p=function(A,E,D,B){for(var m=E.length,f=2*B,W=0,X=0;X<m;X++)for(var z=A[X].clusterId,U=0;U<m;U++){var j=A[U].clusterId;if(z===j){var V=E[X][U]||0,J=D[X]||0,Q=D[U]||0;W+=V-J*Q/f}}return W*=1/f,W},b=function(A,E){A===void 0&&(A=[]);for(var D=A.length,B=new w.default([]),m=0;m<D;m++)B=B.add(new w.default(E[m]));var f=B.avg(D);f.normalize();for(var W=0,m=0;m<D;m++){var X=new w.default(E[m]),z=X.squareEuclideanDistance(f);W+=z}var U=[];A.forEach(function(){U.push([])});for(var m=0;m<D;m++){var X=new w.default(E[m]);A[m].clusterInertial=0;for(var j=0;j<D;j++){if(m===j){U[m][j]=0;continue}var V=new w.default(E[j]);U[m][j]=X.squareEuclideanDistance(V),A[m].clusterInertial+=U[m][j]}}for(var J=0,Q=2*D*W,m=0;m<D;m++)for(var et=A[m].clusterId,j=0;j<D;j++){var ut=A[j].clusterId;if(!(m===j||et!==ut)){var it=A[m].clusterInertial*A[j].clusterInertial/Math.pow(Q,2)-U[m][j]/Q;J+=it}}return Number(J.toFixed(4))},S=function(A,E,D,B,m,f,W,X,z){E===void 0&&(E=!1),D===void 0&&(D="weight"),B===void 0&&(B=1e-4),m===void 0&&(m=!1),f===void 0&&(f=void 0),W===void 0&&(W=[]),X===void 0&&(X=["id"]),z===void 0&&(z=1);var U=A.nodes,j=U===void 0?[]:U,V=A.edges,J=V===void 0?[]:V,Q=[];if(m){j.forEach(function(re,Pt){re.properties=re.properties||{},re.originIndex=Pt});var et=[];j.every(function(re){return re.hasOwnProperty("nodeType")})&&(et=Array.from(new Set(j.map(function(re){return re.nodeType}))),j.forEach(function(re){re.properties.nodeType=et.findIndex(function(Pt){return Pt===re.nodeType})}));var ut=(0,M.getAllProperties)(j,f);Q=(0,P.oneHot)(ut,W,X)}var it=1,yt={},ft={};j.forEach(function(re,Pt){var ee=String(it++);re.clusterId=ee,yt[ee]={id:ee,nodes:[re]},ft[re.id]={node:re,idx:Pt}});var Bt=(0,R.default)(A,E),St=[],Et={},Z=0;Bt.forEach(function(re,Pt){var ee=0,ce=j[Pt].id;Et[ce]={},re.forEach(function(Ut,te){if(Ut){ee+=Ut;var ye=j[te].id;Et[ce][ye]=Ut,Z+=Ut}}),St.push(ee)}),Z/=2;for(var q=1/0,bt=1/0,Ct=0,nt=[],ht={};;){m&&j.every(function(re){return re.hasOwnProperty("properties")})?q=p(j,Bt,St,Z)+b(j,Q)*z:q=p(j,Bt,St,Z),Ct===0&&(bt=q,nt=j,ht=yt);var At=q>0&&q>bt&&q-bt<B;if(q>bt&&(nt=j.map(function(re){return{node:re,clusterId:re.clusterId}}),ht=(0,g.clone)(yt),bt=q),At||Ct>100)break;Ct++,Object.keys(yt).forEach(function(re){var Pt=0;J.forEach(function(ee){var ce=ee.source,Ut=ee.target,te=ft[ce].node.clusterId,ye=ft[Ut].node.clusterId;(te===re&&ye!==re||ye===re&&te!==re)&&(Pt=Pt+(ee[D]||1))}),yt[re].sumTot=Pt}),j.forEach(function(re,Pt){var ee=yt[re.clusterId],ce=0,Ut,te=St[Pt]/(2*Z),ye=0,ge=ee.nodes;ge.forEach(function(Hr){var Sn=ft[Hr.id].idx;ye+=Bt[Pt][Sn]||0});var Kt=ye-ee.sumTot*te,xe=ge.filter(function(Hr){return Hr.id!==re.id}),Tt=[];xe.forEach(function(Hr,Sn){Tt[Sn]=Q[Hr.originIndex]});var Ae=b(xe,Q)*z,br=Et[re.id];if(Object.keys(br).forEach(function(Hr){var Sn=ft[Hr].node,In=Sn.clusterId;if(In!==re.clusterId){var Nn=yt[In],vr=Nn.nodes;if(!(!vr||!vr.length)){var Ze=0;vr.forEach(function(ir){var Lr=ft[ir.id].idx;Ze+=Bt[Pt][Lr]||0});var Er=Ze-Nn.sumTot*te,ke=vr.concat([re]),Xe=[];ke.forEach(function(ir,Lr){Xe[Lr]=Q[ir.originIndex]});var jr=b(ke,Q)*z,rn=Er-Kt;m&&(rn=Er+jr-(Kt+Ae)),rn>ce&&(ce=rn,Ut=Nn)}}}),ce>0){Ut.nodes.push(re);var Sr=re.clusterId;re.clusterId=Ut.id;var Mr=ee.nodes.indexOf(re);ee.nodes.splice(Mr,1);var Pr=0,on=0;J.forEach(function(Hr){var Sn=Hr.source,In=Hr.target,Nn=ft[Sn].node.clusterId,vr=ft[In].node.clusterId;(Nn===Ut.id&&vr!==Ut.id||vr===Ut.id&&Nn!==Ut.id)&&(Pr=Pr+(Hr[D]||1)),(Nn===Sr&&vr!==Sr||vr===Sr&&Nn!==Sr)&&(on=on+(Hr[D]||1))}),Ut.sumTot=Pr,ee.sumTot=on}})}var Ot={},xt=0;Object.keys(ht).forEach(function(re){var Pt=ht[re];if(!Pt.nodes||!Pt.nodes.length){delete ht[re];return}var ee=String(xt+1);ee!==re&&(Pt.id=ee,Pt.nodes=Pt.nodes.map(function(ce){return{id:ce.id,clusterId:ee}}),ht[ee]=Pt,Ot[re]=ee,delete ht[re],xt++)}),nt.forEach(function(re){var Pt=re.node,ee=re.clusterId;Pt&&(Pt.clusterId=ee,Pt.clusterId&&Ot[Pt.clusterId]&&(Pt.clusterId=Ot[Pt.clusterId]))});var Dt=[],Yt={};J.forEach(function(re){var Pt=re.source,ee=re.target,ce=re[D]||1,Ut=ft[Pt].node.clusterId,te=ft[ee].node.clusterId;if(!(!Ut||!te)){var ye="".concat(Ut,"---").concat(te);if(Yt[ye])Yt[ye].weight+=ce,Yt[ye].count++;else{var ge={source:Ut,target:te,weight:ce,count:1};Yt[ye]=ge,Dt.push(ge)}}});var ie=[];return Object.keys(ht).forEach(function(re){ie.push(ht[re])}),{clusters:ie,clusterEdges:Dt}},x=S;G.default=x},689454:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=M(_(838823)),R=M(_(257085)),w=_(770643);function M(S){return S&&S.__esModule?S:{default:S}}var P=function(x,y){var A=[],E=x.nodes,D=E===void 0?[]:E,B=x.edges,m=B===void 0?[]:B;if(D.length===0)return A;var f=D[0],W=new Set;W.add(f);var X=function(Q,et){return y?Q.weight-et.weight:0},z=new R.default(X);for((0,w.getEdgesByNodeId)(f.id,m).forEach(function(J){z.insert(J)});!z.isEmpty();){var U=z.delMin(),j=U.source,V=U.target;W.has(j)&&W.has(V)||(A.push(U),W.has(j)||(W.add(j),(0,w.getEdgesByNodeId)(j,m).forEach(function(J){z.insert(J)})),W.has(V)||(W.add(V),(0,w.getEdgesByNodeId)(V,m).forEach(function(J){z.insert(J)})))}return A},L=function(x,y){var A=[],E=x.nodes,D=E===void 0?[]:E,B=x.edges,m=B===void 0?[]:B;if(D.length===0)return A;var f=m.map(function(j){return j});y&&f.sort(function(j,V){return j.weight-V.weight});for(var W=new g.default(D.map(function(j){return j.id}));f.length>0;){var X=f.shift(),z=X.source,U=X.target;W.connected(z,U)||(A.push(X),W.union(z,U))}return A},p=function(x,y,A){var E={prim:P,kruskal:L};return A?E[A](x,y):L(x,y)},b=p;G.default=b},274926:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=w(_(182556)),R=_(770643);function w(L){return L&&L.__esModule?L:{default:L}}var M=function(p,b,S){typeof b!="number"&&(b=1e-6),typeof S!="number"&&(S=.85);for(var x=1,y=0,A=1e3,E=p.nodes,D=E===void 0?[]:E,B=p.edges,m=B===void 0?[]:B,f=D.length,W,X={},z={},U=0;U<f;++U){var j=D[U],V=j.id;X[V]=1/f,z[V]=1/f}for(var J=(0,g.default)(p);A>0&&x>b;){y=0;for(var U=0;U<f;++U){var j=D[U],V=j.id;if(W=0,J[j.id].inDegree===0)X[V]=0;else{for(var Q=(0,R.getNeighbors)(V,m,"source"),et=0;et<Q.length;++et){var ut=Q[et],it=J[ut].outDegree;it>0&&(W+=z[ut]/it)}X[V]=S*W,y+=X[V]}}y=(1-y)/f,x=0;for(var U=0;U<f;++U){var j=D[U],V=j.id;W=X[V]+y,x+=Math.abs(W-z[V]),z[V]=W}A-=1}return z},P=M;G.default=P},257085:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var _=function(M,P){return M-P},g=function(){function w(M){M===void 0&&(M=_),this.compareFn=M,this.list=[]}return w.prototype.getLeft=function(M){return 2*M+1},w.prototype.getRight=function(M){return 2*M+2},w.prototype.getParent=function(M){return M===0?null:Math.floor((M-1)/2)},w.prototype.isEmpty=function(){return this.list.length<=0},w.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},w.prototype.delMin=function(){var M=this.top(),P=this.list.pop();return this.list.length>0&&(this.list[0]=P,this.moveDown(0)),M},w.prototype.insert=function(M){if(M!==null){this.list.push(M);var P=this.list.length-1;return this.moveUp(P),!0}return!1},w.prototype.moveUp=function(M){for(var P=this.getParent(M);M&&M>0&&this.compareFn(this.list[P],this.list[M])>0;){var L=this.list[P];this.list[P]=this.list[M],this.list[M]=L,M=P,P=this.getParent(M)}},w.prototype.moveDown=function(M){var P,L=M,p=this.getLeft(M),b=this.getRight(M),S=this.list.length;p!==null&&p<S&&this.compareFn(this.list[L],this.list[p])>0?L=p:b!==null&&b<S&&this.compareFn(this.list[L],this.list[b])>0&&(L=b),M!==L&&(P=[this.list[L],this.list[M]],this.list[M]=P[0],this.list[L]=P[1],this.moveDown(L))},w}(),R=g;G.default=R},488481:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.LinkedListNode=void 0;var _=function(P,L){return P===L},g=function(){function M(P,L){L===void 0&&(L=null),this.value=P,this.next=L}return M.prototype.toString=function(P){return P?P(this.value):"".concat(this.value)},M}();G.LinkedListNode=g;var R=function(){function M(P){P===void 0&&(P=_),this.head=null,this.tail=null,this.compare=P}return M.prototype.prepend=function(P){var L=new g(P,this.head);return this.head=L,this.tail||(this.tail=L),this},M.prototype.append=function(P){var L=new g(P);return this.head?(this.tail.next=L,this.tail=L,this):(this.head=L,this.tail=L,this)},M.prototype.delete=function(P){if(!this.head)return null;for(var L=null;this.head&&this.compare(this.head.value,P);)L=this.head,this.head=this.head.next;var p=this.head;if(p!==null)for(;p.next;)this.compare(p.next.value,P)?(L=p.next,p.next=p.next.next):p=p.next;return this.compare(this.tail.value,P)&&(this.tail=p),L},M.prototype.find=function(P){var L=P.value,p=L===void 0?void 0:L,b=P.callback,S=b===void 0?void 0:b;if(!this.head)return null;for(var x=this.head;x;){if(S&&S(x.value)||p!==void 0&&this.compare(x.value,p))return x;x=x.next}return null},M.prototype.deleteTail=function(){var P=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,P;for(var L=this.head;L.next;)L.next.next?L=L.next:L.next=null;return this.tail=L,P},M.prototype.deleteHead=function(){if(!this.head)return null;var P=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),P},M.prototype.fromArray=function(P){var L=this;return P.forEach(function(p){return L.append(p)}),this},M.prototype.toArray=function(){for(var P=[],L=this.head;L;)P.push(L),L=L.next;return P},M.prototype.reverse=function(){for(var P=this.head,L=null,p=null;P;)p=P.next,P.next=L,L=P,P=p;this.tail=this.head,this.head=L},M.prototype.toString=function(P){return P===void 0&&(P=void 0),this.toArray().map(function(L){return L.toString(P)}).toString()},M}(),w=R;G.default=w},893026:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=R(_(488481));function R(P){return P&&P.__esModule?P:{default:P}}var w=function(){function P(){this.linkedList=new g.default}return P.prototype.isEmpty=function(){return!this.linkedList.head},P.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},P.prototype.enqueue=function(L){this.linkedList.append(L)},P.prototype.dequeue=function(){var L=this.linkedList.deleteHead();return L?L.value:null},P.prototype.toString=function(L){return this.linkedList.toString(L)},P}(),M=w;G.default=M},838823:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var _=function(){function R(w){this.count=w.length,this.parent={};for(var M=0,P=w;M<P.length;M++){var L=P[M];this.parent[L]=L}}return R.prototype.find=function(w){for(;this.parent[w]!==w;)w=this.parent[w];return w},R.prototype.union=function(w,M){var P=this.find(w),L=this.find(M);P!==L&&(P<L?(this.parent[M]!==M&&this.union(this.parent[M],w),this.parent[M]=this.parent[w]):(this.parent[w]!==w&&this.union(this.parent[w],M),this.parent[w]=this.parent[M]))},R.prototype.connected=function(w,M){return this.find(w)===this.find(M)},R}(),g=_;G.default=g},317892:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.DistanceType=void 0;var _;G.DistanceType=_,function(g){g.EuclideanDistance="euclideanDistance"}(_||(G.DistanceType=_={}))},770643:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.uniqueId=G.getOutEdgesNodeId=G.getNeighbors=G.getEdgesByNodeId=void 0;var _=function(P,L,p){L===void 0&&(L=[]);var b=L.filter(function(A){return A.source===P||A.target===P});if(p==="target"){var S=function(E){return E.source===P};return b.filter(S).map(function(A){return A.target})}if(p==="source"){var x=function(E){return E.target===P};return b.filter(x).map(function(A){return A.source})}var y=function(E){return E.source===P?E.target:E.source};return b.map(y)};G.getNeighbors=_;var g=function(P,L){return L.filter(function(p){return p.source===P})};G.getOutEdgesNodeId=g;var R=function(P,L){return L.filter(function(p){return p.source===P||p.target===P})};G.getEdgesByNodeId=R;var w=function(P){P===void 0&&(P=0);var L="".concat(Math.random()).split(".")[1].substr(0,5),p="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(P,"-").concat(L).concat(p)};G.uniqueId=w},526838:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.oneHot=G.getDistance=G.getAllKeyValueMap=G.default=void 0;var g=_(413810),R=_(317892),w=M(_(29741));function M(S){return S&&S.__esModule?S:{default:S}}var P=function(x,y,A){var E=[];y!=null&&y.length?E=y:(x.forEach(function(B){E=E.concat(Object.keys(B))}),E=(0,g.uniq)(E));var D={};return E.forEach(function(B){var m=[];x.forEach(function(f){f[B]!==void 0&&f[B]!==""&&m.push(f[B])}),m.length&&!(A!=null&&A.includes(B))&&(D[B]=(0,g.uniq)(m))}),D};G.getAllKeyValueMap=P;var L=function(x,y,A){var E=P(x,y,A),D=[];if(!Object.keys(E).length)return D;var B=Object.values(E),m=B.every(function(f){return f.every(function(W){return typeof W=="number"})});return x.forEach(function(f,W){var X=[];Object.keys(E).forEach(function(z){var U=f[z],j=E[z],V=j.findIndex(function(et){return U===et}),J=[];if(m)J.push(U);else for(var Q=0;Q<j.length;Q++)Q===V?J.push(1):J.push(0);X=X.concat(J)}),D[W]=X}),D};G.oneHot=L;var p=function(x,y,A,E){A===void 0&&(A=R.DistanceType.EuclideanDistance);var D=0;switch(A){case R.DistanceType.EuclideanDistance:D=new w.default(x).euclideanDistance(new w.default(y));break;default:break}return D};G.getDistance=p;var b={getAllKeyValueMap:P,oneHot:L,getDistance:p};G.default=b},103665:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getPropertyWeight=G.getAllSortProperties=G.getAllProperties=G.default=void 0;var g=_(592935),R=function(b,S){b===void 0&&(b=[]),S===void 0&&(S=100);var x={};b.forEach(function(A){A.properties&&Object.keys(A.properties).forEach(function(E){if(E==="id"||!"".concat(A.properties[E]).match(g.secondReg)&&!"".concat(A.properties[E]).match(g.dateReg)&&isNaN(Number(A.properties[E]))){x.hasOwnProperty(E)&&delete x[E];return}x.hasOwnProperty(E)?x[E]+=1:x[E]=1})});var y=Object.keys(x).sort(function(A,E){return x[E]-x[A]});return y.length<S?y:y.slice(0,S)};G.getAllSortProperties=R;var w=function(b,S){return S.map(function(x){return b.hasOwnProperty(x)?b[x]:0})},M=function(b){for(var S=R(b),x=[],y=0;y<b.length;y++)x[y]=w(b[y].properties,S);return x};G.getPropertyWeight=M;var P=function(b,S){S===void 0&&(S=void 0);var x=[];return b.forEach(function(y){S===void 0&&x.push(y),y[S]!==void 0&&x.push(y[S])}),x};G.getAllProperties=P;var L={getAllSortProperties:R,getPropertyWeight:M,getAllProperties:P};G.default=L},29741:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=_(413810),R=function(){function M(P){this.arr=P}return M.prototype.getArr=function(){return this.arr||[]},M.prototype.add=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length))return new M(p);if(!(p!=null&&p.length))return new M(this.arr);if(this.arr.length===p.length){var b=[];for(var S in this.arr)b[S]=this.arr[S]+p[S];return new M(b)}},M.prototype.subtract=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length))return new M(p);if(!(p!=null&&p.length))return new M(this.arr);if(this.arr.length===p.length){var b=[];for(var S in this.arr)b[S]=this.arr[S]-p[S];return new M(b)}},M.prototype.avg=function(P){var L=[];if(P!==0)for(var p in this.arr)L[p]=this.arr[p]/P;return new M(L)},M.prototype.negate=function(){var P=[];for(var L in this.arr)P[L]=-this.arr[L];return new M(P)},M.prototype.squareEuclideanDistance=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var b=0;for(var S in this.arr)b+=Math.pow(this.arr[S]-P.arr[S],2);return b}},M.prototype.euclideanDistance=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var b=0;for(var S in this.arr)b+=Math.pow(this.arr[S]-P.arr[S],2);return Math.sqrt(b)}else console.error("The two vectors are unequal in length.")},M.prototype.normalize=function(){var P=[],L=(0,g.clone)(this.arr);L.sort(function(x,y){return x-y});var p=L[L.length-1],b=L[0];for(var S in this.arr)P[S]=(this.arr[S]-b)/(p-b);return new M(P)},M.prototype.norm2=function(){var P;if(!(!((P=this.arr)===null||P===void 0)&&P.length))return 0;var L=0;for(var p in this.arr)L+=Math.pow(this.arr[p],2);return Math.sqrt(L)},M.prototype.dot=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var b=0;for(var S in this.arr)b+=this.arr[S]*P.arr[S];return b}else console.error("The two vectors are unequal in length.")},M.prototype.equal=function(P){var L,p=P.arr;if(((L=this.arr)===null||L===void 0?void 0:L.length)!==(p==null?void 0:p.length))return!1;for(var b in this.arr)if(this.arr[b]!==p[b])return!1;return!0},M}(),w=R;G.default=w},831656:function(Ne,G,_){"use strict";function g(z){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},g(z)}Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"GADDI",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(G,"breadthFirstSearch",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(G,"connectedComponent",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(G,"depthFirstSearch",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(G,"detectCycle",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(G,"dijkstra",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(G,"findAllPath",{enumerable:!0,get:function(){return S.findAllPath}}),Object.defineProperty(G,"findShortestPath",{enumerable:!0,get:function(){return S.findShortestPath}}),Object.defineProperty(G,"floydWarshall",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(G,"getAdjMatrix",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(G,"getDegree",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(G,"getInDegree",{enumerable:!0,get:function(){return P.getInDegree}}),Object.defineProperty(G,"getNeighbors",{enumerable:!0,get:function(){return m.getNeighbors}}),Object.defineProperty(G,"getOutDegree",{enumerable:!0,get:function(){return P.getOutDegree}}),Object.defineProperty(G,"labelPropagation",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(G,"louvain",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(G,"minimumSpanningTree",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(G,"pageRank",{enumerable:!0,get:function(){return D.default}});var R=X(_(62238)),w=X(_(683764)),M=X(_(759527)),P=W(_(182556)),L=X(_(994282)),p=X(_(45891)),b=X(_(878089)),S=_(241727),x=X(_(975033)),y=X(_(505170)),A=X(_(135179)),E=X(_(689454)),D=X(_(274926)),B=X(_(882812)),m=_(770643);function f(z){if(typeof WeakMap!="function")return null;var U=new WeakMap,j=new WeakMap;return(f=function(J){return J?j:U})(z)}function W(z,U){if(!U&&z&&z.__esModule)return z;if(z===null||g(z)!=="object"&&typeof z!="function")return{default:z};var j=f(U);if(j&&j.has(z))return j.get(z);var V={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in z)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(z,Q)){var et=J?Object.getOwnPropertyDescriptor(z,Q):null;et&&(et.get||et.set)?Object.defineProperty(V,Q,et):V[Q]=z[Q]}return V.default=z,j&&j.set(z,V),V}function X(z){return z&&z.__esModule?z:{default:z}}},66044:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.MESSAGE=G.ALGORITHM=void 0;var _={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};G.ALGORITHM=_;var g={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};G.MESSAGE=g},70585:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var g=_(66044),R=w(_(612067));function w(L){return L&&L.__esModule?L:{default:L}}var M=function(p){return function(){for(var b=[],S=0;S<arguments.length;S++)b[S]=arguments[S];return new Promise(function(x,y){var A=new R.default;A.postMessage({_algorithmType:p,data:b}),A.onmessage=function(E){var D=E.data,B=D.data,m=D._algorithmType;g.MESSAGE.SUCCESS===m?x(B):y(),A.terminate()}})}},P=M;G.default=P},430485:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.pageRankAsync=G.minimumSpanningTreeAsync=G.louvainAsync=G.labelPropagationAsync=G.getOutDegreeAsync=G.getNeighborsAsync=G.getInDegreeAsync=G.getDegreeAsync=G.getAdjMatrixAsync=G.floydWarshallAsync=G.findShortestPathAsync=G.findAllPathAsync=G.dijkstraAsync=G.detectCycleAsync=G.detectAllUndirectedCycleAsync=G.detectAllDirectedCycleAsync=G.detectAllCyclesAsync=G.connectedComponentAsync=G.GADDIAsync=void 0;var g=w(_(70585)),R=_(66044);function w(V){return V&&V.__esModule?V:{default:V}}var M=function(J,Q){return(0,g.default)(R.ALGORITHM.getAdjMatrix).apply(void 0,[J,Q])};G.getAdjMatrixAsync=M;var P=function(J,Q){return(0,g.default)(R.ALGORITHM.connectedComponent).apply(void 0,[J,Q])};G.connectedComponentAsync=P;var L=function(J){return(0,g.default)(R.ALGORITHM.getDegree)(J)};G.getDegreeAsync=L;var p=function(J,Q){return(0,g.default)(R.ALGORITHM.getInDegree)(J,Q)};G.getInDegreeAsync=p;var b=function(J,Q){return(0,g.default)(R.ALGORITHM.getOutDegree)(J,Q)};G.getOutDegreeAsync=b;var S=function(J){return(0,g.default)(R.ALGORITHM.detectCycle)(J)};G.detectCycleAsync=S;var x=function(J){return(0,g.default)(R.ALGORITHM.detectAllCycles)(J)};G.detectAllCyclesAsync=x;var y=function(J){return(0,g.default)(R.ALGORITHM.detectAllDirectedCycle)(J)};G.detectAllDirectedCycleAsync=y;var A=function(J){return(0,g.default)(R.ALGORITHM.detectAllUndirectedCycle)(J)};G.detectAllUndirectedCycleAsync=A;var E=function(J,Q,et,ut){return(0,g.default)(R.ALGORITHM.dijkstra).apply(void 0,[J,Q,et,ut])};G.dijkstraAsync=E;var D=function(J,Q,et,ut){return(0,g.default)(R.ALGORITHM.findAllPath).apply(void 0,[J,Q,et,ut])};G.findAllPathAsync=D;var B=function(J,Q,et,ut,it){return(0,g.default)(R.ALGORITHM.findShortestPath).apply(void 0,[J,Q,et,ut,it])};G.findShortestPathAsync=B;var m=function(J,Q){return(0,g.default)(R.ALGORITHM.floydWarshall).apply(void 0,[J,Q])};G.floydWarshallAsync=m;var f=function(J,Q,et,ut){return ut===void 0&&(ut=1e3),(0,g.default)(R.ALGORITHM.labelPropagation)(J,Q,et,ut)};G.labelPropagationAsync=f;var W=function(J,Q,et,ut){return(0,g.default)(R.ALGORITHM.louvain)(J,Q,et,ut)};G.louvainAsync=W;var X=function(J,Q,et){return(0,g.default)(R.ALGORITHM.minimumSpanningTree).apply(void 0,[J,Q,et])};G.minimumSpanningTreeAsync=X;var z=function(J,Q,et){return(0,g.default)(R.ALGORITHM.pageRank).apply(void 0,[J,Q,et])};G.pageRankAsync=z;var U=function(J,Q,et){return(0,g.default)(R.ALGORITHM.getNeighbors).apply(void 0,[J,Q,et])};G.getNeighborsAsync=U;var j=function(J,Q,et,ut,it,yt,ft){return et===void 0&&(et=!1),yt===void 0&&(yt="cluster"),ft===void 0&&(ft="cluster"),(0,g.default)(R.ALGORITHM.GADDI).apply(void 0,[J,Q,et,ut,it,yt,ft])};G.GADDIAsync=j},612067:function(Ne,G,_){"use strict";function g(b){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},g(b)}Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var R=P(_(831656)),w=_(66044);function M(b){if(typeof WeakMap!="function")return null;var S=new WeakMap,x=new WeakMap;return(M=function(A){return A?x:S})(b)}function P(b,S){if(!S&&b&&b.__esModule)return b;if(b===null||g(b)!=="object"&&typeof b!="function")return{default:b};var x=M(S);if(x&&x.has(b))return x.get(b);var y={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in b)if(E!=="default"&&Object.prototype.hasOwnProperty.call(b,E)){var D=A?Object.getOwnPropertyDescriptor(b,E):null;D&&(D.get||D.set)?Object.defineProperty(y,E,D):y[E]=b[E]}return y.default=b,x&&x.set(b,y),y}var L=typeof self!="undefined"?self:{};L.onmessage=function(b){var S=b.data,x=S._algorithmType,y=S.data;if(x){if(typeof R[x]=="function"){var A=R[x].apply(R,y);L.postMessage({_algorithmType:w.MESSAGE.SUCCESS,data:A});return}L.postMessage({_algorithmType:w.MESSAGE.FAILURE})}};var p=null;G.default=p},901029:function(Ne,G,_){"use strict";_.r(G),_.d(G,{Kernel:function(){return yt},World:function(){return Pn}});var g=_(115861),R=_(204942),w=_(215671),M=_(143144),P=_(936719),L=_.n(P),p=_(281763),b=_.n(p),S=_(701469),x=_.n(S),y=_(364687),A=_.n(y),E=null,D=1;function B(){return D++}var m=null,f=null,W;(function(at){at[at.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",at[at.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",at[at.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",at[at.POINTS=0]="POINTS",at[at.LINES=1]="LINES",at[at.LINE_LOOP=2]="LINE_LOOP",at[at.LINE_STRIP=3]="LINE_STRIP",at[at.TRIANGLES=4]="TRIANGLES",at[at.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",at[at.TRIANGLE_FAN=6]="TRIANGLE_FAN",at[at.ZERO=0]="ZERO",at[at.ONE=1]="ONE",at[at.SRC_COLOR=768]="SRC_COLOR",at[at.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",at[at.SRC_ALPHA=770]="SRC_ALPHA",at[at.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",at[at.DST_ALPHA=772]="DST_ALPHA",at[at.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",at[at.DST_COLOR=774]="DST_COLOR",at[at.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",at[at.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",at[at.FUNC_ADD=32774]="FUNC_ADD",at[at.BLEND_EQUATION=32777]="BLEND_EQUATION",at[at.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",at[at.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",at[at.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",at[at.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",at[at.MAX_EXT=32776]="MAX_EXT",at[at.MIN_EXT=32775]="MIN_EXT",at[at.BLEND_DST_RGB=32968]="BLEND_DST_RGB",at[at.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",at[at.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",at[at.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",at[at.CONSTANT_COLOR=32769]="CONSTANT_COLOR",at[at.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",at[at.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",at[at.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",at[at.BLEND_COLOR=32773]="BLEND_COLOR",at[at.ARRAY_BUFFER=34962]="ARRAY_BUFFER",at[at.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",at[at.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",at[at.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",at[at.STREAM_DRAW=35040]="STREAM_DRAW",at[at.STATIC_DRAW=35044]="STATIC_DRAW",at[at.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",at[at.BUFFER_SIZE=34660]="BUFFER_SIZE",at[at.BUFFER_USAGE=34661]="BUFFER_USAGE",at[at.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",at[at.FRONT=1028]="FRONT",at[at.BACK=1029]="BACK",at[at.FRONT_AND_BACK=1032]="FRONT_AND_BACK",at[at.CULL_FACE=2884]="CULL_FACE",at[at.BLEND=3042]="BLEND",at[at.DITHER=3024]="DITHER",at[at.STENCIL_TEST=2960]="STENCIL_TEST",at[at.DEPTH_TEST=2929]="DEPTH_TEST",at[at.SCISSOR_TEST=3089]="SCISSOR_TEST",at[at.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",at[at.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",at[at.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",at[at.NO_ERROR=0]="NO_ERROR",at[at.INVALID_ENUM=1280]="INVALID_ENUM",at[at.INVALID_VALUE=1281]="INVALID_VALUE",at[at.INVALID_OPERATION=1282]="INVALID_OPERATION",at[at.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",at[at.CW=2304]="CW",at[at.CCW=2305]="CCW",at[at.LINE_WIDTH=2849]="LINE_WIDTH",at[at.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",at[at.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",at[at.CULL_FACE_MODE=2885]="CULL_FACE_MODE",at[at.FRONT_FACE=2886]="FRONT_FACE",at[at.DEPTH_RANGE=2928]="DEPTH_RANGE",at[at.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",at[at.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",at[at.DEPTH_FUNC=2932]="DEPTH_FUNC",at[at.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",at[at.STENCIL_FUNC=2962]="STENCIL_FUNC",at[at.STENCIL_FAIL=2964]="STENCIL_FAIL",at[at.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",at[at.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",at[at.STENCIL_REF=2967]="STENCIL_REF",at[at.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",at[at.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",at[at.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",at[at.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",at[at.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",at[at.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",at[at.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",at[at.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",at[at.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",at[at.VIEWPORT=2978]="VIEWPORT",at[at.SCISSOR_BOX=3088]="SCISSOR_BOX",at[at.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",at[at.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",at[at.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",at[at.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",at[at.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",at[at.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",at[at.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",at[at.RED_BITS=3410]="RED_BITS",at[at.GREEN_BITS=3411]="GREEN_BITS",at[at.BLUE_BITS=3412]="BLUE_BITS",at[at.ALPHA_BITS=3413]="ALPHA_BITS",at[at.DEPTH_BITS=3414]="DEPTH_BITS",at[at.STENCIL_BITS=3415]="STENCIL_BITS",at[at.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",at[at.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",at[at.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",at[at.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",at[at.SAMPLES=32937]="SAMPLES",at[at.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",at[at.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",at[at.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",at[at.DONT_CARE=4352]="DONT_CARE",at[at.FASTEST=4353]="FASTEST",at[at.NICEST=4354]="NICEST",at[at.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",at[at.BYTE=5120]="BYTE",at[at.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",at[at.SHORT=5122]="SHORT",at[at.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",at[at.INT=5124]="INT",at[at.UNSIGNED_INT=5125]="UNSIGNED_INT",at[at.FLOAT=5126]="FLOAT",at[at.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",at[at.ALPHA=6406]="ALPHA",at[at.RGB=6407]="RGB",at[at.RGBA=6408]="RGBA",at[at.LUMINANCE=6409]="LUMINANCE",at[at.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",at[at.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",at[at.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",at[at.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",at[at.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",at[at.VERTEX_SHADER=35633]="VERTEX_SHADER",at[at.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",at[at.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",at[at.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",at[at.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",at[at.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",at[at.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",at[at.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",at[at.SHADER_TYPE=35663]="SHADER_TYPE",at[at.DELETE_STATUS=35712]="DELETE_STATUS",at[at.LINK_STATUS=35714]="LINK_STATUS",at[at.VALIDATE_STATUS=35715]="VALIDATE_STATUS",at[at.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",at[at.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",at[at.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",at[at.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",at[at.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",at[at.NEVER=512]="NEVER",at[at.LESS=513]="LESS",at[at.EQUAL=514]="EQUAL",at[at.LEQUAL=515]="LEQUAL",at[at.GREATER=516]="GREATER",at[at.NOTEQUAL=517]="NOTEQUAL",at[at.GEQUAL=518]="GEQUAL",at[at.ALWAYS=519]="ALWAYS",at[at.KEEP=7680]="KEEP",at[at.REPLACE=7681]="REPLACE",at[at.INCR=7682]="INCR",at[at.DECR=7683]="DECR",at[at.INVERT=5386]="INVERT",at[at.INCR_WRAP=34055]="INCR_WRAP",at[at.DECR_WRAP=34056]="DECR_WRAP",at[at.VENDOR=7936]="VENDOR",at[at.RENDERER=7937]="RENDERER",at[at.VERSION=7938]="VERSION",at[at.NEAREST=9728]="NEAREST",at[at.LINEAR=9729]="LINEAR",at[at.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",at[at.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",at[at.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",at[at.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",at[at.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",at[at.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",at[at.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",at[at.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",at[at.TEXTURE_2D=3553]="TEXTURE_2D",at[at.TEXTURE=5890]="TEXTURE",at[at.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",at[at.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",at[at.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",at[at.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",at[at.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",at[at.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",at[at.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",at[at.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",at[at.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",at[at.TEXTURE0=33984]="TEXTURE0",at[at.TEXTURE1=33985]="TEXTURE1",at[at.TEXTURE2=33986]="TEXTURE2",at[at.TEXTURE3=33987]="TEXTURE3",at[at.TEXTURE4=33988]="TEXTURE4",at[at.TEXTURE5=33989]="TEXTURE5",at[at.TEXTURE6=33990]="TEXTURE6",at[at.TEXTURE7=33991]="TEXTURE7",at[at.TEXTURE8=33992]="TEXTURE8",at[at.TEXTURE9=33993]="TEXTURE9",at[at.TEXTURE10=33994]="TEXTURE10",at[at.TEXTURE11=33995]="TEXTURE11",at[at.TEXTURE12=33996]="TEXTURE12",at[at.TEXTURE13=33997]="TEXTURE13",at[at.TEXTURE14=33998]="TEXTURE14",at[at.TEXTURE15=33999]="TEXTURE15",at[at.TEXTURE16=34e3]="TEXTURE16",at[at.TEXTURE17=34001]="TEXTURE17",at[at.TEXTURE18=34002]="TEXTURE18",at[at.TEXTURE19=34003]="TEXTURE19",at[at.TEXTURE20=34004]="TEXTURE20",at[at.TEXTURE21=34005]="TEXTURE21",at[at.TEXTURE22=34006]="TEXTURE22",at[at.TEXTURE23=34007]="TEXTURE23",at[at.TEXTURE24=34008]="TEXTURE24",at[at.TEXTURE25=34009]="TEXTURE25",at[at.TEXTURE26=34010]="TEXTURE26",at[at.TEXTURE27=34011]="TEXTURE27",at[at.TEXTURE28=34012]="TEXTURE28",at[at.TEXTURE29=34013]="TEXTURE29",at[at.TEXTURE30=34014]="TEXTURE30",at[at.TEXTURE31=34015]="TEXTURE31",at[at.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",at[at.REPEAT=10497]="REPEAT",at[at.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",at[at.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",at[at.FLOAT_VEC2=35664]="FLOAT_VEC2",at[at.FLOAT_VEC3=35665]="FLOAT_VEC3",at[at.FLOAT_VEC4=35666]="FLOAT_VEC4",at[at.INT_VEC2=35667]="INT_VEC2",at[at.INT_VEC3=35668]="INT_VEC3",at[at.INT_VEC4=35669]="INT_VEC4",at[at.BOOL=35670]="BOOL",at[at.BOOL_VEC2=35671]="BOOL_VEC2",at[at.BOOL_VEC3=35672]="BOOL_VEC3",at[at.BOOL_VEC4=35673]="BOOL_VEC4",at[at.FLOAT_MAT2=35674]="FLOAT_MAT2",at[at.FLOAT_MAT3=35675]="FLOAT_MAT3",at[at.FLOAT_MAT4=35676]="FLOAT_MAT4",at[at.SAMPLER_2D=35678]="SAMPLER_2D",at[at.SAMPLER_CUBE=35680]="SAMPLER_CUBE",at[at.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",at[at.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",at[at.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",at[at.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",at[at.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",at[at.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",at[at.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",at[at.COMPILE_STATUS=35713]="COMPILE_STATUS",at[at.LOW_FLOAT=36336]="LOW_FLOAT",at[at.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",at[at.HIGH_FLOAT=36338]="HIGH_FLOAT",at[at.LOW_INT=36339]="LOW_INT",at[at.MEDIUM_INT=36340]="MEDIUM_INT",at[at.HIGH_INT=36341]="HIGH_INT",at[at.FRAMEBUFFER=36160]="FRAMEBUFFER",at[at.RENDERBUFFER=36161]="RENDERBUFFER",at[at.RGBA4=32854]="RGBA4",at[at.RGB5_A1=32855]="RGB5_A1",at[at.RGB565=36194]="RGB565",at[at.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",at[at.STENCIL_INDEX=6401]="STENCIL_INDEX",at[at.STENCIL_INDEX8=36168]="STENCIL_INDEX8",at[at.DEPTH_STENCIL=34041]="DEPTH_STENCIL",at[at.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",at[at.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",at[at.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",at[at.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",at[at.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",at[at.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",at[at.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",at[at.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",at[at.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",at[at.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",at[at.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",at[at.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",at[at.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",at[at.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",at[at.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",at[at.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",at[at.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",at[at.NONE=0]="NONE",at[at.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",at[at.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",at[at.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",at[at.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",at[at.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",at[at.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",at[at.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",at[at.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",at[at.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",at[at.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",at[at.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",at[at.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",at[at.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",at[at.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",at[at.COPY_SRC=1]="COPY_SRC",at[at.COPY_DST=2]="COPY_DST",at[at.SAMPLED=4]="SAMPLED",at[at.STORAGE=8]="STORAGE",at[at.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(W||(W={}));var X=function(){function at(){(0,w.Z)(this,at),this.config=void 0}return(0,M.Z)(at,[{key:"get",value:function(){return this.config}},{key:"set",value:function(Zt){this.config=Zt}}]),at}(),z=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),U;(function(at){at.Void="Void",at.Boolean="Boolean",at.Float="Float",at.Uint32="Uint32",at.Int32="Int32",at.Vector="Vector",at.Vector2Float="vec2<f32>",at.Vector3Float="vec3<f32>",at.Vector4Float="vec4<f32>",at.Vector2Boolean="vec2<bool>",at.Vector3Boolean="vec3<bool>",at.Vector4Boolean="vec4<bool>",at.Vector2Uint="vec2<u32>",at.Vector3Uint="vec3<u32>",at.Vector4Uint="vec4<u32>",at.Vector2Int="vec2<i32>",at.Vector3Int="vec3<i32>",at.Vector4Int="vec4<i32>",at.Matrix="Matrix",at.Matrix3x3Float="mat3x3<f32>",at.Matrix4x4Float="mat4x4<i32>",at.Struct="Struct",at.FloatArray="Float[]",at.Vector4FloatArray="vec4<f32>[]"})(U||(U={}));var j;(function(at){at.Program="Program",at.Identifier="Identifier",at.VariableDeclaration="VariableDeclaration",at.BlockStatement="BlockStatement",at.ReturnStatement="ReturnStatement",at.FunctionDeclaration="FunctionDeclaration",at.VariableDeclarator="VariableDeclarator",at.AssignmentExpression="AssignmentExpression",at.LogicalExpression="LogicalExpression",at.BinaryExpression="BinaryExpression",at.ArrayExpression="ArrayExpression",at.UnaryExpression="UnaryExpression",at.UpdateExpression="UpdateExpression",at.FunctionExpression="FunctionExpression",at.MemberExpression="MemberExpression",at.ConditionalExpression="ConditionalExpression",at.ExpressionStatement="ExpressionStatement",at.CallExpression="CallExpression",at.NumThreadStatement="NumThreadStatement",at.StorageStatement="StorageStatement",at.DoWhileStatement="DoWhileStatement",at.WhileStatement="WhileStatement",at.ForStatement="ForStatement",at.BreakStatement="BreakStatement",at.ContinueStatement="ContinueStatement",at.IfStatement="IfStatement",at.ImportedFunctionStatement="ImportedFunctionStatement"})(j||(j={}));var V;(function(at){at.Input="Input",at.Output="Output",at.Uniform="Uniform",at.Workgroup="Workgroup",at.UniformConstant="UniformConstant",at.Image="Image",at.StorageBuffer="StorageBuffer",at.Private="Private",at.Function="Function"})(V||(V={}));var J;(function(at){at.GLSL100="GLSL100",at.GLSL450="GLSL450",at.WGSL="WGSL"})(J||(J={}));var Q="__DefineValuePlaceholder__";function et(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ut(at,je){var Zt=Object.keys(at);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(at);je&&($t=$t.filter(function(Mt){return Object.getOwnPropertyDescriptor(at,Mt).enumerable})),Zt.push.apply(Zt,$t)}return Zt}function it(at){for(var je=1;je<arguments.length;je++){var Zt=arguments[je]!=null?arguments[je]:{};je%2?ut(Object(Zt),!0).forEach(function($t){(0,R.Z)(at,$t,Zt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(Zt)):ut(Object(Zt)).forEach(function($t){Object.defineProperty(at,$t,Object.getOwnPropertyDescriptor(Zt,$t))})}return at}var yt=function(){function at(je,Zt){(0,w.Z)(this,at),this.engine=je,this.configService=Zt,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,M.Z)(at,[{key:"init",value:function(){var Zt=this.configService.get(),$t=Zt.canvas,Mt=Zt.engineOptions;this.initPromise=this.engine.init(it({canvas:$t||et(),antialiasing:!1},Mt))}},{key:"setBundle",value:function(Zt){this.compiledBundle=JSON.parse(JSON.stringify(Zt))}},{key:"setDispatch",value:function(Zt){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=Zt),this}},{key:"setMaxIteration",value:function(Zt){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=Zt),this}},{key:"setBinding",value:function(Zt,$t){var Mt=this;if(typeof Zt=="string"){var be=b()($t)||L()($t)||x()($t);if(this.compiledBundle&&this.compiledBundle.context){var Nt=this.compiledBundle.context.defines.find(function(dt){return dt.name===Zt});if(Nt)return Nt.value=$t,this;var Ht=this.compiledBundle.context.uniforms.find(function(dt){return dt.name===Zt});Ht&&(be?(Ht.data=$t,Ht.isReferer=!1,Ht.storageClass===V.Uniform?this.model&&this.model.updateUniform(Zt,$t):this.model&&this.model.updateBuffer(Zt,$t)):(Ht.isReferer=!0,Ht.data=$t))}}else Object.keys(Zt).forEach(function(dt){Mt.setBinding(dt,Zt[dt])});return this}},{key:"execute",value:function(){var je=(0,g.Z)(A().mark(function $t(){var Mt=this,be,Nt,Ht=arguments;return A().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(be=Ht.length>0&&Ht[0]!==void 0?Ht[0]:1,!this.dirty){Gt.next=6;break}return this.compiledBundle.context&&(be>1?this.compiledBundle.context.maxIteration=be:this.compiledBundle.context.maxIteration++),Gt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(tt){var ot=tt.isReferer;return ot}).forEach(function(tt){var ot=tt.data,k=tt.name;Mt.model.confirmInput(ot.model,k)}),Nt=0;Nt<be;Nt++)this.model.run();return this.engine.endFrame(),Gt.abrupt("return",this);case 12:case"end":return Gt.stop()}},$t,this)}));function Zt(){return je.apply(this,arguments)}return Zt}()},{key:"getOutput",value:function(){var je=(0,g.Z)(A().mark(function $t(){return A().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",this.model.readData());case 1:case"end":return be.stop()}},$t,this)}));function Zt(){return je.apply(this,arguments)}return Zt}()},{key:"compile",value:function(){var je=(0,g.Z)(A().mark(function $t(){var Mt,be,Nt;return A().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.next=2,this.initPromise;case 2:return Mt=it({},this.compiledBundle.context),be=this.engine.supportWebGPU?this.engine.useWGSL?J.WGSL:J.GLSL450:J.GLSL100,Nt=this.compiledBundle.shaders[be],Mt.defines.filter(function(Gt){return Gt.runtime}).forEach(function(Gt){var tt="".concat(Q).concat(Gt.name);Nt=Nt.replace(tt,"".concat(Gt.value))}),Mt.shader=Nt,Mt.uniforms.forEach(function(Gt){if(!Gt.data&&Gt.storageClass===V.StorageBuffer){var tt=1;Gt.type===U.FloatArray?tt=1:Gt.type===U.Vector4FloatArray&&(tt=4),Gt.data=new Float32Array(Mt.output.length*tt).fill(0)}}),this.compiledBundle.context=Mt,dt.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=dt.sent;case 12:case"end":return dt.stop()}},$t,this)}));function Zt(){return je.apply(this,arguments)}return Zt}()}]),at}(),ft=_(481550),Bt=_.n(ft),St=function(){function at(je,Zt){(0,w.Z)(this,at),this.attribute=void 0,this.buffer=void 0;var $t=Zt.buffer,Mt=Zt.offset,be=Zt.stride,Nt=Zt.normalized,Ht=Zt.size,dt=Zt.divisor;this.buffer=$t,this.attribute={buffer:$t.get(),offset:Mt||0,stride:be||0,normalized:Nt||!1,divisor:dt||0},Ht&&(this.attribute.size=Ht)}return(0,M.Z)(at,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(Zt){this.buffer.subData(Zt)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),at}(),Et,Z,q,bt,Ct,nt,ht,At,Ot,xt,Dt,Yt,ie,re,Pt=(Et={},(0,R.Z)(Et,W.POINTS,"points"),(0,R.Z)(Et,W.LINES,"lines"),(0,R.Z)(Et,W.LINE_LOOP,"line loop"),(0,R.Z)(Et,W.LINE_STRIP,"line strip"),(0,R.Z)(Et,W.TRIANGLES,"triangles"),(0,R.Z)(Et,W.TRIANGLE_FAN,"triangle fan"),(0,R.Z)(Et,W.TRIANGLE_STRIP,"triangle strip"),Et),ee=(Z={},(0,R.Z)(Z,W.STATIC_DRAW,"static"),(0,R.Z)(Z,W.DYNAMIC_DRAW,"dynamic"),(0,R.Z)(Z,W.STREAM_DRAW,"stream"),Z),ce=(q={},(0,R.Z)(q,W.BYTE,"int8"),(0,R.Z)(q,W.UNSIGNED_INT,"int16"),(0,R.Z)(q,W.INT,"int32"),(0,R.Z)(q,W.UNSIGNED_BYTE,"uint8"),(0,R.Z)(q,W.UNSIGNED_SHORT,"uint16"),(0,R.Z)(q,W.UNSIGNED_INT,"uint32"),(0,R.Z)(q,W.FLOAT,"float"),q),Ut=(bt={},(0,R.Z)(bt,W.ALPHA,"alpha"),(0,R.Z)(bt,W.LUMINANCE,"luminance"),(0,R.Z)(bt,W.LUMINANCE_ALPHA,"luminance alpha"),(0,R.Z)(bt,W.RGB,"rgb"),(0,R.Z)(bt,W.RGBA,"rgba"),(0,R.Z)(bt,W.RGBA4,"rgba4"),(0,R.Z)(bt,W.RGB5_A1,"rgb5 a1"),(0,R.Z)(bt,W.RGB565,"rgb565"),(0,R.Z)(bt,W.DEPTH_COMPONENT,"depth"),(0,R.Z)(bt,W.DEPTH_STENCIL,"depth stencil"),bt),te=(Ct={},(0,R.Z)(Ct,W.DONT_CARE,"dont care"),(0,R.Z)(Ct,W.NICEST,"nice"),(0,R.Z)(Ct,W.FASTEST,"fast"),Ct),ye=(nt={},(0,R.Z)(nt,W.NEAREST,"nearest"),(0,R.Z)(nt,W.LINEAR,"linear"),(0,R.Z)(nt,W.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,R.Z)(nt,W.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,R.Z)(nt,W.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,R.Z)(nt,W.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),nt),ge=(ht={},(0,R.Z)(ht,W.REPEAT,"repeat"),(0,R.Z)(ht,W.CLAMP_TO_EDGE,"clamp"),(0,R.Z)(ht,W.MIRRORED_REPEAT,"mirror"),ht),Kt=(At={},(0,R.Z)(At,W.NONE,"none"),(0,R.Z)(At,W.BROWSER_DEFAULT_WEBGL,"browser"),At),xe=(Ot={},(0,R.Z)(Ot,W.NEVER,"never"),(0,R.Z)(Ot,W.ALWAYS,"always"),(0,R.Z)(Ot,W.LESS,"less"),(0,R.Z)(Ot,W.LEQUAL,"lequal"),(0,R.Z)(Ot,W.GREATER,"greater"),(0,R.Z)(Ot,W.GEQUAL,"gequal"),(0,R.Z)(Ot,W.EQUAL,"equal"),(0,R.Z)(Ot,W.NOTEQUAL,"notequal"),Ot),Tt=(xt={},(0,R.Z)(xt,W.FUNC_ADD,"add"),(0,R.Z)(xt,W.MIN_EXT,"min"),(0,R.Z)(xt,W.MAX_EXT,"max"),(0,R.Z)(xt,W.FUNC_SUBTRACT,"subtract"),(0,R.Z)(xt,W.FUNC_REVERSE_SUBTRACT,"reverse subtract"),xt),Ae=(Dt={},(0,R.Z)(Dt,W.ZERO,"zero"),(0,R.Z)(Dt,W.ONE,"one"),(0,R.Z)(Dt,W.SRC_COLOR,"src color"),(0,R.Z)(Dt,W.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,R.Z)(Dt,W.SRC_ALPHA,"src alpha"),(0,R.Z)(Dt,W.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,R.Z)(Dt,W.DST_COLOR,"dst color"),(0,R.Z)(Dt,W.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,R.Z)(Dt,W.DST_ALPHA,"dst alpha"),(0,R.Z)(Dt,W.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,R.Z)(Dt,W.CONSTANT_COLOR,"constant color"),(0,R.Z)(Dt,W.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,R.Z)(Dt,W.CONSTANT_ALPHA,"constant alpha"),(0,R.Z)(Dt,W.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,R.Z)(Dt,W.SRC_ALPHA_SATURATE,"src alpha saturate"),Dt),br=(Yt={},(0,R.Z)(Yt,W.NEVER,"never"),(0,R.Z)(Yt,W.ALWAYS,"always"),(0,R.Z)(Yt,W.LESS,"less"),(0,R.Z)(Yt,W.LEQUAL,"lequal"),(0,R.Z)(Yt,W.GREATER,"greater"),(0,R.Z)(Yt,W.GEQUAL,"gequal"),(0,R.Z)(Yt,W.EQUAL,"equal"),(0,R.Z)(Yt,W.NOTEQUAL,"notequal"),Yt),Sr=(ie={},(0,R.Z)(ie,W.ZERO,"zero"),(0,R.Z)(ie,W.KEEP,"keep"),(0,R.Z)(ie,W.REPLACE,"replace"),(0,R.Z)(ie,W.INVERT,"invert"),(0,R.Z)(ie,W.INCR,"increment"),(0,R.Z)(ie,W.DECR,"decrement"),(0,R.Z)(ie,W.INCR_WRAP,"increment wrap"),(0,R.Z)(ie,W.DECR_WRAP,"decrement wrap"),ie),Mr=(re={},(0,R.Z)(re,W.FRONT,"front"),(0,R.Z)(re,W.BACK,"back"),re),Pr=function(){function at(je,Zt){(0,w.Z)(this,at),this.buffer=void 0;var $t=Zt.data,Mt=Zt.usage,be=Zt.type;this.buffer=je.buffer({data:$t,usage:ee[Mt||W.STATIC_DRAW],type:ce[be||W.UNSIGNED_BYTE]})}return(0,M.Z)(at,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(Zt){var $t=Zt.data,Mt=Zt.offset;this.buffer.subdata($t,Mt)}}]),at}(),on=_(974902);function Hr(at,je){var Zt=Object.keys(at);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(at);je&&($t=$t.filter(function(Mt){return Object.getOwnPropertyDescriptor(at,Mt).enumerable})),Zt.push.apply(Zt,$t)}return Zt}function Sn(at){for(var je=1;je<arguments.length;je++){var Zt=arguments[je]!=null?arguments[je]:{};je%2?Hr(Object(Zt),!0).forEach(function($t){(0,R.Z)(at,$t,Zt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(Zt)):Hr(Object(Zt)).forEach(function($t){Object.defineProperty(at,$t,Object.getOwnPropertyDescriptor(Zt,$t))})}return at}var In=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Nn=0,vr=!1,Ze=function(){function at(je,Zt){var $t=this;(0,w.Z)(this,at),this.reGl=je,this.context=Zt,this.entity=B(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var Mt={};this.context.uniforms.forEach(function(Gt){var tt=Gt.name,ot=Gt.type,k=Gt.data,C=Gt.isReferer,I=Gt.storageClass;if(I===V.StorageBuffer){if(C)$t.textureCache[tt]={data:void 0},Mt["".concat(tt,"Size")]=function(){return k.compiledBundle.context.output.textureSize};else{$t.textureCache[tt]=$t.calcDataTexture(tt,ot,k);var H=$t.textureCache[tt],gt=H.textureWidth,zt=H.isOutput;Mt["".concat(tt,"Size")]=[gt,gt],zt&&($t.outputTextureName=tt,$t.context.needPingpong&&($t.outputTextureName="".concat(tt,"Output"),$t.textureCache[$t.outputTextureName]=$t.calcDataTexture(tt,ot,k)))}Mt[tt]=function(){return vr&&console.log("[".concat($t.entity,"]: ").concat(tt," ").concat($t.textureCache[tt].id)),$t.textureCache[tt].texture}}else if(I===V.Uniform){if(k&&(Array.isArray(k)||L()(k))&&k.length>16)throw new Error("invalid data type ".concat(ot));Mt[tt]=function(){return Gt.data}}});var be=this.getOuputDataTexture(),Nt=be.textureWidth,Ht=be.texelCount;Mt.u_OutputTextureSize=[Nt,Nt],Mt.u_OutputTexelCount=Ht,this.context.output.textureSize=[Nt,Nt];var dt={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:Mt,vert:In,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(dt)}return(0,M.Z)(at,[{key:"run",value:function(){var Zt=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){Zt.computeCommand()}),vr&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var je=(0,g.Z)(A().mark(function $t(){var Mt=this,be,Nt,Ht,dt,Gt,tt,ot,k;return A().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){be=Mt.reGl.read()}),!be){I.next=6;break}if(Nt=this.getOuputDataTexture(),Ht=Nt.originalDataLength,dt=Nt.elementsPerTexel,Gt=Nt.typedArrayConstructor,tt=Gt===void 0?Float32Array:Gt,ot=[],dt!==4)for(k=0;k<be.length;k+=4)dt===1?ot.push(be[k]):dt===2?ot.push(be[k],be[k+1]):ot.push(be[k],be[k+1],be[k+2]);else ot=be;return I.abrupt("return",new tt(ot.slice(0,Ht)));case 6:return I.abrupt("return",new Float32Array);case 7:case"end":return I.stop()}},$t,this)}));function Zt(){return je.apply(this,arguments)}return Zt}()},{key:"confirmInput",value:function(Zt,$t){var Mt;this.entity===Zt.entity?(this.dynamicPingpong=!0,Mt=this):Mt=Zt,this.textureCache[$t].id=Mt.getOuputDataTexture().id,this.textureCache[$t].texture=Mt.getOuputDataTexture().texture,vr&&console.log("[".concat(this.entity,"]: confirm input ").concat($t," from model ").concat(Mt.entity,", ").concat(Mt.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(Zt,$t){var Mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,be=this.context.uniforms.find(function(Gt){var tt=Gt.name;return tt===Zt});if(be){var Nt=this.calcDataTexture(Zt,be.type,$t),Ht=Nt.texture,dt=Nt.data;this.textureCache[Zt].data=dt,this.textureCache[Zt].texture=Ht}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var Zt=this.context.output.name;this.textureCache[Zt].id=this.getOuputDataTexture().id,this.textureCache[Zt].texture=this.getOuputDataTexture().texture}var $t=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=$t,vr&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var Zt=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=Zt}},{key:"cloneDataTexture",value:function(Zt){var $t=Zt.data,Mt=Zt.textureWidth;return Sn(Sn({},Zt),{},{id:Nn++,texture:this.reGl.texture({width:Mt,height:Mt,data:$t,type:"float"})})}},{key:"calcDataTexture",value:function(Zt,$t,Mt){var be=1;$t===U.Vector4FloatArray&&(be=4);for(var Nt=[],Ht=0;Ht<Mt.length;Ht+=be)be===1?Nt.push(Mt[Ht],0,0,0):be===2?Nt.push(Mt[Ht],Mt[Ht+1],0,0):be===3?Nt.push(Mt[Ht],Mt[Ht+1],Mt[Ht+2],0):be===4&&Nt.push(Mt[Ht],Mt[Ht+1],Mt[Ht+2],Mt[Ht+3]);var dt=Mt.length,Gt=Math.ceil(dt/be),tt=Math.ceil(Math.sqrt(Gt)),ot=tt*tt;Gt<ot&&Nt.push.apply(Nt,(0,on.Z)(new Array((ot-Gt)*4).fill(0)));var k=this.reGl.texture({width:tt,height:tt,data:Nt,type:"float"});return{id:Nn++,data:Nt,originalDataLength:dt,typedArrayConstructor:L()(Mt)?Mt.constructor:void 0,textureWidth:tt,texture:k,texelCount:Gt,elementsPerTexel:be,isOutput:Zt===this.context.output.name}}}]),at}(),Er=function(){function at(je,Zt){(0,w.Z)(this,at),this.elements=void 0;var $t=Zt.data,Mt=Zt.usage,be=Zt.type,Nt=Zt.count;this.elements=je.elements({data:$t,usage:ee[Mt||W.STATIC_DRAW],type:ce[be||W.UNSIGNED_BYTE],count:Nt})}return(0,M.Z)(at,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(Zt){var $t=Zt.data;this.elements.subdata($t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),at}(),ke=function(){function at(je,Zt){(0,w.Z)(this,at),this.framebuffer=void 0;var $t=Zt.width,Mt=Zt.height,be=Zt.color,Nt=Zt.colors,Ht=Zt.depth,dt=Zt.stencil,Gt={width:$t,height:Mt};Array.isArray(Nt)&&(Gt.colors=Nt.map(function(tt){return tt.get()})),be&&typeof be!="boolean"&&(Gt.color=be.get()),this.framebuffer=je.framebuffer(Gt)}return(0,M.Z)(at,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(Zt){var $t=Zt.width,Mt=Zt.height;this.framebuffer.resize($t,Mt)}}]),at}(),Xe=_(671002),jr=_(968630),rn=_.n(jr);function ir(at){var je={};return Object.keys(at).forEach(function(Zt){Lr(Zt,at[Zt],je,"")}),je}function Lr(at,je,Zt,$t){if(je===null||typeof je=="number"||typeof je=="boolean"||Array.isArray(je)&&typeof je[0]=="number"||L()(je)||je===""||je.resize!==void 0){Zt["".concat($t&&$t+".").concat(at)]=je;return}rn()(je)&&Object.keys(je).forEach(function(Mt){Lr(Mt,je[Mt],Zt,"".concat($t&&$t+".").concat(at))}),Array.isArray(je)&&je.forEach(function(Mt,be){Object.keys(Mt).forEach(function(Nt){Lr(Nt,Mt[Nt],Zt,"".concat($t&&$t+".").concat(at,"[").concat(be,"]"))})})}function dn(at,je){var Zt=Object.keys(at);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(at);je&&($t=$t.filter(function(Mt){return Object.getOwnPropertyDescriptor(at,Mt).enumerable})),Zt.push.apply(Zt,$t)}return Zt}function Zr(at){for(var je=1;je<arguments.length;je++){var Zt=arguments[je]!=null?arguments[je]:{};je%2?dn(Object(Zt),!0).forEach(function($t){(0,R.Z)(at,$t,Zt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(Zt)):dn(Object(Zt)).forEach(function($t){Object.defineProperty(at,$t,Object.getOwnPropertyDescriptor(Zt,$t))})}return at}var wn=function(){function at(je,Zt){(0,w.Z)(this,at),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=je;var $t=Zt.vs,Mt=Zt.fs,be=Zt.defines,Nt=Zt.attributes,Ht=Zt.uniforms,dt=Zt.primitive,Gt=Zt.count,tt=Zt.elements,ot=Zt.depth,k=Zt.blend,C=Zt.stencil,I=Zt.cull,H=Zt.instances,gt=Zt.scissor,zt=Zt.viewport,Rt={};Ht&&(this.uniforms=ir(Ht),Object.keys(Ht).forEach(function(Ue){Rt[Ue]=je.prop(Ue)}));var qt={};Object.keys(Nt).forEach(function(Ue){qt[Ue]=Nt[Ue].get()});var Te=be&&this.generateDefines(be)||"",he={attributes:qt,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Te,`
`).concat(Mt),uniforms:Rt,vert:`
`.concat(Te,`
`).concat($t),primitive:Pt[dt===void 0?W.TRIANGLES:dt]};H&&(he.instances=H),Gt&&(he.count=Gt),tt&&(he.elements=tt.get()),gt&&(he.scissor=gt),zt&&(he.viewport=zt),this.initDepthDrawParams({depth:ot},he),this.initBlendDrawParams({blend:k},he),this.initStencilDrawParams({stencil:C},he),this.initCullDrawParams({cull:I},he),this.drawCommand=je(he)}return(0,M.Z)(at,[{key:"addUniforms",value:function(Zt){this.uniforms=Zr(Zr({},this.uniforms),ir(Zt))}},{key:"draw",value:function(Zt){var $t=Zr(Zr({},this.uniforms),ir(Zt.uniforms||{})),Mt={};Object.keys($t).forEach(function(be){var Nt=(0,Xe.Z)($t[be]);Nt==="boolean"||Nt==="number"||Array.isArray($t[be])||$t[be].BYTES_PER_ELEMENT?Mt[be]=$t[be]:Nt==="string"||(Mt[be]=$t[be].get())}),this.drawCommand(Mt)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(Zt,$t){var Mt=Zt.depth;Mt&&($t.depth={enable:Mt.enable===void 0?!0:!!Mt.enable,mask:Mt.mask===void 0?!0:!!Mt.mask,func:xe[Mt.func||W.LESS],range:Mt.range||[0,1]})}},{key:"initBlendDrawParams",value:function(Zt,$t){var Mt=Zt.blend;if(Mt){var be=Mt.enable,Nt=Mt.func,Ht=Mt.equation,dt=Mt.color,Gt=dt===void 0?[0,0,0,0]:dt;$t.blend={enable:!!be,func:{srcRGB:Ae[Nt&&Nt.srcRGB||W.SRC_ALPHA],srcAlpha:Ae[Nt&&Nt.srcAlpha||W.SRC_ALPHA],dstRGB:Ae[Nt&&Nt.dstRGB||W.ONE_MINUS_SRC_ALPHA],dstAlpha:Ae[Nt&&Nt.dstAlpha||W.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Tt[Ht&&Ht.rgb||W.FUNC_ADD],alpha:Tt[Ht&&Ht.alpha||W.FUNC_ADD]},color:Gt}}}},{key:"initStencilDrawParams",value:function(Zt,$t){var Mt=Zt.stencil;if(Mt){var be=Mt.enable,Nt=Mt.mask,Ht=Nt===void 0?-1:Nt,dt=Mt.func,Gt=dt===void 0?{cmp:W.ALWAYS,ref:0,mask:-1}:dt,tt=Mt.opFront,ot=tt===void 0?{fail:W.KEEP,zfail:W.KEEP,zpass:W.KEEP}:tt,k=Mt.opBack,C=k===void 0?{fail:W.KEEP,zfail:W.KEEP,zpass:W.KEEP}:k;$t.stencil={enable:!!be,mask:Ht,func:Zr(Zr({},Gt),{},{cmp:br[Gt.cmp]}),opFront:{fail:Sr[ot.fail],zfail:Sr[ot.zfail],zpass:Sr[ot.zpass]},opBack:{fail:Sr[C.fail],zfail:Sr[C.zfail],zpass:Sr[C.zpass]}}}}},{key:"initCullDrawParams",value:function(Zt,$t){var Mt=Zt.cull;if(Mt){var be=Mt.enable,Nt=Mt.face,Ht=Nt===void 0?W.BACK:Nt;$t.cull={enable:!!be,face:Mr[Ht]}}}},{key:"generateDefines",value:function(Zt){return Object.keys(Zt).map(function($t){return"#define ".concat($t," ").concat(Number(Zt[$t]))}).join(`
`)}}]),at}(),ln=function(){function at(je,Zt){(0,w.Z)(this,at),this.texture=void 0,this.width=void 0,this.height=void 0;var $t=Zt.data,Mt=Zt.type,be=Mt===void 0?W.UNSIGNED_BYTE:Mt,Nt=Zt.width,Ht=Zt.height,dt=Zt.flipY,Gt=dt===void 0?!1:dt,tt=Zt.format,ot=tt===void 0?W.RGBA:tt,k=Zt.mipmap,C=k===void 0?!1:k,I=Zt.wrapS,H=I===void 0?W.CLAMP_TO_EDGE:I,gt=Zt.wrapT,zt=gt===void 0?W.CLAMP_TO_EDGE:gt,Rt=Zt.aniso,qt=Rt===void 0?0:Rt,Te=Zt.alignment,he=Te===void 0?1:Te,Ue=Zt.premultiplyAlpha,cr=Ue===void 0?!1:Ue,Ve=Zt.mag,Tr=Ve===void 0?W.NEAREST:Ve,nn=Zt.min,He=nn===void 0?W.NEAREST:nn,ur=Zt.colorSpace,Ar=ur===void 0?W.BROWSER_DEFAULT_WEBGL:ur;this.width=Nt,this.height=Ht;var Cr={width:Nt,height:Ht,type:ce[be],format:Ut[ot],wrapS:ge[H],wrapT:ge[zt],mag:ye[Tr],min:ye[He],alignment:he,flipY:Gt,colorSpace:Kt[Ar],premultiplyAlpha:cr,aniso:qt};$t&&(Cr.data=$t),typeof C=="number"?Cr.mipmap=te[C]:typeof C=="boolean"&&(Cr.mipmap=C),this.texture=je.texture(Cr)}return(0,M.Z)(at,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(Zt){var $t=Zt.width,Mt=Zt.height;this.texture.resize($t,Mt),this.width=$t,this.height=Mt}},{key:"destroy",value:function(){this.texture.destroy()}}]),at}(),bn=function(){function at(){var je=this;(0,w.Z)(this,at),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var Zt=(0,g.Z)(A().mark(function $t(Mt){return A().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(!Mt.uniforms){Nt.next=3;break}return Nt.next=3,Promise.all(Object.keys(Mt.uniforms).map(function(){var Ht=(0,g.Z)(A().mark(function dt(Gt){var tt;return A().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!(Mt.uniforms[Gt]&&Mt.uniforms[Gt].load!==void 0)){k.next=5;break}return k.next=3,Mt.uniforms[Gt].load();case 3:tt=k.sent,Mt.uniforms[Gt]=tt;case 5:case"end":return k.stop()}},dt)}));return function(dt){return Ht.apply(this,arguments)}}()));case 3:return Nt.abrupt("return",new wn(je.gl,Mt));case 4:case"end":return Nt.stop()}},$t)}));return function($t){return Zt.apply(this,arguments)}}(),this.createAttribute=function(Zt){return new St(je.gl,Zt)},this.createBuffer=function(Zt){return new Pr(je.gl,Zt)},this.createElements=function(Zt){return new Er(je.gl,Zt)},this.createTexture2D=function(Zt){return new ln(je.gl,Zt)},this.createFramebuffer=function(Zt){return new ke(je.gl,Zt)},this.useFramebuffer=function(Zt,$t){je.gl({framebuffer:Zt?Zt.get():null})($t)},this.createComputeModel=function(){var Zt=(0,g.Z)(A().mark(function $t(Mt){return A().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.abrupt("return",new Ze(je.gl,Mt));case 1:case"end":return Nt.stop()}},$t)}));return function($t){return Zt.apply(this,arguments)}}(),this.clear=function(Zt){var $t=Zt.color,Mt=Zt.depth,be=Zt.stencil,Nt=Zt.framebuffer,Ht=Nt===void 0?null:Nt,dt={color:$t,depth:Mt,stencil:be};dt.framebuffer=Ht===null?Ht:Ht.get(),je.gl.clear(dt)},this.setScissor=function(Zt){je.gl&&je.gl._gl&&(Zt.enable&&Zt.box?(je.gl._gl.enable(W.SCISSOR_TEST),je.gl._gl.scissor(Zt.box.x,Zt.box.y,Zt.box.width,Zt.box.height)):je.gl._gl.disable(W.SCISSOR_TEST),je.gl._refresh())},this.viewport=function(Zt){var $t=Zt.x,Mt=Zt.y,be=Zt.width,Nt=Zt.height;je.gl&&je.gl._gl&&(je.gl._gl.viewport($t,Mt,be,Nt),je.gl._refresh())},this.readPixels=function(Zt){var $t=Zt.framebuffer,Mt=Zt.x,be=Zt.y,Nt=Zt.width,Ht=Zt.height,dt={x:Mt,y:be,width:Nt,height:Ht};return $t&&(dt.framebuffer=$t.get()),je.gl.read(dt)},this.getCanvas=function(){return je.$canvas},this.getGLContext=function(){return je.gl._gl},this.destroy=function(){je.gl&&(je.gl.destroy(),je.inited=!1)}}return(0,M.Z)(at,[{key:"init",value:function(){var je=(0,g.Z)(A().mark(function $t(Mt){return A().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(!this.inited){Nt.next=2;break}return Nt.abrupt("return");case 2:return this.$canvas=Mt.canvas,Nt.next=5,new Promise(function(Ht,dt){Bt()({canvas:Mt.canvas,attributes:{alpha:!0,antialias:Mt.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(tt,ot){(tt||!ot)&&dt(tt),Ht(ot)}})});case 5:this.gl=Nt.sent,this.inited=!0;case 7:case"end":return Nt.stop()}},$t,this)}));function Zt($t){return je.apply(this,arguments)}return Zt}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),at}(),Pn=function(){function at(){(0,w.Z)(this,at),this.engine=void 0,this.configService=new X}return(0,M.Z)(at,[{key:"setConfig",value:function(Zt){this.configService.set(Zt)}},{key:"setEngine",value:function(Zt){this.engine=Zt}},{key:"createEntity",value:function(){return B()}},{key:"createKernel",value:function(Zt){var $t=new yt(this.engine,this.configService);return typeof Zt=="string"?$t.setBundle(JSON.parse(Zt)):$t.setBundle(Zt),$t.init(),$t}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var Zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$t=new at;return $t.setConfig(Zt),$t.setEngine(new bn),$t}}]),at}()},909676:function(Ne,G,_){"use strict";_.d(G,{ZP:function(){return wS}});var g={};_.r(g),_.d(g,{GADDI:function(){return Pi},Stack:function(){return ro},breadthFirstSearch:function(){return ee},connectedComponent:function(){return te},cosineSimilarity:function(){return Rt},default:function(){return oi},depthFirstSearch:function(){return br},detectAllCycles:function(){return on},detectAllDirectedCycle:function(){return Pr},detectAllUndirectedCycle:function(){return Mr},detectCycle:function(){return Hr},detectDirectedCycle:function(){return mo},dijkstra:function(){return Nn},findAllPath:function(){return Er},findShortestPath:function(){return Ze},floydWarshall:function(){return Xe},getAdjMatrix:function(){return q},getDegree:function(){return ge},getInDegree:function(){return Kt},getNeighbors:function(){return xt},getOutDegree:function(){return xe},iLouvain:function(){return ot},kCore:function(){return C},kMeans:function(){return gt},labelPropagation:function(){return rn},louvain:function(){return Gt},minimumSpanningTree:function(){return Ar},nodesCosineSimilarity:function(){return Te},pageRank:function(){return se}});var R={};_.r(R),_.d(R,{Line:function(){return va},applyMatrix:function(){return Kr},compare:function(){return ue},distance:function(){return Kn},floydWarshall:function(){return ra},fractionToLine:function(){return Fi},getAdjMatrix:function(){return na},getBBoxBoundLine:function(){return ci},getCircleCenterByPoints:function(){return Mn},getCircleIntersectByPoint:function(){return Ir},getDegree:function(){return Da},getEllipseIntersectByPoint:function(){return xr},getLineIntersect:function(){return rr},getPointsCenter:function(){return Ai},getRectIntersectByPoint:function(){return Or},intersectBBox:function(){return Qa},invertMatrix:function(){return un},isPointInPolygon:function(){return si},isPointsOverlap:function(){return Io},isPolygonsIntersect:function(){return _a},itemIntersectByLine:function(){return fi},lerp:function(){return vi},lerpArray:function(){return zi},move:function(){return ua},pointLineDistance:function(){return Ba},pointLineSquareDist:function(){return Oo},pointRectSquareDist:function(){return Li},rotate:function(){return Ga},scale:function(){return Qn},scaleMatrix:function(){return Un},squareDist:function(){return Yi},translate:function(){return Ya}});var w={};_.r(w),_.d(w,{cloneBesidesImg:function(){return Ko},getAnimateCfgWithCallback:function(){return os},getBBox:function(){return Ia},getComboBBox:function(){return ws},getLabelPosition:function(){return no},getLetterWidth:function(){return Yo},getLoopCfgs:function(){return di},getTextSize:function(){return hs},plainCombosToTrees:function(){return Es},reconstructTree:function(){return As},shouldRefreshEdge:function(){return nu},traverseTree:function(){return Oi},traverseTreeUp:function(){return ao},truncateLabelByLength:function(){return qo}});var M={};_.r(M),_.d(M,{catmullRomToBezier:function(){return Y},fillPath:function(){return Qi},fillPathByDiff:function(){return Xa},formatPath:function(){return ps},intersection:function(){return ma},parsePathArray:function(){return Ye},parsePathString:function(){return h},pathToAbsolute:function(){return Ft},pathToCurve:function(){return _e},rectPath:function(){return Dn}});var P={};_.r(P),_.d(P,{easeBack:function(){return pl},easeBackIn:function(){return tc},easeBackInOut:function(){return pl},easeBackOut:function(){return ec},easeBounce:function(){return Ru},easeBounceIn:function(){return Bf},easeBounceInOut:function(){return Xc},easeBounceOut:function(){return Ru},easeCircle:function(){return Yc},easeCircleIn:function(){return Df},easeCircleInOut:function(){return Yc},easeCircleOut:function(){return hu},easeCubic:function(){return js},easeCubicIn:function(){return Pu},easeCubicInOut:function(){return js},easeCubicOut:function(){return du},easeElastic:function(){return rc},easeElasticIn:function(){return gl},easeElasticInOut:function(){return nc},easeElasticOut:function(){return rc},easeExp:function(){return ql},easeExpIn:function(){return Ql},easeExpInOut:function(){return ql},easeExpOut:function(){return Wc},easeLinear:function(){return Ms},easePoly:function(){return Lu},easePolyIn:function(){return Vl},easePolyInOut:function(){return Lu},easePolyOut:function(){return Hl},easeQuad:function(){return Ps},easeQuadIn:function(){return Du},easeQuadInOut:function(){return Ps},easeQuadOut:function(){return fu},easeSin:function(){return $l},easeSinIn:function(){return Nu},easeSinInOut:function(){return $l},easeSinOut:function(){return ls}});var L={};_.r(L),_.d(L,{calculationItemsBBox:function(){return Ov},cloneEvent:function(){return F0},formatPadding:function(){return Th},isNaN:function(){return Xu},isViewportChanged:function(){return z0},processParallelEdges:function(){return G0},uniqueId:function(){return Kf}});var p={};_.r(p),_.d(p,{getClosedSpline:function(){return kh},getControlPoint:function(){return Vd},getSpline:function(){return Vv},getStarPath:function(){return om},paddedHull:function(){return $v},pathToPoints:function(){return Rh},pointsToPolygon:function(){return im},roundedHull:function(){return Bh}});var b={};_.r(b),_.d(b,{defaultSubjectColors:function(){return Tm}});var S={};_.r(S),_.d(S,{isForce:function(){return sp}});var x={};_.r(x),_.d(x,{Base:function(){return mu},Circle:function(){return qm},Ellipse:function(){return ty},Image:function(){return ry},Line:function(){return ay},Marker:function(){return sy},Path:function(){return $h},Polygon:function(){return gy},Polyline:function(){return yy},Rect:function(){return wy},Text:function(){return My}});var y={};_.r(y),_.d(y,{Base:function(){return Qs},Circle:function(){return Py},Dom:function(){return Ny},Ellipse:function(){return ky},Image:function(){return Fy},Line:function(){return Gy},Marker:function(){return Wy},Path:function(){return Xy},Polygon:function(){return Vy},Polyline:function(){return Zy},Rect:function(){return Jy},Text:function(){return a1}});var A={};_.r(A),_.d(A,{getColorSetsBySubjectColors:function(){return P1},getColorsWithSubjectColor:function(){return tv},mixColor:function(){return $o}});var E={};_.r(E),_.d(E,{arrayToTextureData:function(){return j1},attributesToTextureData:function(){return X1},buildTextureData:function(){return U1},buildTextureDataWithOneEdgeAttr:function(){return W1},buildTextureDataWithTwoEdgeAttr:function(){return Y1},proccessToFunc:function(){return G1},radialLayout:function(){return V1}});var D={};_.r(D),_.d(D,{gpuDetector:function(){return $p}});var B={};_.r(B),_.d(B,{assign:function(){return mc},default:function(){return Pg},defaultI18n:function(){return fv},format:function(){return Ig},parse:function(){return Dg},setGlobalDateI18n:function(){return wg},setGlobalDateMasks:function(){return Og}});var m=_(570655),f=_(413810),W={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,f.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,f.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},X=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,f.clone)(W);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var l={};u&&((0,f.each)(u,function(c,d){l[d]=(0,f.wrapBehavior)(s,c)}),this.events=l)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),z=X,U=z,j="*",V=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[j]||[],s=function(u){for(var l=u.length,c=0;c<l;c++)if(u[c]){var d=u[c],T=d.callback,O=d.once;O&&(u.splice(c,1),u.length===0&&delete t._events[e],l--,c--),T.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),J=V,Q=_(935600);function et(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return Q.fromTranslation(r,t),Q.multiply(i,r,e)}function ut(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return Q.fromRotation(r,t),Q.multiply(i,r,e)}function it(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return Q.fromScaling(r,t),Q.multiply(i,r,e)}function yt(i,e,t){return Q.multiply(i,t,e)}function ft(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":et(t,t,[a[1],a[2]]);break;case"s":it(t,t,[a[1],a[2]]);break;case"r":ut(t,t,a[1]);break;case"m":yt(t,t,a[1]);break;default:break}}return t}function Bt(i,e){return i[0]*e[1]-e[0]*i[1]}function St(i,e,t){var r=vec2.angle(i,e),n=Bt(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function Et(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var Z=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var l=[];a.push(l)}),n&&n.forEach(function(s){var u=s.source,l=s.target,c=o[u],d=o[l];!c&&c!==0||!d&&d!==0||(a[c][d]=1,t||(a[d][c]=1))}),a},q=Z,bt=function(e,t){return e===t},Ct=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),nt=function(){function i(e){e===void 0&&(e=bt),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new Ct(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new Ct(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),ht=nt,At=function(){function i(){this.linkedList=new ht}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),Ot=At,xt=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(l){return l.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(l){return l.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(l){return l.source===e?l.target:l.source};return n.map(s)},Dt=function(e,t){return t.filter(function(r){return r.source===e})},Yt=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},ie=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function re(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Pt=function(e,t,r,n){n===void 0&&(n=!0);var a=re(r),o=new Ot,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var l="",c=function(){var T=o.dequeue();a.enter({current:T,previous:l}),xt(T,u,n?"target":void 0).forEach(function(O){a.allowTraversal({previous:l,current:T,next:O})&&o.enqueue(O)}),a.leave({current:T,previous:l}),l=T};!o.isEmpty();)c()},ee=Pt,ce=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],l=function O(F){u.push(F),s[F.id]=!0;for(var K=xt(F.id,a),rt=function(pt){var _t=K[pt];if(!s[_t]){var jt=r.filter(function(ae){return ae.id===_t});jt.length>0&&O(jt[0])}},lt=0;lt<K.length;++lt)rt(lt)},c=0;c<r.length;c++){var d=r[c];if(!s[d.id]){l(d);for(var T=[];u.length>0;)T.push(u.pop());o.push(T)}}return o},Ut=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},l={},c=[],d=0,T=function rt(lt){u[lt.id]=d,l[lt.id]=d,d+=1,o.push(lt),s[lt.id]=!0;for(var ct=xt(lt.id,a,"target").filter(function(ne){return r.map(function(we){return we.id}).indexOf(ne)>-1}),pt=function(we){var Fe=ct[we];if(!u[Fe]&&u[Fe]!==0){var Oe=r.filter(function(Ke){return Ke.id===Fe});Oe.length>0&&rt(Oe[0]),l[lt.id]=Math.min(l[lt.id],l[Fe])}else s[Fe]&&(l[lt.id]=Math.min(l[lt.id],u[Fe]))},_t=0;_t<ct.length;_t++)pt(_t);if(l[lt.id]===u[lt.id]){for(var jt=[];o.length>0;){var ae=o.pop();if(s[ae.id]=!1,jt.push(ae),ae===lt)break}jt.length>0&&c.push(jt)}},O=0,F=r;O<F.length;O++){var K=F[O];!u[K.id]&&u[K.id]!==0&&T(K)}return c};function te(i,e){return e?Ut(i):ce(i)}var ye=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},ge=ye,Kt=function(e,t){var r=ye(e);return r[t]?ye(e)[t].inDegree:0},xe=function(e,t){var r=ye(e);return r[t]?ye(e)[t].outDegree:0};function Tt(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function Ae(i,e,t,r){r.enter({current:e,previous:t});var n=i.edges,a=n===void 0?[]:n;xt(e,a,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&Ae(i,o,e,r)}),r.leave({current:e,previous:t})}function br(i,e,t){Ae(i,e,"",Tt(t))}var Sr=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(d){o[d.id]=d});for(var l={enter:function(T){var O=T.current,F=T.previous;if(s[O]){t={};for(var K=O,rt=F;rt!==O;)t[K]=rt,K=rt,rt=a[rt];t[K]=rt}else s[O]=O,delete o[O],a[O]=F},leave:function(T){var O=T.current;u[O]=O,delete s[O]},allowTraversal:function(T){var O=T.next;return t?!1:!u[O]}};Object.keys(o).length;){var c=Object.keys(o)[0];br(e,c,l)}return t},Mr=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=te(e,!1),u=0,l=s;u<l.length;u++){var c=l[u];if(c.length)for(var d=c[0],T=d.id,O=[d],F=(n={},n[T]=d,n),K=(a={},a[T]=new Set,a);O.length>0;)for(var rt=O.pop(),lt=rt.id,ct=xt(lt,e.edges),pt=function(ae){var ne,we=ct[ae],Fe=e.nodes.find(function(vn){return vn.id===we});if(we===lt)o.push((ne={},ne[we]=rt,ne));else if(!(we in K))F[we]=rt,O.push(Fe),K[we]=new Set([rt]);else if(!K[lt].has(Fe)){for(var Oe=!0,Ke=[Fe,rt],sr=F[lt];K[we].size&&!K[we].has(sr)&&(Ke.push(sr),sr!==F[sr.id]);)sr=F[sr.id];if(Ke.push(sr),t&&r?(Oe=!1,Ke.findIndex(function(vn){return t.indexOf(vn.id)>-1})>-1&&(Oe=!0)):t&&!r&&Ke.findIndex(function(vn){return t.indexOf(vn.id)>-1})>-1&&(Oe=!1),Oe){for(var Jr={},Tn=1;Tn<Ke.length;Tn+=1)Jr[Ke[Tn-1].id]=Ke[Tn];Ke.length&&(Jr[Ke[Ke.length-1].id]=Ke[0]),o.push(Jr)}K[we].add(rt)}},_t=0;_t<ct.length;_t+=1)pt(_t)}return o},Pr=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},l={},c=function(sr){for(var Jr=[sr];Jr.length>0;){var Tn=Jr.pop();a.has(Tn)&&(a.delete(Tn),o[Tn.id].forEach(function(vn){Jr.push(vn)}),o[Tn.id].clear())}},d=function Ke(sr,Jr,Tn){var vn=!1;if(t&&r===!1&&t.indexOf(sr.id)>-1)return vn;n.push(sr),a.add(sr);for(var Yr=Tn[sr.id],Gn=0;Gn<Yr.length;Gn+=1){var kn=u[Yr[Gn]];if(kn===Jr){for(var Xr={},fn=1;fn<n.length;fn+=1)Xr[n[fn-1].id]=n[fn];n.length&&(Xr[n[n.length-1].id]=n[0]),s.push(Xr),vn=!0}else a.has(kn)||Ke(kn,Jr,Tn)&&(vn=!0)}if(vn)c(sr);else for(var Gn=0;Gn<Yr.length;Gn+=1){var kn=u[Yr[Gn]];o[kn.id].has(sr)||o[kn.id].add(sr)}return n.pop(),vn},T=e.nodes,O=T===void 0?[]:T,F=0;F<O.length;F+=1){var K=O[F],rt=K.id;l[rt]=F,u[F]=K}if(t&&r)for(var lt=function(sr){var Jr=t[sr];l[O[sr].id]=l[Jr],l[Jr]=0,u[0]=O.find(function(Tn){return Tn.id===Jr}),u[l[O[sr].id]]=O[sr]},F=0;F<t.length;F++)lt(F);for(var ct=function(sr){for(var Jr,Tn,vn=1/0,Yr=0;Yr<sr.length;Yr+=1)for(var Gn=sr[Yr],kn=0;kn<Gn.length;kn++){var Xr=l[Gn[kn].id];Xr<vn&&(vn=Xr,Tn=Yr)}for(var fn=sr[Tn],An=[],Yr=0;Yr<fn.length;Yr+=1){var On=fn[Yr];An[On.id]=[];for(var jn=0,ta=xt(On.id,e.edges,"target").filter(function(wi){return fn.map(function(ii){return ii.id}).indexOf(wi)>-1});jn<ta.length;jn++){var ba=ta[jn];ba===On.id&&!(r===!1&&t.indexOf(On.id)>-1)?s.push((Jr={},Jr[On.id]=On,Jr)):An[On.id].push(l[ba])}}return{component:fn,adjList:An,minIdx:vn}},pt=0;pt<O.length;){var _t=O.filter(function(Ke){return l[Ke.id]>=pt}),jt=Ut({nodes:_t,edges:e.edges}).filter(function(Ke){return Ke.length>1});if(jt.length===0)break;var ae=ct(jt),ne=ae.minIdx,we=ae.adjList,Fe=ae.component;if(Fe.length>1){Fe.forEach(function(Ke){o[Ke.id]=new Set});var Oe=u[ne];if(t&&r&&t.indexOf(Oe.id)===-1)return s;d(Oe,Oe,we),pt=ne+1}else break}return s},on=function(e,t,r,n){return n===void 0&&(n=!0),t?Pr(e,r,n):Mr(e,r,n)},Hr=Sr,Sn=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},In=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,l=[],c={},d={},T={};o.forEach(function(pt,_t){var jt=pt.id;l.push(jt),d[jt]=1/0,jt===t&&(d[jt]=0)});for(var O=o.length,F=function(_t){var jt=Sn(d,o,c),ae=jt.id;if(c[ae]=!0,d[ae]===1/0)return"continue";var ne=[];r?ne=Dt(ae,u):ne=Yt(ae,u),ne.forEach(function(we){var Fe=we.target,Oe=we.source,Ke=Fe===ae?Oe:Fe,sr=n&&we[n]?we[n]:1;d[Ke]>d[jt.id]+sr?(d[Ke]=d[jt.id]+sr,T[Ke]=[jt.id]):d[Ke]===d[jt.id]+sr&&T[Ke].push(jt.id)})},K=0;K<O;K++)F(K);T[t]=[t];var rt={};for(var lt in d)d[lt]!==1/0&&vr(t,lt,T,rt);var ct={};for(var lt in rt)ct[lt]=rt[lt][0];return{length:d,path:ct,allPath:rt}},Nn=In;function vr(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=vr(i,s,t,r);if(!u)return;for(var l=0,c=u;l<c.length;l++){var d=c[l];(0,f.isArray)(d)?n.push((0,m.__spreadArray)((0,m.__spreadArray)([],d,!0),[e],!1)):n.push([d,e])}}return r[e]=n,r[e]}var Ze=function(e,t,r,n,a){var o=Nn(e,t,n,a),s=o.length,u=o.path,l=o.allPath;return{length:s[r],path:u[r],allPath:l[r]}},Er=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],l=(a={},a[t]=!0,a),c=[],d=[],T=n?xt(t,s,"target"):xt(t,s);for(c.push(T);u.length>0&&c.length>0;){var O=c[c.length-1];if(O.length){var F=O.shift();F&&(u.push(F),l[F]=!0,T=n?xt(F,s,"target"):xt(F,s),c.push(T.filter(function(lt){return!l[lt]})))}else{var K=u.pop();l[K]=!1,c.pop();continue}if(u[u.length-1]===r){var rt=u.map(function(ct){return ct});d.push(rt);var K=u.pop();l[K]=!1,c.pop()}}return d},ke=function(e,t){for(var r=q(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},Xe=ke,jr=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,l={},c={};o.forEach(function(_t,jt){var ae=ie();_t.clusterId=ae,l[ae]={id:ae,nodes:[_t]},c[_t.id]={node:_t,idx:jt}});var d=q(e,t),T=[],O={};d.forEach(function(_t,jt){var ae=0,ne=o[jt].id;O[ne]={},_t.forEach(function(we,Fe){if(we){ae+=we;var Oe=o[Fe].id;O[ne][Oe]=we}}),T.push(ae)});for(var F=0,K=function(){var jt=!1;if(o.forEach(function(ae){var ne={};Object.keys(O[ae.id]).forEach(function(vn){var Yr=O[ae.id][vn],Gn=c[vn].node,kn=Gn.clusterId;ne[kn]||(ne[kn]=0),ne[kn]+=Yr});var we=-1/0,Fe=[];if(Object.keys(ne).forEach(function(vn){we<ne[vn]?(we=ne[vn],Fe=[vn]):we===ne[vn]&&Fe.push(vn)}),!(Fe.length===1&&Fe[0]===ae.clusterId)){var Oe=Fe.indexOf(ae.clusterId);if(Oe>=0&&Fe.splice(Oe,1),Fe&&Fe.length){jt=!0;var Ke=l[ae.clusterId],sr=Ke.nodes.indexOf(ae);Ke.nodes.splice(sr,1);var Jr=Math.floor(Math.random()*Fe.length),Tn=l[Fe[Jr]];Tn.nodes.push(ae),ae.clusterId=Tn.id}}}),!jt)return"break";F++};F<n;){var rt=K();if(rt==="break")break}Object.keys(l).forEach(function(_t){var jt=l[_t];(!jt.nodes||!jt.nodes.length)&&delete l[_t]});var lt=[],ct={};u.forEach(function(_t){var jt=_t.source,ae=_t.target,ne=_t[r]||1,we=c[jt].node.clusterId,Fe=c[ae].node.clusterId,Oe="".concat(we,"---").concat(Fe);if(ct[Oe])ct[Oe].weight+=ne,ct[Oe].count++;else{var Ke={source:we,target:Fe,weight:ne,count:1};ct[Oe]=Ke,lt.push(Ke)}});var pt=[];return Object.keys(l).forEach(function(_t){pt.push(l[_t])}),{clusters:pt,clusterEdges:lt}},rn=jr,ir=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,f.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),Lr=ir,dn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,Zr=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,wn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(dn)&&!"".concat(a.properties[o]).match(Zr)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},ln=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},bn=function(e){for(var t=wn(e),r=[],n=0;n<e.length;n++)r[n]=ln(e[n].properties,t);return r},Pn=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},at={getAllSortProperties:wn,getPropertyWeight:bn,getAllProperties:Pn},je;(function(i){i.EuclideanDistance="euclideanDistance"})(je||(je={}));var Zt=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,f.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,f.uniq)(s))}),a},$t=function(e,t,r){var n=Zt(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(l){return typeof l=="number"})});return e.forEach(function(u,l){var c=[];Object.keys(n).forEach(function(d){var T=u[d],O=n[d],F=O.findIndex(function(lt){return T===lt}),K=[];if(s)K.push(T);else for(var rt=0;rt<O.length;rt++)rt===F?K.push(1):K.push(0);c=c.concat(K)}),a[l]=c}),a},Mt=function(e,t,r,n){r===void 0&&(r=je.EuclideanDistance);var a=0;switch(r){case je.EuclideanDistance:a=new Lr(e).euclideanDistance(new Lr(t));break;default:break}return a},be={getAllKeyValueMap:Zt,oneHot:$t,getDistance:Mt},Nt=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var l=e[u].clusterId,c=0;c<a;c++){var d=e[c].clusterId;if(l===d){var T=t[u][c]||0,O=r[u]||0,F=r[c]||0;s+=T-O*F/o}}return s*=1/o,s},Ht=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new Lr([]),a=0;a<r;a++)n=n.add(new Lr(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new Lr(t[a]),l=u.squareEuclideanDistance(o);s+=l}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new Lr(t[a]);e[a].clusterInertial=0;for(var d=0;d<r;d++){if(a===d){c[a][d]=0;continue}var T=new Lr(t[d]);c[a][d]=u.squareEuclideanDistance(T),e[a].clusterInertial+=c[a][d]}}for(var O=0,F=2*r*s,a=0;a<r;a++)for(var K=e[a].clusterId,d=0;d<r;d++){var rt=e[d].clusterId;if(!(a===d||K!==rt)){var lt=e[a].clusterInertial*e[d].clusterInertial/Math.pow(F,2)-c[a][d]/F;O+=lt}}return Number(O.toFixed(4))},dt=function(e,t,r,n,a,o,s,u,l){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),l===void 0&&(l=1);var c=e.nodes,d=c===void 0?[]:c,T=e.edges,O=T===void 0?[]:T,F=[];if(a){d.forEach(function(Xr,fn){Xr.properties=Xr.properties||{},Xr.originIndex=fn});var K=[];d.every(function(Xr){return Xr.hasOwnProperty("nodeType")})&&(K=Array.from(new Set(d.map(function(Xr){return Xr.nodeType}))),d.forEach(function(Xr){Xr.properties.nodeType=K.findIndex(function(fn){return fn===Xr.nodeType})}));var rt=Pn(d,o);F=$t(rt,s,u)}var lt=1,ct={},pt={};d.forEach(function(Xr,fn){var An=String(lt++);Xr.clusterId=An,ct[An]={id:An,nodes:[Xr]},pt[Xr.id]={node:Xr,idx:fn}});var _t=q(e,t),jt=[],ae={},ne=0;_t.forEach(function(Xr,fn){var An=0,On=d[fn].id;ae[On]={},Xr.forEach(function(jn,ta){if(jn){An+=jn;var ba=d[ta].id;ae[On][ba]=jn,ne+=jn}}),jt.push(An)}),ne/=2;for(var we=1/0,Fe=1/0,Oe=0,Ke=[],sr={};;){a&&d.every(function(Xr){return Xr.hasOwnProperty("properties")})?we=Nt(d,_t,jt,ne)+Ht(d,F)*l:we=Nt(d,_t,jt,ne),Oe===0&&(Fe=we,Ke=d,sr=ct);var Jr=we>0&&we>Fe&&we-Fe<n;if(we>Fe&&(Ke=d.map(function(Xr){return{node:Xr,clusterId:Xr.clusterId}}),sr=(0,f.clone)(ct),Fe=we),Jr||Oe>100)break;Oe++,Object.keys(ct).forEach(function(Xr){var fn=0;O.forEach(function(An){var On=An.source,jn=An.target,ta=pt[On].node.clusterId,ba=pt[jn].node.clusterId;(ta===Xr&&ba!==Xr||ba===Xr&&ta!==Xr)&&(fn=fn+(An[r]||1))}),ct[Xr].sumTot=fn}),d.forEach(function(Xr,fn){var An=ct[Xr.clusterId],On=0,jn,ta=jt[fn]/(2*ne),ba=0,La=An.nodes;La.forEach(function(Ho){var Zo=pt[Ho.id].idx;ba+=_t[fn][Zo]||0});var wi=ba-An.sumTot*ta,ii=La.filter(function(Ho){return Ho.id!==Xr.id}),Si=[];ii.forEach(function(Ho,Zo){Si[Zo]=F[Ho.originIndex]});var Di=Ht(ii,F)*l,uo=ae[Xr.id];if(Object.keys(uo).forEach(function(Ho){var Zo=pt[Ho].node,zs=Zo.clusterId;if(zs!==Xr.clusterId){var is=ct[zs],ys=is.nodes;if(!(!ys||!ys.length)){var Ha=0;ys.forEach(function($a){var Ja=pt[$a.id].idx;Ha+=_t[fn][Ja]||0});var yi=Ha-is.sumTot*ta,Wa=ys.concat([Xr]),bi=[];Wa.forEach(function($a,Ja){bi[Ja]=F[$a.originIndex]});var Gi=Ht(Wa,F)*l,fa=yi-wi;a&&(fa=yi+Gi-(wi+Di)),fa>On&&(On=fa,jn=is)}}}),On>0){jn.nodes.push(Xr);var Ki=Xr.clusterId;Xr.clusterId=jn.id;var tu=An.nodes.indexOf(Xr);An.nodes.splice(tu,1);var Vo=0,eu=0;O.forEach(function(Ho){var Zo=Ho.source,zs=Ho.target,is=pt[Zo].node.clusterId,ys=pt[zs].node.clusterId;(is===jn.id&&ys!==jn.id||ys===jn.id&&is!==jn.id)&&(Vo=Vo+(Ho[r]||1)),(is===Ki&&ys!==Ki||ys===Ki&&is!==Ki)&&(eu=eu+(Ho[r]||1))}),jn.sumTot=Vo,An.sumTot=eu}})}var Tn={},vn=0;Object.keys(sr).forEach(function(Xr){var fn=sr[Xr];if(!fn.nodes||!fn.nodes.length){delete sr[Xr];return}var An=String(vn+1);An!==Xr&&(fn.id=An,fn.nodes=fn.nodes.map(function(On){return{id:On.id,clusterId:An}}),sr[An]=fn,Tn[Xr]=An,delete sr[Xr],vn++)}),Ke.forEach(function(Xr){var fn=Xr.node,An=Xr.clusterId;fn&&(fn.clusterId=An,fn.clusterId&&Tn[fn.clusterId]&&(fn.clusterId=Tn[fn.clusterId]))});var Yr=[],Gn={};O.forEach(function(Xr){var fn=Xr.source,An=Xr.target,On=Xr[r]||1,jn=pt[fn].node.clusterId,ta=pt[An].node.clusterId;if(!(!jn||!ta)){var ba="".concat(jn,"---").concat(ta);if(Gn[ba])Gn[ba].weight+=On,Gn[ba].count++;else{var La={source:jn,target:ta,weight:On,count:1};Gn[ba]=La,Yr.push(La)}}});var kn=[];return Object.keys(sr).forEach(function(Xr){kn.push(sr[Xr])}),{clusters:kn,clusterEdges:Yr}},Gt=dt,tt=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Gt(e,t,r,n,!0,a,o,s,u)},ot=tt,k=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,f.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,l=function(){var T=ge({nodes:o,edges:u}),O=Object.keys(T);O.sort(function(rt,lt){var ct,pt;return((ct=T[rt])===null||ct===void 0?void 0:ct.degree)-((pt=T[lt])===null||pt===void 0?void 0:pt.degree)});var F=O[0];if(!o.length||((r=T[F])===null||r===void 0?void 0:r.degree)>=t)return"break";var K=o.findIndex(function(rt){return rt.id===F});o.splice(K,1),u=u.filter(function(rt){return!(rt.source===F||rt.target===F)})};;){var c=l();if(c==="break")break}return{nodes:o,edges:u}},C=k,I=function(e,t,r){var n=[];switch(e){case je.EuclideanDistance:n=t[r];break;default:n=[];break}return n},H=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=je.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,l=e.edges,c=l===void 0?[]:l,d={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===je.EuclideanDistance&&!u.every(function(An){return An.hasOwnProperty(r)}))return d;var T=[],O=[];if(o===je.EuclideanDistance&&(T=Pn(u,r),O=$t(T,n,a)),!O.length)return d;for(var F=(0,f.uniq)(O.map(function(An){return An.join("")})),K=Math.min(t,u.length,F.length),rt=0;rt<u.length;rt++)u[rt].originIndex=rt;for(var lt=[],ct=[],pt=[],rt=0;rt<K;rt++)if(rt===0){var _t=Math.floor(Math.random()*u.length);switch(o){case je.EuclideanDistance:lt[rt]=O[_t];break;default:lt[rt]=[];break}ct.push(_t),pt[rt]=[u[_t]],u[_t].clusterId=String(rt)}else{for(var jt=-1/0,ae=0,ne=function(jn){if(!ct.includes(jn)){for(var ta=0,ba=0;ba<lt.length;ba++){var La=0;switch(o){case je.EuclideanDistance:La=Mt(O[u[jn].originIndex],lt[ba],o);break;default:break}ta+=La}var wi=ta/lt.length;wi>jt&&!lt.find(function(ii){return(0,f.isEqual)(ii,I(o,O,u[jn].originIndex))})&&(jt=wi,ae=jn)}},we=0;we<u.length;we++)ne(we);lt[rt]=I(o,O,ae),ct.push(ae),pt[rt]=[u[ae]],u[ae].clusterId=String(rt)}for(var Fe=0;;){for(var rt=0;rt<u.length;rt++){var Oe=0,Ke=1/0;if(!(Fe===0&&ct.includes(rt))){for(var sr=0;sr<lt.length;sr++){var Jr=0;switch(o){case je.EuclideanDistance:Jr=Mt(O[rt],lt[sr],o);break;default:break}Jr<Ke&&(Ke=Jr,Oe=sr)}if(u[rt].clusterId!==void 0)for(var Tn=pt[Number(u[rt].clusterId)].length-1;Tn>=0;Tn--)pt[Number(u[rt].clusterId)][Tn].id===u[rt].id&&pt[Number(u[rt].clusterId)].splice(Tn,1);u[rt].clusterId=String(Oe),pt[Oe].push(u[rt])}}for(var vn=!1,rt=0;rt<pt.length;rt++){for(var Yr=pt[rt],Gn=new Lr([]),sr=0;sr<Yr.length;sr++)Gn=Gn.add(new Lr(O[Yr[sr].originIndex]));var kn=Gn.avg(Yr.length);kn.equal(new Lr(lt[rt]))||(vn=!0,lt[rt]=kn.getArr())}if(Fe++,u.every(function(An){return An.clusterId!==void 0})&&vn||Fe>=1e3)break}var Xr=[],fn={};return c.forEach(function(An){var On,jn,ta=An.source,ba=An.target,La=(On=u.find(function(Di){return Di.id===ta}))===null||On===void 0?void 0:On.clusterId,wi=(jn=u.find(function(Di){return Di.id===ba}))===null||jn===void 0?void 0:jn.clusterId,ii="".concat(La,"---").concat(wi);if(fn[ii])fn[ii].count++;else{var Si={source:La,target:wi,count:1};fn[ii]=Si,Xr.push(Si)}}),{clusters:pt,clusterEdges:Xr}},gt=H,zt=function(e,t){var r=new Lr(t),n=r.norm2(),a=new Lr(e),o=a.norm2(),s=r.dot(a),u=n*o,l=u?s/u:0;return l},Rt=zt,qt=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,f.clone)(e.filter(function(T){return T.id!==t.id})),s=e.findIndex(function(T){return T.id===t.id}),u=Pn(e,r),l=$t(u,n,a),c=l[s],d=[];return o.forEach(function(T,O){if(T.id!==t.id){var F=l[O],K=Rt(F,c);d.push(K),T.cosineSimilarity=K}}),o.sort(function(T,O){return O.cosineSimilarity-T.cosineSimilarity}),{allCosineSimilarity:d,similarNodes:o}},Te=qt,he=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),Ue=he,cr=function(e,t){return e-t},Ve=function(){function i(e){e===void 0&&(e=cr),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),Tr=Ve,nn=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],l=new Set;l.add(u);var c=function(rt,lt){return t?rt.weight-lt.weight:0},d=new Tr(c);for(Yt(u.id,s).forEach(function(K){d.insert(K)});!d.isEmpty();){var T=d.delMin(),O=T.source,F=T.target;l.has(O)&&l.has(F)||(r.push(T),l.has(O)||(l.add(O),Yt(O,s).forEach(function(K){d.insert(K)})),l.has(F)||(l.add(F),Yt(F,s).forEach(function(K){d.insert(K)})))}return r},He=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(O){return O});t&&u.sort(function(O,F){return O.weight-F.weight});for(var l=new Ue(a.map(function(O){return O.id}));u.length>0;){var c=u.shift(),d=c.source,T=c.target;l.connected(d,T)||(r.push(c),l.union(d,T))}return r},ur=function(e,t,r){var n={prim:nn,kruskal:He};return r?n[r](e,t):He(e,t)},Ar=ur,Cr=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,l=e.edges,c=l===void 0?[]:l,d=u.length,T,O={},F={},K=0;K<d;++K){var rt=u[K],lt=rt.id;O[lt]=1/d,F[lt]=1/d}for(var ct=ge(e);o>0&&n>t;){a=0;for(var K=0;K<d;++K){var rt=u[K],lt=rt.id;if(T=0,ct[rt.id].inDegree===0)O[lt]=0;else{for(var pt=xt(lt,c,"source"),_t=0;_t<pt.length;++_t){var jt=pt[_t],ae=ct[jt].outDegree;ae>0&&(T+=F[jt]/ae)}O[lt]=r*T,a+=O[lt]}}a=(1-a)/d,n=0;for(var K=0;K<d;++K){var rt=u[K],lt=rt.id;T=O[lt]+a,n+=Math.abs(T-F[lt]),F[lt]=T}o-=1}return F},se=Cr,Xt=-1,fe=-1,Me="-1",pe="-1",Re=-1,nr="-1",fr=function(){function i(e,t,r,n){e===void 0&&(e=Xt),t===void 0&&(t=fe),r===void 0&&(r=fe),n===void 0&&(n=Me),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),tn=function(){function i(e,t){e===void 0&&(e=fe),t===void 0&&(t=pe),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),Ln=function(){function i(e,t,r){e===void 0&&(e=fe),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new tn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new fr(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new fr(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),sn=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||pe,edgeLabel:n||Me,nodeLabel2:a||pe}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),Xn=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new sn(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=Re),t===void 0&&(t=!1);var r=new Ln(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,l=s.edgeLabel,c=s.nodeLabel2;u!==pe&&r.addNode(a,u),c!==pe&&r.addNode(o,c),u!==pe&&c!==u&&r.addEdge(void 0,a,o,l)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),an=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),Bn=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,l=e.top,c=l===void 0?10:l,d=e.directed,T=d===void 0?!1:d,O=e.verbose,F=O===void 0?!1:O;this.graphs=t,this.dfsCode=new Xn,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=T,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=F,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,l=0;l<u;l++){var c=s[l];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,l=0;l<u;l++){var c=s[l],d=e.nodeMap[c.to];r<=d.label&&!n.hasNode(d)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],l=u.edges,c=l.length,d=0;d<c;d++){var T=l[d],O=o[T.to].label;t.to===T.to||r>O||n.hasNode(o[T.to])||(t.label<T.label||t.label===T.label&&s<=O)&&a.push(T)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(Re,r),a=n.nodeMap,o=new Xn,s={};n.nodes.forEach(function(d){var T=e.findForwardRootEdges(n,d);T.forEach(function(O){var F=a[O.to],K="".concat(d.label,"-").concat(O.label,"-").concat(F.label);s[K]||(s[K]={projected:[],nodeLabel1:d.label,edgeLabel:O.label,nodeLabel2:F.label});var rt={graphId:n.id,edge:O,preNode:null};s[K].projected.push(rt)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new sn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var l=function d(T){for(var O=o.buildRmpath(),F=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,K=o.dfsEdgeList[O[0]].toNode,rt={},lt=!1,ct=0,pt=r?-1:0,_t=function(Gn){if(lt)return"break";T.forEach(function(kn){var Xr=new an(kn),fn=e.findBackwardEdge(n,Xr.edges[O[Gn]],Xr.edges[O[0]],Xr);fn&&(rt[fn.label]||(rt[fn.label]={projected:[],edgeLabel:fn.label}),rt[fn.label].projected.push({graphId:n.id,edge:rt,preNode:kn}),ct=o.dfsEdgeList[O[Gn]].fromNode,lt=!0)})},jt=O.length-1;jt>pt;jt--){var ae=_t(jt);if(ae==="break")break}if(lt){var ne=e.findMinLabel(rt);o.dfsEdgeList.push(new sn(K,ct,pe,ne.edgeLabel,pe));var we=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[we]!==o.dfsEdgeList[we]?!1:d(rt[ne.edgeLabel].projected)}var Fe={};lt=!1;var Oe=0;T.forEach(function(Yr){var Gn=new an(Yr),kn=e.findForwardPureEdges(n,Gn.edges[O[0]],F,Gn);kn.length>0&&(lt=!0,Oe=K,kn.forEach(function(Xr){var fn="".concat(Xr.label,"-").concat(a[Xr.to].label);Fe[fn]||(Fe[fn]={projected:[],edgeLabel:Xr.label,nodeLabel2:a[Xr.to].label}),Fe[fn].projected.push({graphId:n.id,edge:Xr,preNode:Yr})}))});for(var Ke=O.length,sr=function(Gn){if(lt)return"break";var kn=O[Gn];T.forEach(function(Xr){var fn=new an(Xr),An=e.findForwardRmpathEdges(n,fn.edges[kn],F,fn);An.length>0&&(lt=!0,Oe=o.dfsEdgeList[kn].fromNode,An.forEach(function(On){var jn="".concat(On.label,"-").concat(a[On.to].label);Fe[jn]||(Fe[jn]={projected:[],edgeLabel:On.label,nodeLabel2:a[On.to].label}),Fe[jn].projected.push({graphId:n.id,edge:On,preNode:Xr})}))})},jt=0;jt<Ke;jt++){var Jr=sr(jt);if(Jr==="break")break}if(!lt)return!0;var Tn=e.findMinLabel(Fe);o.dfsEdgeList.push(new sn(Oe,K+1,pe,Tn.edgeLabel,Tn.nodeLabel2));var vn=o.dfsEdgeList.length-1;return t.dfsEdgeList[vn]!==o.dfsEdgeList[vn]?!1:d(Fe["".concat(Tn.edgeLabel,"-").concat(Tn.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return l(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,f.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},l={};e.forEach(function(c){for(var d=t.graphs[c.graphId],T=d.nodeMap,O=new an(c),F=a.length-1;F>=0;F--){var K=t.findBackwardEdge(d,O.edges[a[F]],O.edges[a[0]],O);if(K){var rt="".concat(t.dfsCode.dfsEdgeList[a[F]].fromNode,"-").concat(K.label);l[rt]||(l[rt]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[F]].fromNode,edgeLabel:K.label}),l[rt].projected.push({graphId:c.graphId,edge:K,preNode:c})}}if(!(n>=t.maxNodeNum)){var lt=t.findForwardPureEdges(d,O.edges[a[0]],s,O);lt.forEach(function(pt){var _t="".concat(o,"-").concat(pt.label,"-").concat(T[pt.to].label);u[_t]||(u[_t]={projected:[],fromNodeId:o,edgeLabel:pt.label,nodeLabel2:T[pt.to].label}),u[_t].projected.push({graphId:c.graphId,edge:pt,preNode:c})});for(var ct=function(_t){var jt=t.findForwardRmpathEdges(d,O.edges[a[_t]],s,O);jt.forEach(function(ae){var ne="".concat(t.dfsCode.dfsEdgeList[a[_t]].fromNode,"-").concat(ae.label,"-").concat(T[ae.to].label);u[ne]||(u[ne]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[_t]].fromNode,edgeLabel:ae.label,nodeLabel2:T[ae.to].label}),u[ne].projected.push({graphId:c.graphId,edge:ae,preNode:c})})},F=0;F<a.length;F++)ct(F)}}),Object.keys(l).forEach(function(c){var d=l[c],T=d.toNodeId,O=d.edgeLabel;t.dfsCode.dfsEdgeList.push(new sn(o,T,"-1",O,"-1")),t.subGraphMining(l[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var d=u[c],T=d.fromNodeId,O=d.edgeLabel,F=d.nodeLabel2;t.dfsCode.dfsEdgeList.push(new sn(T,o+1,pe,O,F)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(l){var c=e[l],d=c.nodeMap;c.nodes.forEach(function(T,O){var F=T.label,K="".concat(l,"-").concat(F);if(!s[K]){var rt=a[F]||0;rt++,a[F]=rt}s[K]={graphKey:l,label:F},T.edges.forEach(function(lt){var ct=F,pt=d[lt.to].label;if(!t&&ct>pt){var _t=pt;pt=ct,ct=_t}var jt=lt.label,ae="".concat(l,"-").concat(ct,"-").concat(jt,"-").concat(pt),ne="".concat(ct,"-").concat(jt,"-").concat(pt);if(!o[ne]){var we=o[ne]||0;we++,o[ne]=we}u[ae]={graphId:l,nodeLabel1:ct,edgeLabel:jt,nodeLabel2:pt}})})}),Object.keys(a).forEach(function(l){var c=a[l];if(!(c<r)){var d={nodes:[],edges:[]};d.nodes.push({id:"0",label:l}),n.push(d)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var l=e.findForwardRootEdges(o,u);l.forEach(function(c){var d=s[c.to],T="".concat(u.label,"-").concat(c.label,"-").concat(d.label);n[T]||(n[T]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:d.label});var O={graphId:a,edge:c,preNode:null};n[T].projected.push(O)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,l=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new sn(0,1,u,l,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),Jn=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],l=new Ln(s,!0,t),c={};u.nodes.forEach(function(d,T){l.addNode(T,d[r]),c[d.id]=T}),u.edges.forEach(function(d,T){var O=c[d.source],F=c[d.target];l.addEdge(-1,O,F,d[n])}),l&&l.getNodeNum()&&(a[l.id]=l)}),a},oa=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},sa="cluster",xi=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?sa:a,s=e.edgeLabelProp,u=s===void 0?sa:s,l=Jn(t,n,o,u),c=e.minSupport,d=e.maxNodeNum,T=e.minNodeNum,O=e.verbose,F=e.top,K={graphs:l,minSupport:c,maxNodeNum:d,minNodeNum:T,top:F,verbose:O,directed:n},rt=new Bn(K);rt.run();var lt=oa(rt.frequentSubgraphs,o,u);return lt},Na=xi,Ra=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(ri(o,s,u,r,n))}),a},ri=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(l,c){if(l<=a&&r!==c){o.push(c),s.push(e[c]);var d=e[c][n];u[d]?(u[d].count++,u[d].dists.push(l)):u[d]={count:1,dists:[l]}}}),Object.keys(u).forEach(function(l){u[l].dists=u[l].dists.sort(function(c,d){return c-d})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},Ci=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(l,c){for(var d=0,T=0,O=l.nodeIdxs,F=l.neighborNum-1;d<o;){for(var K=O[1+Math.floor(Math.random()*F)],rt=0;(s["".concat(c,"-").concat(K)]||s["".concat(K,"-").concat(c)])&&(K=Math.floor(Math.random()*t),rt++,!(rt>2*t)););if(rt<2*t&&(s["".concat(c,"-").concat(K)]={start:c,end:K,distance:a[c][K]},d++,u++,u>=r))return s;if(T++,T>2*t)break}if(d<o){var lt=o-d;o=(o+lt)/(t-c-1)}}),s},Ni=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var l=e[o],c=(s=t[l.start])===null||s===void 0?void 0:s.nodeIdxs,d=(u=t[l.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!d)){var T=new Set(d),O=c.filter(function(ct){return T.has(ct)});if(!(!O||!O.length)){for(var F={},K=O.length,rt=0;rt<K;rt++){var lt=a[O[rt]];n[o].nodes.push(lt),F[lt.id]=!0}r.edges.forEach(function(ct){F[ct.source]&&F[ct.target]&&n[o].edges.push(ct)})}}}}),n},Ri=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(l){s[l.id]=l});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(l){var c=s[l.source][r],d=s[l.target][r],T=t==null?void 0:t.nodes[0][r],O=t==null?void 0:t.nodes[1][r],F=t==null?void 0:t.edges[0][n];l[n]===F&&(c===T&&d===O||c===O&&d===T)&&u++}),u)},pa=function(e,t,r){for(var n=1/0,a=0,o=function(l){var c=e[l],d=Object.keys(c).sort(function(ct,pt){return c[ct]-c[pt]}),T=10,O=[];d.forEach(function(ct,pt){O[pt%T]||(O[pt%T]={graphs:[],totalCount:0,aveCount:0}),O[pt%T].graphs.push(ct),O[pt%T].totalCount+=c[ct]});var F=0,K=[];O.forEach(function(ct){var pt=ct.totalCount/ct.graphs.length;ct.aveCount=pt,K.push(pt);var _t=0,jt=ct.length;ct.graphs.forEach(function(ae,ne){var we=c[ae];ct.graphs.forEach(function(Fe,Oe){ne!==Oe&&(_t+=Math.abs(we-c[Fe]))})}),_t/=jt*(jt-1)/2,F+=_t}),F/=O.length;var rt=0;K.forEach(function(ct,pt){K.forEach(function(_t,jt){pt!==jt&&(rt+=Math.abs(ct-_t))}),rt/=K.length*(K.length-1)/2});var lt=rt-F;n<lt&&(n=lt,a=l)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},ki=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},eo=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(ie)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var l=r[o.source];l&&(l.degree++,l.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},za=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,l=e[s].id,c=u;c<n;c++)if(s!==c){var d=e[c].id,T=o[c];a["".concat(l,"-").concat(d)]=T,r||(a["".concat(d,"-").concat(l)]=T)}}),a},Ei=function(e,t,r,n,a,o,s,u,l,c,d){var T,O="".concat(t.id,"-").concat(r.id);if(c&&c[O])return c[O];var F=d?d[O]:void 0;if(!F){var K=(T={},T[O]={start:n[t.id].idx,end:n[r.id].idx,distance:a},T);d=Ni(K,o,e,d),F=d[O]}return Ri(F,s,u,l)},Bi=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,l=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,l=1/0,c=1/0,n[t].forEach(function(d){var T=r[d.id].degree;u>T&&(u=T);var O=r[d.id].inDegree;l>O&&(l=O);var F=r[d.id].outDegree;c>F&&(c=F)}),e[t]={degree:u,inDegree:l,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:c}},go=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var l=e.nodes.length;if(l){var c=Xe(e,r),d=Xe(t,r),T=za(e.nodes,c,r),O=za(t.nodes,d,r),F=ki(e.nodes,o),K=F.nodeMap,rt=F.nodeLabelMap,lt=ki(t.nodes,o),ct=lt.nodeMap,pt=lt.nodeLabelMap;eo(e.edges,s,K);var _t=eo(t.edges,s,ct).edgeLabelMap,jt=[];d==null||d.forEach(function(Ha){jt=jt.concat(Ha)}),a||(a=Math.max.apply(Math,(0,m.__spreadArray)((0,m.__spreadArray)([],jt,!1),[2],!1))),n||(n=a);var ae=Ra(e,c,o,n),ne=Ra(t,d,o,n),we=Math.min(100,l*(l-1)/2),Fe=Ci(n,l,we,ae,c),Oe=Ni(Fe,ae,e),Ke=10,sr=1,Jr=1,Tn=4,vn={graphs:Oe,nodeLabelProp:o,edgeLabelProp:s,minSupport:sr,minNodeNum:Jr,maxNodeNum:Tn,directed:r},Yr=Na(vn).slice(0,Ke),Gn=Yr.length,kn=[];Yr.forEach(function(Ha,yi){kn[yi]={},Object.keys(Oe).forEach(function(Wa){var bi=Oe[Wa],Gi=Ri(bi,Ha,o,s);kn[yi][Wa]=Gi})});var Xr=pa(kn,Gn,Yr),fn=Xr.structure,An=Xr.structureCountMap,On=t.nodes[0],jn=[],ta=(u=t.nodes[0])===null||u===void 0?void 0:u[o],ba=-1/0;t.nodes.forEach(function(Ha){var yi=Ha[o],Wa=rt[yi];(Wa==null?void 0:Wa.length)>ba&&(ba=Wa.length,jn=Wa,ta=yi,On=Ha)});var La={},wi={},ii={},Si={},Di={},uo={};Object.keys(pt).forEach(function(Ha,yi){Di[Ha]=[],r&&(uo[Ha]=[]);var Wa=-1/0,bi=pt[Ha],Gi={};bi.forEach(function(ei){var li=O["".concat(On.id,"-").concat(ei.id)];if(li&&Di[Ha].push(li),Wa<li&&(Wa=li),Gi["".concat(On.id,"-").concat(ei.id)]={start:0,end:ct[ei.id].idx,distance:li},r){var Eo=O["".concat(ei.id,"-").concat(On.id)];Eo&&uo[Ha].push(Eo)}}),Di[Ha]=Di[Ha].sort(function(ei,li){return ei-li}),r&&(uo[Ha]=uo[Ha].sort(function(ei,li){return ei-li})),wi=Ni(Gi,ne,t,wi);var fa=[];if(Object.keys(Gi).forEach(function(ei){if(ii[ei]){fa.push(ii[ei]);return}var li=wi[ei];ii[ei]=Ri(li,fn,o,s),fa.push(ii[ei])}),fa=fa.sort(function(ei,li){return li-ei}),Si["".concat(On.id,"-").concat(Ha)]=fa,Ha!==ta)for(var $a=(jn==null?void 0:jn.length)||0,Ja=function(li){var Eo=jn[li],Gs=ae[K[Eo.id].idx],zo=Gs.nodeLabelCountMap[Ha],af=pt[Ha].length;if(!zo||zo.count<af)return jn.splice(li,1),"continue";for(var ed=!1,bs=0;bs<af;bs++)if(zo.dists[bs]>Di[Ha][bs]){ed=!0;break}if(ed)return jn.splice(li,1),"continue";var ru={};Gs.neighbors.forEach(function(xs){var bu=T["".concat(Eo.id,"-").concat(xs.id)];ru["".concat(Eo.id,"-").concat(xs.id)]={start:K[Eo.id].idx,end:K[xs.id].idx,distance:bu}}),Oe=Ni(ru,ae,e,Oe);var Qu=[];Object.keys(ru).forEach(function(xs){if(An[xs]){Qu.push(An[xs]);return}var bu=Oe[xs];An[xs]=Ri(bu,fn,o,s),Qu.push(An[xs])}),Qu=Qu.sort(function(xs,bu){return bu-xs});for(var bc=!1,bs=0;bs<af;bs++)if(Qu[bs]<fa[bs]){bc=!0;break}if(bc)return jn.splice(li,1),"continue"},Ui=$a-1;Ui>=0;Ui--)Ja(Ui)});var Ki=[];jn==null||jn.forEach(function(Ha){for(var yi=K[Ha.id].idx,Wa=ri(e.nodes,c[yi],yi,o,a),bi=Wa.neighbors,Gi=bi.length,fa=!1,$a=Gi-1;$a>=0;$a--){if(bi.length+1<t.nodes.length){fa=!0;return}var Ja=bi[$a],Ui=Ja[o];if(!pt[Ui]||!pt[Ui].length){bi.splice($a,1);continue}if(!Di[Ui]||!Di[Ui].length){bi.splice($a,1);continue}var ei="".concat(Ha.id,"-").concat(Ja.id),li=T[ei],Eo=Di[Ui].length-1,Gs=Di[Ui][Eo];if(li>Gs){bi.splice($a,1);continue}if(r){var zo="".concat(Ja.id,"-").concat(Ha.id),af=T[zo];Eo=uo[Ui].length-1;var ed=uo[Ui][Eo];if(af>ed){bi.splice($a,1);continue}}var bs=An[ei]?An[ei]:Ei(e,Ha,Ja,K,li,ae,fn,o,s,An,Oe),ru="".concat(On.id,"-").concat(Ui),Qu=Si[ru][Si[ru].length-1];if(bs<Qu){bi.splice($a,1);continue}var bc=Bi(La,Ui,ct,pt),xs=bc.minPatternNodeLabelDegree,bu=bc.minPatternNodeLabelInDegree,Il=bc.minPatternNodeLabelOutDegree;if(K[Ja.id].degree<xs){bi.splice($a,1);continue}}fa||Ki.push({nodes:[Ha].concat(bi)})});var tu=Nn(t,On.id,!1).length,Vo={};r?(Object.keys(tu).forEach(function(Ha){var yi=ct[Ha].node[o];Vo[yi]?Vo[yi].push(tu[Ha]):Vo[yi]=[tu[Ha]]}),Object.keys(Vo).forEach(function(Ha){Vo[Ha].sort(function(yi,Wa){return yi-Wa})})):Vo=Di;for(var eu=Ki.length,Ho=function(yi){var Wa=Ki[yi],bi=Wa.nodes[0],Gi={},fa={};Wa.nodes.forEach(function(po,Us){fa[po.id]={idx:Us,node:po,degree:0,inDegree:0,outDegree:0};var Qo=po[o];Gi[Qo]?Gi[Qo]++:Gi[Qo]=1});var $a=[],Ja={};e.edges.forEach(function(po){fa[po.source]&&fa[po.target]&&($a.push(po),Ja[po[s]]?Ja[po[s]]++:Ja[po[s]]=1,fa[po.source].degree++,fa[po.target].degree++,fa[po.source].outDegree++,fa[po.target].inDegree++)});for(var Ui=Object.keys(_t).length,ei=!1,li=0;li<Ui;li++){var Eo=Object.keys(_t)[li];if(!Ja[Eo]||Ja[Eo]<_t[Eo].length){ei=!0;break}}if(ei)return Ki.splice(yi,1),"continue";var Gs=$a.length;if(Gs<t.edges.length)return Ki.splice(yi,1),"break";for(var zo=!1,af=function(Us){var Qo=$a[Us],qu=Qo[s],of=_t[qu];if(!of||!of.length)return Ja[qu]--,of&&Ja[qu]<of.length?(zo=!0,"break"):($a.splice(Us,1),fa[Qo.source].degree--,fa[Qo.target].degree--,fa[Qo.source].outDegree--,fa[Qo.target].inDegree--,"continue");var O0=fa[Qo.source].node[o],I0=fa[Qo.target].node[o],Tv=!1;if(of.forEach(function(D0){var P0=ct[D0.source].node,L0=ct[D0.target].node;P0[o]===O0&&L0[o]===I0&&(Tv=!0),!r&&P0[o]===I0&&L0[o]===O0&&(Tv=!0)}),!Tv)return Ja[qu]--,of&&Ja[qu]<of.length?(zo=!0,"break"):($a.splice(Us,1),fa[Qo.source].degree--,fa[Qo.target].degree--,fa[Qo.source].outDegree--,fa[Qo.target].inDegree--,"continue")},li=Gs-1;li>=0;li--){var ed=af(li);if(ed==="break")break}if(zo)return Ki.splice(yi,1),"continue";Wa.edges=$a;var bs=Nn(Wa,Wa.nodes[0].id,!1).length;if(Object.keys(bs).reverse().forEach(function(po){if(!(po===Wa.nodes[0].id||zo)){if(bs[po]===1/0){var Us=fa[po].node[o];if(Gi[Us]--,Gi[Us]<pt[Us].length){zo=!0;return}var Qo=Wa.nodes.indexOf(fa[po].node);Wa.nodes.splice(Qo,1),fa[po]=void 0;return}var qu=K[po].node[o];if(!Vo[qu]||!Vo[qu].length||bs[po]>Vo[qu][Vo[qu].length-1]){var Us=fa[po].node[o];if(Gi[Us]--,Gi[Us]<pt[Us].length){zo=!0;return}var Qo=Wa.nodes.indexOf(fa[po].node);Wa.nodes.splice(Qo,1),fa[po]=void 0}}}),zo)return Ki.splice(yi,1),"continue";for(var ru=!0,Qu=0;ru&&!zo;){ru=!1;var bc=r?fa[bi.id].degree<ct[On.id].degree||fa[bi.id].inDegree<ct[On.id].inDegree||fa[bi.id].outDegree<ct[On.id].outDegree:fa[bi.id].degree<ct[On.id].degree;if(bc){zo=!0;break}if(Gi[bi[o]]<pt[bi[o]].length){zo=!0;break}for(var xs=Wa.nodes.length,bu=xs-1;bu>=0;bu--){var Il=Wa.nodes[bu],T0=fa[Il.id].degree,SS=fa[Il.id].inDegree,MS=fa[Il.id].outDegree,_S=Il[o],Cv=Bi(La,_S,ct,pt),A0=Cv.minPatternNodeLabelDegree,CS=Cv.minPatternNodeLabelInDegree,TS=Cv.minPatternNodeLabelOutDegree,AS=r?T0<A0||SS<CS||MS<TS:T0<A0;if(AS){if(Gi[Il[o]]--,Gi[Il[o]]<pt[Il[o]].length){zo=!0;break}Wa.nodes.splice(bu,1),fa[Il.id]=void 0,ru=!0}}if(zo||!ru&&Qu!==0)break;Gs=$a.length;for(var wh=Gs-1;wh>=0;wh--){var Dl=$a[wh];if(!fa[Dl.source]||!fa[Dl.target]){$a.splice(wh,1);var Sh=Dl[s];if(Ja[Sh]--,fa[Dl.source]&&(fa[Dl.source].degree--,fa[Dl.source].outDegree--),fa[Dl.target]&&(fa[Dl.target].degree--,fa[Dl.target].inDegree--),_t[Sh]&&Ja[Sh]<_t[Sh].length){zo=!0;break}ru=!0}}Qu++}if(zo||zo||Wa.nodes.length<t.nodes.length||$a.length<t.edges.length)return Ki.splice(yi,1),"continue"},Zo=eu-1;Zo>=0;Zo--){var zs=Ho(Zo);if(zs==="break")break}for(var is=Ki.length,ys=function(yi){var Wa=Ki[yi],bi={};Wa.edges.forEach(function($a){var Ja="".concat($a.source,"-").concat($a.target,"-").concat($a.label);bi[Ja]?bi[Ja]++:bi[Ja]=1});for(var Gi=function(Ja){var Ui=Ki[Ja],ei={};Ui.edges.forEach(function(Eo){var Gs="".concat(Eo.source,"-").concat(Eo.target,"-").concat(Eo.label);ei[Gs]?ei[Gs]++:ei[Gs]=1});var li=!0;Object.keys(ei).length!==Object.keys(bi).length?li=!1:Object.keys(bi).forEach(function(Eo){ei[Eo]!==bi[Eo]&&(li=!1)}),li&&Ki.splice(Ja,1)},fa=is-1;fa>yi;fa--)Gi(fa);is=Ki.length},Zo=0;Zo<=is-1;Zo++)ys(Zo);return Ki}}},Pi=go,Wi=function(){function i(e){e===void 0&&(e=10),this.linkedList=new ht,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),ro=Wi,mo=Hr,oi={getAdjMatrix:q,breadthFirstSearch:ee,connectedComponent:te,getDegree:ge,getInDegree:Kt,getOutDegree:xe,detectCycle:Hr,detectDirectedCycle:mo,detectAllCycles:on,detectAllDirectedCycle:Pr,detectAllUndirectedCycle:Mr,depthFirstSearch:br,dijkstra:Nn,findAllPath:Er,findShortestPath:Ze,floydWarshall:Xe,labelPropagation:rn,louvain:Gt,iLouvain:ot,kCore:C,kMeans:gt,cosineSimilarity:Rt,nodesCosineSimilarity:Te,minimumSpanningTree:Ar,pageRank:se,getNeighbors:xt,Stack:ro,GADDI:Pi},Ti=_(277160),Hn=_(631437),Jt=ft,ue=function(e){return function(t,r){return t[e]-r[e]}},Pe=function(e,t,r){return e>=t&&e<=r},rr=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},l=s.x*u.y-s.y*u.x,c=l*l,d=1/l,T=s.x*s.x+s.y*s.y,O=u.x*u.x+u.y*u.y;if(c>a*T*O){var F=(o.x*u.y-o.y*u.x)*d,K=(o.x*s.y-o.y*s.x)*d;return!Pe(F,0,1)||!Pe(K,0,1)?null:{x:e.x+F*s.x,y:e.y+F*s.y}}return null},Or=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,l=[],c={x:s,y:u};l.push({x:r,y:n}),l.push({x:r+a,y:n}),l.push({x:r+a,y:n+o}),l.push({x:r,y:n+o}),l.push({x:r,y:n});for(var d=null,T=1;T<l.length&&(d=rr(l[T-1],l[T],c,t),!d);T++);return d},Ir=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,l=s-n;if(u*u+l*l<a*a)return null;var c=Math.atan(l/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(l)}},xr=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,l=Math.atan2(u/n,s/r);return l<0&&(l+=2*Math.PI),{x:a+r*Math.cos(l),y:o+n*Math.sin(l)}},Kr=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Ti.transformMat3(n,n,t),{x:n[0],y:n[1]}},un=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=Q.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return Ti.transformMat3(a,a,n),{x:a[0],y:a[1]}},Mn=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,l=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*l)/c,y:-(n*l-o*u)/c}},Kn=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},Un=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},ra=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},na=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var l=[];a.push(l)}),n&&n.forEach(function(s){var u=s.source,l=s.target,c=o[u],d=o[l];a[c][d]=1,t||(a[d][c]=1)}),a},Ya=function(e,t){e.translate(t.x,t.y)},ua=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var l=s*a[0],c=u*a[4],d=0,T=0,O=0,F=0;e.animate(function(rt){return O=l*rt,F=c*rt,a=Jt(a,[["t",O-d,F-T]]),d=O,T=F,{matrix:a}},n)}else{var K=Jt(a,[["t",s,u]]);e.setMatrix(K)}},Qn=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,f.isArray)(t)||(n=[t,t]),(0,f.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=Jt(r,[["s",n[0],n[1]]]),e.setMatrix(r)},Ga=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=Jt(r,[["r",t]]),e.setMatrix(r)},Da=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function xa(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var si=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(d){return Math.abs(d)<o?0:d<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var l=e[u],c=e[(u+1)%a];if(xa(l,c,[t,r]))return!0;s(l[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(n=!n)}return n},Qa=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},ka=function(e,t){var r=!1;return(0,f.each)(e,function(n){if(rr(n.from,n.to,t.from,t.to))return r=!0,!1}),r},_a=function(e,t){var r=function(T){var O=T.map(function(K){return K[0]}),F=T.map(function(K){return K[1]});return{minX:Math.min.apply(null,O),maxX:Math.max.apply(null,O),minY:Math.min.apply(null,F),maxY:Math.max.apply(null,F)}},n=function(T){for(var O=[],F=T.length,K=0;K<F-1;K++){var rt=T[K],lt=T[K+1];O.push({from:{x:rt[0],y:rt[1]},to:{x:lt[0],y:lt[1]}})}if(O.length>1){var ct=T[0],pt=T[F-1];O.push({from:{x:pt[0],y:pt[1]},to:{x:ct[0],y:ct[1]}})}return O};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!Qa(a,o))return!1;var s=!1;if((0,f.each)(t,function(d){if(si(e,d[0],d[1]))return s=!0,!1}),s||((0,f.each)(e,function(d){if(si(t,d[0],d[1]))return s=!0,!1}),s))return!0;var u=n(e),l=n(t),c=!1;return(0,f.each)(l,function(d){if(ka(u,d))return c=!0,!1}),c},va=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),ci=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},ni=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},fi=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=ci(n,r[s]),l=u[0],c=u[1],d=u[2],T=u[3];o[s]=rr({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:l,y:c},{x:d,y:T}),o[s]&&(a+=1)}return[o,a]},Fi=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=ci(n,r[s]),l=u[0],c=u[1],d=u[2],T=u[3],O=ni(t,new va(l,c,d,T));O=Math.abs(O-.5),O>=0&&O<=1&&(o+=1,a=O<a?O:a)}return o===0?-1:a},Ai=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},Yi=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},Oo=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,l=s*a+u*o,c;l<=0?c=0:(s=a-s,u=o-u,l=s*a+u*o,l<=0?c=0:c=l*l/(a*a+o*o));var d=s*s+u*u-c;return d<0&&(d=0),d},Io=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},Li=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),l=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+l*l},Ba=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,l=[a-r,o-n];if(Hn.exactEquals(l,[0,0]))return NaN;var c=[-l[1],l[0]];Hn.normalize(c,c);var d=[s-r,u-n];return Math.abs(Hn.dot(d,c))},vi=function(e,t,r){return e+(t-e)*r},zi=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=vi(e[o],t[o],r);return a},Sa="rgb(95, 149, 255)",Xi="rgb(255, 255, 255)",co="rgb(0, 0, 0)",Mi="rgb(247, 250, 255)",Lo="rgb(239, 244, 255)",pi="rgb(253, 253, 253)",fo="rgb(250, 250, 250)",Go="rgb(224, 224, 224)",ts="rgb(234, 234, 234)",ji="rgb(245, 245, 245)",Uo="rgb(191, 213, 255)",Wo="#4572d9",fs="rgb(223, 234, 255)",ha={mainStroke:Sa,mainFill:Lo,activeStroke:Sa,activeFill:Mi,inactiveStroke:Uo,inactiveFill:Mi,selectedStroke:Sa,selectedFill:Xi,highlightStroke:Wo,highlightFill:fs,disableStroke:Go,disableFill:fo,edgeMainStroke:Go,edgeActiveStroke:Sa,edgeInactiveStroke:ts,edgeSelectedStroke:Sa,edgeHighlightStroke:Sa,edgeDisableStroke:ji,comboMainStroke:Go,comboMainFill:pi,comboActiveStroke:Sa,comboActiveFill:Mi,comboInactiveStroke:Go,comboInactiveFill:pi,comboSelectedStroke:Sa,comboSelectedFill:pi,comboHighlightStroke:Wo,comboHighlightFill:pi,comboDisableStroke:ts,comboDisableFill:fo},Wt={version:"0.8.13",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:ha.mainStroke,fill:Lo},size:20,color:ha.mainStroke,linkPoints:{size:8,lineWidth:1,fill:ha.activeFill,stroke:ha.activeStroke}},nodeStateStyles:{active:{fill:ha.activeFill,stroke:ha.activeStroke,lineWidth:2,shadowColor:ha.mainStroke,shadowBlur:10},selected:{fill:ha.selectedFill,stroke:ha.selectedStroke,lineWidth:4,shadowColor:ha.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:ha.highlightFill,stroke:ha.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:ha.inactiveFill,stroke:ha.inactiveStroke,lineWidth:1},disable:{fill:ha.disableFill,stroke:ha.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:co,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ha.edgeMainStroke,lineAppendWidth:2},color:ha.edgeMainStroke},edgeStateStyles:{active:{stroke:ha.edgeActiveStroke,lineWidth:1},selected:{stroke:ha.edgeSelectedStroke,lineWidth:2,shadowColor:ha.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ha.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:ha.edgeInactiveStroke,lineWidth:1},disable:{stroke:ha.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:co,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:ha.comboMainFill,lineWidth:1,stroke:ha.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:ha.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:ha.comboActiveStroke,lineWidth:1,fill:ha.comboActiveFill},selected:{stroke:ha.comboSelectedStroke,lineWidth:2,fill:ha.comboSelectedFill,shadowColor:ha.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ha.comboHighlightStroke,lineWidth:2,fill:ha.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:ha.comboInactiveStroke,fill:ha.comboInactiveFill,lineWidth:1},disable:{stroke:ha.comboDisableStroke,fill:ha.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Be={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},tr=Math.PI,mr=Math.sin,Vr=Math.cos,cn=mr(tr/8),Fn=Vr(tr/8),Ia=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=Kr(n,o),a=Kr(a,o)}var s=n.x,u=n.y,l=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:l,maxY:c,width:l-s,height:c-u}},di=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,l=s.position||Wt.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],d=[e.startPoint.x,e.startPoint.y],T=[e.endPoint.x,e.endPoint.y],O=o.height/2,F=o.width/2,K=O,rt=O,lt=K*cn,ct=K*Fn,pt=rt*cn,_t=rt*Fn,jt=a.get("type"),ae=Math.min(O/2,F/2),ne=Math.min(O,F),we=s!=null&&s.pointPadding?Math.min(ne,s==null?void 0:s.pointPadding):ae;if(d[0]===T[0]&&d[1]===T[1]){switch(l){case"top":jt==="circle"?(d=[c[0]-lt,c[1]-ct],T=[c[0]+pt,c[1]-_t]):(d=[c[0]-we,c[1]-O],T=[c[0]+we,c[1]-O]);break;case"top-right":K=O,rt=F,jt==="circle"?(lt=K*cn,ct=K*Fn,pt=rt*cn,_t=rt*Fn,d=[c[0]+lt,c[1]-ct],T=[c[0]+_t,c[1]-pt]):(d=[c[0]+F-we,c[1]-O],T=[c[0]+F,c[1]-O+we]);break;case"right":K=F,rt=F,jt==="circle"?(lt=K*cn,ct=K*Fn,pt=rt*cn,_t=rt*Fn,d=[c[0]+ct,c[1]-lt],T=[c[0]+_t,c[1]+pt]):(d=[c[0]+F,c[1]-we],T=[c[0]+F,c[1]+we]);break;case"bottom-right":K=F,rt=O,jt==="circle"?(lt=K*cn,ct=K*Fn,pt=rt*cn,_t=rt*Fn,d=[c[0]+ct,c[1]+lt],T=[c[0]+pt,c[1]+_t]):(d=[c[0]+F,c[1]+O-we],T=[c[0]+F-we,c[1]+O]);break;case"bottom":K=O,rt=O,jt==="circle"?(lt=K*cn,ct=K*Fn,pt=rt*cn,_t=rt*Fn,d=[c[0]+lt,c[1]+ct],T=[c[0]-pt,c[1]+_t]):(d=[c[0]-we,c[1]+O],T=[c[0]+we,c[1]+O]);break;case"bottom-left":K=O,rt=F,jt==="circle"?(lt=K*cn,ct=K*Fn,pt=rt*cn,_t=rt*Fn,d=[c[0]-lt,c[1]+ct],T=[c[0]-_t,c[1]+pt]):(d=[c[0]-F,c[1]+O-we],T=[c[0]-F+we,c[1]+O]);break;case"left":K=F,rt=F,jt==="circle"?(lt=K*cn,ct=K*Fn,pt=rt*cn,_t=rt*Fn,d=[c[0]-ct,c[1]+lt],T=[c[0]-_t,c[1]-pt]):(d=[c[0]-F,c[1]-we],T=[c[0]-F,c[1]+we]);break;case"top-left":K=F,rt=O,jt==="circle"?(lt=K*cn,ct=K*Fn,pt=rt*cn,_t=rt*Fn,d=[c[0]-ct,c[1]-lt],T=[c[0]-pt,c[1]-_t]):(d=[c[0]-F+we,c[1]-O],T=[c[0]-F,c[1]-O+we]);break;default:K=F,rt=F,lt=K*cn,ct=K*Fn,pt=rt*cn,_t=rt*Fn,d=[c[0]-lt,c[1]-ct],T=[c[0]+pt,c[1]-_t]}if(s.clockwise===!1){var Fe=[d[0],d[1]];d=[T[0],T[1]],T=[Fe[0],Fe[1]]}}var Oe=[d[0]-c[0],d[1]-c[1]],Ke=(K+u)/K,sr=(rt+u)/rt;s.clockwise===!1&&(Ke=(rt+u)/rt,sr=(K+u)/K);var Jr=Hn.scale([0,0],Oe,Ke),Tn=[c[0]+Jr[0],c[1]+Jr[1]],vn=[T[0]-c[0],T[1]-c[1]],Yr=Hn.scale([0,0],vn,sr),Gn=[c[0]+Yr[0],c[1]+Yr[1]];return e.startPoint={x:d[0],y:d[1]},e.endPoint={x:T[0],y:T[1]},e.controlPoints=[{x:Tn[0],y:Tn[1]},{x:Gn[0],y:Gn[1]}],e},no=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var l=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([l.x,l.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=tr*2),r&&(u.x+=Vr(c)*r,u.y+=mr(c)*r),n){var d=c-tr/2;c>1/2*tr&&c<3*1/2*tr&&(d-=tr),u.x+=Vr(d)*n,u.y+=mr(d)*n}var T={x:u.x,y:u.y,angle:c};return a?(c>.5*tr&&c<1.5*tr&&(c-=tr),(0,m.__assign)({rotate:c},T)):T},wo=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},ds=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Oi=function(e,t){typeof t=="function"&&wo(e,null,-1,t)},ao=function(e,t){typeof t=="function"&&ds(e,null,-1,t)},Yo=function(e,t){return t*(Be[e]||1)},hs=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=Yo(a,t)}),[r,t]},qo=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},Es=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,l){var c=(0,f.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var d=n[c.id];if(d){if(c.children=d.children,n[c.id]=c,d=c,!d.parentId){r.push(d);return}var T=n[d.parentId];if(T)T.children?T.children.push(c):T.children=[c];else{var O={id:d.parentId,children:[d]};n[d.parentId]=O,n[c.id]=c}return}if((0,f.isString)(u.parentId)){var F=n[u.parentId];if(F)F.children?F.children.push(c):F.children=[c],n[c.id]=c;else{var K={id:u.parentId,children:[c]};n[K.id]=K,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var l=n[u.comboId];if(l){var c={id:u.id,comboId:u.comboId};l.children?l.children.push(c):l.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,Oi(u,function(l){var c,d=n[l.id].itemType;d==="node"?c=n[l.comboId]:c=n[l.parentId],c&&d==="node"?l.depth=s+1:l.depth=s+10,s<l.depth&&(s=l.depth);var T=o[l.id];return T&&(T.depth=l.depth),!0})}),r},As=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,l="root";(e||[]).forEach(function(F){if(!u){if(F.id===t){o=F,F.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Oi(F,function(K){var rt;return s[K.id]={children:(K==null?void 0:K.children)||[]},a=(rt=s[K.parentId||K.comboId||"root"])===null||rt===void 0?void 0:rt.children,K&&(K.removed||t===K.id)&&a?(l=K.parentId||K.comboId||"root",o=K,K.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[l])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var d=!1;if(r){var T=0;(e||[]).forEach(function(F){d||Oi(F,function(K){return r===K.id?(d=!0,K.children?K.children.push(o):K.children=[o],T=K.depth,o.itemType==="node"?o.depth=T+2:o.depth=T+1,!1):!0})})}else(!r||!d)&&o.itemType!=="node"&&e.push(o);var O=o.depth;Oi(o,function(F){return F.itemType==="node"?O+=2:O+=1,F.depth=O,!0})}return e},ws=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,l=o.fixSize,c=o.collapsed,d=o.fixCollapseSize,T=c?d:l,O=(0,f.isArray)(T)?T:[T,T],F=O[0],K=O[1],rt=[F/2,K/2];return{minX:s-rt[0],minY:u-rt[1],maxX:s+rt[0],maxY:u+rt[1],x:s,y:u,width:F,height:K}}return e.forEach(function(lt){var ct=t.findById(lt.id);if(!(!ct||!ct.isVisible())){ct.set("bboxCanvasCache",void 0);var pt=ct.getCanvasBBox();pt.x&&n.minX>pt.minX&&(n.minX=pt.minX),pt.y&&n.minY>pt.minY&&(n.minY=pt.minY),pt.x&&n.maxX<pt.maxX&&(n.maxX=pt.maxX),pt.y&&n.maxY<pt.maxY&&(n.maxY=pt.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(lt){(n[lt]===1/0||n[lt]===-1/0)&&(n[lt]=void 0)}),n},nu=function(e){var t=(0,f.isNumber)(e.x)||(0,f.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,f.isNumber)(e.style.r)||(0,f.isNumber)(e.style.width)||(0,f.isNumber)(e.style.height)||(0,f.isNumber)(e.style.rx)||(0,f.isNumber)(e.style.ry)),t},Ko=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if((0,f.isObject)(n)&&!(0,f.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,f.isString)(s)||(a[o]=(0,f.clone)(s))}),t[r]=a}else t[r]=(0,f.clone)(n)}),t},os=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,f.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},vs=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Oi(e,function(T){return(0,f.isString)(T.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(T){return!(0,f.isString)(T.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(T){return T.id}),l=a==null?void 0:a.map(function(T){return T.id}),c=(0,m.__spreadArray)((0,m.__spreadArray)([],u,!0),l,!0),d=(r||[]).find(function(T){return!c.includes(T.source)||!c.includes(T.target)});return d?(console.warn("G6 Warning Tips: The source %c".concat(d.source,"%c or the target %c").concat(d.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},No=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,f.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},xu=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,f.each)(e,function(t){(0,f.each)(t,function(r,n){(0,f.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,f.each)(r||[],function(o){var s=z.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,f.each)(t,function(r){e.indexOf(r)<0&&((0,f.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,f.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,f.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,f.isArray)(e)?a=e:a=[e],(0,f.isArray)(t))return(0,f.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,f.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),Eu=xu,Vi=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,So=new RegExp("([a-z])["+Vi+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Vi+"]*,?["+Vi+"]*)+)","ig"),Ro=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Vi+"]*,?["+Vi+"]*","ig"),h=function(i){if(!i)return null;if((0,f.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(So,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(Ro,function(u,l){l&&o.push(+l)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},Y=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},wt=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),l=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,l],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},Ft=function(i){if(i=h(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var l=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,d=void 0,T=o,O=i.length;T<O;T++){if(e.push(c=[]),d=i[T],s=d[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=+d[6]+t,c[7]=+d[7]+r;break;case"V":c[1]=+d[1]+r;break;case"H":c[1]=+d[1]+t;break;case"R":u=[t,r].concat(d.slice(1));for(var F=2,K=u.length;F<K;F++)u[F]=+u[F]+t,u[++F]=+u[F]+r;e.pop(),e=e.concat(Y(u,l));break;case"O":e.pop(),u=wt(t,r,d[1],d[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(wt(t,r,d[1],d[2],d[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+d[1]+t,a=+d[2]+r;break;default:for(var F=1,K=d.length;F<K;F++)c[F]=+d[F]+(F%2?t:r)}else if(s==="R")u=[t,r].concat(d.slice(1)),e.pop(),e=e.concat(Y(u,l)),c=["R"].concat(d.slice(-2));else if(s==="O")e.pop(),u=wt(t,r,d[1],d[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(wt(t,r,d[1],d[2],d[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var rt=0,lt=d.length;rt<lt;rt++)c[rt]=d[rt];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},Qt=function(i,e,t,r){return[i,e,t,r,t,r]},le=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},de=function(i,e,t,r,n,a,o,s,u,l){t===r&&(t+=1);var c=Math.PI*120/180,d=Math.PI/180*(+n||0),T=[],O,F,K,rt,lt,ct=function(wi,ii,Si){var Di=wi*Math.cos(Si)-ii*Math.sin(Si),uo=wi*Math.sin(Si)+ii*Math.cos(Si);return{x:Di,y:uo}};if(l)F=l[0],K=l[1],rt=l[2],lt=l[3];else{O=ct(i,e,-d),i=O.x,e=O.y,O=ct(s,u,-d),s=O.x,u=O.y,i===s&&e===u&&(s+=1,u+=1);var pt=(i-s)/2,_t=(e-u)/2,jt=pt*pt/(t*t)+_t*_t/(r*r);jt>1&&(jt=Math.sqrt(jt),t=jt*t,r=jt*r);var ae=t*t,ne=r*r,we=(a===o?-1:1)*Math.sqrt(Math.abs((ae*ne-ae*_t*_t-ne*pt*pt)/(ae*_t*_t+ne*pt*pt)));rt=we*t*_t/r+(i+s)/2,lt=we*-r*pt/t+(e+u)/2,F=Math.asin(((e-lt)/r).toFixed(9)),K=Math.asin(((u-lt)/r).toFixed(9)),F=i<rt?Math.PI-F:F,K=s<rt?Math.PI-K:K,F<0&&(F=Math.PI*2+F),K<0&&(K=Math.PI*2+K),o&&F>K&&(F=F-Math.PI*2),!o&&K>F&&(K=K-Math.PI*2)}var Fe=K-F;if(Math.abs(Fe)>c){var Oe=K,Ke=s,sr=u;K=F+c*(o&&K>F?1:-1),s=rt+t*Math.cos(K),u=lt+r*Math.sin(K),T=de(s,u,t,r,n,0,o,Ke,sr,[K,Oe,rt,lt])}Fe=K-F;var Jr=Math.cos(F),Tn=Math.sin(F),vn=Math.cos(K),Yr=Math.sin(K),Gn=Math.tan(Fe/4),kn=4/3*t*Gn,Xr=4/3*r*Gn,fn=[i,e],An=[i+kn*Tn,e-Xr*Jr],On=[s+kn*Yr,u-Xr*vn],jn=[s,u];if(An[0]=2*fn[0]-An[0],An[1]=2*fn[1]-An[1],l)return[An,On,jn].concat(T);T=[An,On,jn].concat(T).join().split(",");for(var ta=[],ba=0,La=T.length;ba<La;ba++)ta[ba]=ba%2?ct(T[ba-1],T[ba],d).y:ct(T[ba],T[ba+1],d).x;return ta},_e=function(i,e){var t=Ft(i),r=e&&Ft(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",l="",c,d=function(pt,_t,jt){var ae,ne;if(!pt)return["C",_t.x,_t.y,_t.x,_t.y,_t.x,_t.y];switch(!(pt[0]in{T:1,Q:1})&&(_t.qx=_t.qy=null),pt[0]){case"M":_t.X=pt[1],_t.Y=pt[2];break;case"A":pt=["C"].concat(de.apply(0,[_t.x,_t.y].concat(pt.slice(1))));break;case"S":jt==="C"||jt==="S"?(ae=_t.x*2-_t.bx,ne=_t.y*2-_t.by):(ae=_t.x,ne=_t.y),pt=["C",ae,ne].concat(pt.slice(1));break;case"T":jt==="Q"||jt==="T"?(_t.qx=_t.x*2-_t.qx,_t.qy=_t.y*2-_t.qy):(_t.qx=_t.x,_t.qy=_t.y),pt=["C"].concat(le(_t.x,_t.y,_t.qx,_t.qy,pt[1],pt[2]));break;case"Q":_t.qx=pt[1],_t.qy=pt[2],pt=["C"].concat(le(_t.x,_t.y,pt[1],pt[2],pt[3],pt[4]));break;case"L":pt=["C"].concat(Qt(_t.x,_t.y,pt[1],pt[2]));break;case"H":pt=["C"].concat(Qt(_t.x,_t.y,pt[1],_t.y));break;case"V":pt=["C"].concat(Qt(_t.x,_t.y,_t.x,pt[1]));break;case"Z":pt=["C"].concat(Qt(_t.x,_t.y,_t.X,_t.Y));break;default:break}return pt},T=function(pt,_t){if(pt[_t].length>7){pt[_t].shift();for(var jt=pt[_t];jt.length;)o[_t]="A",r&&(s[_t]="A"),pt.splice(_t++,0,["C"].concat(jt.splice(0,6)));pt.splice(_t,1),c=Math.max(t.length,r&&r.length||0)}},O=function(pt,_t,jt,ae,ne){pt&&_t&&pt[ne][0]==="M"&&_t[ne][0]!=="M"&&(_t.splice(ne,0,["M",ae.x,ae.y]),jt.bx=0,jt.by=0,jt.x=pt[ne][1],jt.y=pt[ne][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var F=0;F<c;F++){t[F]&&(u=t[F][0]),u!=="C"&&(o[F]=u,F&&(l=o[F-1])),t[F]=d(t[F],n,l),o[F]!=="A"&&u==="C"&&(o[F]="C"),T(t,F),r&&(r[F]&&(u=r[F][0]),u!=="C"&&(s[F]=u,F&&(l=s[F-1])),r[F]=d(r[F],a,l),s[F]!=="A"&&u==="C"&&(s[F]="C"),T(r,F)),O(t,r,n,a,F),O(r,t,a,n,F);var K=t[F],rt=r&&r[F],lt=K.length,ct=r&&rt.length;n.x=K[lt-2],n.y=K[lt-1],n.bx=parseFloat(K[lt-4])||n.x,n.by=parseFloat(K[lt-3])||n.y,a.bx=r&&(parseFloat(rt[ct-4])||a.x),a.by=r&&(parseFloat(rt[ct-3])||a.y),a.x=r&&rt[ct-2],a.y=r&&rt[ct-1]}return r?[t,r]:t},Le=/,?([a-z]),?/gi,Ye=function(i){return i.join(",").replace(Le,"$1")},or=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},Br=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var l=u/2,c=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],T=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],O=0,F=0;F<c;F++){var K=l*d[F]+l,rt=or(K,i,t,n,o),lt=or(K,e,r,a,s),ct=rt*rt+lt*lt;O+=T[F]*Math.sqrt(ct)}return l*O},Gr=function(i,e,t,r,n,a,o,s){for(var u=[],l=[[],[]],c,d,T,O,F=0;F<2;++F){if(F===0?(d=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,T=3*t-3*i):(d=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,T=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(d)<1e-12)continue;O=-T/d,O>0&&O<1&&u.push(O);continue}var K=d*d-4*T*c,rt=Math.sqrt(K);if(!(K<0)){var lt=(-d+rt)/(2*c);lt>0&&lt<1&&u.push(lt);var ct=(-d-rt)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var pt=u.length,_t=pt,jt;pt--;)O=u[pt],jt=1-O,l[0][pt]=jt*jt*jt*i+3*jt*jt*O*t+3*jt*O*O*n+O*O*O*o,l[1][pt]=jt*jt*jt*e+3*jt*jt*O*r+3*jt*O*O*a+O*O*O*s;return l[0][_t]=i,l[1][_t]=e,l[0][_t+1]=o,l[1][_t+1]=s,l[0].length=l[1].length=_t+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}},Fr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),l=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var d=u/c,T=l/c,O=+d.toFixed(2),F=+T.toFixed(2);if(!(O<+Math.min(i,t).toFixed(2)||O>+Math.max(i,t).toFixed(2)||O<+Math.min(n,o).toFixed(2)||O>+Math.max(n,o).toFixed(2)||F<+Math.min(e,r).toFixed(2)||F>+Math.max(e,r).toFixed(2)||F<+Math.min(a,s).toFixed(2)||F>+Math.max(a,s).toFixed(2)))return{x:d,y:T}}}},pn=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Dn=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=Ye,a},Qr=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:Dn(i,e,t,r),vb:[i,e,t,r].join(" ")}},Vn=function(i,e){return i=Qr(i),e=Qr(e),pn(e,i.x,i.y)||pn(e,i.x2,i.y)||pn(e,i.x,i.y2)||pn(e,i.x2,i.y2)||pn(i,e.x,e.y)||pn(i,e.x2,e.y)||pn(i,e.x,e.y2)||pn(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},Ta=function(i,e,t,r,n,a,o,s){(0,f.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=Gr.apply(null,i);return Qr(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Oa=function(i,e,t,r,n,a,o,s,u){var l=1-u,c=Math.pow(l,3),d=Math.pow(l,2),T=u*u,O=T*u,F=c*i+d*3*u*t+l*3*u*u*n+O*o,K=c*e+d*3*u*r+l*3*u*u*a+O*s,rt=i+2*u*(t-i)+T*(n-2*t+i),lt=e+2*u*(r-e)+T*(a-2*r+e),ct=t+2*u*(n-t)+T*(o-2*n+t),pt=r+2*u*(a-r)+T*(s-2*a+r),_t=l*i+u*t,jt=l*e+u*r,ae=l*n+u*o,ne=l*a+u*s,we=90-Math.atan2(rt-ct,lt-pt)*180/Math.PI;return{x:F,y:K,m:{x:rt,y:lt},n:{x:ct,y:pt},start:{x:_t,y:jt},end:{x:ae,y:ne},alpha:we}},Ea=function(i,e,t){var r=Ta(i),n=Ta(e);if(!Vn(r,n))return t?0:[];for(var a=Br.apply(0,i),o=Br.apply(0,e),s=~~(a/8),u=~~(o/8),l=[],c=[],d={},T=t?0:[],O=0;O<s+1;O++){var F=Oa.apply(0,i.concat(O/s));l.push({x:F.x,y:F.y,t:O/s})}for(var O=0;O<u+1;O++){var F=Oa.apply(0,e.concat(O/u));c.push({x:F.x,y:F.y,t:O/u})}for(var O=0;O<s;O++)for(var K=0;K<u;K++){var rt=l[O],lt=l[O+1],ct=c[K],pt=c[K+1],_t=Math.abs(lt.x-rt.x)<.001?"y":"x",jt=Math.abs(pt.x-ct.x)<.001?"y":"x",ae=Fr(rt.x,rt.y,lt.x,lt.y,ct.x,ct.y,pt.x,pt.y);if(ae){if(d[ae.x.toFixed(4)]===ae.y.toFixed(4))continue;d[ae.x.toFixed(4)]=ae.y.toFixed(4);var ne=rt.t+Math.abs((ae[_t]-rt[_t])/(lt[_t]-rt[_t]))*(lt.t-rt.t),we=ct.t+Math.abs((ae[jt]-ct[jt])/(pt[jt]-ct[jt]))*(pt.t-ct.t);ne>=0&&ne<=1&&we>=0&&we<=1&&(t?T+=1:T.push({x:ae.x,y:ae.y,t1:ne,t2:we}))}}return T},ca=function(i,e,t){i=_e(i),e=_e(e);for(var r,n,a,o,s,u,l,c,d,T,O=t?0:[],F=0,K=i.length;F<K;F++){var rt=i[F];if(rt[0]==="M")r=s=rt[1],n=u=rt[2];else{rt[0]==="C"?(d=[r,n].concat(rt.slice(1)),r=d[6],n=d[7]):(d=[r,n,r,n,s,u,s,u],r=s,n=u);for(var lt=0,ct=e.length;lt<ct;lt++){var pt=e[lt];if(pt[0]==="M")a=l=pt[1],o=c=pt[2];else{pt[0]==="C"?(T=[a,o].concat(pt.slice(1)),a=T[6],o=T[7]):(T=[a,o,a,o,l,c,l,c],a=l,o=c);var _t=Ea(d,T,t);if(t)O+=_t;else{for(var jt=0,ae=_t.length;jt<ae;jt++)_t[jt].segment1=F,_t[jt].segment2=lt,_t[jt].bez1=d,_t[jt].bez2=T;O=O.concat(_t)}}}}}return O},ma=function(i,e){return ca(i,e)};function io(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function $i(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),l=io(a,u);n.push(l.left),a=l.right}n.push(a);var c=n.map(function(d){var T=[];return d.length===4&&(T.push("C"),T=T.concat(d[2])),d.length>=3&&(d.length===3&&T.push("Q"),T=T.concat(d[1])),d.length===2&&T.push("L"),T=T.concat(d[d.length-1]),T});return c}var Hi=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat($i(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},Qi=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(l,c,d){return d===t?l.concat(i[t]):l.concat(Hi(i[d],i[d+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},qi=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,f.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function ho(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Mo=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var l=0;l<=r;l++)s[0][l]={min:l};for(var u=1;u<=t;u++){n=i[u-1];for(var l=1;l<=r;l++){a=e[l-1],qi(n,a)?o=0:o=1;var c=s[u-1][l].min+1,d=s[u][l-1].min+1,T=s[u-1][l-1].min+o;s[u][l]=ho(c,d,T)}}return s},Xa=function(i,e){var t=Mo(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var l=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<l&&(l=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var d=n-r;if(r<n)for(var u=0;u<d;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function hi(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=Os(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function Os(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var ps=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=Os(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=hi(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=hi(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=hi(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},es=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),au=es;function xc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var sf=typeof window!="undefined"&&typeof window.document!="undefined";function uf(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function Ec(i){return i.cfg.visible&&i.cfg.capture}var rd=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,f.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(J),wc=rd,Ju=_(734155),lf=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},Sc=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),cf=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=Ju.platform}return i}(),nd=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),iu=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),ff=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Wn=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,wu=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ja=3,Mc=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Wn]],Pl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ou(i){return i?Ll(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new ff:typeof navigator!="undefined"?Ll(navigator.userAgent):hf()}function _c(i){return i!==""&&Mc.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function Cc(i){var e=_c(i);return e?e[0]:null}function Ll(i){var e=_c(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new iu;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<ja&&(n=lf(lf([],n,!0),gs(ja-n.length),!0)):n=[];var a=n.join("."),o=df(i),s=wu.exec(i);return s&&s[1]?new nd(t,a,o,s[1]):new Sc(t,a,o)}function df(i){for(var e=0,t=Pl.length;e<t;e++){var r=Pl[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function hf(){var i=typeof Ju!="undefined"&&Ju.version;return i?new cf(Ju.version.slice(1)):null}function gs(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function Tc(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],l=i[6],c=i[7],d=i[8],T=e[0],O=e[1],F=e[2],K=e[3],rt=e[4],lt=e[5],ct=e[6],pt=e[7],_t=e[8];return t[0]=T*r+O*o+F*l,t[1]=T*n+O*s+F*c,t[2]=T*a+O*u+F*d,t[3]=K*r+rt*o+lt*l,t[4]=K*n+rt*s+lt*c,t[5]=K*a+rt*u+lt*d,t[6]=ct*r+pt*o+_t*l,t[7]=ct*n+pt*s+_t*c,t[8]=ct*a+pt*u+_t*d,t}function Ws(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function yo(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],l=i[7],c=i[8],d=c*o-s*l,T=-c*a+s*u,O=l*a-o*u,F=t*d+r*T+n*O;return F?(F=1/F,e[0]=d*F,e[1]=(-c*r+n*l)*F,e[2]=(s*r-n*o)*F,e[3]=T*F,e[4]=(c*t-n*u)*F,e[5]=(-s*t+n*a)*F,e[6]=O*F,e[7]=(-l*t+r*u)*F,e[8]=(o*t-r*a)*F,e):null}var Ys=ft,Is="matrix",Nl=["zIndex","capture","visible","type"],Ac=["repeat"],vf=":",pf="*";function gf(i){for(var e=[],t=0;t<i.length;t++)(0,f.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Rl(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function mf(i,e){var t={},r=e.attr();return(0,f.each)(i,function(n,a){Ac.indexOf(a)===-1&&!(0,f.isEqual)(r[a],n)&&(t[a]=n)}),t}function kl(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,f.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,f.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var yf=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,f.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,f.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(xc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Is,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Is)},e.prototype.setMatrix=function(t){this.attr(Is,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=Tc(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=Tc(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?Ws(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=yo(r);if(n)return Ws(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,f.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,f.each)(r,function(s,u){(0,f.isArray)(r[u])?n[u]=gf(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,f.each)(Nl,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],l=u===void 0?"easeLinear":u,c=t[3],d=c===void 0?f.noop:c,T=t[4],O=T===void 0?0:T,F,K,rt,lt,ct;(0,f.isFunction)(o)?(F=o,o={}):(0,f.isObject)(o)&&o.onFrame&&(F=o.onFrame,K=o.repeat),(0,f.isObject)(s)?(ct=s,s=ct.duration,l=ct.easing||"easeLinear",O=ct.delay||0,K=ct.repeat||K||!1,d=ct.callback||f.noop,rt=ct.pauseCallback||f.noop,lt=ct.resumeCallback||f.noop):((0,f.isNumber)(d)&&(O=d,d=null),(0,f.isFunction)(l)?(d=l,l="easeLinear"):l=l||"easeLinear");var pt=mf(o,this),_t={fromAttrs:Rl(pt,this),toAttrs:pt,duration:s,easing:l,repeat:K,callback:d,pauseCallback:rt,resumeCallback:lt,delay:O,startTime:n.getTime(),id:(0,f.uniqueId)(),onFrame:F,pathFormatted:!1};a.length>0?a=kl(a,_t):n.addAnimator(this),a.push(_t),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,f.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,f.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,f.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(T){var O=a[T],F=O.get("name");if(F){if((O.isGroup()||O.isCanvas&&O.isCanvas())&&s&&uf(O,s))return"break";(0,f.isArray)(F)?(0,f.each)(F,function(K){n.emitDelegateEvent(O,K,r)}):l.emitDelegateEvent(O,F,r)}},l=this,c=0;c<a.length;c++){var d=u(c);if(d==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+vf+n.type;(a[o]||a[pf])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=Ys(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=Ys(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=Ys(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=Ys(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=Ys(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(wc),Oc=yf,tl={},Ic="_INDEX";function ss(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){ss(r,e)})}}function Dc(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){Dc(r,e)})}}function el(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function bf(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),xc(i.getChildren(),e)}function ad(i){return function(e,t){var r=i(e,t);return r===0?e[Ic]-t[Ic]:r}}var Pc=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,f.each)(o,function(u){var l=u.getBBox(),c=l.minX,d=l.maxX,T=l.minY,O=l.maxY;c<t&&(t=c),d>r&&(r=d),T<n&&(n=T),O>a&&(a=O)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,f.each)(o,function(u){var l=u.getCanvasBBox(),c=l.minX,d=l.maxX,T=l.minY,O=l.maxY;c<t&&(t=c),d>r&&(r=d),T<n&&(n=T),O>a&&(a=O)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,f.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,f.isObject)(n)?a=n:a.type=n;var o=tl[a.type];o||(o=(0,f.upperFirst)(a.type),tl[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,f.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!Ec(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(Ec(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&bf(o,t,!1),t.set("parent",this),r&&ss(t,r),a&&Dc(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,f.each)(t,function(r,n){return r[Ic]=n,r}),t.sort(ad(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,f.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,f.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(Oc),rl=Pc,id=_(235374),Lc=_(952677);function Nc(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function xf(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function nl(){}var Su=.7,su=1/Su,Mu="\\s*([+-]?\\d+)\\s*",al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ss="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ef=/^#([0-9a-f]{3,8})$/,_u=new RegExp("^rgb\\(".concat(Mu,",").concat(Mu,",").concat(Mu,"\\)$")),od=new RegExp("^rgb\\(".concat(Ss,",").concat(Ss,",").concat(Ss,"\\)$")),sd=new RegExp("^rgba\\(".concat(Mu,",").concat(Mu,",").concat(Mu,",").concat(al,"\\)$")),Bl=new RegExp("^rgba\\(".concat(Ss,",").concat(Ss,",").concat(Ss,",").concat(al,"\\)$")),Rc=new RegExp("^hsl\\(".concat(al,",").concat(Ss,",").concat(Ss,"\\)$")),ud=new RegExp("^hsla\\(".concat(al,",").concat(Ss,",").concat(Ss,",").concat(al,"\\)$")),il={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nc(nl,ol,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:wf,formatHex:wf,formatHex8:ld,formatHsl:Sf,formatRgb:Mf,toString:Mf});function wf(){return this.rgb().formatHex()}function ld(){return this.rgb().formatHex8()}function Sf(){return Ul(this).formatHsl()}function Mf(){return this.rgb().formatRgb()}function ol(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=Ef.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?Cu(e):t===3?new Ao(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Tu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Tu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_u.exec(i))?new Ao(e[1],e[2],e[3],1):(e=od.exec(i))?new Ao(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sd.exec(i))?Tu(e[1],e[2],e[3],e[4]):(e=Bl.exec(i))?Tu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Rc.exec(i))?Gl(e[1],e[2]/100,e[3]/100,1):(e=ud.exec(i))?Gl(e[1],e[2]/100,e[3]/100,e[4]):il.hasOwnProperty(i)?Cu(il[i]):i==="transparent"?new Ao(NaN,NaN,NaN,0):null}function Cu(i){return new Ao(i>>16&255,i>>8&255,i&255,1)}function Tu(i,e,t,r){return r<=0&&(i=e=t=NaN),new Ao(i,e,t,r)}function Fl(i){return i instanceof nl||(i=ol(i)),i?(i=i.rgb(),new Ao(i.r,i.g,i.b,i.opacity)):new Ao}function zl(i,e,t,r){return arguments.length===1?Fl(i):new Ao(i,e,t,r==null?1:r)}function Ao(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}Nc(Ao,zl,xf(nl,{brighter:function(e){return e=e==null?su:Math.pow(su,e),new Ao(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Su:Math.pow(Su,e),new Ao(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Ao(us(this.r),us(this.g),us(this.b),sl(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uu,formatHex:uu,formatHex8:_f,formatRgb:lu,toString:lu}));function uu(){return"#".concat(Ds(this.r)).concat(Ds(this.g)).concat(Ds(this.b))}function _f(){return"#".concat(Ds(this.r)).concat(Ds(this.g)).concat(Ds(this.b)).concat(Ds((isNaN(this.opacity)?1:this.opacity)*255))}function lu(){var i=sl(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(us(this.r),", ").concat(us(this.g),", ").concat(us(this.b)).concat(i===1?")":", ".concat(i,")"))}function sl(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function us(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Ds(i){return i=us(i),(i<16?"0":"")+i.toString(16)}function Gl(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new rs(i,e,t,r)}function Ul(i){if(i instanceof rs)return new rs(i.h,i.s,i.l,i.opacity);if(i instanceof nl||(i=ol(i)),!i)return new rs;if(i instanceof rs)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new rs(o,s,u,i.opacity)}function kc(i,e,t,r){return arguments.length===1?Ul(i):new rs(i,e,t,r==null?1:r)}function rs(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}Nc(rs,kc,xf(nl,{brighter:function(e){return e=e==null?su:Math.pow(su,e),new rs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Su:Math.pow(Su,e),new rs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ao(Wl(e>=240?e-240:e+120,a,n),Wl(e,a,n),Wl(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new rs(ul(this.h),ll(this.s),ll(this.l),sl(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=sl(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(ul(this.h),", ").concat(ll(this.s)*100,"%, ").concat(ll(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function ul(i){return i=(i||0)%360,i<0?i+360:i}function ll(i){return Math.max(0,Math.min(1,i||0))}function Wl(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function Bc(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function Cf(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return Bc((t-r/e)*e,o,n,a,s)}}function Tf(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return Bc((t-r/e)*e,n,a,o,s)}}var cl=function(i){return function(){return i}};function Yl(i,e){return function(t){return i+t*e}}function Af(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function cd(i,e){var t=e-i;return t?Yl(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function Of(i){return(i=+i)==1?Au:function(e,t){return t-e?Af(e,t,i):cl(isNaN(e)?t:e)}}function Au(i,e){var t=e-i;return t?Yl(i,t):cl(isNaN(i)?e:i)}var Xl=function i(e){var t=Of(e);function r(n,a){var o=t((n=zl(n)).r,(a=zl(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),l=Au(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=l(c),n+""}}return r.gamma=i,r}(1);function qe(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=zl(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var fd=qe(Cf),fl=qe(Tf);function dl(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function Fc(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function zc(i,e){return(Fc(e)?dl:Gc)(i,e)}function Gc(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=Xs(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function If(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function cu(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function jl(i,e){var t={},r={},n;(i===null||Lc(i)!=="object")&&(i={}),(e===null||Lc(e)!=="object")&&(e={});for(n in e)n in i?t[n]=Xs(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ou=new RegExp(hl.source,"g");function _o(i){return function(){return i}}function Iu(i){return function(e){return i(e)+""}}function Uc(i,e){var t=hl.lastIndex=Ou.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=hl.exec(i))&&(n=Ou.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:cu(r,n)})),t=Ou.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Iu(u[0].x):_o(e):(e=u.length,function(l){for(var c=0,d;c<e;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}function Xs(i,e){var t=Lc(e),r;return e==null||t==="boolean"?cl(e):(t==="number"?cu:t==="string"?(r=ol(e))?(e=r,Xl):Uc:e instanceof ol?Xl:e instanceof Date?If:Fc(e)?dl:Array.isArray(e)?Gc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?jl:cu)(i,e)}function Ms(i){return+i}function Du(i){return i*i}function fu(i){return i*(2-i)}function Ps(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function Pu(i){return i*i*i}function du(i){return--i*i*i+1}function js(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var Ls=3,Vl=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(Ls),Hl=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(Ls),Lu=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(Ls),Zl=Math.PI,Kl=Zl/2;function Nu(i){return+i==1?1:1-Math.cos(i*Kl)}function ls(i){return Math.sin(i*Kl)}function $l(i){return(1-Math.cos(Zl*i))/2}function Ns(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function Ql(i){return Ns(1-+i)}function Wc(i){return 1-Ns(i)}function ql(i){return((i*=2)<=1?Ns(1-i):2-Ns(i-1))/2}function Df(i){return 1-Math.sqrt(1-i*i)}function hu(i){return Math.sqrt(1- --i*i)}function Yc(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var Jl=4/11,dd=6/11,Pf=8/11,Lf=3/4,hd=9/11,Nf=10/11,Rf=15/16,vd=21/22,kf=63/64,vl=1/Jl/Jl;function Bf(i){return 1-Ru(1-i)}function Ru(i){return(i=+i)<Jl?vl*i*i:i<Pf?vl*(i-=dd)*i+Lf:i<Nf?vl*(i-=hd)*i+Rf:vl*(i-=vd)*i+kf}function Xc(i){return((i*=2)<=1?1-Ru(1-i):Ru(i-1)+1)/2}var vu=1.70158,tc=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(vu),ec=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(vu),pl=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(vu),Vs=2*Math.PI,ku=1,Bu=.3,gl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Vs);function n(a){return e*Ns(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*Vs)},n.period=function(a){return i(e,a)},n}(ku,Bu),rc=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Vs);function n(a){return 1-e*Ns(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*Vs)},n.period=function(a){return i(e,a)},n}(ku,Bu),nc=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Vs);function n(a){return((a=a*2-1)<0?e*Ns(-a)*Math.sin((r-a)/t):2-e*Ns(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*Vs)},n.period=function(a){return i(e,a)},n}(ku,Bu),ml={};function ac(i){return ml[i.toLowerCase()]||P[i]}function ic(i,e){ml[i.toLowerCase()]=e}var yl=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},Fu=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},zu=[1,0,0,0,1,0,0,0,1];function Gu(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,f.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],l=n[s];u.length>l.length?(u=h(a[s]),l=h(n[s]),l=Xa(l,u),l=ps(l,u),e.fromAttrs.path=l,e.toAttrs.path=u):e.pathFormatted||(u=h(a[s]),l=h(n[s]),l=ps(l,u),e.fromAttrs.path=l,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var d=u[c],T=l[c],O=[],F=0;F<d.length;F++)(0,f.isNumber)(d[F])&&T&&(0,f.isNumber)(T[F])?(o=Xs(T[F],d[F]),O.push(o(t))):O.push(d[F]);r[s].push(O)}}else if(s==="matrix"){var K=zc(n[s]||zu,a[s]||zu),rt=K(t);r[s]=rt}else yl(s)&&Fu(a[s])?r[s]=a[s]:(0,f.isFunction)(a[s])||(o=Xs(n[s],a[s]),r[s]=o(t));i.attr(r)}}function Ff(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=ac(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var l=e.onFrame(a);i.attr(l)}else Gu(i,e,a);return!1}var bl=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=id.HT(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=Ff(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var l=e.canvas.get("autoDraw");l||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),pu=bl,zf=40,xl=0,pd=":",Gf=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ud(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(pd+e)>=0)return!0;return!1}function Rs(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function Uf(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&uf(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var Wf=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,f.each)(Gf,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,f.each)(Gf,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new au(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,l=u.get("el");l.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===xl&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===xl){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,l=r.timeStamp,c=l-this.mousedownTimeStamp,d=s.clientX-e.clientX,T=s.clientY-e.clientY,O=d*d+T*T;c>120||O>zf?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,Rs(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||Uf(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var l=this.canvas;Rs(l,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),Yf=Wf,Xf="px",jc=ou(),gd=jc&&jc.name==="firefox",ko=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,f.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Yf({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new pu(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");sf&&(n.style.width=t+Xf,n.style.height=r+Xf)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");sf&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(gd&&!(0,f.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,f.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(rl),Vc=ko,Uu=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(rl),ks=Uu,jf=function(i){(0,m.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=Ws(r,[t.minX,t.minY]),l=Ws(r,[t.maxX,t.minY]),c=Ws(r,[t.minX,t.maxY]),d=Ws(r,[t.maxX,t.maxY]);n=Math.min(u[0],l[0],c[0],d[0]),o=Math.max(u[0],l[0],c[0],d[0]),a=Math.min(u[1],l[1],c[1],d[1]),s=Math.max(u[1],l[1],c[1],d[1])}var T=this.attrs;if(T.shadowColor){var O=T.shadowBlur,F=O===void 0?0:O,K=T.shadowOffsetX,rt=K===void 0?0:K,lt=T.shadowOffsetY,ct=lt===void 0?0:lt,pt=n-F+rt,_t=o+F+rt,jt=a-F+ct,ae=s+F+ct;n=Math.min(n,pt),o=Math.max(o,_t),a=Math.min(a,jt),s=Math.max(s,ae)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],l=this._isInBBox(s,u);return this.isOnlyHitBox()?l:!!(l&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(Oc),oc=jf,El=new Map;function ms(i,e){El.set(i,e)}function Xo(i){return El.get(i)}function Bs(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function oo(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function gi(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function gu(i,e){return Math.abs(i-e)<.001}function Wu(i,e){var t=(0,f.min)(i),r=(0,f.min)(e),n=(0,f.max)(i),a=(0,f.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function md(i,e,t,r){return{minX:(0,f.min)([i,t]),maxX:(0,f.max)([i,t]),minY:(0,f.min)([e,r]),maxY:(0,f.max)([e,r])}}function sc(i){return(i+Math.PI*2)%(Math.PI*2)}var Do={box:function(i,e,t,r){return Wu([i,t],[e,r])},length:function(i,e,t,r){return gi(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return gi(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?gi(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(Hn.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];Hn.normalize(s,s);var u=[n-i,a-e];return Math.abs(Hn.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},Vf=1e-4;function Hf(i,e,t,r,n,a){var o,s=1/0,u=[t,r],l=20;a&&a>200&&(l=a/10);for(var c=1/l,d=c/10,T=0;T<=l;T++){var O=T*c,F=[n.apply(null,i.concat([O])),n.apply(null,e.concat([O]))],K=gi(u[0],u[1],F[0],F[1]);K<s&&(o=O,s=K)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var rt=i.length;return{x:i[rt-1],y:e[rt-1]}}s=1/0;for(var T=0;T<32&&!(d<Vf);T++){var lt=o-d,ct=o+d,F=[n.apply(null,i.concat([lt])),n.apply(null,e.concat([lt]))],K=gi(u[0],u[1],F[0],F[1]);if(lt>=0&&K<s)o=lt,s=K;else{var pt=[n.apply(null,i.concat([ct])),n.apply(null,e.concat([ct]))],_t=gi(u[0],u[1],pt[0],pt[1]);ct<=1&&_t<s?(o=ct,s=_t):d*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function yd(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=gi(a,o,s,u)}return t/2}function Hs(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function Zf(i,e,t){var r=i+t-2*e;if(gu(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function Hc(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function uc(i,e,t,r,n,a,o){var s=Hs(i,t,n,o),u=Hs(e,r,a,o),l=Do.pointAt(i,e,t,r,o),c=Do.pointAt(t,r,n,a,o);return[[i,e,l.x,l.y,s,u],[s,u,c.x,c.y,n,a]]}function Yu(i,e,t,r,n,a,o){if(o===0)return(gi(i,e,t,r)+gi(t,r,n,a)+gi(i,e,n,a))/2;var s=uc(i,e,t,r,n,a,.5),u=s[0],l=s[1];return u.push(o-1),l.push(o-1),Yu.apply(null,u)+Yu.apply(null,l)}var Zc={box:function(i,e,t,r,n,a){var o=Zf(i,t,n)[0],s=Zf(e,r,a)[0],u=[i,n],l=[e,a];return o!==void 0&&u.push(Hs(i,t,n,o)),s!==void 0&&l.push(Hs(e,r,a,s)),Wu(u,l)},length:function(i,e,t,r,n,a){return Yu(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return Hf([i,t,n],[e,r,a],o,s,Hs)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return gi(u.x,u.y,o,s)},interpolationAt:Hs,pointAt:function(i,e,t,r,n,a,o){return{x:Hs(i,t,n,o),y:Hs(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return uc(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=Hc(i,t,n,o),u=Hc(e,r,a,o),l=Math.atan2(u,s);return sc(l)}};function Zs(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function Kc(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function lc(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,l,c;if(gu(n,0))gu(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var d=a*a-4*n*o;gu(d,0)?s.push(-a/(2*n)):d>0&&(c=Math.sqrt(d),u=(-a+c)/(2*n),l=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),l>=0&&l<=1&&s.push(l))}return s}function wl(i,e,t,r,n,a,o,s,u){var l=Zs(i,t,n,o,u),c=Zs(e,r,a,s,u),d=Do.pointAt(i,e,t,r,u),T=Do.pointAt(t,r,n,a,u),O=Do.pointAt(n,a,o,s,u),F=Do.pointAt(d.x,d.y,T.x,T.y,u),K=Do.pointAt(T.x,T.y,O.x,O.y,u);return[[i,e,d.x,d.y,F.x,F.y,l,c],[l,c,K.x,K.y,O.x,O.y,o,s]]}function Lt(i,e,t,r,n,a,o,s,u){if(u===0)return yd([i,t,n,o],[e,r,a,s]);var l=wl(i,e,t,r,n,a,o,s,.5),c=l[0],d=l[1];return c.push(u-1),d.push(u-1),Lt.apply(null,c)+Lt.apply(null,d)}var Se={extrema:lc,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],l=[e,s],c=lc(i,t,n,o),d=lc(e,r,a,s),T=0;T<c.length;T++)u.push(Zs(i,t,n,o,c[T]));for(var T=0;T<d.length;T++)l.push(Zs(e,r,a,s,d[T]));return Wu(u,l)},length:function(i,e,t,r,n,a,o,s){return Lt(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,l,c){return Hf([i,t,n,o],[e,r,a,s],u,l,Zs,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,l,c){var d=this.nearestPoint(i,e,t,r,n,a,o,s,u,l,c);return gi(d.x,d.y,u,l)},interpolationAt:Zs,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:Zs(i,t,n,o,u),y:Zs(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return wl(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var l=Kc(i,t,n,o,u),c=Kc(e,r,a,s,u);return sc(Math.atan2(c,l))}};function We(i,e){var t=Math.abs(i);return e>0?t:t*-1}var Rr={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,l=a-e,c=Math.abs(u),d=Math.abs(l),T=o*o,O=s*s,F=Math.PI/4,K,rt,lt=0;lt<4;lt++){K=o*Math.cos(F),rt=s*Math.sin(F);var ct=(T-O)*Math.pow(Math.cos(F),3)/o,pt=(O-T)*Math.pow(Math.sin(F),3)/s,_t=K-ct,jt=rt-pt,ae=c-ct,ne=d-pt,we=Math.hypot(jt,_t),Fe=Math.hypot(ne,ae),Oe=we*Math.asin((_t*ne-jt*ae)/(we*Fe)),Ke=Oe/Math.sqrt(T+O-K*K-rt*rt);F+=Ke,F=Math.min(Math.PI/2,Math.max(0,F))}return{x:i+We(K,u),y:e+We(rt,l)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return gi(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return sc(o)}};function qr(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function Nr(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function zr(i,e,t){return Math.atan(-e/i*Math.tan(t))}function hn(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function gn(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function xn(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function mn(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function _n(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function v(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var N={box:function(i,e,t,r,n,a,o){for(var s=zr(t,r,n),u=1/0,l=-1/0,c=[a,o],d=-Math.PI*2;d<=Math.PI*2;d+=Math.PI){var T=s+d;a<o?a<T&&T<o&&c.push(T):o<T&&T<a&&c.push(T)}for(var d=0;d<c.length;d++){var O=gn(i,e,t,r,n,c[d]);O<u&&(u=O),O>l&&(l=O)}for(var F=hn(t,r,n),K=1/0,rt=-1/0,lt=[a,o],d=-Math.PI*2;d<=Math.PI*2;d+=Math.PI){var ct=F+d;a<o?a<ct&&ct<o&&lt.push(ct):o<ct&&ct<a&&lt.push(ct)}for(var d=0;d<lt.length;d++){var pt=xn(i,e,t,r,n,lt[d]);pt<K&&(K=pt),pt>rt&&(rt=pt)}return{x:u,y:K,width:l-u,height:rt-K}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var l=v(s-i,u-e,-n),c=l[0],d=l[1],T=Rr.nearestPoint(0,0,t,r,c,d),O=mn(t,r,T.x,T.y);O<a?T=_n(t,r,a):O>o&&(T=_n(t,r,o));var F=v(T.x,T.y,n);return{x:F[0]+i,y:F[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var l=this.nearestPoint(i,e,t,r,s,u);return gi(l.x,l.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:gn(i,e,t,r,n,u),y:xn(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,l=qr(i,e,t,r,n,a,o,u),c=Nr(i,e,t,r,n,a,o,u);return sc(Math.atan2(c,l))}};function $(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=gi(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function st(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=gi(r[0],r[1],n[0],n[1])}return e}function vt(i,e){if(e>1||e<0||i.length<2)return null;var t=$(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],l=u.from,c=u.to,d=u.length/n;if(e>=a&&e<=a+d){var T=(e-a)/d;o=Do.pointAt(l[0],l[1],c[0],c[1],T);break}a+=d}return o}function mt(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=$(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],l=u.from,c=u.to,d=u.length/n;if(e>=a&&e<=a+d){o=Math.atan2(c[1]-l[1],c[0]-l[0]);break}a+=d}return o}function It(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=Do.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var kt={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return Wu(e,t)},length:function(i){return st(i)},pointAt:function(i,e){return vt(i,e)},pointDistance:function(i,e,t){return It(i,e,t)},tangentAngle:function(i,e){return mt(i,e)}};function Vt(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var oe={box:function(i){return kt.box(i)},length:function(i){return st(Vt(i))},pointAt:function(i,e){return vt(Vt(i),e)},pointDistance:function(i,e,t){return It(Vt(i),e,t)},tangentAngle:function(i,e){return mt(Vt(i),e)}};function Ee(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function ve(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=Ee(e,n)),r&&(a=r.getCanvasBBox(),e=Ee(e,a)),e}function Ge(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=Wu(r,n),u=s.x,l=s.y,c=s.width,d=s.height,T={minX:u,minY:l,maxX:u+c,maxY:l+d};return T=ve(i,T),{x:T.minX,y:T.minY,width:T.maxX-T.minX,height:T.maxY-T.minY}}function ar(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return Wu(r,n)}var Ur=null;function dr(){if(!Ur){var i=document.createElement("canvas");i.width=1,i.height=1,Ur=i.getContext("2d")}return Ur}function pr(i,e,t){var r=1;if((0,f.isString)(i)&&(r=i.split(`
`).length),r>1){var n=gr(e,t);return e*r+n*(r-1)}return e}function gr(i,e){return e?e-i:i*.14}function yn(i,e){var t=dr(),r=0;if((0,f.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,f.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,f.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Rn(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function Cn(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Rn(e));var u=yn(n,s),l;if(!u)l={x:t,y:r,width:0,height:0};else{var c=e.textAlign,d=e.textBaseline,T=pr(n,a,o),O={x:t,y:r-T};c&&(c==="end"||c==="right"?O.x-=u:c==="center"&&(O.x-=u/2)),d&&(d==="top"?O.y+=T:d==="middle"&&(O.y+=T/2)),l={x:O.x,y:O.y,width:u,height:T}}return l}var qn=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,$n=/[^\s\,]+/ig;function aa(i){var e=i||[];if((0,f.isArray)(e))return e;if((0,f.isString)(e))return e=e.match(qn),(0,f.each)(e,function(t,r){if(t=t.match($n),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,f.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var ga=aa;function da(i,e,t,r){var n=[],a=!!r,o,s,u,l,c,d,T;if(a){u=r[0],l=r[1];for(var O=0,F=i.length;O<F;O+=1){var K=i[O];u=Hn.min([0,0],u,K),l=Hn.max([0,0],l,K)}}for(var O=0,rt=i.length;O<rt;O+=1){var K=i[O];if(O===0&&!t)T=K;else if(O===rt-1&&!t)d=K,n.push(T),n.push(d);else{var lt=[O?O-1:rt-1,O-1][t?0:1];o=i[lt],s=i[t?(O+1)%rt:O+1];var ct=[0,0];ct=Hn.sub(ct,s,o),ct=Hn.scale(ct,ct,e);var pt=Hn.distance(K,o),_t=Hn.distance(K,s),jt=pt+_t;jt!==0&&(pt/=jt,_t/=jt);var ae=Hn.scale([0,0],ct,-pt),ne=Hn.scale([0,0],ct,_t);d=Hn.add([0,0],K,ae),c=Hn.add([0,0],K,ne),c=Hn.min([0,0],c,Hn.max([0,0],s,K)),c=Hn.max([0,0],c,Hn.min([0,0],s,K)),ae=Hn.sub([0,0],c,K),ae=Hn.scale([0,0],ae,-pt/_t),d=Hn.add([0,0],K,ae),d=Hn.min([0,0],d,Hn.max([0,0],o,K)),d=Hn.max([0,0],d,Hn.min([0,0],o,K)),ne=Hn.sub([0,0],K,d),ne=Hn.scale([0,0],ne,_t/pt),c=Hn.add([0,0],K,ne),a&&(d=Hn.max([0,0],d,u),d=Hn.min([0,0],d,l),c=Hn.max([0,0],c,u),c=Hn.min([0,0],c,l)),n.push(T),n.push(d),T=c}}return t&&n.push(n.shift()),n}function Ii(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=da(n,.4,r,t),u=n.length,l=[],c,d,T,a=0;a<u-1;a+=1)c=s[a*2],d=s[a*2+1],T=n[a+1],l.push(["C",c[0],c[1],d[0],d[1],T[0],T[1]]);return r&&(c=s[u],d=s[u+1],T=n[0],l.push(["C",c[0],c[1],d[0],d[1],T[0],T[1]])),l}var ya=Ii;function Ji(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var mi=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var l=0;l<=r;l++)s[0][l]={min:l};for(var u=1;u<=t;u++){n=i[u-1];for(var l=1;l<=r;l++){a=e[l-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][l].min+1,d=s[u][l-1].min+1,T=s[u-1][l-1].min+o;s[u][l]=Ji(c,d,T)}}return s};function Ua(i,e){var t=mi(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var l=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<l&&(l=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var _i=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,to=new RegExp("([a-z])["+_i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+_i+"]*,?["+_i+"]*)+)","ig"),Co=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+_i+"]*,?["+_i+"]*","ig");function Po(i){if(!i)return null;if((0,f.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(to,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(Co,function(u,l){l&&o.push(+l)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var bo=/[a-z]/;function Ca(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Bo(i){var e=Po(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(bo.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,l=0,c=0,d,T,O=e[0];(O[0]==="M"||O[0]==="m")&&(o=+O[1],s=+O[2],u=o,l=s,c++,a[0]=["M",o,s]);for(var r=c,F=e.length;r<F;r++){var K=e[r],rt=a[r-1],lt=[],n=K[0],ct=n.toUpperCase();if(n!==ct)switch(lt[0]=ct,ct){case"A":lt[1]=K[1],lt[2]=K[2],lt[3]=K[3],lt[4]=K[4],lt[5]=K[5],lt[6]=+K[6]+o,lt[7]=+K[7]+s;break;case"V":lt[1]=+K[1]+s;break;case"H":lt[1]=+K[1]+o;break;case"M":u=+K[1]+o,l=+K[2]+s,lt[1]=u,lt[2]=l;break;default:for(var pt=1,_t=K.length;pt<_t;pt++)lt[pt]=+K[pt]+(pt%2?o:s)}else lt=e[r];switch(ct){case"Z":o=+u,s=+l;break;case"H":o=lt[1],lt=["L",o,s];break;case"V":s=lt[1],lt=["L",o,s];break;case"T":o=lt[1],s=lt[2];var jt=Ca([rt[1],rt[2]],[rt[3],rt[4]]);lt=["Q",jt[0],jt[1],o,s];break;case"S":o=lt[lt.length-2],s=lt[lt.length-1];var ae=rt.length,ne=Ca([rt[ae-4],rt[ae-3]],[rt[ae-2],rt[ae-1]]);lt=["C",ne[0],ne[1],lt[1],lt[2],o,s];break;case"M":u=lt[lt.length-2],l=lt[lt.length-1];break;default:o=lt[lt.length-2],s=lt[lt.length-1]}a.push(lt)}return a}var Ka=Math.PI*2,ia=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var l=r*s-n*u,c=n*s+r*u;return{x:l+a,y:c+o}},Fa=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},Za=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},xo=function(i,e,t,r,n,a,o,s,u,l,c,d){var T=Math.pow(n,2),O=Math.pow(a,2),F=Math.pow(c,2),K=Math.pow(d,2),rt=T*O-T*K-O*F;rt<0&&(rt=0),rt/=T*K+O*F,rt=Math.sqrt(rt)*(o===s?-1:1);var lt=rt*n/a*d,ct=rt*-a/n*c,pt=l*lt-u*ct+(i+t)/2,_t=u*lt+l*ct+(e+r)/2,jt=(c-lt)/n,ae=(d-ct)/a,ne=(-c-lt)/n,we=(-d-ct)/a,Fe=Za(1,0,jt,ae),Oe=Za(jt,ae,ne,we);return s===0&&Oe>0&&(Oe-=Ka),s===1&&Oe<0&&(Oe+=Ka),[pt,_t,Fe,Oe]},Ks=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,l=i.largeArcFlag,c=l===void 0?0:l,d=i.sweepFlag,T=d===void 0?0:d,O=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var F=Math.sin(u*Ka/360),K=Math.cos(u*Ka/360),rt=K*(e-r)/2+F*(t-n)/2,lt=-F*(e-r)/2+K*(t-n)/2;if(rt===0&&lt===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var ct=Math.pow(rt,2)/Math.pow(a,2)+Math.pow(lt,2)/Math.pow(o,2);ct>1&&(a*=Math.sqrt(ct),o*=Math.sqrt(ct));var pt=xo(e,t,r,n,a,o,c,T,F,K,rt,lt),_t=pt[0],jt=pt[1],ae=pt[2],ne=pt[3],we=Math.abs(ne)/(Ka/4);Math.abs(1-we)<1e-7&&(we=1);var Fe=Math.max(Math.ceil(we),1);ne/=Fe;for(var Oe=0;Oe<Fe;Oe++)O.push(Fa(ae,ne)),ae+=ne;return O.map(function(Ke){var sr=ia(Ke[0],a,o,K,F,_t,jt),Jr=sr.x,Tn=sr.y,vn=ia(Ke[1],a,o,K,F,_t,jt),Yr=vn.x,Gn=vn.y,kn=ia(Ke[2],a,o,K,F,_t,jt),Xr=kn.x,fn=kn.y;return{x1:Jr,y1:Tn,x2:Yr,y2:Gn,x:Xr,y:fn}})};function cc(i,e,t,r,n,a,o,s,u){var l=Ks({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return l.reduce(function(c,d){var T=d.x1,O=d.y1,F=d.x2,K=d.y2,rt=d.x,lt=d.y;return c.push(T,O,F,K,rt,lt),c},[])}function ze(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function kr(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,l=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),Dr(t,n,c),o=t.length,a==="Z"&&l.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,l]:t}function Dr(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var Yn=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},Pa=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var l=u/2,c=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],T=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],O=0,F=0;F<c;F++){var K=l*d[F]+l,rt=Yn(K,i,t,n,o),lt=Yn(K,e,r,a,s),ct=rt*rt+lt*lt;O+=T[F]*Math.sqrt(ct)}return l*O},Ie=function(i,e,t,r,n,a,o,s){for(var u=[],l=[[],[]],c,d,T,O,F=0;F<2;++F){if(F===0?(d=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,T=3*t-3*i):(d=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,T=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(d)<1e-12)continue;O=-T/d,O>0&&O<1&&u.push(O);continue}var K=d*d-4*T*c,rt=Math.sqrt(K);if(!(K<0)){var lt=(-d+rt)/(2*c);lt>0&&lt<1&&u.push(lt);var ct=(-d-rt)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var pt=u.length,_t=pt,jt;pt--;)O=u[pt],jt=1-O,l[0][pt]=jt*jt*jt*i+3*jt*jt*O*t+3*jt*O*O*n+O*O*O*o,l[1][pt]=jt*jt*jt*e+3*jt*jt*O*r+3*jt*O*O*a+O*O*O*s;return l[0][_t]=i,l[1][_t]=e,l[0][_t+1]=o,l[1][_t+1]=s,l[0].length=l[1].length=_t+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}},me=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),l=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var d=u/c,T=l/c,O=+d.toFixed(2),F=+T.toFixed(2);if(!(O<+Math.min(i,t).toFixed(2)||O>+Math.max(i,t).toFixed(2)||O<+Math.min(n,o).toFixed(2)||O>+Math.max(n,o).toFixed(2)||F<+Math.min(e,r).toFixed(2)||F>+Math.max(e,r).toFixed(2)||F<+Math.min(a,s).toFixed(2)||F>+Math.max(a,s).toFixed(2)))return{x:d,y:T}}}},$e=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},yr=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},wr=function(i,e){return i=yr(i),e=yr(e),$e(e,i.x,i.y)||$e(e,i.x2,i.y)||$e(e,i.x,i.y2)||$e(e,i.x2,i.y2)||$e(i,e.x,e.y)||$e(i,e.x2,e.y)||$e(i,e.x,e.y2)||$e(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},er=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=Ie.apply(null,i);return yr(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Je=function(i,e,t,r,n,a,o,s,u){var l=1-u,c=Math.pow(l,3),d=Math.pow(l,2),T=u*u,O=T*u,F=c*i+d*3*u*t+l*3*u*u*n+O*o,K=c*e+d*3*u*r+l*3*u*u*a+O*s,rt=i+2*u*(t-i)+T*(n-2*t+i),lt=e+2*u*(r-e)+T*(a-2*r+e),ct=t+2*u*(n-t)+T*(o-2*n+t),pt=r+2*u*(a-r)+T*(s-2*a+r),_t=l*i+u*t,jt=l*e+u*r,ae=l*n+u*o,ne=l*a+u*s,we=90-Math.atan2(rt-ct,lt-pt)*180/Math.PI;return{x:F,y:K,m:{x:rt,y:lt},n:{x:ct,y:pt},start:{x:_t,y:jt},end:{x:ae,y:ne},alpha:we}},lr=function(i,e,t){var r=er(i),n=er(e);if(!wr(r,n))return t?0:[];for(var a=Pa.apply(0,i),o=Pa.apply(0,e),s=~~(a/8),u=~~(o/8),l=[],c=[],d={},T=t?0:[],O=0;O<s+1;O++){var F=Je.apply(0,i.concat(O/s));l.push({x:F.x,y:F.y,t:O/s})}for(var O=0;O<u+1;O++){var F=Je.apply(0,e.concat(O/u));c.push({x:F.x,y:F.y,t:O/u})}for(var O=0;O<s;O++)for(var K=0;K<u;K++){var rt=l[O],lt=l[O+1],ct=c[K],pt=c[K+1],_t=Math.abs(lt.x-rt.x)<.001?"y":"x",jt=Math.abs(pt.x-ct.x)<.001?"y":"x",ae=me(rt.x,rt.y,lt.x,lt.y,ct.x,ct.y,pt.x,pt.y);if(ae){if(d[ae.x.toFixed(4)]===ae.y.toFixed(4))continue;d[ae.x.toFixed(4)]=ae.y.toFixed(4);var ne=rt.t+Math.abs((ae[_t]-rt[_t])/(lt[_t]-rt[_t]))*(lt.t-rt.t),we=ct.t+Math.abs((ae[jt]-ct[jt])/(pt[jt]-ct[jt]))*(pt.t-ct.t);ne>=0&&ne<=1&&we>=0&&we<=1&&(t?T++:T.push({x:ae.x,y:ae.y,t1:ne,t2:we}))}}return T},De=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,l,c,d,T,O=t?0:[],F=0,K=i.length;F<K;F++){var rt=i[F];if(rt[0]==="M")r=s=rt[1],n=u=rt[2];else{rt[0]==="C"?(d=[r,n].concat(rt.slice(1)),r=d[6],n=d[7]):(d=[r,n,r,n,s,u,s,u],r=s,n=u);for(var lt=0,ct=e.length;lt<ct;lt++){var pt=e[lt];if(pt[0]==="M")a=l=pt[1],o=c=pt[2];else{pt[0]==="C"?(T=[a,o].concat(pt.slice(1)),a=T[6],o=T[7]):(T=[a,o,a,o,l,c,l,c],a=l,o=c);var _t=lr(d,T,t);if(t)O+=_t;else{for(var jt=0,ae=_t.length;jt<ae;jt++)_t[jt].segment1=F,_t[jt].segment2=lt,_t[jt].bez1=d,_t[jt].bez2=T;O=O.concat(_t)}}}}}return O};function Qe(i,e){return De(i,e)}function Ce(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function hr(i,e){return Ce(i)*Ce(e)?(i[0]*e[0]+i[1]*e[1])/(Ce(i)*Ce(e)):1}function _r(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(hr(i,e))}function $r(i,e){return i[0]===e[0]&&i[1]===e[1]}function en(i,e){var t=e[1],r=e[2],n=(0,f.mod)((0,f.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],l=e[6],c=e[7],d=Math.cos(n)*(s-l)/2+Math.sin(n)*(u-c)/2,T=-1*Math.sin(n)*(s-l)/2+Math.cos(n)*(u-c)/2,O=d*d/(t*t)+T*T/(r*r);O>1&&(t*=Math.sqrt(O),r*=Math.sqrt(O));var F=t*t*(T*T)+r*r*(d*d),K=F?Math.sqrt((t*t*(r*r)-F)/F):1;a===o&&(K*=-1),isNaN(K)&&(K=0);var rt=r?K*t*T/r:0,lt=t?K*-r*d/t:0,ct=(s+l)/2+Math.cos(n)*rt-Math.sin(n)*lt,pt=(u+c)/2+Math.sin(n)*rt+Math.cos(n)*lt,_t=[(d-rt)/t,(T-lt)/r],jt=[(-1*d-rt)/t,(-1*T-lt)/r],ae=_r([1,0],_t),ne=_r(_t,jt);return hr(_t,jt)<=-1&&(ne=Math.PI),hr(_t,jt)>=1&&(ne=0),o===0&&ne>0&&(ne=ne-2*Math.PI),o===1&&ne<0&&(ne=ne+2*Math.PI),{cx:ct,cy:pt,rx:$r(i,[l,c])?0:t,ry:$r(i,[l,c])?0:r,startAngle:ae,endAngle:ae+ne,xRotation:n,arcFlag:a,sweepFlag:o}}function Wr(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function En(i){i=ga(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var l=u[0],c={command:l,prePoint:t,params:u,startTangent:null,endTangent:null};switch(l){case"M":n=[u[1],u[2]],a=s;break;case"A":var d=en(t,u);c.arcParams=d;break;default:break}if(l==="Z")t=n,r=i[a+1];else{var T=u.length;t=[u[T-2],u[T-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&$r(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var O=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=O;var F=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[F[0]-t[0],F[1]-t[1]],c.endTangent=[t[0]-F[0],t[1]-F[1]];else if(l==="Q"){var K=[u[1],u[2]];c.startTangent=[F[0]-K[0],F[1]-K[1]],c.endTangent=[t[0]-K[0],t[1]-K[1]]}else if(l==="T"){var rt=e[s-1],K=Wr(rt.currentPoint,F);rt.command==="Q"?(c.command="Q",c.startTangent=[F[0]-K[0],F[1]-K[1]],c.endTangent=[t[0]-K[0],t[1]-K[1]]):(c.command="TL",c.startTangent=[F[0]-t[0],F[1]-t[1]],c.endTangent=[t[0]-F[0],t[1]-F[1]])}else if(l==="C"){var lt=[u[1],u[2]],ct=[u[3],u[4]];c.startTangent=[F[0]-lt[0],F[1]-lt[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[lt[0]-ct[0],lt[1]-ct[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[ct[0]-lt[0],ct[1]-lt[1]])}else if(l==="S"){var rt=e[s-1],lt=Wr(rt.currentPoint,F),ct=[u[1],u[2]];rt.command==="C"?(c.command="C",c.startTangent=[F[0]-lt[0],F[1]-lt[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]]):(c.command="SQ",c.startTangent=[F[0]-ct[0],F[1]-ct[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]])}else if(l==="A"){var pt=.001,_t=c.arcParams||{},jt=_t.cx,ae=jt===void 0?0:jt,ne=_t.cy,we=ne===void 0?0:ne,Fe=_t.rx,Oe=Fe===void 0?0:Fe,Ke=_t.ry,sr=Ke===void 0?0:Ke,Jr=_t.sweepFlag,Tn=Jr===void 0?0:Jr,vn=_t.startAngle,Yr=vn===void 0?0:vn,Gn=_t.endAngle,kn=Gn===void 0?0:Gn;Tn===0&&(pt*=-1);var Xr=Oe*Math.cos(Yr-pt)+ae,fn=sr*Math.sin(Yr-pt)+we;c.startTangent=[Xr-n[0],fn-n[1]];var An=Oe*Math.cos(Yr+kn+pt)+ae,On=sr*Math.sin(Yr+kn-pt)+we;c.endTangent=[F[0]-An,F[1]-On]}e.push(c)}return e}function ea(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function Aa(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function Zn(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function la(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Ma(i,e){if(i.length<2||e.length<2)return!1;var t=Zn(i),r=Zn(e);if(!la(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=ea(i),o=ea(e),s=!1;return each(o,function(u){if(Aa(a,u))return s=!0,!1}),s}function ti(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,l=o.prePoint,c=void 0;switch(o.command){case"Q":c=Zc.box(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=Se.box(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var d=o.arcParams;c=N.box(d.cx,d.cy,d.rx,d.ry,d.xRotation,d.startAngle,d.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(lt){return!Number.isNaN(lt)&&lt!==1/0&&lt!==-1/0}),r=r.filter(function(lt){return!Number.isNaN(lt)&&lt!==1/0&&lt!==-1/0});var T=(0,f.min)(t),O=(0,f.min)(r),F=(0,f.max)(t),K=(0,f.max)(r);if(n.length===0)return{x:T,y:O,width:F-T,height:K-O};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,rt=void 0;s[0]===T?(rt=Zi(o,e),T=T-rt.xExtra):s[0]===F&&(rt=Zi(o,e),F=F+rt.xExtra),s[1]===O?(rt=Zi(o,e),O=O-rt.yExtra):s[1]===K&&(rt=Zi(o,e),K=K+rt.yExtra)}return{x:T,y:O,width:F-T,height:K-O}}function Zi(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,f.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c;var d={xExtra:Math.cos(u/2-l)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return d}function ns(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||En(t),o=ti(a,n),s=o.x,u=o.y,l=o.width,c=o.height,d={minX:s,minY:u,maxX:s+l,maxY:u+c};return d=ve(i,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function bd(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),l=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:l};return c=ve(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function _s(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}ms("rect",Bs),ms("image",Bs),ms("circle",oo),ms("marker",oo),ms("polyline",Ge),ms("polygon",ar),ms("text",Cn),ms("path",ns),ms("line",bd),ms("ellipse",_s);var Ch="0.5.11",Fs=function(i){(0,m.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(au),Kf=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Th=function(e){if((0,f.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,f.isNumber)(e))return[e,e,e,e];if((0,f.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},F0=function(e){var t=new Fs(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},z0=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Xu=function(e){return Number.isNaN(Number(e))},Ov=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),l=u.minX,c=u.minY,d=u.maxX,T=u.maxY;l<t&&(t=l),c<n&&(n=c),d>r&&(r=d),T>a&&(a=T)}var O=Math.floor(t),F=Math.floor(n),K=Math.ceil(r)-Math.floor(t),rt=Math.ceil(a)-Math.floor(n);return{x:O,y:F,width:K,height:rt,minX:t,minY:n,maxX:r,maxY:a}},G0=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},c=[],d={},T=0;T<o;T++){var O=e[T],F=O.source,K=O.target,rt="".concat(F,"-").concat(K);if(!c[T]){l[rt]||(l[rt]=[]),c[T]=!0,l[rt].push(O);for(var lt=0;lt<o;lt++)if(T!==lt){var ct=e[lt],pt=ct.source,_t=ct.target;c[lt]||(F===_t&&K===pt?(l[rt].push(ct),c[lt]=!0,d["".concat(pt,"|").concat(_t,"|").concat(l[rt].length-1)]=!0):F===pt&&K===_t&&(l[rt].push(ct),c[lt]=!0))}}}for(var jt in l)for(var ae=l[jt],ne=ae.length,we=0;we<ne;we++){var Fe=ae[we];if(Fe.source===Fe.target){a&&(Fe.type=a),Fe.loopCfg={position:u[we%8],dist:Math.floor(we/8)*20+50};continue}if(ne===1&&n&&Fe.source!==Fe.target){Fe.type=n;continue}Fe.type=r;var Oe=(we%2===0?1:-1)*(d["".concat(Fe.source,"|").concat(Fe.target,"|").concat(we)]?-1:1);ne%2===1?Fe.curveOffset=Oe*Math.ceil(we/2)*s:Fe.curveOffset=Oe*(Math.floor(we/2)*s+t)}return e},Iv=_(731278),U0=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,l=-1/0,c=-1/0;o.forEach(function(_t){var jt=_t.getModel(),ae=jt.x,ne=jt.y;s>ae&&(s=ae),u>ne&&(u=ne),l<ae&&(l=ae),c<ne&&(c=ne)});var d=n.getMatrix()||[1,0,0,0,1,0,0,0,1],T=Kr({x:s,y:u},d),O=T.x,F=T.y,K=Kr({x:l,y:c},d),rt=K.x,lt=K.y;a={minX:O,maxX:rt,minY:F,maxY:lt,width:rt-O,height:lt-F,x:O,y:F}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var ct=this.getViewCenter(),pt={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(ct.x-pt.x,ct.y-pt.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var l=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],d=n.x+a.x-o.x-n.minX,T=n.y+a.y-o.y-n.minY;if(!(Xu(d)||Xu(T))){var O=(0,Iv.vs)(c,[["t",d,T]]);if(!u){var F=os({animateCfg:r,callback:function(){l.emit("viewportchange",{action:"translate",matrix:O})}});e.animate(function(_t){return{matrix:zi(t,O,_t)}},F);return}var K=l.get("minZoom"),rt=l.get("maxZoom"),lt=s;K&&s<K?(lt=K,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):rt&&s>rt&&(lt=rt,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var ct=(0,Iv.vs)(O,[["t",-a.x,-a.y],["s",lt,lt],["t",a.x,a.y]]),pt=os({animateCfg:r,callback:function(){e.setMatrix(ct),l.emit("viewportchange",{action:"translate",matrix:O}),l.emit("viewportchange",{action:"zoom",matrix:ct})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(_t){return{matrix:zi(t,ct,_t)}},pt)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var l,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var d=1/0,T=1/0,O=-1/0,F=-1/0;c.forEach(function(ae){var ne=ae.getModel(),we=ne.x,Fe=ne.y;d>we&&(d=we),T>Fe&&(T=Fe),O<we&&(O=we),F<Fe&&(F=Fe)}),l={minX:d,maxX:O,minY:T,maxY:F,width:O-d,height:F-T,x:d,y:T}}else l=s.getCanvasBBox();if(!(l.width===0||l.height===0)){var K=this.getViewCenter(),rt={x:l.x+l.width/2,y:l.y+l.height/2},lt=(a-n[1]-n[3])/l.width,ct=(o-n[0]-n[2])/l.height,pt=lt;if(lt>ct&&(pt=ct),e)this.animatedFitView(s,u,t,l,K,rt,pt,!0);else{var _t=K.x-rt.x,jt=K.y-rt.y;if(Xu(_t)||Xu(jt))return;r.translate(_t,jt),r.zoom(pt,K)||console.warn("zoom failed, ratio out of range, ratio: %f",pt)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,l=u===void 0?"min":u,c=this.graph,d=this.getFormatPadding(),T=c.get("width"),O=c.get("height"),F=c.get("group"),K=F.getMatrix()||[1,0,0,0,1,0,0,0,1];F.resetMatrix();var rt,lt=c.getNodes();if(lt.length>c.get("optimizeThreshold")){var ct=1/0,pt=1/0,_t=-1/0,jt=-1/0;lt.forEach(function(Tn){var vn=Tn.getModel(),Yr=vn.x,Gn=vn.y;ct>Yr&&(ct=Yr),pt>Gn&&(pt=Gn),_t<Yr&&(_t=Yr),jt<Gn&&(jt=Gn)}),rt={minX:ct,maxX:_t,minY:pt,maxY:jt,width:_t-ct,height:jt-pt,x:ct,y:pt}}else rt=F.getCanvasBBox();if(!(rt.width===0||rt.height===0)){var ae=this.getViewCenter(),ne={x:rt.x+rt.width/2,y:rt.y+rt.height/2},we=(T-d[1]-d[3])/rt.width,Fe=(O-d[0]-d[2])/rt.height,Oe;if(s==="x"?Oe=we:s==="y"?Oe=Fe:Oe=l==="max"?Math.max(we,Fe):Math.min(we,Fe),a&&(Oe=Oe<1?Oe:1),t)this.animatedFitView(F,K,r,rt,ae,ne,Oe,!0);else{var Ke=c.getZoom(),sr=Ke*Oe,Jr=c.get("minZoom");sr<Jr&&(sr=Jr,console.warn("fitview failed, ratio out of range, ratio: %f",Oe,"graph minzoom has been used instead")),c.translate(ae.x-ne.x,ae.y-ne.y),c.zoomTo(sr,ae)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Th(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],l=(o.y-e.y)*s[4],c=0,d=0,T=0,O=0;this.graph.get("canvas").animate(function(F){T=u*F,O=l*F,n.graph.translate(T-c,O-d),c=T,d=O},(0,m.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=un({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Kr({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,f.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),l=u.getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),n=l[6],a=l[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),l=a.get("group"),c=l.getMatrix()||[1,0,0,0,1,0,0,0,1];l.resetMatrix();for(var d={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},T=0,O=e;T<O.length;T++){var F=O[T],K=F.getBBox();K.minX<d.minX&&(d.minX=K.minX),K.minY<d.minY&&(d.minY=K.minY),K.maxX>d.maxX&&(d.maxX=K.maxX),K.maxY>d.maxY&&(d.maxY=K.maxY)}if(d.x=d.minX,d.y=d.minY,d.width=d.maxX-d.minX,d.height=d.maxY-d.minY,!(d.width===0||d.height===0)){var rt=this.getViewCenter(),lt={x:d.x+d.width/2,y:d.y+d.height/2},ct=(s-o[1]-o[3])/d.width,pt=(u-o[0]-o[2])/d.height,_t=ct;ct>pt&&(_t=pt),r?this.animatedFitView(l,c,n,d,rt,lt,_t,t):(a.translate(rt.x-lt.x,rt.y-lt.y),t&&!a.zoom(_t,rt)&&console.warn("zoom failed, ratio out of range, ratio: %f",_t))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,f.isNumber)(e)||!(0,f.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),W0=U0;function Ah(i){return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(i)}function Dv(i){if(typeof i!="string")return i;var e=function(ne){if(typeof ne!="string")return ne;try{return JSON.parse(ne.trim())}catch(we){return ne.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(ne){return ne[ne.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var ne=[],we=0;we<arguments.length;we++)ne[we]=arguments[we];return ne.some(function(Fe){return r(o)===Fe})},u=function(){return r(a)},l=null,c=0,d="";c<n.length;){var T=n[c],O=s('"',"'");if(!O&&!T.trim()){c+=1;continue}var F=n[c-1]==="\\",K=s("}"),rt=s("]"),lt=s(","),ct=u();if(O)if(r(o)===T&&!F){o.pop();var pt=e(d);ct.push(pt),l=pt,d=""}else d+=T;else if(rt&&T===",")d&&(ct.push(e(d)),d="");else if(K&&T===":")o.push(","),d&&(ct.push(d),d="");else if(lt&&T===",")d&&(ct.push(e(d)),d=""),o.pop();else if(T==="}"&&(K||lt)){d&&(ct.push(e(d)),d=""),lt&&o.pop();for(var _t={},jt=1;jt<ct.length;jt+=2)_t[ct[jt-1]]=ct[jt];a.pop(),a.length&&r(a).push(_t),o.pop(),l=_t}else T==="]"&&rt?(d&&(ct.push(e(d)),d=""),a.pop(),a.length&&r(a).push(ct),o.pop(),l=ct):T==="{"?(a.push([]),o.push("}")):T==="["?(a.push([]),o.push("]")):T==='"'?o.push('"'):T==="'"?o.push("'"):d+=T;c+=1}return l||d}var Y0=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},X0=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,f.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,l){return n[l-1]&&n[l-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Pv(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Pv(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=Y0(s),l=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=Dv(l);t=(0,m.__assign)((0,m.__assign)({},t),c)}else a[u]=Dv(l)}catch(d){if(u==="style")throw d;a[u]=l}}),a.attrs=t,e&&e.style&&a.name&&Ah(e.style[a.name])==="object"&&(a.attrs=(0,m.__assign)((0,m.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,m.__assign)((0,m.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function j0(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=hs(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,m.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function Lv(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,m.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,m.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var l=Lv(i.children[u],s);if(l.bbox){var c=l.bbox;l.attrs.next==="inline"?s.x+=l.bbox.width:s.y+=l.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=j0(i,e,r),i.attrs=(0,m.__assign)((0,m.__assign)({},i.attrs),i.bbox),i}function Nv(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var l=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],d=i.children||[],T=0;T<l;T+=1)u.push(Nv(d[T],c[T]));var O=Object.keys(e.attrs),F=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:O.filter(function(K){return K!=="children"}).some(function(K){return i.attrs[K]!==e.attrs[K]||!F.includes(K)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Rv(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=X0(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],l=Lv(Pv(u,n));return s.remove(),l};return{draw:function(n,a){var o=t(n),s=a,u=function l(c){var d=c.attrs,T=d===void 0?{}:d,O=c.bbox,F=c.type,K=c.children,rt=(0,m.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var lt=a.addShape(c.type,(0,m.__assign)({attrs:T,origin:{bbox:O,type:F,children:K}},rt));c.keyshape&&(s=lt)}c.children&&c.children.forEach(function(ct){return l(ct)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),l=e[n.id].pop(),c=Nv(u,l),d=function F(K){var rt;K.type!=="group"&&o.addShape(K.type,{attrs:K.attrs}),!((rt=K.children)===null||rt===void 0)&&rt.length&&K.children.map(function(lt){return F(lt)})},T=function F(K){var rt,lt=s.find(function(ct){return ct.attrs.key===K.attrs.key});lt&&o.removeChild(lt),!((rt=K.children)===null||rt===void 0)&&rt.length&&K.children.map(function(ct){return F(ct)})},O=function F(K){var rt=K.key;if(K.type!=="group"){var lt=s.find(function(pt){return pt.attrs.key===rt});switch(K.action){case"change":if(lt){var ct=K.val.keyshape?a.getOriginStyle():{};lt.attr((0,m.__assign)((0,m.__assign)({},ct),K.val.attrs))}break;case"add":d(K.val);break;case"delete":T(K.val);break;case"restructure":T(K.formerTarget),d(K.nowTarget);break;default:break}}K.children&&K.children.forEach(function(pt){return F(pt)})};O(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Oh={};function kv(i){return Oh[i]||(Oh[i]=(0,f.upperFirst)(i)),Oh[i]}var V0={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Ih={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Wd=function(){function i(){}return i.registerFactory=function(e,t){var r=kv(e),n=V0,a=(0,m.__assign)((0,m.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=kv(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Rv(t);a=(0,m.__assign)((0,m.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Rv(s);a=(0,m.__assign)((0,m.__assign)((0,m.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Ih;a=(0,m.__assign)((0,m.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Ih,o=(0,m.__assign)((0,m.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Ih,o=(0,m.__assign)((0,m.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),Jo=Wd;Wd.registerFactory("node",{defaultShapeType:"circle"}),Wd.registerFactory("edge",{defaultShapeType:"line"}),Wd.registerFactory("combo",{defaultShapeType:"circle"});var Dh="bboxCache",Ph="bboxCanvasCache",PS=null,H0=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Kf(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var l=u[s].options;if(l&&l.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,f.deepMix)({},l.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Ia(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Ia(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var O=this.get("originStyle");a&&!O[a]&&(O[a]={});for(var F=this.getCurrentStatesStyle(),K=function(lt){var ct=t[lt],pt=ct.get("name"),_t=ct.attr();if(pt&&pt!==a){var jt=F[pt];O[pt]||(O[pt]={}),jt?Object.keys(_t).forEach(function(we){var Fe=_t[we];Fe!==jt[we]&&(O[pt][we]=Fe)}):O[pt]=ct.get("type")!=="image"?(0,f.clone)(_t):n.getShapeStyleByName(pt)}else{var ae=ct.attr(),ne={};Object.keys(F).forEach(function(we){var Fe=F[we];(we===a||!(0,f.isPlainObject)(Fe))&&(ne[we]=Fe)}),Object.keys(ae).forEach(function(we){var Fe=ae[we];ne[we]!==Fe&&(a?O[a][we]=Fe:O[we]=Fe)})}},s=0;s<t.length;s++)K(s);delete O.path,delete O.matrix,delete O.x,delete O.y,O[a]&&(delete O[a].x,delete O[a].y,delete O[a].matrix,delete O[a].path),n.set("originStyle",O)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],l=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=l!=="image"?(0,f.clone)(u.attr()):n.getShapeStyleByName(c),l==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var d=n.getShapeStyleByName();if(delete d.path,delete d.matrix,!a)Object.assign(o,d);else if(c)o[a]=d;else{var T=Kf("shape");u.set("name",T),e.shapeMap[T]=u,o[T]=l!=="image"?(0,f.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,f.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=Jo.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,f.isPlainObject)(e)?this._cfg=(0,m.__assign)((0,m.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Dh,null),this.set(Ph,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]:r=this.getKeyShape(),r){var n={};return(0,f.each)(r.attr(),function(a,o){(o!=="img"||(0,f.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,m.__assign)((0,m.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,f.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,f.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,f.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,f.isString)(t)){var l=r.filter(function(T){return T.includes(o)});l.length>0&&this.clearStates(l),s=s.filter(function(T){return!T.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),d=c.type;n.setState(d,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,f.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,f.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),Ya(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Dh);return e||(e=this.calculateBBox(),this.set(Dh,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(Ph);return e||(e=this.calculateCanvasBBox(),this.set(Ph,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),Bv=H0,Yd={source:"start",target:"end"},ju="Node",$f="Point",Z0="Anchor",K0=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=Yd[t]+$f,a=t+ju,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,f.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=Yd[t]+$f,o=t+ju,s=this.get(a);if(!s){var u=this.get(o),l=t+Z0,c=this.getPrePoint(t,n),d=r[l];(0,f.isNil)(d)||(s=u.getLinkPointByAnchor(d)),s=s||u.getLinkPoint(c),(0,f.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+ju,n=Yd[t]+$f,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+ju,n=Yd[t]+$f,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(ju)),n=this.get("target".concat(ju));return r?delete t["source".concat(ju)]:t.source=this.get("start".concat($f)),n?delete t["target".concat(ju)]:t.target=this.get("end".concat($f)),!(0,f.isString)(t.source)&&!(0,f.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,f.isString)(t.target)&&!(0,f.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var l=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,f.mix)(l,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(ju)),r=this.get("target".concat(ju));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(Bv),Fv=K0,Lh="anchorPointsCache",$0="bboxCache",Q0=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=Kn(t[0],r),s=0;s<t.length;s++){var u=t[s],l=Kn(u,r);l<o&&(a=u,o=l,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(l){return l.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(l){return l.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(l){return l.getSource()===r?l.getTarget():l.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var l=this.getAnchorPoints(),c;switch(n){case"circle":c=Ir({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=xr({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Or(u,t)}var d=c;return l.length&&(d||(d=t),d=this.getNearestPoint(l,d)),d||(d={x:o,y:s}),d},e.prototype.getAnchorPoints=function(){var t=this.get(Lh);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,f.each)(u,function(l,c){var d={x:n.minX+l[0]*n.width,y:n.minY+l[1]*n.height,anchorIndex:c};t.push(d)}),this.set(Lh,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set($0,null),this.set(Lh,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,f.isNil)(t.x),l=!(0,f.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||l)||c.length===2&&u&&l)return"move";if((0,f.isNumber)(t.x)||(0,f.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var d=c.includes("label")||c.includes("labelCfg");return d?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(l){r.includes(l)&&(a[l]=n[l])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(l){return l.refresh()});break}}},e}(Bv),Nh=Q0,zv="bboxCache",Gv="bboxCanvasCache",Uv="sizeCache",Wv="anchorPointsCache",q0=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,f.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,f.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||Wt.defaultCombo.size,l={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,m.__assign)((0,m.__assign)((0,m.__assign)({},r),t.style),l);var c=t.padding||Wt.defaultCombo.padding;return(0,f.isNumber)(c)?(l.r+=c,l.width+=c*2,l.height+=c*2):(l.r=l.r+Math.max.apply(Math,c),l.width+=c[1]+c[3]||c[1]*2,l.height+=c[0]+c[2]||c[0]*2),this.set(Uv,l),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=Ia(t,r);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var a=this.get(zv)||{},o=a.x,s=a.x;return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n.x=n.minX,n.y=n.minY,(n.x!==o||n.y!==s)&&this.set(Wv,null),n}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Gv,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(zv,null),this.set(Gv,null),this.set(Wv,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Uv,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(Nh),Yv=q0,Xd="node",jd="edge",Xv="vedge",xd="combo",J0="default",jv="Mapper",Sl="stateStyles",tm=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,f.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var l=u.getSource(),c=u.getTarget();!l||l.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===Xv?jd:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,f.upperFirst)(n),s=null,u=r.get(n+(0,f.upperFirst)(Sl))||{},l=r.get(J0+o);t[Sl]&&(u=t[Sl]),l&&(0,f.each)(l,function(ae,ne){(0,f.isObject)(ae)&&!(0,f.isArray)(ae)?t[ne]=(0,f.deepMix)({},ae,t[ne]):(0,f.isArray)(ae)?t[ne]=t[ne]||(0,f.clone)(l[ne]):t[ne]=t[ne]||l[ne]});var c=r.get(n+jv);if(c){var d=c(t);d[Sl]&&(u=d[Sl],delete d[Sl]),(0,f.each)(d,function(ae,ne){(0,f.isObject)(ae)&&!(0,f.isArray)(ae)?t[ne]=(0,f.deepMix)({},t[ne],ae):t[ne]=d[ne]||t[ne]})}if(r.emit("beforeadditem",{type:e,model:t}),e===jd||e===Xv){var T=void 0,O=void 0;if(T=t.source,O=t.target,T&&(0,f.isString)(T)&&(T=r.findById(T)),O&&(0,f.isString)(O)&&(O=r.findById(O)),!T||!O){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}T.getType&&T.getType()==="combo"&&(t.isComboEdge=!0),O.getType&&O.getType()==="combo"&&(t.isComboEdge=!0),s=new Fv({model:t,source:T,target:O,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===Xd)s=new Nh({model:t,styles:u,group:a.addGroup()});else if(e===xd){var F=t.children,K=ws(F,r),rt=void 0,lt=void 0;if(isNaN(K.x)?isNaN(t.x)&&(rt=Math.random()*100):rt=K.x,isNaN(K.y)?isNaN(t.y)&&(lt=Math.random()*100):lt=K.y,isNaN(t.x)||isNaN(t.y))t.x=rt,t.y=lt;else{var ct=t.x-rt,pt=t.y-lt;this.updateComboSucceeds(t.id,ct,pt,F)}var _t=a.addGroup();_t.setZIndex(t.depth),s=new Yv({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?ws([],r):K,group:_t}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(K.width=Math.hypot(K.height,K.width),K.height=K.width,s.set("bbox",K),s.refresh());var jt=s.getModel();(F||[]).forEach(function(ae){var ne=r.findById(ae.id);s.addChild(ne),ae.depth=jt.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,f.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+jv),l=e.getModel(),c=l.x,d=l.y,T=e.getUpdateType(t);if(u){var O=(0,f.deepMix)({},l,t),F=u(O),K=(0,f.deepMix)({},l,F,t);F[Sl]&&(e.set("styles",K[Sl]),delete K[Sl]),(0,f.each)(K,function(Oe,Ke){t[Ke]=Oe})}else(0,f.each)(t,function(Oe,Ke){l[Ke]&&(0,f.isObject)(Oe)&&!(0,f.isArray)(Oe)&&(t[Ke]=(0,m.__assign)((0,m.__assign)({},l[Ke]),t[Ke]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===jd){if(t.source){var rt=t.source;(0,f.isString)(rt)&&(rt=o.findById(rt)),e.setSource(rt)}if(t.target){var lt=t.target;(0,f.isString)(lt)&&(lt=o.findById(lt)),e.setTarget(lt)}e.update(t)}else if(s===Xd){e.update(t,T);var ct=e.getEdges();T==="move"?(0,f.each)(ct,function(Oe){r.edgeToBeUpdateMap[Oe.getID()]={edge:Oe,updateType:T},r.throttleRefresh()}):T!=null&&T.includes("bbox")&&(0,f.each)(ct,function(Oe){Oe.refresh(T)})}else if(s===xd){if(e.update(t,T),!isNaN(t.x)||!isNaN(t.y)){var pt=t.x-c||0,_t=t.y-d||0;this.updateComboSucceeds(l.id,pt,_t)}var jt=e.getEdges(),ae=(T==null?void 0:T.includes("bbox"))||T==="move";if(ae&&s===xd){var ne=e.get("shapeFactory"),we=l.type||"circle",Fe=l.animate===void 0||t.animate===void 0?(a=(n=ne[we])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:l.animate||t.animate;Fe?setTimeout(function(){if(!(!e||e.destroyed)){var Oe=e.getKeyShape();!Oe||Oe.destroyed||(0,f.each)(jt,function(Ke){Ke&&!Ke.destroyed&&Ke.refresh()})}},201):(0,f.each)(jt,function(Oe){Oe.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,f.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),l=ws(t,s,e),c=l.x,d=l.y;e.set("bbox",l);var T=c,O=d;r?(T=isNaN(u.x)?c:u.x,O=isNaN(u.y)?d:u.y):(T=isNaN(c)?u.x:c,O=isNaN(d)?u.y:d),e.update({x:T,y:O});var F=e.get("shapeFactory"),K=u.type||"circle",rt=u.animate===void 0?(o=(a=F[K])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;rt?setTimeout(function(){if(!(!e||e.destroyed)){var lt=e.getKeyShape();!lt||lt.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,f.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(l){Oi(l,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(l){var c=o.findById(l.id);if(c){var d=c.getModel();a.updateItem(l.id,{x:(d.x||0)+t,y:(d.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,f.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,f.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,f.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===jd){var u=r.get("v".concat(a,"s")),l=u.indexOf(e);l>-1&&u.splice(l,1)}var c=e.get("id"),d=r.get("itemMap");delete d[c];var T=r.get("comboTrees"),O=e.get("id");if(a===Xd){var F=e.getModel().comboId;if(T&&F){var K=T,rt=!1;T.forEach(function(ae){rt||Oi(ae,function(ne){if(ne.id===O&&K){var we=K.indexOf(ne);return K.splice(we,1),rt=!0,!1}return K=ne.children,!0})})}for(var lt=e.getEdges(),ct=lt.length-1;ct>=0;ct--)r.removeItem(lt[ct],!1);F&&r.updateCombo(F)}else if(a===xd){var pt=e.getModel().parentId,_t,jt=!1;(T||[]).forEach(function(ne){jt||Oi(ne,function(we){return we.id===O?(_t=we,jt=!0,!1):!0})}),_t.removed=!0,_t&&_t.children&&_t.children.forEach(function(ne){t.removeItem(ne.id)});for(var lt=e.getEdges(),ct=lt.length;ct>=0;ct--)r.removeItem(lt[ct],!1);pt&&r.updateCombo(pt)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,f.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,f.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,f.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,f.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,f.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){ao(o,function(s){var u;return t.forEach(function(l){l.id===s.id&&(l.children=s.children,l.depth=s.depth,u=l)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,f.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Xd){var a=e.getEdges();(0,f.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===xd){var o=n.get("comboTrees"),s=e.get("id"),u=[],l=!1;(o||[]).forEach(function(d){l||!d.children||d.children.length===0||Oi(d,function(T){return T.id===s?(u=T.children,l=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(d){var T=n.findById(d.id);r.changeItemVisibility(T,t)});var a=e.getEdges();(0,f.each)(a,function(d){t&&!(d.get("source").isVisible()&&d.get("target").isVisible())||r.changeItemVisibility(d,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),em=tm,rm=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,f.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,f.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,f.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),nm=rm,am=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},Vv=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=ya(t);return u.unshift(["M",e[0].x,e[0].y]),u},Vd=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];Hn.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},im=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=am(a,s)}return t&&(n+="Z"),n},Rh=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},kh=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,l=e[s-1].y,c=e[s].x,d=e[s].y,T=e[s+1].x,O=e[s+1].y,F=s!==e.length-2?e[s+2].x:T,K=s!==e.length-2?e[s+2].y:O,rt=c+(T-u)/6,lt=d+(O-l)/6,ct=T-(F-c)/6,pt=O-(K-d)/6;o.push(["C",rt,lt,ct,pt,T,O])}return o.unshift(["M",n.x,n.y]),o},Hv=function(e,t){return Hn.scale([0,0],Hn.normalize([0,0],e),t)},Zv=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},Kv=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Bh(i,e){var t=function(d){var T=[d[0][0],d[0][1]-e],O=[d[0][0],d[0][1]+e];return"M ".concat(T," A ").concat(e,",").concat(e,",0,0,0,").concat(O," A ").concat(e,",").concat(e,",0,0,0,").concat(T)},r=function(d){var T=Hn.scale([0,0],Zv(d[0],d[1]),e),O=Hn.scale([0,0],T,-1),F=Hn.add([0,0],d[0],T),K=Hn.add([0,0],d[1],T),rt=Hn.add([0,0],d[1],O),lt=Hn.add([0,0],d[0],O);return"M ".concat(F," L ").concat(K," A ").concat([e,e,"0,0,0",rt].join(",")," L ").concat(lt," A ").concat([e,e,"0,0,0",F].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=Hn.scale([0,0],Zv(o,s),e);n[a]=[Hn.add([0,0],o,u),Hn.add([0,0],s,u)]}var l="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,d){var T="";return d===0&&(T="M ".concat(n[n.length-1][1]," ")),T+="".concat(l+c[0]," L ").concat(c[1]),T}),n.join(" ")}function $v(i,e){var t=i.length,r=function(c){var d=[c[0][0],c[0][1]-e],T=[c[0][0],c[0][1]+e];return"M ".concat(d," A ").concat([e,e,"0,0,0",T].join(",")," A ").concat([e,e,"0,0,0",d].join(","))},n=function(c){var d=Kv(c[0],c[1]),T=Hv(d,e),O=Hn.add([0,0],c[0],Hn.scale([0,0],T,-1)),F=Hn.add([0,0],c[1],T),K=1.2*e,rt=Hv(Hn.normalize([0,0],d),K),lt=Hn.scale([0,0],rt,-1),ct=Hn.add([0,0],O,lt),pt=Hn.add([0,0],F,lt),_t=Hn.add([0,0],O,rt);return"M ".concat(O," C ").concat([ct,pt,F].join(",")," S ").concat([_t,O].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(l,c){var d=i[(c+1)%t];return{p:l,v:Hn.normalize([0,0],Kv(l,d))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=Hn.normalize([0,0],Hn.add([0,0],a[s].v,Hn.scale([0,0],a[o].v,-1)));a[o].p=Hn.add([0,0],a[o].p,Hn.scale([0,0],u,e))}return a.map(function(l){var c=l.p;return{x:c[0],y:c[1]}})}var om=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},Qv=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},qv=function(e){var t=e.map(function(d){return{x:d.getModel().x,y:d.getModel().y}});t.sort(function(d,T){return d.x===T.x?d.y-T.y:d.x-T.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&Qv(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var l=[],n=t.length-1;n>=0;n--){for(;l.length>=2&&Qv(l[l.length-2],l[l.length-1],t[n])<=0;)l.pop();l.push(t[n])}l.pop(),u.pop();var c=u.concat(l);return c},sm={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function um(i,e,t){var r=!1,n=function(u,l){return e.cells[u+l*e.width]},a=function(u,l){var c=0;return n(u-1,l-1)>=t&&(c+=1),n(u,l-1)>t&&(c+=2),n(u-1,l)>t&&(c+=4),n(u,l)>t&&(c+=8),c},o=function(u,l){for(var c=u,d=l,T,O,F=0;F<e.width*e.height;F++){if(T=c,O=d,i.findIndex(function(rt){return rt.x===c&&rt.y===d})>-1){if(!(i[0].x!==c||i[0].y!==d))return!0}else i.push({x:c,y:d});var K=a(c,d);switch(K){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:T===0&&(O===-1?c-=1:c+=1);break;case 1:case 13:case 5:d--;break;case 9:T===1&&(O===0?d-=1:d+=1);break;case 10:case 8:case 11:d++;break;default:return console.warn("Marching squares invalid state: ".concat(K)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var lm=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},cm=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},l=Yi(s,u),c=new va(s.x,s.y,u.x,u.y),d=r.reduce(function(T,O){return Fi(O,c)>0?T+1:T},0);l*Math.pow(d+1,2)<a&&(n=o,a=l*Math.pow(d+1,2))}),n},Jv=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=Fi(a,t);o>=0&&o<r&&(n=a,r=o)}),n},fm=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,l=function(O,F){var K=!1;return F.forEach(function(rt){K||(Io(O,{x:rt.x1,y:rt.y1})||Io(O,{x:rt.x2,y:rt.y2}))&&(K=!0)}),K},c=function(O,F){for(var K=0,rt=F;K<rt.length;K++){var lt=rt[K],ct=lt.getBBox(),pt=[[ct.x,ct.y],[ct.x+ct.width,ct.y],[ct.x,ct.y+ct.height],[ct.x+ct.width,ct.y+ct.height]];if(si(pt,O.x,O.y))return!0}return!1};s&&u<r;){s=!1;for(var d=function(){var O=o.pop(),F=Jv(t,O);if(F){var K=fi(F,O),rt=K[0],lt=K[1];if(lt===2){var ct=function(_t){for(var jt=n,ae=tp(F,jt,rt,_t),ne=l(ae,o)||l(ae,a),we=c(ae,t);!ne&&we&&jt>=1;)jt/=1.5,ae=tp(F,jt,rt,_t),ne=l(ae,o)||l(ae,a),we=c(ae,t);ae&&!ne&&(!_t||!we)&&(o.push(new va(O.x1,O.y1,ae.x,ae.y)),o.push(new va(ae.x,ae.y,O.x2,O.y2)),s=!0)};ct(!0),s||ct(!1)}}s||a.push(O),u+=1};!s&&o.length;)d()}for(;o.length;)a.push(o.pop());return a};function dm(i,e,t,r,n){var a=cm(i,t,e);if(a===null)return[];var o=function(d){for(var T=[];d.length>0;){var O=d.pop();if(d.length===0){T.push(O);break}var F=d.pop(),K=new va(O.x1,O.y1,F.x2,F.y2),rt=Jv(e,K);rt?(T.push(O),d.push(F)):d.push(K)}return T},s=new va(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=fm(s,e,r,n),l=o(u);return l}var hm=function(e,t,r){var n=Object.assign(sm,r),a=Ai(e.map(function(ct){return{x:ct.getModel().x,y:ct.getModel().y}}));e=e.sort(function(ct,pt){return Yi({x:ct.getModel().x,y:ct.getModel().y},a)-Yi({x:pt.getModel().x,y:pt.getModel().y},a)});var o=[],s=[];e.forEach(function(ct){var pt=dm(ct,t,o,n.maxRoutingIterations,n.morphBuffer);pt.forEach(function(_t){s.push(_t)}),o.push(ct)});for(var u=vm(e,s,n.nodeR0),l=lm(u.width,u.height,n.pixelGroupSize),c=[],d=[],T=0;T<n.maxMarchingIterations;T++)if(pm(e,t,s,u,l,n),c=[],d=[],!!new um(c,l,n.threshold).march()){var O=c.map(function(ct){return{x:Math.round(ct.x*n.pixelGroupSize+u.minX),y:Math.round(ct.y*n.pixelGroupSize+u.minY)}});if(O){var F=O.length;if(n.skip>1)for(F=Math.floor(O.length/n.skip);F<3&&n.skip>1;)n.skip-=1,F=Math.floor(O.length/n.skip);for(var K=0,rt=0;rt<F;rt+=1,K+=n.skip)d.push({x:O[K].x,y:O[K].y})}var lt=function(){for(var pt=0,_t=e;pt<_t.length;pt++){var jt=_t[pt],ae=d.map(function(ne){return[ne.x,ne.y]});if(!si(ae,jt.getBBox().centerX,jt.getBBox().centerY))return!1}return!0};if(d&&lt())return d;if(n.threshold*=.9,T<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return d};function vm(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function pm(i,e,t,r,n,a){function o(O,F){var K=Math.floor((O-F)/a.pixelGroupSize);return K<0?0:K}function s(O,F){return O*a.pixelGroupSize+F}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),l=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(F,K){var rt=Math.min(o(F.minX,K+r.minX),n.width),lt=Math.min(o(F.minY,K+r.minY),n.height),ct=Math.min(o(F.maxX,-K+r.minX),n.width),pt=Math.min(o(F.maxY,-K+r.minY),n.height);return[rt,lt,ct,pt]},d=function(F,K){for(var rt=F.getBBox(),lt=c(rt,a.nodeR1),ct=lt[0],pt=lt[1],_t=lt[2],jt=lt[3],ae=pt;ae<jt;ae+=1)for(var ne=ct;ne<_t;ne+=1)if(!(K<0&&n[ne+ae*n.width]<=0)){var we=s(ne,r.minX),Fe=s(ae,r.minY),Oe=Li({x:we,y:Fe},{x:rt.minX,y:rt.minY,width:rt.width,height:rt.height});if(Oe<Math.pow(a.nodeR1,2)){var Ke=Math.sqrt(Oe)-a.nodeR1;n.cells[ne+ae*n.width]+=K*Ke*Ke}}},T=function(F,K){for(var rt=F.getBBox(),lt=c(rt,a.edgeR1),ct=lt[0],pt=lt[1],_t=lt[2],jt=lt[3],ae=pt;ae<jt;ae+=1)for(var ne=ct;ne<_t;ne+=1)if(!(K<0&&n.cells[ne+ae*n.width]<=0)){var we=s(ne,r.minX),Fe=s(ae,r.minY),Oe=Oo({x:we,y:Fe},F);if(Oe<Math.pow(a.edgeR1,2)){var Ke=Math.sqrt(Oe)-a.edgeR1;n.cells[ne+ae*n.width]+=K*Ke*Ke}}};a.nodeInfluenceFactor&&i.forEach(function(O){d(O,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(O){T(O,a.edgeInfluenceFactor/l)}),a.negativeNodeInfluenceFactor&&e.forEach(function(O){d(O,a.negativeNodeInfluenceFactor/u)})}function tp(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],l={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function d(F,K){return n.width*((F.y-n.minY+(K.y-n.minY))*.5)}if(o){if(a)return r?l.topLeft:l.bottomRight;if(s)return r?l.bottomLeft:l.topRight;var T=d(o,u);return T<c*.5?o.y>u.y?r?l.topLeft:l.bottomRight:r?l.topRight:l.bottomLeft:o.y<u.y?r?l.bottomLeft:l.topRight:r?l.bottomRight:l.topLeft}if(u){if(a)return r?l.topRight:l.bottomLeft;if(s)return r?l.bottomRight:l.topLeft}var O=d(a,s);return O<c*.5?a.x>s.x?r?l.topLeft:l.bottomRight:r?l.bottomLeft:l.topRight:a.x<s.x?r?l.topRight:l.bottomLeft:r?l.bottomRight:l.topLeft}var gm=function(){function i(e,t){this.cfg=(0,f.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,f.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,f.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=qv(e),a=Bh(r.map(function(o){return[o.x,o.y]}),this.padding),n=Po(a);break;case"smooth-convex":r=qv(e),r.length===2?(a=Bh(r.map(function(o){return[o.x,o.y]}),this.padding),n=Po(a)):r.length>2&&(a=$v(r.map(function(o){return[o.x,o.y]}),this.padding),n=kh(a));break;case"bubble":r=hm(e,t,this.cfg.bubbleCfg),n=r.length>=2&&kh(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,m.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,f.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,f.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,f.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,f.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,f.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,f.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,m.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,f.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,f.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,f.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,f.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Rh(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),_a(n,Rh(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),ep=gm,Ed=ft,mm="node",ym=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,f.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(l){Oi(l,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(l){var c=l.getModel(),d=o[c.source]||0,T=o[c.target]||0,O=Math.max(d,T);a[O]?a[O].push(c.id):a[O]=[c.id]}),a.forEach(function(l){if(!(!l||!l.length))for(var c=l.length-1;c>=0;c--){var d=r.findById(l[c]);d&&d.toFront()}})}},500,!1),r.cfg=(0,f.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new ro(r.cfg.maxStep),r.redoStack=new ro(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new W0(this),r=new Eu(this),n=new em(this),a=new nm(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:Wt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:Wt.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:Wt.nodeContainerClassName}),l=o.addGroup({id:"".concat(a,"-combo"),className:Wt.comboContainerClassName});l.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:l})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:Wt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,f.isPlainObject)(t)?this.cfg=(0,m.__assign)((0,m.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new ro(this.cfg.maxStep),this.redoStack=new ro(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,f.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,f.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,f.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,f.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var l=os({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});ua(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,l||{duration:500,easing:"easeCubic"})}else u=Ed(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");ua(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,f.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],l=this.get("minZoom"),c=this.get("maxZoom"),d=this.getZoom()||1,T=d*t,O=t,F=!1;if(l&&T<l?(O=l/d,F=!0):c&&T>c&&(O=c/d,F=!0),r?u=Ed(u,[["t",-r.x,-r.y],["s",O,O],["t",r.x,r.y]]):u=Ed(u,[["s",O,O]]),n){var K=(0,f.clone)(s.getMatrix());K||(K=[1,0,0,0,1,0,0,0,1]);var rt=K[0],lt=rt*O,ct=os({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(pt){if(pt===1)K=u;else{var _t=vi(rt,lt,pt)/K[0];r?K=Ed(K,[["t",-r.x,-r.y],["s",_t,_t],["t",r.x,r.y]]):K=Ed(K,[["s",_t,_t]])}return{matrix:K}},ct)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!F},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},l={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],l.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],l.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],l.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:l})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},l={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],l.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],l.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],l.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:l})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,f.isString)(t)&&(n=this.findById(t)),!n&&(0,f.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,m.__assign)((0,m.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),l=u.length-1;l>=0;l--)s.edges.push((0,m.__assign)((0,m.__assign)({},u[l].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var d=this.get("itemController");if(d.removeItem(n),a==="combo"){var T=As(this.get("comboTrees"));this.set("comboTrees",T)}}},e.prototype.innerAddItem=function(t,r,n){if(!No(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(F){u||ao(F,function(K){if(r.parentId===K.id){u=!0;var rt=(0,m.__assign)({id:r.id,depth:K.depth+2},r);K.children?K.children.push(rt):K.children=[rt],r.depth=rt.depth,a=n.addItem(t,r)}var lt=s[K.id];return u&&lt&&lt.getType&&lt.getType()==="combo"&&n.updateCombo(lt,K.children),!0})}),!u){var l=(0,m.__assign)({id:r.id,depth:0},r);r.depth=l.depth,o.push(l),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,f.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var d=this.get("itemMap"),T=!1,O=!1;o.forEach(function(F){O||T||ao(F,function(K){if(K.id===r.id)return O=!0,!1;if(r.comboId===K.id&&!O){T=!0;var rt=(0,f.clone)(r);rt.itemType="node",K.children?K.children.push(rt):K.children=[rt],rt.depth=K.depth+1}return T&&d[K.id].getType&&d[K.id].getType()==="combo"&&n.updateCombo(d[K.id],K.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var l=this.get("combos");if(l&&l.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,m.__assign)((0,m.__assign)({},u.getModel()),{itemType:t}),d={};switch(t){case"node":d.nodes=[c];break;case"edge":d.edges=[c];break;case"combo":d.combos=[c];break;default:break}this.pushStack("add",{before:{},after:d})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var l=t[u];l.type!=="edge"&&l.type!=="vedge"?s.push(this.innerAddItem(l.type,l.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var l=t[u];(l.type==="edge"||l.type==="vedge")&&(s[u]=this.innerAddItem(l.type,l.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var d={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var T=t[u].type,O=s[u];if(O&&O!==!0){var F=(0,m.__assign)((0,m.__assign)({},O.getModel()),{itemType:T});switch(T){case"node":d.nodes.push(F);break;case"edge":d.edges.push(F);break;case"combo":d.combos.push(F);break;default:break}}}this.pushStack("addItems",{before:{},after:d})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,f.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),l;u&&(l=(0,f.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var d=(0,m.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,f.each)(d,function(K){return a.setItemState(s,K,!1)}),o.updateItem(s,r),c==="combo"&&(0,f.each)(d,function(K){return a.setItemState(s,K,!0)}),u){var T={nodes:[],edges:[],combos:[]},O={nodes:[],edges:[],combos:[]},F=(0,m.__assign)({id:l.id},r);switch(c){case"node":T.nodes.push(l),O.nodes.push(F);break;case"edge":T.edges.push(l),O.edges.push(F);break;case"combo":T.combos.push(l),O.combos.push(F);break;default:break}this.pushStack("update",{before:T,after:O})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,f.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){vs(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,l=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(rt){return{type:"node",model:rt}}),!1,!1),(l==null?void 0:l.length)!==0){var c=Es(l,a);this.set("comboTrees",c),t.addCombos(l)}t.addItems(s.map(function(rt){return{type:"edge",model:rt}}),!1,!1);var d=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var T=t.get("layoutController");if(T){if(T.layout(O),this.destroyed)return}else O();function O(){(t.get("comboTrees")||[]).forEach(function(rt){ao(rt,function(lt){var ct=t.findById(lt.id);return ct.getType()==="combo"&&lt.collapsed&&(t.collapseCombo(lt.id,!1),t.updateCombo(ct)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",d),setTimeout(function(){var rt;(rt=t.getCombos())===null||rt===void 0||rt.forEach(function(lt){lt.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(l&&l.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var F=this.getNodes();F.forEach(function(rt){rt.toFront()})}else{var K=this.getEdges();K.forEach(function(rt){rt.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,f.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===mm){var l=o.getContainer().getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:l[6],y:l[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!vs(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ct){return o.clearItemStates(ct)}),this.getEdges().map(function(ct){return o.clearItemStates(ct)});var u=this.get("canvas"),l=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),d={nodes:[],edges:[]},T=s.combos;if(T){var O=Es(T,s.nodes);this.set("comboTrees",O)}else this.set("comboTrees",[]);this.diffItems("node",d,s.nodes),(0,f.each)(c,function(ct,pt){c[pt].getModel().depth=0,!(ct.getType&&ct.getType()==="edge")&&(ct.getType&&ct.getType()==="combo"?(delete c[pt],ct.destroy()):d.nodes.indexOf(ct)<0&&(delete c[pt],o.remove(ct,!1)))});for(var F=this.getCombos(),K=F.length,rt=K-1;rt>=0;rt--)F[rt].destroyed&&F.splice(rt,1);T&&(o.addCombos(T),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",d,s.edges),(0,f.each)(c,function(ct,pt){ct.getType&&(ct.getType()==="node"||ct.getType()==="combo")||d.edges.indexOf(ct)<0&&(delete c[pt],o.remove(ct,!1))}),(this.get("comboTrees")||[]).forEach(function(ct){ao(ct,function(pt){var _t=n.findById(pt.id);return _t.getType()==="combo"&&pt.collapsed&&n.collapseCombo(pt.id,!1),!0})}),this.set({nodes:d.nodes,edges:d.edges});var lt=this.get("layoutController");return lt&&(lt.changeData(function(){setTimeout(function(){var ct;(ct=o.getCombos())===null||ct===void 0||ct.forEach(function(pt){pt.set("animate",!0)})},0)}),o.get("animate")&&!lt.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(ct){return ct.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",l)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,f.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var l=n&&this.get("enabledStack"),c={nodes:[],combos:[]};l&&r.forEach(function(lt){var ct=a.findById(lt),pt=ct.getType();if(!(pt!=="node"&&pt!=="combo")){var _t=ct.getModel();c["".concat(pt,"s")].push({id:lt,parentId:pt==="node"?_t.comboId:_t.parentId})}});var d=this.get("comboTrees"),T=new Set(r),O=new Map;d&&(d.forEach(function(lt){ao(lt,function(ct,pt,_t){if(T.has(ct.id)){if(pt){var jt=a.findById(pt.id),ae=a.findById(ct.id);pt.children.splice(_t,1),jt.removeChild(ae),o.updateCombo(jt,pt.children)}ct.itemType==="combo"&&O.set(ct.id,ct)}return!0})}),d=d.filter(function(lt){return!T.has(lt.id)}),this.set("comboTrees",d));var F={nodes:[],combos:[]},K=r.map(function(lt){var ct=a.findById(lt),pt=ct.getModel(),_t="";ct.getType&&(_t=ct.getType());var jt=O.get(lt)||{id:ct.getID(),itemType:_t};return _t==="combo"?(jt.parentId=s,pt.parentId=s):_t==="node"&&(jt.comboId=s,pt.comboId=s),l&&F["".concat(_t,"s")].push({id:pt.id,parentId:s}),jt});u.children=K,this.addItem("combo",u,!1),this.set("comboSorted",!1),d&&(d.forEach(function(lt){Oi(lt,function(ct){return ct.id===s?(ct.itemType="combo",ct.children=K,!1):!0})}),this.sortCombos()),l&&(F.combos.push(u),this.pushStack("createCombo",{before:c,after:F}));var rt=this.findById(s);!rt.getModel().parentId&&rt.getChildren().combos.length&&this.updateComboTree(rt,void 0,!1)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,f.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var l=u.getModel(),c=u.getModel().parentId,d=s.get("comboTrees");d||(d=[]);var T=this.get("itemMap"),O=u.get("id"),F,K=[],rt=this.get("combos"),lt=this.findById(c),ct=r&&this.get("enabledStack"),pt={};if(ct&&(pt=(0,f.clone)(l),pt.children=[]),d.forEach(function(ne){F||ao(ne,function(we){var Fe;if(we.id===O){F=we;var Oe=u.getEdges().map(function(Jr){return Jr.getID()});Oe.forEach(function(Jr){n.removeItem(Jr,!1)});var Ke=rt.indexOf(u);rt.splice(Ke,1),delete T[O];var sr=(0,f.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:sr,type:"combo"})}if(c&&F&&we.id===c){lt.removeCombo(u),K=we.children;var Ke=K.indexOf(F);return Ke!==-1&&K.splice(Ke,1),(Fe=F.children)===null||Fe===void 0||Fe.forEach(function(Tn){var vn=n.findById(Tn.id),Yr=vn.getModel();vn.getType&&vn.getType()==="combo"?(Tn.parentId=c,delete Tn.comboId,Yr.parentId=c,delete Yr.comboId):vn.getType&&vn.getType()==="node"&&(Tn.comboId=c,Yr.comboId=c),lt.addChild(vn),K.push(Tn)}),n.updateCombo(lt),!1}return!0})}),!c&&F){var _t=d.indexOf(F);d.splice(_t,1),(a=F.children)===null||a===void 0||a.forEach(function(ne){ne.parentId=void 0;var we=n.findById(ne.id).getModel();delete we.parentId,delete we.comboId,ne.itemType!=="node"&&d.push(ne)})}if(ct){var jt={nodes:[],combos:[]},ae={nodes:[],combos:[]};(o=F.children)===null||o===void 0||o.forEach(function(ne){var we=n.findById(ne.id),Fe=we.getType();Fe!=="node"&&Fe!=="combo"||(jt["".concat(Fe,"s")].push({id:ne.id,parentId:O}),ae["".concat(Fe,"s")].push({id:ne.id,parentId:c}))}),jt.combos.push(pt),this.pushStack("uncombo",{before:jt,after:ae})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){ao(u,function(l){var c;if(!l)return!0;var d=s[l.id];if(((c=d==null?void 0:d.getType)===null||c===void 0?void 0:c.call(d))==="combo"){var T=(0,m.__spreadArray)([],d.getStates(),!0);(0,f.each)(T,function(O){return r.setItemState(d,O,!1)}),o.updateCombo(d,l.children,t),(0,f.each)(T,function(O){return r.setItemState(d,O,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,f.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),l=n.get("itemMap");(s||[]).forEach(function(c){ao(c,function(d){if(!d)return!0;var T=l[d.id];if(o===d.id&&T&&T.getType&&T.getType()==="combo"){var O=(0,m.__spreadArray)([],T.getStates(),!0);(0,f.each)(O,function(F){T.getStateStyle(F)&&r.setItemState(T,F,!1)}),u.updateCombo(T,d.children),(0,f.each)(O,function(F){T.getStateStyle(F)&&r.setItemState(T,F,!0)}),o&&(o=d.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,f.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,l="";if(o.getType&&(l=o.getType()),r&&l==="combo"){var c=this.get("comboTrees"),d=!0,T;if((c||[]).forEach(function(ct){T||Oi(ct,function(pt){if(!T)return pt.id===o.getID()&&(T=pt),!0})}),Oi(T,function(ct){return ct.id===r?(d=!1,!1):!0}),!d){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var O={},F={};l==="combo"?(O.combos=[{id:s.id,parentId:s.parentId}],F.combos=[{id:s.id,parentId:r}]):l==="node"&&(O.nodes=[{id:s.id,parentId:s.comboId}],F.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:O,after:F})}if(s.parentId||s.comboId){var K=this.findById(s.parentId||s.comboId);K&&K.removeChild(o)}if(l==="combo"?s.parentId=r:l==="node"&&(s.comboId=r),r){var rt=this.findById(r);rt&&rt.addChild(o)}if(u){var rt=this.findById(u);rt&&rt.removeChild(o)}var lt=As(this.get("comboTrees"),s.id,r);this.set("comboTrees",lt),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,f.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,f.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,f.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,f.each)(r,function(o){o.refresh()}),(0,f.each)(n,function(o){o.refresh()}),(0,f.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,f.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(l){var c=l.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(l){(0,f.each)(s,function(c){var d=r.findById(c.id);if(!(!d||d.destroyed)){var T=d.get("originAttrs"),O=d.get("model"),F=d.getContainer().getMatrix();if(T==null&&(F&&(T={x:F[6],y:F[7]}),d.set("originAttrs",T||0)),a){var K=a(d,l,c,T||{x:0,y:0});d.set("model",Object.assign(O,K))}else T?(O.x=T.x+(c.x-T.x)*l,O.y=T.y+(c.y-T.y)*l):(O.x=c.x,O.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,f.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,l={},c=function(T){(0,f.each)(T,function(O){u=O.getModel();var F=O.get("originAttrs");if(!(F&&u.x===F.x&&u.y===F.y)){var K=O.updatePosition({x:u.x,y:u.y});l[u.id]=K,u.comboId&&(l[u.comboId]=l[u.comboId]||K),u.parentId&&(l[u.parentId]=l[u.parentId]||K)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,f.each)(a,function(d){var T=d.getSource().getModel(),O=d.getTarget();if(!(0,f.isPlainObject)(O)){var F=O.getModel();(l[T.id]||l[F.id]||d.getModel().isComboEdge)&&d.refresh()}}),(0,f.each)(o,function(d){d.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,f.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var l=["force","gForce","fruchterman","force2"];l.includes(t.type)||!t.type&&l.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(T){var O=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*O[0]+O[6],u.y=u.y*O[0]+O[7];var F=o.getGroup().getCanvasBBox(),K=F.minX,rt=F.maxX,lt=F.minY,ct=F.maxY,pt={x:(K+rt)/2,y:(lt+ct)/2};r==="begin"&&(pt.x=K,pt.y=lt),o.translate(u.x-pt.x,u.y-pt.y)})}var c=(0,m.__assign)({},this.get("layout")),d={};Object.assign(d,c,t),t.pipes&&!t.type?delete d.type:!t.pipes&&d.type&&delete d.pipes,this.set("layout",d),s&&(s.isLayoutTypeSame(d)&&d.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(d):s.changeLayout(d),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:d}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,f.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],l=this.get("comboTrees"),c=!1;(l||[]).forEach(function(T){c||Oi(T,function(O){if(c&&O.depth<=a.depth)return!1;if(a.id===O.id&&(c=!0),c){var F=n.findById(O.id);F&&F.getType&&F.getType()==="combo"&&(u=u.concat(F.getNodes()),u=u.concat(F.getCombos()))}return!0})});var d={};s.forEach(function(T){var O=T.getModel(),F=O.isVEdge,K=O.size,rt=K===void 0?1:K;if(!(T.isVisible()&&!F)){var lt=T.getSource(),ct=T.getTarget(),pt=null,_t;if(lt.getModel().id===a.id||u.includes(lt)&&!u.includes(ct)?(pt=ct,_t=!1):(ct.getModel().id===a.id||!u.includes(lt)&&u.includes(ct))&&(pt=lt,_t=!0),pt){if(F){n.removeItem(T,!1);return}for(var jt=pt.getModel();!pt.isVisible();){var ae=jt.parentId,ne=jt.comboId,we=ae||ne;if(pt=n.findById(we),!pt||!we)return;jt=pt.getModel()}var Fe=jt.id,Oe=_t?{source:Fe,target:a.id,size:rt,isVEdge:!0}:{source:a.id,target:Fe,size:rt,isVEdge:!0},Ke="".concat(Oe.source,"-").concat(Oe.target);if(d[Ke]){d[Ke].size+=rt;return}d[Ke]=Oe}}}),this.addItems(Object.values(d).map(function(T){return{type:"vedge",model:T}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,f.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],l=this.get("comboTrees"),c=!1;(l||[]).forEach(function(T){c||Oi(T,function(O){if(c&&O.depth<=a.depth)return!1;if(a.id===O.id&&(c=!0),c){var F=n.findById(O.id);F&&F.getType&&F.getType()==="combo"&&(u=u.concat(F.getNodes()),u=u.concat(F.getCombos()))}return!0})});var d={};s.forEach(function(T){if(!(T.isVisible()&&!T.getModel().isVEdge)){var O=T.getSource(),F=T.getTarget(),K=O.get("id"),rt=F.get("id"),lt=null,ct;if(K===a.id||u.includes(O)&&!u.includes(F)?(lt=F,ct=!1):rt===a.id||!u.includes(O)&&u.includes(F)?(lt=O,ct=!0):u.includes(O)&&u.includes(F)&&O.isVisible()&&F.isVisible()&&T.show(),lt){var pt=T.getModel(),_t=pt.isVEdge,jt=pt.size,ae=jt===void 0?1:jt;if(_t){n.removeItem(T,!1);return}for(var ne=lt.getModel();!lt.isVisible();){var we=ne.parentId,Fe=ne.comboId,Oe=we||Fe;if(lt=n.findById(Oe),!lt||!Oe)return;ne=lt.getModel()}for(var Ke=ne.id,sr=ct?F:O,Jr=sr.getModel();!sr.isVisible();){var Tn=Jr.parentId,vn=Jr.comboId,Yr=Tn||vn;if(sr=n.findById(Yr),!sr||!Yr)return;if(Jr.comboId===a.id||Jr.parentId===a.id)break;Jr=sr.getModel()}var Gn=Jr.id;if(Ke){var kn=ct?{source:Ke,target:Gn,isVEdge:!0,size:ae}:{source:Gn,target:Ke,isVEdge:!0,size:ae},Xr="".concat(kn.source,"-").concat(kn.target);if(d[Xr]){d[Xr].size+=ae;return}d[Xr]=kn}}}}),this.addItems(Object.values(d).map(function(T){return{type:"vedge",model:T}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,f.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,f.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,f.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=ge(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,f.clone)(r):{before:{},after:(0,f.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=q(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=q(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=Xe(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new ep(this,(0,m.__assign)((0,m.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,f.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(J),rp=ym;function Fh(i){return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(i)}var Qf=ft,np="-shape",zh="-label",Hd=["startArrow","endArrow"],ap={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},bm={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Zd={edge:bm,node:ap,combo:ap},Gh="-label-bg",Uh={options:{labelCfg:{style:{fontFamily:Wt.windowFontFamily}},descriptionCfg:{style:{fontFamily:Wt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,f.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+np),t.shapeMap[this.itemType+np]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+zh),t.shapeMap[this.itemType+zh]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),l=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":l=Qf(l,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":l=Qf(l,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":l=Qf(l,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:l=Qf(l,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else l=Qf(l,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(l)}if(a.background){var c=this.drawLabelBg(e,t,s),d=this.itemType+Gh;c.set("classname",d),t.shapeMap[d]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,f.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=Wt[a]?Wt[a].style:null;return(0,m.__assign)((0,m.__assign)((0,m.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,f.mix)({},o.attr(),e.style),u=function(d){var T,O=s[d];if((0,f.isPlainObject)(O)){var F=((n=a.shapeMap)===null||n===void 0?void 0:n[d])||a.find(function(K){return K.get("name")===d});F==null||F.attr(O)}else o.attr((T={},T[d]=O,T))};for(var l in s)u(l)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,l=this.itemType+zh,c=o.shapeMap[l]||o.find(function(_t){return _t.get("className")===l}),d=this.itemType+Gh,T=o.shapeMap[d]||o.find(function(_t){return _t.get("className")===d});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[l],T&&(o.removeChild(T),delete o.shapeMap[d])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,f.deepMix)(u,e.labelCfg));var F=this.getLabelStyleByPosition(e,u,o),K=(n=e.labelCfg)===null||n===void 0?void 0:n.style,rt=(0,m.__assign)((0,m.__assign)({},F),K),lt=rt.rotate;if(delete rt.rotate,!isNaN(lt)&&lt!==""){var ct=[1,0,0,0,1,0,0,0,1];ct=Qf(ct,[["t",-rt.x,-rt.y],["r",lt],["t",rt.x,rt.y]]),rt.matrix=ct,c.attr(rt)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(rt);if(!T)rt.background&&(T=this.drawLabelBg(e,o,c),T.set("classname",d),o.shapeMap[d]=T,c.toFront());else if(rt.background){var pt=this.getLabelBgStyleByPosition(c,u);T.attr(pt)}else o.removeChild(T)}else{var O=this.drawLabel(e,o);O.set("className",l),o.shapeMap[l]=O}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),l=(0,f.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(l,r),d=r.getStateStyle(l);if(!(!d&&!c)){var T=(0,f.mix)({},d||c),O=r.getContainer(),F={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(F.r=1,F.width=1,F.height=1),t){var K=function(Yr){var Gn,kn=T[Yr];if((0,f.isPlainObject)(kn)&&!Hd.includes(Yr)){var Xr=((o=O.shapeMap)===null||o===void 0?void 0:o[Yr])||O.find(function(fn){return fn.get("name")===Yr});Xr==null||Xr.attr(kn)}else s.attr((Gn={},Gn[Yr]=kn,Gn))};for(var rt in T)K(rt)}else{var lt=Ko(r.getCurrentStatesStyle()),ct=r.getModel(),pt=(0,f.mix)({},ct.style,Ko(r.getOriginStyle())),_t=s.get("name"),jt=s.attr(),ae={};Object.keys(jt).forEach(function(vn){if(vn!=="img"){var Yr=jt[vn];Yr&&Fh(Yr)==="object"?ae[vn]=(0,f.clone)(Yr):ae[vn]=Yr}});var ne={},we=function(Yr){var Gn=T[Yr];if((0,f.isPlainObject)(Gn)&&!Hd.includes(Yr)){var kn=O.shapeMap[Yr]||O.find(function(An){return An.get("name")===Yr});if(kn){var Xr=Ko(kn.attr());(0,f.each)(Gn,function(An,On){if(Yr===_t&&ae[On]&&!F[On]){delete ae[On];var jn=pt[Yr][On]||Zd[u][On];s.attr(On,jn)}else if(Xr[On]||Xr[On]===0){delete Xr[On];var ta=pt[Yr][On]||Zd[u][On];kn.attr(On,ta)}}),ne[Yr]=Xr}}else if(ae[Yr]&&!F[Yr]){delete ae[Yr];var fn=pt[Yr]||(pt[_t]?pt[_t][Yr]:void 0)||Zd[u][Yr];s.attr(Yr,fn)}};for(var Fe in T)we(Fe);_t?ne[_t]=ae:(0,f.mix)(ne,ae);for(var rt in lt)if(!F[rt]){var Oe=lt[rt];(!(0,f.isPlainObject)(Oe)||Hd.includes(rt))&&(_t?((0,f.mix)(pt[_t],(a={},a[rt]=Oe,a)),delete pt[rt]):(0,f.mix)(pt,(n={},n[rt]=Oe,n)),delete lt[rt])}var Ke={};(0,f.deepMix)(Ke,pt,ne,lt);var sr=!1,Jr=function(Yr){var Gn,kn,Xr=Ke[Yr];if((0,f.isPlainObject)(Xr)&&!Hd.includes(Yr)){var fn=O.shapeMap[Yr]||O.find(function(On){return On.get("name")===Yr});fn&&((fn.get("type")==="text"||fn.get("labelRelated"))&&(delete Xr.x,delete Xr.y,delete Xr.matrix),Yr===_t&&(u==="combo"&&(delete Xr.r,delete Xr.width,delete Xr.height),sr=!0),fn.attr(Xr))}else if(!sr){var An=Xr||Zd[u][Yr];u==="combo"?_t||s.attr((Gn={},Gn[Yr]=An,Gn)):s.attr((kn={},kn[Yr]=An,kn))}};for(var Tn in Ke)Jr(Tn)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,l=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,f.clone)(l):(0,f.mix)({},u,l)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},xm={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Wt.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||Wt.defaultNode.size;return(0,f.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,f.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=qo(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,f.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Th(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,m.__assign)((0,m.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ke){return Ke.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ke){return Ke.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ke){return Ke.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Ke){return Ke.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var l=(0,f.mix)({},u,e.linkPoints),c=l.fill,d=l.stroke,T=l.lineWidth,O=l.size/2;O||(O=l.r);var F=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},K=F.left,rt=F.right,lt=F.top,ct=F.bottom,pt=this.getSize(e),_t=pt[0],jt=pt[1],ae={r:O,fill:c,stroke:d,lineWidth:T};if(n)!K&&K!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,m.__assign)((0,m.__assign)({},ae),{x:-_t/2,y:0}));else if(K){var ne="link-point-left";t.shapeMap[ne]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},ae),{x:-_t/2,y:0}),className:ne,name:ne,isAnchorPoint:!0})}if(a)!rt&&rt!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,m.__assign)((0,m.__assign)({},ae),{x:_t/2,y:0}));else if(rt){var we="link-point-right";t.shapeMap[we]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},ae),{x:_t/2,y:0}),className:we,name:we,isAnchorPoint:!0})}if(o)!lt&&lt!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,m.__assign)((0,m.__assign)({},ae),{x:0,y:-jt/2}));else if(lt){var Fe="link-point-top";t.shapeMap[Fe]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},ae),{x:0,y:-jt/2}),className:Fe,name:Fe,isAnchorPoint:!0})}if(s)!ct&&ct!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,m.__assign)((0,m.__assign)({},ae),{x:0,y:jt/2}));else if(ct){var Oe="link-point-bottom";t.shapeMap[Oe]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},ae),{x:0,y:jt/2}),className:Oe,name:Oe,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,m.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,l=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(lt){return lt.get("name")==="".concat(r.type,"-icon")});if(l)if(s||s===void 0){var c=(0,f.mix)({},l.attr(),a),d=c.width,T=d===void 0?20:d,O=c.height,F=O===void 0?20:O;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(T=0,F=0),l.attr((0,m.__assign)((0,m.__assign)({},c),{x:-T/2,y:-F/2}))}else l.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var K="".concat(this.type,"-icon");if(u)n.shapeMap[K]=n.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:K,name:K});else{var T=a.width,F=a.height;n.shapeMap[K]=n.addShape("image",{attrs:(0,m.__assign)((0,m.__assign)({},a),{x:-T/2,y:-F/2}),className:K,name:K})}var rt=n.shapeMap["node-label"]||n.find(function(lt){return lt.get("name")==="node-label"});rt&&rt.toFront()}}},Em=(0,m.__assign)((0,m.__assign)({},Uh),xm);Jo.registerNode("single-node",Em);var Kd="edge-shape";function wm(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Sm={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Wt.defaultEdge.size,style:{x:0,y:0,stroke:Wt.defaultEdge.style.stroke,lineAppendWidth:Wt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Wt.edgeLabel.style.fill,fontSize:Wt.edgeLabel.style.fontSize,fontFamily:Wt.windowFontFamily}},stateStyles:(0,m.__assign)({},Wt.edgeStateStyles)},getPath:function(e){var t=[];return(0,f.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,f.mix)({},t,r,e.style),a=e.size||Wt.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),l=[o];u&&(l=l.concat(u)),l.push(s);var c=this.getPath(l),d=(0,f.mix)({},Wt.defaultEdge.style,{stroke:Wt.defaultEdge.color,lineWidth:a,path:c},n);return d},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,l=e.endPoint,c=this.getControlPoints(e),d=[u];c&&(d=d.concat(c)),d.push(l);var T=o.attr(),O=e.style||{};O.stroke===void 0&&(O.stroke=e.color);var F=e.sourceNode,K=e.targetNode,rt={radius:O.radius};c||(rt={source:F,target:K,offset:O.offset,radius:O.radius});var lt=this.getPath(d,rt),ct={};r==="move"?ct={path:lt}:(T.endArrow&&O.endArrow===!1&&(e.style.endArrow={path:""}),T.startArrow&&O.startArrow===!1&&(e.style.startArrow={path:""}),ct=(0,m.__assign)({},e.style),ct.lineWidth===void 0&&(ct.lineWdith=((0,f.isNumber)(s)?s:s==null?void 0:s[0])||T.lineWidth),ct.path===void 0&&(ct.path=lt),ct.stroke===void 0&&(ct.stroke=T.stroke||e.color)),o&&o.attr(ct)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[Kd],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,l=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+l,a.text=e.label,a;var c;(0,f.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var d=no(o,s,u,l,c);return a.x=d.x,a.y=d.y,a.rotate=d.rotate,a.textAlign=this._getTextAlign(n,d.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,m.__assign)((0,m.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),l;return(0,f.isNil)(t.autoRotate)?l=this.labelAutoRotate:l=t.autoRotate,l&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=wm(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:Kd,name:Kd,attrs:r});return t.shapeMap[Kd]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,f.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),l=this.itemType+Gh;u.set("classname",l),t.shapeMap[l]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,f.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),l=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=l,l}},Mm=(0,m.__assign)((0,m.__assign)({},Uh),Sm);Jo.registerEdge("single-edge",Mm),Jo.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Jo.registerEdge("spline",{getPath:function(e){var t=Vv(e);return t}},"single-edge"),Jo.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Mn(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,f.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=Mn(t,o,r)}var l=Kn(t,a),c=[{x:l,y:l}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Jo.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,f.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,f.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Vd(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Jo.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,f.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,f.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=Vd(r,n,e.curvePosition[0],e.curveOffset[0]),o=Vd(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Jo.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,f.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,f.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,f.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),Jo.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,f.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,f.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,f.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),Jo.registerEdge("loop",{getPathPoints:function(e){return di(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var _m={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Wt.comboLabel.refX,refY:Wt.comboLabel.refY,options:{style:{stroke:Wt.defaultCombo.style.stroke,fill:Wt.defaultCombo.style.fill,lineWidth:Wt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Wt.comboLabel.style.fill,fontSize:Wt.comboLabel.style.fontSize,fontFamily:Wt.windowFontFamily}},stateStyles:(0,m.__assign)({},Wt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,f.clone)(e.size||this.options.size||Wt.defaultCombo.size);return(0,f.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,f.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,f.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,f.isNil)(o)&&(o=this.refX),(0,f.isNil)(s)&&(s=this.refY);var u=this.getSize(e),l=Math.max(n.r,u[0]/2)||u[0]/2,c=l+a,d;switch(r){case"top":d={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":d={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":d={x:-c+o,y:0,textAlign:"left"};break;case"center":d={x:0,y:0,text:e.label,textAlign:"center"};break;default:d={x:c+o,y:0,textAlign:"right"};break}return d.text=e.label,d},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,l=s.img,c=s.width,d=s.height,T=t.getContainer(),O=T.find(function(lt){return lt.get("name")==="combo-collapsed-substitute-icon"}),F=O&&!O.destroyed,K=t.get("keyShape");if(n&&u){if(F)O.show();else{var rt={width:c||r.r*2||r.width,height:d||r.r*2||r.height};O=T.addShape("image",{attrs:(0,m.__assign)({img:l,x:-rt.width/2,y:-rt.height/2},rt),name:"combo-collapsed-substitute-icon",draggable:!0})}K.hide()}else F&&(O.hide(),K.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,m.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},Cm=(0,m.__assign)((0,m.__assign)({},Uh),_m);Jo.registerCombo("single-combo",Cm),Jo.registerCombo("circle",{options:{size:[Wt.defaultCombo.size[0],Wt.defaultCombo.size[0]],padding:Math.max.apply(Math,Wt.defaultCombo.padding),animate:!0,style:{stroke:Wt.defaultCombo.style.stroke,fill:Wt.defaultCombo.style.fill,lineWidth:Wt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Wt.comboLabel.style.fill,fontSize:Wt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,m.__assign)({},Wt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,f.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,f.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,f.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,f.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||Wt.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var l=(0,m.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},l},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,f.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,f.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,f.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var l={stroke:e.color},c=t.get("keyShape"),d=(0,f.mix)({},c.attr(),l,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,d,!0)}},"single-combo"),Jo.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Wt.defaultCombo.style.stroke,fill:Wt.defaultCombo.style.fill,lineWidth:Wt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Wt.comboLabel.style.fill,fontSize:Wt.comboLabel.style.fontSize,fontFamily:Wt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,m.__assign)({},Wt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,f.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,f.isNil)(o)&&(o=this.refX),(0,f.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],l=n.width/2+a[1],c=-n.height/2-a[0],d=n.height/2+a[2],T;switch(r){case"top":T={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":T={x:0,y:d+s,textBaseline:"top",textAlign:"center"};break;case"left":T={x:u+s,y:0,textAlign:"left"};break;case"center":T={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":T={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:T={x:l+o,y:0,textAlign:"right"};break}return T.text=e.label,T},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,f.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,f.mix)({},t,n,e.style),o=this.getSize(e),s,u,l=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;l?(0,f.isNumber)(l)?(s=l,u=l):(s=l[0],u=l[1]):(!(0,f.isNumber)(a.width)||isNaN(a.width)?s=o[0]||Wt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,f.isNumber)(a.height)||isNaN(a.height)?u=o[1]||Wt.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],d=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var T=(0,m.__assign)({x:c,y:d},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},T},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,f.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,f.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,f.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var l=t.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},d=t.get("keyShape"),T=(0,f.mix)({},d.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,T,!1)}},"single-combo"),Jo.registerNode("simple-circle",{options:{size:Wt.defaultNode.size,style:{x:0,y:0,stroke:Wt.defaultNode.style.stroke,fill:Wt.defaultNode.style.fill,lineWidth:Wt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Wt.nodeLabel.style.fill,fontSize:Wt.nodeLabel.style.fontSize,fontFamily:Wt.windowFontFamily}},stateStyles:(0,m.__assign)({},Wt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,f.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,m.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,f.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Jo.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Wt.defaultNode.style.stroke,fill:Wt.defaultNode.style.fill,lineWidth:Wt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Wt.nodeLabel.style.fill,fontSize:Wt.nodeLabel.style.fontSize,fontFamily:Wt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,m.__assign)({},Wt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,f.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},l=(0,f.mix)({},a,s.attr(),u);l=(0,f.mix)(l,e.style),this.updateShape(e,t,l,!1,r)}},"single-node"),Jo.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Wt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,m.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var l=r.width,c=r.height,d=a-l/2,T=o-c/2;t.setClip({type:"rect",attrs:(0,m.__assign)({x:d,y:T,width:l,height:c},s)})}else if(n==="ellipse"){var O=r.rx,F=r.ry;t.setClip({type:"ellipse",attrs:(0,m.__assign)({x:a,y:o,rx:O,ry:F},s)})}else if(n==="polygon"){var K=r.points;t.setClip({type:"polygon",attrs:(0,m.__assign)({points:K},s)})}else if(n==="path"){var rt=r.path;t.setClip({type:"path",attrs:(0,m.__assign)({path:rt},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var ip={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,l="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return l}},op={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},fc=Jo,Tm=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],sp=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},Am=ft,Om=(0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)({},L),w),p),R),b),S),{transform:Am,mat3:Q}),as=Om,Im=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=sp(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,m.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],l=this.graph.getNodes(),c=this.graph.getEdges(),d=this.graph.getCombos(),T=l.length,O=0;O<T;O++){var F=l[O];if(!(!F||F.destroyed)){var K=F.getModel();if(!F.isVisible()){r.push(K);continue}t.push(K)}}for(var rt=c.length,O=0;O<rt;O++){var lt=c[O];if(!(!lt||lt.destroyed)){var K=lt.getModel();if(!lt.isVisible()){a.push(K);continue}K.isComboEdge?o.push(K):n.push(K)}}for(var ct=d.length,O=0;O<ct;O++){var pt=d[O];if(!pt.destroyed){var K=pt.getModel();if(!pt.isVisible()){u.push(K);continue}s.push(K)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(_t){return _t.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(l,c){var d=o[c]||o;s=s.then(function(){var T,O=t.execLayoutMethod(d,c);return c===a.length-1&&((T=o.onAllLayoutEnd)===null||T===void 0||T.call(o)),O})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,m.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,f.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,f.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var l=u.reduce(function(c,d){return c[d.id]=!0,c},{});s=function(d){return l[d.source]&&l[d.target]}}return(0,m.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,f.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Ov(o);return s.size=[s.width,s.height],s}),a=Object.values((0,f.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Xu(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,m.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,m.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Xu(u.x)||Xu(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,l=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/l)),d=Math.ceil(o/c),T=u/(c-1),O=l/(d-1);(!isFinite(T)||!T)&&(T=0),(!isFinite(O)||!T)&&(O=0);for(var F=e[0]-u/2,K=e[1]-l/2,rt=!0,lt=0;lt<o;lt++){var ct=a[lt];Xu(+ct.x)&&(rt=!1,ct.x=lt%c*T+F),Xu(+ct.y)&&(rt=!1,ct.y=Math.floor(lt/c)*O+K)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),up=Im,Dm=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),lp=Dm,Ml=fc.registerNode,cp=fc.registerEdge,Pm=fc.registerCombo,fp=U.registerBehavior,zn=Wt,LS={version:Wt.version,AbstractGraph:rp,BaseGlobal:zn,Util:as,Shape:fc,Node:Nh,Edge:Fv,Combo:Yv,Hull:ep,registerNode:fc.registerNode,registerEdge:fc.registerEdge,registerCombo:fc.registerCombo,registerBehavior:U.registerBehavior,Arrow:ip,Marker:op,AbstractLayout:up,AbstractEvent:lp},Lm=_(810369);function Nm(){return window?window.devicePixelRatio:1}function dp(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function $c(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function wd(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Rm(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function hp(i,e){return i[0]===e[0]&&i[1]===e[1]}var km=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Bm=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Fm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,vp=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function pp(i,e){var t=i.match(vp);(0,f.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function zm(i,e,t){var r=km.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var l=Math.tan(n),c=l*l,d=(u.x-s.x+l*(u.y-s.y))/(c+1)+s.x,T=l*(u.x-s.x+l*(u.y-s.y))/(c+1)+s.y,O=i.createLinearGradient(s.x,s.y,d,T);return pp(a,O),O}function Gm(i,e,t){var r=Bm.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(vp);return u[u.length-1].split(":")[1]}var l=e.getBBox(),c=l.maxX-l.minX,d=l.maxY-l.minY,T=Math.sqrt(c*c+d*d)/2,O=i.createRadialGradient(l.minX+c*n,l.minY+d*a,0,l.minX+c/2,l.minY+d/2,o*T);return pp(s,O),O}function Um(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=Fm.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function Wm(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,f.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return zm(i,e,t);if(t[0]==="r")return Gm(i,e,t);if(t[0]==="p")return Um(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function Ym(i){var e=0,t=0,r=0,n=0;return(0,f.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function $d(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Wh(i,e){return $d(i)*$d(e)?(i[0]*e[0]+i[1]*e[1])/($d(i)*$d(e)):1}function gp(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Wh(i,e))}function mp(i,e){var t=e[1],r=e[2],n=(0,f.mod)((0,f.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],l=e[6],c=e[7],d=Math.cos(n)*(s-l)/2+Math.sin(n)*(u-c)/2,T=-1*Math.sin(n)*(s-l)/2+Math.cos(n)*(u-c)/2,O=d*d/(t*t)+T*T/(r*r);O>1&&(t*=Math.sqrt(O),r*=Math.sqrt(O));var F=t*t*(T*T)+r*r*(d*d),K=F?Math.sqrt((t*t*(r*r)-F)/F):1;a===o&&(K*=-1),isNaN(K)&&(K=0);var rt=r?K*t*T/r:0,lt=t?K*-r*d/t:0,ct=(s+l)/2+Math.cos(n)*rt-Math.sin(n)*lt,pt=(u+c)/2+Math.sin(n)*rt+Math.cos(n)*lt,_t=[(d-rt)/t,(T-lt)/r],jt=[(-1*d-rt)/t,(-1*T-lt)/r],ae=gp([1,0],_t),ne=gp(_t,jt);return Wh(_t,jt)<=-1&&(ne=Math.PI),Wh(_t,jt)>=1&&(ne=0),o===0&&ne>0&&(ne=ne-2*Math.PI),o===1&&ne<0&&(ne=ne+2*Math.PI),{cx:ct,cy:pt,rx:hp(i,[l,c])?0:t,ry:hp(i,[l,c])?0:r,startAngle:ae,endAngle:ae+ne,xRotation:n,arcFlag:a,sweepFlag:o}}var Qd=Math.sin,qd=Math.cos,Yh=Math.atan2,Jd=Math.PI;function yp(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,l=t-n,c=r-a,d=Yh(c,l),T=new $h({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*qd(Jd/6)+","+10*Qd(Jd/6)+" L0,0 L"+10*qd(Jd/6)+",-"+10*Qd(Jd/6),stroke:s,lineWidth:u}});T.translate(n,a),T.rotateAtPoint(n,a,d),i.set(o?"startArrowShape":"endArrowShape",T)}function bp(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,l=e.stroke,c=e.lineWidth,d=o?s:u,T=d.d,O=d.fill,F=d.stroke,K=d.lineWidth,rt=(0,m.__rest)(d,["d","fill","stroke","lineWidth"]),lt=t-n,ct=r-a,pt=Yh(ct,lt);T&&(n=n-qd(pt)*T,a=a-Qd(pt)*T);var _t=new $h({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,m.__assign)((0,m.__assign)({},rt),{stroke:F||l,lineWidth:K||c,fill:O})});_t.translate(n,a),_t.rotateAtPoint(n,a,pt),i.set(o?"startArrowShape":"endArrowShape",_t)}function Qc(i,e,t,r,n){var a=Yh(r-e,t-i);return{dx:qd(a)*n,dy:Qd(a)*n}}function Xh(i,e,t,r,n,a){typeof e.startArrow=="object"?bp(i,e,t,r,n,a,!0):e.startArrow?yp(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function jh(i,e,t,r,n,a){typeof e.endArrow=="object"?bp(i,e,t,r,n,a,!1):e.endArrow?yp(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var xp={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function qf(i,e){var t=e.attr();for(var r in t){var n=t[r],a=xp[r]?xp[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,f.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=Wm(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function Vh(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function Xm(i,e,t){var r=i.get("refreshElements");(0,f.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?Zh(e,t):Hh(e,t)}function Hh(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&Zh(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Hh(r.cfg.children,e);else{var n=jm(r,e);r.cfg.refresh=n,n&&r.isGroup()&&Hh(r.cfg.children,e)}}}function Ep(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Ep(t.cfg.children)}}function Zh(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&Zh(r.get("children"),e))}}function jm(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&wd(t,e);return r}function wp(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],l={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var d=n[c],T=d[0];if(c===0&&a&&a.d){var O=i.getStartTangent();l=Qc(O[0][0],O[0][1],O[1][0],O[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var F=n[c+1];if(F[0]==="Z"){var O=i.getEndTangent();l=Qc(O[0][0],O[0][1],O[1][0],O[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var O=i.getEndTangent();l=Qc(O[0][0],O[0][1],O[1][0],O[1][1],o.d)}var K=l.dx,rt=l.dy;switch(T){case"M":e.moveTo(d[1]-K,d[2]-rt),u=[d[1],d[2]];break;case"L":e.lineTo(d[1]-K,d[2]-rt);break;case"Q":e.quadraticCurveTo(d[1],d[2],d[3]-K,d[4]-rt);break;case"C":e.bezierCurveTo(d[1],d[2],d[3],d[4],d[5]-K,d[6]-rt);break;case"A":{var lt=void 0;r?(lt=r[c],lt||(lt=mp(s,d),r[c]=lt)):lt=mp(s,d);var ct=lt.cx,pt=lt.cy,_t=lt.rx,jt=lt.ry,ae=lt.startAngle,ne=lt.endAngle,we=lt.xRotation,Fe=lt.sweepFlag;if(e.ellipse)e.ellipse(ct,pt,_t,jt,we,ae,ne,1-Fe);else{var Oe=_t>jt?_t:jt,Ke=_t>jt?1:_t/jt,sr=_t>jt?jt/_t:1;e.translate(ct,pt),e.rotate(we),e.scale(Ke,sr),e.arc(0,0,Oe,ae,ne,1-Fe),e.scale(1/Ke,1/sr),e.rotate(-we),e.translate(-ct,-pt)}break}case"Z":e.closePath();break;default:break}if(T==="Z")s=u;else{var Jr=d.length;s=[d[Jr-2],d[Jr-1]]}}}}function Sp(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function Vm(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=Rm(t,n):r?e=t:a&&(e=n)}return e}function Hm(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,f.each)(i,function(a){var o=Vm(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,f.min)(e),minY:(0,f.min)(t),maxX:(0,f.max)(r),maxY:(0,f.max)(n)}}function Zm(i,e){return!i||!e||!wd(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var Km=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){Sp(this,t)},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),qf(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,f.each)(t,function(T){var O=T.cfg.cacheCanvasBBox;O&&T.cfg.isInView&&(r.push(O.minX,O.maxX),n.push(O.minY,O.maxY))});var a=null;if(r.length){var o=(0,f.min)(r),s=(0,f.max)(r),u=(0,f.min)(n),l=(0,f.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:l,width:s-o,height:l-u};var c=this.cfg.canvas;if(c){var d=c.getViewRange();this.set("isInView",wd(a,d))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),qf(t,this),this._applyClip(t,this.getClip()),Vh(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(ks),Mp=Km,$m=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return Mp},e.prototype.onCanvasChange=function(t){Sp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=Xo(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,l=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:l,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),qf(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!wd(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),qf(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=wd(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,f.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,f.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(oc),mu=$m,Qm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,l=s.y,c=s.r,d=o/2,T=dp(u,l,t,r);return a&&n?T<=c+d:a?T<=c:n?T>=c-d&&T<=c+d:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(mu),qm=Qm;function th(i,e,t,r){return i/(t*t)+e/(r*r)}var Jm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,l=s.x,c=s.y,d=s.rx,T=s.ry,O=(t-l)*(t-l),F=(r-c)*(r-c);return a&&n?th(O,F,d+u,T+u)<=1:a?th(O,F,d,T)<=1:n?th(O,F,d-u,T-u)>=1&&th(O,F,d+u,T+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,l=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(l,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(mu),ty=Jm;function _p(i){return i instanceof HTMLElement&&(0,f.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var ey=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,f.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):_p(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,l=r.sy,c=r.swidth,d=r.sheight,T=r.img;(T instanceof Image||_p(T))&&(!(0,f.isNil)(u)&&!(0,f.isNil)(l)&&!(0,f.isNil)(c)&&!(0,f.isNil)(d)?t.drawImage(T,u,l,c,d,n,a,o,s):t.drawImage(T,n,a,o,s))},e}(mu),ry=ey;function dc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),l=Math.min(e,r),c=Math.max(e,r),d=n/2;return a>=s-d&&a<=u+d&&o>=l-d&&o<=c+d?Do.pointToLine(i,e,t,r,a,o)<=n/2:!1}var ny=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&Xh(this,t,a,o,r,n),u&&jh(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,l=s.y1,c=s.x2,d=s.y2;return dc(u,l,c,d,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,l=r.endArrow,c={dx:0,dy:0},d={dx:0,dy:0};u&&u.d&&(c=Qc(n,a,o,s,r.startArrow.d)),l&&l.d&&(d=Qc(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-d.dx,s-d.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Do.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Do.pointAt(n,a,o,s,t)},e}(mu),ay=ny,iy={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},oy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,f.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,f.isFunction)(a))s=a,u=s(r,n,o),u=Bo(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");wp(this,t,{path:r},n)},e.Symbols=iy,e}(mu),sy=oy;function Cp(i,e,t){var r=dr();return i.createPath(r),r.isPointInPath(e,t)}var uy=1e-6;function Kh(i){return Math.abs(i)<uy?0:i<0?-1:1}function ly(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function Tp(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(ly(o,s,[e,t]))return!0;Kh(o[1]-t)>0!=Kh(s[1]-t)>0&&Kh(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Sd(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var l={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return dp(l.x,l.y,o,s)<=a/2}var cy=ft;function fy(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function dy(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],l=u.currentPoint,c=u.params,d=u.prePoint,T=u.box;if(!(T&&!$c(T.x-o,T.y-o,T.width+e,T.height+e,t,r))){switch(u.command){case"L":case"Z":a=dc(d[0],d[1],l[0],l[1],e,t,r);break;case"Q":var O=Zc.pointDistance(d[0],d[1],c[1],c[2],c[3],c[4],t,r);a=O<=e/2;break;case"C":var F=Se.pointDistance(d[0],d[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=F<=e/2;break;case"A":var K=u.arcParams,rt=K.cx,lt=K.cy,ct=K.rx,pt=K.ry,_t=K.startAngle,jt=K.endAngle,ae=K.xRotation,ne=[t,r,1],we=ct>pt?ct:pt,Fe=ct>pt?1:ct/pt,Oe=ct>pt?pt/ct:1,Ke=cy(null,[["t",-rt,-lt],["r",-ae],["s",1/Fe,1/Oe]]);Ti.transformMat3(ne,ne,Ke),a=Sd(0,0,we,_t,jt,e,ne[0],ne[1]);break;default:break}if(a)break}}return a}function hy(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var eh=(0,m.__assign)({hasArc:fy,extractPolygons:hy,isPointInStroke:dy},M);function Ap(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=Tp(a,e,t),r)break}return r}var vy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Bo(t);var r=eh.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=En(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();Xh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();jh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),l=!1;if(n){var c=this.getTotalLength();l=eh.isPointInStroke(s,o,t,r,c)}if(!l&&a)if(u)l=Cp(this,t,r);else{var d=this.attr("path"),T=eh.extractPolygons(d);l=Ap(T.polygons,t,r)||Ap(T.polylines,t,r)}return l},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");wp(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,f.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,f.each)(r,function(c,d){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=d)});var s=o[a];if((0,f.isNil)(s)||(0,f.isNil)(a))return null;var u=s.length,l=o[a+1];return Se.pointAt(s[u-2],s[u-1],l[1],l[2],l[3],l[4],l[5],l[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",eh.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,l=this.get("curve");if(l){if((0,f.each)(l,function(c,d){s=l[d+1],u=c.length,s&&(t+=Se.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,f.each)(l,function(c,d){s=l[d+1],u=c.length,s&&(a=[],a[0]=r/t,o=Se.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(mu),$h=vy;function Op(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],l=i[o+1][0],c=i[o+1][1];if(dc(s,u,l,c,e,t,r))return!0}if(n){var d=i[0],T=i[a-1];if(dc(d[0],d[1],T[0],T[1],e,t,r))return!0}return!1}var py=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=Op(s,o,t,r,!0)),!u&&a&&(u=Tp(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(mu),gy=py,my=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],l=n[0][1],c=n[s-1][0],d=n[s-1][1];a&&Xh(this,t,n[1][0],n[1][1],u,l),o&&jh(this,t,n[s-2][0],n[s-2][1],c,d)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return Op(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],l=n[0][1],c=n[s-1][0],d=n[s-1][1];if(a&&a.d){var T=Qc(u,l,n[1][0],n[1][1],a.d);u+=T.dx,l+=T.dy}if(o&&o.d){var T=Qc(n[s-2][0],n[s-2][1],c,d,o.d);c-=T.dx,d-=T.dy}t.beginPath(),t.moveTo(u,l);for(var O=0;O<s-1;O++){var F=n[O];t.lineTo(F[0],F[1])}t.lineTo(c,d)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,f.isNil)(r)?(this.set("totalLength",kt.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,f.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Do.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,f.each)(t,function(u,l){t[l+1]&&(o=[],o[0]=n/r,s=Do.length(u[0],u[1],t[l+1][0],t[l+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(mu),yy=my;function by(i,e,t,r,n,a,o){var s=n/2;return $c(i-s,e-s,t,n,a,o)||$c(i+t-s,e-s,n,r,a,o)||$c(i+s,e+r-s,t,n,a,o)||$c(i-s,e+s,n,r,a,o)}function xy(i,e,t,r,n,a,o,s){var u=a/2;return dc(i+n,e,i+t-n,e,a,o,s)||dc(i+t,e+n,i+t,e+r-n,a,o,s)||dc(i+t-n,e+r,i+n,e+r,a,o,s)||dc(i,e+r-n,i,e+n,a,o,s)||Sd(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Sd(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Sd(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Sd(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var Ey=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,l=s.y,c=s.width,d=s.height,T=s.radius;if(T){var F=!1;return n&&(F=xy(u,l,c,d,T,o,t,r)),!F&&a&&(F=Cp(this,t,r)),F}else{var O=o/2;if(a&&n)return $c(u-O,l-O,c+O,d+O,t,r);if(a)return $c(u,l,c,d,t,r);if(n)return by(u,l,c,d,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var l=Ym(u),c=l[0],d=l[1],T=l[2],O=l[3];t.moveTo(n+c,a),t.lineTo(n+o-d,a),d!==0&&t.arc(n+o-d,a+d,d,-Math.PI/2,0),t.lineTo(n+o,a+s-T),T!==0&&t.arc(n+o-T,a+s-T,T,0,Math.PI/2),t.lineTo(n+O,a+s),O!==0&&t.arc(n+O,a+s-O,O,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(mu),wy=Ey,Sy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Rn(t)},e.prototype._setText=function(t){var r=null;(0,f.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,l=a.fontSize*1,c=this._getSpaceingY(),d=pr(a.text,a.fontSize,a.lineHeight),T;(0,f.each)(r,function(O,F){T=u+F*(c+l)-d+l,o==="middle"&&(T+=d-l-(d-l)/2),o==="top"&&(T+=d-l),(0,f.isNil)(O)||(n?t.fillText(O,s,T):t.strokeText(O,s,T))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,f.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,f.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,f.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(mu),My=Sy;function _y(i,e){if(e){var t=yo(e);return Ws(t,i)}return i}function Ip(i,e,t){var r=i.getTotalMatrix();if(r){var n=_y([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function Dp(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!Ec(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=Ip(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Pp(i,e,t){if(!Dp(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Pp(s,e,t);else if(Dp(s,e,t)){var u=s,l=Ip(s,e,t),c=l[0],d=l[1];u.isInShape(c,d)&&(r=s)}if(r)break}return r}var Cy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return Mp},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Nm();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Pp(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=Hm(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=Zm(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,f.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),qf(t,this),Vh(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),qf(t,this),Xm(this,n,a),Vh(t,n,a),t.restore()):r.length&&Ep(r),(0,f.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,f.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Vc),_l=Cy,NS="0.5.12",Qh={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},ui={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},RS=null;function $s(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Lp(i){var e=Qh[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=$s(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function Np(i,e){var t=i.get("el"),r=(0,f.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function Ty(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function Ay(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Md(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function _d(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){Lp(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Rp(i,e){e.forEach(function(t){t.draw(i)})}function kp(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,l=u&&u.parentNode;u&&l&&l.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")Ty(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&Np(i,function(d,T){return c.indexOf(d)-c.indexOf(T)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Md(i):e==="clip"?_d(i,r):e==="attr"||e==="add"&&i.draw(r)}}var Oy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=$s("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){kp(this,t)},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),_d(this,t),this.createPath(t),r.length&&Rp(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,f.each)(r||n,function(o,s){ui[s]&&a.setAttribute(ui[s],o)}),Md(this)},e}(ks),Bp=Oy,Iy=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return Bp},e.prototype.onCanvasChange=function(t){kp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=Xo(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,l=this.getHitLineWidth(),c=l/2,d=a-c,T=o-c,O=a+s+c,F=o+u+c;return{x:d,y:T,minX:d,minY:T,maxX:O,maxY:F,width:s+l,height:u+l}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Lp(this),_d(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,l=n.fillOpacity,c=n.strokeOpacity,d=n.lineWidth,T=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),l&&T.setAttribute(ui.fillOpacity,l)),this.canStroke&&d>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&T.setAttribute(ui.strokeOpacity,c),d&&T.setAttribute(ui.lineWidth,d))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(ui[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(ui[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(ui[r],"url(#"+o+")")}else a.setAttribute(ui[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,l=a.shadowColor;(o||s||u||l)&&Ay(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Md(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,l=document.elementFromPoint(s,u);return!!(l&&l.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(oc),Qs=Iy,Dy=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,f.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):ui[s]&&a.setAttribute(ui[s],o)})},e}(Qs),Py=Dy,Ly=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,f.each)(r||n,function(l,c){ui[c]&&a.setAttribute(ui[c],l)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Qs),Ny=Ly,Ry=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,f.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):ui[s]&&a.setAttribute(ui[s],o)})},e}(Qs),ky=Ry,By=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,f.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):ui[u]&&o.setAttribute(ui[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,f.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,f.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Qs),Fy=By,zy=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,f.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,f.isObject)(o)?t.addArrow(n,ui[s]):t.getDefaultArrow(n,ui[s]);a.setAttribute(ui[s],"url(#"+u+")")}else a.removeAttribute(ui[s]);else ui[s]&&a.setAttribute(ui[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Do.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Do.pointAt(n,a,o,s,t)},e}(Qs),Gy=zy,rh={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Fp={get:function(i){return rh[i]},register:function(i,e){rh[i]=e},remove:function(i){delete rh[i]},getAll:function(){return rh}},Uy=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,f.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,f.isFunction)(o)?s=o:s=Fp.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=Fp,e}(Qs),Wy=Uy,Yy=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,f.each)(r||a,function(s,u){if(u==="path"&&(0,f.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var l=(0,f.isObject)(s)?t.addArrow(a,ui[u]):t.getDefaultArrow(a,ui[u]);o.setAttribute(ui[u],"url(#"+l+")")}else o.removeAttribute(ui[u]);else ui[u]&&o.setAttribute(ui[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Qs),Xy=Yy,jy=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,f.each)(r||n,function(o,s){s==="points"&&(0,f.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):ui[s]&&a.setAttribute(ui[s],o)})},e}(Qs),Vy=jy,Hy=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,f.each)(r||n,function(o,s){s==="points"&&(0,f.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):ui[s]&&a.setAttribute(ui[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,f.isNil)(r)?(this.set("totalLength",kt.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,f.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Do.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,f.each)(t,function(u,l){t[l+1]&&(o=[],o[0]=n/r,s=Do.length(u[0],u[1],t[l+1][0],t[l+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Qs),Zy=Hy,Ky=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,$y=/[^\s,]+/gi;function Qy(i){var e=0,t=0,r=0,n=0;return(0,f.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function kS(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(Ky),each(i,function(e,t){if(e=e.match($y),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var qy=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,f.each)(r||a,function(l,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&ui[c]&&o.setAttribute(ui[c],l)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=Qy(s);(0,f.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var l=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return l.join(" ")},e}(Qs),Jy=qy,zp=.3,t1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},e1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},r1={left:"left",start:"left",center:"middle",right:"end",end:"end"},n1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,f.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Md(n):ui[u]&&o.setAttribute(ui[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=ou();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",e1[n]||"alphabetic"):t.setAttribute("alignment-baseline",t1[n]||"baseline"),t.setAttribute("text-anchor",r1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),l=u.length-1,c="";(0,f.each)(u,function(d,T){T===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-l+'em">'+d+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+d+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(l-1)/2+'em">'+d+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(l+zp)+'em">'+d+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(l-1)-zp)+'em">'+d+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+d+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Qs),a1=n1,i1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,o1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,s1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Gp(i){var e=i.match(s1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,f.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function u1(i,e){var t=i1.exec(i),r=(0,f.mod)((0,f.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,l=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",l),e.setAttribute("y2",c),e.innerHTML=Gp(n)}function l1(i,e){var t=o1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=Gp(o)}var c1=function(){function i(e){this.cfg={};var t=null,r=(0,f.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=$s("linearGradient"),u1(e,t)):(t=$s("radialGradient"),l1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),f1=c1,d1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},h1={x:"-40%",y:"-40%",width:"200%",height:"200%"},v1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=$s("filter");return(0,f.each)(h1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,f.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,f.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[d1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),p1=v1,g1=function(){function i(e,t){this.cfg={};var r=$s("marker"),n=(0,f.uniqueId)("marker_");r.setAttribute("id",n);var a=$s("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY",""+5)},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,f.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),Up=g1,m1=function(){function i(e){this.type="clip",this.cfg={};var t=$s("clipPath");this.el=t,this.id=(0,f.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),y1=m1,b1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,x1=function(){function i(e){this.cfg={};var t=$s("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=$s("image");t.appendChild(r);var n=(0,f.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=b1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),E1=x1,w1=function(){function i(e){var t=$s("defs"),r=(0,f.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new Up(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new f1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new Up(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new p1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new E1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new y1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),S1=w1,M1=function(i){(0,m.__extends)(e,i);function e(t){return i.call(this,(0,m.__assign)((0,m.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return Bp},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!Qh[a.tagName]){for(var o=a.parentNode;o&&!Qh[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=$s("svg"),r=new S1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&Np(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Md(this):t==="clip"?_d(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();_d(this,t),r.length&&Rp(t,r)},e}(Vc),Cd=M1,BS="0.5.6",_1=_(6767),Td=_.n(_1),nh=_(697234),ah=2,Wp=.16,C1=.05,T1=.05,A1=.15,Yp=5,Xp=4,O1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function jp(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-ah*e:Math.round(i.h)+ah*e:r=t?Math.round(i.h)+ah*e:Math.round(i.h)-ah*e,r<0?r+=360:r>=360&&(r-=360),r}function Vp(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-Wp*e:e===Xp?r=i.s+Wp:r=i.s+C1*e,r>1&&(r=1),t&&e===Yp&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function Hp(i,e,t){var r;return t?r=i.v+T1*e:r=i.v-A1*e,r>1&&(r=1),Number(r.toFixed(2))}function ih(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=(0,nh.Z)(i),n=Yp;n>0;n-=1){var a=r.toHsv(),o=(0,nh.Z)({h:jp(a,n,!0),s:Vp(a,n,!0),v:Hp(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=Xp;s+=1){var u=r.toHsv(),l=(0,nh.Z)({h:jp(u,s),s:Vp(u,s),v:Hp(u,s)}).toHexString();t.push(l)}return e.theme==="dark"?O1.map(function(c){var d=c.index,T=c.opacity,O=nh.Z.mix(e.backgroundColor||"#141414",t[d],T*100).toHexString();return O}):t}var qh={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},cs={},Jh={};Object.keys(qh).forEach(function(i){cs[i]=ih(qh[i]),cs[i].primary=cs[i][5],Jh[i]=ih(qh[i],{theme:"dark",backgroundColor:"#141414"}),Jh[i].primary=Jh[i][5]});var FS=cs.red,zS=cs.volcano,GS=cs.gold,US=cs.orange,WS=cs.yellow,YS=cs.lime,XS=cs.green,jS=cs.cyan,VS=cs.blue,HS=cs.geekblue,ZS=cs.purple,KS=cs.magenta,$S=cs.grey,$o=function(e,t,r){var n=Td()(e),a=Td()(t);return Td()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},I1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=$o(t,e,.05).rgb().toString(),a=$o(t,e,.1).rgb().toString(),o=$o(t,e,.2).rgb().toString(),s=$o(t,e,.4).rgb().toString(),u=$o(t,r,.02).rgb().toString(),l=$o(t,r,.05).rgb().toString(),c=$o(t,r,.1).rgb().toString(),d=$o(t,r,.2).rgb().toString(),T=$o(t,r,.3).rgb().toString(),O=ih(e,{theme:"default",backgroundColor:t}),F=Td()(e).hex().toLowerCase(),K=O.indexOf(F),rt=e;return K!==-1&&(rt=O[K+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:rt,highlightFill:o,disableStroke:T,disableFill:l,edgeMainStroke:T,edgeActiveStroke:e,edgeInactiveStroke:d,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:T,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:T,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:rt,comboHighlightFill:u,comboDisableStroke:d,comboDisableFill:l}},D1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=$o(t,e,.2).rgb().toString(),a=$o(t,e,.3).rgb().toString(),o=$o(t,e,.6).rgb().toString(),s=$o(t,e,.8).rgb().toString(),u=$o(t,r,.2).rgb().toString(),l=$o(t,r,.25).rgb().toString(),c=$o(t,r,.3).rgb().toString(),d=$o(t,r,.4).rgb().toString(),T=$o(t,r,.5).rgb().toString(),O=ih(e,{theme:"dark",backgroundColor:t}),F=Td()(e).hex().toLowerCase(),K=O.indexOf(F),rt=e;return K!==-1&&(rt=O[K+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:T,disableFill:l,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:d,comboMainFill:l,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:d,comboInactiveFill:l,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:rt,comboHighlightFill:l,comboDisableStroke:d,comboDisableFill:u}},tv=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?I1(e,t,"rgb(150, 150, 150)"):D1(e,t,"#777")},P1=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(tv(o,t,r,n))}),a},L1="rgb(95, 149, 255)",N1="rgb(255, 255, 255)",Zp="rgb(0, 0, 0)",ai=tv(L1,N1),qc={version:"0.8.13",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:ai.mainStroke,fill:ai.mainFill},size:20,color:ai.mainStroke,linkPoints:{size:8,lineWidth:1,fill:ai.activeFill,stroke:ai.activeStroke}},nodeStateStyles:{active:{fill:ai.activeFill,stroke:ai.activeStroke,lineWidth:2,shadowColor:ai.mainStroke,shadowBlur:10},selected:{fill:ai.selectedFill,stroke:ai.selectedStroke,lineWidth:4,shadowColor:ai.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:ai.highlightFill,stroke:ai.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:ai.inactiveFill,stroke:ai.inactiveStroke,lineWidth:1},disable:{fill:ai.disableFill,stroke:ai.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Zp,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ai.edgeMainStroke,lineAppendWidth:2},color:ai.edgeMainStroke},edgeStateStyles:{active:{stroke:ai.edgeActiveStroke,lineWidth:1},selected:{stroke:ai.edgeSelectedStroke,lineWidth:2,shadowColor:ai.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ai.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:ai.edgeInactiveStroke,lineWidth:1},disable:{stroke:ai.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Zp,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:ai.comboMainFill,lineWidth:1,stroke:ai.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:ai.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:ai.comboActiveStroke,lineWidth:1,fill:ai.comboActiveFill},selected:{stroke:ai.comboSelectedStroke,lineWidth:2,fill:ai.comboSelectedFill,shadowColor:ai.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ai.comboHighlightStroke,lineWidth:2,fill:ai.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:ai.comboInactiveStroke,fill:ai.comboInactiveFill,lineWidth:1},disable:{stroke:ai.comboDisableStroke,fill:ai.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function oh(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var R1=as.cloneEvent,k1=as.isViewportChanged,B1=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,f.wrapBehavior)(this,"onCanvasEvents"),l=(0,f.wrapBehavior)(this,"onExtendEvents"),c=(0,f.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(oh(s,"wheel",c)),typeof window!="undefined"&&(a.push(oh(window,"keydown",l)),a.push(oh(window,"keyup",l)),a.push(oh(window,"focus",l))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,f.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},l=n.get("group"),c=l.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),k1(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var d=e.getItemRoot(o);if(!d){n.emit(s,t);return}var T=d.get("item");if(!T.destroyed){var O=T.getType();if(t.target=o,t.item=T,t.canvasX===t.x&&t.canvasY===t.y){var F=n.getCanvasByPoint(t.x,t.y);t.canvasX=F.x,t.canvasY=F.y}t.name&&!t.name.includes(":")?(n.emit("".concat(O,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,O)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,f.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=R1(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,f.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(lp),F1=B1,qa=_(483360),z1=_(981746),sh=_.n(z1),Kp=as.traverseTree,G1=function(e,t){var r;return e?(0,f.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},U1=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var l=0;for(o=0;o<e.length;o++){var c=r.length,d=n[o],T=d.length;r[o*4+2]=c,r[o*4+3]=d.length,l=Math.max(l,d.length);for(var O=0;O<T;++O){var F=d[O];r.push(+F)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:l}},W1=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var l=t[s];a[o[l.source]].push(o[l.target]),a[o[l.source]].push(r(l)),a[o[l.target]].push(o[l.source]),a[o[l.target]].push(r(l))}var c=0;for(s=0;s<e.length;s++){var d=n.length,T=a[s],O=T.length;n[s*4+2]=d,n[s*4+3]=O/2,c=Math.max(c,O/2);for(var F=0;F<O;++F){var K=T[F];n.push(+K)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},Y1=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var l=e[u];s[l.id]=u,a.push(l.x),a.push(l.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var d=0;for(u=0;u<e.length;u++){var T=a.length,O=o[u],F=O.length;a[u*4+2]=T+1048576*F/4,a[u*4+3]=0,d=Math.max(d,F/4);for(var K=0;K<F;++K){var rt=O[K];a.push(+rt)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:d}},X1=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},j1=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(l,c){if(t.push(l[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},V1=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;Kp(e,function(d){return u++,d.x>a.x&&(a.x=d.x),d.x<n.x&&(n.x=d.x),d.y>a.y&&(a.y=d.y),d.y<n.y&&(n.y=d.y),!0});var l=Math.PI*2/u,c=a[s]-n[s];return c===0||Kp(e,function(d){var T=(d[s]-n[s])/c*(Math.PI*2-l)+l,O=Math.abs(o==="x"?d.x-e.x:d.y-e.y);return d.x=O*Math.cos(T),d.y=O*Math.sin(T),!0}),e},$p=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},H1=(0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)({},as),A),E),D),Cl=H1,Z1=Cl.radialLayout,K1=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=sh()[t.type](r,t.config);return Z1(n),n};return}this.layoutMethod=function(r){return sh()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),$1=K1;(0,qa.registerLayout)("grid",qa.GridLayout),(0,qa.registerLayout)("random",qa.RandomLayout),(0,qa.registerLayout)("force",qa.ForceLayout),(0,qa.registerLayout)("circular",qa.CircularLayout),(0,qa.registerLayout)("dagre",qa.DagreLayout),(0,qa.registerLayout)("dagreCompound",qa.DagreCompoundLayout),(0,qa.registerLayout)("radial",qa.RadialLayout),(0,qa.registerLayout)("concentric",qa.ConcentricLayout),(0,qa.registerLayout)("mds",qa.MDSLayout),(0,qa.registerLayout)("fruchterman",qa.FruchtermanLayout),(0,qa.registerLayout)("fruchterman-gpu",qa.FruchtermanGPULayout),(0,qa.registerLayout)("gForce",qa.GForceLayout),(0,qa.registerLayout)("force2",qa.Force2Layout),(0,qa.registerLayout)("gForce-gpu",qa.GForceGPULayout),(0,qa.registerLayout)("comboForce",qa.ComboForceLayout),(0,qa.registerLayout)("comboCombined",qa.ComboCombinedLayout),(0,qa.registerLayout)("forceAtlas2",qa.ForceAtlas2Layout);var Q1=function(e,t){t.isCustomLayout=!0,qa.Layouts[e]=(0,qa.registerLayout)(e,t)},q1=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),J1=q1,tb=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,l=s.data.type;switch(l){case n.RUN:{var c=s.data,d=c.nodes,T=c.edges,O=c.layoutCfg,F=O===void 0?{}:O,K=F.type,rt=layout.getLayoutByName(K);if(!rt){this.postMessage({type:n.ERROR,message:"layout ".concat(K," not found")});break}var lt;F.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:d}),lt==null||lt.destroy()},lt=new rt(F),lt.init({nodes:d,edges:T}),lt.execute();break}case n.GPURUN:{var ct=s.data,pt=ct.nodes,T=ct.edges,_t=ct.layoutCfg,F=_t===void 0?{}:_t,jt=ct.canvas,K=F.type,rt=layout.getLayoutByName(K);if(!rt){this.postMessage({type:n.ERROR,message:"layout ".concat(K," not found")});break}if(K.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(K," does not support GPU")});break}var ae=new rt(F);ae.init({nodes:pt,edges:T}),ae.executeWithWorker(jt,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new J1(t,e);return r},Jf={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function ev(i){return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ev(i)}var Qp=function(e){return setTimeout(e,16)},qp=function(e){return clearTimeout(e)},uh={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||Qp;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||qp;return t(e)}},eb=["fruchterman","gForce"],rb=["force","grid","circular"],nb=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=tb(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(uh.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(uh.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,m.__awaiter)(n,void 0,void 0,function(){var s,u,l,c,d,K,T,O,F,K,rt;return(0,m.__generator)(this,function(lt){switch(lt.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(Jp(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),as.isForce(u)?(l=t.onTick,c=t.animate,d=c===void 0&&(u==="force"||u==="force2"),K=function(){l&&l(),(c||d)&&s.refreshPositions()},t.tick=K):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),T=!1;try{O=new qa.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=O}catch(ct){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return T=O.enableTick,T&&(F=t.onTick,K=function(){F&&F(),s.refreshPositions()},O.tick=K),rt=this.filterLayoutData(this.data,t),sb(rt,r),O.init(rt),s.emit("beforesublayout",{type:u}),[4,O.execute()];case 1:return lt.sent(),O.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,m.__awaiter)(n,void 0,void 0,function(){var s,u,l,c,d,T,O;return(0,m.__generator)(this,function(F){switch(F.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},as.isForce(u)&&(l=r.onTick,c=r.animate,d=c===void 0&&(u==="force"||u==="force2"),T=function(){l==null||l(),(c||d)&&s.refreshPositions()},r.tick=T),O=this.filterLayoutData(this.data,r),t.init(O),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return F.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var l=a.get("width"),c=a.get("height"),d={};Object.assign(d,{width:l,height:c,center:[l/2,c/2]},this.layoutCfg),this.layoutCfg=d;var T=d.type,O=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(jt){var ae;return O=!!(!((ae=jt.nodes)===null||ae===void 0)&&ae.length)||O});var F=this.destoryLayoutMethods();a.emit("beforelayout");var K=Promise.resolve();O&&T&&(F==null?void 0:F.length)===1&&F[0]===T?this.tweakInit():K=this.initPositions(d.center,s);var rt=this.initPositions(d.center,u);rt.then(),this.isGPU=tg(d,T);var lt=d.onLayoutEnd,ct=d.layoutEndFormatted,pt=d.adjust;if(ct||(d.layoutEndFormatted=!0,d.onAllLayoutEnd=function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(jt){switch(jt.label){case 0:return lt&&lt(s),this.refreshLayout(),pt&&d.pipes?[4,this.adjustPipesBox(this.data,pt)]:[3,2];case 1:jt.sent(),this.refreshLayout(),jt.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),d.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var _t=!1;return d.type?(_t=!0,K=K.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(jt){switch(jt.label){case 0:return[4,this.execLayoutMethod(d,0)];case 1:return[2,jt.sent()]}})})})):d.pipes&&(_t=!0,d.pipes.forEach(function(jt,ae){K=K.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(ne){switch(ne.label){case 0:return[4,this.execLayoutMethod(jt,ae)];case 1:return[2,ne.sent()]}})})})})),_t?K.then(function(){d.onAllLayoutEnd&&d.onAllLayoutEnd(),t&&t()}).catch(function(jt){console.warn("graph layout failed,",jt)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var d=c.x,T=c.y;!isNaN(d)&&!isNaN(T)&&(s[c.id]={x:d,y:T},c.mass=c.mass||2)}),o.forEach(function(c){var d=c.source,T=c.target,O=s[d],F=s[T];!O&&F?s[d]={x:F.x+(Math.random()-.5)*80,y:F.y+(Math.random()-.5)*80}:!F&&O&&(s[T]={x:O.x+(Math.random()-.5)*80,y:O.y+(Math.random()-.5)*80})});var u=n.get("width"),l=n.get("height");a.forEach(function(c){var d=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:l/2+(Math.random()-.5)*20};c.x=d.x,c.y=d.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,m.__awaiter)(n,void 0,void 0,function(){var s,u,l,c,d,T,O;return(0,m.__generator)(this,function(F){switch(F.label){case 0:return s=this,u=s.layoutCfg,l=s.data,c=u.preset,!(c!=null&&c.type)||!qa.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(d=tg(c,c.type),T=d?"".concat(c.type,"-gpu"):c.type,O=new qa.Layouts[T](c),delete u.preset,O.init(l),[4,O.execute()]);case 1:return F.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),l=this.workerData;if(!u)return!1;l.requestId=null,l.requestId2=null,l.currentTick=null,l.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),d=!1;if(o.type)d=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){d=!0;for(var T=function(lt){c=c.then(function(){return n.runWebworker(u,t,lt)})},O=0,F=o.pipes;O<F.length;O++){var K=F[O];T(K)}}return d&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(rt){console.error("layout failed",rt)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,l=s.edges,c=document.createElement("canvas"),d=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,T=ib(n,function(F){return typeof F!="function"});if(!d)t.postMessage({type:Jf.RUN,nodes:u,edges:l,layoutCfg:T});else{var O=c.transferControlToOffscreen();T.type="".concat(T.type,"-gpu"),t.postMessage({type:Jf.GPURUN,nodes:u,edges:l,layoutCfg:T,canvas:O},[O])}return new Promise(function(F,K){t.onmessage=function(rt){a.handleWorkerMessage(F,K,rt,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,l=s.workerData,c=n.data,d=c.type,T=function(){o.onTick&&o.onTick()};switch(d){case Jf.TICK:l.currentTick=c.currentTick,l.currentTickData=c,l.requestId||(l.requestId=uh.requestAnimationFrame(function(){rv(a,c),u.refreshPositions(),T(),c.currentTick===c.totalTicks?t():l.currentTick===c.totalTicks&&(l.requestId2=uh.requestAnimationFrame(function(){rv(a,l.currentTickData),u.refreshPositions(),l.requestId2=null,T(),t()})),l.requestId=null}));break;case Jf.END:l.currentTick==null&&(rv(a,c),t());break;case Jf.GPUEND:l.currentTick==null&&(ob(a,c),t());break;case Jf.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,m.__rest)(t,["disableTriggerLayout"]),l=(0,f.mix)({},this.layoutCfg,u);if(this.layoutCfg=l,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),d=!1;(o==null?void 0:o.length)===1?(d=!0,c=c.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(T){switch(T.label){case 0:return[4,this.updateLayoutMethod(o[0],l)];case 1:return[2,T.sent()]}})})})):o!=null&&o.length&&(d=!0,o.forEach(function(T,O){var F=l.pipes[O];c=c.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(K){switch(K.label){case 0:return[4,this.updateLayoutMethod(T,F)];case 1:return[2,K.sent()]}})})})})),d&&c.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd()}).catch(function(T){console.warn("layout failed",T)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),rb.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(F){return Math.max(F.height,F.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),l=u.groupNodes,c=u.layoutNodes,d=(0,f.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(O,F){var K,rt,lt,ct=O.x-((K=d[F])===null||K===void 0?void 0:K.x),pt=O.y-((rt=d[F])===null||rt===void 0?void 0:rt.y);(lt=l[F])===null||lt===void 0||lt.forEach(function(_t){_t.x+=ct,_t.y+=pt})}),a()};var T=new qa.Layouts[r](s);T.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(up),ab=nb;function rv(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function ib(i,e){var t={};return i&&ev(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function ob(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function sb(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function Jp(i){return eb.includes(i)}function tg(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,$p().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!Jp(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Ad,nv,eg,av;function ub(){Ad=document.createElement("table"),nv=document.createElement("tr"),eg=/^\s*<(\w+|!)[^>]*>/,av={tr:document.createElement("tbody"),tbody:Ad,thead:Ad,tfoot:Ad,td:nv,th:nv,"*":document.createElement("div")}}function vo(i){Ad||ub();var e=eg.test(i)&&RegExp.$1;(!e||!(e in av))&&(e="*");var t=av[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var lb=function(e){var t=e.clone();return cb(e,t),t},cb=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var l=t.get("children")[u];i(s,l)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},rg=ft,fb="svg",db=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new ab(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new F1(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===fb)u=new Cd({container:t,width:a,height:o});else{var l={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(l.pixelRatio=c,window.devicePixelRatio=c),u=new _l(l)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,f.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,m.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,m.__generator)(this,function(l){switch(l.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var d=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=d,r.fill(),c("")}})];case 1:return l.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,l=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),d=c.getRenderer(),T=s||c.get("el"),O="";t||(t="image/png"),setTimeout(function(){return(0,m.__awaiter)(u,void 0,void 0,function(){var F,K,rt,lt,ct,pt,_t,jt,ae,ne;return(0,m.__generator)(this,function(we){switch(we.label){case 0:return d!=="svg"?[3,1]:(F=T.cloneNode(!0),K=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),rt=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",K),rt.replaceChild(F,rt.documentElement),lt=new XMLSerializer().serializeToString(rt),O="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(lt)),[3,4]);case 1:return ct=void 0,pt=T.getContext("2d"),_t=a||this.get("width"),jt=o||this.get("height"),ae=void 0,l?[4,this.downloadImageWatermark(l,pt,_t,jt)]:[3,3];case 2:we.sent(),we.label=3;case 3:if(r){ne=typeof window!="undefined"?window.devicePixelRatio:1;try{ct=pt.getImageData(0,0,_t*ne,jt*ne),ae=pt.globalCompositeOperation,pt.globalCompositeOperation="destination-over",pt.fillStyle=r,pt.fillRect(0,0,_t,jt)}catch(Fe){console.error("Download image failed. Out of memory at ImageData creation")}}O=T.toDataURL(t),r&&(pt.clearRect(0,0,_t,jt),pt.putImageData(ct,0,0),pt.globalCompositeOperation=ae),we.label=4;case 4:return n&&n(O),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),l=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",l);c.replaceChild(u,c.documentElement);var d=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(d))}else{var T=void 0,O=o.getContext("2d"),F=Math.max(this.get("width"),500),K=Math.max(this.get("height"),500),rt=void 0;if(r){var lt=typeof window!="undefined"&&window.devicePixelRatio||1;try{T=O.getImageData(0,0,F*lt,K*lt),rt=O.globalCompositeOperation,O.globalCompositeOperation="destination-over",O.fillStyle=r,O.fillRect(0,0,F,K)}catch(ct){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(O.clearRect(0,0,F,K),O.putImageData(T,0,0),O.globalCompositeOperation=rt)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),l=vo('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,d=n?n.padding:void 0;d?(0,f.isNumber)(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var T=o+d[0]+d[2],O=s+d[1]+d[3],F={container:l,height:T,width:O,quickHit:!0},K=u==="svg"?new Cd(F):new _l(F),rt=this.get("group"),lt=rt.clone(),ct=(0,f.clone)(lt.getMatrix());ct||(ct=[1,0,0,0,1,0,0,0,1]);var pt=(a.maxX+a.minX)/2,_t=(a.maxY+a.minY)/2;ct=rg(ct,[["t",-pt,-_t],["t",s/2+d[3],o/2+d[0]]]),lt.resetMatrix(),lt.setMatrix(ct),K.add(lt);var jt=K.get("el"),ae="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var ne=jt.cloneNode(!0),we=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Fe=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",we);Fe.replaceChild(ne,Fe.documentElement);var Oe=new XMLSerializer().serializeToString(Fe);ae="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(Oe))}else{var Ke=void 0,sr=jt.getContext("2d"),Jr=void 0;if(c){var Tn=typeof window!="undefined"?window.devicePixelRatio:1;try{Ke=sr.getImageData(0,0,O*Tn,T*Tn),Jr=sr.globalCompositeOperation,sr.globalCompositeOperation="destination-over",sr.fillStyle=c,sr.fillRect(0,0,O,T)}catch(vn){console.error("Download image failed. Out of memory at ImageData creation")}}ae=jt.toDataURL(r),c&&(sr.clearRect(0,0,O,T),sr.putImageData(Ke,0,0),sr.globalCompositeOperation=Jr)}t&&t(ae)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,l=this.get("renderer"),c=vo('<div id="virtual-image"></div>'),d=document.querySelector(".g6-graph-watermarker"),T=n?n.backgroundColor:void 0,O=n?n.padding:void 0;O?(0,f.isNumber)(O)&&(O=[O,O,O,O]):O=[0,0,0,0];var F=s+O[0]+O[2],K=u+O[1]+O[3];if(d){var rt=this.get("graphWaterMarker").cfg||{},lt=rt.width,ct=rt.height;F=Math.ceil(F/ct)*ct,K=Math.ceil(K/lt)*lt}var pt={container:c,height:F,width:K},_t=l==="svg"?new Cd(pt):new _l(pt),jt=this.get("group"),ae=lb(jt),ne=(0,f.clone)(ae.getMatrix());ne||(ne=[1,0,0,0,1,0,0,0,1]);var we=(o.maxX+o.minX)/2,Fe=(o.maxY+o.minY)/2;ne=rg(ne,[["t",-we,-Fe],["t",u/2+O[3],s/2+O[0]]]),ae.resetMatrix(),ae.setMatrix(ne),_t.add(ae);var Oe=_t.get("el");r||(r="image/png"),this.asyncToDataUrl(r,T,function(Ke){var sr=document.createElement("a"),Jr=(t||"graph")+(l==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Ke,l,sr,Jr);var Tn=document.createEvent("MouseEvents");Tn.initEvent("click",!1,!1),sr.dispatchEvent(Tn)},K,F,Oe)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var l=(t||"graph")+(u==="svg"?".svg":r.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(r,n,function(d){a.dataURLToImage(d,u,c,l);var T=document.createEvent("MouseEvents");T.initEvent("click",!1,!1),c.dispatchEvent(T)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var l=atob(o[1]),c=l.length,d=new Uint8Array(c);c--;)d[c]=l.charCodeAt(c);var T=new Blob([d],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(T,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(T)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=qc.waterMarkerImage);var n=this.get("container");(0,f.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,f.deepMix)({},qc.imageWaterMarkerConfig,r),s=o.width,u=o.height,l=o.compatible,c=o.image;if(!t){var d=l?n:document.querySelector(".g6-graph-watermarker");d&&(d.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var T={container:n,width:s,height:u,capture:!1},O=this.get("pixelRatio");O&&(T.pixelRatio=O,window.devicePixelRatio=O),a=new _l(T),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var F=a.get("context"),K=c.rotate,rt=c.x,lt=c.y;F.rotate(-K*Math.PI/180);var ct=new Image;ct.crossOrigin="anonymous",ct.src=t,ct.onload=function(){if(F.drawImage(ct,rt,lt,c.width,c.height),F.rotate(K*Math.PI/180),l)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var pt=document.querySelector(".g6-graph-watermarker");pt||(pt=document.createElement("div"),pt.className="g6-graph-watermarker"),pt.className="g6-graph-watermarker",a.destroyed||(pt.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(pt))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,f.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,f.deepMix)({},qc.textWaterMarkerConfig,r),s=o.width,u=o.height,l=o.compatible,c=o.text;if(!(t!=null&&t.length)){var d=l?n:document.querySelector(".g6-graph-watermarker");d&&(d.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var T={container:n,width:s,height:u,capture:!1},O=this.get("pixelRatio");O&&(T.pixelRatio=O,window.devicePixelRatio=O),a=new _l(T),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var F=a.get("context"),K=c.rotate,rt=c.fill,lt=c.fontFamily,ct=c.fontSize,pt=c.baseline,_t=c.x,jt=c.y,ae=c.lineHeight;F.rotate(-K*Math.PI/180),F.font="".concat(ct,"px ").concat(lt),F.fillStyle=rt,F.textBaseline=pt;for(var ne=(0,f.isString)(t)?[t]:t,we=ne.length-1;we>=0;we--)F.fillText(ne[we],_t,jt+we*ae);if(F.rotate(K*Math.PI/180),l)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var Fe=document.querySelector(".g6-graph-watermarker");Fe||(Fe=document.createElement("div"),Fe.className="g6-graph-watermarker"),Fe.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(Fe)}},e.prototype.destroy=function(){var t,r,n,a;(0,f.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var l=u.parentElement;l&&l.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(rp),ng=db,hb=Cl.radialLayout,iv=Cl.traverseTree,vb=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=sh()[t.type](r,t);return hb(n),n}:function(r){return sh()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,f.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var l=r.getModel();s.set("originAttrs",{x:l.x,y:l.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,f.each)(t.children||[],function(d){a.innerAddChild(d,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,f.each)(t.children||[],function(F){a.innerUpdateChild(F,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var l=s.length-1;l>=0;l--){var c=s[l].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(l,1))}}var d,T;o.get("originAttrs")&&(d=o.get("originAttrs").x,T=o.get("originAttrs").y);var O=o.getModel();n&&o.set("originAttrs",{x:O.x,y:O.y}),o.set("model",Object.assign(O,t.data)),(d!==t.x||T!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,f.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var l=this.getGroup().getCanvasBBox(),c=l.minX,d=l.maxX,T=l.minY,O=l.maxY,F={x:(c+d)/2,y:(T+O)/2};r==="begin"&&(F.x=c,F.y=T),this.translate(s.x-F.x,s.y-F.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,f.clone)(n.get("data"));var l={};iv(a,function(T){var O=T.children;if(!(O!=null&&O.length))return!0;for(var F=O.length-1;F>=0;F--){var K=r.findById(O[F].id),rt=K?!K.isVisible():O[F].visible===!1;rt&&(l[T.id]=l[T.id]||[],l[T.id].push({idx:F,child:O.splice(F,1)[0]}))}}),u=o?o(a,n.get("layout")):a,iv(u,function(T){var O=l[T.id];if(O!=null&&O.length)for(var F=O.length-1;F>=0;F--){var K=O[F],rt=K.idx,lt=K.child;T.children.splice(rt,0,lt)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var d=n.get("viewController");d.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,f.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var l=a.findById(r);l==null||l.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(d){var T=d.getModel().children||[];return!!T.find(function(O){return O.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),l=u&&u.children||[],c=e.indexOfChild(l,t);l.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,f.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){iv(t,function(s){var u=n.findById(s.id);if(u){var l=u.get("originAttrs"),c=u.get("model");if(l||(l={x:c.x,y:c.y},u.set("originAttrs",l)),r){var d=r(u,o,l,t);u.set("model",Object.assign(c,d))}else c.x=l.x+(s.x-l.x)*o,c.y=l.y+(s.y-l.y)*o}return!0}),(0,f.each)(n.get("removeList"),function(s){var u=s.getModel(),l=s.get("originAttrs"),c=s.get("to");u.x=l.x+(c.x-l.x)*o,u.y=l.y+(c.y-l.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,f.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,f.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,f.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(ng),pb=vb;function Va(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var gb=function(){function i(e){this._cfgs=(0,f.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,f.each)(r,function(a,o){var s=(0,f.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,f.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),Cs=gb,mb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ag="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",yb=function(i){mb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:ag,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||ag;a.includes("url(")||(a='url("'.concat(a,'")'));var o=vo(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=vo(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");Va(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;Va(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");Va(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(Cs),bb=yb,xb=_(738186),lh=_.n(xb),Eb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&lh()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var wb=function(i){Eb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=vo("<div class=".concat(t||"g6-component-contextmenu","></div>"));Va(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,f.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),l=s(t,u);(0,f.isString)(l)?o.innerHTML=l:o.innerHTML=l.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var d=function(we){c(we.target,t.item,u)};this.set("handleMenuClickWrapper",d),o.addEventListener("click",d)}var T=u.get("width"),O=u.get("height"),F=o.getBoundingClientRect(),K=this.get("offsetX")||0,rt=this.get("offsetY")||0,lt=u.getContainer().offsetTop,ct=u.getContainer().offsetLeft,pt=t.canvasX+ct+K,_t=t.canvasY+lt+rt;pt+F.width>T&&(pt=t.canvasX-F.width-K+ct),_t+F.height>O&&(_t=t.canvasY-F.height-rt+lt),Va(o,{top:"".concat(_t,"px"),left:"".concat(pt,"px"),visibility:"visible"});var jt=this.get("trigger")==="click",ae=function(we){if(jt){jt=!1;return}r.onMenuHide()};document.body.addEventListener("click",ae),this.set("handler",ae)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Va(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,f.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(Cs),Sb=wb,Mb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ov=function(){return ov=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ov.apply(this,arguments)},ig=Math.max,_b=ft,Cb="default",Tb="keyShape",Ab="delegate",og="svg",Ob=function(i){Mb(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,f.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,l=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=vo(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(l||u),`
      </div>`)),d=0,T=0,O=!1,F=0,K=0,rt=0,lt=0,ct=0,pt=0,_t=l||u?"mousedown":"dragstart";c.addEventListener(_t,function(we){var Fe,Oe;if(we.dataTransfer){var Ke=new Image;Ke.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(Oe=(Fe=we.dataTransfer).setDragImage)===null||Oe===void 0||Oe.call(Fe,Ke,0,0);try{we.dataTransfer.setData("text/html","view-port-minimap")}catch(Jr){we.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,we.target===c){var sr=c.style;F=parseInt(sr.left,10),K=parseInt(sr.top,10),rt=parseInt(sr.width,10),lt=parseInt(sr.height,10),!(rt>n[0]||lt>n[1])&&(pt=a.getZoom(),ct=t.get("ratio"),O=!0,d=we.clientX,T=we.clientY)}},!1);var jt=function(Fe){if(!(!O||(0,f.isNil)(Fe.clientX)||(0,f.isNil)(Fe.clientY))){var Oe=d-Fe.clientX,Ke=T-Fe.clientY;(F-Oe<0||F-Oe+rt>=n[0])&&(Oe=0),(K-Ke<0||K-Ke+lt>=n[1])&&(Ke=0),F-=Oe,K-=Ke,Va(c,{left:"".concat(F,"px"),top:"".concat(K,"px")}),a.translate(Oe*pt/ct,Ke*pt/ct),d=Fe.clientX,T=Fe.clientY}};!l&&!u&&c.addEventListener("drag",jt,!1);var ae=function(){O=!1,r.refresh=!0},ne=l||u?"mouseup":"dragend";c.addEventListener(ne,ae,!1),s.addEventListener("mouseleave",ae),s.addEventListener("mouseup",ae),(l||u)&&s.addEventListener("mousemove",jt,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,l=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),d=a.getPointByCanvas(u,l),T=this.get("viewport");T||this.initViewport();var O=(d.x-c.x)*t,F=(d.y-c.y)*t,K=c.x*t+r,rt=c.y*t+n,lt=K+O,ct=rt+F;K<0&&(O+=K,K=0),lt>o[0]&&(O=O-(lt-o[0])),rt<0&&(F+=rt,rt=0),ct>o[1]&&(F=F-(ct-o[1])),this.set("ratio",t);var pt="".concat(K,"px"),_t="".concat(rt,"px");Va(T,{left:pt,top:_t,width:"".concat(O,"px"),height:"".concat(F,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===og&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,f.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,f.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,f.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),l={x:o.centerX,y:o.centerY};a?l=Object.assign(u,l):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(l.x=o.minX,l.y=o.minY),a.attr(l),t.isVisible()?a.show():a.hide(),a.exist=!0;var d=t.getModel().depth;isNaN(d)||a.set("zIndex",d),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),l={x:o.centerX,y:o.centerY};a?(l=Object.assign(u,l),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(l.x=o.minX,l.y=o.minY),a.attr(l),t.isVisible()?a.show():a.hide(),a.exist=!0;var d=t.getModel().depth;isNaN(d)||a.set("zIndex",d),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,f.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,f.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,f.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:ov({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=vo("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,f.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=vo('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(d){d.preventDefault()}),u.addEventListener("dragover",function(d){d.preventDefault()});var l,c=r.get("renderer");c===og?l=new Cd({container:u,width:n[0],height:n[1]}):l=new _l({container:u,width:n[0],height:n[1]}),t.set("canvas",l),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Cb:this.updateGraphShapes();break;case Tb:this.updateKeyShapes();break;case Ab:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var l=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),d=r.getZoom()||1,T=c.width/d,O=c.height/d;Number.isFinite(l.width)&&(T=ig(l.width,T),O=ig(l.height,O)),T+=2*s,O+=2*s;var F=Math.min(n[0]/T,n[1]/O),K=[1,0,0,0,1,0,0,0,1],rt=0,lt=0;Number.isFinite(l.minX)&&(rt=-l.minX),Number.isFinite(l.minY)&&(lt=-l.minY);var ct=(n[0]-(T-2*s)*F)/2,pt=(n[1]-(O-2*s)*F)/2;K=_b(K,[["t",rt,lt],["s",F,F],["t",ct,pt]]),u.setMatrix(K),this.set("ratio",F),this.set("totaldx",ct+rt*F),this.set("totaldy",pt+lt*F),this.set("dx",ct),this.set("dy",pt),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(Cs),Ib=Ob,Db=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Vu(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Pb(i,e){return i.x*e.x+i.y*e.y}function sg(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Lb=function(i){Db(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(_t){(_t.x===null||!_t.y===null||_t.x===void 0||!_t.y===void 0)&&(s=!0),o[_t.id]=_t}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),l=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var d=r.getEdgeBundles();r.set("edgeBundles",d);for(var T=r.get("cycles"),O=r.get("iterations"),F=r.get("iterRate"),K=r.get("lambda"),rt=0;rt<T;rt++){for(var lt=function(jt){var ae=[];n.forEach(function(ne,we){if(ne.source!==ne.target){var Fe=o[ne.source],Oe=o[ne.target];ae[we]=r.getEdgeForces({source:Fe,target:Oe},we,u,K);for(var Ke=0;Ke<u+1;Ke++)c[we][Ke].x+=ae[we][Ke].x,c[we][Ke].y+=ae[we][Ke].y}})},ct=0;ct<O;ct++)lt(ct);K=K/2,u*=l,O*=F,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(_t,jt){_t.source!==_t.target&&(_t.type="polyline",_t.controlPoints=c[jt].slice(1,c[jt].length-1))});var pt=r.get("graph");pt.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var l;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],d=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+d.x),y:.5*(c.y+d.y)}),o[u].push({x:d.x,y:d.y});else{var T=0;!((l=o[u])===null||l===void 0)&&l.length?T=r.getEdgeLength(o[u]):T=Vu({x:c.x,y:c.y},{x:d.x,y:d.y});var O=T/(t+1),F=O,K=[{x:c.x,y:c.y}];o[u].forEach(function(rt,lt){if(lt!==0){for(var ct=Vu(rt,o[u][lt-1]);ct>F;){var pt=F/ct,_t={x:o[u][lt-1].x,y:o[u][lt-1].y};_t.x+=pt*(rt.x-o[u][lt-1].x),_t.y+=pt*(rt.y-o[u][lt-1].y),K.push(_t),ct-=F,F=O}F-=ct}}),K.push({x:d.x,y:d.y}),o[u]=K}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=Vu(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,l){(!s[l]||s[l]===void 0)&&(s[l]=[])}),n.forEach(function(u,l){var c=o[u.source],d=o[u.target];n.forEach(function(T,O){if(!(O<=l)){var F=o[T.source],K=o[T.target],rt=t.getBundleScore({source:c,target:d},{source:F,target:K});rt>=a&&(s[l].push(O),s[O].push(l))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Vu({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Vu({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Pb({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Vu(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=sg(r.source,t),a=sg(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Vu(o,s)/Vu(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),l=u/(Vu(t.source,t.target)*(n+1)),c=[{x:0,y:0}],d=1;d<n;d++){var T={x:0,y:0},O=o.getSpringForce({pre:s[r][d-1],cur:s[r][d],next:s[r][d+1]},l),F=o.getElectrostaticForce(d,r);T.x=a*(O.x+F.x),T.y=a*(O.y+F.y),c.push(T)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],l={x:0,y:0};return u.forEach(function(c){var d={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(d.x)>a||Math.abs(d.y)>a){var T=Vu(s[c][t],s[r][t]),O=1/T;l.x+=d.x*O,l.y+=d.y*O}}),l},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(Cs),Nb=Lb,Rb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sv=function(){return sv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},sv.apply(this,arguments)},ch=.05,ug={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},kb=function(i){Rb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,f.clone)(ug),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-ch:a=1/(1-ch);var l=r.get("maxR"),c=r.get("minR"),d=r.get("r");(d>(l||n.get("height"))&&a>1||d<(c||n.get("height")*.05)&&a<1)&&(a=1),d*=a,r.set("r",d),r.set("r2",d*d);var T=r.get("d");r.set("molecularParam",(T+1)*d),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-ch:o=1/(1-ch);var u=r.get("maxR"),l=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(l||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var d=r.get("d");r.set("molecularParam",(d+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var l=r.get("r");r.set("molecularParam",(o+1)*l);var c=r.get("delegate"),d=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,d)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),l=r.get("minD");if(s<u&&s>l){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),l=n.get("r"),c=n.get("r2"),d=n.get("d"),T=n.get("molecularParam"),O=a.getNodes(),F=O.length,K=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(K=n.get("cacheCenter"));var rt=n.get("delegateCenterDiff");rt&&(K.x+=rt.x,K.y+=rt.y),n.updateDelegate(K,l);for(var lt=0;lt<F;lt++){var ct=O[lt].getModel(),pt=ct.x,_t=ct.y;if(!(isNaN(pt)||isNaN(_t))){var jt=(pt-K.x)*(pt-K.x)+(_t-K.y)*(_t-K.y);if(!isNaN(jt)&&jt<c&&jt!==0){var ae=Math.sqrt(jt),ne=T*ae/(d*ae+l),we=(pt-K.x)/ae,Fe=(_t-K.y)/ae;if(ct.x=we*ne+K.x,ct.y=Fe*ne+K.y,s[ct.id]||(s[ct.id]={x:pt,y:_t,texts:[]}),o.push(ct),u&&2*ae<l)for(var Oe=O[lt],Ke=Oe.getContainer(),sr=Ke.getChildren(),Jr=sr.length,Tn=0;Tn<Jr;Tn++){var vn=sr[Tn];vn.get("type")==="text"&&(s[ct.id].texts.push({visible:vn.get("visible"),shape:vn}),vn.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,l=n[u];s.x=l.x,s.y=l.y;for(var c=l.texts.length,d=0;d<c;d++){var T=l.texts[d];T.shape.set("visible",T.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,l=t.minR,c=t.maxR,d=t.scaleDBy,T=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(l)||r.set("minR",l);var O=r.get("d"),F=r.get("r");if(r.set("molecularParam",(O+1)*F),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),d==="drag"||d==="wheel"||d==="unset"){r.set("scaleDBy",d),r.get("delegate").remove(),r.get("delegate").destroy();var K=r.get("dPercentText");K&&(K.remove(),K.destroy())}if(T==="drag"||T==="wheel"||T==="unset"){r.set("scaleRBy",T),r.get("delegate").remove(),r.get("delegate").destroy();var K=r.get("dPercentText");K&&(K.remove(),K.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),l=a.get("delegateStyle")||ug;s=u.addShape("circle",{attrs:sv({r:r/1.5,x:t.x,y:t.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(F){a.scaleRByWheel(F)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(F){a.set("dragging",!0),a.set("cacheCenter",{x:F.x,y:F.y}),a.set("dragPrePos",{x:F.x,y:F.y})}),s.on("drag",function(F){a.scaleRByDrag(F)}),s.on("dragend",function(F){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(F){n.scaleDByWheel(F)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(F){a.set("dragging",!0),a.set("cacheCenter",{x:F.x,y:F.y}),a.set("dragPrePos",{x:F.x,y:F.y})}),s.on("drag",function(F){n.scaleDByDrag(F)}),s.on("dragend",function(F){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),d=a.get("dPercentText"),T=t.y+r/1.5+16;if(!d||d.destroyed){var O=o.get("group");d=O.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:T,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",d)}else d.attr({text:"".concat(c,"%"),x:t.x,y:T})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(Cs),Bb=kb,Fb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lg=.05;typeof document!="undefined"&&lh()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var zb=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Gb=function(i){Fb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,f.isString)(a)&&(o=vo(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,f.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var l=this.get("handleClick");o.addEventListener("click",function(d){var T=zb(d).filter(function(F){return F.nodeName==="LI"});if(T.length!==0){var O=T[0].getAttribute("code");O&&(l?l(O,r):t.handleDefaultOperator(O))}});var c=this.get("position");c&&Va(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,l=s.redoStack,c=u.length,d=l.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),d===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,f.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(d){var T=o[d];T&&T.forEach(function(O){var F=t.findById(O.id);O.visible?t.showItem(F,!1):t.hideItem(F,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(d){var T=o[d];T&&T.forEach(function(O){var F=t.findById(O.id);delete O.id,t.updateItem(F,O,!1),F.getType()==="combo"&&t.updateCombo(F)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(d){var T=o[d];T&&T.forEach(function(O){var F=O.itemType;delete O.itemType,t.addItem(F,O,!1)})});break}case"add":Object.keys(o).forEach(function(d){var T=o[d];T&&T.forEach(function(O){t.removeItem(O.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(d){var T=o[d];T&&T.forEach(function(O){t.updateComboTree(O.id,O.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(d){var T=o[d];T&&T.forEach(function(O){t.updateComboTree(O.id,O.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var l=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(d){return d.id}).filter(function(d){return d!==l.id});t.createCombo(l,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,f.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var d=o[c];d&&d.forEach(function(T){var O=t.findById(T.id);T.visible?t.showItem(O,!1):t.hideItem(O,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var d=o[c];d&&d.forEach(function(T){var O=t.findById(T.id);delete T.id,t.updateItem(O,T,!1),O.getType()==="combo"&&t.updateCombo(O)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var d=o[c];d&&d.forEach(function(T){var O=T.itemType;delete T.itemType,t.addItem(O,T,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var d=o[c];d&&d.forEach(function(T){t.updateComboTree(T.id,T.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,l=u[u.length-1];t.uncombo(l.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-lg*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-lg*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,f.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(Cs),Ub=Gb,Wb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&lh()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Yb=function(i){Wb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=vo("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,f.isString)(a)&&(a=document.getElementById(a)),Va(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){Va(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,f.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Va(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){Va(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,l=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),d=this.get("fixToNode"),T=t.item;if(T.getType&&T.getType()==="node"&&d&&(0,f.isArray)(d)&&d.length>=2){var O=T.getBBox();c={x:O.minX+O.width*d[0],y:O.minY+O.height*d[1]}}var F=a.getCanvasByPoint(c.x,c.y),K=F.x,rt=F.y,lt=a.getContainer(),ct={x:K+lt.offsetLeft+u,y:rt+lt.offsetTop+l};Va(n,{visibility:"visible",display:"unset"});var pt=n.getBoundingClientRect();K+pt.width+u>o&&(ct.x-=pt.width+u),rt+pt.height+l>s&&(ct.y-=pt.height+l,ct.y<0&&(ct.y=0)),Va(n,{left:"".concat(ct.x,"px"),top:"".concat(ct.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,f.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(Cs),Xb=Yb,cg="timebarstartplay",fg="timebarendplay",Hu="valuechange",Jc="timebarConfigChanged",hc="playPauseBtn",Od="nextStepBtn",Id="preStepBtn",QS={opacity:.5,fill:"#000"},qS={opacity:.5,fill:"#000",r:5},JS={fill:"#fff",fontSize:12},jb=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,l=u===void 0?[4,4,4,4]:u,c=e.className,d=c===void 0?"g6-component-timebar-tooltip":c,T=e.backgroundColor,O=T===void 0?"#000":T,F=e.textColor,K=F===void 0?"#fff":F,rt=e.opacity,lt=rt===void 0?.8:rt,ct=e.fontSize,pt=ct===void 0?12:ct;this.container=o,this.className=d,this.backgroundColor=O,this.textColor=K,this.x=r,this.y=a,this.text=s,this.padding=l,this.opacity=lt,this.fontSize=pt,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,l=e.opacity,c=e.fontSize,d=e.container,T=vo("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(l,'"></div>'));(0,f.isString)(d)&&(d=document.getElementById(d)),d.appendChild(T),e.parentHeight=d.offsetHeight,e.parentWidth=d.offsetWidth,Va(T,{visibility:"hidden",top:0,left:0});var O=vo(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));O.innerHTML=s,T.appendChild(O),e.backgroundDOM=O;var F=vo("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));T.appendChild(F),e.arrowDOM=F,e.container=T},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,l=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,d=t.arrowDOM.offsetHeight;Va(t.container,{top:"".concat(-l-d,"px"),left:"".concat(n,"px"),visibility:"visible"}),Va(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),Va(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(l,"px")});var T=n-u/2,O=n+u/2;T<0?Va(t.backgroundDOM,{marginLeft:"".concat(-u/2-T,"px")}):O>t.parentWidth&&Va(t.backgroundDOM,{marginLeft:"".concat(-u/2-O+t.parentWidth+12,"px")})},i.prototype.hide=function(){Va(this.container,{top:0,left:0,visibility:"hidden"})},i}(),Vb=jb,uv=function(){return uv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},uv.apply(this,arguments)},Hb=function(){function i(e){this.config=(0,f.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,f.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,l=u===void 0?0:u,c=this.config.x+s,d=this.config.y+l,T=t.addGroup({name:hc});this.startMarkerGroup=T.addGroup({name:hc}),this.circle=t.addShape("circle",{attrs:uv({x:c,y:d,r:this.config.r*a},r),name:hc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,d,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=T.addGroup({name:hc});var O=.25*this.config.r*a,F=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:d-F/2,width:O,height:F,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:d-F/2,width:O,height:F,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,l=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",l),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,l,r));var c=.25*this.config.r*r,d=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",l-d/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",d),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",l-d/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",d)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),Zb=Hb,Fo=function(){return Fo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Fo.apply(this,arguments)},Dd=ft,Kb="#aaa",$b="green",Qb={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},qb={fill:"#fff"},Jb={fill:"green"},dg={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},hg={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},tx={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:dg,timeTypeControllerStyle:hg},lv=110,vc=50,Zu={SINGLE:"single",RANGE:"range"},ex=function(){function i(e){this.controllerCfg=(0,f.deepMix)({},tx,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Zu.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?Kb:s,l=e.stroke,c=l===void 0?$b:l,d=e.containerStyle,T=d===void 0?{}:d,O=Fo(Fo({},Qb),e.playBtnStyle||{}),F=Fo(Fo({},qb),e.preBtnStyle||{}),K=Fo(Fo({},Jb),e.nextBtnStyle||{}),rt=r/2-5,lt=a+10,ct=this.controllerGroup.addShape("rect",{attrs:Fo({x:n,y:lt,width:t,height:r,stroke:c,fill:u},T),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:lt,r:rt}):this.playButton=new Zb({group:this.controllerGroup,x:t/2,y:lt+rt+5,r:rt,isPlay:this.isPlay,style:O});var pt=F.offsetX||0,_t=F.offsetY||0,jt=(F.scale||1)*rt;this.controllerGroup.addShape("path",{attrs:Fo({path:this.getPreMarkerPath(t/2-5*rt+pt,lt+rt+5+_t,jt*.5)},F),name:Id});var ae=K.offsetX||0,ne=K.offsetY||0,we=(K.scale||1)*rt;this.controllerGroup.addShape("path",{attrs:Fo({path:this.getNextMarkerPath(t/2+5*rt+ae,lt+rt+5+ne,we*.5)},K),name:Od}),ct.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var Fe=this.controllerCfg.scale,Oe=Fe===void 0?1:Fe,Ke=this.controllerGroup.getCanvasBBox(),sr=(Ke.maxX+Ke.minX)/2,Jr=(Ke.maxY+Ke.minY)/2,Tn=Dd([1,0,0,0,1,0,0,0,1],[["t",-sr,-Jr],["s",Oe,Oe],["t",sr,Jr]]);this.controllerGroup.setMatrix(Tn)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=Fo(Fo({},dg),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,l=u===void 0?{}:u,c=a.pointer,d=c===void 0?{}:c,T=a.scale,O=T===void 0?1:T,F=a.offsetX,K=F===void 0?0:F,rt=a.offsetY,lt=rt===void 0?0:rt,ct=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=ct;var pt=[],_t=5;this.speedAxisY=[19,22,26,32,39];for(var jt=0;jt<5;jt++){var ae=t+this.speedAxisY[jt],ne=r-(n?vc:lv);ct.addShape("line",{attrs:Fo({x1:ne,x2:ne+15,y1:ae,y2:ae},s),speed:_t,name:"speed-rect"}),this.speedAxisY[jt]=ae,pt.push(_t),_t=_t-1}this.speedText=ct.addShape("text",{attrs:Fo({x:r-(n?vc:lv)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},l),name:"speed-text"}),this.speedPoint=ct.addShape("path",{attrs:Fo({path:this.getPointerPath(r-(n?vc:lv),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},d),name:"speed-pointer"});var we=this.speedGroup.getCanvasBBox(),Fe=(we.maxX+we.minX)/2,Oe=(we.maxY+we.minY)/2,Ke=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Ke=Dd(Ke,[["t",-Fe,-Oe],["s",O,O],["t",Fe+K*O,Oe+lt*O]]),this.speedGroup.setMatrix(Ke)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=Fo(Fo({},hg),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,l=o.offsetX,c=l===void 0?0:l,d=o.offsetY,T=d===void 0?0:d,O=o.box,F=O===void 0?{}:O,K=o.check,rt=K===void 0?{}:K,lt=o.text,ct=lt===void 0?{}:lt;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var pt=a===Zu.SINGLE;this.toggleGroup.addShape("rect",{attrs:Fo({x:n-vc,y:this.speedAxisY[0]+3.5},F),isChecked:pt,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Fo({path:[["M",n-vc+3,this.speedAxisY[1]+6],["L",n-vc+7,this.speedAxisY[1]+10],["L",n-vc+12,this.speedAxisY[1]+4]]},rt),capture:!1,name:"check-icon"}),pt||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Fo({text:pt?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-vc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ct),name:"checked-text"});var _t=this.toggleGroup.getCanvasBBox(),jt=(_t.maxX+_t.minX)/2,ae=(_t.maxY+_t.minY)/2,ne=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];ne=Dd(ne,[["t",-jt,-ae],["s",u,u],["t",jt+c*u,ae+T*u]]),this.toggleGroup.setMatrix(ne)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Dd(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Jc,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,l){var c=Math.abs(u-n);o>c&&(o=c,a=l)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Dd(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Jc,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Zu.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Zu.SINGLE),t.target.set("isChecked",!a),e.group.emit(Jc,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),vg=ex,Pd=function(){return Pd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Pd.apply(this,arguments)},rx=ft,nx={fill:"#5B8FF9"},ax={fill:"#e6e8e9"},ix=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,l=e.start,c=e.end,d=e.x,T=d===void 0?0:d,O=e.y,F=O===void 0?0:O,K=e.tickLabelFormatter,rt=e.selectedTickStyle,lt=rt===void 0?nx:rt,ct=e.unselectedTickStyle,pt=ct===void 0?ax:ct,_t=e.tooltipBackgroundColor,jt=e.tooltipFomatter,ae=e.tickLabelStyle,ne=e.controllerCfg,we=ne===void 0?{speed:1}:ne;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=l,this.end=c,this.tickLabelFormatter=K,this.tickLabelStyle=ae||{},this.selectedTickStyle=lt,this.unselectedTickStyle=pt,this.controllerCfg=we,this.currentSpeed=we.speed||1,this.x=T,this.y=F,this.tooltipBackgroundColor=_t,this.tooltipFomatter=jt,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,l=t.tickLabelFormatter,c=t.selectedTickStyle,d=t.unselectedTickStyle,T=t.tickLabelStyle,O=r-2*a,F=10,K=4,rt=3*a+K+F,lt=n-rt-2*a,ct=2,pt=o.length,_t=(O-ct*(pt-1))/pt;this.tickWidth=_t;var jt=this.sliceGroup,ae=[],ne=[],we=Math.round(pt*s),Fe=Math.round(pt*u);this.startTickRectId=we,this.endTickRectId=Fe;var Oe=T.rotate;delete T.rotate,o.forEach(function(sr,Jr){var Tn=Jr>=we&&Jr<=Fe,vn=Tn?c:d,Yr=jt.addShape("rect",{attrs:Pd({x:a+Jr*(_t+ct),y:a,width:_t,height:lt},vn),draggable:!0,name:"tick-rect-".concat(Jr)}),Gn=jt.addShape("rect",{attrs:{x:a+Jr*_t+ct*(2*Jr-1)/2,y:a,width:Jr===0||Jr===pt-1?_t+ct/2:_t+ct,height:lt,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Jr)});Gn.toFront();var kn=Yr.getBBox(),Xr=(kn.minX+kn.maxX)/2;ae.push({rect:Yr,pickRect:Gn,value:sr.date,x:Xr,y:kn.minY});var fn;if(l?(fn=l(sr),!(0,f.isString)(fn)&&fn&&(fn=sr.date)):Jr%Math.round(pt/10)===0&&(fn=sr.date),fn){ne.push(fn);var An=kn.maxY+a*2;jt.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Xr,y1:An,x2:Xr,y2:An+K},name:"tick-line"});var On=An+K+a,jn=jt.addShape("text",{attrs:Pd({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Xr,y:On,textAlign:"center",text:fn,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},T),capture:!1,name:"tick-label"}),ta=jn.getBBox();if(ta.maxX>r?jn.attr("textAlign","right"):ta.minX<0&&jn.attr("textAlign","left"),(0,f.isNumber)(Oe)&&ne.length!==10){var ba=rx([1,0,0,0,1,0,0,0,1],[["t",-Xr,-On],["r",Oe],["t",Xr-5,On+2]]);jn.attr({textAlign:"left",matrix:ba})}ne.length===1?jn.attr({textAlign:"left"}):ne.length===10&&jn.attr({textAlign:"right"})}}),this.tickRects=ae;var Ke=this.group;this.currentSpeed=1,this.controllerBtnGroup=new vg(Pd({group:Ke,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var d=c.target;if(!(d.get("type")!=="rect"||!d.get("name"))){var T=parseInt(d.get("name").split("-")[2],10);if(!isNaN(T)){var O=e.tickRects,F=e.unselectedTickStyle;O.forEach(function(ct){ct.rect.attr(F)});var K=e.selectedTickStyle;O[T].rect.attr(K),e.startTickRectId=T,e.endTickRectId=T;var rt=O.length,lt=T/rt;e.graph.emit(Hu,{value:[lt,lt]})}}}),t.on("dragstart",function(c){var d=e.tickRects,T=e.unselectedTickStyle;d.forEach(function(ct){ct.rect.attr(T)});var O=c.target,F=parseInt(O.get("name").split("-")[2],10),K=e.selectedTickStyle;d[F].rect.attr(K),e.startTickRectId=F;var rt=d.length,lt=F/rt;e.graph.emit(Hu,{value:[lt,lt]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var d=parseInt(c.target.get("name").split("-")[2],10),T=e.startTickRectId,O=e.tickRects,F=e.selectedTickStyle,K=e.unselectedTickStyle,rt=0;rt<O.length;rt++){var lt=rt>=T&&rt<=d?F:K;O[rt].rect.attr(lt)}var ct=O.length;e.endTickRectId=d;var pt=T/ct,_t=d/ct;e.graph.emit(Hu,{value:[pt,_t]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var d=e.startTickRectId,T=parseInt(c.target.get("name").split("-")[2],10);if(!(T<d)){var O=e.selectedTickStyle,F=e.tickRects;F[T].rect.attr(O),e.endTickRectId=T;var K=F.length,rt=d/K,lt=T/K;e.graph.emit(Hu,{value:[rt,lt]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new Vb({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var d=c.pickRect;d.on("mouseenter",function(T){var O=T.target;if(O.get("type")==="rect"){var F=parseInt(O.get("name").split("-")[2],10),K=o.getClientByPoint(u[F].x,u[F].y);s.show({x:u[F].x,y:u[F].y,clientX:K.x,clientY:K.y,text:a?a(u[F].value):u[F].value})}}),d.on("mouseleave",function(T){s.hide()})});var l=this.group;l.on("".concat(hc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),l.on("".concat(Od,":click"),function(){e.updateStartEnd(1)}),l.on("".concat(Id,":click"),function(){e.updateStartEnd(-1)}),l.on(Jc,function(c){var d=c.type,T=c.speed;e.currentSpeed=T})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(cg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(fg,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var l=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Hu,{value:[l,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(hc,":click")),e.off("".concat(Od,":click")),e.off("".concat(Id,":click")),e.off(Jc),this.sliceGroup.destroy()},i}(),ox=ix,pg={};function sx(i){return pg[i]}function Ku(i,e){pg[i]=e}var ux=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,f.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,f.map)(this.ticks,function(t,r){return(0,f.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,f.isNil)(n)||!(0,f.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,f.assign)(this,this.__cfg__),this.setDomain(),(0,f.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,f.isString)(e)){var r=sx(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,f.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,f.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),cv=ux,lx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,f.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,f.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,m.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,f.isNil)(this.getConfig("min"))&&(this.min=0),(0,f.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(cv),Ld=lx,gg=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,pc="\\d\\d?",gc="\\d\\d",cx="\\d{3}",fx="\\d{4}",Nd="[^\\s]+",mg=/\[([^]*?)\]/gm;function yg(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var bg=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function mc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var xg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Eg=["January","February","March","April","May","June","July","August","September","October","November","December"],dx=yg(Eg,3),hx=yg(xg,3),fv={dayNamesShort:hx,dayNames:xg,monthNamesShort:dx,monthNames:Eg,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},fh=mc({},fv),wg=function(i){return fh=mc(fh,i)},Sg=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Ts=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},vx={D:function(i){return String(i.getDate())},DD:function(i){return Ts(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return Ts(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return Ts(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return Ts(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return Ts(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return Ts(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return Ts(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return Ts(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return Ts(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return Ts(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return Ts(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+Ts(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+Ts(Math.floor(Math.abs(e)/60),2)+":"+Ts(Math.abs(e)%60,2)}},Mg=function(i){return+i-1},_g=[null,pc],Cg=[null,Nd],Tg=["isPm",Nd,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],Ag=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],px={D:["day",pc],DD:["day",gc],Do:["day",pc+Nd,function(i){return parseInt(i,10)}],M:["month",pc,Mg],MM:["month",gc,Mg],YY:["year",gc,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",pc,void 0,"isPm"],hh:["hour",gc,void 0,"isPm"],H:["hour",pc],HH:["hour",gc],m:["minute",pc],mm:["minute",gc],s:["second",pc],ss:["second",gc],YYYY:["year",fx],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",gc,function(i){return+i*10}],SSS:["millisecond",cx],d:_g,dd:_g,ddd:Cg,dddd:Cg,MMM:["month",Nd,bg("monthNamesShort")],MMMM:["month",Nd,bg("monthNames")],a:Tg,A:Tg,ZZ:Ag,Z:Ag},dh={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Og=function(i){return mc(dh,i)},Ig=function(i,e,t){if(e===void 0&&(e=dh.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=dh[e]||e;var r=[];e=e.replace(mg,function(a,o){return r.push(o),"@@@"});var n=mc(mc({},fh),t);return e=e.replace(gg,function(a){return vx[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function Dg(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=dh[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(mg,function(_t,jt){return o.push(Sg(jt)),"@@@"}),u={},l={};s=Sg(s).replace(gg,function(_t){var jt=px[_t],ae=jt[0],ne=jt[1],we=jt[3];if(u[ae])throw new Error("Invalid format. "+ae+" specified twice in format");return u[ae]=!0,we&&(l[we]=!0),a.push(jt),"("+ne+")"}),Object.keys(l).forEach(function(_t){if(!u[_t])throw new Error("Invalid format. "+_t+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var d=mc(mc({},fh),t),T=1;T<c.length;T++){var O=a[T-1],F=O[0],K=O[2],rt=K?K(c[T],d):+c[T];if(rt==null)return null;n[F]=rt}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var lt;if(n.timezoneOffset==null){lt=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var ct=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],T=0,pt=ct.length;T<pt;T++)if(u[ct[T][0]]&&n[ct[T][0]]!==lt[ct[T][1]]())return null}else if(lt=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return lt}var gx={format:Ig,parse:Dg,defaultI18n:fv,setGlobalDateI18n:wg,setGlobalDateMasks:Og},Pg=gx;function mx(i){return function(e,t,r,n){for(var a=(0,f.isNil)(r)?0:r,o=(0,f.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var Lg="format";function Ng(i,e){var t=B[Lg]||Pg[Lg];return t(i,e)}function hh(i){return(0,f.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,f.isDate)(i)&&(i=i.getTime()),i}var yu=1e3,tf=60*yu,ef=60*tf,Tl=24*ef,Rd=Tl*31,Rg=Tl*365,kd=[["HH:mm:ss",yu],["HH:mm:ss",yu*10],["HH:mm:ss",yu*30],["HH:mm",tf],["HH:mm",tf*10],["HH:mm",tf*30],["HH",ef],["HH",ef*6],["HH",ef*12],["YYYY-MM-DD",Tl],["YYYY-MM-DD",Tl*4],["YYYY-WW",Tl*7],["YYYY-MM",Rd],["YYYY-MM",Rd*4],["YYYY-MM",Rd*6],["YYYY",Tl*380]];function yx(i,e,t){var r=(e-i)/t,n=mx(function(o){return o[1]})(kd,r)-1,a=kd[n];return n<0?a=kd[0]:n>=kd.length&&(a=(0,f.last)(kd)),a}var bx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=hh(t);var r=this.values.indexOf(t);return r===-1&&((0,f.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):Ng(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,f.each)(t,function(r,n){t[n]=hh(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Ld),xx=bx,Ex=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,f.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,f.head)(t),n=(0,f.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,f.isNil)(this.minLimit)||(this.min=r),(0,f.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,f.getRange)(this.values),r=t.min,n=t.max;(0,f.isNil)(this.min)&&(this.min=r),(0,f.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,f.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(cv),vh=Ex,wx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(vh),Bd=wx;function yc(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function qs(i,e){return i===1?1:Math.log(e)/Math.log(i)}function kg(i,e,t){(0,f.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,f.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function Bg(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function tM(i,e){var t=Bg(i),r=Bg(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var Sx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=qs(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=qs(r,u/r);var l=1/(n-s)*o;if(t<l)return t/l*u}else s=qs(r,this.min);var c=(t-a)/o,d=c*(n-s)+s;return Math.pow(r,d)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=kg(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(qs(a,r)-qs(a,n)):s=(qs(a,t)-qs(a,n))/(qs(a,r)-qs(a,n)),s},e}(vh),Mx=Sx,_x=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=yc(n,this.max),o=yc(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(yc(a,t)-yc(a,n))/(yc(a,r)-yc(a,n));return o},e}(vh),Cx=_x,Tx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):Ng(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,f.isString)(r)||(0,f.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return hh(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,f.isNil)(r)||!(0,f.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,f.isNil)(n)||!(0,f.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,f.each)(t,function(l){var c=hh(l);if(isNaN(c))throw new TypeError("Invalid Time: "+l+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,f.isNil)(r)&&(this.min=o),(0,f.isNil)(n)&&(this.max=u)}},e}(Bd),Ax=Tx,Ox=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,f.last)(r);if(o<0)return(0,f.head)(r);var s=r[o],u=r[o+1],l=o/(n-1),c=(o+1)/(n-1);return s+(a-l)/(c-l)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,f.last)(t)!==this.max&&t.push(this.max),(0,f.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,f.head)(r))return 0;if(t>(0,f.last)(r))return 1;var n=0;return(0,f.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(vh),Fg=Ox,Ix=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Fg),Dx=Ix,zg={};function Px(i){return zg[i]}function $u(i,e){if(Px(i))throw new Error("type '"+i+"' existed.");zg[i]=e}var Lx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,f.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(cv),Nx=Lx;function Gg(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,f.isNumber)(t)){var a=(0,f.filter)(e,function(F,K){return K%t===0}),o=(0,f.last)(e);return n&&(0,f.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,l=i.max;if((0,f.isNil)(u)&&(u=0),(0,f.isNil)(l)&&(l=e.length-1),!(0,f.isNumber)(r)||r>=s)return e.slice(u,l+1);if(r<=0||l<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),d=[],T=u,O=0;O<r&&!(T>=l);O++)T=Math.min(u+O*c,l),O===r-1&&n?d.push(e[l]):d.push(e[T]);return d}function Rx(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new kx;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var dv=5,Ug=Math.sqrt(50),Wg=Math.sqrt(10),Yg=Math.sqrt(2),kx=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=dv);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],l;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),l=ph(s,u,e),l>0?(s=Math.floor(s/l)*l,u=Math.ceil(u/l)*l,l=ph(s,u,e)):l<0&&(s=Math.ceil(s*l)/l,u=Math.floor(u*l)/l,l=ph(s,u,e)),l>0?(n[a]=Math.floor(s/l)*l,n[o]=Math.ceil(u/l)*l,this.domain(n)):l<0&&(n[a]=Math.ceil(s*l)/l,n[o]=Math.floor(u*l)/l,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=dv),Bx(this._domain[0],this._domain[this._domain.length-1],e||dv)},i}();function Bx(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=ph(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function ph(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=Ug?10:a>=Wg?5:a>=Yg?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=Ug?10:a>=Wg?5:a>=Yg?2:1)}function Xg(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function hv(i,e,t){var r=Xg(i,t,"floor"),n=Xg(e,t,"ceil");r=(0,f.fixedBase)(r,t),n=(0,f.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,f.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function vv(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,l=u===void 0?5:u,c=(0,f.isNil)(n)?(0,f.isNil)(e)?o:e:n,d=(0,f.isNil)(a)?(0,f.isNil)(t)?s:t:a;if(c>d&&(r=[c,d],d=r[0],c=r[1]),l<=2)return[c,d];for(var T=(d-c)/(l-1),O=[],F=0;F<l;F++)O.push(c+T*F);return O}function Fx(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=Rx(i);return!(0,f.isNil)(n)||!(0,f.isNil)(a)?vv(i,(0,f.head)(o),(0,f.last)(o)):r?hv(e,t,r).ticks:o}function rf(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var zx=[1,5,2,2.5,4,3],eM=null,jg=Number.EPSILON*100;function Gx(i,e){return(i%e+e)%e}function Ux(i){return Math.round(i*1e12)/1e12}function Wx(i,e,t,r,n,a){var o=(0,f.size)(e),s=(0,f.indexOf)(e,i),u=0,l=Gx(r,a);return(l<jg||a-l<jg)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function Yx(i,e,t){var r=(0,f.size)(e),n=(0,f.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function Xx(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function jx(i,e){return i>=e?2-(i-1)/(e-1):1}function Vx(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function Hx(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function Zx(){return 1}function Kx(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=zx),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(An,On){return rf(i+u*On)})}}for(var l={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var d=0;d<n.length;d+=1){var T=n[d],O=Yx(T,n,c);if(a[0]*O+a[1]+a[2]+a[3]<l.score){c=1/0;break}for(var F=2;F<1/0;){var K=jx(F,o);if(a[0]*O+a[1]+a[2]*K+a[3]<l.score)break;for(var rt=(e-i)/(F+1)/c/T,lt=Math.ceil(Math.log10(rt));lt<1/0;){var ct=c*T*Math.pow(10,lt),pt=Hx(i,e,ct*(F-1));if(a[0]*O+a[1]*pt+a[2]*K+a[3]<l.score)break;var _t=Math.floor(e/ct)*c-(F-1)*c,jt=Math.ceil(i/ct)*c;if(_t<=jt)for(var s=jt-_t,ae=0;ae<=s;ae+=1){var ne=_t+ae,we=ne*(ct/c),Fe=we+ct*(F-1),Oe=ct,Ke=Wx(T,n,c,we,Fe,Oe),sr=Vx(i,e,we,Fe),Jr=Xx(F,o,i,e,we,Fe),Tn=Zx(),vn=a[0]*Ke+a[1]*sr+a[2]*Jr+a[3]*Tn;vn>l.score&&(!r||we<=i&&Fe>=e)&&(l.lmin=we,l.lmax=Fe,l.lstep=Oe,l.score=vn)}lt+=1}F+=1}}c+=1}var Yr=rf(l.lmax),Gn=rf(l.lmin),kn=rf(l.lstep),Xr=Math.floor(Ux((Yr-Gn)/kn))+1,fn=new Array(Xr);fn[0]=rf(Gn);for(var d=1;d<Xr;d++)fn[d]=rf(fn[d-1]+kn);return{min:Math.min(i,(0,f.head)(fn)),max:Math.max(e,(0,f.last)(fn)),ticks:fn}}function $x(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=Kx(e,t,r,n).ticks;return!(0,f.isNil)(o)||!(0,f.isNil)(s)?vv(i,(0,f.head)(u),(0,f.last)(u)):a?hv(e,t,a).ticks:u}function Qx(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=qs(e,n);if(r>0)o=Math.floor(qs(e,r));else{var u=kg(a,e,n);o=Math.floor(qs(e,u))}for(var l=s-o,c=Math.ceil(l/t),d=[],T=o;T<s+c;T=T+c)d.push(Math.pow(e,T));return r<=0&&d.unshift(0),d}function Vg(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),l=u;2*u-s<n*(s-l)&&(l=2*u,5*u-s<a*(s-l)&&(l=5*u,10*u-s<n*(s-l)&&(l=10*u)));for(var c=Math.ceil(e/l),d=Math.floor(i/l),T=Math.max(c*l,e),O=Math.min(d*l,i),F=Math.floor((T-O)/l)+1,K=new Array(F),rt=0;rt<F;rt++)K[rt]=rf(O+rt*l);return{min:O,max:T,ticks:K}}function qx(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(yc(e,i.max)),n=Math.floor(yc(e,i.min)),a=Vg(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function Jx(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function tE(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(Jx(r,o))}return n}function eE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=Vg(e,t,r).ticks;return!(0,f.isNil)(a)||!(0,f.isNil)(o)?vv(i,(0,f.head)(s),(0,f.last)(s)):n?hv(e,t,n).ticks:s}function rE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=yx(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],l=e;l<t+n;l+=n)u.push(l);return u}function nE(i){var e=Gg((0,m.__assign)({showLast:!0},i));return e}function gh(i){return new Date(i).getFullYear()}function aE(i){return new Date(i,0,1).getTime()}function pv(i){return new Date(i).getMonth()}function iE(i,e){var t=gh(i),r=gh(e),n=pv(i),a=pv(e);return(r-t)*12+(a-n)%12}function oE(i,e){return new Date(i,e,1).getTime()}function sE(i,e){return Math.ceil((e-i)/Tl)}function uE(i,e){return Math.ceil((e-i)/ef)}function lE(i,e){return Math.ceil((e-i)/(60*1e3))}function cE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=gh(e);if(a>Rg)for(var u=gh(t),l=Math.ceil(a/Rg),c=s;c<=u+l;c=c+l)o.push(aE(c));else if(a>Rd)for(var d=Math.ceil(a/Rd),T=pv(e),O=iE(e,t),c=0;c<=O+d;c=c+d)o.push(oE(s,c+T));else if(a>Tl)for(var F=new Date(e),K=F.getFullYear(),rt=F.getMonth(),lt=F.getDate(),ct=Math.ceil(a/Tl),pt=sE(e,t),c=0;c<pt+ct;c=c+ct)o.push(new Date(K,rt,lt+c).getTime());else if(a>ef)for(var F=new Date(e),K=F.getFullYear(),rt=F.getMonth(),ct=F.getDate(),_t=F.getHours(),jt=Math.ceil(a/ef),ae=uE(e,t),c=0;c<=ae+jt;c=c+jt)o.push(new Date(K,rt,ct,_t+c).getTime());else if(a>tf)for(var ne=lE(e,t),we=Math.ceil(a/tf),c=0;c<=ne+we;c=c+we)o.push(e+c*tf);else{var Fe=a;Fe<yu&&(Fe=yu);for(var Oe=Math.floor(e/yu)*yu,Ke=Math.ceil((t-e)/yu),sr=Math.ceil(Fe/yu),c=0;c<Ke+sr;c=c+sr)o.push(Oe+c*yu)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Ku("cat",Gg),Ku("time-cat",nE),Ku("wilkinson-extended",$x),Ku("r-pretty",eE),Ku("time",rE),Ku("time-pretty",cE),Ku("log",Qx),Ku("pow",qx),Ku("quantile",tE),Ku("d3-linear",Fx),$u("cat",Ld),$u("category",Ld),$u("identity",Nx),$u("linear",Bd),$u("log",Mx),$u("pow",Cx),$u("time",Ax),$u("timeCat",xx),$u("quantize",Fg),$u("quantile",Dx);var fE=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function dE(i){return(0,f.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function Hg(i){return dE(i)}function hE(i){if(i.length<=2)return Hg(i);var e=[];(0,f.each)(i,function(o){(0,f.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=ya(e,!1),r=(0,f.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function vE(i,e,t,r){r===void 0&&(r=!0);var n=new Bd({values:i}),a=new Ld({values:(0,f.map)(i,function(s,u){return u})}),o=(0,f.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?hE(o):Hg(o)}function pE(i,e,t,r){r===void 0&&(r=5);for(var n=new Bd({values:i}),a=new Ld({values:(0,f.map)(i,function(T,O){return O})}),o=(0,f.map)(i,function(T,O){return[a.scale(O)*e,t-n.scale(T)*t]}),s=[],u=0;u<o.length;u++){var l=o[u],c={x:l[0],y:l[1],y0:t,size:r},d=yE(c);s.push.apply(s,d)}return bE(s)}function gE(i,e){var t=new Bd({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function mE(i,e,t,r){var n=fE([],i,!0),a=gE(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function yE(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,f.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,f.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var l=[{x:s,y:a},{x:s,y:o}];return l.push({x:u,y:o},{x:u,y:a}),l}function bE(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Fd=function(){return Fd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Fd.apply(this,arguments)},xE={stroke:"#C5C5C5",strokeOpacity:.85},EE={fill:"#CACED4",opacity:.85},wE=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,l=u===void 0?26:u,c=e.smooth,d=c===void 0?!0:c,T=e.isArea,O=T===void 0?!1:T,F=e.data,K=F===void 0?[]:F,rt=e.lineStyle,lt=e.areaStyle,ct=e.group,pt=e.interval,_t=pt===void 0?null:pt;this.group=ct,this.x=r,this.y=a,this.width=s,this.height=l,this.data=K,this.smooth=d,this.isArea=O,this.lineStyle=Object.assign({},xE,rt),this.areaStyle=Object.assign({},EE,lt),this.intervalConfig=_t,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,l=e.isArea,c=e.lineStyle,d=e.areaStyle,T=this.group.addGroup({name:"trend-group"});if(s){var O=vE(s,n,a,u);if(T.addShape("path",{attrs:Fd({path:O},c),name:"trend-line"}),l){var F=mE(O,n,a,s);T.addShape("path",{attrs:Fd({path:F},d),name:"trend-area"})}}this.intervalConfig&&T.addShape("path",{attrs:Fd({path:pE(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),T.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),SE=wE,td=function(){return td=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},td.apply(this,arguments)},ME={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},_E={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},CE=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,l=e.width,c=l===void 0?2:l,d=e.height,T=d===void 0?24:d,O=e.style,F=O===void 0?{}:O;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=T,n==="trend"?this.style=td(td({},ME),F):n==="simple"&&(this.style=td(td({},_E),F)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,f.isNumber)(e)&&(this.x=e),(0,f.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,l=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:l,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:l,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:l,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:l,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),Zg=CE,so=function(){return so=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},so.apply(this,arguments)},TE=ft,AE={fill:"#416180",opacity:.05},OE={fill:"#416180",opacity:.15,radius:5},IE={fill:"#5B8FF9",opacity:.3,cursor:"grab"},gv=2,DE={width:gv,height:24},PE={textBaseline:"middle",fill:"#000",opacity:.45},LE={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},NE={lineWidth:1,stroke:"#ccc"},RE=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(An){return function(On){t.currentHandler=An;var jn=On.originalEvent;jn.stopPropagation(),jn.preventDefault(),t.prevX=(0,f.get)(jn,"touches.0.pageX",jn.pageX);var ta=t.canvas.get("container");ta.addEventListener("mousemove",t.onMouseMove),ta.addEventListener("mouseup",t.onMouseUp),ta.addEventListener("mouseleave",t.onMouseUp),ta.addEventListener("touchmove",t.onMouseMove),ta.addEventListener("touchend",t.onMouseUp),ta.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(An){An.stopPropagation(),An.preventDefault();var On=(0,f.get)(An,"touches.0.pageX",An.pageX),jn=On-t.prevX,ta=t.adjustOffsetRange(jn/t.width);t.updateStartEnd(ta),t.updateUI(),t.prevX=On},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var An=t.canvas.get("container");An&&(An.removeEventListener("mousemove",t.onMouseMove),An.removeEventListener("mouseup",t.onMouseUp),An.removeEventListener("mouseleave",t.onMouseUp),An.removeEventListener("touchmove",t.onMouseMove),An.removeEventListener("touchend",t.onMouseUp),An.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,l=e.height,c=e.padding,d=c===void 0?10:c,T=e.trendCfg,O=e.controllerCfg,F=O===void 0?{speed:1}:O,K=e.backgroundStyle,rt=K===void 0?{}:K,lt=e.foregroundStyle,ct=lt===void 0?{}:lt,pt=e.handlerStyle,_t=pt===void 0?{}:pt,jt=e.textStyle,ae=jt===void 0?{}:jt,ne=e.start,we=ne===void 0?0:ne,Fe=e.end,Oe=Fe===void 0?1:Fe,Ke=e.minText,sr=Ke===void 0?"":Ke,Jr=e.maxText,Tn=Jr===void 0?"":Jr,vn=e.group,Yr=e.graph,Gn=e.canvas,kn=e.tick,Xr=kn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(On){return On},ticks:[]}:kn,fn=e.type;this.graph=Yr,this.canvas=Gn,this.group=vn,this.timeBarType=fn,this.x=n,this.y=o,this.width=u,this.height=l,this.padding=d,this.ticks=Xr.ticks,this.trendCfg=T,this.controllerCfg=F,this.currentSpeed=F.speed||1,this.tickLabelFormatter=Xr.tickLabelFormatter,fn==="trend"?this.backgroundStyle=so(so({},AE),rt):fn==="simple"&&(this.backgroundStyle=so(so({},OE),rt)),this.foregroundStyle=so(so({},IE),ct),this.handlerStyle=so(so({},DE),_t),this.textStyle=so(so({},PE),ae),this.tickLabelStyle=so(so({},LE),Xr.tickLabelStyle),this.tickLineStyle=so(so({},NE),Xr.tickLineStyle),this.currentMode=F.defaultTimeType||Zu.RANGE,this.start=we,this.end=Oe,this.minText=sr,this.maxText=Tn,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,l=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(l,0)),(0,f.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,f.size)((0,f.get)(this.trendCfg,"data"))){var o=new SE(so(so({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:so({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:so({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:so({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:so({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:so({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:so({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(lt){lt.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(lt){lt.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var l=(0,f.get)(this.handlerStyle,"width",2),c=(0,f.get)(this.handlerStyle,"height",24),d=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Zg({name:"minHandlerShape",group:d,type:a,x:this.x,y:this.y,width:l,height:c,style:this.handlerStyle});var T=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Zg({name:"maxHandlerShape",group:T,type:a,x:this.x,y:this.y,width:l,height:c,style:this.handlerStyle});var O=this.ticks,F=r/(O.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(lt){lt.destroy()});var K=-1/0,rt=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=O.map(function(lt,ct){e.tickPosList.push(e.x+ct*F);var pt;e.tickLabelFormatter?(pt=e.tickLabelFormatter(lt),!(0,f.isString)(pt)&&pt&&(pt=lt.date)):pt=lt.date;var _t=e.x+ct*F,jt=e.y+n+5,ae=e.group.addShape("text",{attrs:so({x:_t,y:jt,text:pt,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,f.isNumber)(rt)&&ct!==O.length-1){var ne=TE([1,0,0,0,1,0,0,0,1],[["t",-_t,-jt],["r",rt],["t",_t-5,jt+2]]);ae.attr({textAlign:"left",matrix:ne})}ct===0?ae.attr({textAlign:"left"}):ct!==O.length-1&&ae.attr({textAlign:"right"});var we=e.group.addShape("line",{attrs:so({x1:e.x+ct*F,y1:e.y+n+2,x2:e.x+ct*F,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});we.toBack();var Fe=ae.getBBox();return Fe.minX>K?(ae.show(),we.show(),K=Fe.minX+Fe.width+10):(ae.hide(),we.hide()),ae}),this.controllerBtnGroup=new vg(so({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Zu.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(hc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Od,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Id,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Jc,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Zu.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Zu.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,f.get)(this.handlerStyle,"width",gv);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,f.each)(o,function(u,l){return e.minTextShape.attr(l,u)}),this.maxHandlerShape.setX(r-n/2),(0,f.each)(s,function(u,l){return e.maxTextShape.attr(l,u)}),this.currentMode===Zu.RANGE?this.graph.emit(Hu,{value:[this.start,this.end].sort()}):this.currentMode===Zu.SINGLE&&this.graph.emit(Hu,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,f.get)(this.handlerStyle,"width",gv),o=this.minTextShape,s=this.maxTextShape,u=e[0],l=e[1],c=!1;u>l&&(t=[l,u],u=t[0],l=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var d=o.getBBox(),T=s.getBBox(),O=null,F=null;return this.timeBarType==="trend"?(O=u-d.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},F=l+T.width>this.x+this.width?{x:l-a/2-n,textAlign:"right"}:{x:l+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(O=o.attr("x")>d.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},F=s.attr("x")>this.width-T.width?{x:l,textAlign:"right"}:{x:l,textAlign:"center"}),c?[F,O]:[O,F]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(cg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(fg,null))},i.prototype.destory=function(){this.graph.off(Hu,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(hc,":click")),e.off("".concat(Od,":click")),e.off("".concat(Id,":click")),e.off(Jc),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),kE=RE,BE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Al=function(){return Al=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Al.apply(this,arguments)},FE=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},zE=4,GE=26,UE=function(i){BE(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,f.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),l;if(u?((0,f.isString)(u)&&(u=document.getElementById(u)),l=u):(l=vo("<div class='".concat(s,"'></div>")),Va(l,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(l)}this.set("timeBarContainer",l);var d,T=t.get("renderer");T==="SVG"?d=new Cd({container:l,width:n,height:a}):d=new _l({container:l,width:n,height:a}),this.get("containerCSS")&&Va(l,this.get("containerCSS")),this.set("canvas",d)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,l=r.trend,c=r.slider,d=r.controllerCfg,T=r.textStyle,O=r.tick,F=r.backgroundStyle,K=r.foregroundStyle,rt=l.data,lt=FE(l,["data"]),ct=n-2*s,pt=u==="trend"?GE:zE,_t=this.get("graph"),jt=this.get("timeBarGroup"),ae=this.get("canvas"),ne=null;if(u==="trend"||u==="simple"){var we=this.get("getValue");ne=new kE(Al(Al({graph:_t,canvas:ae,group:jt,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:ct,height:pt,padding:s,backgroundStyle:F,foregroundStyle:K,trendCfg:Al(Al({},lt),{data:rt.map(function(Oe){return(we==null?void 0:we(Oe))||Oe.value})})},c),{tick:{ticks:rt,tickLabelFormatter:O.tickLabelFormatter,tickLabelStyle:O.tickLabelStyle,tickLineStyle:O.tickLineStyle},handlerStyle:Al(Al({},c.handlerStyle),{height:c.height||pt}),controllerCfg:d,textStyle:T}))}else u==="tick"&&(ne=new ox(Al({graph:_t,canvas:ae,group:jt,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:d},O)));var Fe=function Oe(){var Ke=t.get("timebar");Ke.draggingHandler=!1,Ke.isPlay&&(Ke.isPlay=!1,Ke.currentHandler=Ke.maxHandlerShape,Ke.changePlayStatus()),document.removeEventListener("mouseup",Oe)};ae.on("mousedown",function(Oe){(Oe.target.get("name")==="maxHandlerShape-handler"||Oe.target.get("name")==="minHandlerShape-handler"||Oe.target===ne.foregroundShape)&&document.addEventListener("mouseup",Fe)}),this.set("timebar",ne)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),l=this.get("graph"),c=Math.round(o.length*n[0]),d=Math.round(o.length*n[1]);d=d>=o.length?o.length-1:d,c=c>=o.length?o.length-1:c;var T=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,O=T?T(o[c]):o[c].date,F=T?T(o[d]):o[d].date;if(s!=="tick"){var K=this.get("timebar");K.setText(O,F)}if(u)u(l,O,F);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=l.get("data"));var rt=this.get("filterItemTypes"),lt=this.get("changeData"),ct=this.get("getDate"),pt=this.get("shouldIgnore"),_t=o[c].date,jt=o[d].date;if(lt||lt===void 0){var ae=this.cacheGraphData.nodes,ne=this.cacheGraphData.edges,we={},Fe={};l.getNodes().forEach(function(Oe){return we[Oe.getID()]=!0}),l.getEdges().forEach(function(Oe){return Fe[Oe.getID()]=!0}),rt.includes("node")&&(ae==null||ae.forEach(function(Oe){var Ke=+((ct==null?void 0:ct(Oe))||Oe.date),sr=Ke>=_t&&Ke<=jt||(pt==null?void 0:pt("node",Oe,{min:_t,max:jt})),Jr=we[Oe.id];Jr&&!sr?(l.removeItem(Oe.id),we[Oe.id]=!1):!Jr&&sr&&(l.addItem("node",Oe),we[Oe.id]=!0)}),ne==null||ne.forEach(function(Oe){var Ke=we[Oe.source]&&we[Oe.target]||(pt==null?void 0:pt("edge",Oe,{min:_t,max:jt})),sr=!!l.findById(Oe.id);sr&&!Ke?(l.removeItem(Oe.id),Fe[Oe.id]=!1):!sr&&Ke?(l.addItem("edge",Oe),Fe[Oe.id]=!0):sr||(Fe[Oe.id]=!1)})),(this.get("filterEdge")||rt.includes("edge"))&&(ne==null||ne.filter(function(Oe){var Ke=+((ct==null?void 0:ct(Oe))||Oe.date),sr=Ke>=_t&&Ke<=jt||(pt==null?void 0:pt("edge",Oe,{min:_t,max:jt})),Jr=we[Oe.source]&&we[Oe.target],Tn=sr&&Jr,vn=Fe[Oe.id];vn&&!Tn?(Fe[Oe.id]=!1,l.removeItem(Oe.id)):!vn&&Tn&&(Fe[Oe.id]=!0,l.addItem("edge",Oe))}))}else rt.includes("node")&&l.getNodes().forEach(function(Oe){var Ke=Oe.getModel();if(!(pt!=null&&pt("node",Ke,{min:_t,max:jt}))){var sr=+((ct==null?void 0:ct(Ke))||Ke.date);sr<_t||sr>jt?l.hideItem(Oe):l.showItem(Oe)}}),(this.get("filterEdge")||rt.includes("edge"))&&l.getEdges().forEach(function(Oe){var Ke=Oe.getModel();if(!(pt!=null&&pt("edge",Ke,{min:o[c].date,max:o[d].date}))){var sr=+((ct==null?void 0:ct(Ke))||Ke.date);if(sr<o[c].date||sr>o[d].date)l.hideItem(Oe);else{var Jr=Oe.getSource().isVisible(),Tn=Oe.getTarget().isVisible();Jr&&Tn&&l.showItem(Oe)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Hu,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Hu,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,f.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(Cs),WE=UE,YE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XE=as.applyMatrix;function jE(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var VE=function(i){YE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,f.isString)(a)&&(a=document.getElementById(a));var o=vo("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,l=!1,c=0,d=0,T=0,O=0,F=0,K=0;a.addEventListener("mousedown",function(rt){if(r.refresh=!1,rt.target===o){var lt=o.style;T=parseInt(lt.width,10),O=parseInt(lt.height,10);var ct=t.get("width"),pt=t.get("height");T>ct||O>pt||(K=n.getZoom(),F=t.get("ratio"),l=!0,s=rt.clientX,u=rt.clientY)}},!1),a.addEventListener("mousemove",function(rt){if(!(!l||(0,f.isNil)(rt.clientX)||(0,f.isNil)(rt.clientY))){var lt=t.get("width"),ct=t.get("height"),pt=o.style;c=parseInt(pt.left,10),d=parseInt(pt.top,10),T=parseInt(pt.width,10),O=parseInt(pt.height,10);var _t=s-rt.clientX,jt=u-rt.clientY;c-_t<0?_t=c:c-_t+T>=lt&&(_t=0),d-jt<0?jt=d:d-jt+O>=ct&&(jt=0),c-=_t,d-=jt,Va(o,{left:"".concat(c,"px"),top:"".concat(d,"px")}),n.translate(_t*K/F,jt*K/F),s=rt.clientX,u=rt.clientY}},!1),a.addEventListener("mouseleave",function(){l=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){l=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,l=a.getGroup(),c=l.getCanvasBBox(),d=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],T=[c.maxX-c.minX,c.maxY-c.minY],O={centerX:d[0],centerY:d[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(O.width=T[0],O.height=O.width/u):(O.height=T[1],O.width=O.height*u),O.minX=d[0]-O.width/2,O.minY=d[1]-O.height/2;var F=l.getMatrix();F||(F=[1,0,0,0,1,0,0,0,1]);var K=Q.invert([1,0,0,0,1,0,0,0,1],F),rt=XE({x:O.minX,y:O.minY},K),lt=a.getCanvasByPoint(rt.x,rt.y),ct=this.get("viewport");ct||this.initViewport();var pt=o/O.width,_t=pt*r,jt=pt*n,ae=r*-lt.x/O.width,ne=n*-lt.y/O.height,we=ae+_t,Fe=ne+jt;ae<0&&(_t+=ae,ae=0),we>r&&(_t=_t-(we-r)),ne<0&&(jt+=ne,ne=0),Fe>n&&(jt=jt-(Fe-n)),this.set("ratio",t);var Oe="".concat(ae,"px"),Ke="".concat(ne,"px");Va(ct,{left:Oe,top:Ke,width:"".concat(_t,"px"),height:"".concat(jt,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),l=t.get("width"),c=t.get("height");!l&&!c&&(l=200),l?(c=o*l,t.set("height",c)):(l=1/o*c,t.set("width",l));var d=vo("<div class='".concat(s,"' style='width: ").concat(l,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,f.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(d):r.get("container").appendChild(d),t.set("container",d);var T=vo('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');d.appendChild(T);var O=vo('<span style="display: table-cell; vertical-align: middle; "></span>');T.appendChild(O),t.set("containerDOM",T),t.set("containerSpan",O);var F=vo('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",F),t.updateImgSize(),O.appendChild(F),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=jE(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=vo('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(Cs),HE=VE,ZE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mv=function(){return mv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},mv.apply(this,arguments)},KE=as.distance,Kg=.05,$g={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},$E=function(i){ZE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,f.clone)($g),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Kg:a=1/(1-Kg);var l=r.get("maxR"),c=r.get("minR"),d=r.get("r");(d>(l||n.get("height"))&&a>1||d<(c||n.get("height")*.05)&&a<1)&&(a=1),d*=a,r.set("r",d),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),l={x:t.x,y:t.y};r.updateDelegate(l,s);var c=r.get("shouldShow"),d=r.get("vShapes");d&&d.forEach(function(lt){lt.remove(),lt.destroy()}),d=[],a.forEach(function(lt){var ct=lt.getModel(),pt=ct.x,_t=ct.y;KE({x:pt,y:_t},l)<s&&(o[ct.id]=lt)});var T=n.getEdges(),O=[];T.forEach(function(lt){var ct=lt.getModel(),pt=ct.source,_t=ct.target;c(ct)&&(u==="only-source"||u==="one"?o[pt]&&!o[_t]&&O.push(lt):u==="only-target"||u==="one"?o[_t]&&!o[pt]&&O.push(lt):u==="both"&&o[pt]&&o[_t]&&O.push(lt))});var F=r.get("showNodeLabel"),K=r.get("showEdgelabel"),rt=n.get("group");O.forEach(function(lt){var ct=lt.get("group").get("children");ct.forEach(function(pt){var _t=pt.get("type"),jt=rt.addShape(_t,{attrs:pt.attr()});d.push(jt),F&&_t==="text"&&jt.set("visible",!0)})}),Object.keys(o).forEach(function(lt){var ct=o[lt],pt=ct.get("group").clone();if(rt.add(pt),d.push(pt),K)for(var _t=pt.get("children"),jt=0;jt<_t.length;jt++){var ae=_t[jt];ae.get("type")==="text"&&ae.set("visible",!0)}}),r.set("vShapes",d)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,l=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var d=r.get("dPercentText");d&&(d.remove(),d.destroy())}(l==="node"||l==="both")&&r.set("showNodeLabel",!0),(l==="edge"||l==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||$g;o=s.addShape("circle",{attrs:mv({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(l){n.scaleRByWheel(l)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(Cs),QE=$E,qE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),JE=as.pointLineDistance,tw={stroke:"#FA8C16",lineWidth:1},ew=function(i){qE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:tw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var l=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[l.minX,l.minY,l.maxX,l.minY,u],r["".concat(c,"lcrc")]=[l.minX,l.centerY,l.maxX,l.centerY,u],r["".concat(c,"blbr")]=[l.minX,l.maxY,l.maxX,l.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[l.minX,l.centerY,l.maxX,l.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[l.minX,l.minY,l.minX,l.maxY,u],n["".concat(c,"tcbc")]=[l.centerX,l.minY,l.centerX,l.maxY,u],n["".concat(c,"trbr")]=[l.maxX,l.minY,l.maxX,l.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[l.centerX,l.minY,l.centerX,l.maxY,u])})},e.prototype.show=function(t,r){var n=(0,f.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,l=o.tolerance,c={x:n.x+r.width/2,y:n.y},d={x:n.x+r.width/2,y:n.y+r.height/2},T={x:n.x+r.width/2,y:n.y+r.height},O={x:n.x,y:n.y+r.height/2},F={x:n.x+r.width,y:n.y+r.height/2},K=[],rt=[],lt=null;if(this.clearAlignLine(),(0,f.each)(s,function(pt){pt[4].isVisible&&(K.push(a.getLineDisObject(pt,c)),K.push(a.getLineDisObject(pt,d)),K.push(a.getLineDisObject(pt,T)))}),(0,f.each)(u,function(pt){pt[4].isVisible&&(rt.push(a.getLineDisObject(pt,O)),rt.push(a.getLineDisObject(pt,d)),rt.push(a.getLineDisObject(pt,F)))}),K.sort(function(pt,_t){return pt.dis-_t.dis}),rt.sort(function(pt,_t){return pt.dis-_t.dis}),K.length!==0&&K[0].dis<l){t.y=K[0].line[1]-K[0].point.y+n.y,lt={type:"item",horizontals:[K[0]]};for(var ct=1;ct<3;ct++)K[0].dis===K[ct].dis&&lt.horizontals.push(K[ct])}if(rt.length!==0&&rt[0].dis<l){t.x=rt[0].line[0]-rt[0].point.x+n.x,lt?lt.verticals=[rt[0]]:lt={type:"item",verticals:[rt[0]]};for(var ct=1;ct<3;ct++)rt[0].dis===rt[ct].dis&&lt.verticals.push(rt[ct])}lt&&(lt.bbox=r,this.addAlignLine(lt))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,l=s.alignLines,c=this.get("graph"),d=c.get("group");n==="item"&&(a&&(0,f.each)(a,function(T){var O=T.line,F=T.point,K=(O[0]+O[2])/2,rt,lt;F.x<K?(rt=F.x-r.width/2,lt=Math.max(O[0],O[2])):(rt=F.x+r.width/2,lt=Math.min(O[0],O[2]));var ct=(0,f.mix)({x1:rt,y1:O[1],x2:lt,y2:O[1]},u),pt=d.addShape("line",{attrs:ct,capture:!1});l.push(pt)}),o&&(0,f.each)(o,function(T){var O=T.line,F=T.point,K=(O[1]+O[3])/2,rt,lt;F.y<K?(rt=F.y-r.height/2,lt=Math.max(O[1],O[3])):(rt=F.y+r.height/2,lt=Math.min(O[1],O[3]));var ct=(0,f.mix)({x1:O[0],y1:rt,x2:O[0],y2:lt},u),pt=d.addShape("line",{attrs:ct,capture:!1});l.push(pt)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:JE(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,f.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(Cs),rw=ew,nw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),To=function(){return To=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},To.apply(this,arguments)},aw=["click","mouseenter"],iw=function(i){nw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=vo(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var l=this.render();Va(u,this.getContainerPos(l)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),l={top:0,right:1,bottom:2,left:3},c=0,d=0,T={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+d};return u.forEach(function(O){var F=s[l[O]],K=O;switch(O){case"top":F+=d;break;case"left":F+=c;break;case"bottom":F=n.getHeight()-t[1]-F+d,K="top";break;default:F=n.getWidth()-t[0]-F+c,K="left";break}T[K]=F}),T.top+=o+n.getContainer().offsetTop,T.left+=a+n.getContainer().offsetLeft,Object.keys(T).forEach(function(O){T[O]="".concat(T[O],"px")}),T},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";aw.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();Va(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(d){d.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(d){var T=d.get("children"),O=T[0],F=T[1];O.attr(To(To({},O.get("oriAttrs")),s)),F.attr(To(To({},F.get("oriAttrs")),u))});var l=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=l["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(d){var T=d.get("children"),O=T[0],F=T[1];O.attr(To(To({},O.get("oriAttrs")),l)),F.attr(To(To({},F.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],l=s[1];u.attr(u.get("oriAttrs")),l.attr(l.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",l=r.multiple;this.clearFilter(),l||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(lt){return lt.get("name")==="root"}),d=c.find(function(lt){return lt.get("name")==="node-group"}),T=c.find(function(lt){return lt.get("name")==="edge-group"}),O=d.get("children").filter(function(lt){return lt.get("active")}),F=T.get("children").filter(function(lt){return lt.get("active")}),K=0,rt=["getNodes","getEdges"];rt.forEach(function(lt){o[lt]().forEach(function(ct){var pt=!1,_t=lt==="getNodes"?O:F;_t.forEach(function(jt){var ae=n[jt.get("id")];pt=pt||ae(ct.getModel())}),pt?(o.setItemState(ct,u,!1),o.setItemState(ct,s,!0),K++):(o.setItemState(ct,s,!1),o.setItemState(ct,u,!0))})}),K||rt.forEach(function(lt){o[lt]().forEach(function(ct){o.clearItemStates(ct,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new _l({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],l=[a,o];u.forEach(function(Yr,Gn){s[Yr].forEach(function(kn){var Xr,fn=l[Gn].addGroup({id:kn.id,name:"node-container"}),An,On=kn.type,jn=t.getShapeSize(kn),ta=jn.width,ba=jn.height,La=jn.r,wi=t.getStyle(Yr.substr(0,4),kn);switch(kn.type){case"circle":An={r:La,x:0,y:0};break;case"rect":An={width:ta,height:ba,x:-ta/2,y:-ba/2};break;case"ellipse":An={rx:ta,ry:ba,x:0,y:0},On="ellipse";break;case"line":An={x1:-ta/2,y1:0,x2:ta/2,y2:0},On="line";break;case"quadratic":An={path:[["M",-ta/2,0],["Q",0,ta/2,ta/2,0]]},On="path";break;case"cubic":An={path:[["M",-ta/2,0],["C",-ta/6,ta/2,ta/6,-ta/2,ta/2,0]]},On="path";break;case"diamond":An={path:[["M",0,-ba],["L",ta,0],["L",0,ba],["L",-ta,0],["Z"]]},On="path";break;case"triangle":An={path:[["M",-ta,ba],["L",0,-ba],["L",ta,ba],["Z"]]},On="path";break;case"star":An={path:as.getStarPath(La*3,La*1.2)},On="path";break;default:An={r:La,x:0,y:0};break}var ii=fn.addShape(On,{attrs:To(To({},An),wi),name:"".concat(kn.type,"-node-keyShape"),oriAttrs:To({opacity:1},wi)});if(kn.label){var Si=ii.getBBox(),Di=((Xr=kn.labelCfg)===null||Xr===void 0?void 0:Xr.style)||{},uo=To({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},Di);fn.addShape("text",{attrs:To({x:Si.maxX+4,y:0,text:kn.label},uo),className:"legend-label",name:"".concat(kn.type,"-node-text"),oriAttrs:uo})}})});var c=this.get("padding"),d,T=n.find(function(Yr){return Yr.get("name")==="title-container"}),O={height:0,maxY:0,width:0};if(this.get("title")){T||(T=n.addGroup({name:"title-container"}));var F={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},K=this.get("titleConfig")||{},rt=Object.assign(F,K.style||{});d=T.addShape("text",{attrs:To({text:this.get("title")},rt)}),O=T.getCanvasBBox(),T.setMatrix([1,0,0,0,1,0,K.offsetX,K.offsetY,1])}this.layoutItems();var lt=n.getCanvasBBox(),ct=a.getCanvasBBox(),pt=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],_t=O.maxY<ct.minY?Math.abs(O.maxY-ct.minY)+c[0]:O.maxY+c[0],jt=[1,0,0,0,1,0,pt,_t,1];a.setMatrix(jt),lt=n.getCanvasBBox();var ae=[lt.minX+lt.width+c[1],lt.minY+lt.height+c[2]];if(d){var K=To({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));O=T.getCanvasBBox();var ne=T.getMatrix()||[1,0,0,0,1,0,0,0,1];K.position==="center"?ne[6]=ae[0]/2+K.offsetX:K.position==="right"?(ne[6]=ae[0]-c[3]+K.offsetX,d.attr({textAlign:"right"})):(ne[6]=c[3]+K.offsetX,d.attr({textAlign:"left"})),T.setMatrix(ne),O=T.getCanvasBBox(),pt=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],_t=ct.minY<O.maxY?Math.abs(O.maxY-ct.minY)+c[0]:O.maxY+c[0],jt=[1,0,0,0,1,0,pt,_t,1],a.setMatrix(jt);var we=[1,0,0,0,1,0,pt,_t,1];this.get("layout")==="vertical"?we[6]+=ct.maxX+this.get("horiSep"):we[7]+=ct.maxY+this.get("vertiSep"),o.setMatrix(we)}else{ct=a.getCanvasBBox();var Fe=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?Fe[6]+=jt[6]+ct.maxX+this.get("horiSep"):Fe[7]+=jt[7]+ct.maxY+this.get("vertiSep"),o.setMatrix(Fe)}lt=n.getCanvasBBox(),ct=a.getCanvasBBox(),jt=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var Oe=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Ke=o.getCanvasBBox();ae=[Math.max(ct.width+jt[6],Ke.width+Oe[6])+c[1],Math.max(ct.height+jt[7],Ke.height+Oe[7])+c[2]],r.changeSize(ae[0],ae[1]);var sr=this.get("containerStyle"),Jr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],Tn=as.invertMatrix({x:0,y:0},Jr),vn=n.addShape("rect",{attrs:To({x:Tn.x+(sr.lineWidth||1),y:Tn.y+(sr.lineWidth||1),width:ae[0]-2*(sr.lineWidth||1),height:ae[1]-2*(sr.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},sr),name:"legend-back-rect",capture:!1});return vn.toBack(),ae},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(_t){return _t.get("name")==="root"}),l=u.find(function(_t){return _t.get("name")==="node-group"}),c=u.find(function(_t){return _t.get("name")==="edge-group"}),d={min:0,max:-1/0},T=-1/0;l.get("children").forEach(function(_t,jt){jt===0&&(d.min=s[0]);var ae=_t.get("children")[0],ne=_t.getCanvasBBox(),we=ae.getBBox(),Fe=we.width,Oe=we.height,Ke=0,sr=0,Jr=0;a==="vertical"?(sr=s[1],Jr=s[0]+Fe/2,s[0]=Jr+ne.height+n,Ke=ne.maxX+sr+Fe/2):(sr=s[0]+Fe/2,Jr=s[1],s[0]=sr+ne.width+r,Ke=ne.maxY+Jr+Oe/2),s[0]>d.max&&(d.max=s[0]),Ke>T&&(T=Ke),_t.setMatrix([1,0,0,0,1,0,sr,Jr,1])});var O=d.max-d.min,F={min:0,max:-1/0},K=l.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?K.maxX+r:K.maxY+n,c.get("children").forEach(function(_t,jt){jt===0&&(F.min=s[0]);var ae=_t.get("children")[0],ne=_t.getCanvasBBox(),we=ae.getBBox(),Fe=we.width,Oe=we.height,Ke=0,sr=0;a==="vertical"?(Ke=s[1],sr=s[0],s[0]=sr+ne.height+n,_t.setMatrix([1,0,0,0,1,0,0,sr+Oe/2,1])):(Ke=s[0],sr=s[1],s[0]=Ke+ne.width+r,_t.setMatrix([1,0,0,0,1,0,Ke+Fe/2,0,1])),s[0]>F.max&&(F.max=s[0])});var rt=F.max-F.min;if(o&&o!==""&&o!=="left"){var lt=O-rt,ct=o==="center"?Math.abs(lt)/2:Math.abs(lt),pt=lt<0?l:c;pt.get("children").forEach(function(_t){var jt=_t.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?jt[7]+=ct:jt[6]+=ct,_t.setMatrix(jt)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,l,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],d=((l=n.labelCfg)===null||l===void 0?void 0:l.style)||{};r.nodes.push({id:n.id||(0,f.uniqueId)(),type:n.type||"circle",style:To({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:To({fontFamily:"Arial"},d)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},l=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,f.uniqueId)(),type:s,size:l,style:To({lineWidth:(0,f.isArray)(l)?l[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:To({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,f.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,f.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,f.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,f.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return To(To({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(Cs),ow=iw,sw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Js=function(){return Js=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Js.apply(this,arguments)},Qg=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&lh()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var qg="canvas-annotation",uw=function(i){sw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Js(Js({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,l=t.borderRadius,c=l===void 0?5:l,d=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",T=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),O="<p class='g6-annotation-close'>x</p>",F=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(F,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(d,`
          `).concat(O,`
        </div>
        `).concat(T,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new _l({container:n,width:s.right-s.left,height:s.bottom-s.top});Va(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,f.debounce)(function(){return t.resizeCanvas(t)},100));var l=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",l),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(d){var T,O=((T=d==null?void 0:d.getModel)===null||T===void 0?void 0:T.call(d))||{},F=O.label,K=O.id;return F||K||"-"}),t.get("getContent")||t.set("getContent",function(d){var T,O;if(!d)return"-";var F=((T=d.getModel)===null||T===void 0?void 0:T.call(d))||{},K=F.label,rt=F.id,lt=(O=d.getType)===null||O===void 0?void 0:O.call(d),ct=lt?"".concat(lt,": "):"";return"".concat(ct).concat(K||rt||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,l=o.top,c=o.bottom,d=c-l,T=u-s,O=r.position,F=O===void 0?"top":O,K=r.offsetX,rt=K===void 0?0:K,lt=r.offsetY,ct=lt===void 0?0:lt,pt=Qg(r,["position","offsetX","offsetY"]),_t=r.height,jt=_t===void 0?"fit-content":_t,ae=r.width,ne=ae===void 0?n.getWidth():ae;jt==="100%"&&(jt=d),ne==="100%"&&(ne=T);var we="unset",Fe="unset",Oe={};switch(F){case"right":we="".concat(d,"px"),Oe={top:0,right:0},Oe.right+=s+rt,Oe.top+=l+ct;break;case"bottom":Fe="".concat(T,"px"),Oe={bottom:0,left:0},Oe.left+=s+rt,Oe.bottom+=l+ct;break;case"top":Fe="".concat(T,"px");case"left":we="".concat(d,"px");default:Oe={top:0,left:0},Oe.left+=s+rt,Oe.top+=l+ct;break}Object.keys(Oe).forEach(function(sr){Oe[sr]="".concat(Oe[sr],"px")});var Ke=vo("<div class='".concat(r.className," g6-annotation-container'></div>"));return Va(Ke,Js(Js({position:"absolute",display:F==="top"||F==="bottom"?"inline-flex":"unset",width:(0,f.isNumber)(ne)?"".concat(ne,"px"):ne,height:(0,f.isNumber)(jt)?"".concat(jt,"px"):jt,maxHeight:we,maxWidth:Fe,overflow:"scroll"},Oe),pt)),a.appendChild(Ke),Ke.addEventListener("scroll",function(sr){t.updateLinks()}),Ke}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),l=u.x,c=u.y,d=a.getClientByPoint(s.x,s.y),T=d.x,O=d.y;Object.values(n).forEach(function(F){var K=F.card;if(K){var rt=K.style,lt=nf(rt.left),ct=nf(rt.top),pt=K.getBoundingClientRect(),_t=pt.width,jt=pt.height,ae=lt,ne=ct;lt+_t>T-l&&(ae=T-l-_t),lt<0&&(ae=0),ct+jt>O-c&&(ne=O-c-jt),ct<0&&(ne=0),Va(K,{left:"".concat(ae,"px"),top:"".concat(ne,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),l=o.get("container"),c=o.get("containerCfg"),d=Object.assign({},o.get("cardCfg")||{},r),T=d.minHeight,O=d.minWidth,F=d.width,K=d.height,rt=d.collapsed,lt=rt===void 0?!1:rt,ct=d.x,pt=d.y,_t=d.title,jt=d.content,ae=d.maxTitleLength,ne=d.defaultBegin,we=Qg(d,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),Fe=o.get("linkGroup"),Oe=this.get("rows")||[[]],Ke=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),sr=Ke?qg:t.getID(),Jr=s[sr]||{},Tn=Jr.card,vn=Jr.link,Yr=Jr.x,Gn=Jr.y,kn=Jr.title,Xr=Jr.content,fn=this.get("getTitle"),An=this.get("getContent"),On=this.get("getContentPlaceholder")||function(){return""},jn=this.get("getTitlePlaceHolder")||function(){return""},ta=On(t),ba=jn(t),La=vo(this.getDOMContent(Js({itemId:sr,collapsed:lt,title:((a=kn||_t||(fn==null?void 0:fn(t)))===null||a===void 0?void 0:a.substr(0,ae))||ba,content:Xr||jt||(An==null?void 0:An(t))||ta},we))),wi=(0,f.isNumber)(T)?"".concat(T,"px"):T;Va(La,{minHeight:lt?"unset":wi,minWidth:(0,f.isNumber)(O)?"".concat(O,"px"):O,height:K,width:F});var ii=!!Tn;ii?(vn==null||vn.remove(!0),l.replaceChild(La,Tn)):l.appendChild(La);var Si;if(!c){if(Si=l.getBoundingClientRect()||{},ct!==void 0&&pt!==void 0)Yr=ct,Gn=pt;else if(!ii&&!Ke){var Di=Si.top,uo=ne||{},Ki=uo.left,tu=uo.right,Vo=tu===void 0?16:tu,eu=uo.top,Ho=eu===void 0?8:eu,Zo=uo.bottom,zs=Vo,is=Ho;isNaN(Ki)||(zs=l.scrollWidth-Ki),isNaN(Zo)||(is=l.scrollHeight-Zo);var ys=(0,f.isNumber)(O)?O:100;Yr=l.scrollWidth-La.scrollWidth-(Oe.length-1)*ys-zs;var Ha=Oe[Oe.length-1],yi=(Ha[Ha.length-1]||{}).bbox;Gn=(yi==null?void 0:yi.bottom)-Di||is}Va(La,{position:"absolute",left:"".concat(Yr,"px"),top:"".concat(Gn,"px"),cusor:c?"unset":"move"})}this.bindListener(La,sr);var Wa=La.getBoundingClientRect();if(!Ke){var bi=yv(t,Wa,u,this.get("canvas")),Gi=this.get("linkStyle");vn=Fe.addShape("path",{attrs:Js({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:bi},Gi)})}if(s[sr]=Js(Js({},s[sr]||{}),{id:sr,collapsed:lt,card:La,link:vn,x:Yr,y:Gn,cardBBox:Wa,content:Xr||jt,title:kn||_t,contentPlaceholder:ta,titlePlaceholder:ba,isCanvas:Ke}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var fa=!isNaN(ct)&&!isNaN(pt);if(!ii&&!Ke&&!fa){var $a=Si.bottom,Ja=$a===void 0?0:$a,Di=Si.top;Oe[Oe.length-1].push({id:sr,bbox:Wa}),Wa.top>Ja-Di-Wa.height-16&&Oe.push([]),this.set("rows",Oe)}}this.updateCardSize(sr);var Ui=this.get("onAnnotationChange");Ui==null||Ui(s[sr],ii?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=nf(o.paddingLeft)+nf(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var l=u.card,c=l.getBoundingClientRect().width;switch(n){case"right":Va(l,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":Va(l,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Js(Js({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;Va(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var l;if(u.target.className==="g6-annotation-collapse"?l="collapse":u.target.className==="g6-annotation-expand"?l="expand":u.target.className==="g6-annotation-close"&&(l="close"),l){var c=n.get("cardCfg").onMouseEnterIcon,d=c===void 0?function(){}:c;d(u,r,l)}}),t.addEventListener("mouseout",function(u){var l;if(u.target.className==="g6-annotation-collapse"?l="collapse":u.target.className==="g6-annotation-expand"?l="expand":u.target.className==="g6-annotation-close"&&(l="close"),l){var c=n.get("cardCfg").onMouseLeaveIcon,d=c===void 0?function(){}:c;d(u,r,l)}}),t.addEventListener("mouseenter",function(u){var l=n.get("cardInfoMap");if(l){var c=n.get("graph"),d=c.findById(r);if(d){var T=n.get("itemHighlightState");c.setItemState(d,T,!0)}var O=l[r].link;if(O){var F=n.get("linkHighlightStyle")||{};O.attr(F)}}}),t.addEventListener("mouseleave",function(u){var l=n.get("cardInfoMap");if(l){var c=n.get("graph"),d=c.findById(r);if(d){var T=n.get("itemHighlightState");c.setItemState(d,T,!1)}var O=l[r].link;if(O){var F=n.get("linkHighlightStyle")||{};Object.keys(F).forEach(function(rt){O.attr(rt,void 0),O.attr(rt,void 0)});var K=n.get("linkStyle");O.attr(K)}}}),t.addEventListener("click",function(u){var l=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),l==null||l(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var d=n.get("cardCfg").closeType;d==="remove"?n.removeCard(r):n.hideCard(r),l==null||l(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var l=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,d=c===void 0?20:c;if(l){var T=u.target,O=T.className;if(!(O!=="g6-annotation-title"&&O!=="g6-annotation-content")){var F=O==="g6-annotation-title"?T.getBoundingClientRect():T.parentNode.getBoundingClientRect(),K=F.width,rt=F.height,lt=getComputedStyle(T),ct=O==="g6-annotation-title"?"input":"textarea",pt=vo("<".concat(ct,' class="').concat(O,'-input" type="textarea" style="width:').concat(K,"px; height: ").concat(rt,'px; min-width: 16px;"/>')),_t=vo('<div class="'.concat(O,'-input-wrapper" style="width: ').concat(K,"px; height: ").concat(rt,"px; min-width: 16px; margin-right: ").concat(lt.marginRight,'" />'));_t.appendChild(pt),T.parentNode.replaceChild(_t,T);var jt=l[r],ae=jt.contentPlaceholder,ne=jt.titlePlaceholder,we=jt.content,Fe=jt.title,Oe=we;O==="g6-annotation-title"?(pt.name="title",pt.maxLength=d,Oe=Fe):pt.name="content",Oe?(pt.innerHTML=T.innerHTML,pt.value=T.innerHTML):pt.placeholder=O==="g6-annotation-title"?ne:ae,pt.focus(),pt.addEventListener("blur",function(Ke){pt.value&&(T.innerHTML=pt.value,jt[pt.name||"title"]=pt.value),_t.parentNode.replaceChild(T,_t),n.updateCardSize(r);var sr=n.get("onAnnotationChange");sr==null||sr(jt,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var l=u.target.className;if(!o.includes(l)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:nf(c.left),top:nf(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var l=n.get("cardInfoMap");if(l){var c=u.clientX,d=u.clientY,T=n.get("dragging");if(!(isNaN(c)||isNaN(d)||!T)){var O=T.x,F=T.y,K=T.left,rt=T.top,lt=T.card,ct=c-O,pt=d-F;K+=ct,rt+=pt;var _t=n.get("graph"),jt=_t.getPointByCanvas(0,0),ae=_t.getPointByCanvas(_t.getWidth(),_t.getHeight()),ne=_t.getClientByPoint(jt.x,jt.y),we=ne.x,Fe=ne.y,Oe=_t.getClientByPoint(ae.x,ae.y),Ke=Oe.x,sr=Oe.y,Jr=lt.getBoundingClientRect(),Tn=Jr.right-Jr.left,vn=Jr.bottom-Jr.top;(K>Ke-we-Tn&&ct>0||K<0&&ct<0)&&(K-=ct),(rt>sr-Fe-vn&&pt>0||rt<0&&pt<0)&&(rt-=pt),Va(lt,{left:"".concat(K,"px"),top:"".concat(rt,"px"),visibility:"hidden"}),O=c,F=d;var Yr=(l[r]||{}).link;if(Yr){var Gn=_t.findById(r);Yr.attr("path",yv(Gn,Jr,_t,n.get("canvas")))}n.set("dragging",{x:O,y:F,left:K,top:rt,card:lt})}}});var s=function(l){var c=n.get("cardInfoMap");if(c){var d=n.get("dragging");if(d){var T=d.left,O=d.top,F=d.card;c[r].x=T,c[r].y=O,Va(F,{visibility:"visible"}),n.set("dragging",!1);var K=n.get("rows");K==null||K.forEach(function(lt){for(var ct=lt.length-1;ct>=0;ct--)lt[ct].id===r&&lt.splice(ct,1)});var rt=n.get("onAnnotationChange");rt==null||rt(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=nf(s.marginLeft),l=o.getBoundingClientRect().width;Va(o,{marginRight:"".concat(a-u-24-16-l,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},l=u.link,c=u.card;if(l){var d=yv(r,c.getBoundingClientRect(),o,a);l.attr("path",d)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var l=n.findById(o);l&&l.isVisible()?t.toggleAnnotation(l):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var l=u.title,c=u.content,d=u.x,T=u.y,O=u.id,F=u.collapsed,K=u.card;if(!(K&&K.style.display==="none"&&!t)){var rt=n.findById(O)||n.get("canvas");s.push({id:O,x:d,y:T,collapsed:F,title:l||(a==null?void 0:a(rt)),content:c||(o==null?void 0:o(rt)),visible:K&&K.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,l=a.title,c=a.content,d=a.collapsed,T=a.visible,O=n.findById(o);if(!O&&o===qg&&(O=n.get("canvas")),!O){var F=r.get("cardInfoMap")||{};F[o]=a,r.set("cardInfoMap",F);return}r.toggleAnnotation(O,{x:s,y:u,title:l,content:c,collapsed:d}),T||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(Cs),lw=uw,cw=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(l){var c=e[l];Object.keys(t).forEach(function(d){var T=t[d],O=c.x-T.x,F=c.y-T.y,K=O*O+F*F;o>K&&(o=K,r=c,n=T,a=[l,d])})});var s=20,u=as.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},yv=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),l=u.minX,c=u.minY,d=u.maxX,T=u.maxY,O=e.getModel(),F=O.x,K=O.y;l+=F,c+=K,d+=F,T+=K,o={left:{x:l,y:(c+T)/2},right:{x:d,y:(c+T)/2},top:{x:(l+d)/2,y:c},bottom:{x:(l+d)/2,y:T}}}Object.keys(o).forEach(function(Fe){var Oe=o[Fe],Ke=Oe.x,sr=Oe.y,Jr=r.getClientByPoint(Ke,sr);o[Fe]=n.getPointByClient(Jr.x,Jr.y)});var rt=t.top,lt=rt===void 0?0:rt,ct=t.left,pt=ct===void 0?0:ct,_t=t.right,jt=_t===void 0?0:_t,ae=t.bottom,ne=ae===void 0?0:ae,we={left:n.getPointByClient(pt,(lt+ne)/2),right:n.getPointByClient(jt,(lt+ne)/2),top:n.getPointByClient((pt+jt)/2,lt),bottom:n.getPointByClient((pt+jt)/2,ne)};return cw(o,we)},nf=function(e){return Number(e.replace(/\s+|px/gi,""))||0},fw={PluginBase:Cs,Menu:Sb,Grid:bb,Minimap:Ib,Bundling:Nb,ToolBar:Ub,Tooltip:Xb,Fisheye:Bb,TimeBar:WE,ImageMinimap:HE,EdgeFilterLens:QE,SnapLine:rw,Legend:ow,Annotation:lw},dw=fw,jo=dw;Ml("circle",{options:{size:zn.defaultNode.size,style:{x:0,y:0,stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,f.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var l=o.width,c=o.height,d=o.show,T=o.text;if(d){var O="".concat(this.type,"-icon");T?t.shapeMap[O]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:O,name:O,draggable:!0}):t.shapeMap[O]=t.addShape("image",{attrs:(0,m.__assign)({x:-l/2,y:-c/2},o),className:O,name:O,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,l=n.size,c=n.r,d=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),T=this.getSize(e),O=T[0]/2;if(o){var F="link-point-left";t.shapeMap[F]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:-O,y:0,r:l/2||c||5}),className:F,name:F,isAnchorPoint:!0})}if(s){var K="link-point-right";t.shapeMap[K]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:O,y:0,r:l/2||c||5}),className:K,name:K,isAnchorPoint:!0})}if(a){var rt="link-point-top";t.shapeMap[rt]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:-O,r:l/2||c||5}),className:rt,name:rt,isAnchorPoint:!0})}if(u){var lt="link-point-bottom";t.shapeMap[lt]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:O,r:l/2||c||5}),className:lt,name:lt,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,f.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,m.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,m.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Ml("rect",{options:{size:[100,30],style:{radius:0,stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,l=n.size,c=n.r,d=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),T=this.getSize(e),O=T[0],F=T[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:-O/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:O/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:-F/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:F/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,f.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},l=(0,f.mix)({},a,s.attr(),u);l=(0,f.mix)(l,e.style),this.updateShape(e,t,l,!1,r),this.updateLinkPoints(e,n)}},"single-node"),Ml("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,l=n.show,c=n.text;return l&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,l=n.size,c=n.r,d=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),T=this.getSize(e),O=T[0]/2,F=T[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:-O,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:O,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:-F,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:F,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,f.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,m.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),l=(0,f.mix)({},a,u.attr(),s);l=(0,f.mix)(l,e.style),this.updateShape(e,t,l,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Ml("diamond",{options:{size:[80,80],style:{stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,l=n.show,c=n.text;return l&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,l=n.size,c=n.r,d=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),T=this.getSize(e),O=T[0],F=T[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:-O/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:O/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:-F/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:F/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,f.mix)({},t,r),a=this.getPath(e),o=(0,m.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),l=(0,f.mix)({},a,u.attr(),s);l=(0,f.mix)(l,e.style),this.updateShape(e,t,l,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Ml("triangle",{options:{size:40,direction:"up",style:{stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,l=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=l;var c=a.width,d=a.height,T=a.show,O=a.offset,F=a.text;if(T)if(F)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var K=-c/2,rt=-d/2;(u==="up"||u==="down")&&(rt+=O),(u==="left"||u==="right")&&(K+=O),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:K,y:rt},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),l},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,l=a.left,c=a.right,d=a.bottom,T=a.size,O=a.r,F=(0,m.__rest)(a,["top","left","right","bottom","size","r"]),K=this.getSize(e),rt=K[0];if(l){var lt=null,ct=rt*Math.sin(1/3*Math.PI),pt=rt*Math.sin(1/3*Math.PI);s==="up"?lt=[-pt,ct]:s==="down"?lt=[-pt,-ct]:s==="left"&&(lt=[-pt,pt-ct]),lt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},F),{x:lt[0],y:lt[1],r:T/2||O||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var _t=null,ct=rt*Math.sin(1/3*Math.PI),pt=rt*Math.sin(1/3*Math.PI);s==="up"?_t=[pt,ct]:s==="down"?_t=[pt,-ct]:s==="right"&&(_t=[pt,pt-ct]),_t&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},F),{x:_t[0],y:_t[1],r:T/2||O||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var jt=null,ct=rt*Math.sin(1/3*Math.PI),pt=rt*Math.sin(1/3*Math.PI);s==="up"?jt=[pt-ct,-ct]:s==="left"?jt=[pt,-ct]:s==="right"&&(jt=[-pt,-ct]),jt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},F),{x:jt[0],y:jt[1],r:T/2||O||5}),className:"link-point-top",name:"link-point-top"}))}if(d){var ae=null,ct=rt*Math.sin(1/3*Math.PI),pt=rt*Math.sin(1/3*Math.PI);s==="down"?ae=[-pt+ct,ct]:s==="left"?ae=[pt,ct]:s==="right"&&(ae=[-pt,ct]),ae&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},F),{x:ae[0],y:ae[1],r:T/2||O||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,f.mix)({},t,r),a=this.getPath(e),o=(0,m.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),l=(0,f.mix)({},a,u.attr(),s);l=(0,f.mix)(l,e.style),this.updateShape(e,t,l,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(Yr){return Yr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(Yr){return Yr.get("className")==="link-point-right"}),l=t.shapeMap["link-point-top"]||t.find(function(Yr){return Yr.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(Yr){return Yr.get("className")==="link-point-bottom"}),d=n,T=s||u||l||c;T&&(d=T.attr());var O=(0,f.mix)({},d,e.linkPoints),F=O.fill,K=O.stroke,rt=O.lineWidth,lt=O.size/2;lt||(lt=O.r);var ct=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},pt=ct.left,_t=ct.right,jt=ct.top,ae=ct.bottom,ne=this.getSize(e),we=ne[0],Fe={r:lt,fill:F,stroke:K,lineWidth:rt},Oe=null,Ke=we*Math.sin(1/3*Math.PI),sr=we*Math.sin(1/3*Math.PI);o==="up"?Oe=[-sr,Ke]:o==="down"?Oe=[-sr,-Ke]:o==="left"&&(Oe=[-sr,sr-Ke]),Oe&&(s?!pt&&pt!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,m.__assign)((0,m.__assign)({},Fe),{x:Oe[0],y:Oe[1]})):pt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Fe),{x:Oe[0],y:Oe[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Jr=null;o==="up"?Jr=[sr,Ke]:o==="down"?Jr=[sr,-Ke]:o==="right"&&(Jr=[sr,sr-Ke]),Jr&&(u?!_t&&_t!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,m.__assign)((0,m.__assign)({},Fe),{x:Jr[0],y:Jr[1]})):_t&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Fe),{x:Jr[0],y:Jr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var Tn=null;o==="up"?Tn=[sr-Ke,-Ke]:o==="left"?Tn=[sr,-Ke]:o==="right"&&(Tn=[-sr,-Ke]),Tn&&(l?!jt&&jt!==void 0?(l.remove(),delete t.shapeMap["link-point-top"]):l.attr((0,m.__assign)((0,m.__assign)({},Fe),{x:Tn[0],y:Tn[1]})):jt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Fe),{x:Tn[0],y:Tn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var vn=null;o==="down"?vn=[-sr+Ke,Ke]:o==="left"?vn=[sr,Ke]:o==="right"&&(vn=[-sr,Ke]),vn&&(c?!ae&&ae!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,m.__assign)((0,m.__assign)({},Fe),{x:vn[0],y:vn[1]})):ae&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Fe),{x:vn[0],y:vn[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),Ml("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:zn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:zn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:zn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],l=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=l;var c=n.show,d=(0,m.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,m.__assign)({x:-s/2,y:-u/2,height:u},d),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),l},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,l=n.x,c=n.y,d=n.offset,T=n.text,O=(0,m.__rest)(n,["width","height","x","y","offset","text"]);T?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},O),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,m.__assign)((0,m.__assign)({},O),{x:l||-o/2+s+d,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,l=n.x,c=n.y,d=n.offset,T=n.text,O=(0,m.__rest)(n,["width","height","x","y","offset","text"]);T?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},O),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,m.__assign)((0,m.__assign)({},O),{x:l||o/2-s+d,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,l=n.size,c=n.r,d=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),T=this.getSize(e),O=T[0],F=T[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:-O/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:O/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:-F/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},d),{x:0,y:F/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,l=u===void 0?{}:u,c=this.getSize(e),d=c[0],T=null,O=s.show,F=s.width,K=-d/2+a.offset;O&&(K=-d/2+F+a.offset);var rt=a.style,lt=l.style,ct=l.paddingTop;return(0,f.isString)(e.description)?(T=t.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},rt),{x:K,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=T,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},lt),{x:K,y:17+(ct||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(T=t.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},rt),{x:K,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=T),T},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,f.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,l=u===void 0?{}:u,c=this.getSize(e),d=c[0],T=c[1],O=t.get("keyShape");O.attr((0,m.__assign)((0,m.__assign)({},a),{x:-d/2,y:-T/2,width:d,height:T}));var F=t.getContainer(),K=F.shapeMap["rect-logo-icon"]||F.find(function(La){return La.get("className")==="rect-logo-icon"}),rt=K?K.attr():{},lt=(0,f.mix)({},rt,e.logoIcon),ct=lt.width;ct===void 0&&(ct=this.options.logoIcon.width);var pt=e.logoIcon?e.logoIcon.show:void 0,_t=s.offset,jt=-d/2+ct+_t;!pt&&pt!==void 0&&(jt=-d/2+_t);var ae=F.shapeMap["node-label"]||F.find(function(La){return La.get("className")==="node-label"}),ne=F.shapeMap["rect-description"]||F.find(function(La){return La.get("className")==="rect-description"});if(e.label)if(!ae)F.shapeMap["node-label"]=F.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},s.style),{x:jt,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var we=e.labelCfg?e.labelCfg.style:{},Fe=(0,f.mix)({},ae.attr(),we);e.label&&(Fe.text=e.label),Fe.x=jt,(0,f.isString)(e.description)&&(Fe.y=-5),ne&&(ne.resetMatrix(),ne.attr({x:jt})),ae.resetMatrix(),ae.attr(Fe)}if((0,f.isString)(e.description)){var Oe=l.paddingTop;if(!ne)F.shapeMap["rect-description"]=F.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},l.style),{x:jt,y:17+(Oe||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var we=e.descriptionCfg?e.descriptionCfg.style:{},Ke=(0,f.mix)({},ne.attr(),we);(0,f.isString)(e.description)&&(Ke.text=e.description),Ke.x=jt,ne.resetMatrix(),ne.attr((0,m.__assign)((0,m.__assign)({},Ke),{y:17+(Oe||0)}))}}var sr=F.shapeMap["pre-rect"]||F.find(function(La){return La.get("className")==="pre-rect"});if(sr&&!sr.destroyed){var Jr=(0,f.mix)({},sr.attr(),e.preRect);sr.attr((0,m.__assign)((0,m.__assign)({},Jr),{x:-d/2,y:-T/2,height:T}))}if(K&&!K.destroyed)if(!pt&&pt!==void 0)K.remove(),delete F.shapeMap["pre-rect"];else{var Tn=lt.width,vn=lt.height,Yr=lt.x,Gn=lt.y,kn=lt.offset,Xr=(0,m.__rest)(lt,["width","height","x","y","offset"]);K.attr((0,m.__assign)((0,m.__assign)({},Xr),{x:Yr||-d/2+Tn+kn,y:Gn||-vn/2,width:Tn,height:vn}))}else pt&&this.drawLogoIcon(e,F);var fn=F.shapeMap["rect-state-icon"]||F.find(function(La){return La.get("className")==="rect-state-icon"}),An=fn?fn.attr():{},On=(0,f.mix)({},An,e.stateIcon);if(fn){!On.show&&On.show!==void 0&&(fn.remove(),delete F.shapeMap["rect-state-icon"]);var jn=On.width,vn=On.height,Yr=On.x,Gn=On.y,ta=On.offset,ba=(0,m.__rest)(On,["width","height","x","y","offset"]);fn.attr((0,m.__assign)((0,m.__assign)({},ba),{x:Yr||d/2-jn+ta,y:Gn||-vn/2,width:jn,height:vn}))}else On.show&&this.drawStateIcon(e,F);this.updateLinkPoints(e,F)},getOptions:function(e,t){return t==="move"?e:(0,f.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),Ml("star",{options:{size:60,style:{stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,l=n.show,c=n.text;return l&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,l=n.rightBottom,c=n.size,d=n.r,T=(0,m.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),O=this.getSize(e),F=O[0];if(s){var K=Math.cos(.1*Math.PI)*F,rt=Math.sin((18+72*0)/180*Math.PI)*F;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},T),{x:K,y:-rt,r:c/2||d||5}),className:"link-point-right",name:"link-point-right"})}if(a){var K=Math.cos(.5*Math.PI)*F,rt=Math.sin((18+72*1)/180*Math.PI)*F;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},T),{x:K,y:-rt,r:c/2||d||5}),className:"link-point-top",name:"link-point-top"})}if(o){var K=Math.cos(.9*Math.PI)*F,rt=Math.sin((18+72*2)/180*Math.PI)*F;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},T),{x:K,y:-rt,r:c/2||d||5}),className:"link-point-left",name:"link-point-left"})}if(u){var K=Math.cos(1.3*Math.PI)*F,rt=Math.sin((18+72*3)/180*Math.PI)*F;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},T),{x:K,y:-rt,r:c/2||d||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(l){var K=Math.cos(1.7*Math.PI)*F,rt=Math.sin((18+72*4)/180*Math.PI)*F;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},T),{x:K,y:-rt,r:c/2||d||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return as.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,f.mix)({},t,r),a=this.getPath(e),o=(0,m.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),l=(0,f.mix)({},a,u.attr(),s);l=(0,f.mix)(l,e.style),this.updateShape(e,t,l,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ke){return Ke.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ke){return Ke.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ke){return Ke.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Ke){return Ke.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Ke){return Ke.get("className")==="link-point-right-bottom"}),l=r,c=n||a||o||s||u;c&&(l=c.attr());var d=(0,f.mix)({},l,e.linkPoints),T=d.fill,O=d.stroke,F=d.lineWidth,K=d.size/2;K||(K=d.r);var rt=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},lt=rt.left,ct=rt.right,pt=rt.top,_t=rt.leftBottom,jt=rt.rightBottom,ae=this.getSize(e),ne=ae[0],we={r:K,fill:T,stroke:O,lineWidth:F},Fe=Math.cos((18+72*0)/180*Math.PI)*ne,Oe=Math.sin((18+72*0)/180*Math.PI)*ne;a?!ct&&ct!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe})):ct&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),Fe=Math.cos((18+72*1)/180*Math.PI)*ne,Oe=Math.sin((18+72*1)/180*Math.PI)*ne,o?!pt&&pt!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe})):pt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),Fe=Math.cos((18+72*2)/180*Math.PI)*ne,Oe=Math.sin((18+72*2)/180*Math.PI)*ne,n?!lt&&lt!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe})):lt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),Fe=Math.cos((18+72*3)/180*Math.PI)*ne,Oe=Math.sin((18+72*3)/180*Math.PI)*ne,s?!_t&&_t!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe})):_t&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),Fe=Math.cos((18+72*4)/180*Math.PI)*ne,Oe=Math.sin((18+72*4)/180*Math.PI)*ne,u?!jt&&jt!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe})):jt&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},we),{x:Fe,y:-Oe}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Jg=as.defaultSubjectColors,zd="fan-shape-";Ml("donut",{options:{size:zn.defaultNode.size,style:{x:0,y:0,stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,f.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,l=o.height,c=o.show,d=o.text;return c&&(d?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-u/2,y:-l/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),hw(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,m.__assign)({},r)),vw(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var hw=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var l=t0(a,s),c=l.configs,d=l.totalValue;if(d){var T=e0(r),O=T.lineWidth,F=T.arcR,K=[F,0],rt=0;if(u===1){bv(t,{arcR:F,arcBegin:K,beginAngle:rt,config:c[0],fanIndex:0,lineWidth:O,totalValue:d,drawWhole:!0});return}for(var lt=0;lt<c.length;lt++){var ct=bv(t,{arcR:F,arcBegin:K,beginAngle:rt,config:c[lt],fanIndex:lt,lineWidth:O,totalValue:d});if(ct.shouldEnd)return;K=ct.arcBegin,rt=ct.beginAngle}}}},bv=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,l=t.totalValue,c=t.drawWhole,d=c===void 0?!1:c,T=t.updateShape,O=T===void 0?void 0:T,F=o.value/l;if(F<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var K,rt,lt;if(d||F>.999)K=[r,1e-4],lt=1;else{var ct=F*Math.PI*2;rt=a+ct,K=[r*Math.cos(rt),-r*Math.sin(rt)],lt=ct>Math.PI?1:0}var pt={path:[["M",n[0],n[1]],["A",r,r,0,lt,0,K[0],K[1]]],stroke:o.color||(O==null?void 0:O.attr("stroke"))||Jg[s%Jg.length],lineWidth:u};return O?O.attr(pt):e.shapeMap["".concat(zd).concat(s)]=e.addShape("path",{attrs:pt,name:"".concat(zd).concat(s),draggable:!0}),{beginAngle:rt,arcBegin:K,shape:e.shapeMap["".concat(zd).concat(s)],shouldEnd:d||F>.999}},vw=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var l=t0(n,o),c=l.configs,d=l.totalValue;if(d)for(var T=e0(r),O=T.lineWidth,F=T.arcR,K=[F,0],rt=0,lt=0;lt<c.length;lt++){var ct="".concat(zd).concat(lt),pt=bv(u,{arcR:F,arcBegin:K,beginAngle:rt,config:c[lt],fanIndex:lt,lineWidth:O,totalValue:d,drawWhole:c.length===1,updateShape:u.shapeMap[ct]});if(pt.shape&&(s[ct]=!0),pt.shouldEnd)break;K=pt.arcBegin,rt=pt.beginAngle}}var _t=Object.keys(u.shapeMap).filter(function(jt){return jt.includes(zd)});_t.forEach(function(jt){s[jt]||(u.shapeMap[jt].remove(!0),delete u.shapeMap[jt])})},t0=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},e0=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},mh=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},pw=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},rM=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},xv=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},r0=function(e){return xv(e)},nM=function(e,t){return[e,{x:e.x,y:t.y},t]},yh=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},gw=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},Ev=function(e,t,r){var n=gw(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},n0=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},wv=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},bh=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},mw=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},yw=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},bw=function(e,t){return mw(e,t.x).concat(yw(e,t.y))},Gd=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},xw=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},a0=function(e,t,r,n,a){return Gd(e,t)+Gd(e,r)+xw(e,[t,r,n,a])},Ew=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},aM=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},xh=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,l=r.x-t.x,c=r.y-t.y,d=n.x-t.x,T=n.y-t.y,O=a*u-o*s,F=l*T-c*d,K=a*c-o*l,rt=s*T-u*d;return O*F<=0&&K*rt<=0},Sv=function(e,t,r){if(r.width||r.height){var n=wv(r),a=n[0],o=n[1],s=n[2],u=n[3];return xh(e,t,a,o)||xh(e,t,a,u)||xh(e,t,o,s)||xh(e,t,s,u)}return!1},ww=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Sv(o,t,r)||Sv(o,t,n))return;a.push(o)}}),xv(a)},Sw=function(e,t,r,n,a,o,s){var u,l=[],c=(u={},u[t.id]=t,u),d={},T={},O={};T[t.id]=0,O[t.id]=a0(t,r,t);var F=new s0;F.add({id:t.id,value:O[t.id]});var K={};e.forEach(function(jt){K[jt.id]=jt});for(var rt;Object.keys(c).length;){var lt=F.minId(!1);if(lt)rt=c[lt];else break;if(rt===r){var ct=[];return Ew(ct,K,d,r.id),ct}delete c[rt.id],F.remove(rt.id),l.push(rt);var pt=ww(e,rt,n,a),_t=function(ae){ae.forEach(function(ne){if(l.indexOf(ne)===-1){var we=ne.id;c[we]||(c[we]=ne);var Fe=O[rt.id]+Gd(rt,ne);if(T[we]&&Fe>=T[we]){F.add({id:we,value:O[we]});return}d[we]=rt.id,T[we]=Fe,O[we]=T[we]+a0(ne,r,t,o,s),F.add({id:we,value:O[we]})}})};_t(pt)}return[t,r]},Mw=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},_w=function(e,t,r,n){var a=Gd(e,t),o=Gd(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},i0=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(Mw(a,s,u)){var l=_w(a,s,u,t),c=l[0],d=l[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(d.x," ").concat(d.y)),r.push("L".concat(d.x," ").concat(d.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},o0=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=mh(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var l=r.getModel(),c=l.x,d=l.y;o={x:c,y:d,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+d,maxY:u.maxY+d},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=mh(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=mh(t);else if(n.getType()==="combo"){var T=n.getKeyShape().getBBox();if(T){var O=n.getModel(),F=O.x,K=O.y;s={x:F,y:K,width:T.width,height:T.height,minX:T.minX+F,maxX:T.maxX+F,minY:T.minY+K,maxY:T.maxY+K},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=mh(t)}else s=n&&n.getBBox();var rt=yh(o,a),lt=yh(s,a),ct=Ev(rt,e,t),pt=Ev(lt,t,e),_t=pw([ct,pt]),jt=n0(rt,_t),ae=n0(lt,_t),ne=[];ne=ne.concat(wv(jt)).concat(wv(ae));var we={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[_t,jt,ae].forEach(function(Oe){ne=ne.concat(bw(Oe,we).filter(function(Ke){return bh(Ke,rt)&&bh(Ke,lt)}))}),[{x:ct.x,y:pt.y},{x:pt.x,y:ct.y}].forEach(function(Oe){bh(Oe,rt)&&bh(Oe,lt)&&ne.push(Oe)}),ne.unshift(ct),ne.push(pt),ne=xv(ne);var Fe=Sw(ne,ct,pt,o,s,e,t);return Fe.unshift(e),Fe.push(t),r0(Fe)},Cw=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},s0=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),Tw=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Aw=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Ow=function(e,t){return[e,t]},Iw=function(e,t,r,n,a){return r0(o0(e,t,r,n,a.offset))},Dw={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Tw,fallbackRoute:Iw},iM={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:Aw,fallbackRoute:Ow},Ol=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},Pw=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=yh(a.getBBox(),r),s=Ol(o.minX,t);s<=Ol(o.maxX,t);s+=1)for(var u=Ol(o.minY,t);u<=Ol(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Mv=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},u0=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},l0=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},c0=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,l=r.getBBox(),c=t.x>l.minX&&t.x<l.maxX&&t.y>l.minY&&t.y<l.maxY,d=yh(l,u);for(var T in d)d[T]=Ol(d[T],a.gridSize);if(c){for(var O=0,F=s;O<F.length;O++)for(var K=F[O],rt=[[{x:d.minX,y:d.minY},{x:d.maxX,y:d.minY}],[{x:d.minX,y:d.minY},{x:d.minX,y:d.maxY}],[{x:d.maxX,y:d.minY},{x:d.maxX,y:d.maxY}],[{x:d.minX,y:d.maxY},{x:d.maxX,y:d.maxY}]],T=0;T<4;T++){var lt=rt[T],ct=as.getLineIntersect(e,{x:e.x+K.stepX*d.width,y:e.y+K.stepY*d.height},lt[0],lt[1]);ct&&!Sv(e,ct,l)&&(ct.id="".concat(ct.x,"|||").concat(ct.y),o.push(ct))}return o}var pt=Ev(d,e,n);return pt.id="".concat(pt.x,"|||").concat(pt.y),[pt]},_v=function(e,t,r,n){var a=Mv(e,t),o=r[e.id];if(!o){var s=Mv(n,e);return u0(s,a)}var u=Mv({x:o.x,y:o.y},e);return u0(u,a)},Lw=function(e,t,r,n,a,o,s){var u=[n],l=n,c=e.id,d=e.x,T=e.y,O={x:d,y:T,id:c};_v(O,o,t,r)&&(l={x:o.x===n.x?n.x:O.x*s,y:o.y===n.y?n.y:O.y*s},u.unshift(l));for(var F=t[c];F&&F.id!==c;){var K={x:d,y:T,id:c},rt={x:F.x,y:F.y,id:F.id},lt=_v(rt,K,t,r);lt&&(l={x:rt.x===K.x?l.x:rt.x*s,y:rt.y===K.y?l.y:rt.y*s},u.unshift(l)),c=rt.id,d=rt.x,T=rt.y,F=t[c]}return u[0].x=d===r.x?a.x:l.x,u[0].y=T===r.y?a.y:l.y,u.unshift(a),u},Nw=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,f.deepMix)(Dw,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,l=Pw(o.obstacles.concat([r,n]),u,o.offset),c={x:Ol(e.x,u),y:Ol(e.y,u)},d={x:Ol(t.x,u),y:Ol(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(d.x,"|||").concat(d.y);var T=c0(c,e,r,d,o),O=c0(d,t,n,c,o);T.forEach(function(Xr){delete l[Xr.id]}),O.forEach(function(Xr){delete l[Xr.id]});for(var F={},K={},rt={},lt={},ct={},pt=new s0,_t=0;_t<T.length;_t++){var jt=T[_t];F[jt.id]=jt,lt[jt.id]=0,ct[jt.id]=l0(jt,O,o.distFunc),pt.add({id:jt.id,value:ct[jt.id]})}var ae=o.maximumLoops,ne,we,Fe,Oe,Ke,sr,Jr=1/0,Tn={};for(O.forEach(function(Xr){Tn["".concat(Xr.x,"|||").concat(Xr.y)]=!0}),Object.keys(F).forEach(function(Xr){var fn=F[Xr].id;ct[fn]<=Jr&&(Jr=ct[fn],ne=F[fn])});Object.keys(F).length>0&&ae>0;){var vn=pt.minId((ae+1)%30===0);if(vn)ne=F[vn];else break;if(Tn["".concat(ne.x,"|||").concat(ne.y)])return Lw(ne,rt,c,t,e,d,u);delete F[ne.id],pt.remove(ne.id),K[ne.id]=!0;for(var _t=0;_t<o.directions.length;_t++){we=o.directions[_t];var Yr="".concat(Math.round(ne.x)+we.stepX,"|||").concat(Math.round(ne.y)+we.stepY);if(Fe={x:ne.x+we.stepX,y:ne.y+we.stepY,id:Yr},!K[Yr]&&(sr=_v(ne,Fe,rt,c),!(sr>o.maxAllowedDirectionChange)&&!l[Yr])){F[Yr]||(F[Yr]=Fe);var Gn=s[sr];Oe=o.distFunc(ne,Fe)+(isNaN(Gn)?u:Gn),Ke=lt[ne.id]+Oe;var kn=lt[Yr];kn&&Ke>=kn||(rt[Yr]=ne,lt[Yr]=Ke,ct[Yr]=Ke+l0(Fe,O,o.distFunc),pt.add({id:Yr,value:ct[Yr]}))}}ae-=1}return o.fallbackRoute(e,t,r,n,o)};cp("polyline",{options:{color:zn.defaultEdge.color,size:zn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:zn.defaultEdge.style.stroke,lineAppendWidth:zn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:zn.edgeLabel.style.fill,fontSize:zn.edgeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,m.__assign)({},zn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,f.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var l=e.sourceNode,c=e.targetNode,d=n.radius,T=this.options.routeCfg,O=(0,f.mix)({},T,e.routeCfg);O.offset=n.offset;var F=this.getPath(u,l,c,d,O,!Boolean(s));((0,f.isArray)(F)&&F.length<=1||(0,f.isString)(F)&&F.indexOf("L")===-1)&&(F="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(F="M0 0, L0 0");var K=(0,f.mix)({},zn.defaultEdge.style,n,{lineWidth:e.size,path:F});return K},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(_t){return _t.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,l=this.getControlPoints(e),c=[s];l&&(c=c.concat(l)),c.push(u);var d=a.attr(),T=(0,f.mix)({},n,d,e.style),O=e.sourceNode,F=e.targetNode,K=T.radius,rt=this.options.routeCfg,lt=(0,f.mix)({},rt,e.routeCfg);lt.offset=T.offset;var ct=this.getPath(c,O,F,K,lt,!Boolean(l));((0,f.isArray)(ct)&&ct.length<=1||(0,f.isString)(ct)&&ct.indexOf("L")===-1)&&(ct="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(ct="M0 0, L0 0"),d.endArrow&&T.endArrow===!1&&(e.style.endArrow={path:""}),d.startArrow&&T.startArrow===!1&&(e.style.startArrow={path:""});var pt=(0,f.mix)(n,a.attr(),{lineWidth:o,path:ct},e.style);a&&a.attr(pt)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,l=a.simple;if(!s||e.length>2||o===!1){if(n)return i0(e,n);var c=[];return(0,f.each)(e,function(F,K){K===0?c.push(["M",F.x,F.y]):c.push(["L",F.x,F.y])}),c}l!==!1&&!(u!=null&&u.length)&&(l=!0);var d=l?o0(e[e.length-1],e[0],r,t,s):Nw(e[0],e[e.length-1],t,r,a);if(!d||!d.length)return"M0 0, L0 0";if(n){var T=i0(d,n);return T}d=Cw(d);var O=as.pointsToPolygon(d);return O}},"single-edge");var f0=Cl.cloneEvent,d0=Cl.isNaN,h0=Math.abs,Rw=10,kw=["shift","ctrl","alt","control"],Bw={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(d0(r)||d0(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,d=this.scalableRange;c<1&&c>-1&&(c=s*c,d=u*d),(l.minX<=s+c&&l.minX+a>s+c||l.maxX+c>=0&&l.maxX+c+a<0)&&(a=0),(l.minY<=u+d&&l.minY+o>u+d||l.maxY+d>=0&&l.maxY+d+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(pt){pt.set("ori-visibility",pt.get("ori-visibility")||pt.get("visible")),pt.hide()})}for(var l=n.getNodes(),c=0,d=l.length;c<d;c++)for(var T=l[c].getContainer(),O=T.get("children"),F=0,K=O;F<K.length;F++){var rt=K[F],lt=rt.get("isKeyShape");lt||(rt.set("ori-visibility",rt.get("ori-visibility")||rt.get("visible")),rt.hide())}}if(typeof window!="undefined"){var ct=this;this.handleDOMContextMenu=function(pt){return ct.onMouseUp(pt)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=f0(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(h0(this.origin.x-e.clientX)+h0(this.origin.y-e.clientY)<Rw)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(ne){return ne.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=n.getEdges(),c=0,d=l.length;c<d;c++){var T=l[c].get("group").get("children");T&&T.forEach(function(ne){var we=ne.get("ori-visibility");ne.set("ori-visibility",void 0),we&&ne.show()})}if(a>u)for(var O=n.getNodes(),F=0,K=O.length;F<K;F++)for(var rt=O[F].getContainer(),lt=rt.get("children"),ct=0,pt=lt;ct<pt.length;ct++){var _t=pt[ct],jt=_t.get("isKeyShape");if(!jt){var ae=_t.get("ori-visibility");_t.set("ori-visibility",void 0),ae&&_t.show()}}}if(!this.dragging){this.origin=null;return}e=f0(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(kw.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,f.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,f.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,l=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!l&&c==="combo")return!1}return!0}},Fw={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,m.__assign)((0,m.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,m.__assign)((0,m.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var l=u.findAllByState("node",this.selectedState),c=n.get("id"),d=l.filter(function(O){var F=O.get("id");return c===F});if(d.length===0?this.targets.push(n):l.length>1?l.forEach(function(O){var F=O.hasLocked();F||t.targets.push(O)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var T=[];this.targets.forEach(function(O){var F=O.getModel(),K=F.x,rt=F.y,lt=F.id;T.push({x:K,y:rt,id:lt})}),this.set("beforeDragNodes",T)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(O){var F=O.getEdges();F.forEach(function(K){K.isVisible()&&(t.hidenEdge[K.getID()]=!0,K.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,l=s.y,c=s.id;a.after.nodes.push({x:u,y:l,id:c})}),n.pushStack("update",(0,f.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var l=u.getModel();a!==l.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var l=u.getModel();l.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var l={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,l,!1):e.updatePosition(l)},debounceUpdate:(0,f.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(l){var c=l.get("model"),d=l.get("id");r[d]||(r[d]={x:c.x||0,y:c.y||0});var T=a.x-n.x+r[d].x,O=a.y-n.y+r[d].y,F={x:T,y:O};o?t.updateItem(l,F,!1):l.updatePosition(F)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var T=e.x-this.origin.x+this.originPoint.minX,O=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:T,y:O})}else{var r=t.get("group"),n=(0,f.deepMix)({},qc.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,l=a.height,c=a.minX,d=a.minY;this.originPoint={x:o,y:s,width:u,height:l,minX:c,minY:d},this.delegateRect=r.addShape("rect",{attrs:(0,m.__assign)({width:u,height:l,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],l=u.getBBox(),c=l.minX,d=l.minY,T=l.maxX,O=l.maxY;c<r&&(r=c),d<a&&(a=d),T>n&&(n=T),O>o&&(o=O)}var F=Math.floor(r),K=Math.floor(a),rt=Math.ceil(n)-Math.floor(r),lt=Math.ceil(o)-Math.floor(a);return{x:F,y:K,width:rt,height:lt,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},zw={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,f.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){for(var n=e.activeState,a=e.inactiveState,o=r.getNodes(),s=r.getCombos(),u=r.getEdges(),l=r.get("vedges"),c=o.length,d=s.length,T=u.length,O=l.length,F=e.inactiveItems||{},K=e.activeItems||{},rt=0;rt<c;rt++){var lt=o[rt],ct=lt.getID(),pt=lt.hasState("selected");e.resetSelected&&pt&&r.setItemState(lt,"selected",!1),K[ct]&&(r.setItemState(lt,n,!1),delete K[ct]),a&&!F[ct]&&(r.setItemState(lt,a,!0),F[ct]=lt)}for(var rt=0;rt<d;rt++){var _t=s[rt],jt=_t.getID(),pt=_t.hasState("selected");e.resetSelected&&pt&&r.setItemState(_t,"selected",!1),K[jt]&&(r.setItemState(_t,n,!1),delete K[jt]),a&&!F[jt]&&(r.setItemState(_t,a,!0),F[jt]=_t)}for(var rt=0;rt<T;rt++){var ae=u[rt],ne=ae.getID();K[ne]&&(r.setItemState(ae,n,!1),delete K[ne]),a&&!F[ne]&&(r.setItemState(ae,a,!0),F[ne]=ae)}for(var rt=0;rt<O;rt++){var we=l[rt],Fe=we.getID();K[Fe]&&(r.setItemState(we,n,!1),delete K[Fe]),a&&!F[Fe]&&(r.setItemState(we,a,!0),F[Fe]=we)}if(t&&!t.destroyed){a&&(r.setItemState(t,a,!1),delete F[t.getID()]),K[t.getID()]||(r.setItemState(t,n,!0),K[t.getID()]=t);for(var Oe=t.getEdges(),Ke=Oe.length,rt=0;rt<Ke;rt++){var ae=Oe[rt],ne=ae.getID(),sr=void 0;ae.getSource()===t?sr=ae.getTarget():sr=ae.getSource();var Jr=sr.getID();a&&F[Jr]&&(r.setItemState(sr,a,!1),delete F[Jr]),K[Jr]||(r.setItemState(sr,n,!0),K[Jr]=sr),F[ne]&&(r.setItemState(ae,a,!1),delete F[ne]),K[ne]||(r.setItemState(ae,n,!0),K[ne]=ae),ae.toFront()}}e.activeItems=K,e.inactiveItems=F,r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,f.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Eh=Math.min,v0=Math.max,p0=Math.abs,g0="shift",Gw=["drag","shift","ctrl","alt","control"],Uw={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:g0,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Gw.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=g0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,l={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),d=Eh(l.x,c.x),T=v0(l.x,c.x),O=Eh(l.y,c.y),F=v0(l.y,c.y),K=[],rt=[];n.getNodes().forEach(function(pt){if(pt.isVisible()&&s(pt,d,T,O,F)&&o(pt,"select",t)){K.push(pt);var _t=pt.getModel();rt.push(_t.id),n.setItemState(pt,u,!0)}});var lt=[];this.includeEdges&&K.forEach(function(pt){var _t=pt.getOutEdges();_t.forEach(function(jt){if(jt.isVisible()){var ae=jt.getModel(),ne=ae.source,we=ae.target;rt.includes(ne)&&rt.includes(we)&&o(jt,"select",t)&&(lt.push(jt),n.setItemState(jt,t.selectedState,!0))}})});var ct=[];this.includeCombos&&n.getCombos().forEach(function(pt){if(pt.isVisible()&&s(pt,d,T,O,F)&&o(pt,"select",t)){ct.push(pt);var _t=pt.getModel();rt.push(_t.id),n.setItemState(pt,u,!0)}}),this.selectedEdges=lt,this.selectedNodes=K,this.selectedCombos=ct,this.onSelect&&this.onSelect(K,lt,ct),n.emit("nodeselectchange",{selectedItems:{nodes:K,edges:lt,combos:ct},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:p0(e.canvasX-t.x),height:p0(e.canvasY-t.y),x:Eh(e.canvasX,t.x),y:Eh(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},m0="shift",Ww=["shift","ctrl","alt","control"],Yw={getDefaultCfg:function(){return{multiple:!0,trigger:m0,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return Ww.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=m0,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,l=t.shouldBegin;if(l(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,f.each)(c,function(K){K!==r&&a.setItemState(K,t.selectedState,!1)})}var d=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!d){var T=a.findAllByState("node",t.selectedState),O=a.findAllByState("edge",t.selectedState),F=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:T,edges:O,combos:F},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var T=a.findAllByState("node",t.selectedState),O=a.findAllByState("edge",t.selectedState),F=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:T,edges:O,combos:F},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var T=a.findAllByState("node",t.selectedState),O=a.findAllByState("edge",t.selectedState),F=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:T,edges:O,combos:F},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,f.each)(o,function(l){n.setItemState(l,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,f.each)(s,function(l){n.setItemState(l,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,f.each)(u,function(l){n.setItemState(l,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},Xw=ft,y0=.05,jw={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(K,rt){return Math.hypot(rt.x-K.x,rt.y-K.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),l=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>l||s<u)){var c=this.get("animate"),d=this.get("animateCfg"),T=this.graph.get("canvas"),O=T.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:O.x,y:O.y},c,d),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),l=n.getZoom(),c=l,d=l;e.wheelDelta<0?c=1-y0*u:c=1/(1-y0*u),d=l*c;var T=this.get("minZoom")||n.get("minZoom"),O=this.get("maxZoom")||n.get("maxZoom");d>O?d=O:d<T&&(d=T);var F=this.get("enableOptimize");if(F){var K=this.get("optimizeZoom"),rt=this.get("optimized"),lt=n.getNodes(),ct=n.getEdges(),pt=lt.length,_t=ct.length;if(!rt){for(var jt=0;jt<pt;jt++){var ae=lt[jt];if(!ae.destroyed)for(var ne=ae.get("group").get("children"),we=ne.length,Fe=0;Fe<we;Fe++){var Oe=ne[Fe];!Oe.destoryed&&!Oe.get("isKeyShape")&&(Oe.set("ori-visibility",Oe.get("ori-visibility")||Oe.get("visible")),Oe.hide())}}for(var Ke=0;Ke<_t;Ke++)for(var sr=ct[Ke],ne=sr.get("group").get("children"),we=ne.length,Fe=0;Fe<we;Fe++){var Oe=ne[Fe];Oe.set("ori-visibility",Oe.get("ori-visibility")||Oe.get("visible")),Oe.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Jr=setTimeout(function(){var Ha=n.getZoom(),yi=t.get("optimized");if(yi){t.set("optimized",!1);for(var Wa=0;Wa<pt;Wa++){var bi=lt[Wa],Gi=bi.get("group").get("children"),fa=Gi.length;if(Ha<K){var $a=bi.getKeyShape(),Ja=$a.get("ori-visibility");$a.set("ori-visibility",void 0),Ja&&$a.show()}else for(var Ui=0;Ui<fa;Ui++){var ei=Gi[Ui],Ja=ei.get("ori-visibility");ei.set("ori-visibility",void 0),!ei.get("visible")&&Ja&&Ja&&ei.show()}}for(var li=0;li<_t;li++){var Eo=ct[li],Gi=Eo.get("group").get("children"),fa=Gi.length;if(Ha<K){var $a=Eo.getKeyShape(),Ja=$a.get("ori-visibility");$a.set("ori-visibility",void 0),Ja&&$a.show()}else for(var Ui=0;Ui<fa;Ui++){var ei=Gi[Ui];if(!ei.get("visible")){var Ja=ei.get("ori-visibility");ei.set("ori-visibility",void 0),Ja&&ei.show()}}}}},100);this.set("timeout",Jr)}if(l<=1){var Tn=void 0,vn=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Tn=n.findAllByState("node",a.fixState),vn=n.findAllByState("edge",a.fixState);for(var Yr=l/d,Gn=Tn.length,kn=0;kn<Gn;kn++){var ae=Tn[kn],Xr=ae.getContainer(),fn=ae.getModel(),An=ae.getOriginStyle(),On=ae.getStateStyle(a.fixState),jn=ae.get("shapeFactory").getShape(fn.type).getStateStyle(a.fixState,ae)[a.fixState];if(a.fixAll){if(d<=1){var ta=(0,f.clone)(Xr.getMatrix());ta||(ta=[1,0,0,0,1,0,0,0,1]);var ba=ae.getModel(),La=ba.x,wi=ba.y;ta=Xw(ta,[["t",-La,-wi],["s",Yr,Yr],["t",La,wi]]),Xr.setMatrix(ta)}}else for(var ne=Xr.get("children"),we=ne.length,Fe=0;Fe<we;Fe++){var Oe=ne[Fe],ii=void 0,Si=void 0;if(a.fixLabel){var Di=Oe.get("type");if(Di==="text"){ii=Oe.attr("fontSize")||12;var uo=On[Oe.get("name")],Ki=jn[Oe.get("name")],tu=uo?uo.fontSize:12,Vo=Ki?Ki.fontSize:12,eu=tu||Vo||12;if(d<=1&&Oe.attr("fontSize",eu/d),Si)break}}if(a.fixLineWidth&&Oe.get("isKeyShape")){Si=Oe.attr("lineWidth")||0;var Ho=On.lineWidth||jn.lineWidth||An.lineWidth||0;if(d<=1&&Oe.attr("lineWidth",Ho/d),ii)break}}}for(var Zo=vn.length,zs=0;zs<Zo;zs++)for(var sr=vn[zs],Xr=sr.getContainer(),ne=Xr.get("children"),fn=sr.getModel(),On=sr.getStateStyle(a.fixState),jn=sr.get("shapeFactory").getShape(fn.type).getStateStyle(a.fixState,sr)[a.fixState],we=ne.length,Fe=0;Fe<we;Fe++){var Oe=ne[Fe],ii=void 0,Si=void 0;if(a.fixLabel||a.fixAll){var Di=Oe.get("type");if(Di==="text"){ii=Oe.attr("fontSize")||12;var uo=On[Oe.get("name")],Ki=jn[Oe.get("name")],tu=uo?uo.fontSize:12,Vo=Ki?Ki.fontSize:12,eu=tu||Vo||12;if(d<=1&&Oe.attr("fontSize",eu/d),Si)break}}if((a.fixLineWidth||a.fixAll)&&Oe.get("isKeyShape")){Si=Oe.attr("lineWidth")||0;var Ho=On.lineWidth||jn.lineWidth||1;if(d<=1&&Oe.attr("lineWidth",Ho/d),ii)break}}}}var is=this.get("animate"),ys=this.get("animateCfg");n.zoomTo(d,{x:s.x,y:s.y},is,ys),n.emit("wheelzoom",e)}}},b0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,Va(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Va(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){Va(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),l=s.getCanvasByPoint(u.x,u.y),c=l.x,d=l.y,T=o.getBoundingClientRect();c>n/2?c-=T.width:c+=this.offset,d>a/2?d-=T.height:d+=this.offset;var O="".concat(c,"px"),F="".concat(d,"px");Va(this.container,{left:O,top:F,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=vo('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),Va(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},Vw=(0,m.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},b0),Hw=(0,m.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},b0),x0="click",Zw=["click","dblclick"],Kw={getDefaultCfg:function(){return{trigger:x0,onChange:function(){}}},getEvents:function(){var e,t;return Zw.includes(this.trigger)?t=this.trigger:(t=x0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},$w=Cl.calculationItemsBBox,Qw=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,f.each)(r,function(n){i(n,t)})}},qw={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(l){var c=l.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(l){var c=l.getModel(),d=c.x,T=c.y,O=c.id;u.push({x:d,y:T,id:O})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(l){var c=l.getModel();if(c.parentId){var d=r.findById(c.parentId);d&&r.setItemState(d,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],Qw(n,function(l){if(l.destroyed)return!1;var c=l.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,l=s.centerY,c=s.width,d=o.filter(function(T){var O=T.getModel();return a.parentId,O.id!==a.id&&!t.currentItemChildCombos.includes(O.id)});d.map(function(T){var O=T.getBBox(),F=O.centerX,K=O.centerY,rt=O.width,lt=u-F,ct=l-K,pt=2*Math.sqrt(lt*lt+ct*ct);c+rt-pt>.8*c?r.setItemState(T,t.activeState,!0):r.setItemState(T,t.activeState,!1)})}(0,f.each)(this.targets,function(T){t.updateCombo(T,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,f.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(l){t.onlyChangeComboSize?r.updateCombo(l):a!==l.getID()&&(s=r.findById(a),a!==l.getModel().parentId&&r.updateComboTree(l,a,!1))})}else this.targets.map(function(l){if(t.onlyChangeComboSize)r.updateCombo(l);else{var c=l.getModel();c.comboId&&r.updateComboTree(l,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var l=u.getModel(),c=l.x,d=l.y,T=l.id;s.after.combos.push({x:c,y:d,id:T}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,f.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,f.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,l=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,l+=n.y-t.y),a.updateItem(e,{x:u,y:l},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var T=e.x-this.origin.x+this.originPoint.minX,O=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:T,y:O})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=$w(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,l=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:l,minY:c};var d=(0,m.__assign)((0,m.__assign)({},qc.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,m.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},d),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},E0="dblclick",Jw=["click","dblclick"],tS={getDefaultCfg:function(){return{trigger:E0,relayout:!0}},getEvents:function(){var e,t;return Jw.includes(this.trigger)?t=this.trigger:(t=E0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},eS=Cl.isPolygonsIntersect,rS=Cl.pathToPoints,w0="shift",nS=["drag","shift","ctrl","alt","control"],aS=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=rS(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return eS(t,r)},iS={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:w0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return nS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=w0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&aS(c,a)&&n(c,"select",e)){s.push(c);var d=c.getModel();u.push(d.id),r.setItemState(c,o,!0)}});var l=[];this.includeEdges&&s.forEach(function(c){var d=c.getOutEdges();d.forEach(function(T){if(T.isVisible()){var O=T.getModel(),F=O.source,K=O.target;u.includes(F)&&u.includes(K)&&n(T,"select",e)&&(l.push(T),r.setItemState(T,e.selectedState,!0))}})}),this.selectedEdges=l,this.selectedNodes=s,this.onSelect&&this.onSelect(s,l),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:l},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,m.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},S0="click",oS=["click","drag"],M0=void 0,sS=["shift","ctrl","control","alt","meta",void 0],uS={getDefaultCfg:function(){return{trigger:S0,key:M0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;oS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=S0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&sS.indexOf(e.key.toLowerCase())===-1&&(e.trigger=M0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,f.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,m.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var l=(0,m.__assign)((0,m.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[l],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,f.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,m.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},_0="ctrl",lS=["shift","ctrl","alt","control"],cS="1",fS={getDefaultCfg:function(){return{trigger:_0,combinedKey:cS,functionName:"fitView",functionParams:[]}},getEvents:function(){return lS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=_0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},dS=["shift","ctrl","alt","control","meta"],hS={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||dS.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(fn){return e["".concat(fn,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var l=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var d=this.graph.get("width"),T=this.graph.get("height"),O=this.graph.get("canvas").getCanvasBBox(),F=this.scalableRange,K=this.scalableRange;F<1&&F>-1&&(F=d*F,K=T*K);var rt=O.minX,lt=O.maxX,ct=O.minY,pt=O.maxY;l>0?lt<-F?l=0:lt-l<-F&&(l=lt+F):l<0&&(rt>d+F?l=0:rt-l>d+F&&(l=rt-(d+F))),c>0?pt<-K?c=0:pt-c<-K&&(c=pt+K):c<0&&(ct>T+K?c=0:ct-c>T+K&&(c=ct-(T+K))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(l=0),r.translate(-l,-c)}e.preventDefault();var _t=this.get("enableOptimize");if(_t){var jt=this.get("optimizeZoom"),ae=this.get("optimized"),ne=r.getNodes(),we=r.getEdges(),Fe=ne.length,Oe=we.length;if(!ae){for(var Ke=0;Ke<Fe;Ke++){var sr=ne[Ke];if(!sr.destroyed)for(var Jr=sr.get("group").get("children"),Tn=Jr.length,vn=0;vn<Tn;vn++){var Yr=Jr[vn];!Yr.destoryed&&!Yr.get("isKeyShape")&&(Yr.set("ori-visibility",Yr.get("ori-visibility")||Yr.get("visible")),Yr.hide())}}for(var Gn=0;Gn<Oe;Gn++)for(var kn=we[Gn],Jr=kn.get("group").get("children"),Tn=Jr.length,vn=0;vn<Tn;vn++){var Yr=Jr[vn];Yr.set("ori-visibility",Yr.get("ori-visibility")||Yr.get("visible")),Yr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Xr=setTimeout(function(){var fn=r.getZoom(),An=t.get("optimized");if(An){t.set("optimized",!1);for(var On=0;On<Fe;On++){var jn=ne[On],ta=jn.get("group").get("children"),ba=ta.length;if(fn<jt){var La=jn.getKeyShape(),wi=La.get("ori-visibility");wi&&La.show()}else for(var ii=0;ii<ba;ii++){var Si=ta[ii],wi=Si.get("ori-visibility");!Si.get("visible")&&wi&&wi&&Si.show()}}for(var Di=0;Di<Oe;Di++){var uo=we[Di],ta=uo.get("group").get("children"),ba=ta.length;if(fn<jt){var La=uo.getKeyShape(),wi=La.get("ori-visibility");wi&&La.show()}else for(var ii=0;ii<ba;ii++){var Si=ta[ii];if(!Si.get("visible")){var wi=Si.get("ori-visibility");wi&&Si.show()}}}}},100);this.set("timeout",Xr)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,f.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,f.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,l=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!l&&c==="combo")return!1}return!0}},vS={"drag-canvas":Bw,"zoom-canvas":jw,"drag-node":Fw,"activate-relations":zw,"brush-select":Uw,"click-select":Yw,"lasso-select":iS,tooltip:Vw,"edge-tooltip":Hw,"collapse-expand":Kw,"drag-combo":qw,"collapse-expand-combo":tS,"create-edge":uS,"shortcuts-call":fS,"scroll-canvas":hS};(0,f.each)(vS,function(i,e){fp(e,i)});var pS=(0,m.__assign)((0,m.__assign)({},g),Lm),oM=jo.Grid,sM=jo.Minimap,uM=jo.Bundling,lM=jo.Menu,gS=jo.Fisheye,cM=jo.ToolBar,fM=jo.Tooltip,mS=jo.TimeBar,yS=jo.ImageMinimap,bS=jo.EdgeFilterLens,xS=jo.SnapLine,dM=jo.Legend,ES=jo.Annotation,C0={version:qc.version,Graph:ng,TreeGraph:pb,Util:Cl,Layout:qa.Layouts,TreeLayout:$1,registerLayout:Q1,Global:qc,registerBehavior:fp,registerCombo:Pm,registerEdge:cp,registerNode:Ml,Minimap:jo.Minimap,Grid:jo.Grid,Bundling:jo.Bundling,Menu:jo.Menu,ToolBar:jo.ToolBar,Tooltip:jo.Tooltip,Legend:jo.Legend,TimeBar:mS,SnapLine:xS,Fisheye:gS,ImageMinimap:yS,EdgeFilterLens:bS,Annotation:ES,Algorithm:pS,Arrow:ip,Marker:op,Shape:fc};C0.version="4.8.13";var wS=C0,hM="4.8.13"},199905:function(Ne,G,_){"use strict";_.r(G),_.d(G,{Graph:function(){return V},GraphWithEvent:function(){return Ct},algorithm:function(){return g},comparision:function(){return w},essence:function(){return R},generate:function(){return M}});var g={};_.r(g),_.d(g,{components:function(){return ie},dfs:function(){return ee},dijkstra:function(){return br},dijkstraAll:function(){return Mr},findCycles:function(){return Sn},floydWarshall:function(){return Gt},isAcyclic:function(){return je},postorder:function(){return $t},preorder:function(){return be},prim:function(){return Dt},tarjan:function(){return on},topsort:function(){return Pn}});var R={};_.r(R),_.d(R,{hasSelfLoop:function(){return ur},isGraph:function(){return Tr},isNullGraph:function(){return He},isSimpleGraph:function(){return nn}});var w={};_.r(w),_.d(w,{containAllSameEdges:function(){return gt},containAllSameNodes:function(){return H},containSameEdges:function(){return ot},containSameNodes:function(){return tt},getSameEdges:function(){return C},getSameNodes:function(){return k},isGraphComplement:function(){return Ar},isGraphContainsAnother:function(){return Rt},isGraphOptionSame:function(){return I},isGraphSame:function(){return zt}});var M={};_.r(M),_.d(M,{getGraphComplement:function(){return Cr}});var P;(function(se){se.DEFAULT_EDGE_NAME="\0",se.GRAPH_NODE="\0",se.EDGE_KEY_DELIM=""})(P||(P={}));function L(se,Xt){var fe=se.get(Xt)||0;se.set(Xt,fe+1)}function p(se,Xt){var fe=se.get(Xt);fe!==void 0&&(fe=fe-1,fe>0?se.set(Xt,fe):se.delete(Xt))}function b(se,Xt,fe,Me){var pe=String(Xt),Re=String(fe);if(!se&&pe>Re){var nr=pe;pe=Re,Re=nr}return pe+P.EDGE_KEY_DELIM+Re+P.EDGE_KEY_DELIM+(Me===void 0?P.DEFAULT_EDGE_NAME:Me)}function S(se,Xt,fe,Me){var pe=String(Xt),Re=String(fe),nr={v:Xt,w:fe};if(!se&&pe>Re){var fr=nr.v;nr.v=nr.w,nr.w=fr}return Me!==void 0&&(nr.name=Me),nr}function x(se,Xt){return b(se,Xt.v,Xt.w,Xt.name)}function y(se){return typeof se=="function"}var A=function(Xt){return Xt.nodes().map(function(fe){var Me=Xt.node(fe),pe=Xt.parent(fe),Re={id:fe,value:Me,parent:pe};return Re.value===void 0&&delete Re.value,Re.parent===void 0&&delete Re.parent,Re})},E=function(Xt){return Xt.edges().map(function(fe){var Me=Xt.edge(fe),pe={v:fe.v,w:fe.w,value:Me,name:fe.name};return pe.name===void 0&&delete pe.name,pe.value===void 0&&delete pe.value,pe})},D=function(Xt){var fe={options:{directed:Xt.isDirected(),multigraph:Xt.isMultigraph(),compound:Xt.isCompound()},nodes:A(Xt),edges:E(Xt),value:Xt.graph()};return fe.value===void 0&&delete fe.value,fe},B=function(Xt){var fe=new V(Xt.options);return Xt.value!==void 0&&fe.setGraph(Xt.value),Xt.nodes.forEach(function(Me){fe.setNode(Me.id,Me.value),Me.parent&&fe.setParent(Me.id,Me.parent)}),Xt.edges.forEach(function(Me){fe.setEdge(Me.v,Me.w,Me.value,Me.name)}),fe};function m(se,Xt){var fe=Object.keys(se);if(Object.getOwnPropertySymbols){var Me=Object.getOwnPropertySymbols(se);Xt&&(Me=Me.filter(function(pe){return Object.getOwnPropertyDescriptor(se,pe).enumerable})),fe.push.apply(fe,Me)}return fe}function f(se){for(var Xt=1;Xt<arguments.length;Xt++){var fe=arguments[Xt]!=null?arguments[Xt]:{};Xt%2?m(Object(fe),!0).forEach(function(Me){W(se,Me,fe[Me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(fe)):m(Object(fe)).forEach(function(Me){Object.defineProperty(se,Me,Object.getOwnPropertyDescriptor(fe,Me))})}return se}function W(se,Xt,fe){return Xt in se?Object.defineProperty(se,Xt,{value:fe,enumerable:!0,configurable:!0,writable:!0}):se[Xt]=fe,se}function X(se,Xt){if(!(se instanceof Xt))throw new TypeError("Cannot call a class as a function")}function z(se,Xt){for(var fe=0;fe<Xt.length;fe++){var Me=Xt[fe];Me.enumerable=Me.enumerable||!1,Me.configurable=!0,"value"in Me&&(Me.writable=!0),Object.defineProperty(se,Me.key,Me)}}function U(se,Xt,fe){return Xt&&z(se.prototype,Xt),fe&&z(se,fe),Object.defineProperty(se,"prototype",{writable:!1}),se}var j={compound:!1,multigraph:!1,directed:!0},V=function(){function se(){var Xt=this,fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(this,se),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=P.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Xt.directed},this.isMultigraph=function(){return Xt.multigraph},this.isCompound=function(){return Xt.compound},this.setGraph=function(pe){return Xt.label=pe,Xt},this.graph=function(){return Xt.label},this.setDefaultNodeLabel=function(pe){return y(pe)?Xt.defaultNodeLabelFn=pe:Xt.defaultNodeLabelFn=function(){return pe},Xt},this.nodeCount=function(){return Xt.nodeCountNum},this.node=function(pe){return Xt.nodesLabelMap.get(pe)},this.nodes=function(){return Array.from(Xt.nodesLabelMap.keys())},this.sources=function(){return Xt.nodes().filter(function(pe){var Re;return!(!((Re=Xt.inEdgesMap.get(pe))===null||Re===void 0)&&Re.size)})},this.sinks=function(){return Xt.nodes().filter(function(pe){var Re;return!(!((Re=Xt.outEdgesMap.get(pe))===null||Re===void 0)&&Re.size)})},this.setNodes=function(pe,Re){return pe.map(function(nr){return Xt.setNode(nr,Re)}),Xt},this.hasNode=function(pe){return Xt.nodesLabelMap.has(pe)},this.checkCompound=function(){if(!Xt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(pe){if(Xt.isCompound()){var Re,nr=(Re=Xt.parentMap)===null||Re===void 0?void 0:Re.get(pe);if(nr!==Xt.GRAPH_NODE)return nr}},this.removeFromParentsChildList=function(pe){var Re=Xt.parentMap.get(pe);Xt.childrenMap.get(Re).delete(pe)},this.setParent=function(pe,Re){var nr,fr;Xt.checkCompound();for(var tn=Re===void 0?Xt.GRAPH_NODE:Re,Ln=Xt.parent(tn);Ln;){if(pe===Ln)throw new Error("Setting "+Re+" as parent of "+pe+" would create a cycle");Ln=Xt.parent(Ln)}Re&&Xt.setNode(Re),Xt.setNode(pe),Xt.removeFromParentsChildList(pe),(nr=Xt.parentMap)===null||nr===void 0||nr.set(pe,tn);var sn=Xt.childrenMap.get(tn);return sn.set(pe,!0),(fr=Xt.childrenMap)===null||fr===void 0||fr.set(tn,sn),Xt},this.children=function(pe){var Re=pe===void 0?Xt.GRAPH_NODE:pe;if(Xt.isCompound()){var nr,fr=(nr=Xt.childrenMap)===null||nr===void 0?void 0:nr.get(Re);return fr?Array.from(fr.keys()):void 0}if(Re===Xt.GRAPH_NODE)return Xt.nodes();if(pe&&Xt.hasNode(pe))return[]},this.predecessors=function(pe){var Re=Xt.predecessorsMap.get(pe);return Re?Array.from(Re.keys()):void 0},this.successors=function(pe){var Re=Xt.successorsMap.get(pe);return Re?Array.from(Re.keys()):void 0},this.neighbors=function(pe){var Re;if(Xt.hasNode(pe))return Array.from(new Set((Re=Xt.predecessors(pe))===null||Re===void 0?void 0:Re.concat(Xt.successors(pe))))},this.isLeaf=function(pe){var Re;if(Xt.isDirected()){var nr;return!(!((nr=Xt.successors(pe))===null||nr===void 0)&&nr.length)}return!(!((Re=Xt.neighbors(pe))===null||Re===void 0)&&Re.length)},this.filterNodes=function(pe){var Re=Xt.directed,nr=Xt.multigraph,fr=Xt.compound,tn=new se({directed:Re,multigraph:nr,compound:fr});if(tn.setGraph(Xt.graph()),Xt.nodes().forEach(function(sn){pe(sn)&&tn.setNode(sn,Xt.node(sn))}),Xt.edges().forEach(function(sn){tn.hasNode(sn.v)&&tn.hasNode(sn.w)&&tn.setEdgeObj(sn,Xt.edge(sn))}),fr){var Ln=function(Xn){for(var an=Xt.parent(Xn);an!==void 0&&!tn.hasNode(an);)an=Xt.parent(an);return an};tn.nodes().forEach(function(sn){tn.setParent(sn,Ln(sn))})}return tn},this.setDefaultEdgeLabel=function(pe){return y(pe)?Xt.defaultEdgeLabelFn=pe:Xt.defaultEdgeLabelFn=function(){return pe},Xt},this.edgeCount=function(){return Xt.edgeCountNum},this.setEdgeObj=function(pe,Re){return Xt.setEdge(pe.v,pe.w,Re,pe.name)},this.setPath=function(pe,Re){return pe.reduce(function(nr,fr){return Xt.setEdge(nr,fr,Re),fr}),Xt},this.edgeFromArgs=function(pe,Re,nr){return Xt.edge({v:pe,w:Re,name:nr})},this.edge=function(pe){return Xt.edgesLabelsMap.get(x(Xt.isDirected(),pe))},this.hasEdge=function(pe,Re,nr){return Xt.edgesLabelsMap.has(x(Xt.isDirected(),{v:pe,w:Re,name:nr}))},this.removeEdgeObj=function(pe){var Re=pe.v,nr=pe.w,fr=pe.name;return Xt.removeEdge(Re,nr,fr)},this.edges=function(){return Array.from(Xt.edgesMap.values())},this.inEdges=function(pe,Re){var nr=Xt.inEdgesMap.get(pe);if(nr)return Array.from(nr.values()).filter(function(fr){return!Re||fr.v===Re})},this.outEdges=function(pe,Re){var nr=Xt.outEdgesMap.get(pe);if(nr)return Array.from(nr.values()).filter(function(fr){return!Re||fr.w===Re})},this.nodeEdges=function(pe,Re){var nr;if(Xt.hasNode(pe))return(nr=Xt.inEdges(pe,Re))===null||nr===void 0?void 0:nr.concat(Xt.outEdges(pe,Re))},this.toJSON=function(){return D(Xt)},this.nodeInDegree=function(pe){var Re=Xt.inEdgesMap.get(pe);return Re?Re.size:0},this.nodeOutDegree=function(pe){var Re=Xt.outEdgesMap.get(pe);return Re?Re.size:0},this.nodeDegree=function(pe){return Xt.nodeInDegree(pe)+Xt.nodeOutDegree(pe)},this.source=function(pe){return pe.v},this.target=function(pe){return pe.w};var Me=f(f({},j),fe);this.compound=Me.compound,this.directed=Me.directed,this.multigraph=Me.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return U(se,[{key:"setNode",value:function(fe,Me){var pe=this.nodesLabelMap,Re=this.defaultNodeLabelFn,nr=this.isCompound,fr=this.parentMap,tn=this.childrenMap,Ln=this.inEdgesMap,sn=this.outEdgesMap,Xn=this.predecessorsMap,an=this.successorsMap;if(pe.has(fe))return Me!==void 0&&pe.set(fe,Me),this;if(pe.set(fe,Me||Re(fe)),nr()){var Bn;fr==null||fr.set(fe,this.GRAPH_NODE),tn==null||tn.set(fe,new Map),tn!=null&&tn.has(this.GRAPH_NODE)||tn==null||tn.set(this.GRAPH_NODE,new Map),tn==null||(Bn=tn.get(this.GRAPH_NODE))===null||Bn===void 0||Bn.set(fe,!0)}return[Ln,sn,Xn,an].forEach(function(Jn){return Jn.set(fe,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(fe){var Me=this;if(this.hasNode(fe)){var pe=function(sa){Me.removeEdge(sa.v,sa.w,sa.name)},Re=this.inEdgesMap,nr=this.outEdgesMap,fr=this.predecessorsMap,tn=this.successorsMap,Ln=this.nodesLabelMap;if(this.isCompound()){var sn,Xn,an;this.removeFromParentsChildList(fe),(sn=this.parentMap)===null||sn===void 0||sn.delete(fe),(Xn=this.children(fe))===null||Xn===void 0||Xn.forEach(function(oa){return Me.setParent(oa)}),(an=this.childrenMap)===null||an===void 0||an.delete(fe)}var Bn=Re.get(fe),Jn=nr.get(fe);Array.from(Bn.values()).forEach(function(oa){return pe(oa)}),Array.from(Jn.values()).forEach(function(oa){return pe(oa)}),Ln.delete(fe),Re.delete(fe),nr.delete(fe),fr.delete(fe),tn.delete(fe),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(fe,Me,pe,Re){var nr,fr,tn=S(this.isDirected(),fe,Me,Re),Ln=x(this.isDirected(),tn),sn=tn.v,Xn=tn.w;if(this.edgesLabelsMap.has(Ln))return this.edgesLabelsMap.set(Ln,pe),this;if(Re!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(sn),this.setNode(Xn),this.edgesLabelsMap.set(Ln,pe||this.defaultEdgeLabelFn(sn,Xn,Re)),Object.freeze(tn),this.edgesMap.set(Ln,tn);var an=this.predecessorsMap.get(Xn),Bn=this.successorsMap.get(sn);return L(an,sn),L(Bn,Xn),(nr=this.inEdgesMap.get(Xn))===null||nr===void 0||nr.set(Ln,tn),(fr=this.outEdgesMap.get(sn))===null||fr===void 0||fr.set(Ln,tn),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(fe,Me,pe){var Re=b(this.isDirected(),fe,Me,pe),nr=this.edgesMap.get(Re);if(nr){var fr=S(this.isDirected(),fe,Me,pe),tn=fr.v,Ln=fr.w;this.edgesLabelsMap.delete(Re),this.edgesMap.delete(Re);var sn=this.predecessorsMap.get(Ln),Xn=this.successorsMap.get(tn);p(sn,tn),p(Xn,Ln),this.inEdgesMap.get(Ln).delete(Re),this.outEdgesMap.get(tn).delete(Re),this.edgeCountNum-=1}return this}}]),se}();V.fromJSON=B;function J(se){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Xt){return typeof Xt}:function(Xt){return Xt&&typeof Symbol=="function"&&Xt.constructor===Symbol&&Xt!==Symbol.prototype?"symbol":typeof Xt},J(se)}function Q(se,Xt){if(!(se instanceof Xt))throw new TypeError("Cannot call a class as a function")}function et(se,Xt){for(var fe=0;fe<Xt.length;fe++){var Me=Xt[fe];Me.enumerable=Me.enumerable||!1,Me.configurable=!0,"value"in Me&&(Me.writable=!0),Object.defineProperty(se,Me.key,Me)}}function ut(se,Xt,fe){return Xt&&et(se.prototype,Xt),fe&&et(se,fe),Object.defineProperty(se,"prototype",{writable:!1}),se}function it(){return typeof Reflect!="undefined"&&Reflect.get?it=Reflect.get:it=function(Xt,fe,Me){var pe=yt(Xt,fe);if(pe){var Re=Object.getOwnPropertyDescriptor(pe,fe);return Re.get?Re.get.call(arguments.length<3?Xt:Me):Re.value}},it.apply(this,arguments)}function yt(se,Xt){for(;!Object.prototype.hasOwnProperty.call(se,Xt)&&(se=bt(se),se!==null););return se}function ft(se,Xt){if(typeof Xt!="function"&&Xt!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(Xt&&Xt.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),Object.defineProperty(se,"prototype",{writable:!1}),Xt&&Bt(se,Xt)}function Bt(se,Xt){return Bt=Object.setPrototypeOf||function(Me,pe){return Me.__proto__=pe,Me},Bt(se,Xt)}function St(se){var Xt=q();return function(){var Me=bt(se),pe;if(Xt){var Re=bt(this).constructor;pe=Reflect.construct(Me,arguments,Re)}else pe=Me.apply(this,arguments);return Et(this,pe)}}function Et(se,Xt){if(Xt&&(J(Xt)==="object"||typeof Xt=="function"))return Xt;if(Xt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z(se)}function Z(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(se){return!1}}function bt(se){return bt=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},bt(se)}var Ct=function(se){ft(fe,se);var Xt=St(fe);function fe(){var Me;Q(this,fe);for(var pe=arguments.length,Re=new Array(pe),nr=0;nr<pe;nr++)Re[nr]=arguments[nr];return Me=Xt.call.apply(Xt,[this].concat(Re)),Me.eventPool={},Me}return ut(fe,[{key:"appendEvent",value:function(pe,Re){this.eventPool[pe]||(this.eventPool[pe]=[]),this.eventPool[pe].push(Re)}},{key:"removeEvent",value:function(pe,Re){if(this.eventPool[pe]){var nr=this.eventPool[pe].indexOf(Re);nr>-1&&this.eventPool[pe].splice(nr,1)}}},{key:"emitEvent",value:function(pe){for(var Re=arguments.length,nr=new Array(Re>1?Re-1:0),fr=1;fr<Re;fr++)nr[fr-1]=arguments[fr];this.eventPool[pe]&&this.eventPool[pe].forEach(function(tn){tn.apply(void 0,nr)})}},{key:"setNode",value:function(pe,Re){return it(bt(fe.prototype),"setNode",this).call(this,pe,Re),this.emitEvent("nodeAdd",pe,Re),this}},{key:"removeNode",value:function(pe){return it(bt(fe.prototype),"removeNode",this).call(this,pe),this.emitEvent("nodeRemove",pe),this}},{key:"setEdge",value:function(pe,Re,nr,fr){return it(bt(fe.prototype),"setEdge",this).call(this,pe,Re,nr,fr),this.emitEvent("edgeAdd",pe,Re,nr,fr),this}},{key:"removeEdge",value:function(pe,Re,nr){return it(bt(fe.prototype),"removeEdge",this).call(this,pe,Re,nr),this.emitEvent("edgeRemove",pe,Re,nr),this}}]),fe}(V);function nt(se,Xt){for(var fe=0;fe<Xt.length;fe++){var Me=Xt[fe];Me.enumerable=Me.enumerable||!1,Me.configurable=!0,"value"in Me&&(Me.writable=!0),Object.defineProperty(se,Me.key,Me)}}function ht(se,Xt,fe){return Xt&&nt(se.prototype,Xt),fe&&nt(se,fe),Object.defineProperty(se,"prototype",{writable:!1}),se}function At(se,Xt){if(!(se instanceof Xt))throw new TypeError("Cannot call a class as a function")}var Ot=ht(function se(){var Xt=this;At(this,se),this.arr=[],this.keyIndice=new Map,this.size=function(){return Xt.arr.length},this.keys=function(){return Xt.arr.map(function(fe){return fe.key})},this.has=function(fe){return Xt.keyIndice.has(fe)},this.priority=function(fe){var Me=Xt.keyIndice.get(fe);if(Me!==void 0)return Xt.arr[Me].priority},this.swap=function(fe,Me){var pe=Xt.arr,Re=Xt.keyIndice,nr=[pe[fe],pe[Me]],fr=nr[0],tn=nr[1];pe[fe]=tn,pe[Me]=fr,Re.set(fr.key,Me),Re.set(tn.key,fe)},this.innerDecrease=function(fe){for(var Me=Xt.arr,pe=Me[fe].priority,Re,nr=fe;nr!==0;){var fr;if(Re=nr>>1,((fr=Me[Re])===null||fr===void 0?void 0:fr.priority)<pe)break;Xt.swap(nr,Re),nr=Re}},this.heapify=function(fe){var Me=Xt.arr,pe=fe<<1,Re=pe+1,nr=fe;pe<Me.length&&(nr=Me[pe].priority<Me[nr].priority?pe:nr,Re<Me.length&&(nr=Me[Re].priority<Me[nr].priority?Re:nr),nr!==fe&&(Xt.swap(fe,nr),Xt.heapify(nr)))},this.min=function(){if(Xt.size()===0)throw new Error("Queue underflow");return Xt.arr[0].key},this.add=function(fe,Me){var pe=Xt.keyIndice,Re=Xt.arr;if(!pe.has(fe)){var nr=Re.length;return pe.set(fe,nr),Re.push({key:fe,priority:Me}),Xt.innerDecrease(nr),!0}return!1},this.removeMin=function(){Xt.swap(0,Xt.arr.length-1);var fe=Xt.arr.pop();return Xt.keyIndice.delete(fe.key),Xt.heapify(0),fe.key},this.decrease=function(fe,Me){if(!Xt.has(fe))throw new Error("There's no key named ".concat(fe));var pe=Xt.keyIndice.get(fe);if(Me>Xt.arr[pe].priority)throw new Error("New priority is greater than current priority.Key: ".concat(fe," Old: + ").concat(Xt.arr[pe].priority," New: ").concat(Me));Xt.arr[pe].priority=Me,Xt.innerDecrease(pe)}}),xt=function(Xt,fe){var Me=new V,pe=new Map,Re=new Ot,nr;function fr(sn){var Xn=sn.v===nr?sn.w:sn.v,an=Re.priority(Xn);if(an!==void 0){var Bn=fe(sn);Bn<an&&(pe.set(Xn,nr),Re.decrease(Xn,Bn))}}if(Xt.nodeCount()===0)return Me;Xt.nodes().forEach(function(sn){Re.add(sn,Number.POSITIVE_INFINITY),Me.setNode(sn)}),Re.decrease(Xt.nodes()[0],0);for(var tn=!1;Re.size()>0;){var Ln;if(nr=Re.removeMin(),pe.has(nr))Me.setEdge(nr,pe.get(nr));else{if(tn)throw new Error("Input graph is not connected: "+Xt.graph());tn=!0}(Ln=Xt.nodeEdges(nr))===null||Ln===void 0||Ln.forEach(fr)}return Me},Dt=xt,Yt=function(Xt){var fe=new Set,Me=[],pe=Xt.nodes();return pe.forEach(function(Re){for(var nr=[],fr=[Re];fr.length>0;){var tn=fr.pop();if(!fe.has(tn)){var Ln,sn;fe.add(tn),nr.push(tn),(Ln=Xt.successors(tn))===null||Ln===void 0||Ln.forEach(function(Xn){return fr.push(Xn)}),(sn=Xt.predecessors(tn))===null||sn===void 0||sn.forEach(function(Xn){return fr.push(Xn)})}}nr.length&&Me.push(nr)}),Me},ie=Yt,re=function se(Xt,fe,Me,pe,Re,nr){pe.includes(fe)||(pe.push(fe),Me||nr.push(fe),Re(fe).forEach(function(fr){return se(Xt,fr,Me,pe,Re,nr)}),Me&&nr.push(fe))},Pt=function(Xt,fe,Me){var pe=Array.isArray(fe)?fe:[fe],Re=function(Ln){return Xt.isDirected()?Xt.successors(Ln):Xt.neighbors(Ln)},nr=[],fr=[];return pe.forEach(function(tn){if(Xt.hasNode(tn))re(Xt,tn,Me==="post",fr,Re,nr);else throw new Error("Graph does not have node: "+tn)}),nr},ee=Pt;function ce(se,Xt){return Kt(se)||ge(se,Xt)||te(se,Xt)||Ut()}function Ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(se,Xt){if(se){if(typeof se=="string")return ye(se,Xt);var fe=Object.prototype.toString.call(se).slice(8,-1);if(fe==="Object"&&se.constructor&&(fe=se.constructor.name),fe==="Map"||fe==="Set")return Array.from(se);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return ye(se,Xt)}}function ye(se,Xt){(Xt==null||Xt>se.length)&&(Xt=se.length);for(var fe=0,Me=new Array(Xt);fe<Xt;fe++)Me[fe]=se[fe];return Me}function ge(se,Xt){var fe=se==null?null:typeof Symbol!="undefined"&&se[Symbol.iterator]||se["@@iterator"];if(fe!=null){var Me=[],pe=!0,Re=!1,nr,fr;try{for(fe=fe.call(se);!(pe=(nr=fe.next()).done)&&(Me.push(nr.value),!(Xt&&Me.length===Xt));pe=!0);}catch(tn){Re=!0,fr=tn}finally{try{!pe&&fe.return!=null&&fe.return()}finally{if(Re)throw fr}}return Me}}function Kt(se){if(Array.isArray(se))return se}var xe=function(){return 1},Tt=function(Xt,fe,Me,pe){return Ae(Xt,fe,Me||xe,pe||function(Re){return Xt.outEdges(Re)})},Ae=function(Xt,fe,Me,pe){var Re=new Map,nr=new Ot,fr,tn,Ln=function(an){var Bn=an.v!==fr?an.v:an.w,Jn=Re.get(Bn),oa=Me(an),sa=tn.distance+oa;if(oa<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+an+" Weight: "+oa);sa<Jn.distance&&(Jn.distance=sa,Jn.predecessor=fr,nr.decrease(Bn,sa))};for(Xt.nodes().forEach(function(Xn){var an=Xn===fe?0:Number.POSITIVE_INFINITY;Re.set(Xn,{distance:an}),nr.add(Xn,an)});nr.size()>0&&(fr=nr.removeMin(),tn=Re.get(fr),!(tn&&tn.distance===Number.POSITIVE_INFINITY));)pe(fr).forEach(Ln);var sn={};return Array.from(Re.entries()).forEach(function(Xn){var an=ce(Xn,2),Bn=an[0],Jn=an[1];return sn[String(Bn)]=Jn,sn}),sn},br=Tt,Sr=function(Xt,fe,Me){var pe={};return Xt.nodes().forEach(function(Re){return pe[String(Re)]=br(Xt,Re,fe,Me),pe}),pe},Mr=Sr,Pr=function(Xt){var fe=0,Me=[],pe=new Map,Re=[];function nr(fr){var tn,Ln={onStack:!0,lowlink:fe,index:fe};if(pe.set(fr,Ln),fe+=1,Me.push(fr),(tn=Xt.successors(fr))===null||tn===void 0||tn.forEach(function(Bn){var Jn;if(pe.has(Bn)){if(!((Jn=pe.get(Bn))===null||Jn===void 0)&&Jn.onStack){var sa=pe.get(Bn);Ln.lowlink=Math.min(Ln.lowlink,sa.index)}}else{nr(Bn);var oa=pe.get(Bn);Ln.lowlink=Math.min(Ln.lowlink,oa.lowlink)}}),Ln.lowlink===Ln.index){var sn=[],Xn;do{Xn=Me.pop();var an=pe.get(Xn);an.onStack=!1,sn.push(Xn)}while(fr!==Xn);Re.push(sn)}}return Xt.nodes().forEach(function(fr){pe.has(fr)||nr(fr)}),Re},on=Pr,Hr=function(Xt){return on(Xt).filter(function(fe){return fe.length>1||fe.length===1&&Xt.hasEdge(fe[0],fe[0])})},Sn=Hr;function In(se){return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Xt){return typeof Xt}:function(Xt){return Xt&&typeof Symbol=="function"&&Xt.constructor===Symbol&&Xt!==Symbol.prototype?"symbol":typeof Xt},In(se)}function Nn(se,Xt){for(var fe=0;fe<Xt.length;fe++){var Me=Xt[fe];Me.enumerable=Me.enumerable||!1,Me.configurable=!0,"value"in Me&&(Me.writable=!0),Object.defineProperty(se,Me.key,Me)}}function vr(se,Xt,fe){return Xt&&Nn(se.prototype,Xt),fe&&Nn(se,fe),Object.defineProperty(se,"prototype",{writable:!1}),se}function Ze(se,Xt){if(!(se instanceof Xt))throw new TypeError("Cannot call a class as a function")}function Er(se,Xt){if(typeof Xt!="function"&&Xt!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(Xt&&Xt.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),Object.defineProperty(se,"prototype",{writable:!1}),Xt&&Zr(se,Xt)}function ke(se){var Xt=Lr();return function(){var Me=wn(se),pe;if(Xt){var Re=wn(this).constructor;pe=Reflect.construct(Me,arguments,Re)}else pe=Me.apply(this,arguments);return Xe(this,pe)}}function Xe(se,Xt){if(Xt&&(In(Xt)==="object"||typeof Xt=="function"))return Xt;if(Xt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jr(se)}function jr(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function rn(se){var Xt=typeof Map=="function"?new Map:void 0;return rn=function(Me){if(Me===null||!dn(Me))return Me;if(typeof Me!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Xt!="undefined"){if(Xt.has(Me))return Xt.get(Me);Xt.set(Me,pe)}function pe(){return ir(Me,arguments,wn(this).constructor)}return pe.prototype=Object.create(Me.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}),Zr(pe,Me)},rn(se)}function ir(se,Xt,fe){return Lr()?ir=Reflect.construct:ir=function(pe,Re,nr){var fr=[null];fr.push.apply(fr,Re);var tn=Function.bind.apply(pe,fr),Ln=new tn;return nr&&Zr(Ln,nr.prototype),Ln},ir.apply(null,arguments)}function Lr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(se){return!1}}function dn(se){return Function.toString.call(se).indexOf("[native code]")!==-1}function Zr(se,Xt){return Zr=Object.setPrototypeOf||function(Me,pe){return Me.__proto__=pe,Me},Zr(se,Xt)}function wn(se){return wn=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},wn(se)}var ln=function(se){Er(fe,se);var Xt=ke(fe);function fe(){return Ze(this,fe),Xt.apply(this,arguments)}return vr(fe)}(rn(Error));function bn(se){var Xt=new Set,fe=new Set,Me=[];function pe(Re){if(fe.has(Re))throw new ln;if(!Xt.has(Re)){var nr;fe.add(Re),Xt.add(Re),(nr=se.predecessors(Re))===null||nr===void 0||nr.forEach(pe),fe.delete(Re),Me.push(Re)}}if(se.sinks().forEach(pe),Xt.size!==se.nodeCount())throw new ln;return Me}var Pn=bn,at=function(Xt){try{Pn(Xt)}catch(fe){if(fe instanceof ln)return!1;throw fe}return!0},je=at,Zt=function(Xt,fe){return ee(Xt,fe,"post")},$t=Zt,Mt=function(Xt,fe){return ee(Xt,fe,"pre")},be=Mt,Nt=function(){return 1};function Ht(se,Xt,fe){return dt(se,Xt||Nt,fe||function(Me){return se.outEdges(Me)})}function dt(se,Xt,fe){var Me={},pe=se.nodes();return pe.forEach(function(Re){var nr=String(Re);Me[nr]={},Me[nr][nr]={distance:0},pe.forEach(function(fr){Re!==fr&&(Me[nr][String(fr)]={distance:Number.POSITIVE_INFINITY})}),fe(Re).forEach(function(fr){var tn=fr.v===Re?fr.w:fr.v,Ln=Xt(fr);Me[nr][String(tn)]={distance:Ln,predecessor:Re}})}),pe.forEach(function(Re){var nr=String(Re),fr=Me[nr];pe.forEach(function(tn){var Ln=String(tn),sn=Me[Ln];pe.forEach(function(Xn){var an=String(Xn),Bn=sn[nr],Jn=fr[an],oa=sn[an],sa=Bn.distance+Jn.distance;sa<oa.distance&&(oa.distance=sa,oa.predecessor=Jn.predecessor)})})}),Me}var Gt=Ht,tt=function(Xt,fe){for(var Me=Xt.nodes(),pe=0;pe<Me.length;pe++){var Re=Me[pe];if(fe.hasNode(Re))return!0}return!1},ot=function(Xt,fe){for(var Me=Xt.edges(),pe=0;pe<Me.length;pe++){var Re=Me[pe];if(fe.hasEdge(Re.v,Re.w,Re.name))return!0}return!1},k=function(Xt,fe){var Me=Xt.nodes(),pe=Me.filter(function(Re){return fe.hasNode(Re)});return pe},C=function(Xt,fe){var Me=Xt.edges(),pe=Me.filter(function(Re){return fe.hasEdge(Re.v,Re.w,Re.name)});return pe},I=function(Xt,fe){return Xt.isCompound()===fe.isCompound()&&Xt.isDirected()===fe.isDirected()&&Xt.isMultigraph()===fe.isMultigraph()},H=function(Xt,fe){var Me=k(Xt,fe);return Me.length===Xt.nodes().length},gt=function(Xt,fe){var Me=C(Xt,fe);return Me.length===Xt.edges().length},zt=function(Xt,fe){return I(Xt,fe)&&Xt.nodeCount()===fe.nodeCount()&&H(Xt,fe)&&Xt.edgeCount()===fe.edgeCount()&&gt(Xt,fe)},Rt=function(Xt,fe){return H(Xt,fe)&&gt(Xt,fe)};function qt(se,Xt){return Ve(se)||cr(se,Xt)||he(se,Xt)||Te()}function Te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(se,Xt){if(se){if(typeof se=="string")return Ue(se,Xt);var fe=Object.prototype.toString.call(se).slice(8,-1);if(fe==="Object"&&se.constructor&&(fe=se.constructor.name),fe==="Map"||fe==="Set")return Array.from(se);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return Ue(se,Xt)}}function Ue(se,Xt){(Xt==null||Xt>se.length)&&(Xt=se.length);for(var fe=0,Me=new Array(Xt);fe<Xt;fe++)Me[fe]=se[fe];return Me}function cr(se,Xt){var fe=se==null?null:typeof Symbol!="undefined"&&se[Symbol.iterator]||se["@@iterator"];if(fe!=null){var Me=[],pe=!0,Re=!1,nr,fr;try{for(fe=fe.call(se);!(pe=(nr=fe.next()).done)&&(Me.push(nr.value),!(Xt&&Me.length===Xt));pe=!0);}catch(tn){Re=!0,fr=tn}finally{try{!pe&&fe.return!=null&&fe.return()}finally{if(Re)throw fr}}return Me}}function Ve(se){if(Array.isArray(se))return se}function Tr(se){return se instanceof V}function nn(se){if(se.isMultigraph())return!1;for(var Xt=se.edges(),fe=new Map,Me=0;Me<Xt.length;Me++){var pe=Xt[Me];if(pe.v===pe.w)return!1;var Re=[pe.v,pe.w].sort(),nr=qt(Re,2),fr=nr[0],tn=nr[1],Ln="".concat(fr,"-").concat(tn);if(fe.has(Ln))return!1;fe.set(Ln,!0)}return!0}function He(se){return se.nodes().length===0}function ur(se){for(var Xt=se.edges(),fe=0;fe<Xt.length;fe++){var Me=Xt[fe];if(Me.v===Me.w)return!0}return!1}var Ar=function(Xt,fe){if(!nn(Xt)||!nn(fe)||!H(Xt,fe)||ot(Xt,fe))return!1;var Me=Xt.nodeCount();return Xt.edgeCount()+fe.edgeCount()===Me*(Me-1)/2},Cr=function(Xt){if(!nn(Xt))return null;for(var fe=Xt.nodeCount(),Me=new V({compound:Xt.isCompound(),directed:Xt.isDirected(),multigraph:Xt.isMultigraph()}),pe=Xt.nodes(),Re=0;Re<fe;Re++){var nr=pe[Re];Me.setNode(nr,Xt.node(nr));for(var fr=Re+1;fr<fe;fr++){var tn=pe[fr];Xt.hasEdge(nr,tn)||Me.setEdge(nr,tn)}}return Me}},981746:function(Ne){(function(_,g){Ne.exports=g()})(typeof self!="undefined"?self:this,function(){return function(G){var _={};function g(R){if(_[R])return _[R].exports;var w=_[R]={i:R,l:!1,exports:{}};return G[R].call(w.exports,w,w.exports,g),w.l=!0,w.exports}return g.m=G,g.c=_,g.d=function(R,w,M){g.o(R,w)||Object.defineProperty(R,w,{configurable:!1,enumerable:!0,get:M})},g.n=function(R){var w=R&&R.__esModule?function(){return R.default}:function(){return R};return g.d(w,"a",w),w},g.o=function(R,w){return Object.prototype.hasOwnProperty.call(R,w)},g.p="",g(g.s=36)}([function(G,_,g){"use strict";var R=g(3);_.a=function(w){return Array.isArray?Array.isArray(w):Object(R.a)(w,"Array")}},function(G,_,g){"use strict";var R=function(w){return w!==null&&typeof w!="function"&&isFinite(w.length)};_.a=R},function(G,_,g){"use strict";var R=g(3);_.a=function(w){return Object(R.a)(w,"Function")}},function(G,_,g){"use strict";var R={}.toString,w=function(M,P){return R.call(M)==="[object "+P+"]"};_.a=w},function(G,_,g){"use strict";var R=g(3);_.a=function(w){return Object(R.a)(w,"String")}},function(G,_,g){"use strict";var R=g(3),w=function(M){return Object(R.a)(M,"Number")};_.a=w},function(G,_,g){var R=g(38),w=R.mix;function M(P,L,p,b){return b===void 0&&(b="height"),p==="center"?(P[b]+L[b])/2:P.height}G.exports={assign:w,getHeight:M}},function(G,_,g){"use strict";var R=function(w){return w==null};_.a=R},function(G,_,g){"use strict";var R=g(0),w=g(12);function M(P,L){if(P){var p;if(Object(R.a)(P))for(var b=0,S=P.length;b<S&&(p=L(P[b],b),p!==!1);b++);else if(Object(w.a)(P)){for(var x in P)if(P.hasOwnProperty(x)&&(p=L(P[x],x),p===!1))break}}}_.a=M},function(G,_,g){"use strict";var R=g(7);_.a=function(w){return Object(R.a)(w)?"":w.toString()}},function(G,_,g){"use strict";var R=g(14),w=g(3),M=function(P){if(!Object(R.a)(P)||!Object(w.a)(P,"Object"))return!1;if(Object.getPrototypeOf(P)===null)return!0;for(var L=P;Object.getPrototypeOf(L)!==null;)L=Object.getPrototypeOf(L);return Object.getPrototypeOf(P)===L};_.a=M},function(G,_,g){var R=g(18),w=function(){function M(L,p){p===void 0&&(p={});var b=this;b.options=p,b.rootNode=R(L,p)}var P=M.prototype;return P.execute=function(){throw new Error("please override this method")},M}();G.exports=w},function(G,_,g){"use strict";_.a=function(R){var w=typeof R;return R!==null&&w==="object"||w==="function"}},function(G,_,g){"use strict";var R=g(1),w=function(M,P){return Object(R.a)(M)?M.indexOf(P)>-1:!1};_.a=w},function(G,_,g){"use strict";var R=function(w){return typeof w=="object"&&w!==null};_.a=R},function(G,_,g){"use strict";var R=g(8),w=g(2),M=Object.values?function(P){return Object.values(P)}:function(P){var L=[];return Object(R.a)(P,function(p,b){Object(w.a)(P)&&b==="prototype"||L.push(p)}),L};_.a=M},function(G,_,g){"use strict";_.a=w;function R(M,P){for(var L in P)P.hasOwnProperty(L)&&L!=="constructor"&&P[L]!==void 0&&(M[L]=P[L])}function w(M,P,L,p){return P&&R(M,P),L&&R(M,L),p&&R(M,p),M}},function(G,_,g){var R=g(35),w=["LR","RL","TB","BT","H","V"],M=["LR","RL","H"],P=function(b){return M.indexOf(b)>-1},L=w[0];G.exports=function(p,b,S){var x=b.direction||L;if(b.isHorizontal=P(x),x&&w.indexOf(x)===-1)throw new TypeError("Invalid direction: "+x);if(x===w[0])S(p,b);else if(x===w[1])S(p,b),p.right2left();else if(x===w[2])S(p,b);else if(x===w[3])S(p,b),p.bottom2top();else if(x===w[4]||x===w[5]){var y=R(p,b),A=y.left,E=y.right;S(A,b),S(E,b),b.isHorizontal?A.right2left():A.bottom2top(),E.translate(A.x-E.x,A.y-E.y),p.x=A.x,p.y=E.y;var D=p.getBoundingBox();b.isHorizontal?D.top<0&&p.translate(0,-D.top):D.left<0&&p.translate(-D.left,0)}var B=b.fixedRoot;return B===void 0&&(B=!0),B&&p.translate(-(p.x+p.width/2+p.hgap),-(p.y+p.height/2+p.vgap)),p}},function(G,_,g){var R=g(6),w=18,M=w*2,P=w,L={getId:function(x){return x.id||x.name},getPreH:function(x){return x.preH||0},getPreV:function(x){return x.preV||0},getHGap:function(x){return x.hgap||P},getVGap:function(x){return x.vgap||P},getChildren:function(x){return x.children},getHeight:function(x){return x.height||M},getWidth:function(x){var y=x.label||" ";return x.width||y.split("").length*w}};function p(S,x){var y=this;if(y.vgap=y.hgap=0,S instanceof p)return S;y.data=S;var A=x.getHGap(S),E=x.getVGap(S);return y.preH=x.getPreH(S),y.preV=x.getPreV(S),y.width=x.getWidth(S),y.height=x.getHeight(S),y.width+=y.preH,y.height+=y.preV,y.id=x.getId(S),y.x=y.y=0,y.depth=0,y.children||(y.children=[]),y.addGap(A,E),y}R.assign(p.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(x,y){var A=this;A.hgap+=x,A.vgap+=y,A.width+=2*x,A.height+=2*y},eachNode:function(x){for(var y=this,A=[y],E;E=A.shift();)x(E),A=E.children.concat(A)},DFTraverse:function(x){this.eachNode(x)},BFTraverse:function(x){for(var y=this,A=[y],E;E=A.shift();)x(E),A=A.concat(E.children)},getBoundingBox:function(){var x={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(y){x.left=Math.min(x.left,y.x),x.top=Math.min(x.top,y.y),x.width=Math.max(x.width,y.x+y.width),x.height=Math.max(x.height,y.y+y.height)}),x},translate:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.eachNode(function(A){A.x+=x,A.y+=y,A.x+=A.preH,A.y+=A.preV})},right2left:function(){var x=this,y=x.getBoundingBox();x.eachNode(function(A){A.x=A.x-(A.x-y.left)*2-A.width}),x.translate(y.width,0)},bottom2top:function(){var x=this,y=x.getBoundingBox();x.eachNode(function(A){A.y=A.y-(A.y-y.top)*2-A.height}),x.translate(0,y.height)}});function b(S,x,y){x===void 0&&(x={}),x=R.assign({},L,x);var A=new p(S,x),E=[A],D;if(!y&&!S.collapsed){for(;D=E.shift();)if(!D.data.collapsed){var B=x.getChildren(D.data),m=B?B.length:0;if(D.children=new Array(m),B&&m)for(var f=0;f<m;f++){var W=new p(B[f],x);D.children[f]=W,E.push(W),W.parent=D,W.depth=D.depth+1}}}return A}G.exports=b},function(G,_,g){"use strict";var R=g(1),w=function(M,P){if(!Object(R.a)(M))return M;for(var L=[],p=0;p<M.length;p++){var b=M[p];P(b,p)&&L.push(b)}return L};_.a=w},function(G,_,g){"use strict";var R=g(7),w=g(21);function M(P,L){var p=Object(w.a)(L),b=p.length;if(Object(R.a)(P))return!b;for(var S=0;S<b;S+=1){var x=p[S];if(L[x]!==P[x]||!(x in P))return!1}return!0}_.a=M},function(G,_,g){"use strict";var R=g(8),w=g(2),M=Object.keys?function(P){return Object.keys(P)}:function(P){var L=[];return Object(R.a)(P,function(p,b){Object(w.a)(P)&&b==="prototype"||L.push(b)}),L};_.a=M},function(G,_,g){"use strict";var R=g(0);_.a=function(w){if(Object(R.a)(w))return w.reduce(function(M,P){return Math.max(M,P)},w[0])}},function(G,_,g){"use strict";var R=g(0);_.a=function(w){if(Object(R.a)(w))return w.reduce(function(M,P){return Math.min(M,P)},w[0])}},function(G,_,g){"use strict";var R=g(1),w=Array.prototype.splice,M=function(L,p){if(!Object(R.a)(L))return[];for(var b=L?p.length:0,S=b-1;b--;){var x=void 0,y=p[b];(b===S||y!==x)&&(x=y,w.call(L,y,1))}return L};_.a=M},function(G,_,g){"use strict";var R=g(8),w=g(0),M=g(10),P=function(L,p,b){if(!Object(w.a)(L)&&!Object(M.a)(L))return L;var S=b;return Object(R.a)(L,function(x,y){S=p(S,x,y)}),S};_.a=P},function(G,_,g){"use strict";_.a=R;function R(w,M){M===void 0&&(M=new Map);var P=[];if(Array.isArray(w))for(var L=0,p=w.length;L<p;L++){var b=w[L];M.has(b)||(P.push(b),M.set(b,!0))}return P}},function(G,_,g){"use strict";_.a=P;var R=g(0),w=g(2),M=g(28);function P(L,p){if(!p)return{0:L};if(!Object(w.a)(p)){var b=Object(R.a)(p)?p:p.replace(/\s+/g,"").split("*");p=function(S){for(var x="_",y=0,A=b.length;y<A;y++)x+=S[b[y]]&&S[b[y]].toString();return x}}return Object(M.a)(L,p)}},function(G,_,g){"use strict";var R=g(0),w=g(2),M=Object.prototype.hasOwnProperty;function P(L,p){if(!p||!Object(R.a)(L))return{};for(var b={},S=Object(w.a)(p)?p:function(E){return E[p]},x,y=0;y<L.length;y++){var A=L[y];x=S(A),M.call(b,x)?b[x].push(A):b[x]=[A]}return b}_.a=P},function(G,_,g){"use strict";_.a=function(R,w){return R.hasOwnProperty(w)}},function(G,_,g){"use strict";var R={}.toString,w=function(M){return R.call(M).replace(/^\[object /,"").replace(/]$/,"")};_.a=w},function(G,_,g){"use strict";var R=Object.prototype,w=function(M){var P=M&&M.constructor,L=typeof P=="function"&&P.prototype||R;return M===L};_.a=w},function(G,_,g){"use strict";var R=g(2);_.a=function(w,M){if(!Object(R.a)(w))throw new TypeError("Expected a function");var P=function(){for(var L=[],p=0;p<arguments.length;p++)L[p]=arguments[p];var b=M?M.apply(this,L):L[0],S=P.cache;if(S.has(b))return S.get(b);var x=w.apply(this,L);return S.set(b,x),x};return P.cache=new Map,P}},function(G,_,g){"use strict";var R=g(14),w=g(1),M=g(4),P=function(L,p){if(L===p)return!0;if(!L||!p||Object(M.a)(L)||Object(M.a)(p))return!1;if(Object(w.a)(L)||Object(w.a)(p)){if(L.length!==p.length)return!1;for(var b=!0,S=0;S<L.length&&(b=P(L[S],p[S]),!!b);S++);return b}if(Object(R.a)(L)||Object(R.a)(p)){var x=Object.keys(L),y=Object.keys(p);if(x.length!==y.length)return!1;for(var b=!0,S=0;S<x.length&&(b=P(L[x[S]],p[x[S]]),!!b);S++);return b}return!1};_.a=P},function(G,_,g){"use strict";var R=g(116),w=g(15),M=g(32),P=g(4),L;_.a=Object(M.a)(function(p,b){b===void 0&&(b={});var S=b.fontSize,x=b.fontFamily,y=b.fontWeight,A=b.fontStyle,E=b.fontVariant;return L||(L=document.createElement("canvas").getContext("2d")),L.font=[A,E,y,S+"px",x].join(" "),L.measureText(Object(P.a)(p)?p:"").width},function(p,b){return b===void 0&&(b={}),Object(R.a)([p],Object(w.a)(b)).join("")})},function(G,_,g){var R=g(18);G.exports=function(w,M){for(var P=R(w.data,M,!0),L=R(w.data,M,!0),p=w.children.length,b=Math.round(p/2),S=M.getSide||function(E,D){return D<b?"right":"left"},x=0;x<p;x++){var y=w.children[x],A=S(y,x);A==="right"?L.children.push(y):P.children.push(y)}return P.eachNode(function(E){E.isRoot()||(E.side="left")}),L.eachNode(function(E){E.isRoot()||(E.side="right")}),{left:P,right:L}}},function(G,_,g){var R={compactBox:g(37),dendrogram:g(120),indented:g(122),mindmap:g(124)};G.exports=R},function(G,_,g){function R(y,A){y.prototype=Object.create(A.prototype),y.prototype.constructor=y,w(y,A)}function w(y,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,B){return D.__proto__=B,D},w(y,A)}var M=g(11),P=g(119),L=g(17),p=g(6),b=function(y){R(A,y);function A(){return y.apply(this,arguments)||this}var E=A.prototype;return E.execute=function(){var B=this;return L(B.rootNode,B.options,P)},A}(M),S={};function x(y,A){return A=p.assign({},S,A),new b(y,A).execute()}G.exports=x},function(G,_,g){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var R=g(13);g.d(_,"contains",function(){return R.a}),g.d(_,"includes",function(){return R.a});var w=g(39);g.d(_,"difference",function(){return w.a});var M=g(40);g.d(_,"find",function(){return M.a});var P=g(41);g.d(_,"findIndex",function(){return P.a});var L=g(42);g.d(_,"firstValue",function(){return L.a});var p=g(43);g.d(_,"flatten",function(){return p.a});var b=g(44);g.d(_,"flattenDeep",function(){return b.a});var S=g(45);g.d(_,"getRange",function(){return S.a});var x=g(46);g.d(_,"pull",function(){return x.a});var y=g(24);g.d(_,"pullAt",function(){return y.a});var A=g(25);g.d(_,"reduce",function(){return A.a});var E=g(47);g.d(_,"remove",function(){return E.a});var D=g(48);g.d(_,"sortBy",function(){return D.a});var B=g(49);g.d(_,"union",function(){return B.a});var m=g(26);g.d(_,"uniq",function(){return m.a});var f=g(50);g.d(_,"valuesOfKey",function(){return f.a});var W=g(51);g.d(_,"head",function(){return W.a});var X=g(52);g.d(_,"last",function(){return X.a});var z=g(53);g.d(_,"startsWith",function(){return z.a});var U=g(54);g.d(_,"endsWith",function(){return U.a});var j=g(19);g.d(_,"filter",function(){return j.a});var V=g(55);g.d(_,"every",function(){return V.a});var J=g(56);g.d(_,"some",function(){return J.a});var Q=g(57);g.d(_,"group",function(){return Q.a});var et=g(28);g.d(_,"groupBy",function(){return et.a});var ut=g(27);g.d(_,"groupToMap",function(){return ut.a});var it=g(58);g.d(_,"getWrapBehavior",function(){return it.a});var yt=g(59);g.d(_,"wrapBehavior",function(){return yt.a});var ft=g(60);g.d(_,"number2color",function(){return ft.a});var Bt=g(61);g.d(_,"parseRadius",function(){return Bt.a});var St=g(62);g.d(_,"clamp",function(){return St.a});var Et=g(63);g.d(_,"fixedBase",function(){return Et.a});var Z=g(64);g.d(_,"isDecimal",function(){return Z.a});var q=g(65);g.d(_,"isEven",function(){return q.a});var bt=g(66);g.d(_,"isInteger",function(){return bt.a});var Ct=g(67);g.d(_,"isNegative",function(){return Ct.a});var nt=g(68);g.d(_,"isNumberEqual",function(){return nt.a});var ht=g(69);g.d(_,"isOdd",function(){return ht.a});var At=g(70);g.d(_,"isPositive",function(){return At.a});var Ot=g(22);g.d(_,"max",function(){return Ot.a});var xt=g(71);g.d(_,"maxBy",function(){return xt.a});var Dt=g(23);g.d(_,"min",function(){return Dt.a});var Yt=g(72);g.d(_,"minBy",function(){return Yt.a});var ie=g(73);g.d(_,"mod",function(){return ie.a});var re=g(74);g.d(_,"toDegree",function(){return re.a});var Pt=g(75);g.d(_,"toInteger",function(){return Pt.a});var ee=g(76);g.d(_,"toRadian",function(){return ee.a});var ce=g(77);g.d(_,"forIn",function(){return ce.a});var Ut=g(29);g.d(_,"has",function(){return Ut.a});var te=g(78);g.d(_,"hasKey",function(){return te.a});var ye=g(79);g.d(_,"hasValue",function(){return ye.a});var ge=g(21);g.d(_,"keys",function(){return ge.a});var Kt=g(20);g.d(_,"isMatch",function(){return Kt.a});var xe=g(15);g.d(_,"values",function(){return xe.a});var Tt=g(80);g.d(_,"lowerCase",function(){return Tt.a});var Ae=g(81);g.d(_,"lowerFirst",function(){return Ae.a});var br=g(82);g.d(_,"substitute",function(){return br.a});var Sr=g(83);g.d(_,"upperCase",function(){return Sr.a});var Mr=g(84);g.d(_,"upperFirst",function(){return Mr.a});var Pr=g(30);g.d(_,"getType",function(){return Pr.a});var on=g(85);g.d(_,"isArguments",function(){return on.a});var Hr=g(0);g.d(_,"isArray",function(){return Hr.a});var Sn=g(1);g.d(_,"isArrayLike",function(){return Sn.a});var In=g(86);g.d(_,"isBoolean",function(){return In.a});var Nn=g(87);g.d(_,"isDate",function(){return Nn.a});var vr=g(88);g.d(_,"isError",function(){return vr.a});var Ze=g(2);g.d(_,"isFunction",function(){return Ze.a});var Er=g(89);g.d(_,"isFinite",function(){return Er.a});var ke=g(7);g.d(_,"isNil",function(){return ke.a});var Xe=g(90);g.d(_,"isNull",function(){return Xe.a});var jr=g(5);g.d(_,"isNumber",function(){return jr.a});var rn=g(12);g.d(_,"isObject",function(){return rn.a});var ir=g(14);g.d(_,"isObjectLike",function(){return ir.a});var Lr=g(10);g.d(_,"isPlainObject",function(){return Lr.a});var dn=g(31);g.d(_,"isPrototype",function(){return dn.a});var Zr=g(91);g.d(_,"isRegExp",function(){return Zr.a});var wn=g(4);g.d(_,"isString",function(){return wn.a});var ln=g(3);g.d(_,"isType",function(){return ln.a});var bn=g(92);g.d(_,"isUndefined",function(){return bn.a});var Pn=g(93);g.d(_,"isElement",function(){return Pn.a});var at=g(94);g.d(_,"requestAnimationFrame",function(){return at.a});var je=g(95);g.d(_,"clearAnimationFrame",function(){return je.a});var Zt=g(96);g.d(_,"augment",function(){return Zt.a});var $t=g(97);g.d(_,"clone",function(){return $t.a});var Mt=g(98);g.d(_,"debounce",function(){return Mt.a});var be=g(32);g.d(_,"memoize",function(){return be.a});var Nt=g(99);g.d(_,"deepMix",function(){return Nt.a});var Ht=g(8);g.d(_,"each",function(){return Ht.a});var dt=g(100);g.d(_,"extend",function(){return dt.a});var Gt=g(101);g.d(_,"indexOf",function(){return Gt.a});var tt=g(102);g.d(_,"isEmpty",function(){return tt.a});var ot=g(33);g.d(_,"isEqual",function(){return ot.a});var k=g(103);g.d(_,"isEqualWith",function(){return k.a});var C=g(104);g.d(_,"map",function(){return C.a});var I=g(105);g.d(_,"mapValues",function(){return I.a});var H=g(16);g.d(_,"mix",function(){return H.a}),g.d(_,"assign",function(){return H.a});var gt=g(106);g.d(_,"get",function(){return gt.a});var zt=g(107);g.d(_,"set",function(){return zt.a});var Rt=g(108);g.d(_,"pick",function(){return Rt.a});var qt=g(109);g.d(_,"omit",function(){return qt.a});var Te=g(110);g.d(_,"throttle",function(){return Te.a});var he=g(111);g.d(_,"toArray",function(){return he.a});var Ue=g(9);g.d(_,"toString",function(){return Ue.a});var cr=g(112);g.d(_,"uniqueId",function(){return cr.a});var Ve=g(113);g.d(_,"noop",function(){return Ve.a});var Tr=g(114);g.d(_,"identity",function(){return Tr.a});var nn=g(115);g.d(_,"size",function(){return nn.a});var He=g(34);g.d(_,"measureTextWidth",function(){return He.a});var ur=g(117);g.d(_,"getEllipsisText",function(){return ur.a});var Ar=g(118);g.d(_,"Cache",function(){return Ar.a})},function(G,_,g){"use strict";var R=g(19),w=g(13),M=function(P,L){return L===void 0&&(L=[]),Object(R.a)(P,function(p){return!Object(w.a)(L,p)})};_.a=M},function(G,_,g){"use strict";var R=g(2),w=g(20),M=g(0),P=g(10);function L(p,b){if(!Object(M.a)(p))return null;var S;if(Object(R.a)(b)&&(S=b),Object(P.a)(b)&&(S=function(y){return Object(w.a)(y,b)}),S){for(var x=0;x<p.length;x+=1)if(S(p[x]))return p[x]}return null}_.a=L},function(G,_,g){"use strict";function R(w,M,P){P===void 0&&(P=0);for(var L=P;L<w.length;L++)if(M(w[L],L))return L;return-1}_.a=R},function(G,_,g){"use strict";var R=g(7),w=g(0),M=function(P,L){for(var p=null,b=0;b<P.length;b++){var S=P[b],x=S[L];if(!Object(R.a)(x)){Object(w.a)(x)?p=x[0]:p=x;break}}return p};_.a=M},function(G,_,g){"use strict";var R=g(0),w=function(M){if(!Object(R.a)(M))return[];for(var P=[],L=0;L<M.length;L++)P=P.concat(M[L]);return P};_.a=w},function(G,_,g){"use strict";var R=g(0),w=function(M,P){if(P===void 0&&(P=[]),!Object(R.a)(M))P.push(M);else for(var L=0;L<M.length;L+=1)w(M[L],P);return P};_.a=w},function(G,_,g){"use strict";var R=g(0),w=g(22),M=g(23),P=function(L){var p=L.filter(function(A){return!isNaN(A)});if(!p.length)return{min:0,max:0};if(Object(R.a)(L[0])){for(var b=[],S=0;S<L.length;S++)b=b.concat(L[S]);p=b}var x=Object(w.a)(p),y=Object(M.a)(p);return{min:y,max:x}};_.a=P},function(G,_,g){"use strict";var R=Array.prototype,w=R.splice,M=R.indexOf,P=function(L){for(var p=[],b=1;b<arguments.length;b++)p[b-1]=arguments[b];for(var S=0;S<p.length;S++)for(var x=p[S],y=-1;(y=M.call(L,x))>-1;)w.call(L,y,1);return L};_.a=P},function(G,_,g){"use strict";var R=g(1),w=g(24),M=function(P,L){var p=[];if(!Object(R.a)(P))return p;for(var b=-1,S=[],x=P.length;++b<x;){var y=P[b];L(y,b,P)&&(p.push(y),S.push(b))}return Object(w.a)(P,S),p};_.a=M},function(G,_,g){"use strict";var R=g(0),w=g(4),M=g(2);function P(L,p){var b;if(Object(M.a)(p))b=function(x,y){return p(x)-p(y)};else{var S=[];Object(w.a)(p)?S.push(p):Object(R.a)(p)&&(S=p),b=function(x,y){for(var A=0;A<S.length;A+=1){var E=S[A];if(x[E]>y[E])return 1;if(x[E]<y[E])return-1}return 0}}return L.sort(b),L}_.a=P},function(G,_,g){"use strict";var R=g(26),w=function(){for(var M=[],P=0;P<arguments.length;P++)M[P]=arguments[P];return Object(R.a)([].concat.apply([],M))};_.a=w},function(G,_,g){"use strict";var R=g(0),w=g(7);_.a=function(M,P){for(var L=[],p={},b=0;b<M.length;b++){var S=M[b],x=S[P];if(!Object(w.a)(x)){Object(R.a)(x)||(x=[x]);for(var y=0;y<x.length;y++){var A=x[y];p[A]||(L.push(A),p[A]=!0)}}}return L}},function(G,_,g){"use strict";_.a=w;var R=g(1);function w(M){if(Object(R.a)(M))return M[0]}},function(G,_,g){"use strict";_.a=w;var R=g(1);function w(M){if(Object(R.a)(M)){var P=M;return P[P.length-1]}}},function(G,_,g){"use strict";var R=g(0),w=g(4);function M(P,L){return Object(R.a)(P)||Object(w.a)(P)?P[0]===L:!1}_.a=M},function(G,_,g){"use strict";var R=g(0),w=g(4);function M(P,L){return Object(R.a)(P)||Object(w.a)(P)?P[P.length-1]===L:!1}_.a=M},function(G,_,g){"use strict";var R=function(w,M){for(var P=0;P<w.length;P++)if(!M(w[P],P))return!1;return!0};_.a=R},function(G,_,g){"use strict";var R=function(w,M){for(var P=0;P<w.length;P++)if(M(w[P],P))return!0;return!1};_.a=R},function(G,_,g){"use strict";var R=g(27);_.a=function(w,M){if(!M)return[w];var P=Object(R.a)(w,M),L=[];for(var p in P)L.push(P[p]);return L}},function(G,_,g){"use strict";function R(w,M){return w["_wrap_"+M]}_.a=R},function(G,_,g){"use strict";function R(w,M){if(w["_wrap_"+M])return w["_wrap_"+M];var P=function(L){w[M](L)};return w["_wrap_"+M]=P,P}_.a=R},function(G,_,g){"use strict";var R={};function w(M){var P=R[M];if(!P){for(var L=M.toString(16),p=L.length;p<6;p++)L="0"+L;P="#"+L,R[M]=P}return P}_.a=w},function(G,_,g){"use strict";var R=g(0);function w(M){var P=0,L=0,p=0,b=0;return Object(R.a)(M)?M.length===1?P=L=p=b=M[0]:M.length===2?(P=p=M[0],L=b=M[1]):M.length===3?(P=M[0],L=b=M[1],p=M[2]):(P=M[0],L=M[1],p=M[2],b=M[3]):P=L=p=b=M,{r1:P,r2:L,r3:p,r4:b}}_.a=w},function(G,_,g){"use strict";var R=function(w,M,P){return w<M?M:w>P?P:w};_.a=R},function(G,_,g){"use strict";var R=function(w,M){var P=M.toString(),L=P.indexOf(".");if(L===-1)return Math.round(w);var p=P.substr(L+1).length;return p>20&&(p=20),parseFloat(w.toFixed(p))};_.a=R},function(G,_,g){"use strict";var R=g(5),w=function(M){return Object(R.a)(M)&&M%1!==0};_.a=w},function(G,_,g){"use strict";var R=g(5),w=function(M){return Object(R.a)(M)&&M%2===0};_.a=w},function(G,_,g){"use strict";var R=g(5),w=Number.isInteger?Number.isInteger:function(M){return Object(R.a)(M)&&M%1===0};_.a=w},function(G,_,g){"use strict";var R=g(5),w=function(M){return Object(R.a)(M)&&M<0};_.a=w},function(G,_,g){"use strict";_.a=w;var R=1e-5;function w(M,P,L){return L===void 0&&(L=R),Math.abs(M-P)<L}},function(G,_,g){"use strict";var R=g(5),w=function(M){return Object(R.a)(M)&&M%2!==0};_.a=w},function(G,_,g){"use strict";var R=g(5),w=function(M){return Object(R.a)(M)&&M>0};_.a=w},function(G,_,g){"use strict";var R=g(0),w=g(2);_.a=function(M,P){if(Object(R.a)(M)){for(var L,p=-1/0,b=0;b<M.length;b++){var S=M[b],x=Object(w.a)(P)?P(S):S[P];x>p&&(L=S,p=x)}return L}}},function(G,_,g){"use strict";var R=g(0),w=g(2);_.a=function(M,P){if(Object(R.a)(M)){for(var L,p=1/0,b=0;b<M.length;b++){var S=M[b],x=Object(w.a)(P)?P(S):S[P];x<p&&(L=S,p=x)}return L}}},function(G,_,g){"use strict";var R=function(w,M){return(w%M+M)%M};_.a=R},function(G,_,g){"use strict";var R=180/Math.PI,w=function(M){return R*M};_.a=w},function(G,_,g){"use strict";_.a=parseInt},function(G,_,g){"use strict";var R=Math.PI/180,w=function(M){return R*M};_.a=w},function(G,_,g){"use strict";var R=g(8);_.a=R.a},function(G,_,g){"use strict";var R=g(29);_.a=R.a},function(G,_,g){"use strict";var R=g(13),w=g(15);_.a=function(M,P){return Object(R.a)(Object(w.a)(M),P)}},function(G,_,g){"use strict";var R=g(9),w=function(M){return Object(R.a)(M).toLowerCase()};_.a=w},function(G,_,g){"use strict";var R=g(9),w=function(M){var P=Object(R.a)(M);return P.charAt(0).toLowerCase()+P.substring(1)};_.a=w},function(G,_,g){"use strict";function R(w,M){return!w||!M?w:w.replace(/\\?\{([^{}]+)\}/g,function(P,L){return P.charAt(0)==="\\"?P.slice(1):M[L]===void 0?"":M[L]})}_.a=R},function(G,_,g){"use strict";var R=g(9),w=function(M){return Object(R.a)(M).toUpperCase()};_.a=w},function(G,_,g){"use strict";var R=g(9),w=function(M){var P=Object(R.a)(M);return P.charAt(0).toUpperCase()+P.substring(1)};_.a=w},function(G,_,g){"use strict";var R=g(3),w=function(M){return Object(R.a)(M,"Arguments")};_.a=w},function(G,_,g){"use strict";var R=g(3),w=function(M){return Object(R.a)(M,"Boolean")};_.a=w},function(G,_,g){"use strict";var R=g(3),w=function(M){return Object(R.a)(M,"Date")};_.a=w},function(G,_,g){"use strict";var R=g(3),w=function(M){return Object(R.a)(M,"Error")};_.a=w},function(G,_,g){"use strict";var R=g(5);_.a=function(w){return Object(R.a)(w)&&isFinite(w)}},function(G,_,g){"use strict";var R=function(w){return w===null};_.a=R},function(G,_,g){"use strict";var R=g(3),w=function(M){return Object(R.a)(M,"RegExp")};_.a=w},function(G,_,g){"use strict";var R=function(w){return w===void 0};_.a=R},function(G,_,g){"use strict";var R=function(w){return w instanceof Element||w instanceof HTMLDocument};_.a=R},function(G,_,g){"use strict";_.a=R;function R(w){var M=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(P){return setTimeout(P,16)};return M(w)}},function(G,_,g){"use strict";_.a=R;function R(w){var M=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;M(w)}},function(G,_,g){"use strict";var R=g(16),w=g(2),M=function(){for(var P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];for(var p=P[0],b=1;b<P.length;b++){var S=P[b];Object(w.a)(S)&&(S=S.prototype),Object(R.a)(p.prototype,S)}};_.a=M},function(G,_,g){"use strict";var R=g(0),w=function(M){if(typeof M!="object"||M===null)return M;var P;if(Object(R.a)(M)){P=[];for(var L=0,p=M.length;L<p;L++)typeof M[L]=="object"&&M[L]!=null?P[L]=w(M[L]):P[L]=M[L]}else{P={};for(var b in M)typeof M[b]=="object"&&M[b]!=null?P[b]=w(M[b]):P[b]=M[b]}return P};_.a=w},function(G,_,g){"use strict";function R(w,M,P){var L;return function(){var p=this,b=arguments,S=function(){L=null,P||w.apply(p,b)},x=P&&!L;clearTimeout(L),L=setTimeout(S,M),x&&w.apply(p,b)}}_.a=R},function(G,_,g){"use strict";var R=g(0),w=g(10),M=5;function P(p,b,S,x){S=S||0,x=x||M;for(var y in b)if(b.hasOwnProperty(y)){var A=b[y];A!==null&&Object(w.a)(A)?(Object(w.a)(p[y])||(p[y]={}),S<x?P(p[y],A,S+1,x):p[y]=b[y]):Object(R.a)(A)?(p[y]=[],p[y]=p[y].concat(A)):A!==void 0&&(p[y]=A)}}var L=function(p){for(var b=[],S=1;S<arguments.length;S++)b[S-1]=arguments[S];for(var x=0;x<b.length;x+=1)P(p,b[x]);return p};_.a=L},function(G,_,g){"use strict";var R=g(16),w=g(2),M=function(P,L,p,b){Object(w.a)(L)||(p=L,L=P,P=function(){});var S=Object.create?function(y,A){return Object.create(y,{constructor:{value:A}})}:function(y,A){function E(){}E.prototype=y;var D=new E;return D.constructor=A,D},x=S(L.prototype,P);return P.prototype=Object(R.a)(x,P.prototype),P.superclass=S(L.prototype,L),Object(R.a)(x,p),Object(R.a)(P,b),P};_.a=M},function(G,_,g){"use strict";var R=g(1),w=function(M,P){if(!Object(R.a)(M))return-1;var L=Array.prototype.indexOf;if(L)return L.call(M,P);for(var p=-1,b=0;b<M.length;b++)if(M[b]===P){p=b;break}return p};_.a=w},function(G,_,g){"use strict";var R=g(7),w=g(1),M=g(30),P=g(31),L=Object.prototype.hasOwnProperty;function p(b){if(Object(R.a)(b))return!0;if(Object(w.a)(b))return!b.length;var S=Object(M.a)(b);if(S==="Map"||S==="Set")return!b.size;if(Object(P.a)(b))return!Object.keys(b).length;for(var x in b)if(L.call(b,x))return!1;return!0}_.a=p},function(G,_,g){"use strict";var R=g(2),w=g(33);_.a=function(M,P,L){return Object(R.a)(L)?!!L(M,P):Object(w.a)(M,P)}},function(G,_,g){"use strict";var R=g(1),w=function(M,P){if(!Object(R.a)(M))return M;for(var L=[],p=0;p<M.length;p++){var b=M[p];L.push(P(b,p))}return L};_.a=w},function(G,_,g){"use strict";var R=g(7),w=g(12),M=function(P){return P};_.a=function(P,L){L===void 0&&(L=M);var p={};return Object(w.a)(P)&&!Object(R.a)(P)&&Object.keys(P).forEach(function(b){p[b]=L(P[b],b)}),p}},function(G,_,g){"use strict";var R=g(4);_.a=function(w,M,P){for(var L=0,p=Object(R.a)(M)?M.split("."):M;w&&L<p.length;)w=w[p[L++]];return w===void 0||L<p.length?P:w}},function(G,_,g){"use strict";var R=g(12),w=g(4),M=g(5);_.a=function(P,L,p){var b=P,S=Object(w.a)(L)?L.split("."):L;return S.forEach(function(x,y){y<S.length-1?(Object(R.a)(b[x])||(b[x]=Object(M.a)(S[y+1])?[]:{}),b=b[x]):b[x]=p}),P}},function(G,_,g){"use strict";var R=g(8),w=g(10),M=Object.prototype.hasOwnProperty;_.a=function(P,L){if(P===null||!Object(w.a)(P))return{};var p={};return Object(R.a)(L,function(b){M.call(P,b)&&(p[b]=P[b])}),p}},function(G,_,g){"use strict";var R=g(25);_.a=function(w,M){return Object(R.a)(w,function(P,L,p){return M.includes(p)||(P[p]=L),P},{})}},function(G,_,g){"use strict";_.a=function(R,w,M){var P,L,p,b,S=0;M||(M={});var x=function(){S=M.leading===!1?0:Date.now(),P=null,b=R.apply(L,p),P||(L=p=null)},y=function(){var A=Date.now();!S&&M.leading===!1&&(S=A);var E=w-(A-S);return L=this,p=arguments,E<=0||E>w?(P&&(clearTimeout(P),P=null),S=A,b=R.apply(L,p),P||(L=p=null)):!P&&M.trailing!==!1&&(P=setTimeout(x,E)),b};return y.cancel=function(){clearTimeout(P),S=0,P=L=p=null},y}},function(G,_,g){"use strict";var R=g(1);_.a=function(w){return Object(R.a)(w)?Array.prototype.slice.call(w):[]}},function(G,_,g){"use strict";var R={};_.a=function(w){return w=w||"g",R[w]?R[w]+=1:R[w]=1,w+R[w]}},function(G,_,g){"use strict";_.a=function(){}},function(G,_,g){"use strict";_.a=function(R){return R}},function(G,_,g){"use strict";_.a=M;var R=g(7),w=g(1);function M(P){return Object(R.a)(P)?0:Object(w.a)(P)?P.length:Object.keys(P).length}},function(G,_,g){"use strict";_.a=z;var R=function(Et,Z){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,bt){q.__proto__=bt}||function(q,bt){for(var Ct in bt)Object.prototype.hasOwnProperty.call(bt,Ct)&&(q[Ct]=bt[Ct])},R(Et,Z)};function w(Et,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");R(Et,Z);function q(){this.constructor=Et}Et.prototype=Z===null?Object.create(Z):(q.prototype=Z.prototype,new q)}var M=function(){return M=Object.assign||function(Z){for(var q,bt=1,Ct=arguments.length;bt<Ct;bt++){q=arguments[bt];for(var nt in q)Object.prototype.hasOwnProperty.call(q,nt)&&(Z[nt]=q[nt])}return Z},M.apply(this,arguments)};function P(Et,Z){var q={};for(var bt in Et)Object.prototype.hasOwnProperty.call(Et,bt)&&Z.indexOf(bt)<0&&(q[bt]=Et[bt]);if(Et!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ct=0,bt=Object.getOwnPropertySymbols(Et);Ct<bt.length;Ct++)Z.indexOf(bt[Ct])<0&&Object.prototype.propertyIsEnumerable.call(Et,bt[Ct])&&(q[bt[Ct]]=Et[bt[Ct]]);return q}function L(Et,Z,q,bt){var Ct=arguments.length,nt=Ct<3?Z:bt===null?bt=Object.getOwnPropertyDescriptor(Z,q):bt,ht;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")nt=Reflect.decorate(Et,Z,q,bt);else for(var At=Et.length-1;At>=0;At--)(ht=Et[At])&&(nt=(Ct<3?ht(nt):Ct>3?ht(Z,q,nt):ht(Z,q))||nt);return Ct>3&&nt&&Object.defineProperty(Z,q,nt),nt}function p(Et,Z){return function(q,bt){Z(q,bt,Et)}}function b(Et,Z,q,bt,Ct,nt){function ht(Ut){if(Ut!==void 0&&typeof Ut!="function")throw new TypeError("Function expected");return Ut}for(var At=bt.kind,Ot=At==="getter"?"get":At==="setter"?"set":"value",xt=!Z&&Et?bt.static?Et:Et.prototype:null,Dt=Z||(xt?Object.getOwnPropertyDescriptor(xt,bt.name):{}),Yt,ie=!1,re=q.length-1;re>=0;re--){var Pt={};for(var ee in bt)Pt[ee]=ee==="access"?{}:bt[ee];for(var ee in bt.access)Pt.access[ee]=bt.access[ee];Pt.addInitializer=function(Ut){if(ie)throw new TypeError("Cannot add initializers after decoration has completed");nt.push(ht(Ut||null))};var ce=(0,q[re])(At==="accessor"?{get:Dt.get,set:Dt.set}:Dt[Ot],Pt);if(At==="accessor"){if(ce===void 0)continue;if(ce===null||typeof ce!="object")throw new TypeError("Object expected");(Yt=ht(ce.get))&&(Dt.get=Yt),(Yt=ht(ce.set))&&(Dt.set=Yt),(Yt=ht(ce.init))&&Ct.push(Yt)}else(Yt=ht(ce))&&(At==="field"?Ct.push(Yt):Dt[Ot]=Yt)}xt&&Object.defineProperty(xt,bt.name,Dt),ie=!0}function S(Et,Z,q){for(var bt=arguments.length>2,Ct=0;Ct<Z.length;Ct++)q=bt?Z[Ct].call(Et,q):Z[Ct].call(Et);return bt?q:void 0}function x(Et){return typeof Et=="symbol"?Et:"".concat(Et)}function y(Et,Z,q){return typeof Z=="symbol"&&(Z=Z.description?"[".concat(Z.description,"]"):""),Object.defineProperty(Et,"name",{configurable:!0,value:q?"".concat(q," ",Z):Z})}function A(Et,Z){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Et,Z)}function E(Et,Z,q,bt){function Ct(nt){return nt instanceof q?nt:new q(function(ht){ht(nt)})}return new(q||(q=Promise))(function(nt,ht){function At(Dt){try{xt(bt.next(Dt))}catch(Yt){ht(Yt)}}function Ot(Dt){try{xt(bt.throw(Dt))}catch(Yt){ht(Yt)}}function xt(Dt){Dt.done?nt(Dt.value):Ct(Dt.value).then(At,Ot)}xt((bt=bt.apply(Et,Z||[])).next())})}function D(Et,Z){var q={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},bt,Ct,nt,ht;return ht={next:At(0),throw:At(1),return:At(2)},typeof Symbol=="function"&&(ht[Symbol.iterator]=function(){return this}),ht;function At(xt){return function(Dt){return Ot([xt,Dt])}}function Ot(xt){if(bt)throw new TypeError("Generator is already executing.");for(;ht&&(ht=0,xt[0]&&(q=0)),q;)try{if(bt=1,Ct&&(nt=xt[0]&2?Ct.return:xt[0]?Ct.throw||((nt=Ct.return)&&nt.call(Ct),0):Ct.next)&&!(nt=nt.call(Ct,xt[1])).done)return nt;switch(Ct=0,nt&&(xt=[xt[0]&2,nt.value]),xt[0]){case 0:case 1:nt=xt;break;case 4:return q.label++,{value:xt[1],done:!1};case 5:q.label++,Ct=xt[1],xt=[0];continue;case 7:xt=q.ops.pop(),q.trys.pop();continue;default:if(nt=q.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(xt[0]===6||xt[0]===2)){q=0;continue}if(xt[0]===3&&(!nt||xt[1]>nt[0]&&xt[1]<nt[3])){q.label=xt[1];break}if(xt[0]===6&&q.label<nt[1]){q.label=nt[1],nt=xt;break}if(nt&&q.label<nt[2]){q.label=nt[2],q.ops.push(xt);break}nt[2]&&q.ops.pop(),q.trys.pop();continue}xt=Z.call(Et,q)}catch(Dt){xt=[6,Dt],Ct=0}finally{bt=nt=0}if(xt[0]&5)throw xt[1];return{value:xt[0]?xt[1]:void 0,done:!0}}}var B=Object.create?function(Et,Z,q,bt){bt===void 0&&(bt=q);var Ct=Object.getOwnPropertyDescriptor(Z,q);(!Ct||("get"in Ct?!Z.__esModule:Ct.writable||Ct.configurable))&&(Ct={enumerable:!0,get:function(){return Z[q]}}),Object.defineProperty(Et,bt,Ct)}:function(Et,Z,q,bt){bt===void 0&&(bt=q),Et[bt]=Z[q]};function m(Et,Z){for(var q in Et)q!=="default"&&!Object.prototype.hasOwnProperty.call(Z,q)&&B(Z,Et,q)}function f(Et){var Z=typeof Symbol=="function"&&Symbol.iterator,q=Z&&Et[Z],bt=0;if(q)return q.call(Et);if(Et&&typeof Et.length=="number")return{next:function(){return Et&&bt>=Et.length&&(Et=void 0),{value:Et&&Et[bt++],done:!Et}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(Et,Z){var q=typeof Symbol=="function"&&Et[Symbol.iterator];if(!q)return Et;var bt=q.call(Et),Ct,nt=[],ht;try{for(;(Z===void 0||Z-- >0)&&!(Ct=bt.next()).done;)nt.push(Ct.value)}catch(At){ht={error:At}}finally{try{Ct&&!Ct.done&&(q=bt.return)&&q.call(bt)}finally{if(ht)throw ht.error}}return nt}function X(){for(var Et=[],Z=0;Z<arguments.length;Z++)Et=Et.concat(W(arguments[Z]));return Et}function z(){for(var Et=0,Z=0,q=arguments.length;Z<q;Z++)Et+=arguments[Z].length;for(var bt=Array(Et),Ct=0,Z=0;Z<q;Z++)for(var nt=arguments[Z],ht=0,At=nt.length;ht<At;ht++,Ct++)bt[Ct]=nt[ht];return bt}function U(Et,Z,q){if(q||arguments.length===2)for(var bt=0,Ct=Z.length,nt;bt<Ct;bt++)(nt||!(bt in Z))&&(nt||(nt=Array.prototype.slice.call(Z,0,bt)),nt[bt]=Z[bt]);return Et.concat(nt||Array.prototype.slice.call(Z))}function j(Et){return this instanceof j?(this.v=Et,this):new j(Et)}function V(Et,Z,q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt=q.apply(Et,Z||[]),Ct,nt=[];return Ct={},ht("next"),ht("throw"),ht("return"),Ct[Symbol.asyncIterator]=function(){return this},Ct;function ht(ie){bt[ie]&&(Ct[ie]=function(re){return new Promise(function(Pt,ee){nt.push([ie,re,Pt,ee])>1||At(ie,re)})})}function At(ie,re){try{Ot(bt[ie](re))}catch(Pt){Yt(nt[0][3],Pt)}}function Ot(ie){ie.value instanceof j?Promise.resolve(ie.value.v).then(xt,Dt):Yt(nt[0][2],ie)}function xt(ie){At("next",ie)}function Dt(ie){At("throw",ie)}function Yt(ie,re){ie(re),nt.shift(),nt.length&&At(nt[0][0],nt[0][1])}}function J(Et){var Z,q;return Z={},bt("next"),bt("throw",function(Ct){throw Ct}),bt("return"),Z[Symbol.iterator]=function(){return this},Z;function bt(Ct,nt){Z[Ct]=Et[Ct]?function(ht){return(q=!q)?{value:j(Et[Ct](ht)),done:!1}:nt?nt(ht):ht}:nt}}function Q(Et){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z=Et[Symbol.asyncIterator],q;return Z?Z.call(Et):(Et=typeof f=="function"?f(Et):Et[Symbol.iterator](),q={},bt("next"),bt("throw"),bt("return"),q[Symbol.asyncIterator]=function(){return this},q);function bt(nt){q[nt]=Et[nt]&&function(ht){return new Promise(function(At,Ot){ht=Et[nt](ht),Ct(At,Ot,ht.done,ht.value)})}}function Ct(nt,ht,At,Ot){Promise.resolve(Ot).then(function(xt){nt({value:xt,done:At})},ht)}}function et(Et,Z){return Object.defineProperty?Object.defineProperty(Et,"raw",{value:Z}):Et.raw=Z,Et}var ut=Object.create?function(Et,Z){Object.defineProperty(Et,"default",{enumerable:!0,value:Z})}:function(Et,Z){Et.default=Z};function it(Et){if(Et&&Et.__esModule)return Et;var Z={};if(Et!=null)for(var q in Et)q!=="default"&&Object.prototype.hasOwnProperty.call(Et,q)&&B(Z,Et,q);return ut(Z,Et),Z}function yt(Et){return Et&&Et.__esModule?Et:{default:Et}}function ft(Et,Z,q,bt){if(q==="a"&&!bt)throw new TypeError("Private accessor was defined without a getter");if(typeof Z=="function"?Et!==Z||!bt:!Z.has(Et))throw new TypeError("Cannot read private member from an object whose class did not declare it");return q==="m"?bt:q==="a"?bt.call(Et):bt?bt.value:Z.get(Et)}function Bt(Et,Z,q,bt,Ct){if(bt==="m")throw new TypeError("Private method is not writable");if(bt==="a"&&!Ct)throw new TypeError("Private accessor was defined without a setter");if(typeof Z=="function"?Et!==Z||!Ct:!Z.has(Et))throw new TypeError("Cannot write private member to an object whose class did not declare it");return bt==="a"?Ct.call(Et,q):Ct?Ct.value=q:Z.set(Et,q),q}function St(Et,Z){if(Z===null||typeof Z!="object"&&typeof Z!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Et=="function"?Z===Et:Et.has(Z)}},function(G,_,g){"use strict";var R=g(4),w=g(9),M=g(34);_.a=function(P,L,p,b){b===void 0&&(b="...");var S=16,x=Object(M.a)(b,p),y=Object(R.a)(P)?P:Object(w.a)(P),A=L,E=[],D,B;if(Object(M.a)(P,p)<=L)return P;for(;D=y.substr(0,S),B=Object(M.a)(D,p),!(B+x>A&&B>A);)if(E.push(D),A-=B,y=y.substr(S),!y)return E.join("");for(;D=y.substr(0,1),B=Object(M.a)(D,p),!(B+x>A);)if(E.push(D),A-=B,y=y.substr(1),!y)return E.join("");return""+E.join("")+b}},function(G,_,g){"use strict";var R=function(){function w(){this.map={}}return w.prototype.has=function(M){return this.map[M]!==void 0},w.prototype.get=function(M,P){var L=this.map[M];return L===void 0?P:L},w.prototype.set=function(M,P){this.map[M]=P},w.prototype.clear=function(){this.map={}},w.prototype.delete=function(M){delete this.map[M]},w.prototype.size=function(){return Object.keys(this.map).length},w}();_.a=R},function(G,_){function g(p,b,S,x){x===void 0&&(x=[]);var y=this;y.w=p||0,y.h=b||0,y.y=S||0,y.x=0,y.c=x||[],y.cs=x.length,y.prelim=0,y.mod=0,y.shift=0,y.change=0,y.tl=null,y.tr=null,y.el=null,y.er=null,y.msel=0,y.mser=0}g.fromNode=function(p,b){if(!p)return null;var S=[];return p.children.forEach(function(x){S.push(g.fromNode(x,b))}),b?new g(p.height,p.width,p.x,S):new g(p.width,p.height,p.y,S)};function R(p,b,S){S?p.y+=b:p.x+=b,p.children.forEach(function(x){R(x,b,S)})}function w(p,b){var S=b?p.y:p.x;return p.children.forEach(function(x){S=Math.min(w(x,b),S)}),S}function M(p,b){var S=w(p,b);R(p,-S,b)}function P(p,b,S){S?b.y=p.x:b.x=p.x,p.c.forEach(function(x,y){P(x,b.children[y],S)})}function L(p,b,S){S===void 0&&(S=0),b?(p.x=S,S+=p.width):(p.y=S,S+=p.height),p.children.forEach(function(x){L(x,b,S)})}G.exports=function(p,b){b===void 0&&(b={});var S=b.isHorizontal;function x(Q){if(Q.cs===0){y(Q);return}x(Q.c[0]);for(var et=V(m(Q.c[0].el),0,null),ut=1;ut<Q.cs;++ut){x(Q.c[ut]);var it=m(Q.c[ut].er);A(Q,ut,et),et=V(it,ut,et)}X(Q),y(Q)}function y(Q){Q.cs===0?(Q.el=Q,Q.er=Q,Q.msel=Q.mser=0):(Q.el=Q.c[0].el,Q.msel=Q.c[0].msel,Q.er=Q.c[Q.cs-1].er,Q.mser=Q.c[Q.cs-1].mser)}function A(Q,et,ut){for(var it=Q.c[et-1],yt=it.mod,ft=Q.c[et],Bt=ft.mod;it!==null&&ft!==null;){m(it)>ut.low&&(ut=ut.nxt);var St=yt+it.prelim+it.w-(Bt+ft.prelim);St>0&&(Bt+=St,E(Q,et,ut.index,St));var Et=m(it),Z=m(ft);Et<=Z&&(it=B(it),it!==null&&(yt+=it.mod)),Et>=Z&&(ft=D(ft),ft!==null&&(Bt+=ft.mod))}!it&&ft?f(Q,et,ft,Bt):it&&!ft&&W(Q,et,it,yt)}function E(Q,et,ut,it){Q.c[et].mod+=it,Q.c[et].msel+=it,Q.c[et].mser+=it,U(Q,et,ut,it)}function D(Q){return Q.cs===0?Q.tl:Q.c[0]}function B(Q){return Q.cs===0?Q.tr:Q.c[Q.cs-1]}function m(Q){return Q.y+Q.h}function f(Q,et,ut,it){var yt=Q.c[0].el;yt.tl=ut;var ft=it-ut.mod-Q.c[0].msel;yt.mod+=ft,yt.prelim-=ft,Q.c[0].el=Q.c[et].el,Q.c[0].msel=Q.c[et].msel}function W(Q,et,ut,it){var yt=Q.c[et].er;yt.tr=ut;var ft=it-ut.mod-Q.c[et].mser;yt.mod+=ft,yt.prelim-=ft,Q.c[et].er=Q.c[et-1].er,Q.c[et].mser=Q.c[et-1].mser}function X(Q){Q.prelim=(Q.c[0].prelim+Q.c[0].mod+Q.c[Q.cs-1].mod+Q.c[Q.cs-1].prelim+Q.c[Q.cs-1].w)/2-Q.w/2}function z(Q,et){et+=Q.mod,Q.x=Q.prelim+et,j(Q);for(var ut=0;ut<Q.cs;ut++)z(Q.c[ut],et)}function U(Q,et,ut,it){if(ut!==et-1){var yt=et-ut;Q.c[ut+1].shift+=it/yt,Q.c[et].shift-=it/yt,Q.c[et].change-=it-it/yt}}function j(Q){for(var et=0,ut=0,it=0;it<Q.cs;it++)et+=Q.c[it].shift,ut+=et+Q.c[it].change,Q.c[it].mod+=ut}function V(Q,et,ut){for(;ut!==null&&Q>=ut.low;)ut=ut.nxt;return{low:Q,index:et,nxt:ut}}L(p,S);var J=g.fromNode(p,S);return x(J),z(J,0),P(J,p,S),M(p,S),p}},function(G,_,g){function R(y,A){y.prototype=Object.create(A.prototype),y.prototype.constructor=y,w(y,A)}function w(y,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,B){return D.__proto__=B,D},w(y,A)}var M=g(11),P=g(121),L=g(17),p=g(6),b=function(y){R(A,y);function A(){return y.apply(this,arguments)||this}var E=A.prototype;return E.execute=function(){var B=this;return B.rootNode.width=0,L(B.rootNode,B.options,P)},A}(M),S={};function x(y,A){return A=p.assign({},S,A),new b(y,A).execute()}G.exports=x},function(G,_,g){var R=g(6);function w(L,p){L===void 0&&(L=0),p===void 0&&(p=[]);var b=this;b.x=b.y=0,b.leftChild=b.rightChild=null,b.height=0,b.children=p}var M={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function P(L,p,b){b?(p.x=L.x,p.y=L.y):(p.x=L.y,p.y=L.x),L.children.forEach(function(S,x){P(S,p.children[x],b)})}G.exports=function(L,p){p===void 0&&(p={}),p=R.assign({},M,p);var b=0;function S(D){if(!D)return null;D.width=0,D.depth&&D.depth>b&&(b=D.depth);var B=D.children,m=B.length,f=new w(D.height,[]);return B.forEach(function(W,X){var z=S(W);f.children.push(z),X===0&&(f.leftChild=z),X===m-1&&(f.rightChild=z)}),f.originNode=D,f.isLeaf=D.isLeaf(),f}function x(D){if(D.isLeaf||D.children.length===0)D.drawingDepth=b;else{var B=D.children.map(function(f){return x(f)}),m=Math.min.apply(null,B);D.drawingDepth=m-1}return D.drawingDepth}var y;function A(D){D.x=D.drawingDepth*p.rankSep,D.isLeaf?(D.y=0,y&&(D.y=y.y+y.height+p.nodeSep,D.originNode.parent!==y.originNode.parent&&(D.y+=p.subTreeSep)),y=D):(D.children.forEach(function(B){A(B)}),D.y=(D.leftChild.y+D.rightChild.y)/2)}var E=S(L);return x(E),A(E),P(E,L,p.isHorizontal),L}},function(G,_,g){function R(E,D){E.prototype=Object.create(D.prototype),E.prototype.constructor=E,w(E,D)}function w(E,D){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,f){return m.__proto__=f,m},w(E,D)}var M=g(11),P=g(123),L=g(35),p=g(6),b=["LR","RL","H"],S=b[0],x=function(E){R(D,E);function D(){return E.apply(this,arguments)||this}var B=D.prototype;return B.execute=function(){var f=this,W=f.options,X=f.rootNode;W.isHorizontal=!0;var z=W.indent,U=z===void 0?20:z,j=W.dropCap,V=j===void 0?!0:j,J=W.direction,Q=J===void 0?S:J,et=W.align;if(Q&&b.indexOf(Q)===-1)throw new TypeError("Invalid direction: "+Q);if(Q===b[0])P(X,U,V,et);else if(Q===b[1])P(X,U,V,et),X.right2left();else if(Q===b[2]){var ut=L(X,W),it=ut.left,yt=ut.right;P(it,U,V,et),it.right2left(),P(yt,U,V,et);var ft=it.getBoundingBox();yt.translate(ft.width,0),X.x=yt.x-X.width/2}return X},D}(M),y={};function A(E,D){return D=p.assign({},y,D),new x(E,D).execute()}G.exports=A},function(G,_,g){var R=g(6);function w(M,P,L,p,b){var S=typeof L=="function"?L(M):L*M.depth;if(!p)try{if(M.id===M.parent.children[0].id){M.x+=S,M.y=P?P.y:0;return}}catch(A){}if(M.x+=S,P){if(M.y=P.y+R.getHeight(P,M,b),P.parent&&M.parent.id!==P.parent.id){var x=P.parent,y=x.y+R.getHeight(x,M,b);M.y=y>M.y?y:M.y}}else M.y=0}G.exports=function(M,P,L,p){var b=null;M.eachNode(function(S){w(S,b,P,L,p),b=S})}},function(G,_,g){function R(y,A){y.prototype=Object.create(A.prototype),y.prototype.constructor=y,w(y,A)}function w(y,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,B){return D.__proto__=B,D},w(y,A)}var M=g(11),P=g(125),L=g(17),p=g(6),b=function(y){R(A,y);function A(){return y.apply(this,arguments)||this}var E=A.prototype;return E.execute=function(){var B=this;return L(B.rootNode,B.options,P)},A}(M),S={};function x(y,A){return A=p.assign({},S,A),new b(y,A).execute()}G.exports=x},function(G,_,g){var R=g(6);function w(L,p){var b=0;return L.children.length?L.children.forEach(function(S){b+=w(S,p)}):b=L.height,L._subTreeSep=p.getSubTreeSep(L.data),L.totalHeight=Math.max(L.height,b)+2*L._subTreeSep,L.totalHeight}function M(L){var p=L.children,b=p.length;if(b){p.forEach(function(D){M(D)});var S=p[0],x=p[b-1],y=x.y-S.y+x.height,A=0;if(p.forEach(function(D){A+=D.totalHeight}),y>L.height)L.y=S.y+y/2-L.height/2;else if(p.length!==1||L.height>A){var E=L.y+(L.height-y)/2-S.y;p.forEach(function(D){D.translate(0,E)})}else L.y=(S.y+S.height/2+x.y+x.height/2)/2-L.height/2}}var P={getSubTreeSep:function(){return 0}};G.exports=function(L,p){p===void 0&&(p={}),p=R.assign({},P,p),L.parent={x:0,width:0,height:0,y:0},L.BFTraverse(function(b){b.x=b.parent.x+b.parent.width}),L.parent=null,w(L,p),L.startY=0,L.y=L.totalHeight/2-L.height/2,L.eachNode(function(b){var S=b.children,x=S.length;if(x){var y=S[0];if(y.startY=b.startY+b._subTreeSep,x===1)y.y=b.y+b.height/2-y.height/2;else{y.y=y.startY+y.totalHeight/2-y.height/2;for(var A=1;A<x;A++){var E=S[A];E.startY=S[A-1].startY+S[A-1].totalHeight,E.y=E.startY+E.totalHeight/2-E.height/2}}}}),M(L)}}])})},483360:function(Ne,G,_){"use strict";var g=this&&this.__createBinding||(Object.create?function(M,P,L,p){p===void 0&&(p=L);var b=Object.getOwnPropertyDescriptor(P,L);(!b||("get"in b?!P.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return P[L]}}),Object.defineProperty(M,p,b)}:function(M,P,L,p){p===void 0&&(p=L),M[p]=P[L]}),R=this&&this.__exportStar||function(M,P){for(var L in M)L!=="default"&&!Object.prototype.hasOwnProperty.call(P,L)&&g(P,M,L)};Object.defineProperty(G,"__esModule",{value:!0}),G.getLayoutByName=G.unRegisterLayout=G.registerLayout=void 0;var w=_(695326);Object.defineProperty(G,"registerLayout",{enumerable:!0,get:function(){return w.registerLayout}}),Object.defineProperty(G,"unRegisterLayout",{enumerable:!0,get:function(){return w.unRegisterLayout}}),Object.defineProperty(G,"getLayoutByName",{enumerable:!0,get:function(){return w.getLayoutByName}}),R(_(702584),G)},762329:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.Base=void 0;var _=function(){function g(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return g.prototype.layout=function(R){return this.init(R),this.execute(!0)},g.prototype.init=function(R){this.nodes=R.nodes||[],this.edges=R.edges||[],this.combos=R.combos||[],this.comboEdges=R.comboEdges||[],this.hiddenNodes=R.hiddenNodes||[],this.hiddenEdges=R.hiddenEdges||[],this.hiddenCombos=R.hiddenCombos||[],this.vedges=R.vedges||[]},g.prototype.execute=function(R){},g.prototype.executeWithWorker=function(){},g.prototype.getDefaultCfg=function(){return{}},g.prototype.updateCfg=function(R){R&&Object.assign(this,R)},g.prototype.getType=function(){return"base"},g.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},g}();G.Base=_},964885:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(y[E]=A[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function y(){this.constructor=S}S.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.CircularLayout=void 0;var R=_(762329),w=_(449784);function M(b,S,x,y){b.forEach(function(A,E){b[E].children=[],b[E].parent=[]}),y?S.forEach(function(A){var E=(0,w.getEdgeTerminal)(A,"source"),D=(0,w.getEdgeTerminal)(A,"target"),B=0;E&&(B=x[E]);var m=0;D&&(m=x[D]);var f=b[B].children,W=b[m].parent;f.push(b[m].id),W.push(b[B].id)}):S.forEach(function(A){var E=(0,w.getEdgeTerminal)(A,"source"),D=(0,w.getEdgeTerminal)(A,"target"),B=0;E&&(B=x[E]);var m=0;D&&(m=x[D]);var f=b[B].children,W=b[m].children;f.push(b[m].id),W.push(b[B].id)})}function P(b,S,x){for(var y=x.length,A=0;A<y;A++){var E=(0,w.getEdgeTerminal)(x[A],"source"),D=(0,w.getEdgeTerminal)(x[A],"target");if(b.id===E&&S.id===D||S.id===E&&b.id===D)return!0}return!1}function L(b,S){var x=b.degree,y=S.degree;return x<y?-1:x>y?1:0}var p=function(b){g(S,b);function S(x){var y=b.call(this)||this;return y.radius=null,y.nodeSize=void 0,y.startRadius=null,y.endRadius=null,y.startAngle=0,y.endAngle=2*Math.PI,y.clockwise=!0,y.divisions=1,y.ordering=null,y.angleRatio=1,y.nodes=[],y.edges=[],y.nodeMap={},y.degrees=[],y.width=300,y.height=300,y.updateCfg(x),y}return S.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},S.prototype.execute=function(){var x,y=this,A=y.nodes,E=y.edges,D=A.length;if(D===0){y.onLayoutEnd&&y.onLayoutEnd();return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var B=y.center;if(D===1){A[0].x=B[0],A[0].y=B[1],y.onLayoutEnd&&y.onLayoutEnd();return}var m=y.radius,f=y.startRadius,W=y.endRadius,X=y.divisions,z=y.startAngle,U=y.endAngle,j=y.angleRatio,V=y.ordering,J=y.clockwise,Q=y.nodeSpacing,et=y.nodeSize,ut=(U-z)/D,it={};A.forEach(function(At,Ot){it[At.id]=Ot}),y.nodeMap=it;var yt=(0,w.getDegree)(A.length,it,E);if(y.degrees=yt,Q){var ft=(0,w.getFuncByUnknownType)(10,Q),Bt=(0,w.getFuncByUnknownType)(10,et),St=-1/0;A.forEach(function(At){var Ot=Bt(At);St<Ot&&(St=Ot)});var Et=0;A.forEach(function(At,Ot){Ot===0?Et+=St||10:Et+=(ft(At)||0)+(St||10)}),m=Et/(2*Math.PI)}else!m&&!f&&!W?m=y.height>y.width?y.width/2:y.height/2:!f&&W?f=W:f&&!W&&(W=f);var Z=ut*j,q=[];V==="topology"?q=y.topologyOrdering():V==="topology-directed"?q=y.topologyOrdering(!0):V==="degree"?q=y.degreeOrdering():q=A;for(var bt=Math.ceil(D/X),Ct=0;Ct<D;++Ct){var nt=m;!nt&&f!==null&&W!==null&&(nt=f+Ct*(W-f)/(D-1)),nt||(nt=10+Ct*100/(D-1));var ht=z+Ct%bt*Z+2*Math.PI/X*Math.floor(Ct/bt);J||(ht=U-Ct%bt*Z-2*Math.PI/X*Math.floor(Ct/bt)),q[Ct].x=B[0]+Math.cos(ht)*nt,q[Ct].y=B[1]+Math.sin(ht)*nt,q[Ct].weight=yt[Ct].all}return(x=y.onLayoutEnd)===null||x===void 0||x.call(y),{nodes:q,edges:this.edges}},S.prototype.topologyOrdering=function(x){x===void 0&&(x=!1);var y=this,A=y.degrees,E=y.edges,D=y.nodes,B=(0,w.clone)(D),m=y.nodeMap,f=[B[0]],W=[D[0]],X=[],z=D.length;X[0]=!0,M(B,E,m,x);var U=0;return B.forEach(function(j,V){if(V!==0)if((V===z-1||A[V].all!==A[V+1].all||P(f[U],j,E))&&!X[V])f.push(j),W.push(D[m[j.id]]),X[V]=!0,U++;else{for(var J=f[U].children,Q=!1,et=0;et<J.length;et++){var ut=m[J[et]];if(A[ut].all===A[V].all&&!X[ut]){f.push(B[ut]),W.push(D[m[B[ut].id]]),X[ut]=!0,Q=!0;break}}for(var it=0;!Q&&(X[it]||(f.push(B[it]),W.push(D[m[B[it].id]]),X[it]=!0,Q=!0),it++,it!==z););}}),W},S.prototype.degreeOrdering=function(){var x=this,y=x.nodes,A=[],E=x.degrees;return y.forEach(function(D,B){D.degree=E[B].all,A.push(D)}),A.sort(L),A},S.prototype.getType=function(){return"circular"},S}(R.Base);G.CircularLayout=p},263861:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(y[E]=A[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function y(){this.constructor=S}S.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}}(),R=this&&this.__assign||function(){return R=Object.assign||function(b){for(var S,x=1,y=arguments.length;x<y;x++){S=arguments[x];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(b[A]=S[A])}return b},R.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.ComboCombinedLayout=void 0;var w=_(416470),M=_(762329),P=_(449784),L=_(702584),p=function(b){g(S,b);function S(x){var y=b.call(this)||this;return y.center=[0,0],y.nodes=[],y.edges=[],y.combos=[],y.comboEdges=[],y.comboPadding=10,y.comboTrees=[],y.updateCfg(x),y}return S.prototype.getDefaultCfg=function(){return{}},S.prototype.execute=function(){var x=this,y=x.nodes,A=x.center;if(!y||y.length===0){x.onLayoutEnd&&x.onLayoutEnd();return}if(y.length===1){y[0].x=A[0],y[0].y=A[1],x.onLayoutEnd&&x.onLayoutEnd();return}x.initVals(),x.run(),x.onLayoutEnd&&x.onLayoutEnd()},S.prototype.run=function(){var x,y=this,A=y.nodes,E=y.edges,D=y.combos,B=y.comboEdges,m=y.center,f={};A.forEach(function(St){f[St.id]=St});var W={};D.forEach(function(St){W[St.id]=St});var X=y.getInnerGraphs(f),z=[],U=[],j={},V=!0;this.comboTrees.forEach(function(St){var Et=X[St.id],Z=R(R({},St),{x:Et.x||W[St.id].x,y:Et.y||W[St.id].y,fx:Et.fx||W[St.id].fx,fy:Et.fy||W[St.id].fy,mass:Et.mass||W[St.id].mass,size:Et.size});U.push(Z),!isNaN(Z.x)&&Z.x!==0&&!isNaN(Z.y)&&Z.y!==0?V=!1:(Z.x=Math.random()*100,Z.y=Math.random()*100),z.push(St.id),(0,P.traverseTreeUp)(St,function(q){return q.id!==St.id&&(j[q.id]=St.id),!0})}),A.forEach(function(St){if(!(St.comboId&&W[St.comboId])){var Et=R({},St);U.push(Et),!isNaN(Et.x)&&Et.x!==0&&!isNaN(Et.y)&&Et.y!==0?V=!1:(Et.x=Math.random()*100,Et.y=Math.random()*100),z.push(St.id)}});var J=[];if(E.concat(B).forEach(function(St){var Et=j[St.source]||St.source,Z=j[St.target]||St.target;Et!==Z&&z.includes(Et)&&z.includes(Z)&&J.push({source:Et,target:Z})}),U!=null&&U.length){if(U.length===1)U[0].x=m[0],U[0].y=m[1];else{var Q={nodes:U,edges:J},et=this.outerLayout||new L.GForceLayout({gravity:1,factor:4,linkDistance:function(St,Et,Z){var q,bt,Ct=((((q=Et.size)===null||q===void 0?void 0:q[0])||30)+(((bt=Z.size)===null||bt===void 0?void 0:bt[0])||30))/2;return Math.min(Ct*1.5,700)}}),ut=(x=et.getType)===null||x===void 0?void 0:x.call(et);if(et.updateCfg({center:m,kg:5,preventOverlap:!0,animate:!1}),V&&w.FORCE_LAYOUT_TYPE_MAP[ut]){var it=U.length<100?new L.MDSLayout:new L.GridLayout;it.layout(Q)}et.layout(Q)}U.forEach(function(St){var Et=X[St.id];if(!Et){var Z=f[St.id];Z&&(Z.x=St.x,Z.y=St.y);return}Et.visited=!0,Et.x=St.x,Et.y=St.y,Et.nodes.forEach(function(q){q.x+=St.x,q.y+=St.y})})}for(var yt=Object.keys(X),ft=function(St){var Et=yt[St],Z=X[Et];if(!Z)return"continue";Z.nodes.forEach(function(q){Z.visited||(q.x+=Z.x||0,q.y+=Z.y||0),f[q.id]&&(f[q.id].x=q.x,f[q.id].y=q.y)}),W[Et]&&(W[Et].x=Z.x,W[Et].y=Z.y)},Bt=yt.length-1;Bt>=0;Bt--)ft(Bt);return{nodes:A,edges:E,combos:D,comboEdges:B}},S.prototype.getInnerGraphs=function(x){var y=this,A=y.comboTrees,E=y.nodeSize,D=y.edges,B=y.comboPadding,m=y.spacing,f={},W=this.innerLayout||new L.ConcentricLayout({sortBy:"id"});return W.center=[0,0],W.preventOverlap=!0,W.nodeSpacing=m,(A||[]).forEach(function(X){(0,P.traverseTreeUp)(X,function(z){var U,j=(B==null?void 0:B(z))||10;if((0,P.isArray)(j)&&(j=Math.max.apply(Math,j)),!((U=z.children)===null||U===void 0)&&U.length){var J=z.children.map(function(q){if(q.itemType==="combo")return f[q.id];var bt=x[q.id]||{};return R(R({},bt),q)}),Q=J.map(function(q){return q.id}),et={nodes:J,edges:D.filter(function(q){return Q.includes(q.source)&&Q.includes(q.target)})},ut=1/0;J.forEach(function(q){var bt;q.size||(q.size=((bt=f[q.id])===null||bt===void 0?void 0:bt.size)||(E==null?void 0:E(q))||[30,30]),(0,P.isNumber)(q.size)&&(q.size=[q.size,q.size]),ut>q.size[0]&&(ut=q.size[0]),ut>q.size[1]&&(ut=q.size[1])}),W.layout(et);var it=(0,P.getLayoutBBox)(J),yt=it.minX,ft=it.minY,Bt=it.maxX,St=it.maxY,Et={x:(Bt+yt)/2,y:(St+ft)/2};et.nodes.forEach(function(q){q.x-=Et.x,q.y-=Et.y});var Z=Math.max(Bt-yt,St-ft,ut)+j*2;f[z.id]={id:z.id,nodes:J,size:[Z,Z]}}else if(z.itemType==="combo"){var V=j?[j*2,j*2]:[30,30];f[z.id]={id:z.id,nodes:[],size:V}}return!0})}),f},S.prototype.initVals=function(){var x=this,y=x.nodeSize,A=x.spacing,E,D;if((0,P.isNumber)(A)?D=function(){return A}:(0,P.isFunction)(A)?D=A:D=function(){return 0},this.spacing=D,!y)E=function(z){var U=D(z);if(z.size){if((0,P.isArray)(z.size)){var j=z.size[0]>z.size[1]?z.size[0]:z.size[1];return(j+U)/2}if((0,P.isObject)(z.size)){var j=z.size.width>z.size.height?z.size.width:z.size.height;return(j+U)/2}return(z.size+U)/2}return 10+U/2};else if((0,P.isFunction)(y))E=function(z){var U=y(z),j=D(z);if((0,P.isArray)(z.size)){var V=z.size[0]>z.size[1]?z.size[0]:z.size[1];return(V+j)/2}return((U||10)+j)/2};else if((0,P.isArray)(y)){var B=y[0]>y[1]?y[0]:y[1],m=B/2;E=function(z){return m+D(z)/2}}else{var f=y/2;E=function(z){return f+D(z)/2}}this.nodeSize=E;var W=x.comboPadding,X;(0,P.isNumber)(W)?X=function(){return W}:(0,P.isArray)(W)?X=function(){return Math.max.apply(null,W)}:(0,P.isFunction)(W)?X=W:X=function(){return 0},this.comboPadding=X},S.prototype.getType=function(){return"comboCombined"},S}(M.Base);G.ComboCombinedLayout=p},366590:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var P=function(L,p){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(b[x]=S[x])},P(L,p)};return function(L,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");P(L,p);function b(){this.constructor=L}L.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.ComboForceLayout=void 0;var R=_(762329),w=_(449784),M=function(P){g(L,P);function L(p){var b=P.call(this)||this;return b.center=[0,0],b.maxIteration=100,b.gravity=10,b.comboGravity=10,b.linkDistance=10,b.alpha=1,b.alphaMin=.001,b.alphaDecay=1-Math.pow(b.alphaMin,1/300),b.alphaTarget=0,b.velocityDecay=.6,b.edgeStrength=.6,b.nodeStrength=30,b.preventOverlap=!1,b.preventNodeOverlap=!1,b.preventComboOverlap=!1,b.collideStrength=void 0,b.nodeCollideStrength=.5,b.comboCollideStrength=.5,b.comboSpacing=20,b.comboPadding=10,b.optimizeRangeFactor=1,b.onTick=function(){},b.onLayoutEnd=function(){},b.depthAttractiveForceScale=1,b.depthRepulsiveForceScale=2,b.nodes=[],b.edges=[],b.combos=[],b.comboTrees=[],b.width=300,b.height=300,b.bias=[],b.nodeMap={},b.oriComboMap={},b.indexMap={},b.comboMap={},b.previousLayouted=!1,b.updateCfg(p),b}return L.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},L.prototype.execute=function(){var p=this,b=p.nodes,S=p.center;if(p.comboTree={id:"comboTreeRoot",depth:-1,children:p.comboTrees},!b||b.length===0){p.onLayoutEnd&&p.onLayoutEnd();return}if(b.length===1){b[0].x=S[0],b[0].y=S[1],p.onLayoutEnd&&p.onLayoutEnd();return}p.initVals(),p.run(),p.onLayoutEnd&&p.onLayoutEnd()},L.prototype.run=function(){var p=this,b=p.nodes,S=p.previousLayouted?p.maxIteration/5:p.maxIteration;!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight);var x=p.center,y=p.velocityDecay,A=p.comboMap;p.previousLayouted||p.initPos(A);for(var E=function(f){var W=[];b.forEach(function(X,z){W[z]={x:0,y:0}}),p.applyCalculate(W),p.applyComboCenterForce(W),b.forEach(function(X,z){!(0,w.isNumber)(X.x)||!(0,w.isNumber)(X.y)||(X.x+=W[z].x*y,X.y+=W[z].y*y)}),p.alpha+=(p.alphaTarget-p.alpha)*p.alphaDecay,p.onTick()},D=0;D<S;D++)E(D);var B=[0,0];b.forEach(function(f){!(0,w.isNumber)(f.x)||!(0,w.isNumber)(f.y)||(B[0]+=f.x,B[1]+=f.y)}),B[0]/=b.length,B[1]/=b.length;var m=[x[0]-B[0],x[1]-B[1]];b.forEach(function(f,W){!(0,w.isNumber)(f.x)||!(0,w.isNumber)(f.y)||(f.x+=m[0],f.y+=m[1])}),p.combos.forEach(function(f){var W=A[f.id];W&&W.empty&&(f.x=W.cx||f.x,f.y=W.cy||f.y)}),p.previousLayouted=!0},L.prototype.initVals=function(){var p=this,b=p.edges,S=p.nodes,x=p.combos,y={},A={},E={};S.forEach(function(nt,ht){A[nt.id]=nt,E[nt.id]=ht}),p.nodeMap=A,p.indexMap=E;var D={};x.forEach(function(nt){D[nt.id]=nt}),p.oriComboMap=D,p.comboMap=p.getComboMap();var B=p.preventOverlap;p.preventComboOverlap=p.preventComboOverlap||B,p.preventNodeOverlap=p.preventNodeOverlap||B;var m=p.collideStrength;m&&(p.comboCollideStrength=m,p.nodeCollideStrength=m),p.comboCollideStrength=p.comboCollideStrength?p.comboCollideStrength:0,p.nodeCollideStrength=p.nodeCollideStrength?p.nodeCollideStrength:0;for(var f=0;f<b.length;++f){var W=(0,w.getEdgeTerminal)(b[f],"source"),X=(0,w.getEdgeTerminal)(b[f],"target");y[W]?y[W]++:y[W]=1,y[X]?y[X]++:y[X]=1}for(var z=[],f=0;f<b.length;++f){var W=(0,w.getEdgeTerminal)(b[f],"source"),X=(0,w.getEdgeTerminal)(b[f],"target");z[f]=y[W]/(y[W]+y[X])}this.bias=z;var U=p.nodeSize,j=p.nodeSpacing,V,J;if((0,w.isNumber)(j)?J=function(){return j}:(0,w.isFunction)(j)?J=j:J=function(){return 0},this.nodeSpacing=J,!U)V=function(nt){if(nt.size){if((0,w.isArray)(nt.size)){var ht=nt.size[0]>nt.size[1]?nt.size[0]:nt.size[1];return ht/2}if((0,w.isObject)(nt.size)){var ht=nt.size.width>nt.size.height?nt.size.width:nt.size.height;return ht/2}return nt.size/2}return 10};else if((0,w.isFunction)(U))V=function(nt){return U(nt)};else if((0,w.isArray)(U)){var Q=U[0]>U[1]?U[0]:U[1],et=Q/2;V=function(nt){return et}}else{var ut=U/2;V=function(nt){return ut}}this.nodeSize=V;var it=p.comboSpacing,yt;(0,w.isNumber)(it)?yt=function(){return it}:(0,w.isFunction)(it)?yt=it:yt=function(){return 0},this.comboSpacing=yt;var ft=p.comboPadding,Bt;(0,w.isNumber)(ft)?Bt=function(){return ft}:(0,w.isArray)(ft)?Bt=function(){return Math.max.apply(null,ft)}:(0,w.isFunction)(ft)?Bt=ft:Bt=function(){return 0},this.comboPadding=Bt;var St=this.linkDistance,Et;St||(St=10),(0,w.isNumber)(St)?Et=function(nt){return St}:Et=St,this.linkDistance=Et;var Z=this.edgeStrength,q;Z||(Z=1),(0,w.isNumber)(Z)?q=function(nt){return Z}:q=Z,this.edgeStrength=q;var bt=this.nodeStrength,Ct;bt||(bt=30),(0,w.isNumber)(bt)?Ct=function(nt){return bt}:Ct=bt,this.nodeStrength=Ct},L.prototype.initPos=function(p){var b=this,S=b.nodes;S.forEach(function(x,y){var A=x.comboId,E=p[A];A&&E?(x.x=E.cx+100/(y+1),x.y=E.cy+100/(y+1)):(x.x=100/(y+1),x.y=100/(y+1))})},L.prototype.getComboMap=function(){var p=this,b=p.nodeMap,S=p.comboTrees,x=p.oriComboMap,y={};return(S||[]).forEach(function(A){var E=[];(0,w.traverseTreeUp)(A,function(D){if(D.itemType==="node"||!x[D.id])return!0;if(y[D.id]===void 0){var B={id:D.id,name:D.id,cx:0,cy:0,count:0,depth:p.oriComboMap[D.id].depth||0,children:[]};y[D.id]=B}var m=D.children;m&&m.forEach(function(X){if(!y[X.id]&&!b[X.id])return!0;E.push(X)});var f=y[D.id];if(f.cx=0,f.cy=0,E.length===0){f.empty=!0;var W=x[D.id];f.cx=W.x,f.cy=W.y}return E.forEach(function(X){if(f.count++,X.itemType!=="node"){var z=y[X.id];(0,w.isNumber)(z.cx)&&(f.cx+=z.cx),(0,w.isNumber)(z.cy)&&(f.cy+=z.cy);return}var U=b[X.id];U&&((0,w.isNumber)(U.x)&&(f.cx+=U.x),(0,w.isNumber)(U.y)&&(f.cy+=U.y))}),f.cx/=f.count||1,f.cy/=f.count||1,f.children=E,!0})}),y},L.prototype.applyComboCenterForce=function(p){var b=this,S=b.gravity,x=b.comboGravity||S,y=this.alpha,A=b.comboTrees,E=b.indexMap,D=b.nodeMap,B=b.comboMap;(A||[]).forEach(function(m){(0,w.traverseTreeUp)(m,function(f){if(f.itemType==="node")return!0;var W=B[f.id];if(!W)return!0;var X=B[f.id],z=(X.depth+1)/10*.5,U=X.cx,j=X.cy;return X.cx=0,X.cy=0,X.children.forEach(function(V){if(V.itemType!=="node"){var J=B[V.id];J&&(0,w.isNumber)(J.cx)&&(X.cx+=J.cx),J&&(0,w.isNumber)(J.cy)&&(X.cy+=J.cy);return}var Q=D[V.id],et=Q.x-U||.005,ut=Q.y-j||.005,it=Math.sqrt(et*et+ut*ut),yt=E[Q.id],ft=x*y/it*z;p[yt].x-=et*ft,p[yt].y-=ut*ft,(0,w.isNumber)(Q.x)&&(X.cx+=Q.x),(0,w.isNumber)(Q.y)&&(X.cy+=Q.y)}),X.cx/=X.count||1,X.cy/=X.count||1,!0})})},L.prototype.applyCalculate=function(p){var b=this,S=b.comboMap,x=b.nodes,y={};x.forEach(function(E,D){x.forEach(function(B,m){if(!(D<m)){var f=E.x-B.x||.005,W=E.y-B.y||.005,X=f*f+W*W,z=Math.sqrt(X);X<1&&(X=z),y["".concat(E.id,"-").concat(B.id)]={vx:f,vy:W,vl2:X,vl:z},y["".concat(B.id,"-").concat(E.id)]={vl2:X,vl:z,vx:-f,vy:-W}}})}),b.updateComboSizes(S),b.calRepulsive(p,y),b.calAttractive(p,y);var A=b.preventComboOverlap;A&&b.comboNonOverlapping(p,S)},L.prototype.updateComboSizes=function(p){var b=this,S=b.comboTrees,x=b.nodeMap,y=b.nodeSize,A=b.comboSpacing,E=b.comboPadding;(S||[]).forEach(function(D){var B=[];(0,w.traverseTreeUp)(D,function(m){if(m.itemType==="node")return!0;var f=p[m.id];if(!f)return!1;var W=m.children;W&&W.forEach(function(U){!p[U.id]&&!x[U.id]||B.push(U)}),f.minX=1/0,f.minY=1/0,f.maxX=-1/0,f.maxY=-1/0,B.forEach(function(U){if(U.itemType!=="node")return!0;var j=x[U.id];if(!j)return!0;var V=y(j),J=j.x-V,Q=j.y-V,et=j.x+V,ut=j.y+V;f.minX>J&&(f.minX=J),f.minY>Q&&(f.minY=Q),f.maxX<et&&(f.maxX=et),f.maxY<ut&&(f.maxY=ut)});var X=b.oriComboMap[m.id].size||10;(0,w.isArray)(X)&&(X=X[0]);var z=Math.max(f.maxX-f.minX,f.maxY-f.minY,X);return f.r=z/2+A(f)/2+E(f),!0})})},L.prototype.comboNonOverlapping=function(p,b){var S=this,x=S.comboTree,y=S.comboCollideStrength,A=S.indexMap,E=S.nodeMap;(0,w.traverseTreeUp)(x,function(D){if(!b[D.id]&&!E[D.id]&&D.id!=="comboTreeRoot")return!1;var B=D.children;return B&&B.length>1&&B.forEach(function(m,f){if(m.itemType==="node")return!1;var W=b[m.id];W&&B.forEach(function(X,z){if(f<=z||X.itemType==="node")return!1;var U=b[X.id];if(!U)return!1;var j=W.cx-U.cx||.005,V=W.cy-U.cy||.005,J=j*j+V*V,Q=W.r||1,et=U.r||1,ut=Q+et,it=et*et,yt=Q*Q;if(J<ut*ut){var ft=m.children;if(!ft||ft.length===0)return!1;var Bt=X.children;if(!Bt||Bt.length===0)return!1;var St=Math.sqrt(J),Et=(ut-St)/St*y,Z=j*Et,q=V*Et,bt=it/(yt+it),Ct=1-bt;ft.forEach(function(nt){if(nt.itemType!=="node")return!1;if(E[nt.id]){var ht=A[nt.id];Bt.forEach(function(At){if(At.itemType!=="node"||!E[At.id])return!1;var Ot=A[At.id];p[ht].x+=Z*bt,p[ht].y+=q*bt,p[Ot].x-=Z*Ct,p[Ot].y-=q*Ct})}})}})}),!0})},L.prototype.calRepulsive=function(p,b){var S=this,x=S.nodes,y=S.width*S.optimizeRangeFactor,A=S.nodeStrength,E=S.alpha,D=S.nodeCollideStrength,B=S.preventNodeOverlap,m=S.nodeSize,f=S.nodeSpacing,W=S.depthRepulsiveForceScale,X=S.center;x.forEach(function(z,U){if(!(!z.x||!z.y)){if(X){var j=S.gravity,V=z.x-X[0]||.005,J=z.y-X[1]||.005,Q=Math.sqrt(V*V+J*J);p[U].x-=V*j*E/Q,p[U].y-=J*j*E/Q}x.forEach(function(et,ut){if(U!==ut&&!(!et.x||!et.y)){var it=b["".concat(z.id,"-").concat(et.id)],yt=it.vl2,ft=it.vl;if(!(ft>y)){var Bt=b["".concat(z.id,"-").concat(et.id)],St=Bt.vx,Et=Bt.vy,Z=Math.log(Math.abs(et.depth-z.depth)/10)+1||1;Z=Z<1?1:Z,et.comboId!==z.comboId&&(Z+=1);var q=Z?Math.pow(W,Z):1,bt=A(et)*E/yt*q;if(p[U].x+=St*bt,p[U].y+=Et*bt,U<ut&&B){var Ct=m(z)+f(z)||1,nt=m(et)+f(et)||1,ht=Ct+nt;if(yt<ht*ht){var At=(ht-ft)/ft*D,Ot=nt*nt,xt=Ot/(Ct*Ct+Ot),Dt=St*At,Yt=Et*At;p[U].x+=Dt*xt,p[U].y+=Yt*xt,xt=1-xt,p[ut].x-=Dt*xt,p[ut].y-=Yt*xt}}}}})}})},L.prototype.calAttractive=function(p,b){var S=this,x=S.edges,y=S.linkDistance,A=S.alpha,E=S.edgeStrength,D=S.bias,B=S.depthAttractiveForceScale;x.forEach(function(m,f){var W=(0,w.getEdgeTerminal)(m,"source"),X=(0,w.getEdgeTerminal)(m,"target");if(!(!W||!X||W===X)){var z=S.indexMap[W],U=S.indexMap[X],j=S.nodeMap[W],V=S.nodeMap[X];if(!(!j||!V)){var J=j.depth===V.depth?0:Math.log(Math.abs(j.depth-V.depth)/10);j.comboId===V.comboId&&(J=J/2);var Q=J?Math.pow(B,J):1;if(j.comboId!==V.comboId&&Q===1?Q=B/2:j.comboId===V.comboId&&(Q=2),!(!(0,w.isNumber)(V.x)||!(0,w.isNumber)(j.x)||!(0,w.isNumber)(V.y)||!(0,w.isNumber)(j.y))){var et=b["".concat(X,"-").concat(W)],ut=et.vl,it=et.vx,yt=et.vy,ft=(ut-y(m))/ut*A*E(m)*Q,Bt=it*ft,St=yt*ft,Et=D[f];p[U].x-=Bt*Et,p[U].y-=St*Et,p[z].x+=Bt*(1-Et),p[z].y+=St*(1-Et)}}}})},L.prototype.getType=function(){return"comboForce"},L}(R.Base);G.ComboForceLayout=M},843281:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var P=function(L,p){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(b[x]=S[x])},P(L,p)};return function(L,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");P(L,p);function b(){this.constructor=L}L.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.ConcentricLayout=void 0;var R=_(449784),w=_(762329),M=function(P){g(L,P);function L(p){var b=P.call(this)||this;return b.nodeSize=30,b.minNodeSpacing=10,b.nodeSpacing=10,b.preventOverlap=!1,b.equidistant=!1,b.startAngle=3/2*Math.PI,b.clockwise=!0,b.sortBy="degree",b.nodes=[],b.edges=[],b.width=300,b.height=300,b.onLayoutEnd=function(){},b.updateCfg(p),b}return L.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},L.prototype.execute=function(){var p,b,S=this,x=S.nodes,y=S.edges,A=x.length;if(A===0){(p=S.onLayoutEnd)===null||p===void 0||p.call(S);return}!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]);var E=S.center;if(A===1){x[0].x=E[0],x[0].y=E[1],(b=S.onLayoutEnd)===null||b===void 0||b.call(S);return}var D=S.nodeSize,B=S.nodeSpacing,m=[],f,W=0;(0,R.isArray)(D)?f=Math.max(D[0],D[1]):f=D,(0,R.isArray)(B)?W=Math.max(B[0],B[1]):(0,R.isNumber)(B)&&(W=B),x.forEach(function(Z){m.push(Z);var q=f;(0,R.isArray)(Z.size)?q=Math.max(Z.size[0],Z.size[1]):(0,R.isNumber)(Z.size)?q=Z.size:(0,R.isObject)(Z.size)&&(q=Math.max(Z.size.width,Z.size.height)),f=Math.max(f,q),(0,R.isFunction)(B)&&(W=Math.max(B(Z),W))}),S.clockwise=S.counterclockwise!==void 0?!S.counterclockwise:S.clockwise;var X={},z={};if(m.forEach(function(Z,q){X[Z.id]=Z,z[Z.id]=q}),(S.sortBy==="degree"||!(0,R.isString)(S.sortBy)||m[0][S.sortBy]===void 0)&&(S.sortBy="degree",!(0,R.isNumber)(x[0].degree))){var U=(0,R.getDegree)(x.length,z,y);m.forEach(function(Z,q){Z.degree=U[q].all})}m.sort(function(Z,q){return q[S.sortBy]-Z[S.sortBy]}),S.maxValueNode=m[0],S.maxLevelDiff=S.maxLevelDiff||S.maxValueNode[S.sortBy]/4;var j=[[]],V=j[0];m.forEach(function(Z){if(V.length>0){var q=Math.abs(V[0][S.sortBy]-Z[S.sortBy]);S.maxLevelDiff&&q>=S.maxLevelDiff&&(V=[],j.push(V))}V.push(Z)});var J=f+(W||S.minNodeSpacing);if(!S.preventOverlap){var Q=j.length>0&&j[0].length>1,et=Math.min(S.width,S.height)/2-J,ut=et/(j.length+(Q?1:0));J=Math.min(J,ut)}var it=0;if(j.forEach(function(Z){var q=S.sweep;q===void 0&&(q=2*Math.PI-2*Math.PI/Z.length);var bt=Z.dTheta=q/Math.max(1,Z.length-1);if(Z.length>1&&S.preventOverlap){var Ct=Math.cos(bt)-Math.cos(0),nt=Math.sin(bt)-Math.sin(0),ht=Math.sqrt(J*J/(Ct*Ct+nt*nt));it=Math.max(ht,it)}Z.r=it,it+=J}),S.equidistant){for(var yt=0,ft=0,Bt=0;Bt<j.length;Bt++){var St=j[Bt],Et=St.r-ft;yt=Math.max(yt,Et)}ft=0,j.forEach(function(Z,q){q===0&&(ft=Z.r),Z.r=ft,ft+=yt})}return j.forEach(function(Z){var q=Z.dTheta,bt=Z.r;Z.forEach(function(Ct,nt){var ht=S.startAngle+(S.clockwise?1:-1)*q*nt;Ct.x=E[0]+bt*Math.cos(ht),Ct.y=E[1]+bt*Math.sin(ht)})}),S.onLayoutEnd&&S.onLayoutEnd(),{nodes:x,edges:y}},L.prototype.getType=function(){return"concentric"},L}(w.Base);G.ConcentricLayout=M},416470:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.FORCE_LAYOUT_TYPE_MAP=G.LAYOUT_MESSAGE=void 0,G.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},G.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},920171:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var S=function(x,y){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(A[D]=E[D])},S(x,y)};return function(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");S(x,y);function A(){this.constructor=x}x.prototype=y===null?Object.create(y):(A.prototype=y.prototype,new A)}}(),R=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(G,"__esModule",{value:!0}),G.DagreLayout=void 0;var w=R(_(441106)),M=_(449784),P=_(762329),L=_(627652),p=function(S){g(x,S);function x(y){var A=S.call(this)||this;return A.rankdir="TB",A.nodesep=50,A.ranksep=50,A.controlPoints=!1,A.sortByCombo=!1,A.edgeLabelSpace=!0,A.radial=!1,A.nodes=[],A.edges=[],A.onLayoutEnd=function(){},A.layoutNode=function(E){var D=A,B=D.nodes,m=B.find(function(W){return W.id===E});if(m){var f=m.layout!==!1;return f}return!0},A.updateCfg(y),A}return x.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},x.prototype.execute=function(){var y=this,A,E,D,B,m=this,f=m.nodes,W=m.nodeSize,X=m.rankdir,z=m.combos,U=m.begin,j=m.radial,V=m.comboEdges,J=V===void 0?[]:V,Q=m.vedges,et=Q===void 0?[]:Q;if(f){var ut=m.edges||[],it=new L.Graph({multigraph:!0,compound:!0});m.nodeMap={};var yt={};f.forEach(function(vr){m.nodeMap[vr.id]=vr,vr.comboId&&(yt[vr.comboId]=yt[vr.comboId]||[],yt[vr.comboId].push(vr.id))});var ft=[],Bt={};!((A=m.nodeOrder)===null||A===void 0)&&A.length?(m.nodeOrder.forEach(function(vr){Bt[vr]=!0,ft.push(m.nodeMap[vr])}),f.forEach(function(vr){Bt[vr.id]||ft.push(vr)})):ft=f;var St;W?(0,M.isArray)(W)?St=function(){return W}:St=function(){return[W,W]}:St=function(vr){return vr.size?(0,M.isArray)(vr.size)?vr.size:(0,M.isObject)(vr.size)?[vr.size.width||40,vr.size.height||40]:[vr.size,vr.size]:[40,40]};var Et=(0,M.getFunc)(m.ranksep,50,m.ranksepFunc),Z=(0,M.getFunc)(m.nodesep,50,m.nodesepFunc),q=Z,bt=Et;(X==="LR"||X==="RL")&&(q=Et,bt=Z),it.setDefaultEdgeLabel(function(){return{}}),it.setGraph(m);var Ct={};this.sortByCombo&&z&&z.forEach(function(vr){if(Ct[vr.id]=vr,vr.collapsed){var Ze=St(vr),Er=bt(vr),ke=q(vr),Xe=Ze[0]+2*ke,jr=Ze[1]+2*Er;it.setNode(vr.id,{width:Xe,height:jr})}vr.parentId&&(Ct[vr.parentId]||it.setNode(vr.parentId,{}),it.setParent(vr.id,vr.parentId))}),ft.filter(function(vr){return vr.layout!==!1}).forEach(function(vr){var Ze=St(vr),Er=bt(vr),ke=q(vr),Xe=Ze[0]+2*ke,jr=Ze[1]+2*Er,rn=vr.layer;(0,M.isNumber)(rn)?it.setNode(vr.id,{width:Xe,height:jr,layer:rn}):it.setNode(vr.id,{width:Xe,height:jr}),y.sortByCombo&&vr.comboId&&(Ct[vr.comboId]||(Ct[vr.comboId]={id:vr.comboId},it.setNode(vr.comboId,{})),it.setParent(vr.id,vr.comboId))}),ut.forEach(function(vr){var Ze=(0,M.getEdgeTerminal)(vr,"source"),Er=(0,M.getEdgeTerminal)(vr,"target");y.layoutNode(Ze)&&y.layoutNode(Er)&&it.setEdge(Ze,Er,{weight:vr.weight||1})}),(E=J==null?void 0:J.concat(et||[]))===null||E===void 0||E.forEach(function(vr){var Ze,Er,ke=vr.source,Xe=vr.target,jr=!((Ze=Ct[ke])===null||Ze===void 0)&&Ze.collapsed?[ke]:yt[ke]||[ke],rn=!((Er=Ct[Xe])===null||Er===void 0)&&Er.collapsed?[Xe]:yt[Xe]||[Xe];jr.forEach(function(ir){rn.forEach(function(Lr){it.setEdge(ir,Lr,{weight:vr.weight||1})})})});var nt=void 0;!((D=m.preset)===null||D===void 0)&&D.nodes&&(nt=new L.Graph({multigraph:!0,compound:!0}),m.preset.nodes.forEach(function(vr){nt==null||nt.setNode(vr.id,vr)})),w.default.layout(it,{prevGraph:nt,edgeLabelSpace:m.edgeLabelSpace,keepNodeOrder:Boolean(!!m.nodeOrder),nodeOrder:m.nodeOrder});var ht=[0,0];if(U){var At=1/0,Ot=1/0;it.nodes().forEach(function(vr){var Ze=it.node(vr);At>Ze.x&&(At=Ze.x),Ot>Ze.y&&(Ot=Ze.y)}),it.edges().forEach(function(vr){var Ze,Er=it.edge(vr);(Ze=Er.points)===null||Ze===void 0||Ze.forEach(function(ke){At>ke.x&&(At=ke.x),Ot>ke.y&&(Ot=ke.y)})}),ht[0]=U[0]-At,ht[1]=U[1]-Ot}var xt=X==="LR"||X==="RL";if(j){var Dt=this,Yt=Dt.focusNode,ie=Dt.ranksep,re=Dt.getRadialPos,Pt=(0,M.isString)(Yt)?Yt:Yt==null?void 0:Yt.id,ee=Pt?(B=it.node(Pt))===null||B===void 0?void 0:B._rank:0,ce=[],Ut=xt?"y":"x",te=xt?"height":"width",ye=1/0,ge=-1/0;it.nodes().forEach(function(vr){var Ze=it.node(vr);if(m.nodeMap[vr]){var Er=Z(m.nodeMap[vr]);if(ee===0)ce[Ze._rank]||(ce[Ze._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),ce[Ze._rank].nodes.push(vr),ce[Ze._rank].totalWidth+=Er*2+Ze[te],ce[Ze._rank].maxSize<Math.max(Ze.width,Ze.height)&&(ce[Ze._rank].maxSize=Math.max(Ze.width,Ze.height));else{var ke=Ze._rank-ee;if(ke===0)ce[ke]||(ce[ke]={nodes:[],totalWidth:0,maxSize:-1/0}),ce[ke].nodes.push(vr),ce[ke].totalWidth+=Er*2+Ze[te],ce[ke].maxSize<Math.max(Ze.width,Ze.height)&&(ce[ke].maxSize=Math.max(Ze.width,Ze.height));else{var Xe=Math.abs(ke);ce[Xe]||(ce[Xe]={left:[],right:[],totalWidth:0,maxSize:-1/0}),ce[Xe].totalWidth+=Er*2+Ze[te],ce[Xe].maxSize<Math.max(Ze.width,Ze.height)&&(ce[Xe].maxSize=Math.max(Ze.width,Ze.height)),ke<0?ce[Xe].left.push(vr):ce[Xe].right.push(vr)}}var jr=Ze[Ut]-Ze[te]/2-Er,rn=Ze[Ut]+Ze[te]/2+Er;jr<ye&&(ye=jr),rn>ge&&(ge=rn)}});var Kt=ie||50,xe={},Tt=(ge-ye)/.9,Ae=[(ye+ge-Tt)*.5,(ye+ge+Tt)*.5],br=function(vr,Ze,Er,ke){Er===void 0&&(Er=-1/0),ke===void 0&&(ke=[0,1]);var Xe=Er;return vr.forEach(function(jr){var rn=it.node(jr);xe[jr]=Ze;var ir=re(rn[Ut],Ae,Tt,Ze,ke),Lr=ir.x,dn=ir.y;if(m.nodeMap[jr]){m.nodeMap[jr].x=Lr+ht[0],m.nodeMap[jr].y=dn+ht[1],m.nodeMap[jr]._order=rn._order;var Zr=Et(m.nodeMap[jr]);Xe<Zr&&(Xe=Zr)}}),Xe},Sr=!0,Mr=0;ce.forEach(function(vr){var Ze,Er,ke,Xe,jr,rn,ir;if(!(!(!((Ze=vr==null?void 0:vr.nodes)===null||Ze===void 0)&&Ze.length)&&!(!((Er=vr==null?void 0:vr.left)===null||Er===void 0)&&Er.length)&&!(!((ke=vr==null?void 0:vr.right)===null||ke===void 0)&&ke.length))){if(Sr&&vr.nodes.length===1){var Lr=vr.nodes[0];if(!m.nodeMap[Lr])return;m.nodeMap[Lr].x=ht[0],m.nodeMap[Lr].y=ht[1],xe[vr.nodes[0]]=0,Kt=Et(m.nodeMap[Lr]),Sr=!1;return}Kt=Math.max(Kt,vr.totalWidth/(2*Math.PI));var dn=-1/0;if(ee===0||!((Xe=vr.nodes)===null||Xe===void 0)&&Xe.length)dn=br(vr.nodes,Kt,dn,[0,1]);else{var Zr=((jr=vr.left)===null||jr===void 0?void 0:jr.length)/(((rn=vr.left)===null||rn===void 0?void 0:rn.length)+((ir=vr.right)===null||ir===void 0?void 0:ir.length));dn=br(vr.left,Kt,dn,[0,Zr]),dn=br(vr.right,Kt,dn,[Zr+.05,1])}Kt+=dn,Sr=!1,Mr-vr.maxSize}}),it.edges().forEach(function(vr){var Ze,Er,ke,Xe=it.edge(vr),jr=ut.findIndex(function(bn){var Pn=(0,M.getEdgeTerminal)(bn,"source"),at=(0,M.getEdgeTerminal)(bn,"target");return Pn===vr.v&&at===vr.w});if(!(jr<=-1)&&m.edgeLabelSpace&&m.controlPoints&&ut[jr].type!=="loop"){var rn=Ut==="x"?"y":"x",ir=(Ze=Xe==null?void 0:Xe.points)===null||Ze===void 0?void 0:Ze.slice(1,Xe.points.length-1),Lr=[],dn=(Er=it.node(vr.v))===null||Er===void 0?void 0:Er[rn],Zr=dn-((ke=it.node(vr.w))===null||ke===void 0?void 0:ke[rn]),wn=xe[vr.v],ln=wn-xe[vr.w];ir==null||ir.forEach(function(bn){var Pn=(bn[rn]-dn)/Zr*ln+wn,at=re(bn[Ut],Ae,Tt,Pn);Lr.push({x:at.x+ht[0],y:at.y+ht[1]})}),ut[jr].controlPoints=Lr}})}else{var Pr=new Set,on=X==="BT"||X==="RL",Hr=on?function(vr,Ze){return Ze-vr}:function(vr,Ze){return vr-Ze};it.nodes().forEach(function(vr){var Ze=it.node(vr);if(Ze){var Er=y.nodeMap[vr];Er||(Er=z==null?void 0:z.find(function(ke){return ke.id===vr})),Er&&(Er.x=Ze.x+ht[0],Er.y=Ze.y+ht[1],Er._order=Ze._order,Pr.add(xt?Er.x:Er.y))}});var Sn=Array.from(Pr).sort(Hr),In=xt?function(vr,Ze){return vr.x!==Ze.x}:function(vr,Ze){return vr.y!==Ze.y},Nn=xt?function(vr,Ze,Er){var ke=Math.max(Ze.y,Er.y),Xe=Math.min(Ze.y,Er.y);return vr.filter(function(jr){return jr.y<=ke&&jr.y>=Xe})}:function(vr,Ze,Er){var ke=Math.max(Ze.x,Er.x),Xe=Math.min(Ze.x,Er.x);return vr.filter(function(jr){return jr.x<=ke&&jr.x>=Xe})};it.edges().forEach(function(vr){var Ze,Er=it.edge(vr),ke=ut.findIndex(function(rn){var ir=(0,M.getEdgeTerminal)(rn,"source"),Lr=(0,M.getEdgeTerminal)(rn,"target");return ir===vr.v&&Lr===vr.w});if(!(ke<=-1)&&m.edgeLabelSpace&&m.controlPoints&&ut[ke].type!=="loop"){(Ze=Er==null?void 0:Er.points)===null||Ze===void 0||Ze.forEach(function(rn){rn.x+=ht[0],rn.y+=ht[1]});var Xe=m.nodeMap[vr.v],jr=m.nodeMap[vr.w];ut[ke].controlPoints=b(Er==null?void 0:Er.points,Xe,jr,Sn,xt,In,Nn)}})}return m.onLayoutEnd&&m.onLayoutEnd(),{nodes:f,edges:ut}}},x.prototype.getRadialPos=function(y,A,E,D,B){B===void 0&&(B=[0,1]);var m=(y-A[0])/E;m=m*(B[1]-B[0])+B[0];var f=m*2*Math.PI;return{x:Math.cos(f)*D,y:Math.sin(f)*D}},x.prototype.getType=function(){return"dagre"},x}(P.Base);G.DagreLayout=p;var b=function(S,x,y,A,E,D,B){var m=(S==null?void 0:S.slice(1,S.length-1))||[];if(x&&y){var f=x.x,W=x.y,X=y.x,z=y.y;if(E&&(f=x.y,W=x.x,X=y.y,z=y.x),z!==W&&f!==X){var U=A.indexOf(W),j=A[U+1];if(j){var V=m[0],J=E?{x:(W+j)/2,y:(V==null?void 0:V.y)||X}:{x:(V==null?void 0:V.x)||X,y:(W+j)/2};(!V||D(V,J))&&m.unshift(J)}var Q=A.indexOf(z),et=Math.abs(Q-U);if(et===1)m=B(m,x,y),m.length||m.push(E?{x:(W+z)/2,y:f}:{x:f,y:(W+z)/2});else if(et>1){var ut=A[Q-1];if(ut){var it=m[m.length-1],yt=E?{x:(z+ut)/2,y:(it==null?void 0:it.y)||X}:{x:(it==null?void 0:it.x)||f,y:(z+ut)/2};(!it||D(it,yt))&&m.push(yt)}}}}return m}},627652:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var M=function(P,L){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,b){p.__proto__=b}||function(p,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(p[S]=b[S])},M(P,L)};return function(P,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");M(P,L);function p(){this.constructor=P}P.prototype=L===null?Object.create(L):(p.prototype=L.prototype,new p)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.Graph=void 0;var R=_(199905),w=function(M){g(P,M);function P(){return M!==null&&M.apply(this,arguments)||this}return P}(R.Graph);G.Graph=w},441106:function(Ne,G,_){"use strict";var g=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(G,"__esModule",{value:!0});var R=g(_(265236)),w=_(269209);G.default={layout:R.default,util:{time:w.time,notime:w.notime}}},178029:function(Ne,G,_){"use strict";var g=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(G,"__esModule",{value:!0});var R=g(_(40773)),w=function(L){var p=function(S){return function(x){var y;return((y=S.edge(x))===null||y===void 0?void 0:y.weight)||1}},b=L.graph().acyclicer==="greedy"?(0,R.default)(L,p(L)):M(L);b==null||b.forEach(function(S){var x=L.edge(S);L.removeEdgeObj(S),x.forwardName=S.name,x.reversed=!0,L.setEdge(S.w,S.v,x,"rev-".concat(Math.random()))})},M=function(L){var p=[],b={},S={},x=function(y){var A;S[y]||(S[y]=!0,b[y]=!0,(A=L.outEdges(y))===null||A===void 0||A.forEach(function(E){b[E.w]?p.push(E):x(E.w)}),delete b[y])};return L.nodes().forEach(x),p},P=function(L){L.edges().forEach(function(p){var b=L.edge(p);if(b.reversed){L.removeEdgeObj(p);var S=b.forwardName;delete b.reversed,delete b.forwardName,L.setEdge(p.w,p.v,b,S)}})};G.default={run:w,undo:P}},111500:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var g=_(269209),R=function(M){var P,L=function(p){var b=M.children(p),S=M.node(p);if(b!=null&&b.length&&b.forEach(function(A){return L(A)}),S.hasOwnProperty("minRank")){S.borderLeft=[],S.borderRight=[];for(var x=S.minRank,y=S.maxRank+1;x<y;x+=1)w(M,"borderLeft","_bl",p,S,x),w(M,"borderRight","_br",p,S,x)}};(P=M.children())===null||P===void 0||P.forEach(function(p){return L(p)})},w=function(M,P,L,p,b,S){var x={rank:S,borderType:P,width:0,height:0},y=b[P][S-1],A=(0,g.addDummyNode)(M,"border",x,L);b[P][S]=A,M.setParent(A,p),y&&M.setEdge(y,A,{weight:1})};G.default=R},335279:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(b){var S,x=(S=b.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(x==="lr"||x==="rl")&&R(b)},g=function(b){var S,x=(S=b.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(x==="bt"||x==="rl")&&M(b),(x==="lr"||x==="rl")&&(L(b),R(b))},R=function(b){b.nodes().forEach(function(S){w(b.node(S))}),b.edges().forEach(function(S){w(b.edge(S))})},w=function(b){var S=b.width;b.width=b.height,b.height=S},M=function(b){b.nodes().forEach(function(S){P(b.node(S))}),b.edges().forEach(function(S){var x,y=b.edge(S);(x=y.points)===null||x===void 0||x.forEach(function(A){return P(A)}),y.hasOwnProperty("y")&&P(y)})},P=function(b){b!=null&&b.y&&(b.y=-b.y)},L=function(b){b.nodes().forEach(function(S){p(b.node(S))}),b.edges().forEach(function(S){var x,y=b.edge(S);(x=y.points)===null||x===void 0||x.forEach(function(A){return p(A)}),y.hasOwnProperty("x")&&p(y)})},p=function(b){var S=b.x;b.x=b.y,b.y=S};G.default={adjust:_,undo:g}},455532:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(w,M){if(w!=="next"&&w!=="prev")return M},g=function(w){w.prev.next=w.next,w.next.prev=w.prev,delete w.next,delete w.prev},R=function(){function w(){var M={};M.prev=M,M.next=M.prev,this.shortcut=M}return w.prototype.dequeue=function(){var M=this.shortcut,P=M.prev;if(P&&P!==M)return g(P),P},w.prototype.enqueue=function(M){var P=this.shortcut;M.prev&&M.next&&g(M),M.next=P.next,P.next.prev=M,P.next=M,M.prev=P},w.prototype.toString=function(){for(var M=[],P=this.shortcut,L=P.prev;L!==P;)M.push(JSON.stringify(L,_)),L=L==null?void 0:L.prev;return"[".concat(M.join(", "),"]")},w}();G.default=R},40773:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var E=function(D,B){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var W in f)Object.prototype.hasOwnProperty.call(f,W)&&(m[W]=f[W])},E(D,B)};return function(D,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");E(D,B);function m(){this.constructor=D}D.prototype=B===null?Object.create(B):(m.prototype=B.prototype,new m)}}(),R=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(G,"__esModule",{value:!0});var w=R(_(455532)),M=_(199905),P=function(E){g(D,E);function D(){return E!==null&&E.apply(this,arguments)||this}return D}(w.default),L=function(E){g(D,E);function D(){return E!==null&&E.apply(this,arguments)||this}return D}(M.Graph),p=function(){return 1},b=function(E,D){var B;if(E.nodeCount()<=1)return[];var m=y(E,D||p),f=S(m.graph,m.buckets,m.zeroIdx);return(B=f.map(function(W){return E.outEdges(W.v,W.w)}))===null||B===void 0?void 0:B.flat()},S=function(E,D,B){for(var m=[],f=D[D.length-1],W=D[0],X;E.nodeCount();){for(;X=W.dequeue();)x(E,D,B,X);for(;X=f.dequeue();)x(E,D,B,X);if(E.nodeCount()){for(var z=D.length-2;z>0;--z)if(X=D[z].dequeue(),X){m=m.concat(x(E,D,B,X,!0));break}}}return m},x=function(E,D,B,m,f){var W,X,z=[];return(W=E.inEdges(m.v))===null||W===void 0||W.forEach(function(U){var j=E.edge(U),V=E.node(U.v);f&&z.push({v:U.v,w:U.w,in:0,out:0}),V.out===void 0&&(V.out=0),V.out-=j,A(D,B,V)}),(X=E.outEdges(m.v))===null||X===void 0||X.forEach(function(U){var j=E.edge(U),V=U.w,J=E.node(V);J.in===void 0&&(J.in=0),J.in-=j,A(D,B,J)}),E.removeNode(m.v),f?z:void 0},y=function(E,D){var B=new L,m=0,f=0;E.nodes().forEach(function(j){B.setNode(j,{v:j,in:0,out:0})}),E.edges().forEach(function(j){var V=B.edge(j)||0,J=(D==null?void 0:D(j))||1,Q=V+J;B.setEdge(j.v,j.w,Q),f=Math.max(f,B.node(j.v).out+=J),m=Math.max(m,B.node(j.w).in+=J)});for(var W=[],X=f+m+3,z=0;z<X;z++)W.push(new P);var U=m+1;return B.nodes().forEach(function(j){A(W,U,B.node(j))}),{buckets:W,zeroIdx:U,graph:B}},A=function(E,D,B){B.out?B.in?E[B.out-B.in+D].enqueue(B):E[E.length-1].enqueue(B):E[0].enqueue(B)};G.default=b},265236:function(Ne,G,_){"use strict";var g=this&&this.__assign||function(){return g=Object.assign||function(xt){for(var Dt,Yt=1,ie=arguments.length;Yt<ie;Yt++){Dt=arguments[Yt];for(var re in Dt)Object.prototype.hasOwnProperty.call(Dt,re)&&(xt[re]=Dt[re])}return xt},g.apply(this,arguments)},R=this&&this.__importDefault||function(xt){return xt&&xt.__esModule?xt:{default:xt}};Object.defineProperty(G,"__esModule",{value:!0});var w=R(_(178029)),M=R(_(546171)),P=R(_(576827)),L=_(269209),p=R(_(933562)),b=R(_(59596)),S=R(_(111500)),x=R(_(335279)),y=R(_(819597)),A=R(_(100095)),E=R(_(724956)),D=_(627652),B=function(xt,Dt){var Yt=Dt&&Dt.debugTiming?L.time:L.notime;Yt("layout",function(){Dt&&!Dt.keepNodeOrder&&Dt.prevGraph&&Yt("  inheritOrder",function(){f(xt,Dt.prevGraph)});var ie=Yt("  buildLayoutGraph",function(){return ut(xt)});Dt&&Dt.edgeLabelSpace===!1||Yt("  makeSpaceForEdgeLabels",function(){it(ie)});try{Yt("  runLayout",function(){m(ie,Yt,Dt)})}catch(re){if(re.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,re);return}throw re}Yt("  updateInputGraph",function(){W(xt,ie)})})},m=function(xt,Dt,Yt){Dt("    removeSelfEdges",function(){Ct(xt)}),Dt("    acyclic",function(){w.default.run(xt)}),Dt("    nestingGraph.run",function(){b.default.run(xt)}),Dt("    rank",function(){(0,P.default)((0,L.asNonCompoundGraph)(xt))}),Dt("    injectEdgeLabelProxies",function(){yt(xt)}),Dt("    removeEmptyRanks",function(){(0,L.removeEmptyRanks)(xt)}),Dt("    nestingGraph.cleanup",function(){b.default.cleanup(xt)}),Dt("    normalizeRanks",function(){(0,L.normalizeRanks)(xt)}),Dt("    assignRankMinMax",function(){ft(xt)}),Dt("    removeEdgeLabelProxies",function(){Bt(xt)}),Dt("    normalize.run",function(){M.default.run(xt)}),Dt("    parentDummyChains",function(){(0,p.default)(xt)}),Dt("    addBorderSegments",function(){(0,S.default)(xt)}),Yt&&Yt.keepNodeOrder&&Dt("    initDataOrder",function(){(0,E.default)(xt,Yt.nodeOrder)}),Dt("    order",function(){(0,y.default)(xt,Yt==null?void 0:Yt.keepNodeOrder)}),Dt("    insertSelfEdges",function(){nt(xt)}),Dt("    adjustCoordinateSystem",function(){x.default.adjust(xt)}),Dt("    position",function(){(0,A.default)(xt)}),Dt("    positionSelfEdges",function(){ht(xt)}),Dt("    removeBorderNodes",function(){bt(xt)}),Dt("    normalize.undo",function(){M.default.undo(xt)}),Dt("    fixupEdgeLabelCoords",function(){Z(xt)}),Dt("    undoCoordinateSystem",function(){x.default.undo(xt)}),Dt("    translateGraph",function(){St(xt)}),Dt("    assignNodeIntersects",function(){Et(xt)}),Dt("    reversePoints",function(){q(xt)}),Dt("    acyclic.undo",function(){w.default.undo(xt)})},f=function(xt,Dt){xt.nodes().forEach(function(Yt){var ie=xt.node(Yt),re=Dt.node(Yt);re!==void 0?(ie.fixorder=re._order,delete re._order):delete ie.fixorder})},W=function(xt,Dt){xt.nodes().forEach(function(Yt){var ie,re=xt.node(Yt);if(re){var Pt=Dt.node(Yt);re.x=Pt.x,re.y=Pt.y,re._order=Pt.order,re._rank=Pt.rank,!((ie=Dt.children(Yt))===null||ie===void 0)&&ie.length&&(re.width=Pt.width,re.height=Pt.height)}}),xt.edges().forEach(function(Yt){var ie=xt.edge(Yt),re=Dt.edge(Yt);ie.points=re?re.points:[],re&&re.hasOwnProperty("x")&&(ie.x=re.x,ie.y=re.y)}),xt.graph().width=Dt.graph().width,xt.graph().height=Dt.graph().height},X=["nodesep","edgesep","ranksep","marginx","marginy"],z={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},U=["acyclicer","ranker","rankdir","align"],j=["width","height","layer","fixorder"],V={width:0,height:0},J=["minlen","weight","width","height","labeloffset"],Q={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},et=["labelpos"],ut=function(xt){var Dt=new D.Graph({multigraph:!0,compound:!0}),Yt=Ot(xt.graph()),ie={};return U==null||U.forEach(function(re){Yt[re]!==void 0&&(ie[re]=Yt[re])}),Dt.setGraph(Object.assign({},z,At(Yt,X),ie)),xt.nodes().forEach(function(re){var Pt=Ot(xt.node(re)),ee=g(g({},V),Pt),ce=At(ee,j);Dt.setNode(re,ce),Dt.setParent(re,xt.parent(re))}),xt.edges().forEach(function(re){var Pt=Ot(xt.edge(re)),ee={};et==null||et.forEach(function(ce){Pt[ce]!==void 0&&(ee[ce]=Pt[ce])}),Dt.setEdgeObj(re,Object.assign({},Q,At(Pt,J),ee))}),Dt},it=function(xt){var Dt=xt.graph();Dt.ranksep||(Dt.ranksep=0),Dt.ranksep/=2,xt.nodes().forEach(function(Yt){var ie=xt.node(Yt);isNaN(ie.layer)||ie.layer||(ie.layer=0)}),xt.edges().forEach(function(Yt){var ie,re=xt.edge(Yt);re.minlen*=2,((ie=re.labelpos)===null||ie===void 0?void 0:ie.toLowerCase())!=="c"&&(Dt.rankdir==="TB"||Dt.rankdir==="BT"?re.width+=re.labeloffset:re.height+=re.labeloffset)})},yt=function(xt){xt.edges().forEach(function(Dt){var Yt=xt.edge(Dt);if(Yt.width&&Yt.height){var ie=xt.node(Dt.v),re=xt.node(Dt.w),Pt={e:Dt,rank:(re.rank-ie.rank)/2+ie.rank};(0,L.addDummyNode)(xt,"edge-proxy",Pt,"_ep")}})},ft=function(xt){var Dt=0;xt.nodes().forEach(function(Yt){var ie,re,Pt=xt.node(Yt);Pt.borderTop&&(Pt.minRank=(ie=xt.node(Pt.borderTop))===null||ie===void 0?void 0:ie.rank,Pt.maxRank=(re=xt.node(Pt.borderBottom))===null||re===void 0?void 0:re.rank,Dt=Math.max(Dt,Pt.maxRank||-1/0))}),xt.graph().maxRank=Dt},Bt=function(xt){xt.nodes().forEach(function(Dt){var Yt=xt.node(Dt);Yt.dummy==="edge-proxy"&&(xt.edge(Yt.e).labelRank=Yt.rank,xt.removeNode(Dt))})},St=function(xt){var Dt,Yt=0,ie,re=0,Pt=xt.graph(),ee=Pt.marginx||0,ce=Pt.marginy||0,Ut=function(te){if(te){var ye=te.x,ge=te.y,Kt=te.width,xe=te.height;!isNaN(ye)&&!isNaN(Kt)&&(Dt===void 0&&(Dt=ye-Kt/2),Dt=Math.min(Dt,ye-Kt/2),Yt=Math.max(Yt,ye+Kt/2)),!isNaN(ge)&&!isNaN(xe)&&(ie===void 0&&(ie=ge-xe/2),ie=Math.min(ie,ge-xe/2),re=Math.max(re,ge+xe/2))}};xt.nodes().forEach(function(te){Ut(xt.node(te))}),xt.edges().forEach(function(te){var ye=xt.edge(te);ye!=null&&ye.hasOwnProperty("x")&&Ut(ye)}),Dt-=ee,ie-=ce,xt.nodes().forEach(function(te){var ye=xt.node(te);ye&&(ye.x-=Dt,ye.y-=ie)}),xt.edges().forEach(function(te){var ye,ge=xt.edge(te);(ye=ge.points)===null||ye===void 0||ye.forEach(function(Kt){Kt.x-=Dt,Kt.y-=ie}),ge.hasOwnProperty("x")&&(ge.x-=Dt),ge.hasOwnProperty("y")&&(ge.y-=ie)}),Pt.width=Yt-Dt+ee,Pt.height=re-ie+ce},Et=function(xt){xt.edges().forEach(function(Dt){var Yt=xt.edge(Dt),ie=xt.node(Dt.v),re=xt.node(Dt.w),Pt,ee;Yt.points?(Pt=Yt.points[0],ee=Yt.points[Yt.points.length-1]):(Yt.points=[],Pt=re,ee=ie),Yt.points.unshift((0,L.intersectRect)(ie,Pt)),Yt.points.push((0,L.intersectRect)(re,ee))})},Z=function(xt){xt.edges().forEach(function(Dt){var Yt=xt.edge(Dt);if(Yt!=null&&Yt.hasOwnProperty("x"))switch((Yt.labelpos==="l"||Yt.labelpos==="r")&&(Yt.width-=Yt.labeloffset),Yt.labelpos){case"l":Yt.x-=Yt.width/2+Yt.labeloffset;break;case"r":Yt.x+=Yt.width/2+Yt.labeloffset;break}})},q=function(xt){xt.edges().forEach(function(Dt){var Yt,ie=xt.edge(Dt);ie.reversed&&((Yt=ie.points)===null||Yt===void 0||Yt.reverse())})},bt=function(xt){xt.nodes().forEach(function(Dt){var Yt,ie,re;if(!((Yt=xt.children(Dt))===null||Yt===void 0)&&Yt.length){var Pt=xt.node(Dt),ee=xt.node(Pt.borderTop),ce=xt.node(Pt.borderBottom),Ut=xt.node(Pt.borderLeft[((ie=Pt.borderLeft)===null||ie===void 0?void 0:ie.length)-1]),te=xt.node(Pt.borderRight[((re=Pt.borderRight)===null||re===void 0?void 0:re.length)-1]);Pt.width=Math.abs((te==null?void 0:te.x)-(Ut==null?void 0:Ut.x))||10,Pt.height=Math.abs((ce==null?void 0:ce.y)-(ee==null?void 0:ee.y))||10,Pt.x=((Ut==null?void 0:Ut.x)||0)+Pt.width/2,Pt.y=((ee==null?void 0:ee.y)||0)+Pt.height/2}}),xt.nodes().forEach(function(Dt){var Yt;((Yt=xt.node(Dt))===null||Yt===void 0?void 0:Yt.dummy)==="border"&&xt.removeNode(Dt)})},Ct=function(xt){xt.edges().forEach(function(Dt){if(Dt.v===Dt.w){var Yt=xt.node(Dt.v);Yt.selfEdges||(Yt.selfEdges=[]),Yt.selfEdges.push({e:Dt,label:xt.edge(Dt)}),xt.removeEdgeObj(Dt)}})},nt=function(xt){var Dt=(0,L.buildLayerMatrix)(xt);Dt==null||Dt.forEach(function(Yt){var ie=0;Yt==null||Yt.forEach(function(re,Pt){var ee,ce=xt.node(re);ce.order=Pt+ie,(ee=ce.selfEdges)===null||ee===void 0||ee.forEach(function(Ut){(0,L.addDummyNode)(xt,"selfedge",{width:Ut.label.width,height:Ut.label.height,rank:ce.rank,order:Pt+ ++ie,e:Ut.e,label:Ut.label},"_se")}),delete ce.selfEdges})})},ht=function(xt){xt.nodes().forEach(function(Dt){var Yt=xt.node(Dt);if(Yt.dummy==="selfedge"){var ie=xt.node(Yt.e.v),re=ie.x+ie.width/2,Pt=ie.y,ee=Yt.x-re,ce=ie.height/2;xt.setEdgeObj(Yt.e,Yt.label),xt.removeNode(Dt),Yt.label.points=[{x:re+2*ee/3,y:Pt-ce},{x:re+5*ee/6,y:Pt-ce},{y:Pt,x:re+ee},{x:re+5*ee/6,y:Pt+ce},{x:re+2*ee/3,y:Pt+ce}],Yt.label.x=Yt.x,Yt.label.y=Yt.y}})},At=function(xt,Dt){var Yt={};return Dt==null||Dt.forEach(function(ie){xt[ie]!==void 0&&(Yt[ie]=+xt[ie])}),Yt},Ot=function(xt){xt===void 0&&(xt={});var Dt={};return Object.keys(xt).forEach(function(Yt){Dt[Yt.toLowerCase()]=xt[Yt]}),Dt};G.default=B},59596:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var g=_(269209),R=function(p){var b,S=(0,g.addDummyNode)(p,"root",{},"_root"),x=M(p),y=Math.max.apply(Math,Object.values(x));Math.abs(y)===1/0&&(y=1);var A=y-1,E=2*A+1;p.graph().nestingRoot=S,p.edges().forEach(function(B){p.edge(B).minlen*=E});var D=P(p)+1;(b=p.children())===null||b===void 0||b.forEach(function(B){w(p,S,E,D,A,x,B)}),p.graph().nodeRankFactor=E},w=function(p,b,S,x,y,A,E){var D=p.children(E);if(!(D!=null&&D.length)){E!==b&&p.setEdge(b,E,{weight:0,minlen:S});return}var B=(0,g.addBorderNode)(p,"_bt"),m=(0,g.addBorderNode)(p,"_bb"),f=p.node(E);p.setParent(B,E),f.borderTop=B,p.setParent(m,E),f.borderBottom=m,D==null||D.forEach(function(W){w(p,b,S,x,y,A,W);var X=p.node(W),z=X.borderTop?X.borderTop:W,U=X.borderBottom?X.borderBottom:W,j=X.borderTop?x:2*x,V=z!==U?1:y-A[E]+1;p.setEdge(B,z,{minlen:V,weight:j,nestingEdge:!0}),p.setEdge(U,m,{minlen:V,weight:j,nestingEdge:!0})}),p.parent(E)||p.setEdge(b,B,{weight:0,minlen:y+A[E]})},M=function(p){var b,S={},x=function(y,A){var E=p.children(y);E==null||E.forEach(function(D){return x(D,A+1)}),S[y]=A};return(b=p.children())===null||b===void 0||b.forEach(function(y){return x(y,1)}),S},P=function(p){var b=0;return p.edges().forEach(function(S){b+=p.edge(S).weight}),b},L=function(p){var b=p.graph();b.nestingRoot&&p.removeNode(b.nestingRoot),delete b.nestingRoot,p.edges().forEach(function(S){var x=p.edge(S);x.nestingEdge&&p.removeEdgeObj(S)})};G.default={run:R,cleanup:L}},546171:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var g=_(269209),R=function(P){P.graph().dummyChains=[],P.edges().forEach(function(L){return w(P,L)})},w=function(P,L){var p=L.v,b=P.node(p).rank,S=L.w,x=P.node(S).rank,y=L.name,A=P.edge(L),E=A.labelRank;if(x!==b+1){P.removeEdgeObj(L);var D=P.graph(),B,m,f;for(f=0,++b;b<x;++f,++b)A.points=[],m={edgeLabel:A,width:0,height:0,edgeObj:L,rank:b},B=(0,g.addDummyNode)(P,"edge",m,"_d"),b===E&&(m.width=A.width,m.height=A.height,m.dummy="edge-label",m.labelpos=A.labelpos),P.setEdge(p,B,{weight:A.weight},y),f===0&&(D.dummyChains||(D.dummyChains=[]),D.dummyChains.push(B)),p=B;P.setEdge(p,S,{weight:A.weight},y)}},M=function(P){var L;(L=P.graph().dummyChains)===null||L===void 0||L.forEach(function(p){var b=P.node(p),S=b.edgeLabel,x;b.edgeObj&&P.setEdgeObj(b.edgeObj,S);for(var y=p;b.dummy;)x=P.successors(y)[0],P.removeNode(y),S.points.push({x:b.x,y:b.y}),b.dummy==="edge-label"&&(S.x=b.x,S.y=b.y,S.width=b.width,S.height=b.height),y=x,b=P.node(y)})};G.default={run:R,undo:M}},680314:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(g,R,w){var M={},P;w==null||w.forEach(function(L){for(var p=g.parent(L),b,S;p;){if(b=g.parent(p),b?(S=M[b],M[b]=p):(S=P,P=p),S&&S!==p){R.setEdge(S,p);return}p=b}})};G.default=_},989921:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(g,R){return R.map(function(w){var M=g.inEdges(w);if(!(M!=null&&M.length))return{v:w};{var P={sum:0,weight:0};return M==null||M.forEach(function(L){var p=g.edge(L),b=g.node(L.v);P.sum+=p.weight*b.order,P.weight+=p.weight}),{v:w,barycenter:P.sum/P.weight,weight:P.weight}}})};G.default=_},277006:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var g=_(627652),R=function(M,P,L){var p=w(M),b=new g.Graph({compound:!0}).setGraph({root:p}).setDefaultNodeLabel(function(S){return M.node(S)});return M.nodes().forEach(function(S){var x,y=M.node(S),A=M.parent(S);(y.rank===P||y.minRank<=P&&P<=y.maxRank)&&(b.setNode(S),b.setParent(S,A||p),(x=M[L](S))===null||x===void 0||x.forEach(function(E){var D=E.v===S?E.w:E.v,B=b.edgeFromArgs(D,S),m=B!==void 0?B.weight:0;b.setEdge(D,S,{weight:M.edge(E).weight+m})}),y.hasOwnProperty("minRank")&&b.setNode(S,{borderLeft:y.borderLeft[P],borderRight:y.borderRight[P]}))}),b},w=function(M){for(var P;M.hasNode(P="_root".concat(Math.random())););return P};G.default=R},632957:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var g=_(269209),R=function(M,P,L){for(var p=(0,g.zipObject)(L,L.map(function(D,B){return B})),b=P.map(function(D){var B,m=(B=M.outEdges(D))===null||B===void 0?void 0:B.map(function(f){return{pos:p[f.w]||0,weight:M.edge(f).weight}});return m==null?void 0:m.sort(function(f,W){return f.pos-W.pos})}),S=b.flat().filter(function(D){return D!==void 0}),x=1;x<L.length;)x<<=1;var y=2*x-1;x-=1;var A=Array(y).fill(0,0,y),E=0;return S==null||S.forEach(function(D){if(D){var B=D.pos+x;A[B]+=D.weight;for(var m=0;B>0;)B%2&&(m+=A[B+1]),B=B-1>>1,A[B]+=D.weight;E+=D.weight*m}}),E},w=function(M,P){for(var L=0,p=1;p<(P==null?void 0:P.length);p+=1)L+=R(M,P[p-1],P[p]);return L};G.default=w},819597:function(Ne,G,_){"use strict";var g=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(G,"__esModule",{value:!0});var R=g(_(115697)),w=g(_(632957)),M=g(_(277006)),P=g(_(680314)),L=g(_(99455)),p=_(449784),b=_(627652),S=_(269209),x=function(D,B){for(var m=(0,S.maxRank)(D),f=[],W=[],X=1;X<m+1;X++)f.push(X);for(var X=m-1;X>-1;X--)W.push(X);var z=y(D,f,"inEdges"),U=y(D,W,"outEdges"),j=(0,R.default)(D);E(D,j);for(var V=Number.POSITIVE_INFINITY,J,X=0,Q=0;Q<4;++X,++Q){A(X%2?z:U,X%4>=2,!1,B),j=(0,S.buildLayerMatrix)(D);var et=(0,w.default)(D,j);et<V&&(Q=0,J=(0,p.clone)(j),V=et)}j=(0,R.default)(D),E(D,j);for(var X=0,Q=0;Q<4;++X,++Q){A(X%2?z:U,X%4>=2,!0,B),j=(0,S.buildLayerMatrix)(D);var et=(0,w.default)(D,j);et<V&&(Q=0,J=(0,p.clone)(j),V=et)}E(D,J)},y=function(D,B,m){return B.map(function(f){return(0,M.default)(D,f,m)})},A=function(D,B,m,f){var W=new b.Graph;D==null||D.forEach(function(X){for(var z,U=X.graph().root,j=(0,L.default)(X,U,W,B,m,f),V=0;V<((z=j.vs)===null||z===void 0?void 0:z.length);V++){var J=X.node(j.vs[V]);J&&(J.order=V)}(0,P.default)(X,W,j.vs)})},E=function(D,B){B==null||B.forEach(function(m){m==null||m.forEach(function(f,W){D.node(f).order=W})})};G.default=x},724956:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(g,R){for(var w=g.nodes().filter(function(b){var S;return!(!((S=g.children(b))===null||S===void 0)&&S.length)}),M=w.map(function(b){return g.node(b).rank}),P=Math.max.apply(Math,M),L=[],p=0;p<P+1;p++)L[p]=[];R==null||R.forEach(function(b){var S=g.node(b);!S||S!=null&&S.dummy||isNaN(S.rank)||(S.fixorder=L[S.rank].length,L[S.rank].push(b))})};G.default=_},115697:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(g){for(var R={},w=g.nodes().filter(function(A){var E;return!(!((E=g.children(A))===null||E===void 0)&&E.length)}),M=w.map(function(A){return g.node(A).rank}),P=Math.max.apply(Math,M),L=[],p=0;p<P+1;p++)L.push([]);var b=function(A){var E;if(!R.hasOwnProperty(A)){R[A]=!0;var D=g.node(A);isNaN(D.rank)||L[D.rank].push(A),(E=g.successors(A))===null||E===void 0||E.forEach(function(B){return b(B)})}},S=w.sort(function(A,E){return g.node(A).rank-g.node(E).rank}),x=S.filter(function(A){return g.node(A).fixorder!==void 0}),y=x.sort(function(A,E){return g.node(A).fixorder-g.node(E).fixorder});return y==null||y.forEach(function(A){isNaN(g.node(A).rank)||L[g.node(A).rank].push(A),R[A]=!0}),S==null||S.forEach(b),L};G.default=_},707043:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(w,M){var P,L,p,b={};w==null||w.forEach(function(x,y){b[x.v]={i:y,indegree:0,in:[],out:[],vs:[x.v]};var A=b[x.v];x.barycenter!==void 0&&(A.barycenter=x.barycenter,A.weight=x.weight)}),(P=M.edges())===null||P===void 0||P.forEach(function(x){var y=b[x.v],A=b[x.w];y!==void 0&&A!==void 0&&(A.indegree++,y.out.push(b[x.w]))});var S=(p=(L=Object.values(b)).filter)===null||p===void 0?void 0:p.call(L,function(x){return!x.indegree});return g(S)},g=function(w){for(var M,P,L=[],p=function(A){return function(E){E.merged||(E.barycenter===void 0||A.barycenter===void 0||E.barycenter>=A.barycenter)&&R(A,E)}},b=function(A){return function(E){E.in.push(A),--E.indegree===0&&w.push(E)}},S=function(){var A=w.pop();L.push(A),(M=A.in.reverse())===null||M===void 0||M.forEach(function(E){return p(A)(E)}),(P=A.out)===null||P===void 0||P.forEach(function(E){return b(A)(E)})};w!=null&&w.length;)S();var x=L.filter(function(A){return!A.merged}),y=["vs","i","barycenter","weight"];return x.map(function(A){var E={};return y==null||y.forEach(function(D){A[D]!==void 0&&(E[D]=A[D])}),E})},R=function(w,M){var P,L=0,p=0;w.weight&&(L+=w.barycenter*w.weight,p+=w.weight),M.weight&&(L+=M.barycenter*M.weight,p+=M.weight),w.vs=(P=M.vs)===null||P===void 0?void 0:P.concat(w.vs),w.barycenter=L/p,w.weight=p,w.i=Math.min(M.i,w.i),M.merged=!0};G.default=_},99455:function(Ne,G,_){"use strict";var g=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(G,"__esModule",{value:!0});var R=g(_(989921)),w=g(_(707043)),M=g(_(421498)),P=function(b,S,x,y,A,E){var D,B,m,f,W=b.children(S),X=b.node(S),z=X?X.borderLeft:void 0,U=X?X.borderRight:void 0,j={};z&&(W=W==null?void 0:W.filter(function(it){return it!==z&&it!==U}));var V=(0,R.default)(b,W||[]);V==null||V.forEach(function(it){var yt;if(!((yt=b.children(it.v))===null||yt===void 0)&&yt.length){var ft=P(b,it.v,x,y,E);j[it.v]=ft,ft.hasOwnProperty("barycenter")&&p(it,ft)}});var J=(0,w.default)(V,x);L(J,j),(D=J.filter(function(it){return it.vs.length>0}))===null||D===void 0||D.forEach(function(it){var yt=b.node(it.vs[0]);yt&&(it.fixorder=yt.fixorder,it.order=yt.order)});var Q=(0,M.default)(J,y,A,E);if(z&&(Q.vs=[z,Q.vs,U].flat(),!((B=b.predecessors(z))===null||B===void 0)&&B.length)){var et=b.node(((m=b.predecessors(z))===null||m===void 0?void 0:m[0])||""),ut=b.node(((f=b.predecessors(U))===null||f===void 0?void 0:f[0])||"");Q.hasOwnProperty("barycenter")||(Q.barycenter=0,Q.weight=0),Q.barycenter=(Q.barycenter*Q.weight+et.order+ut.order)/(Q.weight+2),Q.weight+=2}return Q},L=function(b,S){b==null||b.forEach(function(x){var y,A=(y=x.vs)===null||y===void 0?void 0:y.map(function(E){return S[E]?S[E].vs:E});x.vs=A.flat()})},p=function(b,S){b.barycenter!==void 0?(b.barycenter=(b.barycenter*b.weight+S.barycenter*S.weight)/(b.weight+S.weight),b.weight+=S.weight):(b.barycenter=S.barycenter,b.weight=S.weight)};G.default=P},421498:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var g=_(269209),R=function(P,L,p,b){var S=(0,g.partition)(P,function(f){var W=f.hasOwnProperty("fixorder")&&!isNaN(f.fixorder);return b?!W&&f.hasOwnProperty("barycenter"):W||f.hasOwnProperty("barycenter")}),x=S.lhs,y=S.rhs.sort(function(f,W){return-f.i- -W.i}),A=[],E=0,D=0,B=0;x==null||x.sort(M(!!L,!!p)),B=w(A,y,B),x==null||x.forEach(function(f){var W;B+=(W=f.vs)===null||W===void 0?void 0:W.length,A.push(f.vs),E+=f.barycenter*f.weight,D+=f.weight,B=w(A,y,B)});var m={vs:A.flat()};return D&&(m.barycenter=E/D,m.weight=D),m},w=function(P,L,p){for(var b=p,S;L.length&&(S=L[L.length-1]).i<=b;)L.pop(),P==null||P.push(S.vs),b++;return b},M=function(P,L){return function(p,b){if(p.fixorder!==void 0&&b.fixorder!==void 0)return p.fixorder-b.fixorder;if(p.barycenter<b.barycenter)return-1;if(p.barycenter>b.barycenter)return 1;if(L&&p.order!==void 0&&b.order!==void 0){if(p.order<b.order)return-1;if(p.order>b.order)return 1}return P?b.i-p.i:p.i-b.i}};G.default=R},933562:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(w){var M,P={},L=0,p=function(b){var S,x=L;(S=w.children(b))===null||S===void 0||S.forEach(p),P[b]={low:x,lim:L++}};return(M=w.children())===null||M===void 0||M.forEach(p),P},g=function(w,M,P,L){var p=[],b=[],S=Math.min(M[P].low,M[L].low),x=Math.max(M[P].lim,M[L].lim),y,A;y=P;do y=w.parent(y),p.push(y);while(y&&(M[y].low>S||x>M[y].lim));for(A=y,y=L;y&&y!==A;)b.push(y),y=w.parent(y);return{lca:A,path:p.concat(b.reverse())}},R=function(w){var M,P=_(w);(M=w.graph().dummyChains)===null||M===void 0||M.forEach(function(L){var p,b,S=L,x=w.node(S),y=x.edgeObj;if(y)for(var A=g(w,P,y.v,y.w),E=A.path,D=A.lca,B=0,m=E[B],f=!0;S!==y.w;){if(x=w.node(S),f){for(;m!==D&&((p=w.node(m))===null||p===void 0?void 0:p.maxRank)<x.rank;)B++,m=E[B];m===D&&(f=!1)}if(!f){for(;B<E.length-1&&((b=w.node(E[B+1]))===null||b===void 0?void 0:b.minRank)<=x.rank;)B++;m=E[B]}w.setParent(S,m),S=w.successors(S)[0]}})};G.default=R},371963:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var X=function(z,U){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,V){j.__proto__=V}||function(j,V){for(var J in V)Object.prototype.hasOwnProperty.call(V,J)&&(j[J]=V[J])},X(z,U)};return function(z,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");X(z,U);function j(){this.constructor=z}z.prototype=U===null?Object.create(U):(j.prototype=U.prototype,new j)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.width=G.sep=G.positionX=G.balance=G.alignCoordinates=G.findSmallestWidthAlignment=G.buildBlockGraph=G.horizontalCompaction=G.verticalAlignment=G.hasConflict=G.addConflict=G.findOtherInnerSegmentNode=G.findType2Conflicts=G.findType1Conflicts=void 0;var R=_(199905),w=_(269209),M=function(X){g(z,X);function z(){return X!==null&&X.apply(this,arguments)||this}return z}(R.Graph),P=function(X,z){var U={},j=function(V,J){var Q=0,et=0,ut=V.length,it=J==null?void 0:J[(J==null?void 0:J.length)-1];return J==null||J.forEach(function(yt,ft){var Bt,St=(0,G.findOtherInnerSegmentNode)(X,yt),Et=St?X.node(St).order:ut;(St||yt===it)&&((Bt=J.slice(et,ft+1))===null||Bt===void 0||Bt.forEach(function(Z){var q;(q=X.predecessors(Z))===null||q===void 0||q.forEach(function(bt){var Ct,nt=X.node(bt),ht=nt.order;(ht<Q||Et<ht)&&!(nt.dummy&&(!((Ct=X.node(Z))===null||Ct===void 0)&&Ct.dummy))&&(0,G.addConflict)(U,bt,Z)})}),et=ft+1,Q=Et)}),J};return z!=null&&z.length&&z.reduce(j),U};G.findType1Conflicts=P;var L=function(X,z){var U={};function j(et,ut,it,yt,ft){for(var Bt,St,Et,Z=ut;Z<it;Z++)Et=et[Z],!((Bt=X.node(Et))===null||Bt===void 0)&&Bt.dummy&&((St=X.predecessors(Et))===null||St===void 0||St.forEach(function(q){var bt=X.node(q);bt.dummy&&(bt.order<yt||bt.order>ft)&&(0,G.addConflict)(U,q,Et)}))}function V(et){return JSON.stringify(et.slice(1))}function J(et,ut){var it=V(et);ut.get(it)||(j.apply(void 0,et),ut.set(it,!0))}var Q=function(et,ut){var it=-1,yt,ft=0,Bt=new Map;return ut==null||ut.forEach(function(St,Et){var Z;if(((Z=X.node(St))===null||Z===void 0?void 0:Z.dummy)==="border"){var q=X.predecessors(St)||[];q.length&&(yt=X.node(q[0]).order,J([ut,ft,Et,it,yt],Bt),ft=Et,it=yt)}J([ut,ft,ut.length,yt,et.length],Bt)}),ut};return z!=null&&z.length&&z.reduce(Q),U};G.findType2Conflicts=L;var p=function(X,z){var U,j;if(!((U=X.node(z))===null||U===void 0)&&U.dummy)return(j=X.predecessors(z))===null||j===void 0?void 0:j.find(function(V){return X.node(V).dummy})};G.findOtherInnerSegmentNode=p;var b=function(X,z,U){var j=z,V=U;if(j>V){var J=j;j=V,V=J}var Q=X[j];Q||(X[j]=Q={}),Q[V]=!0};G.addConflict=b;var S=function(X,z,U){var j=z,V=U;if(j>V){var J=z;j=V,V=J}return!!X[j]};G.hasConflict=S;var x=function(X,z,U,j){var V={},J={},Q={};return z==null||z.forEach(function(et){et==null||et.forEach(function(ut,it){V[ut]=ut,J[ut]=ut,Q[ut]=it})}),z==null||z.forEach(function(et){var ut=-1;et==null||et.forEach(function(it){var yt=j(it);if(yt.length){yt=yt.sort(function(Z,q){return Q[Z]-Q[q]});for(var ft=(yt.length-1)/2,Bt=Math.floor(ft),St=Math.ceil(ft);Bt<=St;++Bt){var Et=yt[Bt];J[it]===it&&ut<Q[Et]&&!(0,G.hasConflict)(U,it,Et)&&(J[Et]=it,J[it]=V[it]=V[Et],ut=Q[Et])}}})}),{root:V,align:J}};G.verticalAlignment=x;var y=function(X,z,U,j,V){var J,Q={},et=(0,G.buildBlockGraph)(X,z,U,V),ut=V?"borderLeft":"borderRight",it=function(Bt,St){for(var Et=et.nodes(),Z=Et.pop(),q={};Z;)q[Z]?Bt(Z):(q[Z]=!0,Et.push(Z),Et=Et.concat(St(Z))),Z=Et.pop()},yt=function(Bt){Q[Bt]=(et.inEdges(Bt)||[]).reduce(function(St,Et){return Math.max(St,(Q[Et.v]||0)+et.edge(Et))},0)},ft=function(Bt){var St=(et.outEdges(Bt)||[]).reduce(function(Z,q){return Math.min(Z,(Q[q.w]||0)-et.edge(q))},Number.POSITIVE_INFINITY),Et=X.node(Bt);St!==Number.POSITIVE_INFINITY&&Et.borderType!==ut&&(Q[Bt]=Math.max(Q[Bt],St))};return it(yt,et.predecessors.bind(et)),it(ft,et.successors.bind(et)),(J=Object.values(j))===null||J===void 0||J.forEach(function(Bt){Q[Bt]=Q[U[Bt]]}),Q};G.horizontalCompaction=y;var A=function(X,z,U,j){var V=new M,J=X.graph(),Q=(0,G.sep)(J.nodesep,J.edgesep,j);return z==null||z.forEach(function(et){var ut;et==null||et.forEach(function(it){var yt=U[it];if(V.setNode(yt),ut){var ft=U[ut],Bt=V.edgeFromArgs(ft,yt);V.setEdge(ft,yt,Math.max(Q(X,it,ut),Bt||0))}ut=it})}),V};G.buildBlockGraph=A;var E=function(X,z){return(0,w.minBy)(Object.values(z),function(U){var j,V=Number.NEGATIVE_INFINITY,J=Number.POSITIVE_INFINITY;return(j=Object.keys(U))===null||j===void 0||j.forEach(function(Q){var et=U[Q],ut=(0,G.width)(X,Q)/2;V=Math.max(et+ut,V),J=Math.min(et-ut,J)}),V-J})};G.findSmallestWidthAlignment=E;function D(X,z){var U=Object.values(z),j=Math.min.apply(Math,U),V=Math.max.apply(Math,U);["u","d"].forEach(function(J){["l","r"].forEach(function(Q){var et=J+Q,ut=X[et],it;if(ut!==z){var yt=Object.values(ut);it=Q==="l"?j-Math.min.apply(Math,yt):V-Math.max.apply(Math,yt),it&&(X[et]={},Object.keys(ut).forEach(function(ft){X[et][ft]=ut[ft]+it}))}})})}G.alignCoordinates=D;var B=function(X,z){var U={};return Object.keys(X.ul).forEach(function(j){if(z)U[j]=X[z.toLowerCase()][j];else{var V=Object.values(X).map(function(J){return J[j]});U[j]=(V[0]+V[1])/2}}),U};G.balance=B;var m=function(X){var z=(0,w.buildLayerMatrix)(X),U=Object.assign((0,G.findType1Conflicts)(X,z),(0,G.findType2Conflicts)(X,z)),j={},V;["u","d"].forEach(function(Q){V=Q==="u"?z:Object.values(z).reverse(),["l","r"].forEach(function(et){et==="r"&&(V=V.map(function(ft){return Object.values(ft).reverse()}));var ut=(Q==="u"?X.predecessors:X.successors).bind(X),it=(0,G.verticalAlignment)(X,V,U,ut),yt=(0,G.horizontalCompaction)(X,V,it.root,it.align,et==="r");et==="r"&&Object.keys(yt).forEach(function(ft){yt[ft]=-yt[ft]}),j[Q+et]=yt})});var J=(0,G.findSmallestWidthAlignment)(X,j);return D(j,J),(0,G.balance)(j,X.graph().align)};G.positionX=m;var f=function(X,z,U){return function(j,V,J){var Q=j.node(V),et=j.node(J),ut=0,it;if(ut+=Q.width/2,Q.hasOwnProperty("labelpos"))switch((Q.labelpos||"").toLowerCase()){case"l":it=-Q.width/2;break;case"r":it=Q.width/2;break}if(it&&(ut+=U?it:-it),it=0,ut+=(Q.dummy?z:X)/2,ut+=(et.dummy?z:X)/2,ut+=et.width/2,et.labelpos)switch((et.labelpos||"").toLowerCase()){case"l":it=et.width/2;break;case"r":it=-et.width/2;break}return it&&(ut+=U?it:-it),it=0,ut}};G.sep=f;var W=function(X,z){return X.node(z).width||0};G.width=W},100095:function(Ne,G,_){"use strict";var g=this&&this.__spreadArray||function(p,b,S){if(S||arguments.length===2)for(var x=0,y=b.length,A;x<y;x++)(A||!(x in b))&&(A||(A=Array.prototype.slice.call(b,0,x)),A[x]=b[x]);return p.concat(A||Array.prototype.slice.call(b))};Object.defineProperty(G,"__esModule",{value:!0});var R=_(269209),w=_(371963),M=function(p){var b=(0,R.buildLayerMatrix)(p),S=p.graph().ranksep,x=0;b==null||b.forEach(function(y){var A=y.map(function(D){return p.node(D).height}),E=Math.max.apply(Math,g(g([],A,!1),[0],!1));y==null||y.forEach(function(D){p.node(D).y=x+E/2}),x+=E+S})},P=function(p){var b=(0,R.buildLayerMatrix)(p),S=Object.assign((0,w.findType1Conflicts)(p,b),(0,w.findType2Conflicts)(p,b)),x={},y=[];["u","d"].forEach(function(E){y=E==="u"?b:Object.values(b).reverse(),["l","r"].forEach(function(D){D==="r"&&(y=y.map(function(W){return Object.values(W).reverse()}));var B=(E==="u"?p.predecessors:p.successors).bind(p),m=(0,w.verticalAlignment)(p,y,S,B),f=(0,w.horizontalCompaction)(p,y,m.root,m.align,D==="r");D==="r"&&Object.keys(f).forEach(function(W){return f[W]=-f[W]}),x[E+D]=f})});var A=(0,w.findSmallestWidthAlignment)(p,x);return A&&(0,w.alignCoordinates)(x,A),(0,w.balance)(x,p.graph().align)},L=function(p){var b,S=(0,R.asNonCompoundGraph)(p);M(S);var x=P(S);(b=Object.keys(x))===null||b===void 0||b.forEach(function(y){S.node(y).x=x[y]})};G.default=L},813614:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.feasibleTreeWithLayer=G.feasibleTree=void 0;var g=_(337323),R=_(269209),w=_(627652),M=function(x){var y=new w.Graph({directed:!1}),A=x.nodes()[0],E=x.nodeCount();y.setNode(A,{});for(var D,B;P(y,x)<E;)D=b(y,x),B=y.hasNode(D.v)?(0,g.slack)(x,D):-(0,g.slack)(x,D),S(y,x,B);return y};G.feasibleTree=M;var P=function(x,y){var A=function(E){y.nodeEdges(E).forEach(function(D){var B=D.v,m=E===B?D.w:B;!x.hasNode(m)&&!(0,g.slack)(y,D)&&(x.setNode(m,{}),x.setEdge(E,m,{}),A(m))})};return x.nodes().forEach(A),x.nodeCount()},L=function(x){var y=new w.Graph({directed:!1}),A=x.nodes()[0],E=x.nodes().filter(function(m){return!!x.node(m)}).length;y.setNode(A,{});for(var D,B;p(y,x)<E;)D=b(y,x),B=y.hasNode(D.v)?(0,g.slack)(x,D):-(0,g.slack)(x,D),S(y,x,B);return y};G.feasibleTreeWithLayer=L;var p=function(x,y){var A=function(E){var D;(D=y.nodeEdges(E))===null||D===void 0||D.forEach(function(B){var m=B.v,f=E===m?B.w:m;!x.hasNode(f)&&(y.node(f).layer!==void 0||!(0,g.slack)(y,B))&&(x.setNode(f,{}),x.setEdge(E,f,{}),A(f))})};return x.nodes().forEach(A),x.nodeCount()},b=function(x,y){return(0,R.minBy)(y.edges(),function(A){return x.hasNode(A.v)!==x.hasNode(A.w)?(0,g.slack)(y,A):1/0})},S=function(x,y,A){x.nodes().forEach(function(E){y.node(E).rank||(y.node(E).rank=0),y.node(E).rank+=A})};G.default={feasibleTree:M,feasibleTreeWithLayer:L}},576827:function(Ne,G,_){"use strict";var g=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(G,"__esModule",{value:!0});var R=_(337323),w=_(813614),M=g(_(432253)),P=function(S){switch(S.graph().ranker){case"network-simplex":b(S);break;case"tight-tree":p(S);break;case"longest-path":L(S);break;default:p(S)}},L=R.longestPath,p=function(S){(0,R.longestPathWithLayer)(S),(0,w.feasibleTreeWithLayer)(S)},b=function(S){(0,M.default)(S)};G.default=P},432253:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.exchangeEdges=G.enterEdge=G.leaveEdge=G.initLowLimValues=G.calcCutValue=G.initCutValues=void 0;var g=_(813614),R=_(337323),w=_(269209),M=_(199905),P=M.algorithm.preorder,L=M.algorithm.postorder,p=function(X){var z=(0,w.simplify)(X);(0,R.longestPath)(z);var U=(0,g.feasibleTree)(z);(0,G.initLowLimValues)(U),(0,G.initCutValues)(U,z);for(var j,V;j=(0,G.leaveEdge)(U);)V=(0,G.enterEdge)(U,z,j),(0,G.exchangeEdges)(U,z,j,V)},b=function(X,z){var U=L(X,X.nodes());U=U==null?void 0:U.slice(0,(U==null?void 0:U.length)-1),U==null||U.forEach(function(j){S(X,z,j)})};G.initCutValues=b;var S=function(X,z,U){var j=X.node(U),V=j.parent;X.edgeFromArgs(U,V).cutvalue=(0,G.calcCutValue)(X,z,U)},x=function(X,z,U){var j,V=X.node(U),J=V.parent,Q=!0,et=z.edgeFromArgs(U,J),ut=0;return et||(Q=!1,et=z.edgeFromArgs(J,U)),ut=et.weight,(j=z.nodeEdges(U))===null||j===void 0||j.forEach(function(it){var yt=it.v===U,ft=yt?it.w:it.v;if(ft!==J){var Bt=yt===Q,St=z.edge(it).weight;if(ut+=Bt?St:-St,f(X,U,ft)){var Et=X.edgeFromArgs(U,ft).cutvalue;ut+=Bt?-Et:Et}}}),ut};G.calcCutValue=x;var y=function(X,z){z===void 0&&(z=X.nodes()[0]),A(X,{},1,z)};G.initLowLimValues=y;var A=function(X,z,U,j,V){var J,Q=U,et=U,ut=X.node(j);return z[j]=!0,(J=X.neighbors(j))===null||J===void 0||J.forEach(function(it){z[it]||(et=A(X,z,et,it,j))}),ut.low=Q,ut.lim=et++,V?ut.parent=V:delete ut.parent,et},E=function(X){return X.edges().find(function(z){return X.edge(z).cutvalue<0})};G.leaveEdge=E;var D=function(X,z,U){var j=U.v,V=U.w;z.hasEdge(j,V)||(j=U.w,V=U.v);var J=X.node(j),Q=X.node(V),et=J,ut=!1;J.lim>Q.lim&&(et=Q,ut=!0);var it=z.edges().filter(function(yt){return ut===W(X,X.node(yt.v),et)&&ut!==W(X,X.node(yt.w),et)});return(0,w.minBy)(it,function(yt){return(0,R.slack)(z,yt)})};G.enterEdge=D;var B=function(X,z,U,j){var V=U.v,J=U.w;X.removeEdge(V,J),X.setEdge(j.v,j.w,{}),(0,G.initLowLimValues)(X),(0,G.initCutValues)(X,z),m(X,z)};G.exchangeEdges=B;var m=function(X,z){var U=X.nodes().find(function(V){var J;return!(!((J=z.node(V))===null||J===void 0)&&J.parent)}),j=P(X,U);j=j==null?void 0:j.slice(1),j==null||j.forEach(function(V){var J=X.node(V).parent,Q=z.edgeFromArgs(V,J),et=!1;Q||(Q=z.edgeFromArgs(J,V),et=!0),z.node(V).rank=z.node(J).rank+(et?Q.minlen:-Q.minlen)})},f=function(X,z,U){return X.hasEdge(z,U)},W=function(X,z,U){return U.low<=z.lim&&z.lim<=U.lim};G.default=p},337323:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.slack=G.longestPathWithLayer=G.longestPath=void 0;var _=function(w){var M,P={},L=function(p){var b,S=w.node(p);if(!S)return 0;if(P[p])return S.rank;P[p]=!0;var x;return(b=w.outEdges(p))===null||b===void 0||b.forEach(function(y){var A=L(y.w),E=w.edge(y).minlen,D=A-E;D&&(x===void 0||D<x)&&(x=D)}),x||(x=0),S.rank=x,x};(M=w.sources())===null||M===void 0||M.forEach(function(p){return L(p)})};G.longestPath=_;var g=function(w){var M,P={},L,p=function(x){var y,A=w.node(x);if(!A)return 0;if(P[x])return A.rank;P[x]=!0;var E;return(y=w.outEdges(x))===null||y===void 0||y.forEach(function(D){var B=p(D.w),m=w.edge(D).minlen,f=B-m;f&&(E===void 0||f<E)&&(E=f)}),E||(E=0),(L===void 0||E<L)&&(L=E),A.rank=E,E};(M=w.sources())===null||M===void 0||M.forEach(function(x){w.node(x)&&p(x)}),L===void 0&&(L=0);var b={},S=function(x,y){var A,E=w.node(x),D=isNaN(E.layer)?y:E.layer;(E.rank===void 0||E.rank<D)&&(E.rank=D),!b[x]&&(b[x]=!0,(A=w.outEdges(x))===null||A===void 0||A.map(function(B){S(B.w,D+w.edge(B).minlen)}))};w.nodes().forEach(function(x){var y=w.node(x);y&&(isNaN(y.layer)?y.rank-=L:S(x,y.layer))})};G.longestPathWithLayer=g;var R=function(w,M){return w.node(M.w).rank-w.node(M.v).rank-w.edge(M).minlen};G.slack=R,G.default={longestPath:_,longestPathWithLayer:g,slack:R}},269209:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.minBy=G.notime=G.time=G.partition=G.maxRank=G.addBorderNode=G.removeEmptyRanks=G.normalizeRanks=G.buildLayerMatrix=G.intersectRect=G.predecessorWeights=G.successorWeights=G.zipObject=G.asNonCompoundGraph=G.simplify=G.addDummyNode=void 0;var g=_(449784),R=_(627652),w=function(z,U){return Number(z)-Number(U)},M=function(z,U,j,V){var J;do J="".concat(V).concat(Math.random());while(z.hasNode(J));return j.dummy=U,z.setNode(J,j),J};G.addDummyNode=M;var P=function(z){var U=new R.Graph().setGraph(z.graph());return z.nodes().forEach(function(j){U.setNode(j,z.node(j))}),z.edges().forEach(function(j){var V=U.edgeFromArgs(j.v,j.w)||{weight:0,minlen:1},J=z.edge(j);U.setEdge(j.v,j.w,{weight:V.weight+J.weight,minlen:Math.max(V.minlen,J.minlen)})}),U};G.simplify=P;var L=function(z){var U=new R.Graph({multigraph:z.isMultigraph()}).setGraph(z.graph());return z.nodes().forEach(function(j){var V;!((V=z.children(j))===null||V===void 0)&&V.length||U.setNode(j,z.node(j))}),z.edges().forEach(function(j){U.setEdgeObj(j,z.edge(j))}),U};G.asNonCompoundGraph=L;var p=function(z,U){return z==null?void 0:z.reduce(function(j,V,J){return j[V]=U[J],j},{})};G.zipObject=p;var b=function(z){var U={};return z.nodes().forEach(function(j){var V,J={};(V=z.outEdges(j))===null||V===void 0||V.forEach(function(Q){var et;J[Q.w]=(J[Q.w]||0)+(((et=z.edge(Q))===null||et===void 0?void 0:et.weight)||0)}),U[j]=J}),U};G.successorWeights=b;var S=function(z){var U=z.nodes(),j=U.map(function(V){var J,Q={};return(J=z.inEdges(V))===null||J===void 0||J.forEach(function(et){Q[et.v]=(Q[et.v]||0)+z.edge(et).weight}),Q});return(0,G.zipObject)(U,j)};G.predecessorWeights=S;var x=function(z,U){var j=Number(z.x),V=Number(z.y),J=Number(U.x)-j,Q=Number(U.y)-V,et=Number(z.width)/2,ut=Number(z.height)/2;if(!J&&!Q)return{x:0,y:0};var it,yt;return Math.abs(Q)*et>Math.abs(J)*ut?(Q<0&&(ut=-ut),it=ut*J/Q,yt=ut):(J<0&&(et=-et),it=et,yt=et*Q/J),{x:j+it,y:V+yt}};G.intersectRect=x;var y=function(z){for(var U=[],j=(0,G.maxRank)(z)+1,V=0;V<j;V++)U.push([]);z.nodes().forEach(function(J){var Q=z.node(J);if(Q){var et=Q.rank;et!==void 0&&U[et]&&U[et].push(J)}});for(var V=0;V<j;V++)U[V]=U[V].sort(function(Q,et){var ut,it;return w((ut=z.node(Q))===null||ut===void 0?void 0:ut.order,(it=z.node(et))===null||it===void 0?void 0:it.order)});return U};G.buildLayerMatrix=y;var A=function(z){var U=z.nodes().filter(function(V){var J;return((J=z.node(V))===null||J===void 0?void 0:J.rank)!==void 0}).map(function(V){return z.node(V).rank}),j=Math.min.apply(Math,U);z.nodes().forEach(function(V){var J=z.node(V);J.hasOwnProperty("rank")&&j!==1/0&&(J.rank-=j)})};G.normalizeRanks=A;var E=function(z){var U=z.nodes(),j=U.filter(function(yt){var ft;return((ft=z.node(yt))===null||ft===void 0?void 0:ft.rank)!==void 0}).map(function(yt){return z.node(yt).rank}),V=Math.min.apply(Math,j),J=[];U.forEach(function(yt){var ft,Bt=(((ft=z.node(yt))===null||ft===void 0?void 0:ft.rank)||0)-V;J[Bt]||(J[Bt]=[]),J[Bt].push(yt)});for(var Q=0,et=z.graph().nodeRankFactor||0,ut=0;ut<J.length;ut++){var it=J[ut];it===void 0?ut%et!==0&&(Q-=1):Q&&(it==null||it.forEach(function(yt){var ft=z.node(yt);ft&&(ft.rank=ft.rank||0,ft.rank+=Q)}))}};G.removeEmptyRanks=E;var D=function(z,U,j,V){var J={width:0,height:0};return(0,g.isNumber)(j)&&(0,g.isNumber)(V)&&(J.rank=j,J.order=V),(0,G.addDummyNode)(z,"border",J,U)};G.addBorderNode=D;var B=function(z){var U;return z.nodes().forEach(function(j){var V,J=(V=z.node(j))===null||V===void 0?void 0:V.rank;J!==void 0&&(U===void 0||J>U)&&(U=J)}),U||(U=0),U};G.maxRank=B;var m=function(z,U){var j={lhs:[],rhs:[]};return z==null||z.forEach(function(V){U(V)?j.lhs.push(V):j.rhs.push(V)}),j};G.partition=m;var f=function(z,U){var j=Date.now();try{return U()}finally{console.log("".concat(z," time: ").concat(Date.now()-j,"ms"))}};G.time=f;var W=function(z,U){return U()};G.notime=W;var X=function(z,U){return z.reduce(function(j,V){var J=U(j),Q=U(V);return J>Q?V:j})};G.minBy=X},177057:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(y[E]=A[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function y(){this.constructor=S}S.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}}(),R=this&&this.__assign||function(){return R=Object.assign||function(b){for(var S,x=1,y=arguments.length;x<y;x++){S=arguments[x];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(b[A]=S[A])}return b},R.apply(this,arguments)},w=this&&this.__spreadArray||function(b,S,x){if(x||arguments.length===2)for(var y=0,A=S.length,E;y<A;y++)(E||!(y in S))&&(E||(E=Array.prototype.slice.call(S,0,y)),E[y]=S[y]);return b.concat(E||Array.prototype.slice.call(S))};Object.defineProperty(G,"__esModule",{value:!0}),G.DagreCompoundLayout=void 0;var M=_(762329),P=_(631969),L=_(449784),p=function(b){g(S,b);function S(x){var y=b.call(this)||this;return y.rankdir="TB",y.nodesep=50,y.edgesep=5,y.ranksep=50,y.controlPoints=!0,y.anchorPoint=!0,y.nodes=[],y.edges=[],y.combos=[],y.onLayoutEnd=function(){},y.updateCfg(x),y}return S.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},S.prototype.init=function(x){var y=x.hiddenNodes||[],A=x.hiddenEdges||[],E=x.hiddenCombos||[];this.nodes=this.getDataByOrder((x.nodes||[]).concat(y)),this.edges=this.getDataByOrder((x.edges||[]).concat(A)),this.combos=(x.combos||[]).concat(E.map(function(D){return R(R({},D),{collapsed:!0})}))},S.prototype.execute=function(){var x=this,y=x.nodes,A=x.edges;if(y){var E=x.getLayoutConfig(),D=E.graphDef,B=E.graphOption,m=E.graphSettings,f=(0,P.buildGraph)(D,B,m),W=(0,P.flatGraph)(f,!0);return this.updatePosition(W),x.onLayoutEnd&&x.onLayoutEnd(),{nodes:y,edges:A}}},S.prototype.getNodePath=function(x){var y=this,A=y.nodes,E=y.combos,D=A.find(function(m){return m.id===x}),B=function(m,f){f===void 0&&(f=[]);var W=E.find(function(X){return X.id===m});return W?(f.unshift(m),W.parentId?B(W.parentId,f):f):f};return D&&D.comboId?B(D.comboId,[x]):[x]},S.prototype.getLayoutConfig=function(){var x,y,A,E=this,D=E.nodes,B=E.edges,m=E.combos,f=E.nodeSize,W=E.rankdir,X=E.align,z=E.edgesep,U=E.nodesep,j=E.ranksep,V=E.settings,J=(m||[]).reduce(function(At,Ot){var xt=D.filter(function(Yt){return Yt.comboId===Ot.id}).map(function(Yt){return Yt.id}),Dt=(m||[]).filter(function(Yt){return Yt.parentId===Ot.id}).map(function(Yt){return Yt.id});return(xt.length||Dt.length)&&(At[Ot.id]=w(w([],xt,!0),Dt,!0)),At},{}),Q;f?(0,L.isArray)(f)?Q=function(){return f}:Q=function(){return[f,f]}:Q=function(At){return At&&At.size?(0,L.isArray)(At.size)?At.size:(0,L.isObject)(At.size)?[At.size.width||40,At.size.height||40]:[At.size,At.size]:[40,40]};var et=function(At){return At&&At.size?(0,L.isArray)(At.size)?At.size:[At.size,At.size]:[80,40]},ut=et(m==null?void 0:m[0]),it=ut[0],yt=ut[1],ft=(y=(x=E.graphSettings)===null||x===void 0?void 0:x.subScene)===null||y===void 0?void 0:y.meta,Bt=((A=m.find(function(At){return!At.collapsed}))===null||A===void 0?void 0:A.padding)||[20,20,20,20],St=Bt[0],Et=Bt[1],Z=Bt[2],q=Bt[3],bt={compound:J,nodes:w([],(D||[]).map(function(At){var Ot=Q(At),xt=Ot[0],Dt=Ot[1];return R(R({},At),{width:xt,height:Dt})}),!0),edges:w([],(B||[]).map(function(At){return R(R({},At),{v:At.source,w:At.target})}),!0)},Ct={expanded:(m||[]).filter(function(At){return!At.collapsed}).map(function(At){return At.id})},nt={graph:{meta:{align:X,rankDir:W,nodeSep:U,edgeSep:z,rankSep:j}},subScene:{meta:{paddingTop:St||(ft==null?void 0:ft.paddingTop)||20,paddingRight:Et||(ft==null?void 0:ft.paddingRight)||20,paddingBottom:Z||(ft==null?void 0:ft.paddingBottom)||20,paddingLeft:q||(ft==null?void 0:ft.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:it,height:yt}}},ht=(0,P.mergeConfig)(V,R({},(0,P.mergeConfig)(nt,P.LAYOUT_CONFIG)));return E.graphSettings=ht,{graphDef:bt,graphOption:Ct,graphSettings:ht}},S.prototype.updatePosition=function(x){var y=x.nodes,A=x.edges;this.updateNodePosition(y,A),this.updateEdgePosition(y,A)},S.prototype.getBegin=function(x,y){var A=this,E=A.begin,D=[0,0];if(E){var B=1/0,m=1/0;x.forEach(function(f){B>f.x&&(B=f.x),m>f.y&&(m=f.y)}),y.forEach(function(f){f.points.forEach(function(W){B>W.x&&(B=W.x),m>W.y&&(m=W.y)})}),D[0]=E[0]-B,D[1]=E[1]-m}return D},S.prototype.updateNodePosition=function(x,y){var A=this,E=A.combos,D=A.nodes,B=A.edges,m=A.anchorPoint,f=A.graphSettings,W=this.getBegin(x,y);x.forEach(function(X){var z,U=X.x,j=X.y,V=X.id,J=X.type,Q=X.coreBox;if(J===P.HierarchyNodeType.META&&V!==P.ROOT_NAME){var et=E.findIndex(function(Bt){return Bt.id===V}),ut=(z=f==null?void 0:f.subScene)===null||z===void 0?void 0:z.meta;E[et].offsetX=U+W[0],E[et].offsetY=j+W[1],E[et].fixSize=[Q.width,Q.height],E[et].fixCollapseSize=[Q.width,Q.height],X.expanded?E[et].padding=[ut==null?void 0:ut.paddingTop,ut==null?void 0:ut.paddingRight,ut==null?void 0:ut.paddingBottom,ut==null?void 0:ut.paddingLeft]:E[et].padding=[0,0,0,0]}else if(J===P.HierarchyNodeType.OP){var et=D.findIndex(function(St){return St.id===V});if(D[et].x=U+W[0],D[et].y=j+W[1],m){var it=[],yt=y.filter(function(St){return St.v===V}),ft=y.filter(function(St){return St.w===V});yt.length>0&&yt.forEach(function(St){var Et=St.points[0],Z=(Et.x-U)/X.width+.5,q=(Et.y-j)/X.height+.5;it.push([Z,q]),St.baseEdgeList.forEach(function(bt){var Ct=B.find(function(nt){return nt.source===bt.v&&nt.target===bt.w});Ct&&(Ct.sourceAnchor=it.length-1)})}),ft.length>0&&ft.forEach(function(St){var Et=St.points[St.points.length-1],Z=(Et.x-U)/X.width+.5,q=(Et.y-j)/X.height+.5;it.push([Z,q]),St.baseEdgeList.forEach(function(bt){var Ct=B.find(function(nt){return nt.source===bt.v&&nt.target===bt.w});Ct&&(Ct.targetAnchor=it.length-1)})}),D[et].anchorPoints=it.length>0?it:D[et].anchorPoints||[]}}})},S.prototype.updateEdgePosition=function(x,y){var A=this,E=A.combos,D=A.edges,B=A.controlPoints,m=this.getBegin(x,y);B&&(E.forEach(function(f){f.inEdges=[],f.outEdges=[]}),D.forEach(function(f){var W,X,z,U,j=x.find(function(Bt){return Bt.id===f.source}),V=x.find(function(Bt){return Bt.id===f.target}),J=[],Q=[];if(j&&V)Q=(0,P.getEdges)(j==null?void 0:j.id,V==null?void 0:V.id,x);else if(!j||!V){var et=A.getNodePath(f.source),ut=A.getNodePath(f.target),it=et.reverse().slice(j?0:1).find(function(Bt){return x.find(function(St){return St.id===Bt})}),yt=ut.reverse().slice(V?0:1).find(function(Bt){return x.find(function(St){return St.id===Bt})});j=x.find(function(Bt){return Bt.id===it}),V=x.find(function(Bt){return Bt.id===yt}),Q=(0,P.getEdges)(j==null?void 0:j.id,V==null?void 0:V.id,x,{v:f.source,w:f.target})}if(J=Q.reduce(function(Bt,St){return w(w([],Bt,!0),St.points.map(function(Et){return R(R({},Et),{x:Et.x+m[0],y:Et.y+m[1]})}),!0)},[]),J=J.slice(1,-1),f.controlPoints=J,(V==null?void 0:V.type)===P.NodeType.META){var ft=E.findIndex(function(Bt){return Bt.id===(V==null?void 0:V.id)});if(!E[ft]||!((W=E[ft].inEdges)===null||W===void 0)&&W.some(function(Bt){return Bt.source===j.id&&Bt.target===V.id}))return;(X=E[ft].inEdges)===null||X===void 0||X.push({source:j.id,target:V.id,controlPoints:J})}if((j==null?void 0:j.type)===P.NodeType.META){var ft=E.findIndex(function(St){return St.id===(j==null?void 0:j.id)});if(!E[ft]||!((z=E[ft].outEdges)===null||z===void 0)&&z.some(function(St){return St.source===j.id&&St.target===V.id}))return;(U=E[ft].outEdges)===null||U===void 0||U.push({source:j.id,target:V.id,controlPoints:J})}}))},S.prototype.getType=function(){return"dagreCompound"},S.prototype.getDataByOrder=function(x){return x.every(function(y){return y.layoutOrder!==void 0})||x.forEach(function(y,A){y.layoutOrder=A}),x.sort(function(y,A){return y.layoutOrder-A.layoutOrder})},S}(M.Base);G.DagreCompoundLayout=p},934015:function(Ne,G,_){"use strict";var g=this&&this.__assign||function(){return g=Object.assign||function(y){for(var A,E=1,D=arguments.length;E<D;E++){A=arguments[E];for(var B in A)Object.prototype.hasOwnProperty.call(A,B)&&(y[B]=A[B])}return y},g.apply(this,arguments)},R=this&&this.__createBinding||(Object.create?function(y,A,E,D){D===void 0&&(D=E);var B=Object.getOwnPropertyDescriptor(A,E);(!B||("get"in B?!A.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return A[E]}}),Object.defineProperty(y,D,B)}:function(y,A,E,D){D===void 0&&(D=E),y[D]=A[E]}),w=this&&this.__setModuleDefault||(Object.create?function(y,A){Object.defineProperty(y,"default",{enumerable:!0,value:A})}:function(y,A){y.default=A}),M=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var A={};if(y!=null)for(var E in y)E!=="default"&&Object.prototype.hasOwnProperty.call(y,E)&&R(A,y,E);return w(A,y),A},P=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(G,"__esModule",{value:!0});var L=M(_(971497)),p=P(_(788221)),b=P(_(87064)),S=_(920171);function x(y,A){var E=y.nodes,D=y.edges,B=A.width,m=A.height;if(!(E!=null&&E.length))return Promise.resolve();var f=[];E.forEach(function(Q){var et=D.filter(function(it){return it.source===Q.id||it.target===Q.id});if(et.length>1){var ut=g({},Q);delete ut.size,f.push(ut)}});var W=[];D.forEach(function(Q){var et=f.find(function(it){return it.id===Q.source}),ut=f.find(function(it){return it.id===Q.target});et&&ut&&W.push(Q)});var X=new S.DagreLayout({type:"dagre",ranksep:A.nodeMinGap,nodesep:A.nodeMinGap}),z=X.layout({nodes:f,edges:W}).nodes;E.forEach(function(Q){var et=(z||[]).find(function(ut){return ut.id===Q.id});Q.x=(et==null?void 0:et.x)||B/2,Q.y=(et==null?void 0:et.y)||m/2});var U=JSON.parse(JSON.stringify(E)),j=JSON.parse(JSON.stringify(D)),V=L.forceSimulation().nodes(U).force("link",L.forceLink(j).id(function(Q){return Q.id}).distance(function(Q){var et=W.find(function(ut){return ut.source===Q.source&&ut.target===Q.target});return et?30:20})).force("charge",L.forceManyBody()).force("center",L.forceCenter(B/2,m/2)).force("x",L.forceX(B/2)).force("y",L.forceY(m/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),J=new Promise(function(Q){V.on("end",function(){E.forEach(function(St){var Et=U.find(function(Z){return Z.id===St.id});Et&&(St.x=Et.x,St.y=Et.y)});var et=Math.min.apply(Math,E.map(function(St){return St.x})),ut=Math.max.apply(Math,E.map(function(St){return St.x})),it=Math.min.apply(Math,E.map(function(St){return St.y})),yt=Math.max.apply(Math,E.map(function(St){return St.y})),ft=B/(ut-et),Bt=m/(yt-it);E.forEach(function(St){St.x!==void 0&&ft<1&&(St.x=(St.x-et)*ft),St.y!==void 0&&Bt<1&&(St.y=(St.y-it)*Bt)}),E.forEach(function(St){St.sizeTemp=St.size,St.size=[10,10]}),(0,b.default)(E,D),E.forEach(function(St){St.size=St.sizeTemp||[],delete St.sizeTemp}),(0,p.default)({nodes:E,edges:D},A),Q()})});return J}G.default=x},788221:function(Ne,G,_){"use strict";var g=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(G,"__esModule",{value:!0});var R=g(_(28611));function w(M,P){if(!M.nodes||M.nodes.length===0)return M;var L=P.width,p=P.height,b=P.nodeMinGap,S=1e4,x=1e4;M.nodes.forEach(function(j){var V=j.size[0]||50,J=j.size[1]||50;S=Math.min(V,S),x=Math.min(J,x)});var y=new R.default;y.init(L,p,{CELL_H:x,CELL_W:S}),M.nodes.forEach(function(j){var V=y.occupyNearest(j);V&&(V.node={id:j.id,size:j.size},j.x=V.x,j.y=V.y,j.dx=V.dx,j.dy=V.dy)});for(var A=0;A<M.nodes.length;A++){var E=M.nodes[A],D=y.findGridByNodeId(E.id);if(!D)throw new Error("can not find node cell");var B=D.column,m=D.row;if(E.size[0]+b>S){for(var f=Math.ceil((E.size[0]+b)/S)-1,W=f,X=0;X<f;X++){var z=y.additionColumn.indexOf(B+X+1)>-1;if(z&&!y.cells[B+X+1][m].node)W--;else break}y.insertColumn(B,W)}if(E.size[1]+b>x){for(var f=Math.ceil((E.size[1]+b)/x)-1,W=f,X=0;X<f;X++){var z=y.additionRow.indexOf(m+X+1)>-1;if(z&&!y.cells[B][m+X+1].node)W--;else break}y.insertRow(m,W)}}for(var A=0;A<y.columnNum;A++)for(var U=function(V){var J=y.cells[A][V];if(J.node){var Q=M.nodes.find(function(et){var ut;return et.id===((ut=J==null?void 0:J.node)===null||ut===void 0?void 0:ut.id)});Q&&(Q.x=J.x+Q.size[0]/2,Q.y=J.y+Q.size[1]/2)}},X=0;X<y.rowNum;X++)U(X)}G.default=w},28611:function(Ne,G){"use strict";var _=this&&this.__assign||function(){return _=Object.assign||function(R){for(var w,M=1,P=arguments.length;M<P;M++){w=arguments[M];for(var L in w)Object.prototype.hasOwnProperty.call(w,L)&&(R[L]=w[L])}return R},_.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0});var g=function(){function R(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return R.prototype.init=function(w,M,P){this.cells=[],this.CELL_W=P.CELL_W||R.DEFAULT_CELL_W,this.CELL_H=P.CELL_H||R.DEFAULT_CELL_H,this.columnNum=Math.ceil(w/this.CELL_W),this.rowNum=Math.ceil(M/this.CELL_H),R.MIN_DIST=Math.pow(w,2)+Math.pow(M,2);for(var L=0;L<this.columnNum;L++){for(var p=[],b=0;b<this.rowNum;b++){var S={dx:L,dy:b,x:L*this.CELL_W,y:b*this.CELL_H,occupied:!1};p.push(S)}this.cells.push(p)}},R.prototype.findGridByNodeId=function(w){for(var M,P,L=0;L<this.columnNum;L++)for(var p=0;p<this.rowNum;p++)if(this.cells[L][p].node&&((P=(M=this.cells[L][p])===null||M===void 0?void 0:M.node)===null||P===void 0?void 0:P.id)===w)return{column:L,row:p};return null},R.prototype.sqdist=function(w,M){return Math.pow(w.x-M.x,2)+Math.pow(w.y-M.y,2)},R.prototype.occupyNearest=function(w){for(var M=R.MIN_DIST,P,L=null,p=0;p<this.columnNum;p++)for(var b=0;b<this.rowNum;b++)!this.cells[p][b].occupied&&(P=this.sqdist(w,this.cells[p][b]))<M&&(M=P,L=this.cells[p][b]);return L&&(L.occupied=!0),L},R.prototype.insertColumn=function(w,M){if(!(M<=0)){for(var P=0;P<M;P++){this.cells[P+this.columnNum]=[];for(var L=0;L<this.rowNum;L++)this.cells[P+this.columnNum][L]={dx:P,dy:L,x:P*this.CELL_W,y:L*this.CELL_H,occupied:!1,node:null}}for(var P=this.columnNum-1;P>w;P--)for(var L=0;L<this.rowNum;L++)this.cells[P+M][L]=_(_({},this.cells[P][L]),{x:(P+M)*this.CELL_W,y:L*this.CELL_H}),this.cells[P][L]={x:P*this.CELL_W,y:L*this.CELL_H,occupied:!0,node:null};for(var L=0;L<this.additionColumn.length;L++)this.additionColumn[L]>=w&&(this.additionColumn[L]+=M);for(var P=0;P<M;P++)this.additionColumn.push(w+P+1);this.columnNum+=M}},R.prototype.insertRow=function(w,M){if(!(M<=0)){for(var P=0;P<M;P++)for(var L=0;L<this.columnNum;L++)this.cells[L][P+this.rowNum]={dx:L,dy:P,x:L*this.CELL_W,y:P*this.CELL_H,occupied:!1,node:null};for(var L=0;L<this.columnNum;L++)for(var P=this.rowNum-1;P>w;P--)this.cells[L][P+M]=_(_({},this.cells[L][P]),{dx:L,dy:P+M,x:L*this.CELL_W,y:(P+M)*this.CELL_H}),this.cells[L][P]={dx:L,dy:P,x:L*this.CELL_W,y:P*this.CELL_H,occupied:!1,node:null};for(var P=0;P<this.additionRow.length;P++)this.additionRow[P]>=w&&(this.additionRow[P]+=M);for(var L=0;L<M;L++)this.additionRow.push(w+L+1);this.rowNum+=M}},R.prototype.getNodes=function(){for(var w=[],M=0;M<this.columnNum;M++)for(var P=0;P<this.rowNum;P++)this.cells[M][P].node&&w.push(this.cells[M][P]);return w},R.MIN_DIST=50,R.DEFAULT_CELL_W=80,R.DEFAULT_CELL_H=80,R}();G.default=g},290441:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var L=function(p,b){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(S[y]=x[y])},L(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");L(p,b);function S(){this.constructor=p}p.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),R=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(G,"__esModule",{value:!0}),G.ERLayout=void 0;var w=_(762329),M=R(_(934015)),P=function(L){g(p,L);function p(b){var S=L.call(this)||this;return S.width=300,S.height=300,S.nodeMinGap=50,S.onLayoutEnd=function(){},b&&S.updateCfg(b),S}return p.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},p.prototype.execute=function(){var b=this,S=b.nodes,x=b.edges;return S==null||S.forEach(function(y){y.size||(y.size=[50,50])}),(0,M.default)({nodes:S,edges:x},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){b.onLayoutEnd&&b.onLayoutEnd()})},p.prototype.getType=function(){return"er"},p}(w.Base);G.ERLayout=P},87064:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=1200,g=800,R=1e7,w=10,M=3.141592653589793,P=1.5707963267948966,L=M*.375,p=M*.625,b=new Map,S=10,x=10,y=.8,A=.1,E=.5;function D(U,j,V){var J=U.x-U.size[0]/2,Q=U.y-U.size[1]/2,et=U.x+U.size[0]/2,ut=U.y+U.size[1]/2,it=j.x-j.size[0]/2,yt=j.y-j.size[1]/2,ft=j.x+j.size[0]/2,Bt=j.y+j.size[1]/2,St=U.x,Et=U.y,Z=j.x,q=j.y,bt=Z-St,Ct=Math.atan2(bt,q-Et),nt=0,ht=0,At=0,Ot=0;Ct>P?(ht=Q-Bt,nt=it-et,At=parseFloat(ht?(ht/Math.cos(Ct)).toFixed(2):nt.toFixed(2)),Ot=parseFloat(nt?(nt/Math.sin(Ct)).toFixed(2):ht.toFixed(2))):0<Ct&&Ct<=P?(ht=yt-ut,nt=it-et,ht>nt?At=Ot=parseFloat(ht?(ht/Math.cos(Ct)).toFixed(2):nt.toFixed(2)):At=Ot=parseFloat(nt?(nt/Math.sin(Ct)).toFixed(2):ht.toFixed(2))):Ct<-P?(ht=Q-Bt,nt=-(ft-J),ht>nt?At=Ot=parseFloat(ht?(ht/Math.cos(Ct)).toFixed(2):nt.toFixed(2)):At=Ot=parseFloat(nt?(nt/Math.sin(Ct)).toFixed(2):ht.toFixed(2))):(ht=yt-ut,Math.abs(bt)>(et-J)/2?nt=J-ft:nt=bt,ht>nt?At=Ot=parseFloat(ht?(ht/Math.cos(Ct)).toFixed(2):nt.toFixed(2)):At=Ot=parseFloat(nt&&Ct!==0?(nt/Math.sin(Ct)).toFixed(2):ht.toFixed(2)));var xt=parseFloat(Ct.toFixed(2)),Dt=V;return V&&(Dt=L<xt&&xt<p),{distance:Math.abs(At<Ot?At:Ot),isHoriz:Dt}}function B(U,j){var V=b.get(U.id)||[],J=V.find(function(ge){return ge.source===j.id||ge.target===j.id}),Q=U.size[0]*U.size[1],et=j.size[0]*j.size[1],ut=Q>et?j:U,it=Q>et?U:j,yt=ut.x-ut.size[0]/2,ft=ut.y-ut.size[1]/2,Bt=ut.x+ut.size[0]/2,St=ut.y+ut.size[1]/2,Et=it.x-it.size[0]/2,Z=it.y-it.size[1]/2,q=it.x+it.size[0]/2,bt=it.y+it.size[1]/2,Ct=ut.x,nt=ut.y,ht=it.x,At=it.y,Ot=Bt>=Et&&q>=yt&&St>=Z&&bt>=ft,xt=0,Dt=0;if(Ot){Dt=Math.sqrt(Math.pow(ht-Ct,2)+Math.pow(At-nt,2));var Yt=yt>Et?yt:Et,ie=ft>Z?ft:Z,re=Bt<q?Bt:q,Pt=St<bt?St:bt,ee=re-Yt,ce=Pt-ie,Ut=ee*ce;Dt===0&&(Dt=1e-7),xt=w*1/Dt*100+Ut,xt*=R}else{var te=!1,ye=D(ut,it,te);Dt=ye.distance,te=ye.isHoriz,Dt<=w?Dt!==0?J?xt+=w+R*1/Dt:xt+=w+R*w/Dt:xt+=R:(xt+=Dt,J&&(xt+=Dt*Dt))}return xt}function m(U){for(var j=0,V=0;V<U.length;V++){var J=U[V];(J.x<0||J.y<0||J.x>_||J.y>g)&&(j+=1e12);for(var Q=V+1;Q<U.length;Q++)j+=B(J,U[Q])}return j}function f(U,j,V,J){var Q=new Map;V.forEach(function(Ct,nt){Q.set(Ct.id,Ct)});var et=J.filter(function(Ct){return Ct.source===U.id||Ct.target===U.id})||[],ut=[];et.forEach(function(Ct){var nt=Ct.source===U.id?Ct.target:Ct.source,ht=Q.get(nt);ht&&ut.push(ht)});for(var it=!0,yt=0;yt<ut.length;yt++){var ft=ut[yt],Bt=Math.atan((U.y-ft.y)/(ft.x-U.y))*180,St=Math.atan((j.y-ft.y)/(ft.x-j.y))*180,Et=Bt<30||Bt>150,Z=St<30||St>150,q=Bt>70&&Bt<110,bt=St>70&&St<110;if(Et&&!Z||Bt*St<0){it=!1;break}else if(q&&!bt||Bt*St<0){it=!1;break}else if((ft.x-U.x)*(ft.x-j.x)<0){it=!1;break}else if((ft.y-U.y)*(ft.y-j.y)<0){it=!1;break}}return it}function W(U,j){for(var V=!1,J=1,Q=S*J,et=x*J,ut=[Q,-Q,0,0],it=[0,0,et,-et],yt=0;yt<U.length;++yt)for(var ft=U[yt],Bt=X(ft,U),St=0;St<ut.length;St++){var Et=f(ft,{x:ft.x+ut[St],y:ft.y+it[St]},U,j);if(Et){ft.x+=ut[St],ft.y+=it[St];var Z=X(ft,U),q=Math.random();Z<Bt||q<y&&q>A?(Bt=Z,V=!0):(ft.x-=ut[St],ft.y-=it[St])}}return y>A&&(y*=E),V?m(U):0}function X(U,j){var V=0;(U.x<0||U.y<0||U.x+U.size[0]+20>_||U.y+U.size[1]+20>g)&&(V+=1e12);for(var J=0;J<j.length;++J)U.id!==j[J].id&&(V+=B(U,j[J]));return V}function z(U,j){if(U.length===0)return{nodes:U,edges:j};U.forEach(function(ft){var Bt=j.filter(function(St){return St.source===ft.id||St.target===ft.id});b.set(ft,Bt)}),U.sort(function(ft,Bt){var St,Et;return((St=b.get(ft.id))===null||St===void 0?void 0:St.length)-((Et=b.get(Bt.id))===null||Et===void 0?void 0:Et.length)});for(var V=m(U),J=20,Q=1,et=0,ut=50,it=0;J>0&&(it++,!(it>=ut));){var yt=W(U,j);yt!==0&&(et=yt),Q=et-V,V=et,Q===0?--J:J=20}return U.forEach(function(ft){ft.x=ft.x-ft.size[0]/2,ft.y=ft.y-ft.size[1]/2}),{nodes:U,edges:j}}G.default=z},589806:function(Ne,G,_){"use strict";var g=this&&this.__createBinding||(Object.create?function(p,b,S,x){x===void 0&&(x=S);var y=Object.getOwnPropertyDescriptor(b,S);(!y||("get"in y?!b.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return b[S]}}),Object.defineProperty(p,x,y)}:function(p,b,S,x){x===void 0&&(x=S),p[x]=b[S]}),R=this&&this.__setModuleDefault||(Object.create?function(p,b){Object.defineProperty(p,"default",{enumerable:!0,value:b})}:function(p,b){p.default=b}),w=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var b={};if(p!=null)for(var S in p)S!=="default"&&Object.prototype.hasOwnProperty.call(p,S)&&g(b,p,S);return R(b,p),b};Object.defineProperty(G,"__esModule",{value:!0});var M=w(_(971497)),P=_(449784);function L(){function p(Pt){return function(){return Pt}}var b=function(Pt){return Pt.cluster},S=p(1),x=p(-1),y=p(100),A=p(.1),E=[0,0],D=[],B={},m=[],f=100,W=100,X={none:{x:0,y:0}},z=[],U,j="force",V=!0,J=.1;function Q(Pt){if(!V)return Q;U.tick(),Bt();for(var ee=0,ce=D.length,Ut=void 0,te=Pt*J;ee<ce;++ee)Ut=D[ee],Ut.vx+=(X[b(Ut)].x-Ut.x)*te,Ut.vy+=(X[b(Ut)].y-Ut.y)*te}function et(){D&&ut()}function ut(){if(!(!D||!D.length)){if(b(D[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Pt=it();U=M.forceSimulation(Pt.nodes).force("x",M.forceX(f).strength(.1)).force("y",M.forceY(W).strength(.1)).force("collide",M.forceCollide(function(ee){return ee.r}).iterations(4)).force("charge",M.forceManyBody().strength(x)).force("links",M.forceLink(Pt.nodes.length?Pt.links:[]).distance(y).strength(A)),z=U.nodes(),Bt()}}function it(){var Pt=[],ee=[],ce={},Ut=[],te={},ye=[];return te=yt(D),ye=ft(m),Ut=Object.keys(te),Ut.forEach(function(ge,Kt){var xe=te[ge];Pt.push({id:ge,size:xe.count,r:Math.sqrt(xe.sumforceNodeSize/Math.PI)}),ce[ge]=Kt}),ye.forEach(function(ge){var Kt=(0,P.getEdgeTerminal)(ge,"source"),xe=(0,P.getEdgeTerminal)(ge,"target"),Tt=ce[Kt],Ae=ce[xe];Tt!==void 0&&Ae!==void 0&&ee.push({source:Tt,target:Ae,count:ge.count})}),{nodes:Pt,links:ee}}function yt(Pt){var ee={};return Pt.forEach(function(ce){var Ut=b(ce);ee[Ut]||(ee[Ut]={count:0,sumforceNodeSize:0})}),Pt.forEach(function(ce){var Ut=b(ce),te=S(ce),ye=ee[Ut];ye.count=ye.count+1,ye.sumforceNodeSize=ye.sumforceNodeSize+Math.PI*(te*te)*1.3,ee[Ut]=ye}),ee}function ft(Pt){var ee={},ce=[];Pt.forEach(function(te){var ye=St(te),ge=0;ee[ye]!==void 0&&(ge=ee[ye]),ge+=1,ee[ye]=ge});var Ut=Object.entries(ee);return Ut.forEach(function(te){var ye=te[0],ge=te[1],Kt=ye.split("~")[0],xe=ye.split("~")[1];Kt!==void 0&&xe!==void 0&&ce.push({source:Kt,target:xe,count:ge})}),ce}function Bt(){return X={none:{x:0,y:0}},z.forEach(function(Pt){X[Pt.id]={x:Pt.x-E[0],y:Pt.y-E[1]}}),X}function St(Pt){var ee=(0,P.getEdgeTerminal)(Pt,"source"),ce=(0,P.getEdgeTerminal)(Pt,"target"),Ut=b(B[ee]),te=b(B[ce]);return Ut<=te?"".concat(Ut,"~").concat(te):"".concat(te,"~").concat(Ut)}function Et(Pt){B={},Pt.forEach(function(ee){B[ee.id]=ee})}function Z(Pt){return arguments.length?(j=Pt,et(),Q):j}function q(Pt){return arguments.length?typeof Pt=="string"?(b=function(ee){return ee[Pt]},Q):(b=Pt,Q):b}function bt(Pt){return arguments.length?(V=Pt,Q):V}function Ct(Pt){return arguments.length?(J=Pt,Q):J}function nt(Pt){return arguments.length?(f=Pt,Q):f}function ht(Pt){return arguments.length?(W=Pt,Q):W}function At(Pt){return arguments.length?(Et(Pt||[]),D=Pt||[],Q):D}function Ot(Pt){return arguments.length?(m=Pt||[],et(),Q):m}function xt(Pt){return arguments.length?(typeof Pt=="function"?S=Pt:S=p(+Pt),et(),Q):S}function Dt(Pt){return arguments.length?(typeof Pt=="function"?x=Pt:x=p(+Pt),et(),Q):x}function Yt(Pt){return arguments.length?(typeof Pt=="function"?y=Pt:y=p(+Pt),et(),Q):y}function ie(Pt){return arguments.length?(typeof Pt=="function"?A=Pt:A=p(+Pt),et(),Q):A}function re(Pt){return arguments.length?(E=Pt,Q):E}return Q.initialize=function(Pt){D=Pt,et()},Q.template=Z,Q.groupBy=q,Q.enableGrouping=bt,Q.strength=Ct,Q.centerX=nt,Q.centerY=ht,Q.nodes=At,Q.links=Ot,Q.forceNodeSize=xt,Q.nodeSize=Q.forceNodeSize,Q.forceCharge=Dt,Q.forceLinkDistance=Yt,Q.forceLinkStrength=ie,Q.offset=re,Q.getFocis=Bt,Q}G.default=L},508810:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var D=function(B,m){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,W){f.__proto__=W}||function(f,W){for(var X in W)Object.prototype.hasOwnProperty.call(W,X)&&(f[X]=W[X])},D(B,m)};return function(B,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");D(B,m);function f(){this.constructor=B}B.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}}(),R=this&&this.__createBinding||(Object.create?function(D,B,m,f){f===void 0&&(f=m);var W=Object.getOwnPropertyDescriptor(B,m);(!W||("get"in W?!B.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return B[m]}}),Object.defineProperty(D,f,W)}:function(D,B,m,f){f===void 0&&(f=m),D[f]=B[m]}),w=this&&this.__setModuleDefault||(Object.create?function(D,B){Object.defineProperty(D,"default",{enumerable:!0,value:B})}:function(D,B){D.default=B}),M=this&&this.__importStar||function(D){if(D&&D.__esModule)return D;var B={};if(D!=null)for(var m in D)m!=="default"&&Object.prototype.hasOwnProperty.call(D,m)&&R(B,D,m);return w(B,D),B},P=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(G,"__esModule",{value:!0}),G.ForceLayout=void 0;var L=M(_(971497)),p=P(_(589806)),b=_(449784),S=_(762329),x=_(416470),y=function(D){g(B,D);function B(m){var f=D.call(this)||this;return f.center=[0,0],f.nodeStrength=null,f.edgeStrength=null,f.preventOverlap=!1,f.clusterNodeStrength=null,f.clusterEdgeStrength=null,f.clusterEdgeDistance=null,f.clusterNodeSize=null,f.clusterFociStrength=null,f.linkDistance=50,f.alphaDecay=.028,f.alphaMin=.001,f.alpha=.3,f.collideStrength=1,f.workerEnabled=!1,f.tick=function(){},f.onLayoutEnd=function(){},f.ticking=void 0,m&&f.updateCfg(m),f}return B.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},B.prototype.init=function(m){var f=this;f.nodes=m.nodes||[];var W=m.edges||[];f.edges=W.map(function(X){var z={},U=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(X).forEach(function(j){U.indexOf(j)>-1||(z[j]=X[j])}),z}),f.ticking=!1},B.prototype.execute=function(m){var f=this,W=f.nodes,X=f.edges;if(!f.ticking){var z=f.forceSimulation,U=f.alphaMin,j=f.alphaDecay,V=f.alpha;if(z){if(m){if(f.clustering&&f.clusterForce&&(f.clusterForce.nodes(W),f.clusterForce.links(X)),z.nodes(W),X&&f.edgeForce)f.edgeForce.links(X);else if(X&&!f.edgeForce){var et=L.forceLink().id(function(ft){return ft.id}).links(X);f.edgeStrength&&et.strength(f.edgeStrength),f.linkDistance&&et.distance(f.linkDistance),f.edgeForce=et,z.force("link",et)}}f.preventOverlap&&f.overlapProcess(z),z.alpha(V).restart(),this.ticking=!0}else try{var J=L.forceManyBody();if(f.nodeStrength&&J.strength(f.nodeStrength),z=L.forceSimulation().nodes(W),f.clustering){var Q=(0,p.default)();Q.centerX(f.center[0]).centerY(f.center[1]).template("force").strength(f.clusterFociStrength),X&&Q.links(X),W&&Q.nodes(W),Q.forceLinkDistance(f.clusterEdgeDistance).forceLinkStrength(f.clusterEdgeStrength).forceCharge(f.clusterNodeStrength).forceNodeSize(f.clusterNodeSize),f.clusterForce=Q,z.force("group",Q)}if(z.force("center",L.forceCenter(f.center[0],f.center[1])).force("charge",J).alpha(V).alphaDecay(j).alphaMin(U),f.preventOverlap&&f.overlapProcess(z),X){var et=L.forceLink().id(function(yt){return yt.id}).links(X);f.edgeStrength&&et.strength(f.edgeStrength),f.linkDistance&&et.distance(f.linkDistance),f.edgeForce=et,z.force("link",et)}if(f.workerEnabled&&!E()&&(f.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!f.workerEnabled)z.on("tick",function(){f.tick()}).on("end",function(){f.ticking=!1,f.onLayoutEnd&&f.onLayoutEnd()}),f.ticking=!0;else{z.stop();for(var ut=A(z),it=1;it<=ut;it++)z.tick(),postMessage({nodes:W,currentTick:it,totalTicks:ut,type:x.LAYOUT_MESSAGE.TICK},void 0);f.ticking=!1}f.forceSimulation=z,f.ticking=!0}catch(yt){f.ticking=!1,console.warn(yt)}}},B.prototype.overlapProcess=function(m){var f=this,W=f.nodeSize,X=f.nodeSpacing,z,U,j=f.collideStrength;if((0,b.isNumber)(X)?U=function(){return X}:(0,b.isFunction)(X)?U=X:U=function(){return 0},!W)z=function(et){if(et.size){if((0,b.isArray)(et.size)){var ut=et.size[0]>et.size[1]?et.size[0]:et.size[1];return ut/2+U(et)}if((0,b.isObject)(et.size)){var ut=et.size.width>et.size.height?et.size.width:et.size.height;return ut/2+U(et)}return et.size/2+U(et)}return 10+U(et)};else if((0,b.isFunction)(W))z=function(et){var ut=W(et);return ut+U(et)};else if((0,b.isArray)(W)){var V=W[0]>W[1]?W[0]:W[1],J=V/2;z=function(et){return J+U(et)}}else if((0,b.isNumber)(W)){var Q=W/2;z=function(et){return Q+U(et)}}else z=function(){return 10};m.force("collisionForce",L.forceCollide(z).strength(j))},B.prototype.updateCfg=function(m){var f=this;f.ticking&&(f.forceSimulation.stop(),f.ticking=!1),f.forceSimulation=null,Object.assign(f,m)},B.prototype.destroy=function(){var m=this;m.ticking&&(m.forceSimulation.stop(),m.ticking=!1),m.nodes=null,m.edges=null,m.destroyed=!0},B}(S.Base);G.ForceLayout=y;function A(D){var B=D.alphaMin(),m=D.alphaTarget(),f=D.alpha(),W=Math.log((B-m)/(f-m))/Math.log(1-D.alphaDecay()),X=Math.ceil(W);return X}function E(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},885717:function(Ne,G,_){"use strict";var g=this&&this.__createBinding||(Object.create?function(w,M,P,L){L===void 0&&(L=P);var p=Object.getOwnPropertyDescriptor(M,P);(!p||("get"in p?!M.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return M[P]}}),Object.defineProperty(w,L,p)}:function(w,M,P,L){L===void 0&&(L=P),w[L]=M[P]}),R=this&&this.__exportStar||function(w,M){for(var P in w)P!=="default"&&!Object.prototype.hasOwnProperty.call(M,P)&&g(M,w,P)};Object.defineProperty(G,"__esModule",{value:!0}),R(_(508810),G)},191019:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.forceNBody=void 0;var g=_(971829),R=.81,w=.1;function M(b,S,x,y,A){var E=x/y,D=b.map(function(m,f){var W=S[m.id],X=W.data,z=W.x,U=W.y,j=W.size,V=X.layout.force.nodeStrength;return{x:z,y:U,size:j,index:f,vx:0,vy:0,weight:E*V}}),B=(0,g.quadtree)(D,function(m){return m.x},function(m){return m.y}).visitAfter(P);return D.forEach(function(m){p(m,B)}),D.map(function(m,f){var W=S[b[f].id],X=W.data.layout.force.mass,z=X===void 0?1:X;A[2*f]=m.vx/z,A[2*f+1]=m.vy/z}),A}G.forceNBody=M;function P(b){var S=0,x=0,y=0;if(b.length){for(var A=0;A<4;A++){var E=b[A];E&&E.weight&&(S+=E.weight,x+=E.x*E.weight,y+=E.y*E.weight)}b.x=x/S,b.y=y/S,b.weight=S}else{var E=b;b.x=E.data.x,b.y=E.data.y,b.weight=E.data.weight}}var L=function(b,S,x,y,A,E){var D=E.x-b.x||w,B=E.y-b.y||w,m=y-S,f=D*D+B*B,W=Math.sqrt(f)*f;if(m*m*R<f){var X=b.weight/W;return E.vx+=D*X,E.vy+=B*X,!0}if(b.length)return!1;if(b.data!==E){var X=b.data.weight/W;E.vx+=D*X,E.vy+=B*X}};function p(b,S){S.visit(function(x,y,A,E,D){return L(x,y,A,E,D,b)})}},306740:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(y[E]=A[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function y(){this.constructor=S}S.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}}(),R=this&&this.__assign||function(){return R=Object.assign||function(b){for(var S,x=1,y=arguments.length;x<y;x++){S=arguments[x];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(b[A]=S[A])}return b},R.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.Force2Layout=void 0;var w=_(762329),M=_(449784),P=_(191019),L=function(b,S){var x;return b?(0,M.isNumber)(b)?x=function(y){return b}:x=b:x=function(y){return S||1},x},p=function(b){g(S,b);function S(x){var y=b.call(this)||this;y.maxIteration=1e3,y.workerEnabled=!1,y.edgeStrength=200,y.nodeStrength=1e3,y.coulombDisScale=.005,y.damping=.9,y.maxSpeed=500,y.minMovement=.4,y.interval=.02,y.factor=1,y.linkDistance=200,y.gravity=0,y.clusterNodeStrength=20,y.preventOverlap=!0,y.distanceThresholdMode="mean",y.tick=function(){},y.nodes=[],y.edges=[],y.width=300,y.height=300,y.nodeMap={},y.nodeIdxMap={},y.judgingDistance=0,y.centripetalOptions={leaf:2,single:2,others:1,center:function(E){return{x:y.width/2,y:y.height/2}}};var A=x.getMass;return y.propsGetMass=A,y.updateCfg(x),y}return S.prototype.getCentripetalOptions=function(){var x=this,y=x.leafCluster,A=x.clustering,E=x.nodeClusterBy,D=x.nodes,B=x.nodeMap,m=x.clusterNodeStrength,f=function(ut){return typeof m=="function"?m(ut):m},W={},X;if(y){X=this.getSameTypeLeafMap()||{};var z=Array.from(new Set(D==null?void 0:D.map(function(ut){return ut[E]})))||[];W={single:100,leaf:function(ut,it,yt){var ft=X[ut.id]||{},Bt=ft.relativeLeafNodes,St=ft.sameTypeLeafNodes;return(St==null?void 0:St.length)===(Bt==null?void 0:Bt.length)||(z==null?void 0:z.length)===1?1:f(ut)},others:1,center:function(ut,it,yt){var ft,Bt=(((ft=ut.data)===null||ft===void 0?void 0:ft.layout)||{}).degree;if(!Bt)return{x:100,y:100};var St;if(Bt===1){var Et=(X[ut.id]||{}).sameTypeLeafNodes,Z=Et===void 0?[]:Et;Z.length===1?St=void 0:Z.length>1&&(St=(0,M.getAvgNodePosition)(Z))}else St=void 0;return{x:St==null?void 0:St.x,y:St==null?void 0:St.y}}}}if(A){X||(X=this.getSameTypeLeafMap());var U=Array.from(new Set(D.map(function(ut,it){return ut[E]}))).filter(function(ut){return ut!==void 0}),j={};U.forEach(function(ut){var it=D.filter(function(yt){return yt[E]===ut}).map(function(yt){return B[yt.id]});j[ut]=(0,M.getAvgNodePosition)(it)}),W={single:function(ut){return f(ut)},leaf:function(ut){return f(ut)},others:function(ut){return f(ut)},center:function(ut,it,yt){var ft=j[ut[E]];return{x:ft==null?void 0:ft.x,y:ft==null?void 0:ft.y}}}}this.centripetalOptions=R(R({},this.centripetalOptions),W);var V=this.centripetalOptions,J=V.leaf,Q=V.single,et=V.others;J&&typeof J!="function"&&(this.centripetalOptions.leaf=function(){return J}),Q&&typeof Q!="function"&&(this.centripetalOptions.single=function(){return Q}),et&&typeof et!="function"&&(this.centripetalOptions.others=function(){return et})},S.prototype.updateCfg=function(x){x&&Object.assign(this,x)},S.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},S.prototype.execute=function(){var x=this;x.stop();var y=x.nodes,A=x.edges,E=x.defSpringLen;if(x.judgingDistance=0,!y||y.length===0){x.onLayoutEnd([]);return}!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]);var D=x.center;if(y.length===1){y[0].x=D[0],y[0].y=D[1],x.onLayoutEnd([R({},y[0])]);return}x.degreesMap=(0,M.getDegreeMap)(y,A),x.propsGetMass?x.getMass=x.propsGetMass:x.getMass=function(U){var j=1;(0,M.isNumber)(U.mass)&&(j=U.mass);var V=x.degreesMap[U.id].all;return!V||V<5?j:V*5*j};var B=x.nodeSize,m;if(x.preventOverlap){var f=x.nodeSpacing,W;(0,M.isNumber)(f)?W=function(){return f}:(0,M.isFunction)(f)?W=f:W=function(){return 0},B?(0,M.isArray)(B)?m=function(U){return Math.max(B[0],B[1])+W(U)}:m=function(U){return B+W(U)}:m=function(U){return U.size?(0,M.isArray)(U.size)?Math.max(U.size[0],U.size[1])+W(U):(0,M.isObject)(U.size)?Math.max(U.size.width,U.size.height)+W(U):U.size+W(U):10+W(U)}}x.nodeSize=m,x.linkDistance=L(x.linkDistance,1),x.nodeStrength=L(x.nodeStrength,1),x.edgeStrength=L(x.edgeStrength,1);var X={},z={};y.forEach(function(U,j){(0,M.isNumber)(U.x)||(U.x=Math.random()*x.width),(0,M.isNumber)(U.y)||(U.y=Math.random()*x.height);var V=x.degreesMap[U.id];X[U.id]=R(R({},U),{data:R(R({},U.data),{size:x.nodeSize(U)||30,layout:{inDegree:V.in,outDegree:V.out,degree:V.all,tDegree:V.in,sDegree:V.out,force:{mass:x.getMass(U),nodeStrength:x.nodeStrength(U)}}})}),z[U.id]=j}),x.nodeMap=X,x.nodeIdxMap=z,x.edgeInfos=[],A==null||A.forEach(function(U){var j=X[U.source],V=X[U.target];!j||!V?elf.edgeInfos.push({}):x.edgeInfos.push({edgeStrength:x.edgeStrength(U),linkDistance:E?E(R(R({},U),{source:j,target:V}),j,V):x.linkDistance(U,j,V)||1+(B(j)+B(j)||0)/2})}),this.getCentripetalOptions(),x.onLayoutEnd=x.onLayoutEnd||function(){},x.run()},S.prototype.run=function(){var x=this,y=x.maxIteration,A=x.nodes,E=x.workerEnabled,D=x.minMovement,B=x.animate,m=x.nodeMap;if(A){var f=[];A.forEach(function(V,J){f[2*J]=0,f[2*J+1]=0});var W=y,X=!B;if(E||X){for(var z=0,U=0;(x.judgingDistance>D||U<1)&&U<W;U++)z=U,x.runOneStep(U,f);x.onLayoutEnd(Object.values(m))}else{if(typeof window=="undefined")return;var j=0;this.timeInterval=window.setInterval(function(){A&&(x.runOneStep(j,f),j++,(j>=W||x.judgingDistance<D)&&(x.onLayoutEnd(Object.values(m)),window.clearInterval(x.timeInterval)))},0)}}},S.prototype.runOneStep=function(x,y){var A,E=this,D=E.nodes,B=E.edges,m=E.nodeMap,f=E.monitor,W=[];if(D!=null&&D.length){E.calRepulsive(W),B&&E.calAttractive(W),E.calGravity(W);var X=E.interval;if(E.updateVelocity(W,y,X),E.updatePosition(y,X),(A=E.tick)===null||A===void 0||A.call(E),f){var z=this.calTotalEnergy(W);f({energy:z,nodes:D,edges:B,iterations:x})}}},S.prototype.calTotalEnergy=function(x){var y=this,A=y.nodes,E=y.nodeMap;if(!(A!=null&&A.length))return 0;var D=0;return A.forEach(function(B,m){var f=x[2*m],W=x[2*m+1],X=f*f+W*W,z=E[B.id].data.layout.force.mass,U=z===void 0?1:z;D+=U*X*.5}),D},S.prototype.calRepulsive=function(x){var y=this,A=y.nodes,E=y.nodeMap,D=y.factor,B=y.coulombDisScale,m=y.nodeSize;(0,P.forceNBody)(A,E,D,B*B,x)},S.prototype.calAttractive=function(x){var y=this,A=y.edges,E=y.nodeMap,D=y.nodeIdxMap,B=y.edgeInfos,m=y.nodeSize;A.forEach(function(f,W){var X=(0,M.getEdgeTerminal)(f,"source"),z=(0,M.getEdgeTerminal)(f,"target"),U=E[X],j=E[z];if(!(!U||!j)){var V=j.x-U.x,J=j.y-U.y;!V&&!J&&(V=Math.random()*.01,J=Math.random()*.01);var Q=Math.sqrt(V*V+J*J),et=V/Q,ut=J/Q,it=B[W]||{},yt=it.linkDistance,ft=yt===void 0?200:yt,Bt=it.edgeStrength,St=Bt===void 0?200:Bt,Et=ft-Q,Z=Et*St,q=U.data.layout.force.mass||1,bt=j.data.layout.force.mass||1,Ct=1/q,nt=1/bt,ht=et*Z,At=ut*Z,Ot=2*D[X],xt=2*D[z];x[Ot]-=ht*Ct,x[Ot+1]-=At*Ct,x[xt]+=ht*nt,x[xt+1]+=At*nt}})},S.prototype.calGravity=function(x){var y,A=this,E=A.nodes,D=A.edges,B=D===void 0?[]:D,m=A.nodeMap,f=A.width,W=A.height,X=A.center,z=A.gravity,U=A.degreesMap,j=A.centripetalOptions;if(E)for(var V=E.length,J=0;J<V;J++){var Q=2*J,et=m[E[J].id],ut=et.data.layout.force.mass,it=ut===void 0?1:ut,yt=0,ft=0,Bt=z,St=U[et.id],Et=St.in,Z=St.out,q=St.all,bt=(y=A.getCenter)===null||y===void 0?void 0:y.call(A,et,q);if(bt){var Ct=bt[0],nt=bt[1],ht=bt[2];yt=et.x-Ct,ft=et.y-nt,Bt=ht}else yt=et.x-X[0],ft=et.y-X[1];if(Bt&&(x[Q]-=Bt*yt/it,x[Q+1]-=Bt*ft/it),j){var At=j.leaf,Ot=j.single,xt=j.others,Dt=j.center,Yt=(Dt==null?void 0:Dt(et,E,B,f,W))||{x:0,y:0,centerStrength:0},ie=Yt.x,re=Yt.y,Pt=Yt.centerStrength;if(!(0,M.isNumber)(ie)||!(0,M.isNumber)(re))continue;var ee=(et.x-ie)/it,ce=(et.y-re)/it;if(Pt&&(x[Q]-=Pt*ee,x[Q+1]-=Pt*ce),q===0){var Ut=Ot(et);if(!Ut)continue;x[Q]-=Ut*ee,x[Q+1]-=Ut*ce;continue}if(Et===0||Z===0){var te=At(et,E,B);if(!te)continue;x[Q]-=te*ee,x[Q+1]-=te*ce;continue}var ye=xt(et);if(!ye)continue;x[Q]-=ye*ee,x[Q+1]-=ye*ce}}},S.prototype.updateVelocity=function(x,y,A){var E=this,D=E.nodes,B=E.damping,m=E.maxSpeed;D!=null&&D.length&&D.forEach(function(f,W){var X=(y[2*W]+x[2*W]*A)*B||.01,z=(y[2*W+1]+x[2*W+1]*A)*B||.01,U=Math.sqrt(X*X+z*z);if(U>m){var j=m/U;X=j*X,z=j*z}y[2*W]=X,y[2*W+1]=z})},S.prototype.updatePosition=function(x,y){var A=this,E=A.nodes,D=A.distanceThresholdMode,B=A.nodeMap;if(!(E!=null&&E.length)){this.judgingDistance=0;return}var m=0;D==="max"?A.judgingDistance=-1/0:D==="min"&&(A.judgingDistance=1/0),E.forEach(function(f,W){var X=B[f.id];if((0,M.isNumber)(f.fx)&&(0,M.isNumber)(f.fy)){f.x=f.fx,f.y=f.fy,X.x=f.x,X.y=f.y;return}var z=x[2*W]*y,U=x[2*W+1]*y;f.x+=z,f.y+=U,X.x=f.x,X.y=f.y;var j=Math.sqrt(z*z+U*U);switch(D){case"max":A.judgingDistance<j&&(A.judgingDistance=j);break;case"min":A.judgingDistance>j&&(A.judgingDistance=j);break;default:m=m+j;break}}),(!D||D==="mean")&&(A.judgingDistance=m/E.length)},S.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},S.prototype.destroy=function(){var x=this;x.stop(),x.tick=null,x.nodes=null,x.edges=null,x.destroyed=!0},S.prototype.getType=function(){return"force2"},S.prototype.getSameTypeLeafMap=function(){var x=this,y=x.nodeClusterBy,A=x.nodes,E=x.edges,D=x.nodeMap,B=x.degreesMap;if(A!=null&&A.length){var m={};return A.forEach(function(f,W){var X=B[f.id].all;X===1&&(m[f.id]=(0,M.getCoreNodeAndRelativeLeafNodes)("leaf",f,E,y,B,D))}),m}},S}(w.Base);G.Force2Layout=p},19712:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(){function g(R){this.id=R.id||0,this.rx=R.rx,this.ry=R.ry,this.fx=0,this.fy=0,this.mass=R.mass,this.degree=R.degree,this.g=R.g||0}return g.prototype.distanceTo=function(R){var w=this.rx-R.rx,M=this.ry-R.ry;return Math.hypot(w,M)},g.prototype.setPos=function(R,w){this.rx=R,this.ry=w},g.prototype.resetForce=function(){this.fx=0,this.fy=0},g.prototype.addForce=function(R){var w=R.rx-this.rx,M=R.ry-this.ry,P=Math.hypot(w,M);P=P<1e-4?1e-4:P;var L=this.g*(this.degree+1)*(R.degree+1)/P;this.fx+=L*w/P,this.fy+=L*M/P},g.prototype.in=function(R){return R.contains(this.rx,this.ry)},g.prototype.add=function(R){var w=this.mass+R.mass,M=(this.rx*this.mass+R.rx*R.mass)/w,P=(this.ry*this.mass+R.ry*R.mass)/w,L=this.degree+R.degree,p={rx:M,ry:P,mass:w,degree:L};return new g(p)},g}();G.default=_},148564:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var S=function(x,y){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(A[D]=E[D])},S(x,y)};return function(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");S(x,y);function A(){this.constructor=x}x.prototype=y===null?Object.create(y):(A.prototype=y.prototype,new A)}}(),R=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(G,"__esModule",{value:!0}),G.ForceAtlas2Layout=void 0;var w=_(762329),M=_(449784),P=R(_(19712)),L=R(_(851638)),p=R(_(762732)),b=function(S){g(x,S);function x(y){var A=S.call(this)||this;return A.center=[0,0],A.width=300,A.height=300,A.nodes=[],A.edges=[],A.kr=5,A.kg=1,A.mode="normal",A.preventOverlap=!1,A.dissuadeHubs=!1,A.barnesHut=void 0,A.maxIteration=0,A.ks=.1,A.ksmax=10,A.tao=.1,A.onLayoutEnd=function(){},A.prune=void 0,A.updateCfg(y),A}return x.prototype.getDefaultCfg=function(){return{}},x.prototype.execute=function(){var y=this,A=y.nodes,E=y.onLayoutEnd,D=y.prune,B=y.maxIteration;!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight);for(var m=[],f=A.length,W=0;W<f;W+=1){var X=A[W],z=10,U=10;(0,M.isNumber)(X.size)&&(z=X.size,U=X.size),(0,M.isArray)(X.size)?(isNaN(X.size[0])||(z=X.size[0]),isNaN(X.size[1])||(U=X.size[1])):(0,M.isObject)(X.size)&&(z=X.size.width,U=X.size.height),y.getWidth&&!isNaN(y.getWidth(X))&&(U=y.getWidth(X)),y.getHeight&&!isNaN(y.getHeight(X))&&(z=y.getHeight(X));var j=Math.max(z,U);m.push(j)}y.barnesHut===void 0&&f>250&&(y.barnesHut=!0),y.prune===void 0&&f>100&&(y.prune=!0),this.maxIteration===0&&!y.prune?(B=250,f<=200&&f>100?B=1e3:f>200&&(B=1200),this.maxIteration=B):this.maxIteration===0&&D&&(B=100,f<=200&&f>100?B=500:f>200&&(B=950),this.maxIteration=B),y.kr||(y.kr=50,f>100&&f<=500?y.kr=20:f>500&&(y.kr=1)),y.kg||(y.kg=20,f>100&&f<=500?y.kg=10:f>500&&(y.kg=1)),this.nodes=y.updateNodesByForces(m),E()},x.prototype.updateNodesByForces=function(y){for(var A=this,E=A.edges,D=A.maxIteration,B=A.nodes,m=E.filter(function(St){var Et=(0,M.getEdgeTerminal)(St,"source"),Z=(0,M.getEdgeTerminal)(St,"target");return Et!==Z}),f=B.length,W=m.length,X=[],z={},U={},j=[],V=0;V<f;V+=1)z[B[V].id]=V,X[V]=0,(B[V].x===void 0||isNaN(B[V].x))&&(B[V].x=Math.random()*1e3),(B[V].y===void 0||isNaN(B[V].y))&&(B[V].y=Math.random()*1e3),j.push({x:B[V].x,y:B[V].y});for(var V=0;V<W;V+=1){for(var J=void 0,Q=void 0,et=0,ut=0,it=0;it<f;it+=1){var yt=(0,M.getEdgeTerminal)(m[V],"source"),ft=(0,M.getEdgeTerminal)(m[V],"target");B[it].id===yt?(J=B[it],et=it):B[it].id===ft&&(Q=B[it],ut=it),U[V]={sourceIdx:et,targetIdx:ut}}J&&(X[z[J.id]]+=1),Q&&(X[z[Q.id]]+=1)}var Bt=D;if(B=this.iterate(Bt,z,U,W,X,y),A.prune){for(var it=0;it<W;it+=1)X[U[it].sourceIdx]<=1?(B[U[it].sourceIdx].x=B[U[it].targetIdx].x,B[U[it].sourceIdx].y=B[U[it].targetIdx].y):X[U[it].targetIdx]<=1&&(B[U[it].targetIdx].x=B[U[it].sourceIdx].x,B[U[it].targetIdx].y=B[U[it].sourceIdx].y);A.prune=!1,A.barnesHut=!1,Bt=100,B=this.iterate(Bt,z,U,W,X,y)}return B},x.prototype.iterate=function(y,A,E,D,B,m){for(var f=this,W=f.nodes,X=f.kr,z=f.preventOverlap,U=f.barnesHut,j=W.length,V=0,J=100,Q=y,et=50,ut=[],it=[],yt=[],ft=0;ft<j;ft+=1)if(ut[2*ft]=0,ut[2*ft+1]=0,U){var Bt={id:ft,rx:W[ft].x,ry:W[ft].y,mass:1,g:X,degree:B[ft]};yt[ft]=new P.default(Bt)}for(;Q>0;){for(var ft=0;ft<j;ft+=1)it[2*ft]=ut[2*ft],it[2*ft+1]=ut[2*ft+1],ut[2*ft]=0,ut[2*ft+1]=0;ut=this.getAttrForces(Q,et,D,A,E,B,m,ut),U&&(z&&Q>et||!z)?ut=this.getOptRepGraForces(ut,yt,B):ut=this.getRepGraForces(Q,et,ut,J,m,B);var St=this.updatePos(ut,it,V,B);W=St.nodes,V=St.sg,Q--,f.tick&&f.tick()}return W},x.prototype.getAttrForces=function(y,A,E,D,B,m,f,W){for(var X=this,z=X.nodes,U=X.preventOverlap,j=X.dissuadeHubs,V=X.mode,J=X.prune,Q=0;Q<E;Q+=1){var et=z[B[Q].sourceIdx],ut=B[Q].sourceIdx,it=z[B[Q].targetIdx],yt=B[Q].targetIdx;if(!(J&&(m[ut]<=1||m[yt]<=1))){var ft=[it.x-et.x,it.y-et.y],Bt=Math.hypot(ft[0],ft[1]);Bt=Bt<1e-4?1e-4:Bt,ft[0]=ft[0]/Bt,ft[1]=ft[1]/Bt,U&&y<A&&(Bt=Bt-f[ut]-f[yt]);var St=Bt,Et=St;V==="linlog"&&(St=Math.log(1+Bt),Et=St),j&&(St=Bt/m[ut],Et=Bt/m[yt]),U&&y<A&&Bt<=0?(St=0,Et=0):U&&y<A&&Bt>0&&(St=Bt,Et=Bt),W[2*D[et.id]]+=St*ft[0],W[2*D[it.id]]-=Et*ft[0],W[2*D[et.id]+1]+=St*ft[1],W[2*D[it.id]+1]-=Et*ft[1]}}return W},x.prototype.getRepGraForces=function(y,A,E,D,B,m){for(var f=this,W=f.nodes,X=f.preventOverlap,z=f.kr,U=f.kg,j=f.center,V=f.prune,J=W.length,Q=0;Q<J;Q+=1){for(var et=Q+1;et<J;et+=1)if(!(V&&(m[Q]<=1||m[et]<=1))){var ut=[W[et].x-W[Q].x,W[et].y-W[Q].y],it=Math.hypot(ut[0],ut[1]);it=it<1e-4?1e-4:it,ut[0]=ut[0]/it,ut[1]=ut[1]/it,X&&y<A&&(it=it-B[Q]-B[et]);var yt=z*(m[Q]+1)*(m[et]+1)/it;X&&y<A&&it<0?yt=D*(m[Q]+1)*(m[et]+1):X&&y<A&&it===0?yt=0:X&&y<A&&it>0&&(yt=z*(m[Q]+1)*(m[et]+1)/it),E[2*Q]-=yt*ut[0],E[2*et]+=yt*ut[0],E[2*Q+1]-=yt*ut[1],E[2*et+1]+=yt*ut[1]}var ft=[W[Q].x-j[0],W[Q].y-j[1]],Bt=Math.hypot(ft[0],ft[1]);ft[0]=ft[0]/Bt,ft[1]=ft[1]/Bt;var St=U*(m[Q]+1);E[2*Q]-=St*ft[0],E[2*Q+1]-=St*ft[1]}return E},x.prototype.getOptRepGraForces=function(y,A,E){for(var D=this,B=D.nodes,m=D.kg,f=D.center,W=D.prune,X=B.length,z=9e10,U=-9e10,j=9e10,V=-9e10,J=0;J<X;J+=1)W&&E[J]<=1||(A[J].setPos(B[J].x,B[J].y),B[J].x>=U&&(U=B[J].x),B[J].x<=z&&(z=B[J].x),B[J].y>=V&&(V=B[J].y),B[J].y<=j&&(j=B[J].y));for(var Q=Math.max(U-z,V-j),et={xmid:(U+z)/2,ymid:(V+j)/2,length:Q,massCenter:f,mass:X},ut=new L.default(et),it=new p.default(ut),J=0;J<X;J+=1)W&&E[J]<=1||A[J].in(ut)&&it.insert(A[J]);for(var J=0;J<X;J+=1)if(!(W&&E[J]<=1)){A[J].resetForce(),it.updateForce(A[J]),y[2*J]-=A[J].fx,y[2*J+1]-=A[J].fy;var yt=[B[J].x-f[0],B[J].y-f[1]],ft=Math.hypot(yt[0],yt[1]);ft=ft<1e-4?1e-4:ft,yt[0]=yt[0]/ft,yt[1]=yt[1]/ft;var Bt=m*(E[J]+1);y[2*J]-=Bt*yt[0],y[2*J+1]-=Bt*yt[1]}return y},x.prototype.updatePos=function(y,A,E,D){for(var B=this,m=B.nodes,f=B.ks,W=B.tao,X=B.prune,z=B.ksmax,U=m.length,j=[],V=[],J=0,Q=0,et=0;et<U;et+=1)if(!(X&&D[et]<=1)){var ut=[y[2*et]-A[2*et],y[2*et+1]-A[2*et+1]],it=Math.hypot(ut[0],ut[1]),yt=[y[2*et]+A[2*et],y[2*et+1]+A[2*et+1]],ft=Math.hypot(yt[0],yt[1]);j[et]=it,V[et]=ft/2,J+=(D[et]+1)*j[et],Q+=(D[et]+1)*V[et]}var Bt=E;E=W*Q/J,Bt!==0&&(E=E>1.5*Bt?1.5*Bt:E);for(var et=0;et<U;et+=1)if(!(X&&D[et]<=1)&&!((0,M.isNumber)(m[et].fx)&&(0,M.isNumber)(m[et].fy))){var St=f*E/(1+E*Math.sqrt(j[et])),Et=Math.hypot(y[2*et],y[2*et+1]);Et=Et<1e-4?1e-4:Et;var Z=z/Et;St=St>Z?Z:St;var q=St*y[2*et],bt=St*y[2*et+1];m[et].x+=q,m[et].y+=bt}return{nodes:m,sg:E}},x}(w.Base);G.ForceAtlas2Layout=b},851638:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(){function g(R){this.xmid=R.xmid,this.ymid=R.ymid,this.length=R.length,this.massCenter=R.massCenter||[0,0],this.mass=R.mass||1}return g.prototype.getLength=function(){return this.length},g.prototype.contains=function(R,w){var M=this.length/2;return R<=this.xmid+M&&R>=this.xmid-M&&w<=this.ymid+M&&w>=this.ymid-M},g.prototype.NW=function(){var R=this.xmid-this.length/4,w=this.ymid+this.length/4,M=this.length/2,P={xmid:R,ymid:w,length:M},L=new g(P);return L},g.prototype.NE=function(){var R=this.xmid+this.length/4,w=this.ymid+this.length/4,M=this.length/2,P={xmid:R,ymid:w,length:M},L=new g(P);return L},g.prototype.SW=function(){var R=this.xmid-this.length/4,w=this.ymid-this.length/4,M=this.length/2,P={xmid:R,ymid:w,length:M},L=new g(P);return L},g.prototype.SE=function(){var R=this.xmid+this.length/4,w=this.ymid-this.length/4,M=this.length/2,P={xmid:R,ymid:w,length:M},L=new g(P);return L},g}();G.default=_},762732:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(){function g(R){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,R!=null&&(this.quad=R)}return g.prototype.insert=function(R){if(this.body==null){this.body=R;return}this._isExternal()?(this.quad&&(this.NW=new g(this.quad.NW()),this.NE=new g(this.quad.NE()),this.SW=new g(this.quad.SW()),this.SE=new g(this.quad.SE())),this._putBody(this.body),this._putBody(R),this.body=this.body.add(R)):(this.body=this.body.add(R),this._putBody(R))},g.prototype._putBody=function(R){this.quad&&(R.in(this.quad.NW())&&this.NW?this.NW.insert(R):R.in(this.quad.NE())&&this.NE?this.NE.insert(R):R.in(this.quad.SW())&&this.SW?this.SW.insert(R):R.in(this.quad.SE())&&this.SE&&this.SE.insert(R))},g.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},g.prototype.updateForce=function(R){if(!(this.body==null||R===this.body))if(this._isExternal())R.addForce(this.body);else{var w=this.quad?this.quad.getLength():0,M=this.body.distanceTo(R);w/M<this.theta?R.addForce(this.body):(this.NW&&this.NW.updateForce(R),this.NE&&this.NE.updateForce(R),this.SW&&this.SW.updateForce(R),this.SE&&this.SE.updateForce(R))}},g}();G.default=_},880374:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var L=function(p,b){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(S[y]=x[y])},L(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");L(p,b);function S(){this.constructor=p}p.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.FruchtermanLayout=void 0;var R=_(762329),w=_(449784),M=800,P=function(L){g(p,L);function p(b){var S=L.call(this)||this;return S.maxIteration=1e3,S.workerEnabled=!1,S.gravity=10,S.speed=5,S.clustering=!1,S.clusterGravity=10,S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.onLayoutEnd=function(){},S.tick=function(){},S.animate=!0,S.updateCfg(b),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},p.prototype.execute=function(){var b=this,S,x,y=this,A=y.nodes;if(y.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(y.timeInterval),!A||A.length===0){(S=y.onLayoutEnd)===null||S===void 0||S.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var E=y.center;if(A.length===1){A[0].x=E[0],A[0].y=E[1],(x=y.onLayoutEnd)===null||x===void 0||x.call(y);return}var D={},B={};return A.forEach(function(m,f){(0,w.isNumber)(m.x)||(m.x=Math.random()*b.width),(0,w.isNumber)(m.y)||(m.y=Math.random()*b.height),D[m.id]=m,B[m.id]=f}),y.nodeMap=D,y.nodeIdxMap=B,y.run()},p.prototype.run=function(){var b,S=this,x=S.nodes;if(x){var y=S.edges,A=S.maxIteration,E=S.workerEnabled,D=S.clustering,B=S.animate,m={};if(D&&x.forEach(function(X){m[X.cluster]===void 0&&(m[X.cluster]={name:X.cluster,cx:0,cy:0,count:0})}),E||!B){for(var f=0;f<A;f++)S.runOneStep(m);(b=S.onLayoutEnd)===null||b===void 0||b.call(S)}else{if(typeof window=="undefined")return;var W=0;this.timeInterval=window.setInterval(function(){var X;S.runOneStep(m),W++,W>=A&&((X=S.onLayoutEnd)===null||X===void 0||X.call(S),window.clearInterval(S.timeInterval))},0)}return{nodes:x,edges:y}}},p.prototype.runOneStep=function(b){var S,x=this,y=x.nodes;if(y){var A=x.edges,E=x.center,D=x.gravity,B=x.speed,m=x.clustering,f=x.height*x.width,W=Math.sqrt(f)/10,X=f/(y.length+1),z=Math.sqrt(X),U=[];if(y.forEach(function(J,Q){U[Q]={x:0,y:0}}),x.applyCalculate(y,A,U,z,X),m){for(var j in b)b[j].cx=0,b[j].cy=0,b[j].count=0;y.forEach(function(J){var Q=b[J.cluster];(0,w.isNumber)(J.x)&&(Q.cx+=J.x),(0,w.isNumber)(J.y)&&(Q.cy+=J.y),Q.count++});for(var j in b)b[j].cx/=b[j].count,b[j].cy/=b[j].count;var V=x.clusterGravity||D;y.forEach(function(J,Q){if(!(!(0,w.isNumber)(J.x)||!(0,w.isNumber)(J.y))){var et=b[J.cluster],ut=Math.sqrt((J.x-et.cx)*(J.x-et.cx)+(J.y-et.cy)*(J.y-et.cy)),it=z*V;U[Q].x-=it*(J.x-et.cx)/ut,U[Q].y-=it*(J.y-et.cy)/ut}})}y.forEach(function(J,Q){if(!(!(0,w.isNumber)(J.x)||!(0,w.isNumber)(J.y))){var et=.01*z*D;U[Q].x-=et*(J.x-E[0]),U[Q].y-=et*(J.y-E[1])}}),y.forEach(function(J,Q){if((0,w.isNumber)(J.fx)&&(0,w.isNumber)(J.fy)){J.x=J.fx,J.y=J.fy;return}if(!(!(0,w.isNumber)(J.x)||!(0,w.isNumber)(J.y))){var et=Math.sqrt(U[Q].x*U[Q].x+U[Q].y*U[Q].y);if(et>0){var ut=Math.min(W*(B/M),et);J.x+=U[Q].x/et*ut,J.y+=U[Q].y/et*ut}}}),(S=x.tick)===null||S===void 0||S.call(x)}},p.prototype.applyCalculate=function(b,S,x,y,A){var E=this;E.calRepulsive(b,x,A),S&&E.calAttractive(S,x,y)},p.prototype.calRepulsive=function(b,S,x){b.forEach(function(y,A){S[A]={x:0,y:0},b.forEach(function(E,D){if(A!==D&&!(!(0,w.isNumber)(y.x)||!(0,w.isNumber)(E.x)||!(0,w.isNumber)(y.y)||!(0,w.isNumber)(E.y))){var B=y.x-E.x,m=y.y-E.y,f=B*B+m*m;if(f===0){f=1;var W=A>D?1:-1;B=.01*W,m=.01*W}var X=x/f;S[A].x+=B*X,S[A].y+=m*X}})})},p.prototype.calAttractive=function(b,S,x){var y=this;b.forEach(function(A){var E=(0,w.getEdgeTerminal)(A,"source"),D=(0,w.getEdgeTerminal)(A,"target");if(!(!E||!D)){var B=y.nodeIdxMap[E],m=y.nodeIdxMap[D];if(B!==m){var f=y.nodeMap[E],W=y.nodeMap[D];if(!(!(0,w.isNumber)(W.x)||!(0,w.isNumber)(f.x)||!(0,w.isNumber)(W.y)||!(0,w.isNumber)(f.y))){var X=W.x-f.x,z=W.y-f.y,U=Math.sqrt(X*X+z*z),j=U*U/x;S[m].x-=X/U*j,S[m].y-=z/U*j,S[B].x+=X/U*j,S[B].y+=z/U*j}}}})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var b=this;b.stop(),b.tick=null,b.nodes=null,b.edges=null,b.destroyed=!0},p.prototype.getType=function(){return"fruchterman"},p}(R.Base);G.FruchtermanLayout=P},113653:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var L=function(p,b){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(S[y]=x[y])},L(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");L(p,b);function S(){this.constructor=p}p.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.GForceLayout=void 0;var R=_(762329),w=_(449784),M=function(L,p){var b;return L?(0,w.isNumber)(L)?b=function(S){return L}:b=L:b=function(S){return p||1},b},P=function(L){g(p,L);function p(b){var S=L.call(this)||this;return S.maxIteration=500,S.workerEnabled=!1,S.edgeStrength=200,S.nodeStrength=1e3,S.coulombDisScale=.005,S.damping=.9,S.maxSpeed=1e3,S.minMovement=.5,S.interval=.02,S.factor=1,S.linkDistance=1,S.gravity=10,S.preventOverlap=!0,S.collideStrength=1,S.tick=function(){},S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.animate=!0,S.updateCfg(b),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},p.prototype.execute=function(){var b,S,x=this,y=x.nodes;if(x.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(x.timeInterval),!y||y.length===0){(b=x.onLayoutEnd)===null||b===void 0||b.call(x);return}!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]);var A=x.center;if(y.length===1){y[0].x=A[0],y[0].y=A[1],(S=x.onLayoutEnd)===null||S===void 0||S.call(x);return}var E={},D={};y.forEach(function(z,U){(0,w.isNumber)(z.x)||(z.x=Math.random()*x.width),(0,w.isNumber)(z.y)||(z.y=Math.random()*x.height),E[z.id]=z,D[z.id]=U}),x.nodeMap=E,x.nodeIdxMap=D,x.linkDistance=M(x.linkDistance,1),x.nodeStrength=M(x.nodeStrength,1),x.edgeStrength=M(x.edgeStrength,1);var B=x.nodeSize,m;if(x.preventOverlap){var f=x.nodeSpacing,W;(0,w.isNumber)(f)?W=function(){return f}:(0,w.isFunction)(f)?W=f:W=function(){return 0},B?(0,w.isArray)(B)?m=function(z){return Math.max(B[0],B[1])+W(z)}:m=function(z){return B+W(z)}:m=function(z){return z.size?(0,w.isArray)(z.size)?Math.max(z.size[0],z.size[1])+W(z):(0,w.isObject)(z.size)?Math.max(z.size.width,z.size.height)+W(z):z.size+W(z):10+W(z)}}x.nodeSize=m;var X=x.edges;x.degrees=(0,w.getDegree)(y.length,x.nodeIdxMap,X),x.getMass||(x.getMass=function(z){var U=z.mass||x.degrees[x.nodeIdxMap[z.id]].all||1;return U}),x.run()},p.prototype.run=function(){var b,S=this,x=S.maxIteration,y=S.nodes,A=S.workerEnabled,E=S.minMovement,D=S.animate;if(y)if(A||!D){for(var B=0;B<x;B++){var m=S.runOneStep(B);if(S.reachMoveThreshold(y,m,E))break}(b=S.onLayoutEnd)===null||b===void 0||b.call(S)}else{if(typeof window=="undefined")return;var f=0;this.timeInterval=window.setInterval(function(){var W,X;if(y){var z=S.runOneStep(f)||[];S.reachMoveThreshold(y,z,E)&&((W=S.onLayoutEnd)===null||W===void 0||W.call(S),window.clearInterval(S.timeInterval)),f++,f>=x&&((X=S.onLayoutEnd)===null||X===void 0||X.call(S),window.clearInterval(S.timeInterval))}},0)}},p.prototype.reachMoveThreshold=function(b,S,x){var y=0;return b.forEach(function(A,E){var D=A.x-S[E].x,B=A.y-S[E].y;y+=Math.sqrt(D*D+B*B)}),y/=b.length,y<x},p.prototype.runOneStep=function(b){var S,x=this,y=x.nodes,A=x.edges,E=[],D=[];if(y){y.forEach(function(f,W){E[2*W]=0,E[2*W+1]=0,D[2*W]=0,D[2*W+1]=0}),x.calRepulsive(E,y),A&&x.calAttractive(E,A),x.calGravity(E,y);var B=Math.max(.02,x.interval-b*.002);x.updateVelocity(E,D,B,y);var m=[];return y.forEach(function(f){m.push({x:f.x,y:f.y})}),x.updatePosition(D,B,y),(S=x.tick)===null||S===void 0||S.call(x),m}},p.prototype.calRepulsive=function(b,S){var x=this,y=x.getMass,A=x.factor,E=x.coulombDisScale,D=x.preventOverlap,B=x.collideStrength,m=B===void 0?1:B,f=x.nodeStrength,W=x.nodeSize;S.forEach(function(X,z){var U=y?y(X):1;S.forEach(function(j,V){if(!(z>=V)){var J=X.x-j.x,Q=X.y-j.y;J===0&&Q===0&&(J=Math.random()*.01,Q=Math.random()*.01);var et=J*J+Q*Q,ut=Math.sqrt(et),it=(ut+.1)*E,yt=J/ut,ft=Q/ut,Bt=(f(X)+f(j))*.5*A/(it*it),St=y?y(j):1;if(b[2*z]+=yt*Bt,b[2*z+1]+=ft*Bt,b[2*V]-=yt*Bt,b[2*V+1]-=ft*Bt,D&&(W(X)+W(j))/2>ut){var Et=m*(f(X)+f(j))*.5/et;b[2*z]+=yt*Et/U,b[2*z+1]+=ft*Et/U,b[2*V]-=yt*Et/St,b[2*V+1]-=ft*Et/St}}})})},p.prototype.calAttractive=function(b,S){var x=this,y=x.nodeMap,A=x.nodeIdxMap,E=x.linkDistance,D=x.edgeStrength,B=x.nodeSize,m=x.getMass;S.forEach(function(f,W){var X=(0,w.getEdgeTerminal)(f,"source"),z=(0,w.getEdgeTerminal)(f,"target"),U=y[X],j=y[z],V=j.x-U.x,J=j.y-U.y;V===0&&J===0&&(V=Math.random()*.01,J=Math.random()*.01);var Q=Math.sqrt(V*V+J*J),et=V/Q,ut=J/Q,it=E(f,U,j)||1+(B(U)+B(j)||0)/2,yt=it-Q,ft=yt*D(f),Bt=A[X],St=A[z],Et=m?m(U):1,Z=m?m(j):1;b[2*Bt]-=et*ft/Et,b[2*Bt+1]-=ut*ft/Et,b[2*St]+=et*ft/Z,b[2*St+1]+=ut*ft/Z})},p.prototype.calGravity=function(b,S){for(var x=this,y=x.center,A=x.gravity,E=x.degrees,D=S.length,B=0;B<D;B++){var m=S[B],f=m.x-y[0],W=m.y-y[1],X=A;if(x.getCenter){var z=x.getCenter(m,E[B].all);z&&(0,w.isNumber)(z[0])&&(0,w.isNumber)(z[1])&&(0,w.isNumber)(z[2])&&(f=m.x-z[0],W=m.y-z[1],X=z[2])}X&&(b[2*B]-=X*f,b[2*B+1]-=X*W)}},p.prototype.updateVelocity=function(b,S,x,y){var A=this,E=x*A.damping;y.forEach(function(D,B){var m=b[2*B]*E||.01,f=b[2*B+1]*E||.01,W=Math.sqrt(m*m+f*f);if(W>A.maxSpeed){var X=A.maxSpeed/W;m=X*m,f=X*f}S[2*B]=m,S[2*B+1]=f})},p.prototype.updatePosition=function(b,S,x){x.forEach(function(y,A){if((0,w.isNumber)(y.fx)&&(0,w.isNumber)(y.fy)){y.x=y.fx,y.y=y.fy;return}var E=b[2*A]*S,D=b[2*A+1]*S;y.x+=E,y.y+=D})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var b=this;b.stop(),b.tick=null,b.nodes=null,b.edges=null,b.destroyed=!0},p.prototype.getType=function(){return"gForce"},p}(R.Base);G.GForceLayout=P},687745:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var y=function(A,E){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,B){D.__proto__=B}||function(D,B){for(var m in B)Object.prototype.hasOwnProperty.call(B,m)&&(D[m]=B[m])},y(A,E)};return function(A,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");y(A,E);function D(){this.constructor=A}A.prototype=E===null?Object.create(E):(D.prototype=E.prototype,new D)}}(),R=this&&this.__awaiter||function(y,A,E,D){function B(m){return m instanceof E?m:new E(function(f){f(m)})}return new(E||(E=Promise))(function(m,f){function W(U){try{z(D.next(U))}catch(j){f(j)}}function X(U){try{z(D.throw(U))}catch(j){f(j)}}function z(U){U.done?m(U.value):B(U.value).then(W,X)}z((D=D.apply(y,A||[])).next())})},w=this&&this.__generator||function(y,A){var E={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},D,B,m,f;return f={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function W(z){return function(U){return X([z,U])}}function X(z){if(D)throw new TypeError("Generator is already executing.");for(;f&&(f=0,z[0]&&(E=0)),E;)try{if(D=1,B&&(m=z[0]&2?B.return:z[0]?B.throw||((m=B.return)&&m.call(B),0):B.next)&&!(m=m.call(B,z[1])).done)return m;switch(B=0,m&&(z=[z[0]&2,m.value]),z[0]){case 0:case 1:m=z;break;case 4:return E.label++,{value:z[1],done:!1};case 5:E.label++,B=z[1],z=[0];continue;case 7:z=E.ops.pop(),E.trys.pop();continue;default:if(m=E.trys,!(m=m.length>0&&m[m.length-1])&&(z[0]===6||z[0]===2)){E=0;continue}if(z[0]===3&&(!m||z[1]>m[0]&&z[1]<m[3])){E.label=z[1];break}if(z[0]===6&&E.label<m[1]){E.label=m[1],m=z;break}if(m&&E.label<m[2]){E.label=m[2],E.ops.push(z);break}m[2]&&E.ops.pop(),E.trys.pop();continue}z=A.call(y,E)}catch(U){z=[6,U],B=0}finally{D=m=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}};Object.defineProperty(G,"__esModule",{value:!0}),G.FruchtermanGPULayout=void 0;var M=_(762329),P=_(449784),L=_(901029),p=_(248835),b=_(108574),S=_(416470),x=function(y){g(A,y);function A(E){var D=y.call(this)||this;return D.maxIteration=1e3,D.gravity=10,D.speed=1,D.clustering=!1,D.clusterField="cluster",D.clusterGravity=10,D.workerEnabled=!1,D.nodes=[],D.edges=[],D.width=300,D.height=300,D.nodeMap={},D.nodeIdxMap={},D.updateCfg(E),D}return A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},A.prototype.execute=function(){return R(this,void 0,void 0,function(){var E,D,B,m,f,W=this;return w(this,function(X){switch(X.label){case 0:return E=this,D=E.nodes,!D||D.length===0?(E.onLayoutEnd&&E.onLayoutEnd(),[2]):(!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]),B=E.center,D.length===1?(D[0].x=B[0],D[0].y=B[1],E.onLayoutEnd&&E.onLayoutEnd(),[2]):(m={},f={},D.forEach(function(z,U){(0,P.isNumber)(z.x)||(z.x=Math.random()*W.width),(0,P.isNumber)(z.y)||(z.y=Math.random()*W.height),m[z.id]=z,f[z.id]=U}),E.nodeMap=m,E.nodeIdxMap=f,[4,E.run()]));case 1:return X.sent(),[2]}})})},A.prototype.executeWithWorker=function(E,D){return R(this,void 0,void 0,function(){var B,m,f,W,X,z=this;return w(this,function(U){switch(U.label){case 0:return B=this,m=B.nodes,f=B.center,!m||m.length===0?[2]:m.length===1?(m[0].x=f[0],m[0].y=f[1],[2]):(W={},X={},m.forEach(function(j,V){(0,P.isNumber)(j.x)||(j.x=Math.random()*z.width),(0,P.isNumber)(j.y)||(j.y=Math.random()*z.height),W[j.id]=j,X[j.id]=V}),B.nodeMap=W,B.nodeIdxMap=X,[4,B.run(E,D)]);case 1:return U.sent(),[2]}})})},A.prototype.run=function(E,D){return R(this,void 0,void 0,function(){var B,m,f,W,X,z,U,j,V,J,Q,et,ut,it,yt,ft,Bt,St,Et,Z,q,bt,Ct,nt,ht,At,Ot=this;return w(this,function(xt){switch(xt.label){case 0:for(B=this,m=B.nodes,f=B.edges,W=B.maxIteration,X=B.center,z=B.height*B.width,U=Math.sqrt(z)/10,j=z/(m.length+1),V=Math.sqrt(j),J=B.speed,Q=B.clustering,et=(0,p.attributesToTextureData)([B.clusterField],m),ut=et.array,it=et.count,m.forEach(function(Dt,Yt){var ie=0,re=0;(0,P.isNumber)(Dt.fx)&&(0,P.isNumber)(Dt.fy)&&(ie=Dt.fx||.001,re=Dt.fy||.001),ut[4*Yt+1]=ie,ut[4*Yt+2]=re}),yt=m.length,ft=(0,p.buildTextureData)(m,f),Bt=ft.maxEdgePerVetex,St=ft.array,Et=B.workerEnabled,Et?Z=L.World.create({canvas:E,engineOptions:{supportCompute:!0}}):Z=L.World.create({engineOptions:{supportCompute:!0}}),q=B.onLayoutEnd,bt=[],Ct=0;Ct<it;Ct++)bt.push(0,0,0,0);return nt=Z.createKernel(b.fruchtermanBundle).setDispatch([yt,1,1]).setBinding({u_Data:St,u_K:V,u_K2:j,u_Gravity:B.gravity,u_ClusterGravity:B.clusterGravity||B.gravity||1,u_Speed:J,u_MaxDisplace:U,u_Clustering:Q?1:0,u_Center:X,u_AttributeArray:ut,u_ClusterCenters:bt,MAX_EDGE_PER_VERTEX:Bt,VERTEX_COUNT:yt}),Q&&(ht=Z.createKernel(b.clusterBundle).setDispatch([it,1,1]).setBinding({u_Data:St,u_NodeAttributes:ut,u_ClusterCenters:bt,VERTEX_COUNT:yt,CLUSTER_COUNT:it})),At=function(){return R(Ot,void 0,void 0,function(){var Dt,Yt;return w(this,function(ie){switch(ie.label){case 0:Dt=0,ie.label=1;case 1:return Dt<W?[4,nt.execute()]:[3,6];case 2:return ie.sent(),Q?(ht.setBinding({u_Data:nt}),[4,ht.execute()]):[3,4];case 3:ie.sent(),nt.setBinding({u_ClusterCenters:ht}),ie.label=4;case 4:nt.setBinding({u_MaxDisplace:U*=.99}),ie.label=5;case 5:return Dt++,[3,1];case 6:return[4,nt.getOutput()];case 7:return Yt=ie.sent(),E?D.postMessage({type:S.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Yt}):m.forEach(function(re,Pt){var ee=Yt[4*Pt],ce=Yt[4*Pt+1];re.x=ee,re.y=ce}),q&&q(),[2]}})})},[4,At()];case 1:return xt.sent(),[2]}})})},A.prototype.getType=function(){return"fruchterman-gpu"},A}(M.Base);G.FruchtermanGPULayout=x},108574:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.clusterBundle=G.clusterCode=G.fruchtermanBundle=G.fruchtermanCode=void 0,G.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,G.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',G.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,G.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},785194:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var A=function(E,D){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,m){B.__proto__=m}||function(B,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(B[f]=m[f])},A(E,D)};return function(E,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");A(E,D);function B(){this.constructor=E}E.prototype=D===null?Object.create(D):(B.prototype=D.prototype,new B)}}(),R=this&&this.__awaiter||function(A,E,D,B){function m(f){return f instanceof D?f:new D(function(W){W(f)})}return new(D||(D=Promise))(function(f,W){function X(j){try{U(B.next(j))}catch(V){W(V)}}function z(j){try{U(B.throw(j))}catch(V){W(V)}}function U(j){j.done?f(j.value):m(j.value).then(X,z)}U((B=B.apply(A,E||[])).next())})},w=this&&this.__generator||function(A,E){var D={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},B,m,f,W;return W={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function X(U){return function(j){return z([U,j])}}function z(U){if(B)throw new TypeError("Generator is already executing.");for(;W&&(W=0,U[0]&&(D=0)),D;)try{if(B=1,m&&(f=U[0]&2?m.return:U[0]?m.throw||((f=m.return)&&f.call(m),0):m.next)&&!(f=f.call(m,U[1])).done)return f;switch(m=0,f&&(U=[U[0]&2,f.value]),U[0]){case 0:case 1:f=U;break;case 4:return D.label++,{value:U[1],done:!1};case 5:D.label++,m=U[1],U=[0];continue;case 7:U=D.ops.pop(),D.trys.pop();continue;default:if(f=D.trys,!(f=f.length>0&&f[f.length-1])&&(U[0]===6||U[0]===2)){D=0;continue}if(U[0]===3&&(!f||U[1]>f[0]&&U[1]<f[3])){D.label=U[1];break}if(U[0]===6&&D.label<f[1]){D.label=f[1],f=U;break}if(f&&D.label<f[2]){D.label=f[2],D.ops.push(U);break}f[2]&&D.ops.pop(),D.trys.pop();continue}U=E.call(A,D)}catch(j){U=[6,j],m=0}finally{B=f=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}};Object.defineProperty(G,"__esModule",{value:!0}),G.GForceGPULayout=void 0;var M=_(762329),P=_(449784),L=_(901029),p=_(248835),b=_(280628),S=_(549762),x=_(416470),y=function(A){g(E,A);function E(D){var B=A.call(this)||this;return B.maxIteration=1e3,B.edgeStrength=200,B.nodeStrength=1e3,B.coulombDisScale=.005,B.damping=.9,B.maxSpeed=1e3,B.minMovement=.5,B.interval=.02,B.factor=1,B.linkDistance=1,B.gravity=10,B.workerEnabled=!1,B.nodes=[],B.edges=[],B.width=300,B.height=300,B.nodeMap={},B.nodeIdxMap={},B.updateCfg(D),B}return E.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},E.prototype.execute=function(){return R(this,void 0,void 0,function(){var D,B,m,f,W;return w(this,function(X){switch(X.label){case 0:return D=this,B=D.nodes,!B||B.length===0?(D.onLayoutEnd&&D.onLayoutEnd(),[2]):(!D.width&&typeof window!="undefined"&&(D.width=window.innerWidth),!D.height&&typeof window!="undefined"&&(D.height=window.innerHeight),D.center||(D.center=[D.width/2,D.height/2]),m=D.center,B.length===1?(B[0].x=m[0],B[0].y=m[1],D.onLayoutEnd&&D.onLayoutEnd(),[2]):(f={},W={},B.forEach(function(z,U){(0,P.isNumber)(z.x)||(z.x=Math.random()*D.width),(0,P.isNumber)(z.y)||(z.y=Math.random()*D.height),f[z.id]=z,W[z.id]=U}),D.nodeMap=f,D.nodeIdxMap=W,D.nodeStrength=(0,p.proccessToFunc)(D.nodeStrength,1),D.edgeStrength=(0,p.proccessToFunc)(D.edgeStrength,1),[4,D.run()]));case 1:return X.sent(),[2]}})})},E.prototype.executeWithWorker=function(D,B){var m=this,f=m.nodes,W=m.center;if(!(!f||f.length===0)){if(f.length===1){f[0].x=W[0],f[0].y=W[1];return}var X={},z={};f.forEach(function(U,j){(0,P.isNumber)(U.x)||(U.x=Math.random()*m.width),(0,P.isNumber)(U.y)||(U.y=Math.random()*m.height),X[U.id]=U,z[U.id]=j}),m.nodeMap=X,m.nodeIdxMap=z,m.nodeStrength=(0,p.proccessToFunc)(m.nodeStrength,1),m.edgeStrength=(0,p.proccessToFunc)(m.edgeStrength,1),m.run(D,B)}},E.prototype.run=function(D,B){return R(this,void 0,void 0,function(){var m,f,W,X,z,U,j,V,J,Q,et,ut,it,yt,ft,Bt,St,Et,Z,q,bt,Ct,nt,ht,At,Ot,xt,Dt=this;return w(this,function(Yt){switch(Yt.label){case 0:for(m=this,f=m.nodes,W=m.edges,X=m.maxIteration,!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),z=f.length,m.linkDistance=(0,p.proccessToFunc)(m.linkDistance),m.edgeStrength=(0,p.proccessToFunc)(m.edgeStrength),U=(0,p.buildTextureDataWithTwoEdgeAttr)(f,W,m.linkDistance,m.edgeStrength),j=U.maxEdgePerVetex,V=U.array,m.degrees=(0,b.getDegree)(f.length,m.nodeIdxMap,W).map(function(ie){return ie.all}),J=[],Q=[],et=[],ut=[],it=[],yt=[],ft=[],m.getMass||(m.getMass=function(ie){return m.degrees[m.nodeIdxMap[ie.id]]||1}),Bt=m.gravity,St=m.center,f.forEach(function(ie,re){J.push(m.getMass(ie)),Q.push(m.nodeStrength(ie)),m.degrees[re]||(m.degrees[re]=0);var Pt=[St[0],St[1],Bt];if(m.getCenter){var ee=m.getCenter(ie,m.degrees[re]);ee&&(0,P.isNumber)(ee[0])&&(0,P.isNumber)(ee[1])&&(0,P.isNumber)(ee[2])&&(Pt=ee)}et.push(Pt[0]),ut.push(Pt[1]),it.push(Pt[2]),(0,P.isNumber)(ie.fx)&&(0,P.isNumber)(ie.fy)?(yt.push(ie.fx||.001),ft.push(ie.fy||.001)):(yt.push(0),ft.push(0))}),Et=(0,p.arrayToTextureData)([J,m.degrees,Q,yt]),Z=(0,p.arrayToTextureData)([et,ut,it,ft]),q=m.workerEnabled,q?bt=L.World.create({canvas:D,engineOptions:{supportCompute:!0}}):bt=L.World.create({engineOptions:{supportCompute:!0}}),Ct=m.onLayoutEnd,nt=[],V.forEach(function(ie){nt.push(ie)}),ht=0;ht<4;ht++)nt.push(0);return At=bt.createKernel(S.gForceBundle).setDispatch([z,1,1]).setBinding({u_Data:V,u_damping:m.damping,u_maxSpeed:m.maxSpeed,u_minMovement:m.minMovement,u_coulombDisScale:m.coulombDisScale,u_factor:m.factor,u_NodeAttributeArray1:Et,u_NodeAttributeArray2:Z,MAX_EDGE_PER_VERTEX:j,VERTEX_COUNT:z,u_AveMovement:nt,u_interval:m.interval}),Ot=bt.createKernel(S.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:V,VERTEX_COUNT:z,u_AveMovement:[0,0,0,0]}),xt=function(){return R(Dt,void 0,void 0,function(){var ie,re,Pt;return w(this,function(ee){switch(ee.label){case 0:ie=0,ee.label=1;case 1:return ie<X?[4,At.execute()]:[3,5];case 2:return ee.sent(),Ot.setBinding({u_Data:At}),[4,Ot.execute()];case 3:ee.sent(),re=Math.max(.02,m.interval-ie*.002),At.setBinding({u_interval:re,u_AveMovement:Ot}),ee.label=4;case 4:return ie++,[3,1];case 5:return[4,At.getOutput()];case 6:return Pt=ee.sent(),D?B.postMessage({type:x.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Pt}):f.forEach(function(ce,Ut){var te=Pt[4*Ut],ye=Pt[4*Ut+1];ce.x=te,ce.y=ye}),Ct&&Ct(),[2]}})})},[4,xt()];case 1:return Yt.sent(),[2]}})})},E.prototype.getType=function(){return"gForce-gpu"},E}(M.Base);G.GForceGPULayout=y},549762:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.aveMovementBundle=G.aveMovementCode=G.gForceBundle=G.gForceCode=void 0,G.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,G.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',G.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,G.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},694414:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var P=function(L,p){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(b[x]=S[x])},P(L,p)};return function(L,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");P(L,p);function b(){this.constructor=L}L.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.GridLayout=void 0;var R=_(449784),w=_(762329),M=function(P){g(L,P);function L(p){var b=P.call(this)||this;return b.begin=[0,0],b.preventOverlap=!0,b.preventOverlapPadding=10,b.condense=!1,b.sortBy="degree",b.nodes=[],b.edges=[],b.width=300,b.height=300,b.row=0,b.col=0,b.cellWidth=0,b.cellHeight=0,b.cellUsed={},b.id2manPos={},b.onLayoutEnd=function(){},b.updateCfg(p),b}return L.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},L.prototype.execute=function(){var p=this,b=p.nodes,S=p.edges,x=p.begin,y=b.length;if(y===0)return p.onLayoutEnd&&p.onLayoutEnd(),{nodes:b,edges:S};if(y===1)return b[0].x=x[0],b[0].y=x[1],p.onLayoutEnd&&p.onLayoutEnd(),{nodes:b,edges:S};var A=p.sortBy,E=p.width,D=p.height,B=p.condense,m=p.preventOverlapPadding,f=p.preventOverlap,W=p.nodeSpacing,X=p.nodeSize,z=[];b.forEach(function(Et){z.push(Et)});var U={};if(z.forEach(function(Et,Z){U[Et.id]=Z}),(A==="degree"||!(0,R.isString)(A)||z[0][A]===void 0)&&(A="degree",(0,R.isNaN)(b[0].degree))){var j=(0,R.getDegree)(z.length,U,S);z.forEach(function(Et,Z){Et.degree=j[Z].all})}z.sort(function(Et,Z){return Z[A]-Et[A]}),!E&&typeof window!="undefined"&&(E=window.innerWidth),!D&&typeof window!="undefined"&&(D=window.innerHeight);var V=p.rows,J=p.cols!=null?p.cols:p.columns;if(p.cells=y,V!=null&&J!=null?(p.rows=V,p.cols=J):V!=null&&J==null?(p.rows=V,p.cols=Math.ceil(p.cells/p.rows)):V==null&&J!=null?(p.cols=J,p.rows=Math.ceil(p.cells/p.cols)):(p.splits=Math.sqrt(p.cells*p.height/p.width),p.rows=Math.round(p.splits),p.cols=Math.round(p.width/p.height*p.splits)),p.rows=Math.max(p.rows,1),p.cols=Math.max(p.cols,1),p.cols*p.rows>p.cells){var Q=p.small(),et=p.large();(Q-1)*et>=p.cells?p.small(Q-1):(et-1)*Q>=p.cells&&p.large(et-1)}else for(;p.cols*p.rows<p.cells;){var Q=p.small(),et=p.large();(et+1)*Q>=p.cells?p.large(et+1):p.small(Q+1)}if(p.cellWidth=E/p.cols,p.cellHeight=D/p.rows,B&&(p.cellWidth=0,p.cellHeight=0),f||W){var ut=(0,R.getFuncByUnknownType)(10,W),it=(0,R.getFuncByUnknownType)(30,X,!1);z.forEach(function(Et){(!Et.x||!Et.y)&&(Et.x=0,Et.y=0);var Z=it(Et)||30,q,bt;(0,R.isArray)(Z)?(q=Z[0],bt=Z[1]):(q=Z,bt=Z);var Ct=ut!==void 0?ut(Et):m,nt=q+Ct,ht=bt+Ct;p.cellWidth=Math.max(p.cellWidth,nt),p.cellHeight=Math.max(p.cellHeight,ht)})}p.cellUsed={},p.row=0,p.col=0,p.id2manPos={};for(var yt=0;yt<z.length;yt++){var ft=z[yt],Bt=void 0;if(p.position&&(Bt=p.position(ft)),Bt&&(Bt.row!==void 0||Bt.col!==void 0)){var St={row:Bt.row,col:Bt.col};if(St.col===void 0)for(St.col=0;p.used(St.row,St.col);)St.col++;else if(St.row===void 0)for(St.row=0;p.used(St.row,St.col);)St.row++;p.id2manPos[ft.id]=St,p.use(St.row,St.col)}p.getPos(ft)}return p.onLayoutEnd&&p.onLayoutEnd(),{edges:S,nodes:z}},L.prototype.small=function(p){var b=this,S,x=b.rows||5,y=b.cols||5;if(p==null)S=Math.min(x,y);else{var A=Math.min(x,y);A===b.rows?b.rows=p:b.cols=p}return S},L.prototype.large=function(p){var b=this,S,x=b.rows||5,y=b.cols||5;if(p==null)S=Math.max(x,y);else{var A=Math.max(x,y);A===b.rows?b.rows=p:b.cols=p}return S},L.prototype.used=function(p,b){var S=this;return S.cellUsed["c-".concat(p,"-").concat(b)]||!1},L.prototype.use=function(p,b){var S=this;S.cellUsed["c-".concat(p,"-").concat(b)]=!0},L.prototype.moveToNextCell=function(){var p=this,b=p.cols||5;p.col++,p.col>=b&&(p.col=0,p.row++)},L.prototype.getPos=function(p){var b=this,S=b.begin,x=b.cellWidth,y=b.cellHeight,A,E,D=b.id2manPos[p.id];if(D)A=D.col*x+x/2+S[0],E=D.row*y+y/2+S[1];else{for(;b.used(b.row,b.col);)b.moveToNextCell();A=b.col*x+x/2+S[0],E=b.row*y+y/2+S[1],b.use(b.row,b.col),b.moveToNextCell()}p.x=A,p.y=E},L.prototype.getType=function(){return"grid"},L}(w.Base);G.GridLayout=M},702584:function(Ne,G,_){"use strict";var g=this&&this.__createBinding||(Object.create?function(j,V,J,Q){Q===void 0&&(Q=J);var et=Object.getOwnPropertyDescriptor(V,J);(!et||("get"in et?!V.__esModule:et.writable||et.configurable))&&(et={enumerable:!0,get:function(){return V[J]}}),Object.defineProperty(j,Q,et)}:function(j,V,J,Q){Q===void 0&&(Q=J),j[Q]=V[J]}),R=this&&this.__exportStar||function(j,V){for(var J in j)J!=="default"&&!Object.prototype.hasOwnProperty.call(V,J)&&g(V,j,J)};Object.defineProperty(G,"__esModule",{value:!0}),G.ERLayout=G.ForceAtlas2Layout=G.ComboCombinedLayout=G.ComboForceLayout=G.GForceGPULayout=G.FruchtermanGPULayout=G.FruchtermanLayout=G.MDSLayout=G.ConcentricLayout=G.RadialLayout=G.DagreCompoundLayout=G.DagreLayout=G.CircularLayout=G.ForceLayout=G.Force2Layout=G.GForceLayout=G.RandomLayout=G.GridLayout=G.Layouts=G.Layout=void 0;var w=_(694414);Object.defineProperty(G,"GridLayout",{enumerable:!0,get:function(){return w.GridLayout}});var M=_(539711);Object.defineProperty(G,"RandomLayout",{enumerable:!0,get:function(){return M.RandomLayout}});var P=_(113653);Object.defineProperty(G,"GForceLayout",{enumerable:!0,get:function(){return P.GForceLayout}});var L=_(306740);Object.defineProperty(G,"Force2Layout",{enumerable:!0,get:function(){return L.Force2Layout}});var p=_(885717);Object.defineProperty(G,"ForceLayout",{enumerable:!0,get:function(){return p.ForceLayout}});var b=_(964885);Object.defineProperty(G,"CircularLayout",{enumerable:!0,get:function(){return b.CircularLayout}});var S=_(920171);Object.defineProperty(G,"DagreLayout",{enumerable:!0,get:function(){return S.DagreLayout}});var x=_(177057);Object.defineProperty(G,"DagreCompoundLayout",{enumerable:!0,get:function(){return x.DagreCompoundLayout}});var y=_(847944);Object.defineProperty(G,"RadialLayout",{enumerable:!0,get:function(){return y.RadialLayout}});var A=_(843281);Object.defineProperty(G,"ConcentricLayout",{enumerable:!0,get:function(){return A.ConcentricLayout}});var E=_(352899);Object.defineProperty(G,"MDSLayout",{enumerable:!0,get:function(){return E.MDSLayout}});var D=_(880374);Object.defineProperty(G,"FruchtermanLayout",{enumerable:!0,get:function(){return D.FruchtermanLayout}});var B=_(687745);Object.defineProperty(G,"FruchtermanGPULayout",{enumerable:!0,get:function(){return B.FruchtermanGPULayout}});var m=_(785194);Object.defineProperty(G,"GForceGPULayout",{enumerable:!0,get:function(){return m.GForceGPULayout}});var f=_(366590);Object.defineProperty(G,"ComboForceLayout",{enumerable:!0,get:function(){return f.ComboForceLayout}});var W=_(263861);Object.defineProperty(G,"ComboCombinedLayout",{enumerable:!0,get:function(){return W.ComboCombinedLayout}});var X=_(148564);Object.defineProperty(G,"ForceAtlas2Layout",{enumerable:!0,get:function(){return X.ForceAtlas2Layout}});var z=_(290441);Object.defineProperty(G,"ERLayout",{enumerable:!0,get:function(){return z.ERLayout}});var U=_(842875);Object.defineProperty(G,"Layout",{enumerable:!0,get:function(){return U.Layout}}),Object.defineProperty(G,"Layouts",{enumerable:!0,get:function(){return U.Layouts}}),R(_(932867),G)},842875:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.Layouts=G.Layout=void 0;var g=_(695326),R=_(694414),w=_(539711),M=_(306740),P=_(113653),L=_(885717),p=_(964885),b=_(920171),S=_(847944),x=_(843281),y=_(352899),A=_(880374),E=_(687745),D=_(785194),B=_(366590),m=_(263861),f=_(148564),W=_(290441),X=_(177057),z=_(449784),U=function(){function j(V){var J=(0,g.getLayoutByName)(V.type);this.layoutInstance=new J(V)}return j.prototype.layout=function(V){return this.layoutInstance.layout(V)},j.prototype.updateCfg=function(V){this.layoutInstance.updateCfg(V)},j.prototype.init=function(V){this.correctLayers(V.nodes),this.layoutInstance.init(V)},j.prototype.correctLayers=function(V){if(V!=null&&V.length){var J=1/0,Q=[];if(V.forEach(function(ut){(0,z.isString)(ut.layer)&&(ut.layer=parseInt(ut.layer,10)),!(ut.layer===void 0||isNaN(ut.layer))&&(Q.push(ut),ut.layer<J&&(J=ut.layer))}),J<=0){var et=Math.abs(J)+1;Q.forEach(function(ut){return ut.layer+=et})}}},j.prototype.execute=function(){this.layoutInstance.execute()},j.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},j.prototype.destroy=function(){return this.layoutInstance.destroy()},j}();G.Layout=U,G.Layouts={force:L.ForceLayout,fruchterman:A.FruchtermanLayout,forceAtlas2:f.ForceAtlas2Layout,gForce:P.GForceLayout,force2:M.Force2Layout,dagre:b.DagreLayout,dagreCompound:X.DagreCompoundLayout,circular:p.CircularLayout,radial:S.RadialLayout,concentric:x.ConcentricLayout,grid:R.GridLayout,mds:y.MDSLayout,comboForce:B.ComboForceLayout,comboCombined:m.ComboCombinedLayout,random:w.RandomLayout,"gForce-gpu":D.GForceGPULayout,"fruchterman-gpu":E.FruchtermanGPULayout,er:W.ERLayout}},352899:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var L=function(p,b){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(S[y]=x[y])},L(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");L(p,b);function S(){this.constructor=p}p.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.MDSLayout=void 0;var R=_(405237),w=_(449784),M=_(762329),P=function(L){g(p,L);function p(b){var S=L.call(this)||this;return S.center=[0,0],S.linkDistance=50,S.nodes=[],S.edges=[],S.onLayoutEnd=function(){},S.updateCfg(b),S}return p.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},p.prototype.execute=function(){var b=this,S=b.nodes,x=b.edges,y=x===void 0?[]:x,A=b.center;if(!S||S.length===0){b.onLayoutEnd&&b.onLayoutEnd();return}if(S.length===1){S[0].x=A[0],S[0].y=A[1],b.onLayoutEnd&&b.onLayoutEnd();return}var E=b.linkDistance,D=(0,w.getAdjMatrix)({nodes:S,edges:y},!1),B=(0,w.floydWarshall)(D);b.handleInfinity(B);var m=(0,w.scaleMatrix)(B,E);b.scaledDistances=m;var f=b.runMDS();return b.positions=f,f.forEach(function(W,X){S[X].x=W[0]+A[0],S[X].y=W[1]+A[1]}),b.onLayoutEnd&&b.onLayoutEnd(),{nodes:S,edges:y}},p.prototype.runMDS=function(){var b=this,S=2,x=b.scaledDistances,y=R.Matrix.mul(R.Matrix.pow(x,2),-.5),A=y.mean("row"),E=y.mean("column"),D=y.mean();y.add(D).subRowVector(A).subColumnVector(E);var B=new R.SingularValueDecomposition(y),m=R.Matrix.sqrt(B.diagonalMatrix).diagonal();return B.leftSingularVectors.toJSON().map(function(f){return R.Matrix.mul([f],[m]).toJSON()[0].splice(0,S)})},p.prototype.handleInfinity=function(b){var S=-999999;b.forEach(function(x){x.forEach(function(y){y!==1/0&&S<y&&(S=y)})}),b.forEach(function(x,y){x.forEach(function(A,E){A===1/0&&(b[y][E]=S)})})},p.prototype.getType=function(){return"mds"},p}(M.Base);G.MDSLayout=P},847944:function(Ne,G,_){"use strict";var g=this&&this.__createBinding||(Object.create?function(w,M,P,L){L===void 0&&(L=P);var p=Object.getOwnPropertyDescriptor(M,P);(!p||("get"in p?!M.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return M[P]}}),Object.defineProperty(w,L,p)}:function(w,M,P,L){L===void 0&&(L=P),w[L]=M[P]}),R=this&&this.__exportStar||function(w,M){for(var P in w)P!=="default"&&!Object.prototype.hasOwnProperty.call(M,P)&&g(M,w,P)};Object.defineProperty(G,"__esModule",{value:!0}),R(_(255974),G)},366082:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var g=_(405237),R=function(){function w(M){this.distances=M.distances,this.dimension=M.dimension||2,this.linkDistance=M.linkDistance}return w.prototype.layout=function(){var M=this,P=M.dimension,L=M.distances,p=M.linkDistance;try{var b=g.Matrix.mul(g.Matrix.pow(L,2),-.5),S=b.mean("row"),x=b.mean("column"),y=b.mean();b.add(y).subRowVector(S).subColumnVector(x);var A=new g.SingularValueDecomposition(b),E=g.Matrix.sqrt(A.diagonalMatrix).diagonal();return A.leftSingularVectors.toJSON().map(function(W){return g.Matrix.mul([W],[E]).toJSON()[0].splice(0,P)})}catch(W){for(var D=[],B=0;B<L.length;B++){var m=Math.random()*p,f=Math.random()*p;D.push([m,f])}return D}},w}();G.default=R},255974:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var y=function(A,E){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,B){D.__proto__=B}||function(D,B){for(var m in B)Object.prototype.hasOwnProperty.call(B,m)&&(D[m]=B[m])},y(A,E)};return function(A,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");y(A,E);function D(){this.constructor=A}A.prototype=E===null?Object.create(E):(D.prototype=E.prototype,new D)}}(),R=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(G,"__esModule",{value:!0}),G.RadialLayout=void 0;var w=_(449784),M=_(762329),P=R(_(366082)),L=R(_(706290));function p(y){for(var A=y.length,E=y[0].length,D=[],B=0;B<A;B++){for(var m=[],f=0;f<E;f++)y[B][f]!==0?m.push(1/(y[B][f]*y[B][f])):m.push(0);D.push(m)}return D}function b(y,A){var E=-1;return y.forEach(function(D,B){D.id===A&&(E=B)}),E}function S(y,A){return Math.sqrt((y[0]-A[0])*(y[0]-A[0])+(y[1]-A[1])*(y[1]-A[1]))}var x=function(y){g(A,y);function A(E){var D=y.call(this)||this;return D.maxIteration=1e3,D.focusNode=null,D.unitRadius=null,D.linkDistance=50,D.preventOverlap=!1,D.strictRadial=!0,D.maxPreventOverlapIteration=200,D.sortStrength=10,D.nodes=[],D.edges=[],D.updateCfg(E),D}return A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},A.prototype.execute=function(){var E=this,D=E.nodes,B=E.edges||[];if(!D||D.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]);var m=E.center;if(D.length===1){D[0].x=m[0],D[0].y=m[1],E.onLayoutEnd&&E.onLayoutEnd();return}var f=E.linkDistance,W=null;if((0,w.isString)(E.focusNode)){for(var X=!1,z=0;z<D.length;z++)D[z].id===E.focusNode&&(W=D[z],E.focusNode=W,X=!0,z=D.length);X||(W=null)}else W=E.focusNode;W||(W=D[0],E.focusNode=W);var U=b(D,W.id);U<0&&(U=0),E.focusIndex=U;var j=(0,w.getAdjMatrix)({nodes:D,edges:B},!1),V=(0,w.floydWarshall)(j),J=E.maxToFocus(V,U);E.handleInfinity(V,U,J+1),E.distances=V;var Q=V[U],et=E.width||500,ut=E.height||500,it=et-m[0]>m[0]?m[0]:et-m[0],yt=ut-m[1]>m[1]?m[1]:ut-m[1];it===0&&(it=et/2),yt===0&&(yt=ut/2);var ft=yt>it?it:yt,Bt=Math.max.apply(Math,Q),St=[];Q.forEach(function(ie,re){E.unitRadius||(E.unitRadius=ft/Bt),St[re]=ie*E.unitRadius}),E.radii=St;var Et=E.eIdealDisMatrix();E.eIdealDistances=Et;var Z=p(Et);E.weights=Z;var q=new P.default({linkDistance:f,distances:Et}),bt=q.layout();bt.forEach(function(ie){(0,w.isNaN)(ie[0])&&(ie[0]=Math.random()*f),(0,w.isNaN)(ie[1])&&(ie[1]=Math.random()*f)}),E.positions=bt,bt.forEach(function(ie,re){D[re].x=ie[0]+m[0],D[re].y=ie[1]+m[1]}),bt.forEach(function(ie){ie[0]-=bt[U][0],ie[1]-=bt[U][1]}),E.run();var Ct=E.preventOverlap,nt=E.nodeSize,ht,At=E.strictRadial;if(Ct){var Ot=E.nodeSpacing,xt;(0,w.isNumber)(Ot)?xt=function(){return Ot}:(0,w.isFunction)(Ot)?xt=Ot:xt=function(){return 0},nt?(0,w.isArray)(nt)?ht=function(ie){var re=nt[0]>nt[1]?nt[0]:nt[1];return re+xt(ie)}:ht=function(ie){return nt+xt(ie)}:ht=function(ie){if(ie.size){if((0,w.isArray)(ie.size)){var re=ie.size[0]>ie.size[1]?ie.size[0]:ie.size[1];return re+xt(ie)}if((0,w.isObject)(ie.size)){var re=ie.size.width>ie.size.height?ie.size.width:ie.size.height;return re+xt(ie)}return ie.size+xt(ie)}return 10+xt(ie)};var Dt={nodes:D,nodeSizeFunc:ht,adjMatrix:j,positions:bt,radii:St,height:ut,width:et,strictRadial:At,focusID:U,iterations:E.maxPreventOverlapIteration||200,k:bt.length/4.5},Yt=new L.default(Dt);bt=Yt.layout()}return bt.forEach(function(ie,re){D[re].x=ie[0]+m[0],D[re].y=ie[1]+m[1]}),E.onLayoutEnd&&E.onLayoutEnd(),{nodes:D,edges:B}},A.prototype.run=function(){for(var E=this,D=E.maxIteration,B=E.positions||[],m=E.weights||[],f=E.eIdealDistances||[],W=E.radii||[],X=0;X<=D;X++){var z=X/D;E.oneIteration(z,B,W,f,m)}},A.prototype.oneIteration=function(E,D,B,m,f){var W=this,X=1-E,z=W.focusIndex;D.forEach(function(U,j){var V=S(U,[0,0]),J=V===0?0:1/V;if(j!==z){var Q=0,et=0,ut=0;D.forEach(function(yt,ft){if(j!==ft){var Bt=S(U,yt),St=Bt===0?0:1/Bt,Et=m[ft][j];ut+=f[j][ft],Q+=f[j][ft]*(yt[0]+Et*(U[0]-yt[0])*St),et+=f[j][ft]*(yt[1]+Et*(U[1]-yt[1])*St)}});var it=B[j]===0?0:1/B[j];ut*=X,ut+=E*it*it,Q*=X,Q+=E*it*U[0]*J,U[0]=Q/ut,et*=X,et+=E*it*U[1]*J,U[1]=et/ut}})},A.prototype.eIdealDisMatrix=function(){var E=this,D=E.nodes;if(!D)return[];var B=E.distances,m=E.linkDistance,f=E.radii||[],W=E.unitRadius||50,X=[];return B&&B.forEach(function(z,U){var j=[];z.forEach(function(V,J){if(U===J)j.push(0);else if(f[U]===f[J])if(E.sortBy==="data")j.push(V*(Math.abs(U-J)*E.sortStrength)/(f[U]/W));else if(E.sortBy){var Q=D[U][E.sortBy]||0,et=D[J][E.sortBy]||0;(0,w.isString)(Q)&&(Q=Q.charCodeAt(0)),(0,w.isString)(et)&&(et=et.charCodeAt(0)),j.push(V*(Math.abs(Q-et)*E.sortStrength)/(f[U]/W))}else j.push(V*m/(f[U]/W));else{var ut=(m+W)/2;j.push(V*ut)}}),X.push(j)}),X},A.prototype.handleInfinity=function(E,D,B){for(var m=E.length,f=0;f<m;f++)if(E[D][f]===1/0){E[D][f]=B,E[f][D]=B;for(var W=0;W<m;W++)E[f][W]!==1/0&&E[D][W]===1/0&&(E[D][W]=B+E[f][W],E[W][D]=B+E[f][W])}for(var f=0;f<m;f++)if(f!==D){for(var W=0;W<m;W++)if(E[f][W]===1/0){var X=Math.abs(E[D][f]-E[D][W]);X=X===0?1:X,E[f][W]=X}}},A.prototype.maxToFocus=function(E,D){for(var B=0,m=0;m<E[D].length;m++)E[D][m]!==1/0&&(B=E[D][m]>B?E[D][m]:B);return B},A.prototype.getType=function(){return"radial"},A}(M.Base);G.RadialLayout=x},706290:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=800,g=function(){function R(w){this.disp=[],this.positions=w.positions,this.adjMatrix=w.adjMatrix,this.focusID=w.focusID,this.radii=w.radii,this.iterations=w.iterations||10,this.height=w.height||10,this.width=w.width||10,this.speed=w.speed||100,this.gravity=w.gravity||10,this.nodeSizeFunc=w.nodeSizeFunc,this.k=w.k||5,this.strictRadial=w.strictRadial,this.nodes=w.nodes}return R.prototype.layout=function(){var w=this,M=w.positions,P=[],L=w.iterations,p=w.width/10;w.maxDisplace=p,w.disp=P;for(var b=0;b<L;b++)M.forEach(function(S,x){P[x]={x:0,y:0}}),w.getRepulsion(),w.updatePositions();return M},R.prototype.getRepulsion=function(){var w=this,M=w.positions,P=w.nodes,L=w.disp,p=w.k,b=w.radii||[];M.forEach(function(S,x){L[x]={x:0,y:0},M.forEach(function(y,A){if(x!==A&&b[x]===b[A]){var E=S[0]-y[0],D=S[1]-y[1],B=Math.sqrt(E*E+D*D);if(B===0){B=1;var m=x>A?1:-1;E=.01*m,D=.01*m}if(B<w.nodeSizeFunc(P[x])/2+w.nodeSizeFunc(P[A])/2){var f=p*p/B;L[x].x+=E/B*f,L[x].y+=D/B*f}}})})},R.prototype.updatePositions=function(){var w=this,M=w.positions,P=w.disp,L=w.speed,p=w.strictRadial,b=w.focusID,S=w.maxDisplace||w.width/10;p&&P.forEach(function(y,A){var E=M[A][0]-M[b][0],D=M[A][1]-M[b][1],B=Math.sqrt(E*E+D*D),m=D/B,f=-E/B,W=Math.sqrt(y.x*y.x+y.y*y.y),X=Math.acos((m*y.x+f*y.y)/W);X>Math.PI/2&&(X-=Math.PI/2,m*=-1,f*=-1);var z=Math.cos(X)*W;y.x=m*z,y.y=f*z});var x=w.radii;M.forEach(function(y,A){if(A!==b){var E=Math.sqrt(P[A].x*P[A].x+P[A].y*P[A].y);if(E>0&&A!==b){var D=Math.min(S*(L/_),E);if(y[0]+=P[A].x/E*D,y[1]+=P[A].y/E*D,p){var B=y[0]-M[b][0],m=y[1]-M[b][1],f=Math.sqrt(B*B+m*m);B=B/f*x[A],m=m/f*x[A],y[0]=M[b][0]+B,y[1]=M[b][1]+m}}}})},R}();G.default=g},539711:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var M=function(P,L){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,b){p.__proto__=b}||function(p,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(p[S]=b[S])},M(P,L)};return function(P,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");M(P,L);function p(){this.constructor=P}P.prototype=L===null?Object.create(L):(p.prototype=L.prototype,new p)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.RandomLayout=void 0;var R=_(762329),w=function(M){g(P,M);function P(L){var p=M.call(this)||this;return p.center=[0,0],p.width=300,p.height=300,p.nodes=[],p.edges=[],p.onLayoutEnd=function(){},p.updateCfg(L),p}return P.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},P.prototype.execute=function(){var L=this,p=L.nodes,b=.9,S=L.center;return!L.width&&typeof window!="undefined"&&(L.width=window.innerWidth),!L.height&&typeof window!="undefined"&&(L.height=window.innerHeight),p&&p.forEach(function(x){x.x=(Math.random()-.5)*b*L.width+S[0],x.y=(Math.random()-.5)*b*L.height+S[1]}),L.onLayoutEnd&&L.onLayoutEnd(),{nodes:p,edges:this.edges}},P.prototype.getType=function(){return"random"},P}(R.Base);G.RandomLayout=w},932867:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0})},695326:function(Ne,G,_){"use strict";var g=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(y[E]=A[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function y(){this.constructor=S}S.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.getLayoutByName=G.unRegisterLayout=G.registerLayout=void 0;var R=_(762329),w=_(449784),M=new Map,P=function(b,S){if(M.get(b)&&console.warn("The layout with the name ".concat(b," exists already, it will be overridden")),(0,w.isObject)(S)){var x=function(y){g(A,y);function A(E){var D=this,B;D=y.call(this)||this;var m=D,f={},W=Object.assign({},m.getDefaultCfg(),((B=S.getDefaultCfg)===null||B===void 0?void 0:B.call(S))||{});return Object.assign(f,W,S,E),Object.keys(f).forEach(function(X){var z=f[X];m[X]=z}),D}return A}(R.Base);M.set(b,x)}else M.set(b,S);return M.get(b)};G.registerLayout=P;var L=function(b){M.has(b)&&M.delete(b)};G.unRegisterLayout=L;var p=function(b){return M.has(b)?M.get(b):null};G.getLayoutByName=p},185087:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.isArray=void 0,G.isArray=Array.isArray},578732:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getFuncByUnknownType=G.getFunc=G.isFunction=void 0;var g=_(449784),R=_(330627),w=function(L){return typeof L=="function"};G.isFunction=w;var M=function(L,p,b){var S;return b?S=b:(0,R.isNumber)(L)?S=function(){return L}:S=function(){return p},S};G.getFunc=M;var P=function(L,p,b){return b===void 0&&(b=!0),!p&&p!==0?function(S){return S.size?(0,g.isArray)(S.size)?S.size[0]>S.size[1]?S.size[0]:S.size[1]:(0,g.isObject)(S.size)?S.size.width>S.size.height?S.size.width:S.size.height:S.size:L}:(0,G.isFunction)(p)?p:(0,R.isNumber)(p)?function(){return p}:(0,g.isArray)(p)?function(){if(b){var S=Math.max.apply(Math,p);return isNaN(S)?L:S}return p}:(0,g.isObject)(p)?function(){if(b){var S=Math.max(p.width,p.height);return isNaN(S)?L:S}return[p.width,p.height]}:function(){return L}};G.getFuncByUnknownType=P},248835:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.arrayToTextureData=G.attributesToTextureData=G.buildTextureDataWithTwoEdgeAttr=G.buildTextureData=G.proccessToFunc=void 0;var g=_(449784),R=_(280628),w=function(b,S){var x;return b?(0,g.isNumber)(b)?x=function(){return b}:x=b:x=function(){return S||1},x};G.proccessToFunc=w;var M=function(b,S){var x=[],y=[],A={},E=0;for(E=0;E<b.length;E++){var D=b[E];A[D.id]=E,x.push(D.x),x.push(D.y),x.push(0),x.push(0),y.push([])}for(E=0;E<S.length;E++){var B=S[E],m=(0,R.getEdgeTerminal)(B,"source"),f=(0,R.getEdgeTerminal)(B,"target");!isNaN(A[m])&&!isNaN(A[f])&&(y[A[m]].push(A[f]),y[A[f]].push(A[m]))}var W=0;for(E=0;E<b.length;E++){var X=x.length,z=y[E],U=z.length;x[E*4+2]=X,x[E*4+3]=U,W=Math.max(W,U);for(var j=0;j<U;++j){var V=z[j];x.push(+V)}}for(;x.length%4!==0;)x.push(0);return{maxEdgePerVetex:W,array:new Float32Array(x)}};G.buildTextureData=M;var P=function(b,S,x,y){var A=[],E=[],D={},B=0;for(B=0;B<b.length;B++){var m=b[B];D[m.id]=B,A.push(m.x),A.push(m.y),A.push(0),A.push(0),E.push([])}for(B=0;B<S.length;B++){var f=S[B],W=(0,R.getEdgeTerminal)(f,"source"),X=(0,R.getEdgeTerminal)(f,"target");E[D[W]].push(D[X]),E[D[W]].push(x(f)),E[D[W]].push(y(f)),E[D[W]].push(0),E[D[X]].push(D[W]),E[D[X]].push(x(f)),E[D[X]].push(y(f)),E[D[X]].push(0)}var z=0;for(B=0;B<b.length;B++){var U=A.length,j=E[B],V=j.length;A[B*4+2]=U+1048576*V/4,A[B*4+3]=0,z=Math.max(z,V/4);for(var J=0;J<V;++J){var Q=j[J];A.push(+Q)}}for(;A.length%4!==0;)A.push(0);return{maxEdgePerVetex:z,array:new Float32Array(A)}};G.buildTextureDataWithTwoEdgeAttr=P;var L=function(b,S){var x=[],y=b.length,A={};return S.forEach(function(E){b.forEach(function(D,B){if(A[E[D]]===void 0&&(A[E[D]]=Object.keys(A).length),x.push(A[E[D]]),B===y-1)for(;x.length%4!==0;)x.push(0)})}),{array:new Float32Array(x),count:Object.keys(A).length}};G.attributesToTextureData=L;var p=function(b){for(var S=[],x=b.length,y=b[0].length,A=function(D){b.forEach(function(B,m){if(S.push(B[D]),m===x-1)for(;S.length%4!==0;)S.push(0)})},E=0;E<y;E++)A(E);return new Float32Array(S)};G.arrayToTextureData=p},449784:function(Ne,G,_){"use strict";var g=this&&this.__createBinding||(Object.create?function(w,M,P,L){L===void 0&&(L=P);var p=Object.getOwnPropertyDescriptor(M,P);(!p||("get"in p?!M.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return M[P]}}),Object.defineProperty(w,L,p)}:function(w,M,P,L){L===void 0&&(L=P),w[L]=M[P]}),R=this&&this.__exportStar||function(w,M){for(var P in w)P!=="default"&&!Object.prototype.hasOwnProperty.call(M,P)&&g(M,w,P)};Object.defineProperty(G,"__esModule",{value:!0}),R(_(708055),G),R(_(185087),G),R(_(330627),G),R(_(280628),G),R(_(898130),G),R(_(578732),G)},280628:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getCoreNodeAndRelativeLeafNodes=G.getAvgNodePosition=G.getLayoutBBox=G.traverseTreeUp=G.scaleMatrix=G.getAdjMatrix=G.floydWarshall=G.getDegreeMap=G.getDegree=G.getEdgeTerminal=void 0;var g=_(185087),R=_(330627),w=_(898130),M=function(W,X){var z=W[X];return(0,w.isObject)(z)?z.cell:z};G.getEdgeTerminal=M;var P=function(W,X,z){for(var U=[],j=0;j<W;j++)U[j]={in:0,out:0,all:0};return z&&z.forEach(function(V){var J=(0,G.getEdgeTerminal)(V,"source"),Q=(0,G.getEdgeTerminal)(V,"target");J&&U[X[J]]&&(U[X[J]].out+=1,U[X[J]].all+=1),Q&&U[X[Q]]&&(U[X[Q]].in+=1,U[X[Q]].all+=1)}),U};G.getDegree=P;var L=function(W,X){var z={};return W.forEach(function(U){z[U.id]={in:0,out:0,all:0}}),X&&X.forEach(function(U){var j=(0,G.getEdgeTerminal)(U,"source"),V=(0,G.getEdgeTerminal)(U,"target");j&&(z[j].out+=1,z[j].all+=1),V&&(z[V].in+=1,z[V].all+=1)}),z};G.getDegreeMap=L;var p=function(W){for(var X=[],z=W.length,U=0;U<z;U+=1){X[U]=[];for(var j=0;j<z;j+=1)U===j?X[U][j]=0:W[U][j]===0||!W[U][j]?X[U][j]=1/0:X[U][j]=W[U][j]}for(var V=0;V<z;V+=1)for(var U=0;U<z;U+=1)for(var j=0;j<z;j+=1)X[U][j]>X[U][V]+X[V][j]&&(X[U][j]=X[U][V]+X[V][j]);return X};G.floydWarshall=p;var b=function(W,X){var z=W.nodes,U=W.edges,j=[],V={};if(!z)throw new Error("invalid nodes data!");return z&&z.forEach(function(J,Q){V[J.id]=Q;var et=[];j.push(et)}),U==null||U.forEach(function(J){var Q=(0,G.getEdgeTerminal)(J,"source"),et=(0,G.getEdgeTerminal)(J,"target"),ut=V[Q],it=V[et];ut===void 0||it===void 0||(j[ut][it]=1,X||(j[it][ut]=1))}),j};G.getAdjMatrix=b;var S=function(W,X){var z=[];return W.forEach(function(U){var j=[];U.forEach(function(V){j.push(V*X)}),z.push(j)}),z};G.scaleMatrix=S;var x=function(W,X){if(W&&W.children){for(var z=W.children.length-1;z>=0;z--)if(!x(W.children[z],X))return}return!!X(W)},y=function(W,X){typeof X=="function"&&x(W,X)};G.traverseTreeUp=y;var A=function(W){var X=1/0,z=1/0,U=-1/0,j=-1/0;return W.forEach(function(V){var J=V.size;(0,g.isArray)(J)?J.length===1&&(J=[J[0],J[0]]):(0,R.isNumber)(J)?J=[J,J]:(J===void 0||isNaN(J))&&(J=[30,30]);var Q=[J[0]/2,J[1]/2],et=V.x-Q[0],ut=V.x+Q[0],it=V.y-Q[1],yt=V.y+Q[1];X>et&&(X=et),z>it&&(z=it),U<ut&&(U=ut),j<yt&&(j=yt)}),{minX:X,minY:z,maxX:U,maxY:j}};G.getLayoutBBox=A;var E=function(W){var X={x:0,y:0};W.forEach(function(U){X.x+=U.x||0,X.y+=U.y||0});var z=W.length||1;return{x:X.x/z,y:X.y/z}};G.getAvgNodePosition=E;var D=function(W,X,z){var U,j;return W==="source"?((U=z==null?void 0:z.find(function(V){return V.target===X.id}))===null||U===void 0?void 0:U.source)||{}:((j=z==null?void 0:z.find(function(V){return V.source===X.id}))===null||j===void 0?void 0:j.target)||{}},B=function(W,X,z){var U=[];switch(W){case"source":U=z==null?void 0:z.filter(function(V){return V.source===X.id}).map(function(V){return V.target});break;case"target":U=z==null?void 0:z.filter(function(V){return V.target===X.id}).map(function(V){return V.source});break;case"both":U=z==null?void 0:z.filter(function(V){return V.source===X.id}).map(function(V){return V.target}).concat(z==null?void 0:z.filter(function(V){return V.target===X.id}).map(function(V){return V.source}));break;default:break}var j=new Set(U);return Array.from(j)},m=function(W,X,z,U,j){var V=z[X]||"",J=(U==null?void 0:U.filter(function(Q){return Q[X]===V}))||[];return W==="leaf"&&(J=J.filter(function(Q){var et,ut;return((et=j[Q.id])===null||et===void 0?void 0:et.in)===0||((ut=j[Q.id])===null||ut===void 0?void 0:ut.out)===0})),J},f=function(W,X,z,U,j,V){var J=j[X.id],Q=J.in,et=J.out,ut=X,it=[];Q===0?(ut=D("source",X,z),it=B("both",ut,z).map(function(ft){return V[ft]})):et===0&&(ut=D("target",X,z),it=B("both",ut,z).map(function(ft){return V[ft]})),it=it.filter(function(ft){return j[ft.id]&&(j[ft.id].in===0||j[ft.id].out===0)});var yt=m(W,U,X,it,j);return{coreNode:ut,relativeLeafNodes:it,sameTypeLeafNodes:yt}};G.getCoreNodeAndRelativeLeafNodes=f},330627:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.toNumber=G.isNaN=G.isNumber=void 0;var _=function(w){return typeof w=="number"};G.isNumber=_;var g=function(w){return Number.isNaN(Number(w))};G.isNaN=g;var R=function(w){var M=parseFloat(w);return(0,G.isNaN)(M)?w:M};G.toNumber=R},898130:function(Ne,G){"use strict";var _=this&&this.__assign||function(){return _=Object.assign||function(w){for(var M,P=1,L=arguments.length;P<L;P++){M=arguments[P];for(var p in M)Object.prototype.hasOwnProperty.call(M,p)&&(w[p]=M[p])}return w},_.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.clone=G.isObject=void 0;var g=function(w){return w!==null&&typeof w=="object"};G.isObject=g;var R=function(w){if(w===null)return w;if(w instanceof Date)return new Date(w.getTime());if(w instanceof Array){var M=[];return w.forEach(function(L){M.push(L)}),M.map(function(L){return(0,G.clone)(L)})}if(typeof w=="object"&&Object.keys(w).length){var P=_({},w);return Object.keys(P).forEach(function(L){P[L]=(0,G.clone)(P[L])}),P}return w};G.clone=R},708055:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.camelize=G.isString=void 0;var _=function(w){return typeof w=="string"};G.isString=_;var g=function(w){var M=Object.create(null);return function(P){var L=M[P];return L||(M[P]=w(P))}},R=/-(\w)/g;G.camelize=g(function(w){return w.replace(R,function(M,P){return P?P.toUpperCase():""})})},731278:function(Ne,G,_){"use strict";var g;g={value:!0};var R=_(858204);function w(y,A,E){var D=[0,0,0,0,0,0,0,0,0];return R.mat3.fromTranslation(D,E),R.mat3.multiply(y,D,A)}g=w;function M(y,A,E){var D=[0,0,0,0,0,0,0,0,0];return R.mat3.fromRotation(D,E),R.mat3.multiply(y,D,A)}g=M;function P(y,A,E){var D=[0,0,0,0,0,0,0,0,0];return R.mat3.fromScaling(D,E),R.mat3.multiply(y,D,A)}g=P;function L(y,A,E){return R.mat3.multiply(y,E,A)}function p(y,A){for(var E=y?[].concat(y):[1,0,0,0,1,0,0,0,1],D=0,B=A.length;D<B;D++){var m=A[D];switch(m[0]){case"t":w(E,E,[m[1],m[2]]);break;case"s":P(E,E,[m[1],m[2]]);break;case"r":M(E,E,m[1]);break;case"m":L(E,E,m[1]);break;default:break}}return E}G.vs=p;function b(y,A){return y[0]*A[1]-A[0]*y[1]}g=b;function S(y,A,E){var D=R.vec2.angle(y,A),B=b(y,A)>=0;return E?B?Math.PI*2-D:D:B?D:Math.PI*2-D}g=S;function x(y,A,E){return E?(y[0]=A[1],y[1]=-1*A[0]):(y[0]=-1*A[1],y[1]=A[0]),y}g=x},413810:function(Ne,G,_){"use strict";_.r(G),_.d(G,{Cache:function(){return ha},assign:function(){return Kr},augment:function(){return Mn},clamp:function(){return $t},clearAnimationFrame:function(){return Ir},clone:function(){return Un},contains:function(){return M},debounce:function(){return na},deepMix:function(){return Da},difference:function(){return b},each:function(){return W},endsWith:function(){return In},every:function(){return vr},extend:function(){return si},filter:function(){return L},find:function(){return it},findIndex:function(){return ft},firstValue:function(){return St},fixedBase:function(){return be},flatten:function(){return Z},flattenDeep:function(){return bt},forIn:function(){return fe},get:function(){return Li},getEllipsisText:function(){return Wo},getRange:function(){return At},getType:function(){return Ci},getWrapBehavior:function(){return dn},group:function(){return ir},groupBy:function(){return jr},groupToMap:function(){return rn},has:function(){return Me},hasKey:function(){return pe},hasValue:function(){return fr},head:function(){return Mr},identity:function(){return fo},includes:function(){return M},indexOf:function(){return ka},isArguments:function(){return Ri},isArray:function(){return B},isArrayLike:function(){return R},isBoolean:function(){return ki},isDate:function(){return za},isDecimal:function(){return Gt},isElement:function(){return rr},isEmpty:function(){return ci},isEqual:function(){return fi},isEqualWith:function(){return Fi},isError:function(){return Bi},isEven:function(){return ot},isFinite:function(){return go},isFunction:function(){return A},isInteger:function(){return C},isMatch:function(){return j},isNegative:function(){return H},isNil:function(){return D},isNull:function(){return Wi},isNumber:function(){return Ht},isNumberEqual:function(){return zt},isObject:function(){return m},isObjectLike:function(){return J},isOdd:function(){return qt},isPlainObject:function(){return et},isPositive:function(){return he},isPrototype:function(){return oi},isRegExp:function(){return Hn},isString:function(){return ge},isType:function(){return y},isUndefined:function(){return ue},keys:function(){return z},last:function(){return Pr},lowerCase:function(){return sn},lowerFirst:function(){return an},map:function(){return Yi},mapValues:function(){return Io},max:function(){return Ct},maxBy:function(){return Ue},measureTextWidth:function(){return Uo},memoize:function(){return Ya},min:function(){return nt},minBy:function(){return cr},mix:function(){return Kr},mod:function(){return Tr},noop:function(){return pi},number2color:function(){return Pn},omit:function(){return Sa},parseRadius:function(){return je},pick:function(){return zi},pull:function(){return ie},pullAt:function(){return ee},reduce:function(){return Ut},remove:function(){return ye},requestAnimationFrame:function(){return Or},set:function(){return Ba},size:function(){return Go},some:function(){return Er},sortBy:function(){return xe},startsWith:function(){return Hr},substitute:function(){return Jn},throttle:function(){return Xi},toArray:function(){return co},toDegree:function(){return ur},toInteger:function(){return Ar},toRadian:function(){return Xt},toString:function(){return tn},union:function(){return br},uniq:function(){return Tt},uniqueId:function(){return Lo},upperCase:function(){return sa},upperFirst:function(){return Na},values:function(){return nr},valuesOfKey:function(){return Sr},wrapBehavior:function(){return wn}});var g=function(Wt){return Wt!==null&&typeof Wt!="function"&&isFinite(Wt.length)},R=g,w=function(Wt,Be){return R(Wt)?Wt.indexOf(Be)>-1:!1},M=w,P=function(Wt,Be){if(!R(Wt))return Wt;for(var tr=[],mr=0;mr<Wt.length;mr++){var Vr=Wt[mr];Be(Vr,mr)&&tr.push(Vr)}return tr},L=P,p=function(Wt,Be){return Be===void 0&&(Be=[]),L(Wt,function(tr){return!M(Be,tr)})},b=p,S={}.toString,x=function(Wt,Be){return S.call(Wt)==="[object "+Be+"]"},y=x,A=function(Wt){return y(Wt,"Function")},E=function(Wt){return Wt==null},D=E,B=function(Wt){return Array.isArray?Array.isArray(Wt):y(Wt,"Array")},m=function(Wt){var Be=typeof Wt;return Wt!==null&&Be==="object"||Be==="function"};function f(Wt,Be){if(Wt){var tr;if(B(Wt))for(var mr=0,Vr=Wt.length;mr<Vr&&(tr=Be(Wt[mr],mr),tr!==!1);mr++);else if(m(Wt)){for(var cn in Wt)if(Wt.hasOwnProperty(cn)&&(tr=Be(Wt[cn],cn),tr===!1))break}}}var W=f,X=Object.keys?function(Wt){return Object.keys(Wt)}:function(Wt){var Be=[];return W(Wt,function(tr,mr){A(Wt)&&mr==="prototype"||Be.push(mr)}),Be},z=X;function U(Wt,Be){var tr=z(Be),mr=tr.length;if(D(Wt))return!mr;for(var Vr=0;Vr<mr;Vr+=1){var cn=tr[Vr];if(Be[cn]!==Wt[cn]||!(cn in Wt))return!1}return!0}var j=U,V=function(Wt){return typeof Wt=="object"&&Wt!==null},J=V,Q=function(Wt){if(!J(Wt)||!y(Wt,"Object"))return!1;if(Object.getPrototypeOf(Wt)===null)return!0;for(var Be=Wt;Object.getPrototypeOf(Be)!==null;)Be=Object.getPrototypeOf(Be);return Object.getPrototypeOf(Wt)===Be},et=Q;function ut(Wt,Be){if(!B(Wt))return null;var tr;if(A(Be)&&(tr=Be),et(Be)&&(tr=function(Vr){return j(Vr,Be)}),tr){for(var mr=0;mr<Wt.length;mr+=1)if(tr(Wt[mr]))return Wt[mr]}return null}var it=ut;function yt(Wt,Be,tr){tr===void 0&&(tr=0);for(var mr=tr;mr<Wt.length;mr++)if(Be(Wt[mr],mr))return mr;return-1}var ft=yt,Bt=function(Wt,Be){for(var tr=null,mr=0;mr<Wt.length;mr++){var Vr=Wt[mr],cn=Vr[Be];if(!D(cn)){B(cn)?tr=cn[0]:tr=cn;break}}return tr},St=Bt,Et=function(Wt){if(!B(Wt))return[];for(var Be=[],tr=0;tr<Wt.length;tr++)Be=Be.concat(Wt[tr]);return Be},Z=Et,q=function(Wt,Be){if(Be===void 0&&(Be=[]),!B(Wt))Be.push(Wt);else for(var tr=0;tr<Wt.length;tr+=1)q(Wt[tr],Be);return Be},bt=q,Ct=function(Wt){if(B(Wt))return Wt.reduce(function(Be,tr){return Math.max(Be,tr)},Wt[0])},nt=function(Wt){if(B(Wt))return Wt.reduce(function(Be,tr){return Math.min(Be,tr)},Wt[0])},ht=function(Wt){var Be=Wt.filter(function(Fn){return!isNaN(Fn)});if(!Be.length)return{min:0,max:0};if(B(Wt[0])){for(var tr=[],mr=0;mr<Wt.length;mr++)tr=tr.concat(Wt[mr]);Be=tr}var Vr=Ct(Be),cn=nt(Be);return{min:cn,max:Vr}},At=ht,Ot=Array.prototype,xt=Ot.splice,Dt=Ot.indexOf,Yt=function(Wt){for(var Be=[],tr=1;tr<arguments.length;tr++)Be[tr-1]=arguments[tr];for(var mr=0;mr<Be.length;mr++)for(var Vr=Be[mr],cn=-1;(cn=Dt.call(Wt,Vr))>-1;)xt.call(Wt,cn,1);return Wt},ie=Yt,re=Array.prototype.splice,Pt=function(Be,tr){if(!R(Be))return[];for(var mr=Be?tr.length:0,Vr=mr-1;mr--;){var cn=void 0,Fn=tr[mr];(mr===Vr||Fn!==cn)&&(cn=Fn,re.call(Be,Fn,1))}return Be},ee=Pt,ce=function(Wt,Be,tr){if(!B(Wt)&&!et(Wt))return Wt;var mr=tr;return W(Wt,function(Vr,cn){mr=Be(mr,Vr,cn)}),mr},Ut=ce,te=function(Wt,Be){var tr=[];if(!R(Wt))return tr;for(var mr=-1,Vr=[],cn=Wt.length;++mr<cn;){var Fn=Wt[mr];Be(Fn,mr,Wt)&&(tr.push(Fn),Vr.push(mr))}return ee(Wt,Vr),tr},ye=te,ge=function(Wt){return y(Wt,"String")};function Kt(Wt,Be){var tr;if(A(Be))tr=function(Vr,cn){return Be(Vr)-Be(cn)};else{var mr=[];ge(Be)?mr.push(Be):B(Be)&&(mr=Be),tr=function(Vr,cn){for(var Fn=0;Fn<mr.length;Fn+=1){var Ia=mr[Fn];if(Vr[Ia]>cn[Ia])return 1;if(Vr[Ia]<cn[Ia])return-1}return 0}}return Wt.sort(tr),Wt}var xe=Kt;function Tt(Wt,Be){Be===void 0&&(Be=new Map);var tr=[];if(Array.isArray(Wt))for(var mr=0,Vr=Wt.length;mr<Vr;mr++){var cn=Wt[mr];Be.has(cn)||(tr.push(cn),Be.set(cn,!0))}return tr}var Ae=function(){for(var Wt=[],Be=0;Be<arguments.length;Be++)Wt[Be]=arguments[Be];return Tt([].concat.apply([],Wt))},br=Ae,Sr=function(Wt,Be){for(var tr=[],mr={},Vr=0;Vr<Wt.length;Vr++){var cn=Wt[Vr],Fn=cn[Be];if(!D(Fn)){B(Fn)||(Fn=[Fn]);for(var Ia=0;Ia<Fn.length;Ia++){var di=Fn[Ia];mr[di]||(tr.push(di),mr[di]=!0)}}}return tr};function Mr(Wt){if(R(Wt))return Wt[0]}function Pr(Wt){if(R(Wt)){var Be=Wt;return Be[Be.length-1]}}function on(Wt,Be){return B(Wt)||ge(Wt)?Wt[0]===Be:!1}var Hr=on;function Sn(Wt,Be){return B(Wt)||ge(Wt)?Wt[Wt.length-1]===Be:!1}var In=Sn,Nn=function(Wt,Be){for(var tr=0;tr<Wt.length;tr++)if(!Be(Wt[tr],tr))return!1;return!0},vr=Nn,Ze=function(Wt,Be){for(var tr=0;tr<Wt.length;tr++)if(Be(Wt[tr],tr))return!0;return!1},Er=Ze,ke=Object.prototype.hasOwnProperty;function Xe(Wt,Be){if(!Be||!B(Wt))return{};for(var tr={},mr=A(Be)?Be:function(Ia){return Ia[Be]},Vr,cn=0;cn<Wt.length;cn++){var Fn=Wt[cn];Vr=mr(Fn),ke.call(tr,Vr)?tr[Vr].push(Fn):tr[Vr]=[Fn]}return tr}var jr=Xe;function rn(Wt,Be){if(!Be)return{0:Wt};if(!A(Be)){var tr=B(Be)?Be:Be.replace(/\s+/g,"").split("*");Be=function(mr){for(var Vr="_",cn=0,Fn=tr.length;cn<Fn;cn++)Vr+=mr[tr[cn]]&&mr[tr[cn]].toString();return Vr}}return jr(Wt,Be)}var ir=function(Wt,Be){if(!Be)return[Wt];var tr=rn(Wt,Be),mr=[];for(var Vr in tr)mr.push(tr[Vr]);return mr};function Lr(Wt,Be){return Wt["_wrap_"+Be]}var dn=Lr;function Zr(Wt,Be){if(Wt["_wrap_"+Be])return Wt["_wrap_"+Be];var tr=function(mr){Wt[Be](mr)};return Wt["_wrap_"+Be]=tr,tr}var wn=Zr,ln={};function bn(Wt){var Be=ln[Wt];if(!Be){for(var tr=Wt.toString(16),mr=tr.length;mr<6;mr++)tr="0"+tr;Be="#"+tr,ln[Wt]=Be}return Be}var Pn=bn;function at(Wt){var Be=0,tr=0,mr=0,Vr=0;return B(Wt)?Wt.length===1?Be=tr=mr=Vr=Wt[0]:Wt.length===2?(Be=mr=Wt[0],tr=Vr=Wt[1]):Wt.length===3?(Be=Wt[0],tr=Vr=Wt[1],mr=Wt[2]):(Be=Wt[0],tr=Wt[1],mr=Wt[2],Vr=Wt[3]):Be=tr=mr=Vr=Wt,{r1:Be,r2:tr,r3:mr,r4:Vr}}var je=at,Zt=function(Wt,Be,tr){return Wt<Be?Be:Wt>tr?tr:Wt},$t=Zt,Mt=function(Wt,Be){var tr=Be.toString(),mr=tr.indexOf(".");if(mr===-1)return Math.round(Wt);var Vr=tr.substr(mr+1).length;return Vr>20&&(Vr=20),parseFloat(Wt.toFixed(Vr))},be=Mt,Nt=function(Wt){return y(Wt,"Number")},Ht=Nt,dt=function(Wt){return Ht(Wt)&&Wt%1!==0},Gt=dt,tt=function(Wt){return Ht(Wt)&&Wt%2===0},ot=tt,k=Number.isInteger?Number.isInteger:function(Wt){return Ht(Wt)&&Wt%1===0},C=k,I=function(Wt){return Ht(Wt)&&Wt<0},H=I,gt=1e-5;function zt(Wt,Be,tr){return tr===void 0&&(tr=gt),Math.abs(Wt-Be)<tr}var Rt=function(Wt){return Ht(Wt)&&Wt%2!==0},qt=Rt,Te=function(Wt){return Ht(Wt)&&Wt>0},he=Te,Ue=function(Wt,Be){if(B(Wt)){for(var tr,mr=-1/0,Vr=0;Vr<Wt.length;Vr++){var cn=Wt[Vr],Fn=A(Be)?Be(cn):cn[Be];Fn>mr&&(tr=cn,mr=Fn)}return tr}},cr=function(Wt,Be){if(B(Wt)){for(var tr,mr=1/0,Vr=0;Vr<Wt.length;Vr++){var cn=Wt[Vr],Fn=A(Be)?Be(cn):cn[Be];Fn<mr&&(tr=cn,mr=Fn)}return tr}},Ve=function(Wt,Be){return(Wt%Be+Be)%Be},Tr=Ve,nn=180/Math.PI,He=function(Wt){return nn*Wt},ur=He,Ar=parseInt,Cr=Math.PI/180,se=function(Wt){return Cr*Wt},Xt=se,fe=W,Me=function(Wt,Be){return Wt.hasOwnProperty(Be)},pe=Me,Re=Object.values?function(Wt){return Object.values(Wt)}:function(Wt){var Be=[];return W(Wt,function(tr,mr){A(Wt)&&mr==="prototype"||Be.push(tr)}),Be},nr=Re,fr=function(Wt,Be){return M(nr(Wt),Be)},tn=function(Wt){return D(Wt)?"":Wt.toString()},Ln=function(Wt){return tn(Wt).toLowerCase()},sn=Ln,Xn=function(Wt){var Be=tn(Wt);return Be.charAt(0).toLowerCase()+Be.substring(1)},an=Xn;function Bn(Wt,Be){return!Wt||!Be?Wt:Wt.replace(/\\?\{([^{}]+)\}/g,function(tr,mr){return tr.charAt(0)==="\\"?tr.slice(1):Be[mr]===void 0?"":Be[mr]})}var Jn=Bn,oa=function(Wt){return tn(Wt).toUpperCase()},sa=oa,xi=function(Wt){var Be=tn(Wt);return Be.charAt(0).toUpperCase()+Be.substring(1)},Na=xi,Ra={}.toString,ri=function(Wt){return Ra.call(Wt).replace(/^\[object /,"").replace(/]$/,"")},Ci=ri,Ni=function(Wt){return y(Wt,"Arguments")},Ri=Ni,pa=function(Wt){return y(Wt,"Boolean")},ki=pa,eo=function(Wt){return y(Wt,"Date")},za=eo,Ei=function(Wt){return y(Wt,"Error")},Bi=Ei;function go(Wt){return Ht(Wt)&&isFinite(Wt)}var Pi=function(Wt){return Wt===null},Wi=Pi,ro=Object.prototype,mo=function(Wt){var Be=Wt&&Wt.constructor,tr=typeof Be=="function"&&Be.prototype||ro;return Wt===tr},oi=mo,Ti=function(Wt){return y(Wt,"RegExp")},Hn=Ti,Jt=function(Wt){return Wt===void 0},ue=Jt,Pe=function(Wt){return Wt instanceof Element||Wt instanceof HTMLDocument},rr=Pe;function Or(Wt){var Be=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(tr){return setTimeout(tr,16)};return Be(Wt)}function Ir(Wt){var Be=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;Be(Wt)}function xr(Wt,Be){for(var tr in Be)Be.hasOwnProperty(tr)&&tr!=="constructor"&&Be[tr]!==void 0&&(Wt[tr]=Be[tr])}function Kr(Wt,Be,tr,mr){return Be&&xr(Wt,Be),tr&&xr(Wt,tr),mr&&xr(Wt,mr),Wt}var un=function(){for(var Wt=[],Be=0;Be<arguments.length;Be++)Wt[Be]=arguments[Be];for(var tr=Wt[0],mr=1;mr<Wt.length;mr++){var Vr=Wt[mr];A(Vr)&&(Vr=Vr.prototype),Kr(tr.prototype,Vr)}},Mn=un,Kn=function(Wt){if(typeof Wt!="object"||Wt===null)return Wt;var Be;if(B(Wt)){Be=[];for(var tr=0,mr=Wt.length;tr<mr;tr++)typeof Wt[tr]=="object"&&Wt[tr]!=null?Be[tr]=Kn(Wt[tr]):Be[tr]=Wt[tr]}else{Be={};for(var Vr in Wt)typeof Wt[Vr]=="object"&&Wt[Vr]!=null?Be[Vr]=Kn(Wt[Vr]):Be[Vr]=Wt[Vr]}return Be},Un=Kn;function ra(Wt,Be,tr){var mr;return function(){var Vr=this,cn=arguments,Fn=function(){mr=null,tr||Wt.apply(Vr,cn)},Ia=tr&&!mr;clearTimeout(mr),mr=setTimeout(Fn,Be),Ia&&Wt.apply(Vr,cn)}}var na=ra,Ya=function(Wt,Be){if(!A(Wt))throw new TypeError("Expected a function");var tr=function(){for(var mr=[],Vr=0;Vr<arguments.length;Vr++)mr[Vr]=arguments[Vr];var cn=Be?Be.apply(this,mr):mr[0],Fn=tr.cache;if(Fn.has(cn))return Fn.get(cn);var Ia=Wt.apply(this,mr);return Fn.set(cn,Ia),Ia};return tr.cache=new Map,tr},ua=5;function Qn(Wt,Be,tr,mr){tr=tr||0,mr=mr||ua;for(var Vr in Be)if(Be.hasOwnProperty(Vr)){var cn=Be[Vr];cn!==null&&et(cn)?(et(Wt[Vr])||(Wt[Vr]={}),tr<mr?Qn(Wt[Vr],cn,tr+1,mr):Wt[Vr]=Be[Vr]):B(cn)?(Wt[Vr]=[],Wt[Vr]=Wt[Vr].concat(cn)):cn!==void 0&&(Wt[Vr]=cn)}}var Ga=function(Wt){for(var Be=[],tr=1;tr<arguments.length;tr++)Be[tr-1]=arguments[tr];for(var mr=0;mr<Be.length;mr+=1)Qn(Wt,Be[mr]);return Wt},Da=Ga,xa=function(Wt,Be,tr,mr){A(Be)||(tr=Be,Be=Wt,Wt=function(){});var Vr=Object.create?function(Fn,Ia){return Object.create(Fn,{constructor:{value:Ia}})}:function(Fn,Ia){function di(){}di.prototype=Fn;var no=new di;return no.constructor=Ia,no},cn=Vr(Be.prototype,Wt);return Wt.prototype=Kr(cn,Wt.prototype),Wt.superclass=Vr(Be.prototype,Be),Kr(cn,tr),Kr(Wt,mr),Wt},si=xa,Qa=function(Wt,Be){if(!R(Wt))return-1;var tr=Array.prototype.indexOf;if(tr)return tr.call(Wt,Be);for(var mr=-1,Vr=0;Vr<Wt.length;Vr++)if(Wt[Vr]===Be){mr=Vr;break}return mr},ka=Qa,_a=Object.prototype.hasOwnProperty;function va(Wt){if(D(Wt))return!0;if(R(Wt))return!Wt.length;var Be=Ci(Wt);if(Be==="Map"||Be==="Set")return!Wt.size;if(oi(Wt))return!Object.keys(Wt).length;for(var tr in Wt)if(_a.call(Wt,tr))return!1;return!0}var ci=va,ni=function(Wt,Be){if(Wt===Be)return!0;if(!Wt||!Be||ge(Wt)||ge(Be))return!1;if(R(Wt)||R(Be)){if(Wt.length!==Be.length)return!1;for(var tr=!0,mr=0;mr<Wt.length&&(tr=ni(Wt[mr],Be[mr]),!!tr);mr++);return tr}if(J(Wt)||J(Be)){var Vr=Object.keys(Wt),cn=Object.keys(Be);if(Vr.length!==cn.length)return!1;for(var tr=!0,mr=0;mr<Vr.length&&(tr=ni(Wt[Vr[mr]],Be[Vr[mr]]),!!tr);mr++);return tr}return!1},fi=ni,Fi=function(Wt,Be,tr){return A(tr)?!!tr(Wt,Be):fi(Wt,Be)},Ai=function(Wt,Be){if(!R(Wt))return Wt;for(var tr=[],mr=0;mr<Wt.length;mr++){var Vr=Wt[mr];tr.push(Be(Vr,mr))}return tr},Yi=Ai,Oo=function(Wt){return Wt},Io=function(Wt,Be){Be===void 0&&(Be=Oo);var tr={};return m(Wt)&&!D(Wt)&&Object.keys(Wt).forEach(function(mr){tr[mr]=Be(Wt[mr],mr)}),tr},Li=function(Wt,Be,tr){for(var mr=0,Vr=ge(Be)?Be.split("."):Be;Wt&&mr<Vr.length;)Wt=Wt[Vr[mr++]];return Wt===void 0||mr<Vr.length?tr:Wt},Ba=function(Wt,Be,tr){var mr=Wt,Vr=ge(Be)?Be.split("."):Be;return Vr.forEach(function(cn,Fn){Fn<Vr.length-1?(m(mr[cn])||(mr[cn]=Ht(Vr[Fn+1])?[]:{}),mr=mr[cn]):mr[cn]=tr}),Wt},vi=Object.prototype.hasOwnProperty,zi=function(Wt,Be){if(Wt===null||!et(Wt))return{};var tr={};return W(Be,function(mr){vi.call(Wt,mr)&&(tr[mr]=Wt[mr])}),tr},Sa=function(Wt,Be){return Ut(Wt,function(tr,mr,Vr){return Be.includes(Vr)||(tr[Vr]=mr),tr},{})},Xi=function(Wt,Be,tr){var mr,Vr,cn,Fn,Ia=0;tr||(tr={});var di=function(){Ia=tr.leading===!1?0:Date.now(),mr=null,Fn=Wt.apply(Vr,cn),mr||(Vr=cn=null)},no=function(){var wo=Date.now();!Ia&&tr.leading===!1&&(Ia=wo);var ds=Be-(wo-Ia);return Vr=this,cn=arguments,ds<=0||ds>Be?(mr&&(clearTimeout(mr),mr=null),Ia=wo,Fn=Wt.apply(Vr,cn),mr||(Vr=cn=null)):!mr&&tr.trailing!==!1&&(mr=setTimeout(di,ds)),Fn};return no.cancel=function(){clearTimeout(mr),Ia=0,mr=Vr=cn=null},no},co=function(Wt){return R(Wt)?Array.prototype.slice.call(Wt):[]},Mi={},Lo=function(Wt){return Wt=Wt||"g",Mi[Wt]?Mi[Wt]+=1:Mi[Wt]=1,Wt+Mi[Wt]},pi=function(){},fo=function(Wt){return Wt};function Go(Wt){return D(Wt)?0:R(Wt)?Wt.length:Object.keys(Wt).length}var ts=_(570655),ji,Uo=Ya(function(Wt,Be){Be===void 0&&(Be={});var tr=Be.fontSize,mr=Be.fontFamily,Vr=Be.fontWeight,cn=Be.fontStyle,Fn=Be.fontVariant;return ji||(ji=document.createElement("canvas").getContext("2d")),ji.font=[cn,Fn,Vr,tr+"px",mr].join(" "),ji.measureText(ge(Wt)?Wt:"").width},function(Wt,Be){return Be===void 0&&(Be={}),(0,ts.__spreadArrays)([Wt],nr(Be)).join("")}),Wo=function(Wt,Be,tr,mr){mr===void 0&&(mr="...");var Vr=16,cn=Uo(mr,tr),Fn=ge(Wt)?Wt:tn(Wt),Ia=Be,di=[],no,wo;if(Uo(Wt,tr)<=Be)return Wt;for(;no=Fn.substr(0,Vr),wo=Uo(no,tr),!(wo+cn>Ia&&wo>Ia);)if(di.push(no),Ia-=wo,Fn=Fn.substr(Vr),!Fn)return di.join("");for(;no=Fn.substr(0,1),wo=Uo(no,tr),!(wo+cn>Ia);)if(di.push(no),Ia-=wo,Fn=Fn.substr(1),!Fn)return di.join("");return""+di.join("")+mr},fs=function(){function Wt(){this.map={}}return Wt.prototype.has=function(Be){return this.map[Be]!==void 0},Wt.prototype.get=function(Be,tr){var mr=this.map[Be];return mr===void 0?tr:mr},Wt.prototype.set=function(Be,tr){this.map[Be]=tr},Wt.prototype.clear=function(){this.map={}},Wt.prototype.delete=function(Be){delete this.map[Be]},Wt.prototype.size=function(){return Object.keys(this.map).length},Wt}(),ha=fs},960887:function(Ne,G,_){"use strict";_.d(G,{LB:function(){return oa},g4:function(){return Er},we:function(){return Zr},pE:function(){return ut},VK:function(){return At},Cj:function(){return ri},O1:function(){return Ra},Zj:function(){return Ri},VT:function(){return f},Dy:function(){return W}});var g=_(667294),R=_(973935),w=_(724285);const M={display:"none"};function P(Jt){let{id:ue,value:Pe}=Jt;return g.createElement("div",{id:ue,style:M},Pe)}const L={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function p(Jt){let{id:ue,announcement:Pe}=Jt;return g.createElement("div",{id:ue,style:L,role:"status","aria-live":"assertive","aria-atomic":!0},Pe)}function b(){const[Jt,ue]=(0,g.useState)("");return{announce:(0,g.useCallback)(rr=>{rr!=null&&ue(rr)},[]),announcement:Jt}}const S=(0,g.createContext)(null);function x(Jt){const ue=(0,g.useContext)(S);(0,g.useEffect)(()=>{if(!ue)throw new Error("useDndMonitor must be used within a children of <DndContext>");return ue(Jt)},[Jt,ue])}function y(){const[Jt]=(0,g.useState)(()=>new Set),ue=(0,g.useCallback)(rr=>(Jt.add(rr),()=>Jt.delete(rr)),[Jt]);return[(0,g.useCallback)(rr=>{let{type:Or,event:Ir}=rr;Jt.forEach(xr=>{var Kr;return(Kr=xr[Or])==null?void 0:Kr.call(xr,Ir)})},[Jt]),ue]}const A={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},E={onDragStart(Jt){let{active:ue}=Jt;return"Picked up draggable item "+ue.id+"."},onDragOver(Jt){let{active:ue,over:Pe}=Jt;return Pe?"Draggable item "+ue.id+" was moved over droppable area "+Pe.id+".":"Draggable item "+ue.id+" is no longer over a droppable area."},onDragEnd(Jt){let{active:ue,over:Pe}=Jt;return Pe?"Draggable item "+ue.id+" was dropped over droppable area "+Pe.id:"Draggable item "+ue.id+" was dropped."},onDragCancel(Jt){let{active:ue}=Jt;return"Dragging was cancelled. Draggable item "+ue.id+" was dropped."}};function D(Jt){let{announcements:ue=E,container:Pe,hiddenTextDescribedById:rr,screenReaderInstructions:Or=A}=Jt;const{announce:Ir,announcement:xr}=b(),Kr=(0,w.Ld)("DndLiveRegion"),[un,Mn]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{Mn(!0)},[]),x((0,g.useMemo)(()=>({onDragStart(Un){let{active:ra}=Un;Ir(ue.onDragStart({active:ra}))},onDragMove(Un){let{active:ra,over:na}=Un;ue.onDragMove&&Ir(ue.onDragMove({active:ra,over:na}))},onDragOver(Un){let{active:ra,over:na}=Un;Ir(ue.onDragOver({active:ra,over:na}))},onDragEnd(Un){let{active:ra,over:na}=Un;Ir(ue.onDragEnd({active:ra,over:na}))},onDragCancel(Un){let{active:ra,over:na}=Un;Ir(ue.onDragCancel({active:ra,over:na}))}}),[Ir,ue])),!un)return null;const Kn=g.createElement(g.Fragment,null,g.createElement(P,{id:rr,value:Or.draggable}),g.createElement(p,{id:Kr,announcement:xr}));return Pe?(0,R.createPortal)(Kn,Pe):Kn}var B;(function(Jt){Jt.DragStart="dragStart",Jt.DragMove="dragMove",Jt.DragEnd="dragEnd",Jt.DragCancel="dragCancel",Jt.DragOver="dragOver",Jt.RegisterDroppable="registerDroppable",Jt.SetDroppableDisabled="setDroppableDisabled",Jt.UnregisterDroppable="unregisterDroppable"})(B||(B={}));function m(){}function f(Jt,ue){return(0,g.useMemo)(()=>({sensor:Jt,options:ue!=null?ue:{}}),[Jt,ue])}function W(){for(var Jt=arguments.length,ue=new Array(Jt),Pe=0;Pe<Jt;Pe++)ue[Pe]=arguments[Pe];return(0,g.useMemo)(()=>[...ue].filter(rr=>rr!=null),[...ue])}const X=Object.freeze({x:0,y:0});function z(Jt,ue){return Math.sqrt(Math.pow(Jt.x-ue.x,2)+Math.pow(Jt.y-ue.y,2))}function U(Jt,ue){const Pe=getEventCoordinates(Jt);if(!Pe)return"0 0";const rr={x:(Pe.x-ue.left)/ue.width*100,y:(Pe.y-ue.top)/ue.height*100};return rr.x+"% "+rr.y+"%"}function j(Jt,ue){let{data:{value:Pe}}=Jt,{data:{value:rr}}=ue;return Pe-rr}function V(Jt,ue){let{data:{value:Pe}}=Jt,{data:{value:rr}}=ue;return rr-Pe}function J(Jt){let{left:ue,top:Pe,height:rr,width:Or}=Jt;return[{x:ue,y:Pe},{x:ue+Or,y:Pe},{x:ue,y:Pe+rr},{x:ue+Or,y:Pe+rr}]}function Q(Jt,ue){if(!Jt||Jt.length===0)return null;const[Pe]=Jt;return ue?Pe[ue]:Pe}function et(Jt,ue,Pe){return ue===void 0&&(ue=Jt.left),Pe===void 0&&(Pe=Jt.top),{x:ue+Jt.width*.5,y:Pe+Jt.height*.5}}const ut=Jt=>{let{collisionRect:ue,droppableRects:Pe,droppableContainers:rr}=Jt;const Or=et(ue,ue.left,ue.top),Ir=[];for(const xr of rr){const{id:Kr}=xr,un=Pe.get(Kr);if(un){const Mn=z(et(un),Or);Ir.push({id:Kr,data:{droppableContainer:xr,value:Mn}})}}return Ir.sort(j)},it=Jt=>{let{collisionRect:ue,droppableRects:Pe,droppableContainers:rr}=Jt;const Or=J(ue),Ir=[];for(const xr of rr){const{id:Kr}=xr,un=Pe.get(Kr);if(un){const Mn=J(un),Kn=Or.reduce((ra,na,Ya)=>ra+z(Mn[Ya],na),0),Un=Number((Kn/4).toFixed(4));Ir.push({id:Kr,data:{droppableContainer:xr,value:Un}})}}return Ir.sort(j)};function yt(Jt,ue){const Pe=Math.max(ue.top,Jt.top),rr=Math.max(ue.left,Jt.left),Or=Math.min(ue.left+ue.width,Jt.left+Jt.width),Ir=Math.min(ue.top+ue.height,Jt.top+Jt.height),xr=Or-rr,Kr=Ir-Pe;if(rr<Or&&Pe<Ir){const un=ue.width*ue.height,Mn=Jt.width*Jt.height,Kn=xr*Kr,Un=Kn/(un+Mn-Kn);return Number(Un.toFixed(4))}return 0}const ft=Jt=>{let{collisionRect:ue,droppableRects:Pe,droppableContainers:rr}=Jt;const Or=[];for(const Ir of rr){const{id:xr}=Ir,Kr=Pe.get(xr);if(Kr){const un=yt(Kr,ue);un>0&&Or.push({id:xr,data:{droppableContainer:Ir,value:un}})}}return Or.sort(V)};function Bt(Jt,ue){const{top:Pe,left:rr,bottom:Or,right:Ir}=ue;return Pe<=Jt.y&&Jt.y<=Or&&rr<=Jt.x&&Jt.x<=Ir}const St=Jt=>{let{droppableContainers:ue,droppableRects:Pe,pointerCoordinates:rr}=Jt;if(!rr)return[];const Or=[];for(const Ir of ue){const{id:xr}=Ir,Kr=Pe.get(xr);if(Kr&&Bt(rr,Kr)){const Mn=J(Kr).reduce((Un,ra)=>Un+z(rr,ra),0),Kn=Number((Mn/4).toFixed(4));Or.push({id:xr,data:{droppableContainer:Ir,value:Kn}})}}return Or.sort(j)};function Et(Jt,ue,Pe){return lo(wa({},Jt),{scaleX:ue&&Pe?ue.width/Pe.width:1,scaleY:ue&&Pe?ue.height/Pe.height:1})}function Z(Jt,ue){return Jt&&ue?{x:Jt.left-ue.left,y:Jt.top-ue.top}:X}function q(Jt){return function(Pe){for(var rr=arguments.length,Or=new Array(rr>1?rr-1:0),Ir=1;Ir<rr;Ir++)Or[Ir-1]=arguments[Ir];return Or.reduce((xr,Kr)=>lo(wa({},xr),{top:xr.top+Jt*Kr.y,bottom:xr.bottom+Jt*Kr.y,left:xr.left+Jt*Kr.x,right:xr.right+Jt*Kr.x}),wa({},Pe))}}const bt=q(1);function Ct(Jt){if(Jt.startsWith("matrix3d(")){const ue=Jt.slice(9,-1).split(/, /);return{x:+ue[12],y:+ue[13],scaleX:+ue[0],scaleY:+ue[5]}}else if(Jt.startsWith("matrix(")){const ue=Jt.slice(7,-1).split(/, /);return{x:+ue[4],y:+ue[5],scaleX:+ue[0],scaleY:+ue[3]}}return null}function nt(Jt,ue,Pe){const rr=Ct(ue);if(!rr)return Jt;const{scaleX:Or,scaleY:Ir,x:xr,y:Kr}=rr,un=Jt.left-xr-(1-Or)*parseFloat(Pe),Mn=Jt.top-Kr-(1-Ir)*parseFloat(Pe.slice(Pe.indexOf(" ")+1)),Kn=Or?Jt.width/Or:Jt.width,Un=Ir?Jt.height/Ir:Jt.height;return{width:Kn,height:Un,top:Mn,right:un+Kn,bottom:Mn+Un,left:un}}const ht={ignoreTransform:!1};function At(Jt,ue){ue===void 0&&(ue=ht);let Pe=Jt.getBoundingClientRect();if(ue.ignoreTransform){const{transform:Mn,transformOrigin:Kn}=(0,w.Jj)(Jt).getComputedStyle(Jt);Mn&&(Pe=nt(Pe,Mn,Kn))}const{top:rr,left:Or,width:Ir,height:xr,bottom:Kr,right:un}=Pe;return{top:rr,left:Or,width:Ir,height:xr,bottom:Kr,right:un}}function Ot(Jt){return At(Jt,{ignoreTransform:!0})}function xt(Jt){const ue=Jt.innerWidth,Pe=Jt.innerHeight;return{top:0,left:0,right:ue,bottom:Pe,width:ue,height:Pe}}function Dt(Jt,ue){return ue===void 0&&(ue=(0,w.Jj)(Jt).getComputedStyle(Jt)),ue.position==="fixed"}function Yt(Jt,ue){ue===void 0&&(ue=(0,w.Jj)(Jt).getComputedStyle(Jt));const Pe=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(Or=>{const Ir=ue[Or];return typeof Ir=="string"?Pe.test(Ir):!1})}function ie(Jt,ue){const Pe=[];function rr(Or){if(ue!=null&&Pe.length>=ue||!Or)return Pe;if((0,w.qk)(Or)&&Or.scrollingElement!=null&&!Pe.includes(Or.scrollingElement))return Pe.push(Or.scrollingElement),Pe;if(!(0,w.Re)(Or)||(0,w.vZ)(Or)||Pe.includes(Or))return Pe;const Ir=(0,w.Jj)(Jt).getComputedStyle(Or);return Or!==Jt&&Yt(Or,Ir)&&Pe.push(Or),Dt(Or,Ir)?Pe:rr(Or.parentNode)}return Jt?rr(Jt):Pe}function re(Jt){const[ue]=ie(Jt,1);return ue!=null?ue:null}function Pt(Jt){return!w.Nq||!Jt?null:(0,w.FJ)(Jt)?Jt:(0,w.UG)(Jt)?(0,w.qk)(Jt)||Jt===(0,w.r3)(Jt).scrollingElement?window:(0,w.Re)(Jt)?Jt:null:null}function ee(Jt){return(0,w.FJ)(Jt)?Jt.scrollX:Jt.scrollLeft}function ce(Jt){return(0,w.FJ)(Jt)?Jt.scrollY:Jt.scrollTop}function Ut(Jt){return{x:ee(Jt),y:ce(Jt)}}var te;(function(Jt){Jt[Jt.Forward=1]="Forward",Jt[Jt.Backward=-1]="Backward"})(te||(te={}));function ye(Jt){return!w.Nq||!Jt?!1:Jt===document.scrollingElement}function ge(Jt){const ue={x:0,y:0},Pe=ye(Jt)?{height:window.innerHeight,width:window.innerWidth}:{height:Jt.clientHeight,width:Jt.clientWidth},rr={x:Jt.scrollWidth-Pe.width,y:Jt.scrollHeight-Pe.height},Or=Jt.scrollTop<=ue.y,Ir=Jt.scrollLeft<=ue.x,xr=Jt.scrollTop>=rr.y,Kr=Jt.scrollLeft>=rr.x;return{isTop:Or,isLeft:Ir,isBottom:xr,isRight:Kr,maxScroll:rr,minScroll:ue}}const Kt={x:.2,y:.2};function xe(Jt,ue,Pe,rr,Or){let{top:Ir,left:xr,right:Kr,bottom:un}=Pe;rr===void 0&&(rr=10),Or===void 0&&(Or=Kt);const{isTop:Mn,isBottom:Kn,isLeft:Un,isRight:ra}=ge(Jt),na={x:0,y:0},Ya={x:0,y:0},ua={height:ue.height*Or.y,width:ue.width*Or.x};return!Mn&&Ir<=ue.top+ua.height?(na.y=te.Backward,Ya.y=rr*Math.abs((ue.top+ua.height-Ir)/ua.height)):!Kn&&un>=ue.bottom-ua.height&&(na.y=te.Forward,Ya.y=rr*Math.abs((ue.bottom-ua.height-un)/ua.height)),!ra&&Kr>=ue.right-ua.width?(na.x=te.Forward,Ya.x=rr*Math.abs((ue.right-ua.width-Kr)/ua.width)):!Un&&xr<=ue.left+ua.width&&(na.x=te.Backward,Ya.x=rr*Math.abs((ue.left+ua.width-xr)/ua.width)),{direction:na,speed:Ya}}function Tt(Jt){if(Jt===document.scrollingElement){const{innerWidth:Ir,innerHeight:xr}=window;return{top:0,left:0,right:Ir,bottom:xr,width:Ir,height:xr}}const{top:ue,left:Pe,right:rr,bottom:Or}=Jt.getBoundingClientRect();return{top:ue,left:Pe,right:rr,bottom:Or,width:Jt.clientWidth,height:Jt.clientHeight}}function Ae(Jt){return Jt.reduce((ue,Pe)=>(0,w.IH)(ue,Ut(Pe)),X)}function br(Jt){return Jt.reduce((ue,Pe)=>ue+ee(Pe),0)}function Sr(Jt){return Jt.reduce((ue,Pe)=>ue+ce(Pe),0)}function Mr(Jt,ue){if(ue===void 0&&(ue=At),!Jt)return;const{top:Pe,left:rr,bottom:Or,right:Ir}=ue(Jt);re(Jt)&&(Or<=0||Ir<=0||Pe>=window.innerHeight||rr>=window.innerWidth)&&Jt.scrollIntoView({block:"center",inline:"center"})}const Pr=[["x",["left","right"],br],["y",["top","bottom"],Sr]];class on{constructor(ue,Pe){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const rr=ie(Pe),Or=Ae(rr);this.rect=wa({},ue),this.width=ue.width,this.height=ue.height;for(const[Ir,xr,Kr]of Pr)for(const un of xr)Object.defineProperty(this,un,{get:()=>{const Mn=Kr(rr),Kn=Or[Ir]-Mn;return this.rect[un]+Kn},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Hr{constructor(ue){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(Pe=>{var rr;return(rr=this.target)==null?void 0:rr.removeEventListener(...Pe)})},this.target=ue}add(ue,Pe,rr){var Or;(Or=this.target)==null||Or.addEventListener(ue,Pe,rr),this.listeners.push([ue,Pe,rr])}}function Sn(Jt){const{EventTarget:ue}=(0,w.Jj)(Jt);return Jt instanceof ue?Jt:(0,w.r3)(Jt)}function In(Jt,ue){const Pe=Math.abs(Jt.x),rr=Math.abs(Jt.y);return typeof ue=="number"?Math.sqrt(Av(Pe,2)+Av(rr,2))>ue:"x"in ue&&"y"in ue?Pe>ue.x&&rr>ue.y:"x"in ue?Pe>ue.x:"y"in ue?rr>ue.y:!1}var Nn;(function(Jt){Jt.Click="click",Jt.DragStart="dragstart",Jt.Keydown="keydown",Jt.ContextMenu="contextmenu",Jt.Resize="resize",Jt.SelectionChange="selectionchange",Jt.VisibilityChange="visibilitychange"})(Nn||(Nn={}));function vr(Jt){Jt.preventDefault()}function Ze(Jt){Jt.stopPropagation()}var Er;(function(Jt){Jt.Space="Space",Jt.Down="ArrowDown",Jt.Right="ArrowRight",Jt.Left="ArrowLeft",Jt.Up="ArrowUp",Jt.Esc="Escape",Jt.Enter="Enter"})(Er||(Er={}));const ke={start:[Er.Space,Er.Enter],cancel:[Er.Esc],end:[Er.Space,Er.Enter]},Xe=(Jt,ue)=>{let{currentCoordinates:Pe}=ue;switch(Jt.code){case Er.Right:return lo(wa({},Pe),{x:Pe.x+25});case Er.Left:return lo(wa({},Pe),{x:Pe.x-25});case Er.Down:return lo(wa({},Pe),{y:Pe.y+25});case Er.Up:return lo(wa({},Pe),{y:Pe.y-25})}};class jr{constructor(ue){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=ue;const{event:{target:Pe}}=ue;this.props=ue,this.listeners=new Hr((0,w.r3)(Pe)),this.windowListeners=new Hr((0,w.Jj)(Pe)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Nn.Resize,this.handleCancel),this.windowListeners.add(Nn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Nn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:ue,onStart:Pe}=this.props,rr=ue.node.current;rr&&Mr(rr),Pe(X)}handleKeyDown(ue){if((0,w.vd)(ue)){const{active:Pe,context:rr,options:Or}=this.props,{keyboardCodes:Ir=ke,coordinateGetter:xr=Xe,scrollBehavior:Kr="smooth"}=Or,{code:un}=ue;if(Ir.end.includes(un)){this.handleEnd(ue);return}if(Ir.cancel.includes(un)){this.handleCancel(ue);return}const{collisionRect:Mn}=rr.current,Kn=Mn?{x:Mn.left,y:Mn.top}:X;this.referenceCoordinates||(this.referenceCoordinates=Kn);const Un=xr(ue,{active:Pe,context:rr.current,currentCoordinates:Kn});if(Un){const ra=(0,w.$X)(Un,Kn),na={x:0,y:0},{scrollableAncestors:Ya}=rr.current;for(const ua of Ya){const Qn=ue.code,{isTop:Ga,isRight:Da,isLeft:xa,isBottom:si,maxScroll:Qa,minScroll:ka}=ge(ua),_a=Tt(ua),va={x:Math.min(Qn===Er.Right?_a.right-_a.width/2:_a.right,Math.max(Qn===Er.Right?_a.left:_a.left+_a.width/2,Un.x)),y:Math.min(Qn===Er.Down?_a.bottom-_a.height/2:_a.bottom,Math.max(Qn===Er.Down?_a.top:_a.top+_a.height/2,Un.y))},ci=Qn===Er.Right&&!Da||Qn===Er.Left&&!xa,ni=Qn===Er.Down&&!si||Qn===Er.Up&&!Ga;if(ci&&va.x!==Un.x){const fi=ua.scrollLeft+ra.x,Fi=Qn===Er.Right&&fi<=Qa.x||Qn===Er.Left&&fi>=ka.x;if(Fi&&!ra.y){ua.scrollTo({left:fi,behavior:Kr});return}Fi?na.x=ua.scrollLeft-fi:na.x=Qn===Er.Right?ua.scrollLeft-Qa.x:ua.scrollLeft-ka.x,na.x&&ua.scrollBy({left:-na.x,behavior:Kr});break}else if(ni&&va.y!==Un.y){const fi=ua.scrollTop+ra.y,Fi=Qn===Er.Down&&fi<=Qa.y||Qn===Er.Up&&fi>=ka.y;if(Fi&&!ra.x){ua.scrollTo({top:fi,behavior:Kr});return}Fi?na.y=ua.scrollTop-fi:na.y=Qn===Er.Down?ua.scrollTop-Qa.y:ua.scrollTop-ka.y,na.y&&ua.scrollBy({top:-na.y,behavior:Kr});break}}this.handleMove(ue,(0,w.IH)((0,w.$X)(Un,this.referenceCoordinates),na))}}}handleMove(ue,Pe){const{onMove:rr}=this.props;ue.preventDefault(),rr(Pe)}handleEnd(ue){const{onEnd:Pe}=this.props;ue.preventDefault(),this.detach(),Pe()}handleCancel(ue){const{onCancel:Pe}=this.props;ue.preventDefault(),this.detach(),Pe()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}jr.activators=[{eventName:"onKeyDown",handler:(Jt,ue,Pe)=>{let{keyboardCodes:rr=ke,onActivation:Or}=ue,{active:Ir}=Pe;const{code:xr}=Jt.nativeEvent;if(rr.start.includes(xr)){const Kr=Ir.activatorNode.current;return Kr&&Jt.target!==Kr?!1:(Jt.preventDefault(),Or==null||Or({event:Jt.nativeEvent}),!0)}return!1}}];function rn(Jt){return Boolean(Jt&&"distance"in Jt)}function ir(Jt){return Boolean(Jt&&"delay"in Jt)}class Lr{constructor(ue,Pe,rr){var Or;rr===void 0&&(rr=Sn(ue.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=ue,this.events=Pe;const{event:Ir}=ue,{target:xr}=Ir;this.props=ue,this.events=Pe,this.document=(0,w.r3)(xr),this.documentListeners=new Hr(this.document),this.listeners=new Hr(rr),this.windowListeners=new Hr((0,w.Jj)(xr)),this.initialCoordinates=(Or=(0,w.DC)(Ir))!=null?Or:X,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:ue,props:{options:{activationConstraint:Pe}}}=this;if(this.listeners.add(ue.move.name,this.handleMove,{passive:!1}),this.listeners.add(ue.end.name,this.handleEnd),this.windowListeners.add(Nn.Resize,this.handleCancel),this.windowListeners.add(Nn.DragStart,vr),this.windowListeners.add(Nn.VisibilityChange,this.handleCancel),this.windowListeners.add(Nn.ContextMenu,vr),this.documentListeners.add(Nn.Keydown,this.handleKeydown),Pe){if(rn(Pe))return;if(ir(Pe)){this.timeoutId=setTimeout(this.handleStart,Pe.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:ue}=this,{onStart:Pe}=this.props;ue&&(this.activated=!0,this.documentListeners.add(Nn.Click,Ze,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Nn.SelectionChange,this.removeTextSelection),Pe(ue))}handleMove(ue){var Pe;const{activated:rr,initialCoordinates:Or,props:Ir}=this,{onMove:xr,options:{activationConstraint:Kr}}=Ir;if(!Or)return;const un=(Pe=(0,w.DC)(ue))!=null?Pe:X,Mn=(0,w.$X)(Or,un);if(!rr&&Kr){if(ir(Kr))return In(Mn,Kr.tolerance)?this.handleCancel():void 0;if(rn(Kr))return Kr.tolerance!=null&&In(Mn,Kr.tolerance)?this.handleCancel():In(Mn,Kr.distance)?this.handleStart():void 0}ue.cancelable&&ue.preventDefault(),xr(un)}handleEnd(){const{onEnd:ue}=this.props;this.detach(),ue()}handleCancel(){const{onCancel:ue}=this.props;this.detach(),ue()}handleKeydown(ue){ue.code===Er.Esc&&this.handleCancel()}removeTextSelection(){var ue;(ue=this.document.getSelection())==null||ue.removeAllRanges()}}const dn={move:{name:"pointermove"},end:{name:"pointerup"}};class Zr extends Lr{constructor(ue){const{event:Pe}=ue,rr=(0,w.r3)(Pe.target);super(ue,dn,rr)}}Zr.activators=[{eventName:"onPointerDown",handler:(Jt,ue)=>{let{nativeEvent:Pe}=Jt,{onActivation:rr}=ue;return!Pe.isPrimary||Pe.button!==0?!1:(rr==null||rr({event:Pe}),!0)}}];const wn={move:{name:"mousemove"},end:{name:"mouseup"}};var ln;(function(Jt){Jt[Jt.RightClick=2]="RightClick"})(ln||(ln={}));class bn extends Lr{constructor(ue){super(ue,wn,(0,w.r3)(ue.event.target))}}bn.activators=[{eventName:"onMouseDown",handler:(Jt,ue)=>{let{nativeEvent:Pe}=Jt,{onActivation:rr}=ue;return Pe.button===ln.RightClick?!1:(rr==null||rr({event:Pe}),!0)}}];const Pn={move:{name:"touchmove"},end:{name:"touchend"}};class at extends Lr{constructor(ue){super(ue,Pn)}static setup(){return window.addEventListener(Pn.move.name,ue,{capture:!1,passive:!1}),function(){window.removeEventListener(Pn.move.name,ue)};function ue(){}}}at.activators=[{eventName:"onTouchStart",handler:(Jt,ue)=>{let{nativeEvent:Pe}=Jt,{onActivation:rr}=ue;const{touches:Or}=Pe;return Or.length>1?!1:(rr==null||rr({event:Pe}),!0)}}];var je;(function(Jt){Jt[Jt.Pointer=0]="Pointer",Jt[Jt.DraggableRect=1]="DraggableRect"})(je||(je={}));var Zt;(function(Jt){Jt[Jt.TreeOrder=0]="TreeOrder",Jt[Jt.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zt||(Zt={}));function $t(Jt){let{acceleration:ue,activator:Pe=je.Pointer,canScroll:rr,draggingRect:Or,enabled:Ir,interval:xr=5,order:Kr=Zt.TreeOrder,pointerCoordinates:un,scrollableAncestors:Mn,scrollableAncestorRects:Kn,delta:Un,threshold:ra}=Jt;const na=be({delta:Un,disabled:!Ir}),[Ya,ua]=(0,w.Yz)(),Qn=(0,g.useRef)({x:0,y:0}),Ga=(0,g.useRef)({x:0,y:0}),Da=(0,g.useMemo)(()=>{switch(Pe){case je.Pointer:return un?{top:un.y,bottom:un.y,left:un.x,right:un.x}:null;case je.DraggableRect:return Or}},[Pe,Or,un]),xa=(0,g.useRef)(null),si=(0,g.useCallback)(()=>{const ka=xa.current;if(!ka)return;const _a=Qn.current.x*Ga.current.x,va=Qn.current.y*Ga.current.y;ka.scrollBy(_a,va)},[]),Qa=(0,g.useMemo)(()=>Kr===Zt.TreeOrder?[...Mn].reverse():Mn,[Kr,Mn]);(0,g.useEffect)(()=>{if(!Ir||!Mn.length||!Da){ua();return}for(const ka of Qa){if((rr==null?void 0:rr(ka))===!1)continue;const _a=Mn.indexOf(ka),va=Kn[_a];if(!va)continue;const{direction:ci,speed:ni}=xe(ka,va,Da,ue,ra);for(const fi of["x","y"])na[fi][ci[fi]]||(ni[fi]=0,ci[fi]=0);if(ni.x>0||ni.y>0){ua(),xa.current=ka,Ya(si,xr),Qn.current=ni,Ga.current=ci;return}}Qn.current={x:0,y:0},Ga.current={x:0,y:0},ua()},[ue,si,rr,ua,Ir,xr,JSON.stringify(Da),JSON.stringify(na),Ya,Mn,Qa,Kn,JSON.stringify(ra)])}const Mt={x:{[te.Backward]:!1,[te.Forward]:!1},y:{[te.Backward]:!1,[te.Forward]:!1}};function be(Jt){let{delta:ue,disabled:Pe}=Jt;const rr=(0,w.D9)(ue);return(0,w.Gj)(Or=>{if(Pe||!rr||!Or)return Mt;const Ir={x:Math.sign(ue.x-rr.x),y:Math.sign(ue.y-rr.y)};return{x:{[te.Backward]:Or.x[te.Backward]||Ir.x===-1,[te.Forward]:Or.x[te.Forward]||Ir.x===1},y:{[te.Backward]:Or.y[te.Backward]||Ir.y===-1,[te.Forward]:Or.y[te.Forward]||Ir.y===1}}},[Pe,ue,rr])}function Nt(Jt,ue){const Pe=ue!==null?Jt.get(ue):void 0,rr=Pe?Pe.node.current:null;return(0,w.Gj)(Or=>{var Ir;return ue===null?null:(Ir=rr!=null?rr:Or)!=null?Ir:null},[rr,ue])}function Ht(Jt,ue){return(0,g.useMemo)(()=>Jt.reduce((Pe,rr)=>{const{sensor:Or}=rr,Ir=Or.activators.map(xr=>({eventName:xr.eventName,handler:ue(xr.handler,rr)}));return[...Pe,...Ir]},[]),[Jt,ue])}var dt;(function(Jt){Jt[Jt.Always=0]="Always",Jt[Jt.BeforeDragging=1]="BeforeDragging",Jt[Jt.WhileDragging=2]="WhileDragging"})(dt||(dt={}));var Gt;(function(Jt){Jt.Optimized="optimized"})(Gt||(Gt={}));const tt=new Map;function ot(Jt,ue){let{dragging:Pe,dependencies:rr,config:Or}=ue;const[Ir,xr]=(0,g.useState)(null),{frequency:Kr,measure:un,strategy:Mn}=Or,Kn=(0,g.useRef)(Jt),Un=Qn(),ra=(0,w.Ey)(Un),na=(0,g.useCallback)(function(Ga){Ga===void 0&&(Ga=[]),!ra.current&&xr(Da=>Da===null?Ga:Da.concat(Ga.filter(xa=>!Da.includes(xa))))},[ra]),Ya=(0,g.useRef)(null),ua=(0,w.Gj)(Ga=>{if(Un&&!Pe)return tt;if(!Ga||Ga===tt||Kn.current!==Jt||Ir!=null){const Da=new Map;for(let xa of Jt){if(!xa)continue;if(Ir&&Ir.length>0&&!Ir.includes(xa.id)&&xa.rect.current){Da.set(xa.id,xa.rect.current);continue}const si=xa.node.current,Qa=si?new on(un(si),si):null;xa.rect.current=Qa,Qa&&Da.set(xa.id,Qa)}return Da}return Ga},[Jt,Ir,Pe,Un,un]);return(0,g.useEffect)(()=>{Kn.current=Jt},[Jt]),(0,g.useEffect)(()=>{Un||na()},[Pe,Un]),(0,g.useEffect)(()=>{Ir&&Ir.length>0&&xr(null)},[JSON.stringify(Ir)]),(0,g.useEffect)(()=>{Un||typeof Kr!="number"||Ya.current!==null||(Ya.current=setTimeout(()=>{na(),Ya.current=null},Kr))},[Kr,Un,na,...rr]),{droppableRects:ua,measureDroppableContainers:na,measuringScheduled:Ir!=null};function Qn(){switch(Mn){case dt.Always:return!1;case dt.BeforeDragging:return Pe;default:return!Pe}}}function k(Jt,ue){return(0,w.Gj)(Pe=>Jt?Pe||(typeof ue=="function"?ue(Jt):Jt):null,[ue,Jt])}function C(Jt,ue){return k(Jt,ue)}function I(Jt){let{callback:ue,disabled:Pe}=Jt;const rr=(0,w.zX)(ue),Or=(0,g.useMemo)(()=>{if(Pe||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:Ir}=window;return new Ir(rr)},[rr,Pe]);return(0,g.useEffect)(()=>()=>Or==null?void 0:Or.disconnect(),[Or]),Or}function H(Jt){let{callback:ue,disabled:Pe}=Jt;const rr=(0,w.zX)(ue),Or=(0,g.useMemo)(()=>{if(Pe||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:Ir}=window;return new Ir(rr)},[Pe]);return(0,g.useEffect)(()=>()=>Or==null?void 0:Or.disconnect(),[Or]),Or}function gt(Jt){return new on(At(Jt),Jt)}function zt(Jt,ue,Pe){ue===void 0&&(ue=gt);const[rr,Or]=(0,g.useReducer)(Kr,null),Ir=I({callback(un){if(Jt)for(const Mn of un){const{type:Kn,target:Un}=Mn;if(Kn==="childList"&&Un instanceof HTMLElement&&Un.contains(Jt)){Or();break}}}}),xr=H({callback:Or});return(0,w.LI)(()=>{Or(),Jt?(xr==null||xr.observe(Jt),Ir==null||Ir.observe(document.body,{childList:!0,subtree:!0})):(xr==null||xr.disconnect(),Ir==null||Ir.disconnect())},[Jt]),rr;function Kr(un){if(!Jt)return null;if(Jt.isConnected===!1){var Mn;return(Mn=un!=null?un:Pe)!=null?Mn:null}const Kn=ue(Jt);return JSON.stringify(un)===JSON.stringify(Kn)?un:Kn}}function Rt(Jt){const ue=k(Jt);return Z(Jt,ue)}const qt=[];function Te(Jt){const ue=(0,g.useRef)(Jt),Pe=(0,w.Gj)(rr=>Jt?rr&&rr!==qt&&Jt&&ue.current&&Jt.parentNode===ue.current.parentNode?rr:ie(Jt):qt,[Jt]);return(0,g.useEffect)(()=>{ue.current=Jt},[Jt]),Pe}function he(Jt){const[ue,Pe]=(0,g.useState)(null),rr=(0,g.useRef)(Jt),Or=(0,g.useCallback)(Ir=>{const xr=Pt(Ir.target);xr&&Pe(Kr=>Kr?(Kr.set(xr,Ut(xr)),new Map(Kr)):null)},[]);return(0,g.useEffect)(()=>{const Ir=rr.current;if(Jt!==Ir){xr(Ir);const Kr=Jt.map(un=>{const Mn=Pt(un);return Mn?(Mn.addEventListener("scroll",Or,{passive:!0}),[Mn,Ut(Mn)]):null}).filter(un=>un!=null);Pe(Kr.length?new Map(Kr):null),rr.current=Jt}return()=>{xr(Jt),xr(Ir)};function xr(Kr){Kr.forEach(un=>{const Mn=Pt(un);Mn==null||Mn.removeEventListener("scroll",Or)})}},[Or,Jt]),(0,g.useMemo)(()=>Jt.length?ue?Array.from(ue.values()).reduce((Ir,xr)=>(0,w.IH)(Ir,xr),X):Ae(Jt):X,[Jt,ue])}function Ue(Jt,ue){ue===void 0&&(ue=[]);const Pe=(0,g.useRef)(null);return(0,g.useEffect)(()=>{Pe.current=null},ue),(0,g.useEffect)(()=>{const rr=Jt!==X;rr&&!Pe.current&&(Pe.current=Jt),!rr&&Pe.current&&(Pe.current=null)},[Jt]),Pe.current?(0,w.$X)(Jt,Pe.current):X}function cr(Jt){(0,g.useEffect)(()=>{if(!w.Nq)return;const ue=Jt.map(Pe=>{let{sensor:rr}=Pe;return rr.setup==null?void 0:rr.setup()});return()=>{for(const Pe of ue)Pe==null||Pe()}},Jt.map(ue=>{let{sensor:Pe}=ue;return Pe}))}function Ve(Jt,ue){return(0,g.useMemo)(()=>Jt.reduce((Pe,rr)=>{let{eventName:Or,handler:Ir}=rr;return Pe[Or]=xr=>{Ir(xr,ue)},Pe},{}),[Jt,ue])}function Tr(Jt){return(0,g.useMemo)(()=>Jt?xt(Jt):null,[Jt])}const nn=[];function He(Jt,ue){ue===void 0&&(ue=At);const[Pe]=Jt,rr=Tr(Pe?(0,w.Jj)(Pe):null),[Or,Ir]=(0,g.useReducer)(Kr,nn),xr=H({callback:Ir});return Jt.length>0&&Or===nn&&Ir(),(0,w.LI)(()=>{Jt.length?Jt.forEach(un=>xr==null?void 0:xr.observe(un)):(xr==null||xr.disconnect(),Ir())},[Jt]),Or;function Kr(){return Jt.length?Jt.map(un=>ye(un)?rr:new on(ue(un),un)):nn}}function ur(Jt){if(!Jt)return null;if(Jt.children.length>1)return Jt;const ue=Jt.children[0];return(0,w.Re)(ue)?ue:Jt}function Ar(Jt){let{measure:ue}=Jt;const[Pe,rr]=(0,g.useState)(null),Or=(0,g.useCallback)(Mn=>{for(const{target:Kn}of Mn)if((0,w.Re)(Kn)){rr(Un=>{const ra=ue(Kn);return Un?lo(wa({},Un),{width:ra.width,height:ra.height}):ra});break}},[ue]),Ir=H({callback:Or}),xr=(0,g.useCallback)(Mn=>{const Kn=ur(Mn);Ir==null||Ir.disconnect(),Kn&&(Ir==null||Ir.observe(Kn)),rr(Kn?ue(Kn):null)},[ue,Ir]),[Kr,un]=(0,w.wm)(xr);return(0,g.useMemo)(()=>({nodeRef:Kr,rect:Pe,setRef:un}),[Pe,Kr,un])}const Cr=[{sensor:Zr,options:{}},{sensor:jr,options:{}}],se={current:{}},Xt={draggable:{measure:Ot},droppable:{measure:Ot,strategy:dt.WhileDragging,frequency:Gt.Optimized},dragOverlay:{measure:At}};class fe extends Map{get(ue){var Pe;return ue!=null&&(Pe=super.get(ue))!=null?Pe:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(ue=>{let{disabled:Pe}=ue;return!Pe})}getNodeFor(ue){var Pe,rr;return(Pe=(rr=this.get(ue))==null?void 0:rr.node.current)!=null?Pe:void 0}}const Me={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new fe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:m},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xt,measureDroppableContainers:m,windowRect:null,measuringScheduled:!1},pe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:m,draggableNodes:new Map,over:null,measureDroppableContainers:m},Re=(0,g.createContext)(pe),nr=(0,g.createContext)(Me);function fr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new fe}}}function tn(Jt,ue){switch(ue.type){case B.DragStart:return lo(wa({},Jt),{draggable:lo(wa({},Jt.draggable),{initialCoordinates:ue.initialCoordinates,active:ue.active})});case B.DragMove:return Jt.draggable.active?lo(wa({},Jt),{draggable:lo(wa({},Jt.draggable),{translate:{x:ue.coordinates.x-Jt.draggable.initialCoordinates.x,y:ue.coordinates.y-Jt.draggable.initialCoordinates.y}})}):Jt;case B.DragEnd:case B.DragCancel:return lo(wa({},Jt),{draggable:lo(wa({},Jt.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case B.RegisterDroppable:{const{element:Pe}=ue,{id:rr}=Pe,Or=new fe(Jt.droppable.containers);return Or.set(rr,Pe),lo(wa({},Jt),{droppable:lo(wa({},Jt.droppable),{containers:Or})})}case B.SetDroppableDisabled:{const{id:Pe,key:rr,disabled:Or}=ue,Ir=Jt.droppable.containers.get(Pe);if(!Ir||rr!==Ir.key)return Jt;const xr=new fe(Jt.droppable.containers);return xr.set(Pe,lo(wa({},Ir),{disabled:Or})),lo(wa({},Jt),{droppable:lo(wa({},Jt.droppable),{containers:xr})})}case B.UnregisterDroppable:{const{id:Pe,key:rr}=ue,Or=Jt.droppable.containers.get(Pe);if(!Or||rr!==Or.key)return Jt;const Ir=new fe(Jt.droppable.containers);return Ir.delete(Pe),lo(wa({},Jt),{droppable:lo(wa({},Jt.droppable),{containers:Ir})})}default:return Jt}}function Ln(Jt){let{disabled:ue}=Jt;const{active:Pe,activatorEvent:rr,draggableNodes:Or}=(0,g.useContext)(Re),Ir=(0,w.D9)(rr),xr=(0,w.D9)(Pe==null?void 0:Pe.id);return(0,g.useEffect)(()=>{if(!ue&&!rr&&Ir&&xr!=null){if(!(0,w.vd)(Ir)||document.activeElement===Ir.target)return;const Kr=Or.get(xr);if(!Kr)return;const{activatorNode:un,node:Mn}=Kr;if(!un.current&&!Mn.current)return;requestAnimationFrame(()=>{for(const Kn of[un.current,Mn.current]){if(!Kn)continue;const Un=(0,w.so)(Kn);if(Un){Un.focus();break}}})}},[rr,ue,Or,xr,Ir]),null}function sn(Jt,ue){let Or=ue,{transform:Pe}=Or,rr=_h(Or,["transform"]);return Jt!=null&&Jt.length?Jt.reduce((Ir,xr)=>xr(wa({transform:Ir},rr)),Pe):Pe}function Xn(Jt){return(0,g.useMemo)(()=>({draggable:wa(wa({},Xt.draggable),Jt==null?void 0:Jt.draggable),droppable:wa(wa({},Xt.droppable),Jt==null?void 0:Jt.droppable),dragOverlay:wa(wa({},Xt.dragOverlay),Jt==null?void 0:Jt.dragOverlay)}),[Jt==null?void 0:Jt.draggable,Jt==null?void 0:Jt.droppable,Jt==null?void 0:Jt.dragOverlay])}function an(Jt){let{activeNode:ue,measure:Pe,initialRect:rr,config:Or=!0}=Jt;const Ir=(0,g.useRef)(!1),{x:xr,y:Kr}=typeof Or=="boolean"?{x:Or,y:Or}:Or;(0,w.LI)(()=>{if(!xr&&!Kr||!ue){Ir.current=!1;return}if(Ir.current||!rr)return;const Mn=ue==null?void 0:ue.node.current;if(!Mn||Mn.isConnected===!1)return;const Kn=Pe(Mn),Un=Z(Kn,rr);if(xr||(Un.x=0),Kr||(Un.y=0),Ir.current=!0,Math.abs(Un.x)>0||Math.abs(Un.y)>0){const ra=re(Mn);ra&&ra.scrollBy({top:Un.y,left:Un.x})}},[ue,xr,Kr,rr,Pe])}const Bn=(0,g.createContext)(lo(wa({},X),{scaleX:1,scaleY:1}));var Jn;(function(Jt){Jt[Jt.Uninitialized=0]="Uninitialized",Jt[Jt.Initializing=1]="Initializing",Jt[Jt.Initialized=2]="Initialized"})(Jn||(Jn={}));const oa=(0,g.memo)(function(ue){var Pe,rr,Or,Ir;let Eu=ue,{id:xr,accessibility:Kr,autoScroll:un=!0,children:Mn,sensors:Kn=Cr,collisionDetection:Un=ft,measuring:ra,modifiers:na}=Eu,Ya=_h(Eu,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const ua=(0,g.useReducer)(tn,void 0,fr),[Qn,Ga]=ua,[Da,xa]=y(),[si,Qa]=(0,g.useState)(Jn.Uninitialized),ka=si===Jn.Initialized,{draggable:{active:_a,nodes:va,translate:ci},droppable:{containers:ni}}=Qn,fi=_a?va.get(_a):null,Fi=(0,g.useRef)({initial:null,translated:null}),Ai=(0,g.useMemo)(()=>{var Vi;return _a!=null?{id:_a,data:(Vi=fi==null?void 0:fi.data)!=null?Vi:se,rect:Fi}:null},[_a,fi]),Yi=(0,g.useRef)(null),[Oo,Io]=(0,g.useState)(null),[Li,Ba]=(0,g.useState)(null),vi=(0,w.Ey)(Ya,Object.values(Ya)),zi=(0,w.Ld)("DndDescribedBy",xr),Sa=(0,g.useMemo)(()=>ni.getEnabled(),[ni]),Xi=Xn(ra),{droppableRects:co,measureDroppableContainers:Mi,measuringScheduled:Lo}=ot(Sa,{dragging:ka,dependencies:[ci.x,ci.y],config:Xi.droppable}),pi=Nt(va,_a),fo=(0,g.useMemo)(()=>Li?(0,w.DC)(Li):null,[Li]),Go=xu(),ts=C(pi,Xi.draggable.measure);an({activeNode:_a?va.get(_a):null,config:Go.layoutShiftCompensation,initialRect:ts,measure:Xi.draggable.measure});const ji=zt(pi,Xi.draggable.measure,ts),Uo=zt(pi?pi.parentElement:null),Wo=(0,g.useRef)({activatorEvent:null,active:null,activeNode:pi,collisionRect:null,collisions:null,droppableRects:co,draggableNodes:va,draggingNode:null,draggingNodeRect:null,droppableContainers:ni,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),fs=ni.getNodeFor((Pe=Wo.current.over)==null?void 0:Pe.id),ha=Ar({measure:Xi.dragOverlay.measure}),Wt=(rr=ha.nodeRef.current)!=null?rr:pi,Be=ka?(Or=ha.rect)!=null?Or:ji:null,tr=Boolean(ha.nodeRef.current&&ha.rect),mr=Rt(tr?null:ji),Vr=Tr(Wt?(0,w.Jj)(Wt):null),cn=Te(ka?fs!=null?fs:pi:null),Fn=He(cn),Ia=sn(na,{transform:{x:ci.x-mr.x,y:ci.y-mr.y,scaleX:1,scaleY:1},activatorEvent:Li,active:Ai,activeNodeRect:ji,containerNodeRect:Uo,draggingNodeRect:Be,over:Wo.current.over,overlayNodeRect:ha.rect,scrollableAncestors:cn,scrollableAncestorRects:Fn,windowRect:Vr}),di=fo?(0,w.IH)(fo,ci):null,no=he(cn),wo=Ue(no),ds=Ue(no,[ji]),Oi=(0,w.IH)(Ia,wo),ao=Be?bt(Be,Ia):null,Yo=Ai&&ao?Un({active:Ai,collisionRect:ao,droppableRects:co,droppableContainers:Sa,pointerCoordinates:di}):null,hs=Q(Yo,"id"),[qo,Es]=(0,g.useState)(null),As=tr?Ia:(0,w.IH)(Ia,ds),ws=Et(As,(Ir=qo==null?void 0:qo.rect)!=null?Ir:null,ji),nu=(0,g.useCallback)((Vi,So)=>{let{sensor:Ro,options:h}=So;if(Yi.current==null)return;const Y=va.get(Yi.current);if(!Y)return;const wt=Vi.nativeEvent,Ft=new Ro({active:Yi.current,activeNode:Y,event:wt,options:h,context:Wo,onStart(le){const de=Yi.current;if(de==null)return;const _e=va.get(de);if(!_e)return;const{onDragStart:Le}=vi.current,Ye={active:{id:de,data:_e.data,rect:Fi}};(0,R.unstable_batchedUpdates)(()=>{Le==null||Le(Ye),Qa(Jn.Initializing),Ga({type:B.DragStart,initialCoordinates:le,active:de}),Da({type:"onDragStart",event:Ye})})},onMove(le){Ga({type:B.DragMove,coordinates:le})},onEnd:Qt(B.DragEnd),onCancel:Qt(B.DragCancel)});(0,R.unstable_batchedUpdates)(()=>{Io(Ft),Ba(Vi.nativeEvent)});function Qt(le){return function(){return B0(this,null,function*(){const{active:_e,collisions:Le,over:Ye,scrollAdjustedTranslate:or}=Wo.current;let Br=null;if(_e&&or){const{cancelDrop:Gr}=vi.current;Br={activatorEvent:wt,active:_e,collisions:Le,delta:or,over:Ye},le===B.DragEnd&&typeof Gr=="function"&&(yield Promise.resolve(Gr(Br)))&&(le=B.DragCancel)}Yi.current=null,(0,R.unstable_batchedUpdates)(()=>{Ga({type:le}),Qa(Jn.Uninitialized),Es(null),Io(null),Ba(null);const Gr=le===B.DragEnd?"onDragEnd":"onDragCancel";if(Br){const Fr=vi.current[Gr];Fr==null||Fr(Br),Da({type:Gr,event:Br})}})})}}},[va]),Ko=(0,g.useCallback)((Vi,So)=>(Ro,h)=>{const Y=Ro.nativeEvent,wt=va.get(h);if(Yi.current!==null||!wt||Y.dndKit||Y.defaultPrevented)return;const Ft={active:wt};Vi(Ro,So.options,Ft)===!0&&(Y.dndKit={capturedBy:So.sensor},Yi.current=h,nu(Ro,So))},[va,nu]),os=Ht(Kn,Ko);cr(Kn),(0,w.LI)(()=>{ji&&si===Jn.Initializing&&Qa(Jn.Initialized)},[ji,si]),(0,g.useEffect)(()=>{const{onDragMove:Vi}=vi.current,{active:So,activatorEvent:Ro,collisions:h,over:Y}=Wo.current;if(!So||!Ro)return;const wt={active:So,activatorEvent:Ro,collisions:h,delta:{x:Oi.x,y:Oi.y},over:Y};(0,R.unstable_batchedUpdates)(()=>{Vi==null||Vi(wt),Da({type:"onDragMove",event:wt})})},[Oi.x,Oi.y]),(0,g.useEffect)(()=>{const{active:Vi,activatorEvent:So,collisions:Ro,droppableContainers:h,scrollAdjustedTranslate:Y}=Wo.current;if(!Vi||Yi.current==null||!So||!Y)return;const{onDragOver:wt}=vi.current,Ft=h.get(hs),Qt=Ft&&Ft.rect.current?{id:Ft.id,rect:Ft.rect.current,data:Ft.data,disabled:Ft.disabled}:null,le={active:Vi,activatorEvent:So,collisions:Ro,delta:{x:Y.x,y:Y.y},over:Qt};(0,R.unstable_batchedUpdates)(()=>{Es(Qt),wt==null||wt(le),Da({type:"onDragOver",event:le})})},[hs]),(0,w.LI)(()=>{Wo.current={activatorEvent:Li,active:Ai,activeNode:pi,collisionRect:ao,collisions:Yo,droppableRects:co,draggableNodes:va,draggingNode:Wt,draggingNodeRect:Be,droppableContainers:ni,over:qo,scrollableAncestors:cn,scrollAdjustedTranslate:Oi},Fi.current={initial:Be,translated:ao}},[Ai,pi,Yo,ao,va,Wt,Be,co,ni,qo,cn,Oi]),$t(lo(wa({},Go),{delta:ci,draggingRect:ao,pointerCoordinates:di,scrollableAncestors:cn,scrollableAncestorRects:Fn}));const vs=(0,g.useMemo)(()=>({active:Ai,activeNode:pi,activeNodeRect:ji,activatorEvent:Li,collisions:Yo,containerNodeRect:Uo,dragOverlay:ha,draggableNodes:va,droppableContainers:ni,droppableRects:co,over:qo,measureDroppableContainers:Mi,scrollableAncestors:cn,scrollableAncestorRects:Fn,measuringConfiguration:Xi,measuringScheduled:Lo,windowRect:Vr}),[Ai,pi,ji,Li,Yo,Uo,ha,va,ni,co,qo,Mi,cn,Fn,Xi,Lo,Vr]),No=(0,g.useMemo)(()=>({activatorEvent:Li,activators:os,active:Ai,activeNodeRect:ji,ariaDescribedById:{draggable:zi},dispatch:Ga,draggableNodes:va,over:qo,measureDroppableContainers:Mi}),[Li,os,Ai,ji,Ga,zi,va,qo,Mi]);return g.createElement(S.Provider,{value:xa},g.createElement(Re.Provider,{value:No},g.createElement(nr.Provider,{value:vs},g.createElement(Bn.Provider,{value:ws},Mn)),g.createElement(Ln,{disabled:(Kr==null?void 0:Kr.restoreFocus)===!1})),g.createElement(D,lo(wa({},Kr),{hiddenTextDescribedById:zi})));function xu(){const Vi=(Oo==null?void 0:Oo.autoScrollEnabled)===!1,So=typeof un=="object"?un.enabled===!1:un===!1,Ro=ka&&!Vi&&!So;return typeof un=="object"?lo(wa({},un),{enabled:Ro}):{enabled:Ro}}}),sa=(0,g.createContext)(null),xi="button",Na="Droppable";function Ra(Jt){let{id:ue,data:Pe,disabled:rr=!1,attributes:Or}=Jt;const Ir=(0,w.Ld)(Na),{activators:xr,activatorEvent:Kr,active:un,activeNodeRect:Mn,ariaDescribedById:Kn,draggableNodes:Un,over:ra}=(0,g.useContext)(Re),{role:na=xi,roleDescription:Ya="draggable",tabIndex:ua=0}=Or!=null?Or:{},Qn=(un==null?void 0:un.id)===ue,Ga=(0,g.useContext)(Qn?Bn:sa),[Da,xa]=(0,w.wm)(),[si,Qa]=(0,w.wm)(),ka=Ve(xr,ue),_a=(0,w.Ey)(Pe);(0,w.LI)(()=>(Un.set(ue,{id:ue,key:Ir,node:Da,activatorNode:si,data:_a}),()=>{const ci=Un.get(ue);ci&&ci.key===Ir&&Un.delete(ue)}),[Un,ue]);const va=(0,g.useMemo)(()=>({role:na,tabIndex:ua,"aria-disabled":rr,"aria-pressed":Qn&&na===xi?!0:void 0,"aria-roledescription":Ya,"aria-describedby":Kn.draggable}),[rr,na,ua,Qn,Ya,Kn.draggable]);return{active:un,activatorEvent:Kr,activeNodeRect:Mn,attributes:va,isDragging:Qn,listeners:rr?void 0:ka,node:Da,over:ra,setNodeRef:xa,setActivatorNodeRef:Qa,transform:Ga}}function ri(){return(0,g.useContext)(nr)}const Ci="Droppable",Ni={timeout:25};function Ri(Jt){let{data:ue,disabled:Pe=!1,id:rr,resizeObserverConfig:Or}=Jt;const Ir=(0,w.Ld)(Ci),{active:xr,dispatch:Kr,over:un,measureDroppableContainers:Mn}=(0,g.useContext)(Re),Kn=(0,g.useRef)({disabled:Pe}),Un=(0,g.useRef)(!1),ra=(0,g.useRef)(null),na=(0,g.useRef)(null),{disabled:Ya,updateMeasurementsFor:ua,timeout:Qn}=wa(wa({},Ni),Or),Ga=(0,w.Ey)(ua!=null?ua:rr),Da=(0,g.useCallback)(()=>{if(!Un.current){Un.current=!0;return}na.current!=null&&clearTimeout(na.current),na.current=setTimeout(()=>{Mn(Array.isArray(Ga.current)?Ga.current:[Ga.current]),na.current=null},Qn)},[Qn]),xa=H({callback:Da,disabled:Ya||!xr}),si=(0,g.useCallback)((va,ci)=>{xa&&(ci&&(xa.unobserve(ci),Un.current=!1),va&&xa.observe(va))},[xa]),[Qa,ka]=(0,w.wm)(si),_a=(0,w.Ey)(ue);return(0,g.useEffect)(()=>{!xa||!Qa.current||(xa.disconnect(),Un.current=!1,xa.observe(Qa.current))},[Qa,xa]),(0,w.LI)(()=>(Kr({type:B.RegisterDroppable,element:{id:rr,key:Ir,disabled:Pe,node:Qa,rect:ra,data:_a}}),()=>Kr({type:B.UnregisterDroppable,key:Ir,id:rr})),[rr]),(0,g.useEffect)(()=>{Pe!==Kn.current.disabled&&(Kr({type:B.SetDroppableDisabled,id:rr,key:Ir,disabled:Pe}),Kn.current.disabled=Pe)},[rr,Ir,Pe,Kr]),{active:xr,rect:ra,isOver:(un==null?void 0:un.id)===rr,node:Qa,over:un,setNodeRef:ka}}function pa(Jt){let{animation:ue,children:Pe}=Jt;const[rr,Or]=useState(null),[Ir,xr]=useState(null),Kr=usePrevious(Pe);return!Pe&&!rr&&Kr&&Or(Kr),useIsomorphicLayoutEffect(()=>{if(!Ir)return;const un=rr==null?void 0:rr.key,Mn=rr==null?void 0:rr.props.id;if(un==null||Mn==null){Or(null);return}Promise.resolve(ue(Mn,Ir)).then(()=>{Or(null)})},[ue,rr,Ir]),React.createElement(React.Fragment,null,Pe,rr?cloneElement(rr,{ref:xr}):null)}const ki={x:0,y:0,scaleX:1,scaleY:1};function eo(Jt){let{children:ue}=Jt;return React.createElement(Re.Provider,{value:pe},React.createElement(Bn.Provider,{value:ki},ue))}const za={position:"fixed",touchAction:"none"},Ei=Jt=>isKeyboardEvent(Jt)?"transform 250ms ease":void 0,Bi=null,Wi={duration:250,easing:"ease",keyframes:Jt=>{let{transform:{initial:ue,final:Pe}}=Jt;return[{transform:w.ux.Transform.toString(ue)},{transform:w.ux.Transform.toString(Pe)}]},sideEffects:(Jt=>ue=>{let{active:Pe,dragOverlay:rr}=ue;const Or={},{styles:Ir,className:xr}=Jt;if(Ir!=null&&Ir.active)for(const[Kr,un]of Object.entries(Ir.active))un!==void 0&&(Or[Kr]=Pe.node.style.getPropertyValue(Kr),Pe.node.style.setProperty(Kr,un));if(Ir!=null&&Ir.dragOverlay)for(const[Kr,un]of Object.entries(Ir.dragOverlay))un!==void 0&&rr.node.style.setProperty(Kr,un);return xr!=null&&xr.active&&Pe.node.classList.add(xr.active),xr!=null&&xr.dragOverlay&&rr.node.classList.add(xr.dragOverlay),function(){for(const[un,Mn]of Object.entries(Or))Pe.node.style.setProperty(un,Mn);xr!=null&&xr.active&&Pe.node.classList.remove(xr.active)}})({styles:{active:{opacity:"0"}}})};function ro(Jt){let{config:ue,draggableNodes:Pe,droppableContainers:rr,measuringConfiguration:Or}=Jt;return useEvent((Ir,xr)=>{if(ue===null)return;const Kr=Pe.get(Ir);if(!Kr)return;const un=Kr.node.current;if(!un)return;const Mn=ur(xr);if(!Mn)return;const{transform:Kn}=getWindow(xr).getComputedStyle(xr),Un=Ct(Kn);if(!Un)return;const ra=typeof ue=="function"?ue:mo(ue);return Mr(un,Or.draggable.measure),ra({active:{id:Ir,data:Kr.data,node:un,rect:Or.draggable.measure(un)},draggableNodes:Pe,dragOverlay:{node:xr,rect:Or.dragOverlay.measure(Mn)},droppableContainers:rr,measuringConfiguration:Or,transform:Un})})}function mo(Jt){const{duration:ue,easing:Pe,sideEffects:rr,keyframes:Or}=wa(wa({},Wi),Jt);return Ir=>{let Da=Ir,{active:xr,dragOverlay:Kr,transform:un}=Da,Mn=_h(Da,["active","dragOverlay","transform"]);if(!ue)return;const Kn={x:Kr.rect.left-xr.rect.left,y:Kr.rect.top-xr.rect.top},Un={scaleX:un.scaleX!==1?xr.rect.width*un.scaleX/Kr.rect.width:1,scaleY:un.scaleY!==1?xr.rect.height*un.scaleY/Kr.rect.height:1},ra=wa({x:un.x-Kn.x,y:un.y-Kn.y},Un),na=Or(lo(wa({},Mn),{active:xr,dragOverlay:Kr,transform:{initial:un,final:ra}})),[Ya]=na,ua=na[na.length-1];if(JSON.stringify(Ya)===JSON.stringify(ua))return;const Qn=rr==null?void 0:rr(wa({active:xr,dragOverlay:Kr},Mn)),Ga=Kr.node.animate(na,{duration:ue,easing:Pe,fill:"forwards"});return new Promise(xa=>{Ga.onfinish=()=>{Qn==null||Qn(),xa()}})}}let oi=0;function Ti(Jt){return useMemo(()=>{if(Jt!=null)return oi++,oi},[Jt])}const Hn=null},245587:function(Ne,G,_){"use strict";_.d(G,{Fo:function(){return z},PG:function(){return y},Rp:function(){return M},nB:function(){return it},qw:function(){return m}});var g=_(667294),R=_(960887),w=_(724285);function M(q,bt,Ct){const nt=q.slice();return nt.splice(Ct<0?nt.length+Ct:Ct,0,nt.splice(bt,1)[0]),nt}function P(q,bt,Ct){const nt=q.slice();return nt[bt]=q[Ct],nt[Ct]=q[bt],nt}function L(q,bt){return q.reduce((Ct,nt,ht)=>{const At=bt.get(nt);return At&&(Ct[ht]=At),Ct},Array(q.length))}function p(q){return q!==null&&q>=0}function b(q,bt){if(q===bt)return!0;if(q.length!==bt.length)return!1;for(let Ct=0;Ct<q.length;Ct++)if(q[Ct]!==bt[Ct])return!1;return!0}function S(q){return typeof q=="boolean"?{draggable:q,droppable:q}:q}const x={scaleX:1,scaleY:1},y=q=>{var bt;let{rects:Ct,activeNodeRect:nt,activeIndex:ht,overIndex:At,index:Ot}=q;const xt=(bt=Ct[ht])!=null?bt:nt;if(!xt)return null;const Dt=A(Ct,Ot,ht);if(Ot===ht){const Yt=Ct[At];return Yt?wa({x:ht<At?Yt.left+Yt.width-(xt.left+xt.width):Yt.left-xt.left,y:0},x):null}return Ot>ht&&Ot<=At?wa({x:-xt.width-Dt,y:0},x):Ot<ht&&Ot>=At?wa({x:xt.width+Dt,y:0},x):wa({x:0,y:0},x)};function A(q,bt,Ct){const nt=q[bt],ht=q[bt-1],At=q[bt+1];return!nt||!ht&&!At?0:Ct<bt?ht?nt.left-(ht.left+ht.width):At.left-(nt.left+nt.width):At?At.left-(nt.left+nt.width):nt.left-(ht.left+ht.width)}const E=q=>{let{rects:bt,activeIndex:Ct,overIndex:nt,index:ht}=q;const At=M(bt,nt,Ct),Ot=bt[ht],xt=At[ht];return!xt||!Ot?null:{x:xt.left-Ot.left,y:xt.top-Ot.top,scaleX:xt.width/Ot.width,scaleY:xt.height/Ot.height}},D=q=>{let{activeIndex:bt,index:Ct,rects:nt,overIndex:ht}=q,At,Ot;return Ct===bt&&(At=nt[Ct],Ot=nt[ht]),Ct===ht&&(At=nt[Ct],Ot=nt[bt]),!Ot||!At?null:{x:Ot.left-At.left,y:Ot.top-At.top,scaleX:Ot.width/At.width,scaleY:Ot.height/At.height}},B={scaleX:1,scaleY:1},m=q=>{var bt;let{activeIndex:Ct,activeNodeRect:nt,index:ht,rects:At,overIndex:Ot}=q;const xt=(bt=At[Ct])!=null?bt:nt;if(!xt)return null;if(ht===Ct){const Yt=At[Ot];return Yt?wa({x:0,y:Ct<Ot?Yt.top+Yt.height-(xt.top+xt.height):Yt.top-xt.top},B):null}const Dt=f(At,ht,Ct);return ht>Ct&&ht<=Ot?wa({x:0,y:-xt.height-Dt},B):ht<Ct&&ht>=Ot?wa({x:0,y:xt.height+Dt},B):wa({x:0,y:0},B)};function f(q,bt,Ct){const nt=q[bt],ht=q[bt-1],At=q[bt+1];return nt?Ct<bt?ht?nt.top-(ht.top+ht.height):At?At.top-(nt.top+nt.height):0:At?At.top-(nt.top+nt.height):ht?nt.top-(ht.top+ht.height):0:0}const W="Sortable",X=g.createContext({activeIndex:-1,containerId:W,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:E,disabled:{draggable:!1,droppable:!1}});function z(q){let{children:bt,id:Ct,items:nt,strategy:ht=E,disabled:At=!1}=q;const{active:Ot,dragOverlay:xt,droppableRects:Dt,over:Yt,measureDroppableContainers:ie}=(0,R.Cj)(),re=(0,w.Ld)(W,Ct),Pt=Boolean(xt.rect!==null),ee=(0,g.useMemo)(()=>nt.map(Ae=>typeof Ae=="object"&&"id"in Ae?Ae.id:Ae),[nt]),ce=Ot!=null,Ut=Ot?ee.indexOf(Ot.id):-1,te=Yt?ee.indexOf(Yt.id):-1,ye=(0,g.useRef)(ee),ge=!b(ee,ye.current),Kt=te!==-1&&Ut===-1||ge,xe=S(At);(0,w.LI)(()=>{ge&&ce&&ie(ee)},[ge,ee,ce,ie]),(0,g.useEffect)(()=>{ye.current=ee},[ee]);const Tt=(0,g.useMemo)(()=>({activeIndex:Ut,containerId:re,disabled:xe,disableTransforms:Kt,items:ee,overIndex:te,useDragOverlay:Pt,sortedRects:L(ee,Dt),strategy:ht}),[Ut,re,xe.draggable,xe.droppable,Kt,ee,te,Dt,Pt,ht]);return g.createElement(X.Provider,{value:Tt},bt)}const U=q=>{let{id:bt,items:Ct,activeIndex:nt,overIndex:ht}=q;return M(Ct,nt,ht).indexOf(bt)},j=q=>{let{containerId:bt,isSorting:Ct,wasDragging:nt,index:ht,items:At,newIndex:Ot,previousItems:xt,previousContainerId:Dt,transition:Yt}=q;return!Yt||!nt||xt!==At&&ht===Ot?!1:Ct?!0:Ot!==ht&&bt===Dt},V={duration:200,easing:"ease"},J="transform",Q=w.ux.Transition.toString({property:J,duration:0,easing:"linear"}),et={roleDescription:"sortable"};function ut(q){let{disabled:bt,index:Ct,node:nt,rect:ht}=q;const[At,Ot]=(0,g.useState)(null),xt=(0,g.useRef)(Ct);return(0,w.LI)(()=>{if(!bt&&Ct!==xt.current&&nt.current){const Dt=ht.current;if(Dt){const Yt=(0,R.VK)(nt.current,{ignoreTransform:!0}),ie={x:Dt.left-Yt.left,y:Dt.top-Yt.top,scaleX:Dt.width/Yt.width,scaleY:Dt.height/Yt.height};(ie.x||ie.y)&&Ot(ie)}}Ct!==xt.current&&(xt.current=Ct)},[bt,Ct,nt,ht]),(0,g.useEffect)(()=>{At&&Ot(null)},[At]),At}function it(q){let{animateLayoutChanges:bt=j,attributes:Ct,disabled:nt,data:ht,getNewIndex:At=U,id:Ot,strategy:xt,resizeObserverConfig:Dt,transition:Yt=V}=q;const{items:ie,containerId:re,activeIndex:Pt,disabled:ee,disableTransforms:ce,sortedRects:Ut,overIndex:te,useDragOverlay:ye,strategy:ge}=(0,g.useContext)(X),Kt=yt(nt,ee),xe=ie.indexOf(Ot),Tt=(0,g.useMemo)(()=>wa({sortable:{containerId:re,index:xe,items:ie}},ht),[re,ht,xe,ie]),Ae=(0,g.useMemo)(()=>ie.slice(ie.indexOf(Ot)),[ie,Ot]),{rect:br,node:Sr,isOver:Mr,setNodeRef:Pr}=(0,R.Zj)({id:Ot,data:Tt,disabled:Kt.droppable,resizeObserverConfig:wa({updateMeasurementsFor:Ae},Dt)}),{active:on,activatorEvent:Hr,activeNodeRect:Sn,attributes:In,setNodeRef:Nn,listeners:vr,isDragging:Ze,over:Er,setActivatorNodeRef:ke,transform:Xe}=(0,R.O1)({id:Ot,data:Tt,attributes:wa(wa({},et),Ct),disabled:Kt.draggable}),jr=(0,w.HB)(Pr,Nn),rn=Boolean(on),ir=rn&&!ce&&p(Pt)&&p(te),Lr=!ye&&Ze,dn=Lr&&ir?Xe:null,Zr=xt!=null?xt:ge,wn=ir?dn!=null?dn:Zr({rects:Ut,activeNodeRect:Sn,activeIndex:Pt,overIndex:te,index:xe}):null,ln=p(Pt)&&p(te)?At({id:Ot,items:ie,activeIndex:Pt,overIndex:te}):xe,bn=on==null?void 0:on.id,Pn=(0,g.useRef)({activeId:bn,items:ie,newIndex:ln,containerId:re}),at=ie!==Pn.current.items,je=bt({active:on,containerId:re,isDragging:Ze,isSorting:rn,id:Ot,index:xe,items:ie,newIndex:Pn.current.newIndex,previousItems:Pn.current.items,previousContainerId:Pn.current.containerId,transition:Yt,wasDragging:Pn.current.activeId!=null}),Zt=ut({disabled:!je,index:xe,node:Sr,rect:br});return(0,g.useEffect)(()=>{rn&&Pn.current.newIndex!==ln&&(Pn.current.newIndex=ln),re!==Pn.current.containerId&&(Pn.current.containerId=re),ie!==Pn.current.items&&(Pn.current.items=ie)},[rn,ln,re,ie]),(0,g.useEffect)(()=>{if(bn===Pn.current.activeId)return;if(bn&&!Pn.current.activeId){Pn.current.activeId=bn;return}const Mt=setTimeout(()=>{Pn.current.activeId=bn},50);return()=>clearTimeout(Mt)},[bn]),{active:on,activeIndex:Pt,attributes:In,data:Tt,rect:br,index:xe,newIndex:ln,items:ie,isOver:Mr,isSorting:rn,isDragging:Ze,listeners:vr,node:Sr,overIndex:te,over:Er,setNodeRef:jr,setActivatorNodeRef:ke,setDroppableNodeRef:Pr,setDraggableNodeRef:Nn,transform:Zt!=null?Zt:wn,transition:$t()};function $t(){if(Zt||at&&Pn.current.newIndex===xe)return Q;if(!(Lr&&!(0,w.vd)(Hr)||!Yt)&&(rn||je))return w.ux.Transition.toString(lo(wa({},Yt),{property:J}))}}function yt(q,bt){var Ct,nt;return typeof q=="boolean"?{draggable:q,droppable:!1}:{draggable:(Ct=q==null?void 0:q.draggable)!=null?Ct:bt.draggable,droppable:(nt=q==null?void 0:q.droppable)!=null?nt:bt.droppable}}function ft(q){if(!q)return!1;const bt=q.data.current;return!!(bt&&"sortable"in bt&&typeof bt.sortable=="object"&&"containerId"in bt.sortable&&"items"in bt.sortable&&"index"in bt.sortable)}const Bt=[R.g4.Down,R.g4.Right,R.g4.Up,R.g4.Left],St=(q,bt)=>{let{context:{active:Ct,collisionRect:nt,droppableRects:ht,droppableContainers:At,over:Ot,scrollableAncestors:xt}}=bt;if(Bt.includes(q.code)){if(q.preventDefault(),!Ct||!nt)return;const Dt=[];At.getEnabled().forEach(re=>{if(!re||re!=null&&re.disabled)return;const Pt=ht.get(re.id);if(Pt)switch(q.code){case KeyboardCode.Down:nt.top<Pt.top&&Dt.push(re);break;case KeyboardCode.Up:nt.top>Pt.top&&Dt.push(re);break;case KeyboardCode.Left:nt.left>Pt.left&&Dt.push(re);break;case KeyboardCode.Right:nt.left<Pt.left&&Dt.push(re);break}});const Yt=closestCorners({active:Ct,collisionRect:nt,droppableRects:ht,droppableContainers:Dt,pointerCoordinates:null});let ie=getFirstCollision(Yt,"id");if(ie===(Ot==null?void 0:Ot.id)&&Yt.length>1&&(ie=Yt[1].id),ie!=null){const re=At.get(Ct.id),Pt=At.get(ie),ee=Pt?ht.get(Pt.id):null,ce=Pt==null?void 0:Pt.node.current;if(ce&&ee&&re&&Pt){const te=getScrollableAncestors(ce).some((Ae,br)=>xt[br]!==Ae),ye=Et(re,Pt),ge=Z(re,Pt),Kt=te||!ye?{x:0,y:0}:{x:ge?nt.width-ee.width:0,y:ge?nt.height-ee.height:0},xe={x:ee.left,y:ee.top};return Kt.x&&Kt.y?xe:subtract(xe,Kt)}}}};function Et(q,bt){return!ft(q)||!ft(bt)?!1:q.data.current.sortable.containerId===bt.data.current.sortable.containerId}function Z(q,bt){return!ft(q)||!ft(bt)||!Et(q,bt)?!1:q.data.current.sortable.index<bt.data.current.sortable.index}},724285:function(Ne,G,_){"use strict";_.d(G,{$X:function(){return j},D9:function(){return f},DC:function(){return et},Ey:function(){return D},FJ:function(){return M},Gj:function(){return B},HB:function(){return R},IH:function(){return U},Jj:function(){return L},LI:function(){return y},Ld:function(){return X},Nq:function(){return w},Re:function(){return b},UG:function(){return P},Yz:function(){return E},qk:function(){return p},r3:function(){return x},so:function(){return yt},ux:function(){return ut},vZ:function(){return S},vd:function(){return J},wm:function(){return m},zX:function(){return A}});var g=_(667294);function R(){for(var ft=arguments.length,Bt=new Array(ft),St=0;St<ft;St++)Bt[St]=arguments[St];return(0,g.useMemo)(()=>Et=>{Bt.forEach(Z=>Z(Et))},Bt)}const w=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function M(ft){const Bt=Object.prototype.toString.call(ft);return Bt==="[object Window]"||Bt==="[object global]"}function P(ft){return"nodeType"in ft}function L(ft){var Bt,St;return ft?M(ft)?ft:P(ft)&&(Bt=(St=ft.ownerDocument)==null?void 0:St.defaultView)!=null?Bt:window:window}function p(ft){const{Document:Bt}=L(ft);return ft instanceof Bt}function b(ft){return M(ft)?!1:ft instanceof L(ft).HTMLElement}function S(ft){return ft instanceof L(ft).SVGElement}function x(ft){return ft?M(ft)?ft.document:P(ft)?p(ft)?ft:b(ft)?ft.ownerDocument:document:document:document}const y=w?g.useLayoutEffect:g.useEffect;function A(ft){const Bt=(0,g.useRef)(ft);return y(()=>{Bt.current=ft}),(0,g.useCallback)(function(){for(var St=arguments.length,Et=new Array(St),Z=0;Z<St;Z++)Et[Z]=arguments[Z];return Bt.current==null?void 0:Bt.current(...Et)},[])}function E(){const ft=(0,g.useRef)(null),Bt=(0,g.useCallback)((Et,Z)=>{ft.current=setInterval(Et,Z)},[]),St=(0,g.useCallback)(()=>{ft.current!==null&&(clearInterval(ft.current),ft.current=null)},[]);return[Bt,St]}function D(ft,Bt){Bt===void 0&&(Bt=[ft]);const St=(0,g.useRef)(ft);return y(()=>{St.current!==ft&&(St.current=ft)},Bt),St}function B(ft,Bt){const St=(0,g.useRef)();return(0,g.useMemo)(()=>{const Et=ft(St.current);return St.current=Et,Et},[...Bt])}function m(ft){const Bt=A(ft),St=(0,g.useRef)(null),Et=(0,g.useCallback)(Z=>{Z!==St.current&&(Bt==null||Bt(Z,St.current)),St.current=Z},[]);return[St,Et]}function f(ft){const Bt=(0,g.useRef)();return(0,g.useEffect)(()=>{Bt.current=ft},[ft]),Bt.current}let W={};function X(ft,Bt){return(0,g.useMemo)(()=>{if(Bt)return Bt;const St=W[ft]==null?0:W[ft]+1;return W[ft]=St,ft+"-"+St},[ft,Bt])}function z(ft){return function(Bt){for(var St=arguments.length,Et=new Array(St>1?St-1:0),Z=1;Z<St;Z++)Et[Z-1]=arguments[Z];return Et.reduce((q,bt)=>{const Ct=Object.entries(bt);for(const[nt,ht]of Ct){const At=q[nt];At!=null&&(q[nt]=At+ft*ht)}return q},wa({},Bt))}}const U=z(1),j=z(-1);function V(ft){return"clientX"in ft&&"clientY"in ft}function J(ft){if(!ft)return!1;const{KeyboardEvent:Bt}=L(ft.target);return Bt&&ft instanceof Bt}function Q(ft){if(!ft)return!1;const{TouchEvent:Bt}=L(ft.target);return Bt&&ft instanceof Bt}function et(ft){if(Q(ft)){if(ft.touches&&ft.touches.length){const{clientX:Bt,clientY:St}=ft.touches[0];return{x:Bt,y:St}}else if(ft.changedTouches&&ft.changedTouches.length){const{clientX:Bt,clientY:St}=ft.changedTouches[0];return{x:Bt,y:St}}}return V(ft)?{x:ft.clientX,y:ft.clientY}:null}const ut=Object.freeze({Translate:{toString(ft){if(!ft)return;const{x:Bt,y:St}=ft;return"translate3d("+(Bt?Math.round(Bt):0)+"px, "+(St?Math.round(St):0)+"px, 0)"}},Scale:{toString(ft){if(!ft)return;const{scaleX:Bt,scaleY:St}=ft;return"scaleX("+Bt+") scaleY("+St+")"}},Transform:{toString(ft){if(ft)return[ut.Translate.toString(ft),ut.Scale.toString(ft)].join(" ")}},Transition:{toString(ft){let{property:Bt,duration:St,easing:Et}=ft;return Bt+" "+St+"ms "+Et}}}),it="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function yt(ft){return ft.matches(it)?ft:ft.querySelector(it)}},971497:function(Ne,G,_){"use strict";_.r(G),_.d(G,{forceCenter:function(){return g},forceCollide:function(){return p},forceLink:function(){return A},forceManyBody:function(){return ft},forceRadial:function(){return Bt},forceSimulation:function(){return yt},forceX:function(){return St},forceY:function(){return Et}});function g(Z,q){var bt,Ct=1;Z==null&&(Z=0),q==null&&(q=0);function nt(){var ht,At=bt.length,Ot,xt=0,Dt=0;for(ht=0;ht<At;++ht)Ot=bt[ht],xt+=Ot.x,Dt+=Ot.y;for(xt=(xt/At-Z)*Ct,Dt=(Dt/At-q)*Ct,ht=0;ht<At;++ht)Ot=bt[ht],Ot.x-=xt,Ot.y-=Dt}return nt.initialize=function(ht){bt=ht},nt.x=function(ht){return arguments.length?(Z=+ht,nt):Z},nt.y=function(ht){return arguments.length?(q=+ht,nt):q},nt.strength=function(ht){return arguments.length?(Ct=+ht,nt):Ct},nt}var R=_(547148);function w(Z){return function(){return Z}}function M(Z){return(Z()-.5)*1e-6}function P(Z){return Z.x+Z.vx}function L(Z){return Z.y+Z.vy}function p(Z){var q,bt,Ct,nt=1,ht=1;typeof Z!="function"&&(Z=w(Z==null?1:+Z));function At(){for(var Dt,Yt=q.length,ie,re,Pt,ee,ce,Ut,te=0;te<ht;++te)for(ie=(0,R.Z)(q,P,L).visitAfter(Ot),Dt=0;Dt<Yt;++Dt)re=q[Dt],ce=bt[re.index],Ut=ce*ce,Pt=re.x+re.vx,ee=re.y+re.vy,ie.visit(ye);function ye(ge,Kt,xe,Tt,Ae){var br=ge.data,Sr=ge.r,Mr=ce+Sr;if(br){if(br.index>re.index){var Pr=Pt-br.x-br.vx,on=ee-br.y-br.vy,Hr=Pr*Pr+on*on;Hr<Mr*Mr&&(Pr===0&&(Pr=M(Ct),Hr+=Pr*Pr),on===0&&(on=M(Ct),Hr+=on*on),Hr=(Mr-(Hr=Math.sqrt(Hr)))/Hr*nt,re.vx+=(Pr*=Hr)*(Mr=(Sr*=Sr)/(Ut+Sr)),re.vy+=(on*=Hr)*Mr,br.vx-=Pr*(Mr=1-Mr),br.vy-=on*Mr)}return}return Kt>Pt+Mr||Tt<Pt-Mr||xe>ee+Mr||Ae<ee-Mr}}function Ot(Dt){if(Dt.data)return Dt.r=bt[Dt.data.index];for(var Yt=Dt.r=0;Yt<4;++Yt)Dt[Yt]&&Dt[Yt].r>Dt.r&&(Dt.r=Dt[Yt].r)}function xt(){if(q){var Dt,Yt=q.length,ie;for(bt=new Array(Yt),Dt=0;Dt<Yt;++Dt)ie=q[Dt],bt[ie.index]=+Z(ie,Dt,q)}}return At.initialize=function(Dt,Yt){q=Dt,Ct=Yt,xt()},At.iterations=function(Dt){return arguments.length?(ht=+Dt,At):ht},At.strength=function(Dt){return arguments.length?(nt=+Dt,At):nt},At.radius=function(Dt){return arguments.length?(Z=typeof Dt=="function"?Dt:w(+Dt),xt(),At):Z},At}var b=_(952677),S=_.n(b);function x(Z){return Z.index}function y(Z,q){var bt=Z.get(q);if(!bt)throw new Error("node not found: "+q);return bt}function A(Z){var q=x,bt=ie,Ct,nt=w(30),ht,At,Ot,xt,Dt,Yt=1;Z==null&&(Z=[]);function ie(Ut){return 1/Math.min(Ot[Ut.source.index],Ot[Ut.target.index])}function re(Ut){for(var te=0,ye=Z.length;te<Yt;++te)for(var ge=0,Kt,xe,Tt,Ae,br,Sr,Mr;ge<ye;++ge)Kt=Z[ge],xe=Kt.source,Tt=Kt.target,Ae=Tt.x+Tt.vx-xe.x-xe.vx||M(Dt),br=Tt.y+Tt.vy-xe.y-xe.vy||M(Dt),Sr=Math.sqrt(Ae*Ae+br*br),Sr=(Sr-ht[ge])/Sr*Ut*Ct[ge],Ae*=Sr,br*=Sr,Tt.vx-=Ae*(Mr=xt[ge]),Tt.vy-=br*Mr,xe.vx+=Ae*(Mr=1-Mr),xe.vy+=br*Mr}function Pt(){if(At){var Ut,te=At.length,ye=Z.length,ge=new Map(At.map(function(xe,Tt){return[q(xe,Tt,At),xe]})),Kt;for(Ut=0,Ot=new Array(te);Ut<ye;++Ut)Kt=Z[Ut],Kt.index=Ut,S()(Kt.source)!=="object"&&(Kt.source=y(ge,Kt.source)),S()(Kt.target)!=="object"&&(Kt.target=y(ge,Kt.target)),Ot[Kt.source.index]=(Ot[Kt.source.index]||0)+1,Ot[Kt.target.index]=(Ot[Kt.target.index]||0)+1;for(Ut=0,xt=new Array(ye);Ut<ye;++Ut)Kt=Z[Ut],xt[Ut]=Ot[Kt.source.index]/(Ot[Kt.source.index]+Ot[Kt.target.index]);Ct=new Array(ye),ee(),ht=new Array(ye),ce()}}function ee(){if(At)for(var Ut=0,te=Z.length;Ut<te;++Ut)Ct[Ut]=+bt(Z[Ut],Ut,Z)}function ce(){if(At)for(var Ut=0,te=Z.length;Ut<te;++Ut)ht[Ut]=+nt(Z[Ut],Ut,Z)}return re.initialize=function(Ut,te){At=Ut,Dt=te,Pt()},re.links=function(Ut){return arguments.length?(Z=Ut,Pt(),re):Z},re.id=function(Ut){return arguments.length?(q=Ut,re):q},re.iterations=function(Ut){return arguments.length?(Yt=+Ut,re):Yt},re.strength=function(Ut){return arguments.length?(bt=typeof Ut=="function"?Ut:w(+Ut),ee(),re):bt},re.distance=function(Ut){return arguments.length?(nt=typeof Ut=="function"?Ut:w(+Ut),ce(),re):nt},re}var E={value:function(){}};function D(){for(var Z=0,q=arguments.length,bt={},Ct;Z<q;++Z){if(!(Ct=arguments[Z]+"")||Ct in bt||/[\s.]/.test(Ct))throw new Error("illegal type: "+Ct);bt[Ct]=[]}return new B(bt)}function B(Z){this._=Z}function m(Z,q){return Z.trim().split(/^|\s+/).map(function(bt){var Ct="",nt=bt.indexOf(".");if(nt>=0&&(Ct=bt.slice(nt+1),bt=bt.slice(0,nt)),bt&&!q.hasOwnProperty(bt))throw new Error("unknown type: "+bt);return{type:bt,name:Ct}})}B.prototype=D.prototype={constructor:B,on:function(q,bt){var Ct=this._,nt=m(q+"",Ct),ht,At=-1,Ot=nt.length;if(arguments.length<2){for(;++At<Ot;)if((ht=(q=nt[At]).type)&&(ht=f(Ct[ht],q.name)))return ht;return}if(bt!=null&&typeof bt!="function")throw new Error("invalid callback: "+bt);for(;++At<Ot;)if(ht=(q=nt[At]).type)Ct[ht]=W(Ct[ht],q.name,bt);else if(bt==null)for(ht in Ct)Ct[ht]=W(Ct[ht],q.name,null);return this},copy:function(){var q={},bt=this._;for(var Ct in bt)q[Ct]=bt[Ct].slice();return new B(q)},call:function(q,bt){if((ht=arguments.length-2)>0)for(var Ct=new Array(ht),nt=0,ht,At;nt<ht;++nt)Ct[nt]=arguments[nt+2];if(!this._.hasOwnProperty(q))throw new Error("unknown type: "+q);for(At=this._[q],nt=0,ht=At.length;nt<ht;++nt)At[nt].value.apply(bt,Ct)},apply:function(q,bt,Ct){if(!this._.hasOwnProperty(q))throw new Error("unknown type: "+q);for(var nt=this._[q],ht=0,At=nt.length;ht<At;++ht)nt[ht].value.apply(bt,Ct)}};function f(Z,q){for(var bt=0,Ct=Z.length,nt;bt<Ct;++bt)if((nt=Z[bt]).name===q)return nt.value}function W(Z,q,bt){for(var Ct=0,nt=Z.length;Ct<nt;++Ct)if(Z[Ct].name===q){Z[Ct]=E,Z=Z.slice(0,Ct).concat(Z.slice(Ct+1));break}return bt!=null&&Z.push({name:q,value:bt}),Z}var X=D,z=_(235374),U=1664525,j=1013904223,V=4294967296;function J(){var Z=1;return function(){return(Z=(U*Z+j)%V)/V}}function Q(Z){return Z.x}function et(Z){return Z.y}var ut=10,it=Math.PI*(3-Math.sqrt(5));function yt(Z){var q,bt=1,Ct=.001,nt=1-Math.pow(Ct,1/300),ht=0,At=.6,Ot=new Map,xt=(0,z.HT)(ie),Dt=X("tick","end"),Yt=J();Z==null&&(Z=[]);function ie(){re(),Dt.call("tick",q),bt<Ct&&(xt.stop(),Dt.call("end",q))}function re(ce){var Ut,te=Z.length,ye;ce===void 0&&(ce=1);for(var ge=0;ge<ce;++ge)for(bt+=(ht-bt)*nt,Ot.forEach(function(Kt){Kt(bt)}),Ut=0;Ut<te;++Ut)ye=Z[Ut],ye.fx==null?ye.x+=ye.vx*=At:(ye.x=ye.fx,ye.vx=0),ye.fy==null?ye.y+=ye.vy*=At:(ye.y=ye.fy,ye.vy=0);return q}function Pt(){for(var ce=0,Ut=Z.length,te;ce<Ut;++ce){if(te=Z[ce],te.index=ce,te.fx!=null&&(te.x=te.fx),te.fy!=null&&(te.y=te.fy),isNaN(te.x)||isNaN(te.y)){var ye=ut*Math.sqrt(.5+ce),ge=ce*it;te.x=ye*Math.cos(ge),te.y=ye*Math.sin(ge)}(isNaN(te.vx)||isNaN(te.vy))&&(te.vx=te.vy=0)}}function ee(ce){return ce.initialize&&ce.initialize(Z,Yt),ce}return Pt(),q={tick:re,restart:function(){return xt.restart(ie),q},stop:function(){return xt.stop(),q},nodes:function(Ut){return arguments.length?(Z=Ut,Pt(),Ot.forEach(ee),q):Z},alpha:function(Ut){return arguments.length?(bt=+Ut,q):bt},alphaMin:function(Ut){return arguments.length?(Ct=+Ut,q):Ct},alphaDecay:function(Ut){return arguments.length?(nt=+Ut,q):+nt},alphaTarget:function(Ut){return arguments.length?(ht=+Ut,q):ht},velocityDecay:function(Ut){return arguments.length?(At=1-Ut,q):1-At},randomSource:function(Ut){return arguments.length?(Yt=Ut,Ot.forEach(ee),q):Yt},force:function(Ut,te){return arguments.length>1?(te==null?Ot.delete(Ut):Ot.set(Ut,ee(te)),q):Ot.get(Ut)},find:function(Ut,te,ye){var ge=0,Kt=Z.length,xe,Tt,Ae,br,Sr;for(ye==null?ye=1/0:ye*=ye,ge=0;ge<Kt;++ge)br=Z[ge],xe=Ut-br.x,Tt=te-br.y,Ae=xe*xe+Tt*Tt,Ae<ye&&(Sr=br,ye=Ae);return Sr},on:function(Ut,te){return arguments.length>1?(Dt.on(Ut,te),q):Dt.on(Ut)}}}function ft(){var Z,q,bt,Ct,nt=w(-30),ht,At=1,Ot=1/0,xt=.81;function Dt(Pt){var ee,ce=Z.length,Ut=(0,R.Z)(Z,Q,et).visitAfter(ie);for(Ct=Pt,ee=0;ee<ce;++ee)q=Z[ee],Ut.visit(re)}function Yt(){if(Z){var Pt,ee=Z.length,ce;for(ht=new Array(ee),Pt=0;Pt<ee;++Pt)ce=Z[Pt],ht[ce.index]=+nt(ce,Pt,Z)}}function ie(Pt){var ee=0,ce,Ut,te=0,ye,ge,Kt;if(Pt.length){for(ye=ge=Kt=0;Kt<4;++Kt)(ce=Pt[Kt])&&(Ut=Math.abs(ce.value))&&(ee+=ce.value,te+=Ut,ye+=Ut*ce.x,ge+=Ut*ce.y);Pt.x=ye/te,Pt.y=ge/te}else{ce=Pt,ce.x=ce.data.x,ce.y=ce.data.y;do ee+=ht[ce.data.index];while(ce=ce.next)}Pt.value=ee}function re(Pt,ee,ce,Ut){if(!Pt.value)return!0;var te=Pt.x-q.x,ye=Pt.y-q.y,ge=Ut-ee,Kt=te*te+ye*ye;if(ge*ge/xt<Kt)return Kt<Ot&&(te===0&&(te=M(bt),Kt+=te*te),ye===0&&(ye=M(bt),Kt+=ye*ye),Kt<At&&(Kt=Math.sqrt(At*Kt)),q.vx+=te*Pt.value*Ct/Kt,q.vy+=ye*Pt.value*Ct/Kt),!0;if(Pt.length||Kt>=Ot)return;(Pt.data!==q||Pt.next)&&(te===0&&(te=M(bt),Kt+=te*te),ye===0&&(ye=M(bt),Kt+=ye*ye),Kt<At&&(Kt=Math.sqrt(At*Kt)));do Pt.data!==q&&(ge=ht[Pt.data.index]*Ct/Kt,q.vx+=te*ge,q.vy+=ye*ge);while(Pt=Pt.next)}return Dt.initialize=function(Pt,ee){Z=Pt,bt=ee,Yt()},Dt.strength=function(Pt){return arguments.length?(nt=typeof Pt=="function"?Pt:w(+Pt),Yt(),Dt):nt},Dt.distanceMin=function(Pt){return arguments.length?(At=Pt*Pt,Dt):Math.sqrt(At)},Dt.distanceMax=function(Pt){return arguments.length?(Ot=Pt*Pt,Dt):Math.sqrt(Ot)},Dt.theta=function(Pt){return arguments.length?(xt=Pt*Pt,Dt):Math.sqrt(xt)},Dt}function Bt(Z,q,bt){var Ct,nt=w(.1),ht,At;typeof Z!="function"&&(Z=w(+Z)),q==null&&(q=0),bt==null&&(bt=0);function Ot(Dt){for(var Yt=0,ie=Ct.length;Yt<ie;++Yt){var re=Ct[Yt],Pt=re.x-q||1e-6,ee=re.y-bt||1e-6,ce=Math.sqrt(Pt*Pt+ee*ee),Ut=(At[Yt]-ce)*ht[Yt]*Dt/ce;re.vx+=Pt*Ut,re.vy+=ee*Ut}}function xt(){if(Ct){var Dt,Yt=Ct.length;for(ht=new Array(Yt),At=new Array(Yt),Dt=0;Dt<Yt;++Dt)At[Dt]=+Z(Ct[Dt],Dt,Ct),ht[Dt]=isNaN(At[Dt])?0:+nt(Ct[Dt],Dt,Ct)}}return Ot.initialize=function(Dt){Ct=Dt,xt()},Ot.strength=function(Dt){return arguments.length?(nt=typeof Dt=="function"?Dt:w(+Dt),xt(),Ot):nt},Ot.radius=function(Dt){return arguments.length?(Z=typeof Dt=="function"?Dt:w(+Dt),xt(),Ot):Z},Ot.x=function(Dt){return arguments.length?(q=+Dt,Ot):q},Ot.y=function(Dt){return arguments.length?(bt=+Dt,Ot):bt},Ot}function St(Z){var q=w(.1),bt,Ct,nt;typeof Z!="function"&&(Z=w(Z==null?0:+Z));function ht(Ot){for(var xt=0,Dt=bt.length,Yt;xt<Dt;++xt)Yt=bt[xt],Yt.vx+=(nt[xt]-Yt.x)*Ct[xt]*Ot}function At(){if(bt){var Ot,xt=bt.length;for(Ct=new Array(xt),nt=new Array(xt),Ot=0;Ot<xt;++Ot)Ct[Ot]=isNaN(nt[Ot]=+Z(bt[Ot],Ot,bt))?0:+q(bt[Ot],Ot,bt)}}return ht.initialize=function(Ot){bt=Ot,At()},ht.strength=function(Ot){return arguments.length?(q=typeof Ot=="function"?Ot:w(+Ot),At(),ht):q},ht.x=function(Ot){return arguments.length?(Z=typeof Ot=="function"?Ot:w(+Ot),At(),ht):Z},ht}function Et(Z){var q=w(.1),bt,Ct,nt;typeof Z!="function"&&(Z=w(Z==null?0:+Z));function ht(Ot){for(var xt=0,Dt=bt.length,Yt;xt<Dt;++xt)Yt=bt[xt],Yt.vy+=(nt[xt]-Yt.y)*Ct[xt]*Ot}function At(){if(bt){var Ot,xt=bt.length;for(Ct=new Array(xt),nt=new Array(xt),Ot=0;Ot<xt;++Ot)Ct[Ot]=isNaN(nt[Ot]=+Z(bt[Ot],Ot,bt))?0:+q(bt[Ot],Ot,bt)}}return ht.initialize=function(Ot){bt=Ot,At()},ht.strength=function(Ot){return arguments.length?(q=typeof Ot=="function"?Ot:w(+Ot),At(),ht):q},ht.y=function(Ot){return arguments.length?(Z=typeof Ot=="function"?Ot:w(+Ot),At(),ht):Z},ht}},405237:function(Ne,G,_){"use strict";_.r(G),_.d(G,{AbstractMatrix:function(){return Kt},CHO:function(){return dt},CholeskyDecomposition:function(){return dt},EVD:function(){return Zt},EigenvalueDecomposition:function(){return Zt},LU:function(){return Xe},LuDecomposition:function(){return Xe},Matrix:function(){return Ae},MatrixColumnSelectionView:function(){return Mr},MatrixColumnView:function(){return Sr},MatrixFlipColumnView:function(){return Pr},MatrixFlipRowView:function(){return on},MatrixRowSelectionView:function(){return Sn},MatrixRowView:function(){return Hr},MatrixSelectionView:function(){return In},MatrixSubView:function(){return Nn},MatrixTransposeView:function(){return vr},NIPALS:function(){return Gt},Nipals:function(){return Gt},QR:function(){return rn},QrDecomposition:function(){return rn},SVD:function(){return ir},SingularValueDecomposition:function(){return ir},WrapperMatrix1D:function(){return Ze},WrapperMatrix2D:function(){return Er},correlation:function(){return je},covariance:function(){return at},default:function(){return Ae},determinant:function(){return Zr},inverse:function(){return Lr},linearDependencies:function(){return bn},pseudoInverse:function(){return Pn},solve:function(){return dn},wrap:function(){return ke}});var g=_(273408),R=_.n(g),w=_(731996),M=_.n(w),P=_(626037),L=_.n(P),p=_(952677),b=_.n(p),S=_(912444),x=_.n(S),y=_(272004),A=_.n(y);const E=Object.prototype.toString;function D(tt){const ot=E.call(tt);return ot.endsWith("Array]")&&!ot.includes("Big")}function B(tt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!D(tt))throw new TypeError("input must be an array");if(tt.length===0)throw new TypeError("input must not be empty");var k=ot.fromIndex,C=k===void 0?0:k,I=ot.toIndex,H=I===void 0?tt.length:I;if(C<0||C>=tt.length||!Number.isInteger(C))throw new Error("fromIndex must be a positive integer smaller than length");if(H<=C||H>tt.length||!Number.isInteger(H))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var gt=tt[C],zt=C+1;zt<H;zt++)tt[zt]>gt&&(gt=tt[zt]);return gt}function m(tt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!D(tt))throw new TypeError("input must be an array");if(tt.length===0)throw new TypeError("input must not be empty");var k=ot.fromIndex,C=k===void 0?0:k,I=ot.toIndex,H=I===void 0?tt.length:I;if(C<0||C>=tt.length||!Number.isInteger(C))throw new Error("fromIndex must be a positive integer smaller than length");if(H<=C||H>tt.length||!Number.isInteger(H))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var gt=tt[C],zt=C+1;zt<H;zt++)tt[zt]<gt&&(gt=tt[zt]);return gt}function f(tt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(D(tt)){if(tt.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var k;if(ot.output!==void 0){if(!D(ot.output))throw new TypeError("output option must be an array if specified");k=ot.output}else k=new Array(tt.length);var C=m(tt),I=B(tt);if(C===I)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var H=ot.min,gt=H===void 0?ot.autoMinMax?C:0:H,zt=ot.max,Rt=zt===void 0?ot.autoMinMax?I:1:zt;if(gt>=Rt)throw new RangeError("min option must be smaller than max option");for(var qt=(Rt-gt)/(I-C),Te=0;Te<tt.length;Te++)k[Te]=(tt[Te]-C)*qt+gt;return k}var W=" ".repeat(2),X=" ".repeat(4);function z(){return U(this)}function U(tt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=ot.maxRows,C=k===void 0?15:k,I=ot.maxColumns,H=I===void 0?10:I,gt=ot.maxNumSize,zt=gt===void 0?8:gt,Rt=ot.padMinus,qt=Rt===void 0?"auto":Rt;return"".concat(tt.constructor.name,` {
`).concat(W,`[
`).concat(X).concat(j(tt,C,H,zt,qt),`
`).concat(W,`]
`).concat(W,"rows: ").concat(tt.rows,`
`).concat(W,"columns: ").concat(tt.columns,`
}`)}function j(tt,ot,k,C,I){var H=tt.rows,gt=tt.columns,zt=Math.min(H,ot),Rt=Math.min(gt,k),qt=[];if(I==="auto"){I=!1;t:for(var Te=0;Te<zt;Te++)for(var he=0;he<Rt;he++)if(tt.get(Te,he)<0){I=!0;break t}}for(var Ue=0;Ue<zt;Ue++){for(var cr=[],Ve=0;Ve<Rt;Ve++)cr.push(V(tt.get(Ue,Ve),C,I));qt.push("".concat(cr.join(" ")))}return Rt!==gt&&(qt[qt.length-1]+=" ... ".concat(gt-k," more columns")),zt!==H&&qt.push("... ".concat(H-ot," more rows")),qt.join(`
`.concat(X))}function V(tt,ot,k){return(tt>=0&&k?" ".concat(J(tt,ot-1)):J(tt,ot)).padEnd(ot)}function J(tt,ot){var k=tt.toString();if(k.length<=ot)return k;var C=tt.toFixed(ot);if(C.length>ot&&(C=tt.toFixed(Math.max(0,ot-(C.length-ot)))),C.length<=ot&&!C.startsWith("0.000")&&!C.startsWith("-0.000"))return C;var I=tt.toExponential(ot);return I.length>ot&&(I=tt.toExponential(Math.max(0,ot-(I.length-ot)))),I.slice(0)}function Q(tt,ot){tt.prototype.add=function(C){return typeof C=="number"?this.addS(C):this.addM(C)},tt.prototype.addS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)+C);return this},tt.prototype.addM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)+C.get(I,H));return this},tt.add=function(C,I){var H=new ot(C);return H.add(I)},tt.prototype.sub=function(C){return typeof C=="number"?this.subS(C):this.subM(C)},tt.prototype.subS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)-C);return this},tt.prototype.subM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)-C.get(I,H));return this},tt.sub=function(C,I){var H=new ot(C);return H.sub(I)},tt.prototype.subtract=tt.prototype.sub,tt.prototype.subtractS=tt.prototype.subS,tt.prototype.subtractM=tt.prototype.subM,tt.subtract=tt.sub,tt.prototype.mul=function(C){return typeof C=="number"?this.mulS(C):this.mulM(C)},tt.prototype.mulS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)*C);return this},tt.prototype.mulM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)*C.get(I,H));return this},tt.mul=function(C,I){var H=new ot(C);return H.mul(I)},tt.prototype.multiply=tt.prototype.mul,tt.prototype.multiplyS=tt.prototype.mulS,tt.prototype.multiplyM=tt.prototype.mulM,tt.multiply=tt.mul,tt.prototype.div=function(C){return typeof C=="number"?this.divS(C):this.divM(C)},tt.prototype.divS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)/C);return this},tt.prototype.divM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)/C.get(I,H));return this},tt.div=function(C,I){var H=new ot(C);return H.div(I)},tt.prototype.divide=tt.prototype.div,tt.prototype.divideS=tt.prototype.divS,tt.prototype.divideM=tt.prototype.divM,tt.divide=tt.div,tt.prototype.mod=function(C){return typeof C=="number"?this.modS(C):this.modM(C)},tt.prototype.modS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)%C);return this},tt.prototype.modM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)%C.get(I,H));return this},tt.mod=function(C,I){var H=new ot(C);return H.mod(I)},tt.prototype.modulus=tt.prototype.mod,tt.prototype.modulusS=tt.prototype.modS,tt.prototype.modulusM=tt.prototype.modM,tt.modulus=tt.mod,tt.prototype.and=function(C){return typeof C=="number"?this.andS(C):this.andM(C)},tt.prototype.andS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)&C);return this},tt.prototype.andM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)&C.get(I,H));return this},tt.and=function(C,I){var H=new ot(C);return H.and(I)},tt.prototype.or=function(C){return typeof C=="number"?this.orS(C):this.orM(C)},tt.prototype.orS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)|C);return this},tt.prototype.orM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)|C.get(I,H));return this},tt.or=function(C,I){var H=new ot(C);return H.or(I)},tt.prototype.xor=function(C){return typeof C=="number"?this.xorS(C):this.xorM(C)},tt.prototype.xorS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)^C);return this},tt.prototype.xorM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)^C.get(I,H));return this},tt.xor=function(C,I){var H=new ot(C);return H.xor(I)},tt.prototype.leftShift=function(C){return typeof C=="number"?this.leftShiftS(C):this.leftShiftM(C)},tt.prototype.leftShiftS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)<<C);return this},tt.prototype.leftShiftM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)<<C.get(I,H));return this},tt.leftShift=function(C,I){var H=new ot(C);return H.leftShift(I)},tt.prototype.signPropagatingRightShift=function(C){return typeof C=="number"?this.signPropagatingRightShiftS(C):this.signPropagatingRightShiftM(C)},tt.prototype.signPropagatingRightShiftS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)>>C);return this},tt.prototype.signPropagatingRightShiftM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)>>C.get(I,H));return this},tt.signPropagatingRightShift=function(C,I){var H=new ot(C);return H.signPropagatingRightShift(I)},tt.prototype.rightShift=function(C){return typeof C=="number"?this.rightShiftS(C):this.rightShiftM(C)},tt.prototype.rightShiftS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)>>>C);return this},tt.prototype.rightShiftM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)>>>C.get(I,H));return this},tt.rightShift=function(C,I){var H=new ot(C);return H.rightShift(I)},tt.prototype.zeroFillRightShift=tt.prototype.rightShift,tt.prototype.zeroFillRightShiftS=tt.prototype.rightShiftS,tt.prototype.zeroFillRightShiftM=tt.prototype.rightShiftM,tt.zeroFillRightShift=tt.rightShift,tt.prototype.not=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,~this.get(C,I));return this},tt.not=function(C){var I=new ot(C);return I.not()},tt.prototype.abs=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.abs(this.get(C,I)));return this},tt.abs=function(C){var I=new ot(C);return I.abs()},tt.prototype.acos=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.acos(this.get(C,I)));return this},tt.acos=function(C){var I=new ot(C);return I.acos()},tt.prototype.acosh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.acosh(this.get(C,I)));return this},tt.acosh=function(C){var I=new ot(C);return I.acosh()},tt.prototype.asin=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.asin(this.get(C,I)));return this},tt.asin=function(C){var I=new ot(C);return I.asin()},tt.prototype.asinh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.asinh(this.get(C,I)));return this},tt.asinh=function(C){var I=new ot(C);return I.asinh()},tt.prototype.atan=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.atan(this.get(C,I)));return this},tt.atan=function(C){var I=new ot(C);return I.atan()},tt.prototype.atanh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.atanh(this.get(C,I)));return this},tt.atanh=function(C){var I=new ot(C);return I.atanh()},tt.prototype.cbrt=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.cbrt(this.get(C,I)));return this},tt.cbrt=function(C){var I=new ot(C);return I.cbrt()},tt.prototype.ceil=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.ceil(this.get(C,I)));return this},tt.ceil=function(C){var I=new ot(C);return I.ceil()},tt.prototype.clz32=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.clz32(this.get(C,I)));return this},tt.clz32=function(C){var I=new ot(C);return I.clz32()},tt.prototype.cos=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.cos(this.get(C,I)));return this},tt.cos=function(C){var I=new ot(C);return I.cos()},tt.prototype.cosh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.cosh(this.get(C,I)));return this},tt.cosh=function(C){var I=new ot(C);return I.cosh()},tt.prototype.exp=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.exp(this.get(C,I)));return this},tt.exp=function(C){var I=new ot(C);return I.exp()},tt.prototype.expm1=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.expm1(this.get(C,I)));return this},tt.expm1=function(C){var I=new ot(C);return I.expm1()},tt.prototype.floor=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.floor(this.get(C,I)));return this},tt.floor=function(C){var I=new ot(C);return I.floor()},tt.prototype.fround=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.fround(this.get(C,I)));return this},tt.fround=function(C){var I=new ot(C);return I.fround()},tt.prototype.log=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.log(this.get(C,I)));return this},tt.log=function(C){var I=new ot(C);return I.log()},tt.prototype.log1p=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.log1p(this.get(C,I)));return this},tt.log1p=function(C){var I=new ot(C);return I.log1p()},tt.prototype.log10=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.log10(this.get(C,I)));return this},tt.log10=function(C){var I=new ot(C);return I.log10()},tt.prototype.log2=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.log2(this.get(C,I)));return this},tt.log2=function(C){var I=new ot(C);return I.log2()},tt.prototype.round=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.round(this.get(C,I)));return this},tt.round=function(C){var I=new ot(C);return I.round()},tt.prototype.sign=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.sign(this.get(C,I)));return this},tt.sign=function(C){var I=new ot(C);return I.sign()},tt.prototype.sin=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.sin(this.get(C,I)));return this},tt.sin=function(C){var I=new ot(C);return I.sin()},tt.prototype.sinh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.sinh(this.get(C,I)));return this},tt.sinh=function(C){var I=new ot(C);return I.sinh()},tt.prototype.sqrt=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.sqrt(this.get(C,I)));return this},tt.sqrt=function(C){var I=new ot(C);return I.sqrt()},tt.prototype.tan=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.tan(this.get(C,I)));return this},tt.tan=function(C){var I=new ot(C);return I.tan()},tt.prototype.tanh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.tanh(this.get(C,I)));return this},tt.tanh=function(C){var I=new ot(C);return I.tanh()},tt.prototype.trunc=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.trunc(this.get(C,I)));return this},tt.trunc=function(C){var I=new ot(C);return I.trunc()},tt.pow=function(C,I){var H=new ot(C);return H.pow(I)},tt.prototype.pow=function(C){return typeof C=="number"?this.powS(C):this.powM(C)},tt.prototype.powS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,Math.pow(this.get(I,H),C));return this},tt.prototype.powM=function(C){if(C=ot.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,Math.pow(this.get(I,H),C.get(I,H)));return this}}function et(tt,ot,k){var C=k?tt.rows:tt.rows-1;if(ot<0||ot>C)throw new RangeError("Row index out of range")}function ut(tt,ot,k){var C=k?tt.columns:tt.columns-1;if(ot<0||ot>C)throw new RangeError("Column index out of range")}function it(tt,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==tt.columns)throw new RangeError("vector size must be the same as the number of columns");return ot}function yt(tt,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==tt.rows)throw new RangeError("vector size must be the same as the number of rows");return ot}function ft(tt,ot){if(!D(ot))throw new TypeError("row indices must be an array");for(var k=0;k<ot.length;k++)if(ot[k]<0||ot[k]>=tt.rows)throw new RangeError("row indices are out of range")}function Bt(tt,ot){if(!D(ot))throw new TypeError("column indices must be an array");for(var k=0;k<ot.length;k++)if(ot[k]<0||ot[k]>=tt.columns)throw new RangeError("column indices are out of range")}function St(tt,ot,k,C,I){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Z("startRow",ot),Z("endRow",k),Z("startColumn",C),Z("endColumn",I),ot>k||C>I||ot<0||ot>=tt.rows||k<0||k>=tt.rows||C<0||C>=tt.columns||I<0||I>=tt.columns)throw new RangeError("Submatrix indices are out of range")}function Et(tt){for(var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=[],C=0;C<tt;C++)k.push(ot);return k}function Z(tt,ot){if(typeof ot!="number")throw new TypeError("".concat(tt," must be a number"))}function q(tt){if(tt.isEmpty())throw new Error("Empty matrix has no elements to index")}function bt(tt){for(var ot=Et(tt.rows),k=0;k<tt.rows;++k)for(var C=0;C<tt.columns;++C)ot[k]+=tt.get(k,C);return ot}function Ct(tt){for(var ot=Et(tt.columns),k=0;k<tt.rows;++k)for(var C=0;C<tt.columns;++C)ot[C]+=tt.get(k,C);return ot}function nt(tt){for(var ot=0,k=0;k<tt.rows;k++)for(var C=0;C<tt.columns;C++)ot+=tt.get(k,C);return ot}function ht(tt){for(var ot=Et(tt.rows,1),k=0;k<tt.rows;++k)for(var C=0;C<tt.columns;++C)ot[k]*=tt.get(k,C);return ot}function At(tt){for(var ot=Et(tt.columns,1),k=0;k<tt.rows;++k)for(var C=0;C<tt.columns;++C)ot[C]*=tt.get(k,C);return ot}function Ot(tt){for(var ot=1,k=0;k<tt.rows;k++)for(var C=0;C<tt.columns;C++)ot*=tt.get(k,C);return ot}function xt(tt,ot,k){for(var C=tt.rows,I=tt.columns,H=[],gt=0;gt<C;gt++){for(var zt=0,Rt=0,qt=0,Te=0;Te<I;Te++)qt=tt.get(gt,Te)-k[gt],zt+=qt,Rt+=qt*qt;ot?H.push((Rt-zt*zt/I)/(I-1)):H.push((Rt-zt*zt/I)/I)}return H}function Dt(tt,ot,k){for(var C=tt.rows,I=tt.columns,H=[],gt=0;gt<I;gt++){for(var zt=0,Rt=0,qt=0,Te=0;Te<C;Te++)qt=tt.get(Te,gt)-k[gt],zt+=qt,Rt+=qt*qt;ot?H.push((Rt-zt*zt/C)/(C-1)):H.push((Rt-zt*zt/C)/C)}return H}function Yt(tt,ot,k){for(var C=tt.rows,I=tt.columns,H=C*I,gt=0,zt=0,Rt=0,qt=0;qt<C;qt++)for(var Te=0;Te<I;Te++)Rt=tt.get(qt,Te)-k,gt+=Rt,zt+=Rt*Rt;return ot?(zt-gt*gt/H)/(H-1):(zt-gt*gt/H)/H}function ie(tt,ot){for(var k=0;k<tt.rows;k++)for(var C=0;C<tt.columns;C++)tt.set(k,C,tt.get(k,C)-ot[k])}function re(tt,ot){for(var k=0;k<tt.rows;k++)for(var C=0;C<tt.columns;C++)tt.set(k,C,tt.get(k,C)-ot[C])}function Pt(tt,ot){for(var k=0;k<tt.rows;k++)for(var C=0;C<tt.columns;C++)tt.set(k,C,tt.get(k,C)-ot)}function ee(tt){for(var ot=[],k=0;k<tt.rows;k++){for(var C=0,I=0;I<tt.columns;I++)C+=Math.pow(tt.get(k,I),2)/(tt.columns-1);ot.push(Math.sqrt(C))}return ot}function ce(tt,ot){for(var k=0;k<tt.rows;k++)for(var C=0;C<tt.columns;C++)tt.set(k,C,tt.get(k,C)/ot[k])}function Ut(tt){for(var ot=[],k=0;k<tt.columns;k++){for(var C=0,I=0;I<tt.rows;I++)C+=Math.pow(tt.get(I,k),2)/(tt.rows-1);ot.push(Math.sqrt(C))}return ot}function te(tt,ot){for(var k=0;k<tt.rows;k++)for(var C=0;C<tt.columns;C++)tt.set(k,C,tt.get(k,C)/ot[C])}function ye(tt){for(var ot=tt.size-1,k=0,C=0;C<tt.columns;C++)for(var I=0;I<tt.rows;I++)k+=Math.pow(tt.get(I,C),2)/ot;return Math.sqrt(k)}function ge(tt,ot){for(var k=0;k<tt.rows;k++)for(var C=0;C<tt.columns;C++)tt.set(k,C,tt.get(k,C)/ot)}var Kt=function(){function tt(){x()(this,tt)}return A()(tt,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(k){if(typeof k!="function")throw new TypeError("callback must be a function");for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)k.call(this,C,I);return this}},{key:"to1DArray",value:function(){for(var k=[],C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)k.push(this.get(C,I));return k}},{key:"to2DArray",value:function(){for(var k=[],C=0;C<this.rows;C++){k.push([]);for(var I=0;I<this.columns;I++)k[C].push(this.get(C,I))}return k}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var k=0;k<this.rows;k++)for(var C=0;C<=k;C++)if(this.get(k,C)!==this.get(C,k))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var k=0,C=0,I=-1,H=!0,gt=!1;k<this.rows&&H;){for(C=0,gt=!1;C<this.columns&&gt===!1;)this.get(k,C)===0?C++:this.get(k,C)===1&&C>I?(gt=!0,I=C):(H=!1,gt=!0);k++}return H}},{key:"isReducedEchelonForm",value:function(){for(var k=0,C=0,I=-1,H=!0,gt=!1;k<this.rows&&H;){for(C=0,gt=!1;C<this.columns&&gt===!1;)this.get(k,C)===0?C++:this.get(k,C)===1&&C>I?(gt=!0,I=C):(H=!1,gt=!0);for(var zt=C+1;zt<this.rows;zt++)this.get(k,zt)!==0&&(H=!1);k++}return H}},{key:"echelonForm",value:function(){for(var k=this.clone(),C=0,I=0;C<k.rows&&I<k.columns;){for(var H=C,gt=C;gt<k.rows;gt++)k.get(gt,I)>k.get(H,I)&&(H=gt);if(k.get(H,I)===0)I++;else{k.swapRows(C,H);for(var zt=k.get(C,I),Rt=I;Rt<k.columns;Rt++)k.set(C,Rt,k.get(C,Rt)/zt);for(var qt=C+1;qt<k.rows;qt++){var Te=k.get(qt,I)/k.get(C,I);k.set(qt,I,0);for(var he=I+1;he<k.columns;he++)k.set(qt,he,k.get(qt,he)-k.get(C,he)*Te)}C++,I++}}return k}},{key:"reducedEchelonForm",value:function(){for(var k=this.echelonForm(),C=k.columns,I=k.rows,H=I-1;H>=0;)if(k.maxRow(H)===0)H--;else{for(var gt=0,zt=!1;gt<I&&zt===!1;)k.get(H,gt)===1?zt=!0:gt++;for(var Rt=0;Rt<H;Rt++)for(var qt=k.get(Rt,gt),Te=gt;Te<C;Te++){var he=k.get(Rt,Te)-qt*k.get(H,Te);k.set(Rt,Te,he)}H--}return k}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b()(k)!=="object")throw new TypeError("options must be an object");var C=k.rows,I=C===void 0?1:C,H=k.columns,gt=H===void 0?1:H;if(!Number.isInteger(I)||I<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(gt)||gt<=0)throw new TypeError("columns must be a positive integer");for(var zt=new Ae(this.rows*I,this.columns*gt),Rt=0;Rt<I;Rt++)for(var qt=0;qt<gt;qt++)zt.setSubMatrix(this,this.rows*Rt,this.columns*qt);return zt}},{key:"fill",value:function(k){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,k);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(k){et(this,k);for(var C=[],I=0;I<this.columns;I++)C.push(this.get(k,I));return C}},{key:"getRowVector",value:function(k){return Ae.rowVector(this.getRow(k))}},{key:"setRow",value:function(k,C){et(this,k),C=it(this,C);for(var I=0;I<this.columns;I++)this.set(k,I,C[I]);return this}},{key:"swapRows",value:function(k,C){et(this,k),et(this,C);for(var I=0;I<this.columns;I++){var H=this.get(k,I);this.set(k,I,this.get(C,I)),this.set(C,I,H)}return this}},{key:"getColumn",value:function(k){ut(this,k);for(var C=[],I=0;I<this.rows;I++)C.push(this.get(I,k));return C}},{key:"getColumnVector",value:function(k){return Ae.columnVector(this.getColumn(k))}},{key:"setColumn",value:function(k,C){ut(this,k),C=yt(this,C);for(var I=0;I<this.rows;I++)this.set(I,k,C[I]);return this}},{key:"swapColumns",value:function(k,C){ut(this,k),ut(this,C);for(var I=0;I<this.rows;I++){var H=this.get(I,k);this.set(I,k,this.get(I,C)),this.set(I,C,H)}return this}},{key:"addRowVector",value:function(k){k=it(this,k);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)+k[I]);return this}},{key:"subRowVector",value:function(k){k=it(this,k);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)-k[I]);return this}},{key:"mulRowVector",value:function(k){k=it(this,k);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)*k[I]);return this}},{key:"divRowVector",value:function(k){k=it(this,k);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)/k[I]);return this}},{key:"addColumnVector",value:function(k){k=yt(this,k);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)+k[C]);return this}},{key:"subColumnVector",value:function(k){k=yt(this,k);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)-k[C]);return this}},{key:"mulColumnVector",value:function(k){k=yt(this,k);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)*k[C]);return this}},{key:"divColumnVector",value:function(k){k=yt(this,k);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)/k[C]);return this}},{key:"mulRow",value:function(k,C){et(this,k);for(var I=0;I<this.columns;I++)this.set(k,I,this.get(k,I)*C);return this}},{key:"mulColumn",value:function(k,C){ut(this,k);for(var I=0;I<this.rows;I++)this.set(I,k,this.get(I,k)*C);return this}},{key:"max",value:function(k){if(this.isEmpty())return NaN;switch(k){case"row":{for(var C=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.get(I,H)>C[I]&&(C[I]=this.get(I,H));return C}case"column":{for(var gt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),zt=0;zt<this.rows;zt++)for(var Rt=0;Rt<this.columns;Rt++)this.get(zt,Rt)>gt[Rt]&&(gt[Rt]=this.get(zt,Rt));return gt}case void 0:{for(var qt=this.get(0,0),Te=0;Te<this.rows;Te++)for(var he=0;he<this.columns;he++)this.get(Te,he)>qt&&(qt=this.get(Te,he));return qt}default:throw new Error("invalid option: ".concat(k))}}},{key:"maxIndex",value:function(){q(this);for(var k=this.get(0,0),C=[0,0],I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.get(I,H)>k&&(k=this.get(I,H),C[0]=I,C[1]=H);return C}},{key:"min",value:function(k){if(this.isEmpty())return NaN;switch(k){case"row":{for(var C=new Array(this.rows).fill(Number.POSITIVE_INFINITY),I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.get(I,H)<C[I]&&(C[I]=this.get(I,H));return C}case"column":{for(var gt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),zt=0;zt<this.rows;zt++)for(var Rt=0;Rt<this.columns;Rt++)this.get(zt,Rt)<gt[Rt]&&(gt[Rt]=this.get(zt,Rt));return gt}case void 0:{for(var qt=this.get(0,0),Te=0;Te<this.rows;Te++)for(var he=0;he<this.columns;he++)this.get(Te,he)<qt&&(qt=this.get(Te,he));return qt}default:throw new Error("invalid option: ".concat(k))}}},{key:"minIndex",value:function(){q(this);for(var k=this.get(0,0),C=[0,0],I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.get(I,H)<k&&(k=this.get(I,H),C[0]=I,C[1]=H);return C}},{key:"maxRow",value:function(k){if(et(this,k),this.isEmpty())return NaN;for(var C=this.get(k,0),I=1;I<this.columns;I++)this.get(k,I)>C&&(C=this.get(k,I));return C}},{key:"maxRowIndex",value:function(k){et(this,k),q(this);for(var C=this.get(k,0),I=[k,0],H=1;H<this.columns;H++)this.get(k,H)>C&&(C=this.get(k,H),I[1]=H);return I}},{key:"minRow",value:function(k){if(et(this,k),this.isEmpty())return NaN;for(var C=this.get(k,0),I=1;I<this.columns;I++)this.get(k,I)<C&&(C=this.get(k,I));return C}},{key:"minRowIndex",value:function(k){et(this,k),q(this);for(var C=this.get(k,0),I=[k,0],H=1;H<this.columns;H++)this.get(k,H)<C&&(C=this.get(k,H),I[1]=H);return I}},{key:"maxColumn",value:function(k){if(ut(this,k),this.isEmpty())return NaN;for(var C=this.get(0,k),I=1;I<this.rows;I++)this.get(I,k)>C&&(C=this.get(I,k));return C}},{key:"maxColumnIndex",value:function(k){ut(this,k),q(this);for(var C=this.get(0,k),I=[0,k],H=1;H<this.rows;H++)this.get(H,k)>C&&(C=this.get(H,k),I[0]=H);return I}},{key:"minColumn",value:function(k){if(ut(this,k),this.isEmpty())return NaN;for(var C=this.get(0,k),I=1;I<this.rows;I++)this.get(I,k)<C&&(C=this.get(I,k));return C}},{key:"minColumnIndex",value:function(k){ut(this,k),q(this);for(var C=this.get(0,k),I=[0,k],H=1;H<this.rows;H++)this.get(H,k)<C&&(C=this.get(H,k),I[0]=H);return I}},{key:"diag",value:function(){for(var k=Math.min(this.rows,this.columns),C=[],I=0;I<k;I++)C.push(this.get(I,I));return C}},{key:"norm",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",C=0;if(k==="max")return this.max();if(k==="frobenius"){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)C=C+this.get(I,H)*this.get(I,H);return Math.sqrt(C)}else throw new RangeError("unknown norm type: ".concat(k))}},{key:"cumulativeSum",value:function(){for(var k=0,C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)k+=this.get(C,I),this.set(C,I,k);return this}},{key:"dot",value:function(k){tt.isMatrix(k)&&(k=k.to1DArray());var C=this.to1DArray();if(C.length!==k.length)throw new RangeError("vectors do not have the same size");for(var I=0,H=0;H<C.length;H++)I+=C[H]*k[H];return I}},{key:"mmul",value:function(k){k=Ae.checkMatrix(k);for(var C=this.rows,I=this.columns,H=k.columns,gt=new Ae(C,H),zt=new Float64Array(I),Rt=0;Rt<H;Rt++){for(var qt=0;qt<I;qt++)zt[qt]=k.get(qt,Rt);for(var Te=0;Te<C;Te++){for(var he=0,Ue=0;Ue<I;Ue++)he+=this.get(Te,Ue)*zt[Ue];gt.set(Te,Rt,he)}}return gt}},{key:"strassen2x2",value:function(k){k=Ae.checkMatrix(k);var C=new Ae(2,2),I=this.get(0,0),H=k.get(0,0),gt=this.get(0,1),zt=k.get(0,1),Rt=this.get(1,0),qt=k.get(1,0),Te=this.get(1,1),he=k.get(1,1),Ue=(I+Te)*(H+he),cr=(Rt+Te)*H,Ve=I*(zt-he),Tr=Te*(qt-H),nn=(I+gt)*he,He=(Rt-I)*(H+zt),ur=(gt-Te)*(qt+he),Ar=Ue+Tr-nn+ur,Cr=Ve+nn,se=cr+Tr,Xt=Ue-cr+Ve+He;return C.set(0,0,Ar),C.set(0,1,Cr),C.set(1,0,se),C.set(1,1,Xt),C}},{key:"strassen3x3",value:function(k){k=Ae.checkMatrix(k);var C=new Ae(3,3),I=this.get(0,0),H=this.get(0,1),gt=this.get(0,2),zt=this.get(1,0),Rt=this.get(1,1),qt=this.get(1,2),Te=this.get(2,0),he=this.get(2,1),Ue=this.get(2,2),cr=k.get(0,0),Ve=k.get(0,1),Tr=k.get(0,2),nn=k.get(1,0),He=k.get(1,1),ur=k.get(1,2),Ar=k.get(2,0),Cr=k.get(2,1),se=k.get(2,2),Xt=(I+H+gt-zt-Rt-he-Ue)*He,fe=(I-zt)*(-Ve+He),Me=Rt*(-cr+Ve+nn-He-ur-Ar+se),pe=(-I+zt+Rt)*(cr-Ve+He),Re=(zt+Rt)*(-cr+Ve),nr=I*cr,fr=(-I+Te+he)*(cr-Tr+ur),tn=(-I+Te)*(Tr-ur),Ln=(Te+he)*(-cr+Tr),sn=(I+H+gt-Rt-qt-Te-he)*ur,Xn=he*(-cr+Tr+nn-He-ur-Ar+Cr),an=(-gt+he+Ue)*(He+Ar-Cr),Bn=(gt-Ue)*(He-Cr),Jn=gt*Ar,oa=(he+Ue)*(-Ar+Cr),sa=(-gt+Rt+qt)*(ur+Ar-se),xi=(gt-qt)*(ur-se),Na=(Rt+qt)*(-Ar+se),Ra=H*nn,ri=qt*Cr,Ci=zt*Tr,Ni=Te*Ve,Ri=Ue*se,pa=nr+Jn+Ra,ki=Xt+pe+Re+nr+an+Jn+oa,eo=nr+fr+Ln+sn+Jn+sa+Na,za=fe+Me+pe+nr+Jn+sa+xi,Ei=fe+pe+Re+nr+ri,Bi=Jn+sa+xi+Na+Ci,go=nr+fr+tn+Xn+an+Bn+Jn,Pi=an+Bn+Jn+oa+Ni,Wi=nr+fr+tn+Ln+Ri;return C.set(0,0,pa),C.set(0,1,ki),C.set(0,2,eo),C.set(1,0,za),C.set(1,1,Ei),C.set(1,2,Bi),C.set(2,0,go),C.set(2,1,Pi),C.set(2,2,Wi),C}},{key:"mmulStrassen",value:function(k){k=Ae.checkMatrix(k);var C=this.clone(),I=C.rows,H=C.columns,gt=k.rows,zt=k.columns;H!==gt&&console.warn("Multiplying ".concat(I," x ").concat(H," and ").concat(gt," x ").concat(zt," matrix: dimensions do not match."));function Rt(Ue,cr,Ve){var Tr=Ue.rows,nn=Ue.columns;if(Tr===cr&&nn===Ve)return Ue;var He=tt.zeros(cr,Ve);return He=He.setSubMatrix(Ue,0,0),He}var qt=Math.max(I,gt),Te=Math.max(H,zt);C=Rt(C,qt,Te),k=Rt(k,qt,Te);function he(Ue,cr,Ve,Tr){if(Ve<=512||Tr<=512)return Ue.mmul(cr);Ve%2===1&&Tr%2===1?(Ue=Rt(Ue,Ve+1,Tr+1),cr=Rt(cr,Ve+1,Tr+1)):Ve%2===1?(Ue=Rt(Ue,Ve+1,Tr),cr=Rt(cr,Ve+1,Tr)):Tr%2===1&&(Ue=Rt(Ue,Ve,Tr+1),cr=Rt(cr,Ve,Tr+1));var nn=parseInt(Ue.rows/2,10),He=parseInt(Ue.columns/2,10),ur=Ue.subMatrix(0,nn-1,0,He-1),Ar=cr.subMatrix(0,nn-1,0,He-1),Cr=Ue.subMatrix(0,nn-1,He,Ue.columns-1),se=cr.subMatrix(0,nn-1,He,cr.columns-1),Xt=Ue.subMatrix(nn,Ue.rows-1,0,He-1),fe=cr.subMatrix(nn,cr.rows-1,0,He-1),Me=Ue.subMatrix(nn,Ue.rows-1,He,Ue.columns-1),pe=cr.subMatrix(nn,cr.rows-1,He,cr.columns-1),Re=he(tt.add(ur,Me),tt.add(Ar,pe),nn,He),nr=he(tt.add(Xt,Me),Ar,nn,He),fr=he(ur,tt.sub(se,pe),nn,He),tn=he(Me,tt.sub(fe,Ar),nn,He),Ln=he(tt.add(ur,Cr),pe,nn,He),sn=he(tt.sub(Xt,ur),tt.add(Ar,se),nn,He),Xn=he(tt.sub(Cr,Me),tt.add(fe,pe),nn,He),an=tt.add(Re,tn);an.sub(Ln),an.add(Xn);var Bn=tt.add(fr,Ln),Jn=tt.add(nr,tn),oa=tt.sub(Re,nr);oa.add(fr),oa.add(sn);var sa=tt.zeros(2*an.rows,2*an.columns);return sa=sa.setSubMatrix(an,0,0),sa=sa.setSubMatrix(Bn,an.rows,0),sa=sa.setSubMatrix(Jn,0,an.columns),sa=sa.setSubMatrix(oa,an.rows,an.columns),sa.subMatrix(0,Ve-1,0,Tr-1)}return he(C,k,qt,Te)}},{key:"scaleRows",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b()(k)!=="object")throw new TypeError("options must be an object");var C=k.min,I=C===void 0?0:C,H=k.max,gt=H===void 0?1:H;if(!Number.isFinite(I))throw new TypeError("min must be a number");if(!Number.isFinite(gt))throw new TypeError("max must be a number");if(I>=gt)throw new RangeError("min must be smaller than max");for(var zt=new Ae(this.rows,this.columns),Rt=0;Rt<this.rows;Rt++){var qt=this.getRow(Rt);qt.length>0&&f(qt,{min:I,max:gt,output:qt}),zt.setRow(Rt,qt)}return zt}},{key:"scaleColumns",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b()(k)!=="object")throw new TypeError("options must be an object");var C=k.min,I=C===void 0?0:C,H=k.max,gt=H===void 0?1:H;if(!Number.isFinite(I))throw new TypeError("min must be a number");if(!Number.isFinite(gt))throw new TypeError("max must be a number");if(I>=gt)throw new RangeError("min must be smaller than max");for(var zt=new Ae(this.rows,this.columns),Rt=0;Rt<this.columns;Rt++){var qt=this.getColumn(Rt);qt.length&&f(qt,{min:I,max:gt,output:qt}),zt.setColumn(Rt,qt)}return zt}},{key:"flipRows",value:function(){for(var k=Math.ceil(this.columns/2),C=0;C<this.rows;C++)for(var I=0;I<k;I++){var H=this.get(C,I),gt=this.get(C,this.columns-1-I);this.set(C,I,gt),this.set(C,this.columns-1-I,H)}return this}},{key:"flipColumns",value:function(){for(var k=Math.ceil(this.rows/2),C=0;C<this.columns;C++)for(var I=0;I<k;I++){var H=this.get(I,C),gt=this.get(this.rows-1-I,C);this.set(I,C,gt),this.set(this.rows-1-I,C,H)}return this}},{key:"kroneckerProduct",value:function(k){k=Ae.checkMatrix(k);for(var C=this.rows,I=this.columns,H=k.rows,gt=k.columns,zt=new Ae(C*H,I*gt),Rt=0;Rt<C;Rt++)for(var qt=0;qt<I;qt++)for(var Te=0;Te<H;Te++)for(var he=0;he<gt;he++)zt.set(H*Rt+Te,gt*qt+he,this.get(Rt,qt)*k.get(Te,he));return zt}},{key:"kroneckerSum",value:function(k){if(k=Ae.checkMatrix(k),!this.isSquare()||!k.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var C=this.rows,I=k.rows,H=this.kroneckerProduct(Ae.eye(I,I)),gt=Ae.eye(C,C).kroneckerProduct(k);return H.add(gt)}},{key:"transpose",value:function(){for(var k=new Ae(this.columns,this.rows),C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)k.set(I,C,this.get(C,I));return k}},{key:"sortRows",value:function(){for(var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xe,C=0;C<this.rows;C++)this.setRow(C,this.getRow(C).sort(k));return this}},{key:"sortColumns",value:function(){for(var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xe,C=0;C<this.columns;C++)this.setColumn(C,this.getColumn(C).sort(k));return this}},{key:"subMatrix",value:function(k,C,I,H){St(this,k,C,I,H);for(var gt=new Ae(C-k+1,H-I+1),zt=k;zt<=C;zt++)for(var Rt=I;Rt<=H;Rt++)gt.set(zt-k,Rt-I,this.get(zt,Rt));return gt}},{key:"subMatrixRow",value:function(k,C,I){if(C===void 0&&(C=0),I===void 0&&(I=this.columns-1),C>I||C<0||C>=this.columns||I<0||I>=this.columns)throw new RangeError("Argument out of range");for(var H=new Ae(k.length,I-C+1),gt=0;gt<k.length;gt++)for(var zt=C;zt<=I;zt++){if(k[gt]<0||k[gt]>=this.rows)throw new RangeError("Row index out of range: ".concat(k[gt]));H.set(gt,zt-C,this.get(k[gt],zt))}return H}},{key:"subMatrixColumn",value:function(k,C,I){if(C===void 0&&(C=0),I===void 0&&(I=this.rows-1),C>I||C<0||C>=this.rows||I<0||I>=this.rows)throw new RangeError("Argument out of range");for(var H=new Ae(I-C+1,k.length),gt=0;gt<k.length;gt++)for(var zt=C;zt<=I;zt++){if(k[gt]<0||k[gt]>=this.columns)throw new RangeError("Column index out of range: ".concat(k[gt]));H.set(zt-C,gt,this.get(zt,k[gt]))}return H}},{key:"setSubMatrix",value:function(k,C,I){if(k=Ae.checkMatrix(k),k.isEmpty())return this;var H=C+k.rows-1,gt=I+k.columns-1;St(this,C,H,I,gt);for(var zt=0;zt<k.rows;zt++)for(var Rt=0;Rt<k.columns;Rt++)this.set(C+zt,I+Rt,k.get(zt,Rt));return this}},{key:"selection",value:function(k,C){ft(this,k),Bt(this,C);for(var I=new Ae(k.length,C.length),H=0;H<k.length;H++)for(var gt=k[H],zt=0;zt<C.length;zt++){var Rt=C[zt];I.set(H,zt,this.get(gt,Rt))}return I}},{key:"trace",value:function(){for(var k=Math.min(this.rows,this.columns),C=0,I=0;I<k;I++)C+=this.get(I,I);return C}},{key:"clone",value:function(){for(var k=new Ae(this.rows,this.columns),C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)k.set(C,I,this.get(C,I));return k}},{key:"sum",value:function(k){switch(k){case"row":return bt(this);case"column":return Ct(this);case void 0:return nt(this);default:throw new Error("invalid option: ".concat(k))}}},{key:"product",value:function(k){switch(k){case"row":return ht(this);case"column":return At(this);case void 0:return Ot(this);default:throw new Error("invalid option: ".concat(k))}}},{key:"mean",value:function(k){var C=this.sum(k);switch(k){case"row":{for(var I=0;I<this.rows;I++)C[I]/=this.columns;return C}case"column":{for(var H=0;H<this.columns;H++)C[H]/=this.rows;return C}case void 0:return C/this.size;default:throw new Error("invalid option: ".concat(k))}}},{key:"variance",value:function(k){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b()(k)==="object"&&(C=k,k=void 0),b()(C)!=="object")throw new TypeError("options must be an object");var I=C,H=I.unbiased,gt=H===void 0?!0:H,zt=I.mean,Rt=zt===void 0?this.mean(k):zt;if(typeof gt!="boolean")throw new TypeError("unbiased must be a boolean");switch(k){case"row":{if(!D(Rt))throw new TypeError("mean must be an array");return xt(this,gt,Rt)}case"column":{if(!D(Rt))throw new TypeError("mean must be an array");return Dt(this,gt,Rt)}case void 0:{if(typeof Rt!="number")throw new TypeError("mean must be a number");return Yt(this,gt,Rt)}default:throw new Error("invalid option: ".concat(k))}}},{key:"standardDeviation",value:function(k,C){b()(k)==="object"&&(C=k,k=void 0);var I=this.variance(k,C);if(k===void 0)return Math.sqrt(I);for(var H=0;H<I.length;H++)I[H]=Math.sqrt(I[H]);return I}},{key:"center",value:function(k){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b()(k)==="object"&&(C=k,k=void 0),b()(C)!=="object")throw new TypeError("options must be an object");var I=C,H=I.center,gt=H===void 0?this.mean(k):H;switch(k){case"row":{if(!D(gt))throw new TypeError("center must be an array");return ie(this,gt),this}case"column":{if(!D(gt))throw new TypeError("center must be an array");return re(this,gt),this}case void 0:{if(typeof gt!="number")throw new TypeError("center must be a number");return Pt(this,gt),this}default:throw new Error("invalid option: ".concat(k))}}},{key:"scale",value:function(k){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b()(k)==="object"&&(C=k,k=void 0),b()(C)!=="object")throw new TypeError("options must be an object");var I=C.scale;switch(k){case"row":{if(I===void 0)I=ee(this);else if(!D(I))throw new TypeError("scale must be an array");return ce(this,I),this}case"column":{if(I===void 0)I=Ut(this);else if(!D(I))throw new TypeError("scale must be an array");return te(this,I),this}case void 0:{if(I===void 0)I=ye(this);else if(typeof I!="number")throw new TypeError("scale must be a number");return ge(this,I),this}default:throw new Error("invalid option: ".concat(k))}}},{key:"toString",value:function(k){return U(this,k)}}],[{key:"from1DArray",value:function(k,C,I){var H=k*C;if(H!==I.length)throw new RangeError("data length does not match given dimensions");for(var gt=new Ae(k,C),zt=0;zt<k;zt++)for(var Rt=0;Rt<C;Rt++)gt.set(zt,Rt,I[zt*C+Rt]);return gt}},{key:"rowVector",value:function(k){for(var C=new Ae(1,k.length),I=0;I<k.length;I++)C.set(0,I,k[I]);return C}},{key:"columnVector",value:function(k){for(var C=new Ae(k.length,1),I=0;I<k.length;I++)C.set(I,0,k[I]);return C}},{key:"zeros",value:function(k,C){return new Ae(k,C)}},{key:"ones",value:function(k,C){return new Ae(k,C).fill(1)}},{key:"rand",value:function(k,C){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(b()(I)!=="object")throw new TypeError("options must be an object");for(var H=I.random,gt=H===void 0?Math.random:H,zt=new Ae(k,C),Rt=0;Rt<k;Rt++)for(var qt=0;qt<C;qt++)zt.set(Rt,qt,gt());return zt}},{key:"randInt",value:function(k,C){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(b()(I)!=="object")throw new TypeError("options must be an object");var H=I.min,gt=H===void 0?0:H,zt=I.max,Rt=zt===void 0?1e3:zt,qt=I.random,Te=qt===void 0?Math.random:qt;if(!Number.isInteger(gt))throw new TypeError("min must be an integer");if(!Number.isInteger(Rt))throw new TypeError("max must be an integer");if(gt>=Rt)throw new RangeError("min must be smaller than max");for(var he=Rt-gt,Ue=new Ae(k,C),cr=0;cr<k;cr++)for(var Ve=0;Ve<C;Ve++){var Tr=gt+Math.round(Te()*he);Ue.set(cr,Ve,Tr)}return Ue}},{key:"eye",value:function(k,C,I){C===void 0&&(C=k),I===void 0&&(I=1);for(var H=Math.min(k,C),gt=this.zeros(k,C),zt=0;zt<H;zt++)gt.set(zt,zt,I);return gt}},{key:"diag",value:function(k,C,I){var H=k.length;C===void 0&&(C=H),I===void 0&&(I=C);for(var gt=Math.min(H,C,I),zt=this.zeros(C,I),Rt=0;Rt<gt;Rt++)zt.set(Rt,Rt,k[Rt]);return zt}},{key:"min",value:function(k,C){k=this.checkMatrix(k),C=this.checkMatrix(C);for(var I=k.rows,H=k.columns,gt=new Ae(I,H),zt=0;zt<I;zt++)for(var Rt=0;Rt<H;Rt++)gt.set(zt,Rt,Math.min(k.get(zt,Rt),C.get(zt,Rt)));return gt}},{key:"max",value:function(k,C){k=this.checkMatrix(k),C=this.checkMatrix(C);for(var I=k.rows,H=k.columns,gt=new this(I,H),zt=0;zt<I;zt++)for(var Rt=0;Rt<H;Rt++)gt.set(zt,Rt,Math.max(k.get(zt,Rt),C.get(zt,Rt)));return gt}},{key:"checkMatrix",value:function(k){return tt.isMatrix(k)?k:new Ae(k)}},{key:"isMatrix",value:function(k){return k!=null&&k.klass==="Matrix"}}]),tt}();Kt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Kt.prototype[Symbol.for("nodejs.util.inspect.custom")]=z);function xe(tt,ot){return tt-ot}function Tt(tt){return tt.every(function(ot){return typeof ot=="number"})}Kt.random=Kt.rand,Kt.randomInt=Kt.randInt,Kt.diagonal=Kt.diag,Kt.prototype.diagonal=Kt.prototype.diag,Kt.identity=Kt.eye,Kt.prototype.negate=Kt.prototype.neg,Kt.prototype.tensorProduct=Kt.prototype.kroneckerProduct;var Ae=function(tt){M()(k,tt);var ot=L()(k);function k(C,I){var H;if(x()(this,k),H=ot.call(this),k.isMatrix(C))return R()(H,C.clone());if(Number.isInteger(C)&&C>=0)if(H.data=[],Number.isInteger(I)&&I>=0)for(var gt=0;gt<C;gt++)H.data.push(new Float64Array(I));else throw new TypeError("nColumns must be a positive integer");else if(D(C)){var zt=C;if(C=zt.length,I=C?zt[0].length:0,typeof I!="number")throw new TypeError("Data must be a 2D array with at least one element");H.data=[];for(var Rt=0;Rt<C;Rt++){if(zt[Rt].length!==I)throw new RangeError("Inconsistent array dimensions");if(!Tt(zt[Rt]))throw new TypeError("Input data contains non-numeric values");H.data.push(Float64Array.from(zt[Rt]))}}else throw new TypeError("First argument must be a positive number or an array");return H.rows=C,H.columns=I,H}return A()(k,[{key:"set",value:function(I,H,gt){return this.data[I][H]=gt,this}},{key:"get",value:function(I,H){return this.data[I][H]}},{key:"removeRow",value:function(I){return et(this,I),this.data.splice(I,1),this.rows-=1,this}},{key:"addRow",value:function(I,H){return H===void 0&&(H=I,I=this.rows),et(this,I,!0),H=Float64Array.from(it(this,H)),this.data.splice(I,0,H),this.rows+=1,this}},{key:"removeColumn",value:function(I){ut(this,I);for(var H=0;H<this.rows;H++){for(var gt=new Float64Array(this.columns-1),zt=0;zt<I;zt++)gt[zt]=this.data[H][zt];for(var Rt=I+1;Rt<this.columns;Rt++)gt[Rt-1]=this.data[H][Rt];this.data[H]=gt}return this.columns-=1,this}},{key:"addColumn",value:function(I,H){typeof H=="undefined"&&(H=I,I=this.columns),ut(this,I,!0),H=yt(this,H);for(var gt=0;gt<this.rows;gt++){for(var zt=new Float64Array(this.columns+1),Rt=0;Rt<I;Rt++)zt[Rt]=this.data[gt][Rt];for(zt[Rt++]=H[gt];Rt<this.columns+1;Rt++)zt[Rt]=this.data[gt][Rt-1];this.data[gt]=zt}return this.columns+=1,this}}]),k}(Kt);Q(Kt,Ae);var br=function(tt){M()(k,tt);var ot=L()(k);function k(C,I,H){var gt;return x()(this,k),gt=ot.call(this),gt.matrix=C,gt.rows=I,gt.columns=H,gt}return A()(k)}(Kt),Sr=function(tt){M()(k,tt);var ot=L()(k);function k(C,I){var H;return x()(this,k),ut(C,I),H=ot.call(this,C,C.rows,1),H.column=I,H}return A()(k,[{key:"set",value:function(I,H,gt){return this.matrix.set(I,this.column,gt),this}},{key:"get",value:function(I){return this.matrix.get(I,this.column)}}]),k}(br),Mr=function(tt){M()(k,tt);var ot=L()(k);function k(C,I){var H;return x()(this,k),Bt(C,I),H=ot.call(this,C,C.rows,I.length),H.columnIndices=I,H}return A()(k,[{key:"set",value:function(I,H,gt){return this.matrix.set(I,this.columnIndices[H],gt),this}},{key:"get",value:function(I,H){return this.matrix.get(I,this.columnIndices[H])}}]),k}(br),Pr=function(tt){M()(k,tt);var ot=L()(k);function k(C){return x()(this,k),ot.call(this,C,C.rows,C.columns)}return A()(k,[{key:"set",value:function(I,H,gt){return this.matrix.set(I,this.columns-H-1,gt),this}},{key:"get",value:function(I,H){return this.matrix.get(I,this.columns-H-1)}}]),k}(br),on=function(tt){M()(k,tt);var ot=L()(k);function k(C){return x()(this,k),ot.call(this,C,C.rows,C.columns)}return A()(k,[{key:"set",value:function(I,H,gt){return this.matrix.set(this.rows-I-1,H,gt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.rows-I-1,H)}}]),k}(br),Hr=function(tt){M()(k,tt);var ot=L()(k);function k(C,I){var H;return x()(this,k),et(C,I),H=ot.call(this,C,1,C.columns),H.row=I,H}return A()(k,[{key:"set",value:function(I,H,gt){return this.matrix.set(this.row,H,gt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.row,H)}}]),k}(br),Sn=function(tt){M()(k,tt);var ot=L()(k);function k(C,I){var H;return x()(this,k),ft(C,I),H=ot.call(this,C,I.length,C.columns),H.rowIndices=I,H}return A()(k,[{key:"set",value:function(I,H,gt){return this.matrix.set(this.rowIndices[I],H,gt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.rowIndices[I],H)}}]),k}(br),In=function(tt){M()(k,tt);var ot=L()(k);function k(C,I,H){var gt;return x()(this,k),ft(C,I),Bt(C,H),gt=ot.call(this,C,I.length,H.length),gt.rowIndices=I,gt.columnIndices=H,gt}return A()(k,[{key:"set",value:function(I,H,gt){return this.matrix.set(this.rowIndices[I],this.columnIndices[H],gt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.rowIndices[I],this.columnIndices[H])}}]),k}(br),Nn=function(tt){M()(k,tt);var ot=L()(k);function k(C,I,H,gt,zt){var Rt;return x()(this,k),St(C,I,H,gt,zt),Rt=ot.call(this,C,H-I+1,zt-gt+1),Rt.startRow=I,Rt.startColumn=gt,Rt}return A()(k,[{key:"set",value:function(I,H,gt){return this.matrix.set(this.startRow+I,this.startColumn+H,gt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.startRow+I,this.startColumn+H)}}]),k}(br),vr=function(tt){M()(k,tt);var ot=L()(k);function k(C){return x()(this,k),ot.call(this,C,C.columns,C.rows)}return A()(k,[{key:"set",value:function(I,H,gt){return this.matrix.set(H,I,gt),this}},{key:"get",value:function(I,H){return this.matrix.get(H,I)}}]),k}(br),Ze=function(tt){M()(k,tt);var ot=L()(k);function k(C){var I,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x()(this,k);var gt=H.rows,zt=gt===void 0?1:gt;if(C.length%zt!==0)throw new Error("the data length is not divisible by the number of rows");return I=ot.call(this),I.rows=zt,I.columns=C.length/zt,I.data=C,I}return A()(k,[{key:"set",value:function(I,H,gt){var zt=this._calculateIndex(I,H);return this.data[zt]=gt,this}},{key:"get",value:function(I,H){var gt=this._calculateIndex(I,H);return this.data[gt]}},{key:"_calculateIndex",value:function(I,H){return I*this.columns+H}}]),k}(Kt),Er=function(tt){M()(k,tt);var ot=L()(k);function k(C){var I;return x()(this,k),I=ot.call(this),I.data=C,I.rows=C.length,I.columns=C[0].length,I}return A()(k,[{key:"set",value:function(I,H,gt){return this.data[I][H]=gt,this}},{key:"get",value:function(I,H){return this.data[I][H]}}]),k}(Kt);function ke(tt,ot){if(D(tt))return tt[0]&&D(tt[0])?new Er(tt):new Ze(tt,ot);throw new Error("the argument is not an array")}var Xe=function(){function tt(ot){x()(this,tt),ot=Er.checkMatrix(ot);var k=ot.clone(),C=k.rows,I=k.columns,H=new Float64Array(C),gt=1,zt,Rt,qt,Te,he,Ue,cr,Ve,Tr;for(zt=0;zt<C;zt++)H[zt]=zt;for(Ve=new Float64Array(C),Rt=0;Rt<I;Rt++){for(zt=0;zt<C;zt++)Ve[zt]=k.get(zt,Rt);for(zt=0;zt<C;zt++){for(Tr=Math.min(zt,Rt),he=0,qt=0;qt<Tr;qt++)he+=k.get(zt,qt)*Ve[qt];Ve[zt]-=he,k.set(zt,Rt,Ve[zt])}for(Te=Rt,zt=Rt+1;zt<C;zt++)Math.abs(Ve[zt])>Math.abs(Ve[Te])&&(Te=zt);if(Te!==Rt){for(qt=0;qt<I;qt++)Ue=k.get(Te,qt),k.set(Te,qt,k.get(Rt,qt)),k.set(Rt,qt,Ue);cr=H[Te],H[Te]=H[Rt],H[Rt]=cr,gt=-gt}if(Rt<C&&k.get(Rt,Rt)!==0)for(zt=Rt+1;zt<C;zt++)k.set(zt,Rt,k.get(zt,Rt)/k.get(Rt,Rt))}this.LU=k,this.pivotVector=H,this.pivotSign=gt}return A()(tt,[{key:"isSingular",value:function(){for(var k=this.LU,C=k.columns,I=0;I<C;I++)if(k.get(I,I)===0)return!0;return!1}},{key:"solve",value:function(k){k=Ae.checkMatrix(k);var C=this.LU,I=C.rows;if(I!==k.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var H=k.columns,gt=k.subMatrixRow(this.pivotVector,0,H-1),zt=C.columns,Rt,qt,Te;for(Te=0;Te<zt;Te++)for(Rt=Te+1;Rt<zt;Rt++)for(qt=0;qt<H;qt++)gt.set(Rt,qt,gt.get(Rt,qt)-gt.get(Te,qt)*C.get(Rt,Te));for(Te=zt-1;Te>=0;Te--){for(qt=0;qt<H;qt++)gt.set(Te,qt,gt.get(Te,qt)/C.get(Te,Te));for(Rt=0;Rt<Te;Rt++)for(qt=0;qt<H;qt++)gt.set(Rt,qt,gt.get(Rt,qt)-gt.get(Te,qt)*C.get(Rt,Te))}return gt}},{key:"determinant",get:function(){var k=this.LU;if(!k.isSquare())throw new Error("Matrix must be square");for(var C=this.pivotSign,I=k.columns,H=0;H<I;H++)C*=k.get(H,H);return C}},{key:"lowerTriangularMatrix",get:function(){for(var k=this.LU,C=k.rows,I=k.columns,H=new Ae(C,I),gt=0;gt<C;gt++)for(var zt=0;zt<I;zt++)gt>zt?H.set(gt,zt,k.get(gt,zt)):gt===zt?H.set(gt,zt,1):H.set(gt,zt,0);return H}},{key:"upperTriangularMatrix",get:function(){for(var k=this.LU,C=k.rows,I=k.columns,H=new Ae(C,I),gt=0;gt<C;gt++)for(var zt=0;zt<I;zt++)gt<=zt?H.set(gt,zt,k.get(gt,zt)):H.set(gt,zt,0);return H}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),tt}();function jr(tt,ot){var k=0;return Math.abs(tt)>Math.abs(ot)?(k=ot/tt,Math.abs(tt)*Math.sqrt(1+k*k)):ot!==0?(k=tt/ot,Math.abs(ot)*Math.sqrt(1+k*k)):0}var rn=function(){function tt(ot){x()(this,tt),ot=Er.checkMatrix(ot);var k=ot.clone(),C=ot.rows,I=ot.columns,H=new Float64Array(I),gt,zt,Rt,qt;for(Rt=0;Rt<I;Rt++){var Te=0;for(gt=Rt;gt<C;gt++)Te=jr(Te,k.get(gt,Rt));if(Te!==0){for(k.get(Rt,Rt)<0&&(Te=-Te),gt=Rt;gt<C;gt++)k.set(gt,Rt,k.get(gt,Rt)/Te);for(k.set(Rt,Rt,k.get(Rt,Rt)+1),zt=Rt+1;zt<I;zt++){for(qt=0,gt=Rt;gt<C;gt++)qt+=k.get(gt,Rt)*k.get(gt,zt);for(qt=-qt/k.get(Rt,Rt),gt=Rt;gt<C;gt++)k.set(gt,zt,k.get(gt,zt)+qt*k.get(gt,Rt))}}H[Rt]=-Te}this.QR=k,this.Rdiag=H}return A()(tt,[{key:"solve",value:function(k){k=Ae.checkMatrix(k);var C=this.QR,I=C.rows;if(k.rows!==I)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var H=k.columns,gt=k.clone(),zt=C.columns,Rt,qt,Te,he;for(Te=0;Te<zt;Te++)for(qt=0;qt<H;qt++){for(he=0,Rt=Te;Rt<I;Rt++)he+=C.get(Rt,Te)*gt.get(Rt,qt);for(he=-he/C.get(Te,Te),Rt=Te;Rt<I;Rt++)gt.set(Rt,qt,gt.get(Rt,qt)+he*C.get(Rt,Te))}for(Te=zt-1;Te>=0;Te--){for(qt=0;qt<H;qt++)gt.set(Te,qt,gt.get(Te,qt)/this.Rdiag[Te]);for(Rt=0;Rt<Te;Rt++)for(qt=0;qt<H;qt++)gt.set(Rt,qt,gt.get(Rt,qt)-gt.get(Te,qt)*C.get(Rt,Te))}return gt.subMatrix(0,zt-1,0,H-1)}},{key:"isFullRank",value:function(){for(var k=this.QR.columns,C=0;C<k;C++)if(this.Rdiag[C]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var k=this.QR,C=k.columns,I=new Ae(C,C),H,gt;for(H=0;H<C;H++)for(gt=0;gt<C;gt++)H<gt?I.set(H,gt,k.get(H,gt)):H===gt?I.set(H,gt,this.Rdiag[H]):I.set(H,gt,0);return I}},{key:"orthogonalMatrix",get:function(){var k=this.QR,C=k.rows,I=k.columns,H=new Ae(C,I),gt,zt,Rt,qt;for(Rt=I-1;Rt>=0;Rt--){for(gt=0;gt<C;gt++)H.set(gt,Rt,0);for(H.set(Rt,Rt,1),zt=Rt;zt<I;zt++)if(k.get(Rt,Rt)!==0){for(qt=0,gt=Rt;gt<C;gt++)qt+=k.get(gt,Rt)*H.get(gt,zt);for(qt=-qt/k.get(Rt,Rt),gt=Rt;gt<C;gt++)H.set(gt,zt,H.get(gt,zt)+qt*k.get(gt,Rt))}}return H}}]),tt}(),ir=function(){function tt(ot){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x()(this,tt),ot=Er.checkMatrix(ot),ot.isEmpty())throw new Error("Matrix must be non-empty");var C=ot.rows,I=ot.columns,H=k.computeLeftSingularVectors,gt=H===void 0?!0:H,zt=k.computeRightSingularVectors,Rt=zt===void 0?!0:zt,qt=k.autoTranspose,Te=qt===void 0?!1:qt,he=Boolean(gt),Ue=Boolean(Rt),cr=!1,Ve;if(C<I)if(!Te)Ve=ot.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Ve=ot.transpose(),C=Ve.rows,I=Ve.columns,cr=!0;var Tr=he;he=Ue,Ue=Tr}else Ve=ot.clone();for(var nn=Math.min(C,I),He=Math.min(C+1,I),ur=new Float64Array(He),Ar=new Ae(C,nn),Cr=new Ae(I,I),se=new Float64Array(I),Xt=new Float64Array(C),fe=new Float64Array(He),Me=0;Me<He;Me++)fe[Me]=Me;for(var pe=Math.min(C-1,I),Re=Math.max(0,Math.min(I-2,C)),nr=Math.max(pe,Re),fr=0;fr<nr;fr++){if(fr<pe){ur[fr]=0;for(var tn=fr;tn<C;tn++)ur[fr]=jr(ur[fr],Ve.get(tn,fr));if(ur[fr]!==0){Ve.get(fr,fr)<0&&(ur[fr]=-ur[fr]);for(var Ln=fr;Ln<C;Ln++)Ve.set(Ln,fr,Ve.get(Ln,fr)/ur[fr]);Ve.set(fr,fr,Ve.get(fr,fr)+1)}ur[fr]=-ur[fr]}for(var sn=fr+1;sn<I;sn++){if(fr<pe&&ur[fr]!==0){for(var Xn=0,an=fr;an<C;an++)Xn+=Ve.get(an,fr)*Ve.get(an,sn);Xn=-Xn/Ve.get(fr,fr);for(var Bn=fr;Bn<C;Bn++)Ve.set(Bn,sn,Ve.get(Bn,sn)+Xn*Ve.get(Bn,fr))}se[sn]=Ve.get(fr,sn)}if(he&&fr<pe)for(var Jn=fr;Jn<C;Jn++)Ar.set(Jn,fr,Ve.get(Jn,fr));if(fr<Re){se[fr]=0;for(var oa=fr+1;oa<I;oa++)se[fr]=jr(se[fr],se[oa]);if(se[fr]!==0){se[fr+1]<0&&(se[fr]=0-se[fr]);for(var sa=fr+1;sa<I;sa++)se[sa]/=se[fr];se[fr+1]+=1}if(se[fr]=-se[fr],fr+1<C&&se[fr]!==0){for(var xi=fr+1;xi<C;xi++)Xt[xi]=0;for(var Na=fr+1;Na<C;Na++)for(var Ra=fr+1;Ra<I;Ra++)Xt[Na]+=se[Ra]*Ve.get(Na,Ra);for(var ri=fr+1;ri<I;ri++)for(var Ci=-se[ri]/se[fr+1],Ni=fr+1;Ni<C;Ni++)Ve.set(Ni,ri,Ve.get(Ni,ri)+Ci*Xt[Ni])}if(Ue)for(var Ri=fr+1;Ri<I;Ri++)Cr.set(Ri,fr,se[Ri])}}var pa=Math.min(I,C+1);if(pe<I&&(ur[pe]=Ve.get(pe,pe)),C<pa&&(ur[pa-1]=0),Re+1<pa&&(se[Re]=Ve.get(Re,pa-1)),se[pa-1]=0,he){for(var ki=pe;ki<nn;ki++){for(var eo=0;eo<C;eo++)Ar.set(eo,ki,0);Ar.set(ki,ki,1)}for(var za=pe-1;za>=0;za--)if(ur[za]!==0){for(var Ei=za+1;Ei<nn;Ei++){for(var Bi=0,go=za;go<C;go++)Bi+=Ar.get(go,za)*Ar.get(go,Ei);Bi=-Bi/Ar.get(za,za);for(var Pi=za;Pi<C;Pi++)Ar.set(Pi,Ei,Ar.get(Pi,Ei)+Bi*Ar.get(Pi,za))}for(var Wi=za;Wi<C;Wi++)Ar.set(Wi,za,-Ar.get(Wi,za));Ar.set(za,za,1+Ar.get(za,za));for(var ro=0;ro<za-1;ro++)Ar.set(ro,za,0)}else{for(var mo=0;mo<C;mo++)Ar.set(mo,za,0);Ar.set(za,za,1)}}if(Ue)for(var oi=I-1;oi>=0;oi--){if(oi<Re&&se[oi]!==0)for(var Ti=oi+1;Ti<I;Ti++){for(var Hn=0,Jt=oi+1;Jt<I;Jt++)Hn+=Cr.get(Jt,oi)*Cr.get(Jt,Ti);Hn=-Hn/Cr.get(oi+1,oi);for(var ue=oi+1;ue<I;ue++)Cr.set(ue,Ti,Cr.get(ue,Ti)+Hn*Cr.get(ue,oi))}for(var Pe=0;Pe<I;Pe++)Cr.set(Pe,oi,0);Cr.set(oi,oi,1)}for(var rr=pa-1,Or=0,Ir=Number.EPSILON;pa>0;){var xr=void 0,Kr=void 0;for(xr=pa-2;xr>=-1&&xr!==-1;xr--){var un=Number.MIN_VALUE+Ir*Math.abs(ur[xr]+Math.abs(ur[xr+1]));if(Math.abs(se[xr])<=un||Number.isNaN(se[xr])){se[xr]=0;break}}if(xr===pa-2)Kr=4;else{var Mn=void 0;for(Mn=pa-1;Mn>=xr&&Mn!==xr;Mn--){var Kn=(Mn!==pa?Math.abs(se[Mn]):0)+(Mn!==xr+1?Math.abs(se[Mn-1]):0);if(Math.abs(ur[Mn])<=Ir*Kn){ur[Mn]=0;break}}Mn===xr?Kr=3:Mn===pa-1?Kr=1:(Kr=2,xr=Mn)}switch(xr++,Kr){case 1:{var Un=se[pa-2];se[pa-2]=0;for(var ra=pa-2;ra>=xr;ra--){var na=jr(ur[ra],Un),Ya=ur[ra]/na,ua=Un/na;if(ur[ra]=na,ra!==xr&&(Un=-ua*se[ra-1],se[ra-1]=Ya*se[ra-1]),Ue)for(var Qn=0;Qn<I;Qn++)na=Ya*Cr.get(Qn,ra)+ua*Cr.get(Qn,pa-1),Cr.set(Qn,pa-1,-ua*Cr.get(Qn,ra)+Ya*Cr.get(Qn,pa-1)),Cr.set(Qn,ra,na)}break}case 2:{var Ga=se[xr-1];se[xr-1]=0;for(var Da=xr;Da<pa;Da++){var xa=jr(ur[Da],Ga),si=ur[Da]/xa,Qa=Ga/xa;if(ur[Da]=xa,Ga=-Qa*se[Da],se[Da]=si*se[Da],he)for(var ka=0;ka<C;ka++)xa=si*Ar.get(ka,Da)+Qa*Ar.get(ka,xr-1),Ar.set(ka,xr-1,-Qa*Ar.get(ka,Da)+si*Ar.get(ka,xr-1)),Ar.set(ka,Da,xa)}break}case 3:{var _a=Math.max(Math.abs(ur[pa-1]),Math.abs(ur[pa-2]),Math.abs(se[pa-2]),Math.abs(ur[xr]),Math.abs(se[xr])),va=ur[pa-1]/_a,ci=ur[pa-2]/_a,ni=se[pa-2]/_a,fi=ur[xr]/_a,Fi=se[xr]/_a,Ai=((ci+va)*(ci-va)+ni*ni)/2,Yi=va*ni*(va*ni),Oo=0;(Ai!==0||Yi!==0)&&(Ai<0?Oo=0-Math.sqrt(Ai*Ai+Yi):Oo=Math.sqrt(Ai*Ai+Yi),Oo=Yi/(Ai+Oo));for(var Io=(fi+va)*(fi-va)+Oo,Li=fi*Fi,Ba=xr;Ba<pa-1;Ba++){var vi=jr(Io,Li);vi===0&&(vi=Number.MIN_VALUE);var zi=Io/vi,Sa=Li/vi;if(Ba!==xr&&(se[Ba-1]=vi),Io=zi*ur[Ba]+Sa*se[Ba],se[Ba]=zi*se[Ba]-Sa*ur[Ba],Li=Sa*ur[Ba+1],ur[Ba+1]=zi*ur[Ba+1],Ue)for(var Xi=0;Xi<I;Xi++)vi=zi*Cr.get(Xi,Ba)+Sa*Cr.get(Xi,Ba+1),Cr.set(Xi,Ba+1,-Sa*Cr.get(Xi,Ba)+zi*Cr.get(Xi,Ba+1)),Cr.set(Xi,Ba,vi);if(vi=jr(Io,Li),vi===0&&(vi=Number.MIN_VALUE),zi=Io/vi,Sa=Li/vi,ur[Ba]=vi,Io=zi*se[Ba]+Sa*ur[Ba+1],ur[Ba+1]=-Sa*se[Ba]+zi*ur[Ba+1],Li=Sa*se[Ba+1],se[Ba+1]=zi*se[Ba+1],he&&Ba<C-1)for(var co=0;co<C;co++)vi=zi*Ar.get(co,Ba)+Sa*Ar.get(co,Ba+1),Ar.set(co,Ba+1,-Sa*Ar.get(co,Ba)+zi*Ar.get(co,Ba+1)),Ar.set(co,Ba,vi)}se[pa-2]=Io,Or=Or+1;break}case 4:{if(ur[xr]<=0&&(ur[xr]=ur[xr]<0?-ur[xr]:0,Ue))for(var Mi=0;Mi<=rr;Mi++)Cr.set(Mi,xr,-Cr.get(Mi,xr));for(;xr<rr&&!(ur[xr]>=ur[xr+1]);){var Lo=ur[xr];if(ur[xr]=ur[xr+1],ur[xr+1]=Lo,Ue&&xr<I-1)for(var pi=0;pi<I;pi++)Lo=Cr.get(pi,xr+1),Cr.set(pi,xr+1,Cr.get(pi,xr)),Cr.set(pi,xr,Lo);if(he&&xr<C-1)for(var fo=0;fo<C;fo++)Lo=Ar.get(fo,xr+1),Ar.set(fo,xr+1,Ar.get(fo,xr)),Ar.set(fo,xr,Lo);xr++}Or=0,pa--;break}}}if(cr){var Go=Cr;Cr=Ar,Ar=Go}this.m=C,this.n=I,this.s=ur,this.U=Ar,this.V=Cr}return A()(tt,[{key:"solve",value:function(k){for(var C=k,I=this.threshold,H=this.s.length,gt=Ae.zeros(H,H),zt=0;zt<H;zt++)Math.abs(this.s[zt])<=I?gt.set(zt,zt,0):gt.set(zt,zt,1/this.s[zt]);for(var Rt=this.U,qt=this.rightSingularVectors,Te=qt.mmul(gt),he=qt.rows,Ue=Rt.rows,cr=Ae.zeros(he,Ue),Ve=0;Ve<he;Ve++)for(var Tr=0;Tr<Ue;Tr++){for(var nn=0,He=0;He<H;He++)nn+=Te.get(Ve,He)*Rt.get(Tr,He);cr.set(Ve,Tr,nn)}return cr.mmul(C)}},{key:"solveForDiagonal",value:function(k){return this.solve(Ae.diag(k))}},{key:"inverse",value:function(){for(var k=this.V,C=this.threshold,I=k.rows,H=k.columns,gt=new Ae(I,this.s.length),zt=0;zt<I;zt++)for(var Rt=0;Rt<H;Rt++)Math.abs(this.s[Rt])>C&&gt.set(zt,Rt,k.get(zt,Rt)/this.s[Rt]);for(var qt=this.U,Te=qt.rows,he=qt.columns,Ue=new Ae(I,Te),cr=0;cr<I;cr++)for(var Ve=0;Ve<Te;Ve++){for(var Tr=0,nn=0;nn<he;nn++)Tr+=gt.get(cr,nn)*qt.get(Ve,nn);Ue.set(cr,Ve,Tr)}return Ue}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var k=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,C=0,I=this.s,H=0,gt=I.length;H<gt;H++)I[H]>k&&C++;return C}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Ae.diag(this.s)}}]),tt}();function Lr(tt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return tt=Er.checkMatrix(tt),ot?new ir(tt).inverse():dn(tt,Ae.eye(tt.rows))}function dn(tt,ot){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return tt=Er.checkMatrix(tt),ot=Er.checkMatrix(ot),k?new ir(tt).solve(ot):tt.isSquare()?new Xe(tt).solve(ot):new rn(tt).solve(ot)}function Zr(tt){if(tt=Ae.checkMatrix(tt),tt.isSquare()){if(tt.columns===0)return 1;var ot,k,C,I;if(tt.columns===2)return ot=tt.get(0,0),k=tt.get(0,1),C=tt.get(1,0),I=tt.get(1,1),ot*I-k*C;if(tt.columns===3){var H,gt,zt;return H=new In(tt,[1,2],[1,2]),gt=new In(tt,[1,2],[0,2]),zt=new In(tt,[1,2],[0,1]),ot=tt.get(0,0),k=tt.get(0,1),C=tt.get(0,2),ot*Zr(H)-k*Zr(gt)+C*Zr(zt)}else return new Xe(tt).determinant}else throw Error("determinant can only be calculated for a square matrix")}function wn(tt,ot){for(var k=[],C=0;C<tt;C++)C!==ot&&k.push(C);return k}function ln(tt,ot,k){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(tt>I)return new Array(ot.rows+1).fill(0);for(var H=ot.addRow(k,[0]),gt=0;gt<H.rows;gt++)Math.abs(H.get(gt,0))<C&&H.set(gt,0,0);return H.to1DArray()}function bn(tt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=ot.thresholdValue,C=k===void 0?1e-9:k,I=ot.thresholdError,H=I===void 0?1e-9:I;tt=Ae.checkMatrix(tt);for(var gt=tt.rows,zt=new Ae(gt,gt),Rt=0;Rt<gt;Rt++){var qt=Ae.columnVector(tt.getRow(Rt)),Te=tt.subMatrixRow(wn(gt,Rt)).transpose(),he=new ir(Te),Ue=he.solve(qt),cr=Ae.sub(qt,Te.mmul(Ue)).abs().max();zt.setRow(Rt,ln(cr,Ue,Rt,C,H))}return zt}function Pn(tt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(tt=Ae.checkMatrix(tt),tt.isEmpty())return tt.transpose();for(var k=new ir(tt,{autoTranspose:!0}),C=k.leftSingularVectors,I=k.rightSingularVectors,H=k.diagonal,gt=0;gt<H.length;gt++)Math.abs(H[gt])>ot?H[gt]=1/H[gt]:H[gt]=0;return I.mmul(Ae.diag(H).mmul(C.transpose()))}function at(tt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};tt=new Ae(tt);var C=!1;if(b()(ot)==="object"&&!Ae.isMatrix(ot)&&!D(ot)?(k=ot,ot=tt,C=!0):ot=new Ae(ot),tt.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");var I=k,H=I.center,gt=H===void 0?!0:H;gt&&(tt=tt.center("column"),C||(ot=ot.center("column")));for(var zt=tt.transpose().mmul(ot),Rt=0;Rt<zt.rows;Rt++)for(var qt=0;qt<zt.columns;qt++)zt.set(Rt,qt,zt.get(Rt,qt)*(1/(tt.rows-1)));return zt}function je(tt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};tt=new Ae(tt);var C=!1;if(b()(ot)==="object"&&!Ae.isMatrix(ot)&&!D(ot)?(k=ot,ot=tt,C=!0):ot=new Ae(ot),tt.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");var I=k,H=I.center,gt=H===void 0?!0:H,zt=I.scale,Rt=zt===void 0?!0:zt;gt&&(tt.center("column"),C||ot.center("column")),Rt&&(tt.scale("column"),C||ot.scale("column"));for(var qt=tt.standardDeviation("column",{unbiased:!0}),Te=C?qt:ot.standardDeviation("column",{unbiased:!0}),he=tt.transpose().mmul(ot),Ue=0;Ue<he.rows;Ue++)for(var cr=0;cr<he.columns;cr++)he.set(Ue,cr,he.get(Ue,cr)*(1/(qt[Ue]*Te[cr]))*(1/(tt.rows-1)));return he}var Zt=function(){function tt(ot){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x()(this,tt);var C=k.assumeSymmetric,I=C===void 0?!1:C;if(ot=Er.checkMatrix(ot),!ot.isSquare())throw new Error("Matrix is not a square matrix");if(ot.isEmpty())throw new Error("Matrix must be non-empty");var H=ot.columns,gt=new Ae(H,H),zt=new Float64Array(H),Rt=new Float64Array(H),qt=ot,Te,he,Ue=!1;if(I?Ue=!0:Ue=ot.isSymmetric(),Ue){for(Te=0;Te<H;Te++)for(he=0;he<H;he++)gt.set(Te,he,qt.get(Te,he));$t(H,Rt,zt,gt),Mt(H,Rt,zt,gt)}else{var cr=new Ae(H,H),Ve=new Float64Array(H);for(he=0;he<H;he++)for(Te=0;Te<H;Te++)cr.set(Te,he,qt.get(Te,he));be(H,cr,Ve,gt),Nt(H,Rt,zt,gt,cr)}this.n=H,this.e=Rt,this.d=zt,this.V=gt}return A()(tt,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var k=this.n,C=this.e,I=this.d,H=new Ae(k,k),gt,zt;for(gt=0;gt<k;gt++){for(zt=0;zt<k;zt++)H.set(gt,zt,0);H.set(gt,gt,I[gt]),C[gt]>0?H.set(gt,gt+1,C[gt]):C[gt]<0&&H.set(gt,gt-1,C[gt])}return H}}]),tt}();function $t(tt,ot,k,C){var I,H,gt,zt,Rt,qt,Te,he;for(Rt=0;Rt<tt;Rt++)k[Rt]=C.get(tt-1,Rt);for(zt=tt-1;zt>0;zt--){for(he=0,gt=0,qt=0;qt<zt;qt++)he=he+Math.abs(k[qt]);if(he===0)for(ot[zt]=k[zt-1],Rt=0;Rt<zt;Rt++)k[Rt]=C.get(zt-1,Rt),C.set(zt,Rt,0),C.set(Rt,zt,0);else{for(qt=0;qt<zt;qt++)k[qt]/=he,gt+=k[qt]*k[qt];for(I=k[zt-1],H=Math.sqrt(gt),I>0&&(H=-H),ot[zt]=he*H,gt=gt-I*H,k[zt-1]=I-H,Rt=0;Rt<zt;Rt++)ot[Rt]=0;for(Rt=0;Rt<zt;Rt++){for(I=k[Rt],C.set(Rt,zt,I),H=ot[Rt]+C.get(Rt,Rt)*I,qt=Rt+1;qt<=zt-1;qt++)H+=C.get(qt,Rt)*k[qt],ot[qt]+=C.get(qt,Rt)*I;ot[Rt]=H}for(I=0,Rt=0;Rt<zt;Rt++)ot[Rt]/=gt,I+=ot[Rt]*k[Rt];for(Te=I/(gt+gt),Rt=0;Rt<zt;Rt++)ot[Rt]-=Te*k[Rt];for(Rt=0;Rt<zt;Rt++){for(I=k[Rt],H=ot[Rt],qt=Rt;qt<=zt-1;qt++)C.set(qt,Rt,C.get(qt,Rt)-(I*ot[qt]+H*k[qt]));k[Rt]=C.get(zt-1,Rt),C.set(zt,Rt,0)}}k[zt]=gt}for(zt=0;zt<tt-1;zt++){if(C.set(tt-1,zt,C.get(zt,zt)),C.set(zt,zt,1),gt=k[zt+1],gt!==0){for(qt=0;qt<=zt;qt++)k[qt]=C.get(qt,zt+1)/gt;for(Rt=0;Rt<=zt;Rt++){for(H=0,qt=0;qt<=zt;qt++)H+=C.get(qt,zt+1)*C.get(qt,Rt);for(qt=0;qt<=zt;qt++)C.set(qt,Rt,C.get(qt,Rt)-H*k[qt])}}for(qt=0;qt<=zt;qt++)C.set(qt,zt+1,0)}for(Rt=0;Rt<tt;Rt++)k[Rt]=C.get(tt-1,Rt),C.set(tt-1,Rt,0);C.set(tt-1,tt-1,1),ot[0]=0}function Mt(tt,ot,k,C){var I,H,gt,zt,Rt,qt,Te,he,Ue,cr,Ve,Tr,nn,He,ur,Ar,Cr;for(gt=1;gt<tt;gt++)ot[gt-1]=ot[gt];ot[tt-1]=0;var se=0,Xt=0,fe=Number.EPSILON;for(qt=0;qt<tt;qt++){for(Xt=Math.max(Xt,Math.abs(k[qt])+Math.abs(ot[qt])),Te=qt;Te<tt&&!(Math.abs(ot[Te])<=fe*Xt);)Te++;if(Te>qt){Cr=0;do{for(Cr=Cr+1,I=k[qt],he=(k[qt+1]-I)/(2*ot[qt]),Ue=jr(he,1),he<0&&(Ue=-Ue),k[qt]=ot[qt]/(he+Ue),k[qt+1]=ot[qt]*(he+Ue),cr=k[qt+1],H=I-k[qt],gt=qt+2;gt<tt;gt++)k[gt]-=H;for(se=se+H,he=k[Te],Ve=1,Tr=Ve,nn=Ve,He=ot[qt+1],ur=0,Ar=0,gt=Te-1;gt>=qt;gt--)for(nn=Tr,Tr=Ve,Ar=ur,I=Ve*ot[gt],H=Ve*he,Ue=jr(he,ot[gt]),ot[gt+1]=ur*Ue,ur=ot[gt]/Ue,Ve=he/Ue,he=Ve*k[gt]-ur*I,k[gt+1]=H+ur*(Ve*I+ur*k[gt]),Rt=0;Rt<tt;Rt++)H=C.get(Rt,gt+1),C.set(Rt,gt+1,ur*C.get(Rt,gt)+Ve*H),C.set(Rt,gt,Ve*C.get(Rt,gt)-ur*H);he=-ur*Ar*nn*He*ot[qt]/cr,ot[qt]=ur*he,k[qt]=Ve*he}while(Math.abs(ot[qt])>fe*Xt)}k[qt]=k[qt]+se,ot[qt]=0}for(gt=0;gt<tt-1;gt++){for(Rt=gt,he=k[gt],zt=gt+1;zt<tt;zt++)k[zt]<he&&(Rt=zt,he=k[zt]);if(Rt!==gt)for(k[Rt]=k[gt],k[gt]=he,zt=0;zt<tt;zt++)he=C.get(zt,gt),C.set(zt,gt,C.get(zt,Rt)),C.set(zt,Rt,he)}}function be(tt,ot,k,C){var I=0,H=tt-1,gt,zt,Rt,qt,Te,he,Ue;for(he=I+1;he<=H-1;he++){for(Ue=0,qt=he;qt<=H;qt++)Ue=Ue+Math.abs(ot.get(qt,he-1));if(Ue!==0){for(Rt=0,qt=H;qt>=he;qt--)k[qt]=ot.get(qt,he-1)/Ue,Rt+=k[qt]*k[qt];for(zt=Math.sqrt(Rt),k[he]>0&&(zt=-zt),Rt=Rt-k[he]*zt,k[he]=k[he]-zt,Te=he;Te<tt;Te++){for(gt=0,qt=H;qt>=he;qt--)gt+=k[qt]*ot.get(qt,Te);for(gt=gt/Rt,qt=he;qt<=H;qt++)ot.set(qt,Te,ot.get(qt,Te)-gt*k[qt])}for(qt=0;qt<=H;qt++){for(gt=0,Te=H;Te>=he;Te--)gt+=k[Te]*ot.get(qt,Te);for(gt=gt/Rt,Te=he;Te<=H;Te++)ot.set(qt,Te,ot.get(qt,Te)-gt*k[Te])}k[he]=Ue*k[he],ot.set(he,he-1,Ue*zt)}}for(qt=0;qt<tt;qt++)for(Te=0;Te<tt;Te++)C.set(qt,Te,qt===Te?1:0);for(he=H-1;he>=I+1;he--)if(ot.get(he,he-1)!==0){for(qt=he+1;qt<=H;qt++)k[qt]=ot.get(qt,he-1);for(Te=he;Te<=H;Te++){for(zt=0,qt=he;qt<=H;qt++)zt+=k[qt]*C.get(qt,Te);for(zt=zt/k[he]/ot.get(he,he-1),qt=he;qt<=H;qt++)C.set(qt,Te,C.get(qt,Te)+zt*k[qt])}}}function Nt(tt,ot,k,C,I){var H=tt-1,gt=0,zt=tt-1,Rt=Number.EPSILON,qt=0,Te=0,he=0,Ue=0,cr=0,Ve=0,Tr=0,nn=0,He,ur,Ar,Cr,se,Xt,fe,Me,pe,Re,nr,fr,tn,Ln,sn;for(He=0;He<tt;He++)for((He<gt||He>zt)&&(k[He]=I.get(He,He),ot[He]=0),ur=Math.max(He-1,0);ur<tt;ur++)Te=Te+Math.abs(I.get(He,ur));for(;H>=gt;){for(Cr=H;Cr>gt&&(Ve=Math.abs(I.get(Cr-1,Cr-1))+Math.abs(I.get(Cr,Cr)),Ve===0&&(Ve=Te),!(Math.abs(I.get(Cr,Cr-1))<Rt*Ve));)Cr--;if(Cr===H)I.set(H,H,I.get(H,H)+qt),k[H]=I.get(H,H),ot[H]=0,H--,nn=0;else if(Cr===H-1){if(fe=I.get(H,H-1)*I.get(H-1,H),he=(I.get(H-1,H-1)-I.get(H,H))/2,Ue=he*he+fe,Tr=Math.sqrt(Math.abs(Ue)),I.set(H,H,I.get(H,H)+qt),I.set(H-1,H-1,I.get(H-1,H-1)+qt),Me=I.get(H,H),Ue>=0){for(Tr=he>=0?he+Tr:he-Tr,k[H-1]=Me+Tr,k[H]=k[H-1],Tr!==0&&(k[H]=Me-fe/Tr),ot[H-1]=0,ot[H]=0,Me=I.get(H,H-1),Ve=Math.abs(Me)+Math.abs(Tr),he=Me/Ve,Ue=Tr/Ve,cr=Math.sqrt(he*he+Ue*Ue),he=he/cr,Ue=Ue/cr,ur=H-1;ur<tt;ur++)Tr=I.get(H-1,ur),I.set(H-1,ur,Ue*Tr+he*I.get(H,ur)),I.set(H,ur,Ue*I.get(H,ur)-he*Tr);for(He=0;He<=H;He++)Tr=I.get(He,H-1),I.set(He,H-1,Ue*Tr+he*I.get(He,H)),I.set(He,H,Ue*I.get(He,H)-he*Tr);for(He=gt;He<=zt;He++)Tr=C.get(He,H-1),C.set(He,H-1,Ue*Tr+he*C.get(He,H)),C.set(He,H,Ue*C.get(He,H)-he*Tr)}else k[H-1]=Me+he,k[H]=Me+he,ot[H-1]=Tr,ot[H]=-Tr;H=H-2,nn=0}else{if(Me=I.get(H,H),pe=0,fe=0,Cr<H&&(pe=I.get(H-1,H-1),fe=I.get(H,H-1)*I.get(H-1,H)),nn===10){for(qt+=Me,He=gt;He<=H;He++)I.set(He,He,I.get(He,He)-Me);Ve=Math.abs(I.get(H,H-1))+Math.abs(I.get(H-1,H-2)),Me=pe=.75*Ve,fe=-.4375*Ve*Ve}if(nn===30&&(Ve=(pe-Me)/2,Ve=Ve*Ve+fe,Ve>0)){for(Ve=Math.sqrt(Ve),pe<Me&&(Ve=-Ve),Ve=Me-fe/((pe-Me)/2+Ve),He=gt;He<=H;He++)I.set(He,He,I.get(He,He)-Ve);qt+=Ve,Me=pe=fe=.964}for(nn=nn+1,se=H-2;se>=Cr&&(Tr=I.get(se,se),cr=Me-Tr,Ve=pe-Tr,he=(cr*Ve-fe)/I.get(se+1,se)+I.get(se,se+1),Ue=I.get(se+1,se+1)-Tr-cr-Ve,cr=I.get(se+2,se+1),Ve=Math.abs(he)+Math.abs(Ue)+Math.abs(cr),he=he/Ve,Ue=Ue/Ve,cr=cr/Ve,!(se===Cr||Math.abs(I.get(se,se-1))*(Math.abs(Ue)+Math.abs(cr))<Rt*(Math.abs(he)*(Math.abs(I.get(se-1,se-1))+Math.abs(Tr)+Math.abs(I.get(se+1,se+1))))));)se--;for(He=se+2;He<=H;He++)I.set(He,He-2,0),He>se+2&&I.set(He,He-3,0);for(Ar=se;Ar<=H-1&&(Ln=Ar!==H-1,Ar!==se&&(he=I.get(Ar,Ar-1),Ue=I.get(Ar+1,Ar-1),cr=Ln?I.get(Ar+2,Ar-1):0,Me=Math.abs(he)+Math.abs(Ue)+Math.abs(cr),Me!==0&&(he=he/Me,Ue=Ue/Me,cr=cr/Me)),Me!==0);Ar++)if(Ve=Math.sqrt(he*he+Ue*Ue+cr*cr),he<0&&(Ve=-Ve),Ve!==0){for(Ar!==se?I.set(Ar,Ar-1,-Ve*Me):Cr!==se&&I.set(Ar,Ar-1,-I.get(Ar,Ar-1)),he=he+Ve,Me=he/Ve,pe=Ue/Ve,Tr=cr/Ve,Ue=Ue/he,cr=cr/he,ur=Ar;ur<tt;ur++)he=I.get(Ar,ur)+Ue*I.get(Ar+1,ur),Ln&&(he=he+cr*I.get(Ar+2,ur),I.set(Ar+2,ur,I.get(Ar+2,ur)-he*Tr)),I.set(Ar,ur,I.get(Ar,ur)-he*Me),I.set(Ar+1,ur,I.get(Ar+1,ur)-he*pe);for(He=0;He<=Math.min(H,Ar+3);He++)he=Me*I.get(He,Ar)+pe*I.get(He,Ar+1),Ln&&(he=he+Tr*I.get(He,Ar+2),I.set(He,Ar+2,I.get(He,Ar+2)-he*cr)),I.set(He,Ar,I.get(He,Ar)-he),I.set(He,Ar+1,I.get(He,Ar+1)-he*Ue);for(He=gt;He<=zt;He++)he=Me*C.get(He,Ar)+pe*C.get(He,Ar+1),Ln&&(he=he+Tr*C.get(He,Ar+2),C.set(He,Ar+2,C.get(He,Ar+2)-he*cr)),C.set(He,Ar,C.get(He,Ar)-he),C.set(He,Ar+1,C.get(He,Ar+1)-he*Ue)}}}if(Te!==0){for(H=tt-1;H>=0;H--)if(he=k[H],Ue=ot[H],Ue===0)for(Cr=H,I.set(H,H,1),He=H-1;He>=0;He--){for(fe=I.get(He,He)-he,cr=0,ur=Cr;ur<=H;ur++)cr=cr+I.get(He,ur)*I.get(ur,H);if(ot[He]<0)Tr=fe,Ve=cr;else if(Cr=He,ot[He]===0?I.set(He,H,fe!==0?-cr/fe:-cr/(Rt*Te)):(Me=I.get(He,He+1),pe=I.get(He+1,He),Ue=(k[He]-he)*(k[He]-he)+ot[He]*ot[He],Xt=(Me*Ve-Tr*cr)/Ue,I.set(He,H,Xt),I.set(He+1,H,Math.abs(Me)>Math.abs(Tr)?(-cr-fe*Xt)/Me:(-Ve-pe*Xt)/Tr)),Xt=Math.abs(I.get(He,H)),Rt*Xt*Xt>1)for(ur=He;ur<=H;ur++)I.set(ur,H,I.get(ur,H)/Xt)}else if(Ue<0)for(Cr=H-1,Math.abs(I.get(H,H-1))>Math.abs(I.get(H-1,H))?(I.set(H-1,H-1,Ue/I.get(H,H-1)),I.set(H-1,H,-(I.get(H,H)-he)/I.get(H,H-1))):(sn=Ht(0,-I.get(H-1,H),I.get(H-1,H-1)-he,Ue),I.set(H-1,H-1,sn[0]),I.set(H-1,H,sn[1])),I.set(H,H-1,0),I.set(H,H,1),He=H-2;He>=0;He--){for(Re=0,nr=0,ur=Cr;ur<=H;ur++)Re=Re+I.get(He,ur)*I.get(ur,H-1),nr=nr+I.get(He,ur)*I.get(ur,H);if(fe=I.get(He,He)-he,ot[He]<0)Tr=fe,cr=Re,Ve=nr;else if(Cr=He,ot[He]===0?(sn=Ht(-Re,-nr,fe,Ue),I.set(He,H-1,sn[0]),I.set(He,H,sn[1])):(Me=I.get(He,He+1),pe=I.get(He+1,He),fr=(k[He]-he)*(k[He]-he)+ot[He]*ot[He]-Ue*Ue,tn=(k[He]-he)*2*Ue,fr===0&&tn===0&&(fr=Rt*Te*(Math.abs(fe)+Math.abs(Ue)+Math.abs(Me)+Math.abs(pe)+Math.abs(Tr))),sn=Ht(Me*cr-Tr*Re+Ue*nr,Me*Ve-Tr*nr-Ue*Re,fr,tn),I.set(He,H-1,sn[0]),I.set(He,H,sn[1]),Math.abs(Me)>Math.abs(Tr)+Math.abs(Ue)?(I.set(He+1,H-1,(-Re-fe*I.get(He,H-1)+Ue*I.get(He,H))/Me),I.set(He+1,H,(-nr-fe*I.get(He,H)-Ue*I.get(He,H-1))/Me)):(sn=Ht(-cr-pe*I.get(He,H-1),-Ve-pe*I.get(He,H),Tr,Ue),I.set(He+1,H-1,sn[0]),I.set(He+1,H,sn[1]))),Xt=Math.max(Math.abs(I.get(He,H-1)),Math.abs(I.get(He,H))),Rt*Xt*Xt>1)for(ur=He;ur<=H;ur++)I.set(ur,H-1,I.get(ur,H-1)/Xt),I.set(ur,H,I.get(ur,H)/Xt)}for(He=0;He<tt;He++)if(He<gt||He>zt)for(ur=He;ur<tt;ur++)C.set(He,ur,I.get(He,ur));for(ur=tt-1;ur>=gt;ur--)for(He=gt;He<=zt;He++){for(Tr=0,Ar=gt;Ar<=Math.min(ur,zt);Ar++)Tr=Tr+C.get(He,Ar)*I.get(Ar,ur);C.set(He,ur,Tr)}}}function Ht(tt,ot,k,C){var I,H;return Math.abs(k)>Math.abs(C)?(I=C/k,H=k+I*C,[(tt+I*ot)/H,(ot-I*tt)/H]):(I=k/C,H=C+I*k,[(I*tt+ot)/H,(I*ot-tt)/H])}var dt=function(){function tt(ot){if(x()(this,tt),ot=Er.checkMatrix(ot),!ot.isSymmetric())throw new Error("Matrix is not symmetric");var k=ot,C=k.rows,I=new Ae(C,C),H=!0,gt,zt,Rt;for(zt=0;zt<C;zt++){var qt=0;for(Rt=0;Rt<zt;Rt++){var Te=0;for(gt=0;gt<Rt;gt++)Te+=I.get(Rt,gt)*I.get(zt,gt);Te=(k.get(zt,Rt)-Te)/I.get(Rt,Rt),I.set(zt,Rt,Te),qt=qt+Te*Te}for(qt=k.get(zt,zt)-qt,H&=qt>0,I.set(zt,zt,Math.sqrt(Math.max(qt,0))),Rt=zt+1;Rt<C;Rt++)I.set(zt,Rt,0)}this.L=I,this.positiveDefinite=Boolean(H)}return A()(tt,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(k){k=Er.checkMatrix(k);var C=this.L,I=C.rows;if(k.rows!==I)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var H=k.columns,gt=k.clone(),zt,Rt,qt;for(qt=0;qt<I;qt++)for(Rt=0;Rt<H;Rt++){for(zt=0;zt<qt;zt++)gt.set(qt,Rt,gt.get(qt,Rt)-gt.get(zt,Rt)*C.get(qt,zt));gt.set(qt,Rt,gt.get(qt,Rt)/C.get(qt,qt))}for(qt=I-1;qt>=0;qt--)for(Rt=0;Rt<H;Rt++){for(zt=qt+1;zt<I;zt++)gt.set(qt,Rt,gt.get(qt,Rt)-gt.get(zt,Rt)*C.get(zt,qt));gt.set(qt,Rt,gt.get(qt,Rt)/C.get(qt,qt))}return gt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),tt}(),Gt=A()(function tt(ot){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x()(this,tt),ot=Er.checkMatrix(ot);var C=k.Y,I=k.scaleScores,H=I===void 0?!1:I,gt=k.maxIterations,zt=gt===void 0?1e3:gt,Rt=k.terminationCriteria,qt=Rt===void 0?1e-10:Rt,Te;if(C){if(D(C)&&typeof C[0]=="number"?C=Ae.columnVector(C):C=Er.checkMatrix(C),C.rows!==ot.rows)throw new Error("Y should have the same number of rows as X");Te=C.getColumnVector(0)}else Te=ot.getColumnVector(0);for(var he=1,Ue,cr,Ve,Tr,nn=0;nn<zt&&he>qt;nn++)Ve=ot.transpose().mmul(Te).div(Te.transpose().mmul(Te).get(0,0)),Ve=Ve.div(Ve.norm()),Ue=ot.mmul(Ve).div(Ve.transpose().mmul(Ve).get(0,0)),nn>0&&(he=Ue.clone().sub(Tr).pow(2).sum()),Tr=Ue.clone(),C?(cr=C.transpose().mmul(Ue).div(Ue.transpose().mmul(Ue).get(0,0)),cr=cr.div(cr.norm()),Te=C.mmul(cr).div(cr.transpose().mmul(cr).get(0,0))):Te=Ue;if(C){var He=ot.transpose().mmul(Ue).div(Ue.transpose().mmul(Ue).get(0,0));He=He.div(He.norm());var ur=ot.clone().sub(Ue.clone().mmul(He.transpose())),Ar=Te.transpose().mmul(Ue).div(Ue.transpose().mmul(Ue).get(0,0)),Cr=C.clone().sub(Ue.clone().mulS(Ar.get(0,0)).mmul(cr.transpose()));this.t=Ue,this.p=He.transpose(),this.w=Ve.transpose(),this.q=cr,this.u=Te,this.s=Ue.transpose().mmul(Ue),this.xResidual=ur,this.yResidual=Cr,this.betas=Ar}else this.w=Ve.transpose(),this.s=Ue.transpose().mmul(Ue).sqrt(),H?this.t=Ue.clone().div(this.s.get(0,0)):this.t=Ue,this.xResidual=ot.sub(Ue.mmul(Ve.transpose()))})},988824:function(Ne,G,_){"use strict";_.d(G,{Z:function(){return be}});var g=_(570655),R=_(785893),w=_(667294),M=_(513669),P=_(387820),L=_(82538);const p=(Nt,Ht)=>{const dt=A(Nt),Gt=A(Ht),tt=dt.pop(),ot=Gt.pop(),k=f(dt,Gt);return k!==0?k:tt&&ot?f(tt.split("."),ot.split(".")):tt||ot?tt?-1:1:0},b=Nt=>typeof Nt=="string"&&/^[v\d]/.test(Nt)&&y.test(Nt),S=(Nt,Ht,dt)=>{z(dt);const Gt=p(Nt,Ht);return W[dt].includes(Gt)},x=(Nt,Ht)=>{if(Ht.includes("||"))return Ht.split("||").some(Ue=>x(Nt,Ue));if(Ht.includes(" "))return Ht.trim().replace(/\s{2,}/g," ").split(" ").every(Ue=>x(Nt,Ue));const dt=Ht.match(/^([<>=~^]+)/),Gt=dt?dt[1]:"=";if(Gt!=="^"&&Gt!=="~")return S(Nt,Ht,Gt);const[tt,ot,k,,C]=A(Nt),[I,H,gt,,zt]=A(Ht),Rt=[tt,ot,k],qt=[I,H!=null?H:"x",gt!=null?gt:"x"];if(zt&&(!C||f(Rt,qt)!==0||f(C.split("."),zt.split("."))===-1))return!1;const Te=qt.findIndex(Ue=>Ue!=="0")+1,he=Gt==="~"?2:Te>1?Te:1;return!(f(Rt.slice(0,he),qt.slice(0,he))!==0||f(Rt.slice(he),qt.slice(he))===-1)},y=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,A=Nt=>{if(typeof Nt!="string")throw new TypeError("Invalid argument expected string");const Ht=Nt.match(y);if(!Ht)throw new Error(`Invalid argument not valid semver ('${Nt}' received)`);return Ht.shift(),Ht},E=Nt=>Nt==="*"||Nt==="x"||Nt==="X",D=Nt=>{const Ht=parseInt(Nt,10);return isNaN(Ht)?Nt:Ht},B=(Nt,Ht)=>typeof Nt!=typeof Ht?[String(Nt),String(Ht)]:[Nt,Ht],m=(Nt,Ht)=>{if(E(Nt)||E(Ht))return 0;const[dt,Gt]=B(D(Nt),D(Ht));return dt>Gt?1:dt<Gt?-1:0},f=(Nt,Ht)=>{for(let dt=0;dt<Math.max(Nt.length,Ht.length);dt++){const Gt=m(Nt[dt]||"0",Ht[dt]||"0");if(Gt!==0)return Gt}return 0},W={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},X=Object.keys(W),z=Nt=>{if(typeof Nt!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof Nt}`);if(X.indexOf(Nt)===-1)throw new Error(`Invalid operator, expected one of ${X.join("|")}`)};var U=function(Nt,Ht){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Gt){dt.__proto__=Gt}||function(dt,Gt){for(var tt in Gt)Object.prototype.hasOwnProperty.call(Gt,tt)&&(dt[tt]=Gt[tt])},U(Nt,Ht)};function j(Nt,Ht){U(Nt,Ht);function dt(){this.constructor=Nt}Nt.prototype=Ht===null?Object.create(Ht):(dt.prototype=Ht.prototype,new dt)}var V=function(){return V=Object.assign||function(Ht){for(var dt,Gt=1,tt=arguments.length;Gt<tt;Gt++){dt=arguments[Gt];for(var ot in dt)Object.prototype.hasOwnProperty.call(dt,ot)&&(Ht[ot]=dt[ot])}return Ht},V.apply(this,arguments)};function J(Nt,Ht){var dt={};for(var Gt in Nt)Object.prototype.hasOwnProperty.call(Nt,Gt)&&Ht.indexOf(Gt)<0&&(dt[Gt]=Nt[Gt]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,Gt=Object.getOwnPropertySymbols(Nt);tt<Gt.length;tt++)Ht.indexOf(Gt[tt])<0&&Object.prototype.propertyIsEnumerable.call(Nt,Gt[tt])&&(dt[Gt[tt]]=Nt[Gt[tt]]);return dt}function Q(Nt,Ht,dt,Gt){var tt=arguments.length,ot=tt<3?Ht:Gt===null?Gt=Object.getOwnPropertyDescriptor(Ht,dt):Gt,k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(Nt,Ht,dt,Gt);else for(var C=Nt.length-1;C>=0;C--)(k=Nt[C])&&(ot=(tt<3?k(ot):tt>3?k(Ht,dt,ot):k(Ht,dt))||ot);return tt>3&&ot&&Object.defineProperty(Ht,dt,ot),ot}function et(Nt,Ht){return function(dt,Gt){Ht(dt,Gt,Nt)}}function ut(Nt,Ht){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Nt,Ht)}function it(Nt,Ht,dt,Gt){function tt(ot){return ot instanceof dt?ot:new dt(function(k){k(ot)})}return new(dt||(dt=Promise))(function(ot,k){function C(gt){try{H(Gt.next(gt))}catch(zt){k(zt)}}function I(gt){try{H(Gt.throw(gt))}catch(zt){k(zt)}}function H(gt){gt.done?ot(gt.value):tt(gt.value).then(C,I)}H((Gt=Gt.apply(Nt,Ht||[])).next())})}function yt(Nt,Ht){var dt={label:0,sent:function(){if(ot[0]&1)throw ot[1];return ot[1]},trys:[],ops:[]},Gt,tt,ot,k;return k={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function C(H){return function(gt){return I([H,gt])}}function I(H){if(Gt)throw new TypeError("Generator is already executing.");for(;dt;)try{if(Gt=1,tt&&(ot=H[0]&2?tt.return:H[0]?tt.throw||((ot=tt.return)&&ot.call(tt),0):tt.next)&&!(ot=ot.call(tt,H[1])).done)return ot;switch(tt=0,ot&&(H=[H[0]&2,ot.value]),H[0]){case 0:case 1:ot=H;break;case 4:return dt.label++,{value:H[1],done:!1};case 5:dt.label++,tt=H[1],H=[0];continue;case 7:H=dt.ops.pop(),dt.trys.pop();continue;default:if(ot=dt.trys,!(ot=ot.length>0&&ot[ot.length-1])&&(H[0]===6||H[0]===2)){dt=0;continue}if(H[0]===3&&(!ot||H[1]>ot[0]&&H[1]<ot[3])){dt.label=H[1];break}if(H[0]===6&&dt.label<ot[1]){dt.label=ot[1],ot=H;break}if(ot&&dt.label<ot[2]){dt.label=ot[2],dt.ops.push(H);break}ot[2]&&dt.ops.pop(),dt.trys.pop();continue}H=Ht.call(Nt,dt)}catch(gt){H=[6,gt],tt=0}finally{Gt=ot=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}}var ft=Object.create?function(Nt,Ht,dt,Gt){Gt===void 0&&(Gt=dt),Object.defineProperty(Nt,Gt,{enumerable:!0,get:function(){return Ht[dt]}})}:function(Nt,Ht,dt,Gt){Gt===void 0&&(Gt=dt),Nt[Gt]=Ht[dt]};function Bt(Nt,Ht){for(var dt in Nt)dt!=="default"&&!Object.prototype.hasOwnProperty.call(Ht,dt)&&ft(Ht,Nt,dt)}function St(Nt){var Ht=typeof Symbol=="function"&&Symbol.iterator,dt=Ht&&Nt[Ht],Gt=0;if(dt)return dt.call(Nt);if(Nt&&typeof Nt.length=="number")return{next:function(){return Nt&&Gt>=Nt.length&&(Nt=void 0),{value:Nt&&Nt[Gt++],done:!Nt}}};throw new TypeError(Ht?"Object is not iterable.":"Symbol.iterator is not defined.")}function Et(Nt,Ht){var dt=typeof Symbol=="function"&&Nt[Symbol.iterator];if(!dt)return Nt;var Gt=dt.call(Nt),tt,ot=[],k;try{for(;(Ht===void 0||Ht-- >0)&&!(tt=Gt.next()).done;)ot.push(tt.value)}catch(C){k={error:C}}finally{try{tt&&!tt.done&&(dt=Gt.return)&&dt.call(Gt)}finally{if(k)throw k.error}}return ot}function Z(){for(var Nt=[],Ht=0;Ht<arguments.length;Ht++)Nt=Nt.concat(Et(arguments[Ht]));return Nt}function q(){for(var Nt=0,Ht=0,dt=arguments.length;Ht<dt;Ht++)Nt+=arguments[Ht].length;for(var Gt=Array(Nt),tt=0,Ht=0;Ht<dt;Ht++)for(var ot=arguments[Ht],k=0,C=ot.length;k<C;k++,tt++)Gt[tt]=ot[k];return Gt}function bt(Nt){return this instanceof bt?(this.v=Nt,this):new bt(Nt)}function Ct(Nt,Ht,dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Gt=dt.apply(Nt,Ht||[]),tt,ot=[];return tt={},k("next"),k("throw"),k("return"),tt[Symbol.asyncIterator]=function(){return this},tt;function k(Rt){Gt[Rt]&&(tt[Rt]=function(qt){return new Promise(function(Te,he){ot.push([Rt,qt,Te,he])>1||C(Rt,qt)})})}function C(Rt,qt){try{I(Gt[Rt](qt))}catch(Te){zt(ot[0][3],Te)}}function I(Rt){Rt.value instanceof bt?Promise.resolve(Rt.value.v).then(H,gt):zt(ot[0][2],Rt)}function H(Rt){C("next",Rt)}function gt(Rt){C("throw",Rt)}function zt(Rt,qt){Rt(qt),ot.shift(),ot.length&&C(ot[0][0],ot[0][1])}}function nt(Nt){var Ht,dt;return Ht={},Gt("next"),Gt("throw",function(tt){throw tt}),Gt("return"),Ht[Symbol.iterator]=function(){return this},Ht;function Gt(tt,ot){Ht[tt]=Nt[tt]?function(k){return(dt=!dt)?{value:bt(Nt[tt](k)),done:tt==="return"}:ot?ot(k):k}:ot}}function ht(Nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ht=Nt[Symbol.asyncIterator],dt;return Ht?Ht.call(Nt):(Nt=typeof St=="function"?St(Nt):Nt[Symbol.iterator](),dt={},Gt("next"),Gt("throw"),Gt("return"),dt[Symbol.asyncIterator]=function(){return this},dt);function Gt(ot){dt[ot]=Nt[ot]&&function(k){return new Promise(function(C,I){k=Nt[ot](k),tt(C,I,k.done,k.value)})}}function tt(ot,k,C,I){Promise.resolve(I).then(function(H){ot({value:H,done:C})},k)}}function At(Nt,Ht){return Object.defineProperty?Object.defineProperty(Nt,"raw",{value:Ht}):Nt.raw=Ht,Nt}var Ot=Object.create?function(Nt,Ht){Object.defineProperty(Nt,"default",{enumerable:!0,value:Ht})}:function(Nt,Ht){Nt.default=Ht};function xt(Nt){if(Nt&&Nt.__esModule)return Nt;var Ht={};if(Nt!=null)for(var dt in Nt)dt!=="default"&&Object.prototype.hasOwnProperty.call(Nt,dt)&&ft(Ht,Nt,dt);return Ot(Ht,Nt),Ht}function Dt(Nt){return Nt&&Nt.__esModule?Nt:{default:Nt}}function Yt(Nt,Ht){if(!Ht.has(Nt))throw new TypeError("attempted to get private field on non-instance");return Ht.get(Nt)}function ie(Nt,Ht,dt){if(!Ht.has(Nt))throw new TypeError("attempted to set private field on non-instance");return Ht.set(Nt,dt),dt}var re=_(252796),Pt=_.n(re);function ee(Nt,Ht,dt,Gt,tt,ot){ot===void 0&&(ot=0);var k=on(Nt,Ht,ot),C=k.width,I=k.height,H=Math.min(C,dt),gt=Math.min(I,Gt);return H>gt*tt?{width:gt*tt,height:gt}:{width:H,height:H/tt}}function ce(Nt){return Nt.width>Nt.height?Nt.width/Nt.naturalWidth:Nt.height/Nt.naturalHeight}function Ut(Nt,Ht,dt,Gt,tt){tt===void 0&&(tt=0);var ot=on(Ht.width,Ht.height,tt),k=ot.width,C=ot.height;return{x:te(Nt.x,k,dt.width,Gt),y:te(Nt.y,C,dt.height,Gt)}}function te(Nt,Ht,dt,Gt){var tt=Ht*Gt/2-dt/2;return Hr(Nt,-tt,tt)}function ye(Nt,Ht){return Math.sqrt(Math.pow(Nt.y-Ht.y,2)+Math.pow(Nt.x-Ht.x,2))}function ge(Nt,Ht){return Math.atan2(Ht.y-Nt.y,Ht.x-Nt.x)*180/Math.PI}function Kt(Nt,Ht,dt,Gt,tt,ot,k){ot===void 0&&(ot=0),k===void 0&&(k=!0);var C=k?xe:Tt,I=on(Ht.width,Ht.height,ot),H=on(Ht.naturalWidth,Ht.naturalHeight,ot),gt={x:C(100,((I.width-dt.width/tt)/2-Nt.x/tt)/I.width*100),y:C(100,((I.height-dt.height/tt)/2-Nt.y/tt)/I.height*100),width:C(100,dt.width/I.width*100/tt),height:C(100,dt.height/I.height*100/tt)},zt=Math.round(C(H.width,gt.width*H.width/100)),Rt=Math.round(C(H.height,gt.height*H.height/100)),qt=H.width>=H.height*Gt,Te=qt?{width:Math.round(Rt*Gt),height:Rt}:{width:zt,height:Math.round(zt/Gt)},he=V(V({},Te),{x:Math.round(C(H.width-Te.width,gt.x*H.width/100)),y:Math.round(C(H.height-Te.height,gt.y*H.height/100))});return{croppedAreaPercentages:gt,croppedAreaPixels:he}}function xe(Nt,Ht){return Math.min(Nt,Math.max(0,Ht))}function Tt(Nt,Ht){return Ht}function Ae(Nt,Ht,dt,Gt,tt,ot){var k=on(Ht.width,Ht.height,dt),C=Hr(Gt.width/k.width*(100/Nt.width),tt,ot),I={x:C*k.width/2-Gt.width/2-k.width*C*(Nt.x/100),y:C*k.height/2-Gt.height/2-k.height*C*(Nt.y/100)};return{crop:I,zoom:C}}function br(Nt,Ht,dt){var Gt=ce(Ht);return dt.height>dt.width?dt.height/(Nt.height*Gt):dt.width/(Nt.width*Gt)}function Sr(Nt,Ht,dt,Gt,tt,ot){dt===void 0&&(dt=0);var k=on(Ht.naturalWidth,Ht.naturalHeight,dt),C=Hr(br(Nt,Ht,Gt),tt,ot),I=Gt.height>Gt.width?Gt.height/Nt.height:Gt.width/Nt.width,H={x:((k.width-Nt.width)/2-Nt.x)*I,y:((k.height-Nt.height)/2-Nt.y)*I};return{crop:H,zoom:C}}function Mr(Nt,Ht){return{x:(Ht.x+Nt.x)/2,y:(Ht.y+Nt.y)/2}}function Pr(Nt){return Nt*Math.PI/180}function on(Nt,Ht,dt){var Gt=Pr(dt);return{width:Math.abs(Math.cos(Gt)*Nt)+Math.abs(Math.sin(Gt)*Ht),height:Math.abs(Math.sin(Gt)*Nt)+Math.abs(Math.cos(Gt)*Ht)}}function Hr(Nt,Ht,dt){return Math.min(Math.max(Nt,Ht),dt)}function Sn(){for(var Nt=[],Ht=0;Ht<arguments.length;Ht++)Nt[Ht]=arguments[Ht];return Nt.filter(function(dt){return typeof dt=="string"&&dt.length>0}).join(" ").trim()}var In=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Nn=1,vr=3,Ze=function(Nt){j(Ht,Nt);function Ht(){var dt=Nt!==null&&Nt.apply(this,arguments)||this;return dt.imageRef=w.createRef(),dt.videoRef=w.createRef(),dt.containerRef=null,dt.styleRef=null,dt.containerRect=null,dt.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},dt.dragStartPosition={x:0,y:0},dt.dragStartCrop={x:0,y:0},dt.gestureZoomStart=0,dt.gestureRotationStart=0,dt.isTouching=!1,dt.lastPinchDistance=0,dt.lastPinchRotation=0,dt.rafDragTimeout=null,dt.rafPinchTimeout=null,dt.wheelTimer=null,dt.currentDoc=typeof document!="undefined"?document:null,dt.currentWindow=typeof window!="undefined"?window:null,dt.resizeObserver=null,dt.state={cropSize:null,hasWheelJustStarted:!1},dt.initResizeObserver=function(){if(!(typeof window.ResizeObserver=="undefined"||!dt.containerRef)){var Gt=!0;dt.resizeObserver=new window.ResizeObserver(function(tt){if(Gt){Gt=!1;return}dt.computeSizes()}),dt.resizeObserver.observe(dt.containerRef)}},dt.preventZoomSafari=function(Gt){return Gt.preventDefault()},dt.cleanEvents=function(){dt.currentDoc&&(dt.currentDoc.removeEventListener("mousemove",dt.onMouseMove),dt.currentDoc.removeEventListener("mouseup",dt.onDragStopped),dt.currentDoc.removeEventListener("touchmove",dt.onTouchMove),dt.currentDoc.removeEventListener("touchend",dt.onDragStopped),dt.currentDoc.removeEventListener("gesturemove",dt.onGestureMove),dt.currentDoc.removeEventListener("gestureend",dt.onGestureEnd))},dt.clearScrollEvent=function(){dt.containerRef&&dt.containerRef.removeEventListener("wheel",dt.onWheel),dt.wheelTimer&&clearTimeout(dt.wheelTimer)},dt.onMediaLoad=function(){var Gt=dt.computeSizes();Gt&&(dt.emitCropData(),dt.setInitialCrop(Gt)),dt.props.onMediaLoaded&&dt.props.onMediaLoaded(dt.mediaSize)},dt.setInitialCrop=function(Gt){if(dt.props.initialCroppedAreaPercentages){var tt=Ae(dt.props.initialCroppedAreaPercentages,dt.mediaSize,dt.props.rotation,Gt,dt.props.minZoom,dt.props.maxZoom),ot=tt.crop,k=tt.zoom;dt.props.onCropChange(ot),dt.props.onZoomChange&&dt.props.onZoomChange(k)}else if(dt.props.initialCroppedAreaPixels){var C=Sr(dt.props.initialCroppedAreaPixels,dt.mediaSize,dt.props.rotation,Gt,dt.props.minZoom,dt.props.maxZoom),ot=C.crop,k=C.zoom;dt.props.onCropChange(ot),dt.props.onZoomChange&&dt.props.onZoomChange(k)}},dt.computeSizes=function(){var Gt,tt,ot,k,C,I,H=dt.imageRef.current||dt.videoRef.current;if(H&&dt.containerRef){dt.containerRect=dt.containerRef.getBoundingClientRect();var gt=dt.containerRect.width/dt.containerRect.height,zt=((Gt=dt.imageRef.current)===null||Gt===void 0?void 0:Gt.naturalWidth)||((tt=dt.videoRef.current)===null||tt===void 0?void 0:tt.videoWidth)||0,Rt=((ot=dt.imageRef.current)===null||ot===void 0?void 0:ot.naturalHeight)||((k=dt.videoRef.current)===null||k===void 0?void 0:k.videoHeight)||0,qt=H.offsetWidth<zt||H.offsetHeight<Rt,Te=zt/Rt,he=void 0;if(qt)switch(dt.props.objectFit){default:case"contain":he=gt>Te?{width:dt.containerRect.height*Te,height:dt.containerRect.height}:{width:dt.containerRect.width,height:dt.containerRect.width/Te};break;case"horizontal-cover":he={width:dt.containerRect.width,height:dt.containerRect.width/Te};break;case"vertical-cover":he={width:dt.containerRect.height*Te,height:dt.containerRect.height};break;case"auto-cover":he=zt>Rt?{width:dt.containerRect.width,height:dt.containerRect.width/Te}:{width:dt.containerRect.height*Te,height:dt.containerRect.height};break}else he={width:H.offsetWidth,height:H.offsetHeight};dt.mediaSize=V(V({},he),{naturalWidth:zt,naturalHeight:Rt}),dt.props.setMediaSize&&dt.props.setMediaSize(dt.mediaSize);var Ue=dt.props.cropSize?dt.props.cropSize:ee(dt.mediaSize.width,dt.mediaSize.height,dt.containerRect.width,dt.containerRect.height,dt.props.aspect,dt.props.rotation);return(((C=dt.state.cropSize)===null||C===void 0?void 0:C.height)!==Ue.height||((I=dt.state.cropSize)===null||I===void 0?void 0:I.width)!==Ue.width)&&dt.props.onCropSizeChange&&dt.props.onCropSizeChange(Ue),dt.setState({cropSize:Ue},dt.recomputeCropPosition),dt.props.setCropSize&&dt.props.setCropSize(Ue),Ue}},dt.onMouseDown=function(Gt){dt.currentDoc&&(Gt.preventDefault(),dt.currentDoc.addEventListener("mousemove",dt.onMouseMove),dt.currentDoc.addEventListener("mouseup",dt.onDragStopped),dt.onDragStart(Ht.getMousePoint(Gt)))},dt.onMouseMove=function(Gt){return dt.onDrag(Ht.getMousePoint(Gt))},dt.onTouchStart=function(Gt){dt.currentDoc&&(dt.isTouching=!0,!(dt.props.onTouchRequest&&!dt.props.onTouchRequest(Gt))&&(dt.currentDoc.addEventListener("touchmove",dt.onTouchMove,{passive:!1}),dt.currentDoc.addEventListener("touchend",dt.onDragStopped),Gt.touches.length===2?dt.onPinchStart(Gt):Gt.touches.length===1&&dt.onDragStart(Ht.getTouchPoint(Gt.touches[0]))))},dt.onTouchMove=function(Gt){Gt.preventDefault(),Gt.touches.length===2?dt.onPinchMove(Gt):Gt.touches.length===1&&dt.onDrag(Ht.getTouchPoint(Gt.touches[0]))},dt.onGestureStart=function(Gt){dt.currentDoc&&(Gt.preventDefault(),dt.currentDoc.addEventListener("gesturechange",dt.onGestureMove),dt.currentDoc.addEventListener("gestureend",dt.onGestureEnd),dt.gestureZoomStart=dt.props.zoom,dt.gestureRotationStart=dt.props.rotation)},dt.onGestureMove=function(Gt){if(Gt.preventDefault(),!dt.isTouching){var tt=Ht.getMousePoint(Gt),ot=dt.gestureZoomStart-1+Gt.scale;if(dt.setNewZoom(ot,tt,{shouldUpdatePosition:!0}),dt.props.onRotationChange){var k=dt.gestureRotationStart+Gt.rotation;dt.props.onRotationChange(k)}}},dt.onGestureEnd=function(Gt){dt.cleanEvents()},dt.onDragStart=function(Gt){var tt,ot,k=Gt.x,C=Gt.y;dt.dragStartPosition={x:k,y:C},dt.dragStartCrop=V({},dt.props.crop),(ot=(tt=dt.props).onInteractionStart)===null||ot===void 0||ot.call(tt)},dt.onDrag=function(Gt){var tt=Gt.x,ot=Gt.y;dt.currentWindow&&(dt.rafDragTimeout&&dt.currentWindow.cancelAnimationFrame(dt.rafDragTimeout),dt.rafDragTimeout=dt.currentWindow.requestAnimationFrame(function(){if(dt.state.cropSize&&!(tt===void 0||ot===void 0)){var k=tt-dt.dragStartPosition.x,C=ot-dt.dragStartPosition.y,I={x:dt.dragStartCrop.x+k,y:dt.dragStartCrop.y+C},H=dt.props.restrictPosition?Ut(I,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):I;dt.props.onCropChange(H)}}))},dt.onDragStopped=function(){var Gt,tt;dt.isTouching=!1,dt.cleanEvents(),dt.emitCropData(),(tt=(Gt=dt.props).onInteractionEnd)===null||tt===void 0||tt.call(Gt)},dt.onWheel=function(Gt){if(dt.currentWindow&&!(dt.props.onWheelRequest&&!dt.props.onWheelRequest(Gt))){Gt.preventDefault();var tt=Ht.getMousePoint(Gt),ot=Pt()(Gt).pixelY,k=dt.props.zoom-ot*dt.props.zoomSpeed/200;dt.setNewZoom(k,tt,{shouldUpdatePosition:!0}),dt.state.hasWheelJustStarted||dt.setState({hasWheelJustStarted:!0},function(){var C,I;return(I=(C=dt.props).onInteractionStart)===null||I===void 0?void 0:I.call(C)}),dt.wheelTimer&&clearTimeout(dt.wheelTimer),dt.wheelTimer=dt.currentWindow.setTimeout(function(){return dt.setState({hasWheelJustStarted:!1},function(){var C,I;return(I=(C=dt.props).onInteractionEnd)===null||I===void 0?void 0:I.call(C)})},250)}},dt.getPointOnContainer=function(Gt){var tt=Gt.x,ot=Gt.y;if(!dt.containerRect)throw new Error("The Cropper is not mounted");return{x:dt.containerRect.width/2-(tt-dt.containerRect.left),y:dt.containerRect.height/2-(ot-dt.containerRect.top)}},dt.getPointOnMedia=function(Gt){var tt=Gt.x,ot=Gt.y,k=dt.props,C=k.crop,I=k.zoom;return{x:(tt+C.x)/I,y:(ot+C.y)/I}},dt.setNewZoom=function(Gt,tt,ot){var k=ot===void 0?{}:ot,C=k.shouldUpdatePosition,I=C===void 0?!0:C;if(!(!dt.state.cropSize||!dt.props.onZoomChange)){var H=Hr(Gt,dt.props.minZoom,dt.props.maxZoom);if(I){var gt=dt.getPointOnContainer(tt),zt=dt.getPointOnMedia(gt),Rt={x:zt.x*H-gt.x,y:zt.y*H-gt.y},qt=dt.props.restrictPosition?Ut(Rt,dt.mediaSize,dt.state.cropSize,H,dt.props.rotation):Rt;dt.props.onCropChange(qt)}dt.props.onZoomChange(H)}},dt.getCropData=function(){if(!dt.state.cropSize)return null;var Gt=dt.props.restrictPosition?Ut(dt.props.crop,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):dt.props.crop;return Kt(Gt,dt.mediaSize,dt.state.cropSize,dt.getAspect(),dt.props.zoom,dt.props.rotation,dt.props.restrictPosition)},dt.emitCropData=function(){var Gt=dt.getCropData();if(Gt){var tt=Gt.croppedAreaPercentages,ot=Gt.croppedAreaPixels;dt.props.onCropComplete&&dt.props.onCropComplete(tt,ot),dt.props.onCropAreaChange&&dt.props.onCropAreaChange(tt,ot)}},dt.emitCropAreaChange=function(){var Gt=dt.getCropData();if(Gt){var tt=Gt.croppedAreaPercentages,ot=Gt.croppedAreaPixels;dt.props.onCropAreaChange&&dt.props.onCropAreaChange(tt,ot)}},dt.recomputeCropPosition=function(){if(dt.state.cropSize){var Gt=dt.props.restrictPosition?Ut(dt.props.crop,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):dt.props.crop;dt.props.onCropChange(Gt),dt.emitCropData()}},dt}return Ht.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver=="undefined"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=In,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},Ht.prototype.componentWillUnmount=function(){var dt,Gt;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver=="undefined"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(dt=this.resizeObserver)===null||dt===void 0||dt.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((Gt=this.styleRef.parentNode)===null||Gt===void 0||Gt.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},Ht.prototype.componentDidUpdate=function(dt){var Gt,tt,ot,k,C,I,H,gt,zt;dt.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):dt.aspect!==this.props.aspect?this.computeSizes():dt.zoom!==this.props.zoom?this.recomputeCropPosition():((Gt=dt.cropSize)===null||Gt===void 0?void 0:Gt.height)!==((tt=this.props.cropSize)===null||tt===void 0?void 0:tt.height)||((ot=dt.cropSize)===null||ot===void 0?void 0:ot.width)!==((k=this.props.cropSize)===null||k===void 0?void 0:k.width)?this.computeSizes():(((C=dt.crop)===null||C===void 0?void 0:C.x)!==((I=this.props.crop)===null||I===void 0?void 0:I.x)||((H=dt.crop)===null||H===void 0?void 0:H.y)!==((gt=this.props.crop)===null||gt===void 0?void 0:gt.y))&&this.emitCropAreaChange(),dt.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),dt.video!==this.props.video&&((zt=this.videoRef.current)===null||zt===void 0||zt.load())},Ht.prototype.getAspect=function(){var dt=this.props,Gt=dt.cropSize,tt=dt.aspect;return Gt?Gt.width/Gt.height:tt},Ht.prototype.onPinchStart=function(dt){var Gt=Ht.getTouchPoint(dt.touches[0]),tt=Ht.getTouchPoint(dt.touches[1]);this.lastPinchDistance=ye(Gt,tt),this.lastPinchRotation=ge(Gt,tt),this.onDragStart(Mr(Gt,tt))},Ht.prototype.onPinchMove=function(dt){var Gt=this;if(!(!this.currentDoc||!this.currentWindow)){var tt=Ht.getTouchPoint(dt.touches[0]),ot=Ht.getTouchPoint(dt.touches[1]),k=Mr(tt,ot);this.onDrag(k),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var C=ye(tt,ot),I=Gt.props.zoom*(C/Gt.lastPinchDistance);Gt.setNewZoom(I,k,{shouldUpdatePosition:!1}),Gt.lastPinchDistance=C;var H=ge(tt,ot),gt=Gt.props.rotation+(H-Gt.lastPinchRotation);Gt.props.onRotationChange&&Gt.props.onRotationChange(gt),Gt.lastPinchRotation=H})}},Ht.prototype.render=function(){var dt=this,Gt=this.props,tt=Gt.image,ot=Gt.video,k=Gt.mediaProps,C=Gt.transform,I=Gt.crop,H=I.x,gt=I.y,zt=Gt.rotation,Rt=Gt.zoom,qt=Gt.cropShape,Te=Gt.showGrid,he=Gt.style,Ue=he.containerStyle,cr=he.cropAreaStyle,Ve=he.mediaStyle,Tr=Gt.classes,nn=Tr.containerClassName,He=Tr.cropAreaClassName,ur=Tr.mediaClassName,Ar=Gt.objectFit;return w.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(se){return dt.containerRef=se},"data-testid":"container",style:Ue,className:Sn("reactEasyCrop_Container",nn)},tt?w.createElement("img",V({alt:"",className:Sn("reactEasyCrop_Image",Ar==="contain"&&"reactEasyCrop_Contain",Ar==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ar==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Ar==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),ur)},k,{src:tt,ref:this.imageRef,style:V(V({},Ve),{transform:C||"translate(".concat(H,"px, ").concat(gt,"px) rotate(").concat(zt,"deg) scale(").concat(Rt,")")}),onLoad:this.onMediaLoad})):ot&&w.createElement("video",V({autoPlay:!0,loop:!0,muted:!0,className:Sn("reactEasyCrop_Video",Ar==="contain"&&"reactEasyCrop_Contain",Ar==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ar==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Ar==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),ur)},k,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:V(V({},Ve),{transform:C||"translate(".concat(H,"px, ").concat(gt,"px) rotate(").concat(zt,"deg) scale(").concat(Rt,")")}),controls:!1}),(Array.isArray(ot)?ot:[{src:ot}]).map(function(Cr){return w.createElement("source",V({key:Cr.src},Cr))})),this.state.cropSize&&w.createElement("div",{style:V(V({},cr),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:Sn("reactEasyCrop_CropArea",qt==="round"&&"reactEasyCrop_CropAreaRound",Te&&"reactEasyCrop_CropAreaGrid",He)}))},Ht.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:vr,minZoom:Nn,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},Ht.getMousePoint=function(dt){return{x:Number(dt.clientX),y:Number(dt.clientY)}},Ht.getTouchPoint=function(dt){return{x:Number(dt.clientX),y:Number(dt.clientY)}},Ht}(w.Component),Er=_(905303),ke=_(591607);const Xe="img-crop",jr=1,rn=.1,ir=0,Lr=-180,dn=180,Zr=1,wn=.5,ln=2,bn=.01,Pn=(0,w.forwardRef)((Nt,Ht)=>{const{cropperRef:dt,zoomSlider:Gt,rotationSlider:tt,aspectSlider:ot,showReset:k,resetBtnText:C,modalImage:I,aspect:H,minZoom:gt,maxZoom:zt,cropShape:Rt,showGrid:qt,cropperProps:Te}=Nt,[he,Ue]=(0,w.useState)(jr),[cr,Ve]=(0,w.useState)(ir),[Tr,nn]=(0,w.useState)(H),He=he!==jr||cr!==ir||Tr!==H,ur=()=>{Ue(jr),Ve(ir),nn(H)},[Ar,Cr]=(0,w.useState)({x:0,y:0}),se=(0,w.useRef)({width:0,height:0,x:0,y:0}),Xt=(0,w.useCallback)((Re,nr)=>{se.current=nr},[]);(0,w.useImperativeHandle)(Ht,()=>({rotation:cr,cropPixelsRef:se,onReset:ur}));const fe="[display:flex] [align-items:center] [width:60%] [margin-inline:auto]",Me="[display:flex] [align-items:center] [justify-content:center] [height:32px] [width:32px] [background:transparent] [border:0] [font-family:inherit] [font-size:18px] [cursor:pointer] disabled:[opacity:20%] disabled:[cursor:default]",pe="[flex:1]";return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Ze,Object.assign({},Te,{ref:dt,image:I,crop:Ar,zoom:he,rotation:cr,aspect:Tr,minZoom:gt,maxZoom:zt,zoomWithScroll:Gt,cropShape:Rt,showGrid:qt,onCropChange:Cr,onZoomChange:Ue,onRotationChange:Ve,onCropComplete:Xt,classes:{containerClassName:`${Xe}-container ![position:relative] [width:100%] [height:40vh] [&~section:first-of-type]:[margin-top:16px] [&~section:last-of-type]:[margin-bottom:16px]`,mediaClassName:`${Xe}-media`}})),Gt&&(0,R.jsxs)("section",Object.assign({className:`${Xe}-control ${Xe}-control-zoom ${fe}`},{children:[(0,R.jsx)("button",Object.assign({className:Me,onClick:()=>Ue(he-rn),disabled:he-rn<gt},{children:"\uFF0D"})),(0,R.jsx)(ke.Z,{className:pe,min:gt,max:zt,step:rn,value:he,onChange:Ue}),(0,R.jsx)("button",Object.assign({className:Me,onClick:()=>Ue(he+rn),disabled:he+rn>zt},{children:"\uFF0B"}))]})),tt&&(0,R.jsxs)("section",Object.assign({className:`${Xe}-control ${Xe}-control-rotation ${fe}`},{children:[(0,R.jsx)("button",Object.assign({className:`${Me} [font-size:16px]`,onClick:()=>Ve(cr-Zr),disabled:cr===Lr},{children:"\u21BA"})),(0,R.jsx)(ke.Z,{className:pe,min:Lr,max:dn,step:Zr,value:cr,onChange:Ve}),(0,R.jsx)("button",Object.assign({className:`${Me} [font-size:16px]`,onClick:()=>Ve(cr+Zr),disabled:cr===dn},{children:"\u21BB"}))]})),ot&&(0,R.jsxs)("section",Object.assign({className:`${Xe}-control ${Xe}-control-aspect ${fe}`},{children:[(0,R.jsx)("button",Object.assign({className:Me,onClick:()=>nn(Tr-bn),disabled:Tr-bn<wn},{children:"\u2195\uFE0F"})),(0,R.jsx)(ke.Z,{className:pe,min:wn,max:ln,step:bn,value:Tr,onChange:nn}),(0,R.jsx)("button",Object.assign({className:Me,onClick:()=>nn(Tr+bn),disabled:Tr+bn>ln},{children:"\u2194\uFE0F"}))]})),k&&(Gt||tt||ot)&&(0,R.jsx)(Er.ZP,Object.assign({className:"[bottom:20px] [position:absolute]",style:He?{}:{opacity:.3,pointerEvents:"none"},onClick:ur},{children:C}))]})});var at=(0,w.memo)(Pn);function je(Nt,Ht){Ht===void 0&&(Ht={});var dt=Ht.insertAt;if(!(!Nt||typeof document=="undefined")){var Gt=document.head||document.getElementsByTagName("head")[0],tt=document.createElement("style");tt.type="text/css",dt==="top"&&Gt.firstChild?Gt.insertBefore(tt,Gt.firstChild):Gt.appendChild(tt),tt.styleSheet?tt.styleSheet.cssText=Nt:tt.appendChild(document.createTextNode(Nt))}}var Zt=".container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.visible{visibility:visible}.grid{display:grid}.\\!\\[position\\:relative\\]{position:relative!important}.\\[align-items\\:center\\]{align-items:center}.\\[background\\:transparent\\]{background:transparent}.\\[border\\:0\\]{border:0}.\\[bottom\\:20px\\]{bottom:20px}.\\[cursor\\:pointer\\]{cursor:pointer}.\\[display\\:flex\\]{display:flex}.\\[flex\\:1\\]{flex:1}.\\[font-family\\:inherit\\]{font-family:inherit}.\\[font-size\\:16px\\]{font-size:16px}.\\[font-size\\:18px\\]{font-size:18px}.\\[height\\:32px\\]{height:32px}.\\[height\\:40vh\\]{height:40vh}.\\[justify-content\\:center\\]{justify-content:center}.\\[margin-inline\\:auto\\]{margin-inline:auto}.\\[position\\:absolute\\]{position:absolute}.\\[width\\:100\\%\\]{width:100%}.\\[width\\:32px\\]{width:32px}.\\[width\\:60\\%\\]{width:60%}.disabled\\:\\[cursor\\:default\\]:disabled{cursor:default}.disabled\\:\\[opacity\\:20\\%\\]:disabled{opacity:20%}.\\[\\&\\~section\\:first-of-type\\]\\:\\[margin-top\\:16px\\]~section:first-of-type{margin-top:16px}.\\[\\&\\~section\\:last-of-type\\]\\:\\[margin-bottom\\:16px\\]~section:last-of-type{margin-bottom:16px}";je(Zt);const $t=p(M.version,"4.23.0")===-1?"visible":"open",Mt=(Nt,Ht,dt)=>Ht in Nt?(console.error(`\`${Ht}\` is deprecated, please use \`${dt}\` instead`),Nt[Ht]):Nt[dt],be=(0,w.forwardRef)((Nt,Ht)=>{const{quality:dt=.4,fillColor:Gt="white",zoomSlider:tt=!0,rotationSlider:ot=!1,aspectSlider:k=!1,showReset:C=!1,resetText:I,aspect:H=1,minZoom:gt=1,maxZoom:zt=3,cropShape:Rt="rect",showGrid:qt=!1,cropperProps:Te,modalClassName:he,modalTitle:Ue,modalWidth:cr,modalOk:Ve,modalCancel:Tr,onModalOk:nn,onModalCancel:He,modalProps:ur,beforeCrop:Ar,children:Cr}=Nt,se=Mt(Nt,"zoom","zoomSlider")||!0,Xt=Mt(Nt,"rotate","rotationSlider")||!1,fe=Mt(Nt,"shape","cropShape")||"rect",Me=Mt(Nt,"grid","showGrid")||!1;"onUploadFail"in Nt&&console.error("`onUploadFail` is removed, because the only way it is called, is when the file is rejected by beforeUpload"),Mt(Nt,"modalMaskTransitionName","modalProps.maskTransitionName"),Mt(Nt,"modalTransitionName","modalProps.transitionName");const pe=(0,w.useRef)({});pe.current.onModalOk=nn,pe.current.onModalCancel=He,pe.current.beforeCrop=Ar;const Re=(0,w.useRef)(null),nr=(0,w.useCallback)(Na=>{var Ra;const ri=document.createElement("canvas"),Ci=ri.getContext("2d"),Ri=(((Ra=Na==null?void 0:Na.getRootNode)===null||Ra===void 0?void 0:Ra.call(Na))||document).querySelector(`.${Xe}-media`),{width:pa,height:ki,x:eo,y:za}=Re.current.cropPixelsRef.current;if(Xt&&Re.current.rotation!==ir){const{naturalWidth:Ei,naturalHeight:Bi}=Ri,go=Re.current.rotation*(Math.PI/180),Pi=Math.abs(Math.sin(go)),Wi=Math.abs(Math.cos(go)),ro=Ei*Wi+Bi*Pi,mo=Bi*Wi+Ei*Pi;ri.width=ro,ri.height=mo,Ci.fillStyle=Gt,Ci.fillRect(0,0,ro,mo);const oi=ro/2,Ti=mo/2;Ci.translate(oi,Ti),Ci.rotate(go),Ci.translate(-oi,-Ti);const Hn=(ro-Ei)/2,Jt=(mo-Bi)/2;Ci.drawImage(Ri,0,0,Ei,Bi,Hn,Jt,Ei,Bi);const ue=Ci.getImageData(0,0,ro,mo);ri.width=pa,ri.height=ki,Ci.putImageData(ue,-eo,-za)}else ri.width=pa,ri.height=ki,Ci.fillStyle=Gt,Ci.fillRect(0,0,pa,ki),Ci.drawImage(Ri,eo,za,pa,ki,0,0,pa,ki);return ri},[Gt,Xt]),[fr,tn]=(0,w.useState)(""),Ln=(0,w.useRef)(),sn=(0,w.useRef)(),Xn=(0,w.useMemo)(()=>{const Na=Array.isArray(Cr)?Cr[0]:Cr,Ra=Na.props,{beforeUpload:ri,accept:Ci}=Ra,Ni=(0,g.__rest)(Ra,["beforeUpload","accept"]),Ri=(pa,ki)=>new Promise(eo=>(0,g.__awaiter)(void 0,void 0,void 0,function*(){if(typeof pe.current.beforeCrop=="function")try{const Ei=yield pe.current.beforeCrop(pa,ki);if(Ei!==!0)return eo(Ei)}catch(Ei){return eo(Ei)}const za=new FileReader;za.addEventListener("load",()=>{typeof za.result=="string"&&tn(za.result)}),za.readAsDataURL(pa),Ln.current=()=>{var Ei,Bi;tn(""),Re.current.onReset(),eo(L.Z.LIST_IGNORE),(Bi=(Ei=pe.current).onModalCancel)===null||Bi===void 0||Bi.call(Ei)},sn.current=Ei=>(0,g.__awaiter)(void 0,void 0,void 0,function*(){tn(""),Re.current.onReset();const Bi=nr(Ei.target),{type:go,name:Pi,uid:Wi}=pa;Bi.toBlob(ro=>(0,g.__awaiter)(void 0,void 0,void 0,function*(){var mo,oi,Ti,Hn,Jt,ue;const Pe=new File([ro],Pi,{type:go});if(Object.assign(Pe,{uid:Wi}),typeof ri!="function"){eo(Pe),(oi=(mo=pe.current).onModalOk)===null||oi===void 0||oi.call(mo,Pe);return}try{const rr=yield ri(Pe,[Pe]),Or=rr===!0?Pe:rr;eo(Or),(Hn=(Ti=pe.current).onModalOk)===null||Hn===void 0||Hn.call(Ti,Or)}catch(rr){eo(rr),(ue=(Jt=pe.current).onModalOk)===null||ue===void 0||ue.call(Jt,rr)}}),go,dt)})}));return Object.assign(Object.assign({},Na),{props:Object.assign(Object.assign({},Ni),{accept:Ci||"image/*",beforeUpload:Ri})})},[Cr,nr,dt]),an=(0,w.useMemo)(()=>{const Na={};return cr!==void 0&&(Na.width=cr),Ve!==void 0&&(Na.okText=Ve),Tr!==void 0&&(Na.cancelText=Tr),Na},[Tr,Ve,cr]),Bn=`${Xe}-modal${he?` ${he}`:""}`,oa=(typeof window=="undefined"?"":window.navigator.language)==="zh-CN",sa=Ue||(oa?"\u7F16\u8F91\u56FE\u7247":"Edit image"),xi=I||(oa?"\u91CD\u7F6E":"Reset");return(0,R.jsxs)(R.Fragment,{children:[Xn,fr&&(0,R.jsx)(P.Z,Object.assign({},ur,an,{[$t]:!0},{title:sa,onCancel:Ln.current,onOk:sn.current,wrapClassName:Bn,maskClosable:!1,destroyOnClose:!0},{children:(0,R.jsx)(at,{ref:Re,cropperRef:Ht,zoomSlider:se,rotationSlider:Xt,aspectSlider:k,showReset:C,resetBtnText:xi,modalImage:fr,aspect:H,minZoom:gt,maxZoom:zt,cropShape:fe,showGrid:Me,cropperProps:Te})}))]})})},921924:function(Ne,G,_){"use strict";var g=_(340210),R=_(155559),w=R(g("String.prototype.indexOf"));Ne.exports=function(P,L){var p=g(P,!!L);return typeof p=="function"&&w(P,".prototype.")>-1?R(p):p}},155559:function(Ne,G,_){"use strict";var g=_(158612),R=_(340210),w=R("%Function.prototype.apply%"),M=R("%Function.prototype.call%"),P=R("%Reflect.apply%",!0)||g.call(M,w),L=R("%Object.getOwnPropertyDescriptor%",!0),p=R("%Object.defineProperty%",!0),b=R("%Math.max%");if(p)try{p({},"a",{value:1})}catch(x){p=null}Ne.exports=function(y){var A=P(g,M,arguments);if(L&&p){var E=L(A,"length");E.configurable&&p(A,"length",{value:1+b(0,y.length-(arguments.length-1))})}return A};var S=function(){return P(g,w,arguments)};p?p(Ne.exports,"apply",{value:S}):Ne.exports.apply=S},386010:function(Ne,G,_){"use strict";_.r(G),_.d(G,{clsx:function(){return R}});function g(w){var M,P,L="";if(typeof w=="string"||typeof w=="number")L+=w;else if(typeof w=="object")if(Array.isArray(w))for(M=0;M<w.length;M++)w[M]&&(P=g(w[M]))&&(L&&(L+=" "),L+=P);else for(M in w)w[M]&&(L&&(L+=" "),L+=M);return L}function R(){for(var w,M,P=0,L="";P<arguments.length;)(w=arguments[P++])&&(M=g(w))&&(L&&(L+=" "),L+=M);return L}G.default=R},308273:function(Ne,G,_){"use strict";_.r(G),_.d(G,{CountUp:function(){return R}});var g=function(){return g=Object.assign||function(w){for(var M,P=1,L=arguments.length;P<L;P++)for(var p in M=arguments[P])Object.prototype.hasOwnProperty.call(M,p)&&(w[p]=M[p]);return w},g.apply(this,arguments)},R=function(){function w(M,P,L){var p=this;this.endVal=P,this.options=L,this.version="2.6.2",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(b){p.startTime||(p.startTime=b);var S=b-p.startTime;p.remaining=p.duration-S,p.useEasing?p.countDown?p.frameVal=p.startVal-p.easingFn(S,0,p.startVal-p.endVal,p.duration):p.frameVal=p.easingFn(S,p.startVal,p.endVal-p.startVal,p.duration):p.frameVal=p.startVal+(p.endVal-p.startVal)*(S/p.duration);var x=p.countDown?p.frameVal<p.endVal:p.frameVal>p.endVal;p.frameVal=x?p.endVal:p.frameVal,p.frameVal=Number(p.frameVal.toFixed(p.options.decimalPlaces)),p.printValue(p.frameVal),S<p.duration?p.rAF=requestAnimationFrame(p.count):p.finalEndVal!==null?p.update(p.finalEndVal):p.options.onCompleteCallback&&p.options.onCompleteCallback()},this.formatNumber=function(b){var S,x,y,A,E=b<0?"-":"";S=Math.abs(b).toFixed(p.options.decimalPlaces);var D=(S+="").split(".");if(x=D[0],y=D.length>1?p.options.decimal+D[1]:"",p.options.useGrouping){A="";for(var B=3,m=0,f=0,W=x.length;f<W;++f)p.options.useIndianSeparators&&f===4&&(B=2,m=1),f!==0&&m%B==0&&(A=p.options.separator+A),m++,A=x[W-f-1]+A;x=A}return p.options.numerals&&p.options.numerals.length&&(x=x.replace(/[0-9]/g,function(X){return p.options.numerals[+X]}),y=y.replace(/[0-9]/g,function(X){return p.options.numerals[+X]})),E+p.options.prefix+x+y+p.options.suffix},this.easeOutExpo=function(b,S,x,y){return x*(1-Math.pow(2,-10*b/y))*1024/1023+S},this.options=g(g({},this.defaults),L),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(P),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof M=="string"?document.getElementById(M):M,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window!="undefined"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,M):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return p.handleScroll(p)}),window.onscroll=function(){window.onScrollFns.forEach(function(b){return b()})},this.handleScroll(this)))}return w.prototype.handleScroll=function(M){if(M&&window&&!M.once){var P=window.innerHeight+window.scrollY,L=M.el.getBoundingClientRect(),p=L.top+window.pageYOffset,b=L.top+L.height+window.pageYOffset;b<P&&b>window.scrollY&&M.paused?(M.paused=!1,setTimeout(function(){return M.start()},M.options.scrollSpyDelay),M.options.scrollSpyOnce&&(M.once=!0)):(window.scrollY>b||p>P)&&!M.paused&&M.reset()}},w.prototype.determineDirectionAndSmartEasing=function(){var M=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>M;var P=M-this.startVal;if(Math.abs(P)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=M;var L=this.countDown?1:-1;this.endVal=M+L*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=M,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},w.prototype.start=function(M){this.error||(M&&(this.options.onCompleteCallback=M),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},w.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},w.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},w.prototype.update=function(M){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(M),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},w.prototype.printValue=function(M){var P;if(this.el){var L=this.formattingFn(M);!((P=this.options.plugin)===null||P===void 0)&&P.render?this.options.plugin.render(this.el,L):this.el.tagName==="INPUT"?this.el.value=L:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=L:this.el.innerHTML=L}},w.prototype.ensureNumber=function(M){return typeof M=="number"&&!isNaN(M)},w.prototype.validateValue=function(M){var P=Number(M);return this.ensureNumber(P)?P:(this.error="[CountUp] invalid start or end value: ".concat(M),null)},w.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},w}()},971829:function(Ne,G,_){"use strict";_.r(G),_.d(G,{quadtree:function(){return g.Z}});var g=_(547148)},547148:function(Ne,G,_){"use strict";_.d(G,{Z:function(){return X}});function g(V){const J=+this._x.call(null,V),Q=+this._y.call(null,V);return R(this.cover(J,Q),J,Q,V)}function R(V,J,Q,et){if(isNaN(J)||isNaN(Q))return V;var ut,it=V._root,yt={data:et},ft=V._x0,Bt=V._y0,St=V._x1,Et=V._y1,Z,q,bt,Ct,nt,ht,At,Ot;if(!it)return V._root=yt,V;for(;it.length;)if((nt=J>=(Z=(ft+St)/2))?ft=Z:St=Z,(ht=Q>=(q=(Bt+Et)/2))?Bt=q:Et=q,ut=it,!(it=it[At=ht<<1|nt]))return ut[At]=yt,V;if(bt=+V._x.call(null,it.data),Ct=+V._y.call(null,it.data),J===bt&&Q===Ct)return yt.next=it,ut?ut[At]=yt:V._root=yt,V;do ut=ut?ut[At]=new Array(4):V._root=new Array(4),(nt=J>=(Z=(ft+St)/2))?ft=Z:St=Z,(ht=Q>=(q=(Bt+Et)/2))?Bt=q:Et=q;while((At=ht<<1|nt)===(Ot=(Ct>=q)<<1|bt>=Z));return ut[Ot]=it,ut[At]=yt,V}function w(V){var J,Q,et=V.length,ut,it,yt=new Array(et),ft=new Array(et),Bt=1/0,St=1/0,Et=-1/0,Z=-1/0;for(Q=0;Q<et;++Q)isNaN(ut=+this._x.call(null,J=V[Q]))||isNaN(it=+this._y.call(null,J))||(yt[Q]=ut,ft[Q]=it,ut<Bt&&(Bt=ut),ut>Et&&(Et=ut),it<St&&(St=it),it>Z&&(Z=it));if(Bt>Et||St>Z)return this;for(this.cover(Bt,St).cover(Et,Z),Q=0;Q<et;++Q)R(this,yt[Q],ft[Q],V[Q]);return this}function M(V,J){if(isNaN(V=+V)||isNaN(J=+J))return this;var Q=this._x0,et=this._y0,ut=this._x1,it=this._y1;if(isNaN(Q))ut=(Q=Math.floor(V))+1,it=(et=Math.floor(J))+1;else{for(var yt=ut-Q||1,ft=this._root,Bt,St;Q>V||V>=ut||et>J||J>=it;)switch(St=(J<et)<<1|V<Q,Bt=new Array(4),Bt[St]=ft,ft=Bt,yt*=2,St){case 0:ut=Q+yt,it=et+yt;break;case 1:Q=ut-yt,it=et+yt;break;case 2:ut=Q+yt,et=it-yt;break;case 3:Q=ut-yt,et=it-yt;break}this._root&&this._root.length&&(this._root=ft)}return this._x0=Q,this._y0=et,this._x1=ut,this._y1=it,this}function P(){var V=[];return this.visit(function(J){if(!J.length)do V.push(J.data);while(J=J.next)}),V}function L(V){return arguments.length?this.cover(+V[0][0],+V[0][1]).cover(+V[1][0],+V[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function p(V,J,Q,et,ut){this.node=V,this.x0=J,this.y0=Q,this.x1=et,this.y1=ut}function b(V,J,Q){var et,ut=this._x0,it=this._y0,yt,ft,Bt,St,Et=this._x1,Z=this._y1,q=[],bt=this._root,Ct,nt;for(bt&&q.push(new p(bt,ut,it,Et,Z)),Q==null?Q=1/0:(ut=V-Q,it=J-Q,Et=V+Q,Z=J+Q,Q*=Q);Ct=q.pop();)if(!(!(bt=Ct.node)||(yt=Ct.x0)>Et||(ft=Ct.y0)>Z||(Bt=Ct.x1)<ut||(St=Ct.y1)<it))if(bt.length){var ht=(yt+Bt)/2,At=(ft+St)/2;q.push(new p(bt[3],ht,At,Bt,St),new p(bt[2],yt,At,ht,St),new p(bt[1],ht,ft,Bt,At),new p(bt[0],yt,ft,ht,At)),(nt=(J>=At)<<1|V>=ht)&&(Ct=q[q.length-1],q[q.length-1]=q[q.length-1-nt],q[q.length-1-nt]=Ct)}else{var Ot=V-+this._x.call(null,bt.data),xt=J-+this._y.call(null,bt.data),Dt=Ot*Ot+xt*xt;if(Dt<Q){var Yt=Math.sqrt(Q=Dt);ut=V-Yt,it=J-Yt,Et=V+Yt,Z=J+Yt,et=bt.data}}return et}function S(V){if(isNaN(Et=+this._x.call(null,V))||isNaN(Z=+this._y.call(null,V)))return this;var J,Q=this._root,et,ut,it,yt=this._x0,ft=this._y0,Bt=this._x1,St=this._y1,Et,Z,q,bt,Ct,nt,ht,At;if(!Q)return this;if(Q.length)for(;;){if((Ct=Et>=(q=(yt+Bt)/2))?yt=q:Bt=q,(nt=Z>=(bt=(ft+St)/2))?ft=bt:St=bt,J=Q,!(Q=Q[ht=nt<<1|Ct]))return this;if(!Q.length)break;(J[ht+1&3]||J[ht+2&3]||J[ht+3&3])&&(et=J,At=ht)}for(;Q.data!==V;)if(ut=Q,!(Q=Q.next))return this;return(it=Q.next)&&delete Q.next,ut?(it?ut.next=it:delete ut.next,this):J?(it?J[ht]=it:delete J[ht],(Q=J[0]||J[1]||J[2]||J[3])&&Q===(J[3]||J[2]||J[1]||J[0])&&!Q.length&&(et?et[At]=Q:this._root=Q),this):(this._root=it,this)}function x(V){for(var J=0,Q=V.length;J<Q;++J)this.remove(V[J]);return this}function y(){return this._root}function A(){var V=0;return this.visit(function(J){if(!J.length)do++V;while(J=J.next)}),V}function E(V){var J=[],Q,et=this._root,ut,it,yt,ft,Bt;for(et&&J.push(new p(et,this._x0,this._y0,this._x1,this._y1));Q=J.pop();)if(!V(et=Q.node,it=Q.x0,yt=Q.y0,ft=Q.x1,Bt=Q.y1)&&et.length){var St=(it+ft)/2,Et=(yt+Bt)/2;(ut=et[3])&&J.push(new p(ut,St,Et,ft,Bt)),(ut=et[2])&&J.push(new p(ut,it,Et,St,Bt)),(ut=et[1])&&J.push(new p(ut,St,yt,ft,Et)),(ut=et[0])&&J.push(new p(ut,it,yt,St,Et))}return this}function D(V){var J=[],Q=[],et;for(this._root&&J.push(new p(this._root,this._x0,this._y0,this._x1,this._y1));et=J.pop();){var ut=et.node;if(ut.length){var it,yt=et.x0,ft=et.y0,Bt=et.x1,St=et.y1,Et=(yt+Bt)/2,Z=(ft+St)/2;(it=ut[0])&&J.push(new p(it,yt,ft,Et,Z)),(it=ut[1])&&J.push(new p(it,Et,ft,Bt,Z)),(it=ut[2])&&J.push(new p(it,yt,Z,Et,St)),(it=ut[3])&&J.push(new p(it,Et,Z,Bt,St))}Q.push(et)}for(;et=Q.pop();)V(et.node,et.x0,et.y0,et.x1,et.y1);return this}function B(V){return V[0]}function m(V){return arguments.length?(this._x=V,this):this._x}function f(V){return V[1]}function W(V){return arguments.length?(this._y=V,this):this._y}function X(V,J,Q){var et=new z(J==null?B:J,Q==null?f:Q,NaN,NaN,NaN,NaN);return V==null?et:et.addAll(V)}function z(V,J,Q,et,ut,it){this._x=V,this._y=J,this._x0=Q,this._y0=et,this._x1=ut,this._y1=it,this._root=void 0}function U(V){for(var J={data:V.data},Q=J;V=V.next;)Q=Q.next={data:V.data};return J}var j=X.prototype=z.prototype;j.copy=function(){var V=new z(this._x,this._y,this._x0,this._y0,this._x1,this._y1),J=this._root,Q,et;if(!J)return V;if(!J.length)return V._root=U(J),V;for(Q=[{source:J,target:V._root=new Array(4)}];J=Q.pop();)for(var ut=0;ut<4;++ut)(et=J.source[ut])&&(et.length?Q.push({source:et,target:J.target[ut]=new Array(4)}):J.target[ut]=U(et));return V},j.add=g,j.addAll=w,j.cover=M,j.data=P,j.extent=L,j.find=b,j.remove=S,j.removeAll=x,j.root=y,j.size=A,j.visit=E,j.visitAfter=D,j.x=m,j.y=W},235374:function(Ne,G,_){"use strict";_.d(G,{HT:function(){return B}});var g=0,R=0,w=0,M=1e3,P,L,p=0,b=0,S=0,x=typeof performance=="object"&&performance.now?performance:Date,y=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(U){setTimeout(U,17)};function A(){return b||(y(E),b=x.now()+S)}function E(){b=0}function D(){this._call=this._time=this._next=null}D.prototype=B.prototype={constructor:D,restart:function(U,j,V){if(typeof U!="function")throw new TypeError("callback is not a function");V=(V==null?A():+V)+(j==null?0:+j),!this._next&&L!==this&&(L?L._next=this:P=this,L=this),this._call=U,this._time=V,z()},stop:function(){this._call&&(this._call=null,this._time=1/0,z())}};function B(U,j,V){var J=new D;return J.restart(U,j,V),J}function m(){A(),++g;for(var U=P,j;U;)(j=b-U._time)>=0&&U._call.call(null,j),U=U._next;--g}function f(){b=(p=x.now())+S,g=R=0;try{m()}finally{g=0,X(),b=0}}function W(){var U=x.now(),j=U-p;j>M&&(S-=j,p=U)}function X(){for(var U,j=P,V,J=1/0;j;)j._call?(J>j._time&&(J=j._time),U=j,j=j._next):(V=j._next,j._next=null,j=U?U._next=V:P=V);L=U,z(J)}function z(U){if(!g){R&&(R=clearTimeout(R));var j=U-b;j>24?(U<1/0&&(R=setTimeout(f,U-x.now()-S)),w&&(w=clearInterval(w))):(w||(p=x.now(),w=setInterval(W,M)),g=1,y(f))}}},631969:function(Ne,G,_){"use strict";_.r(G),_.d(G,{BRIDGE_GRAPH_NAME:function(){return P},GraphType:function(){return b},HierarchyNodeType:function(){return S},InclusionType:function(){return p},LAYOUT_CONFIG:function(){return g},NodeType:function(){return L},ROOT_NAME:function(){return M},buildGraph:function(){return zr},flatGraph:function(){return hn},getEdges:function(){return gn},mergeConfig:function(){return R}});const g={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function R(v={},N=g){var $,st,vt,mt;const It=JSON.parse(JSON.stringify(N)),kt=(($=v==null?void 0:v.graph)===null||$===void 0?void 0:$.meta)||{},Vt=((st=v==null?void 0:v.subScene)===null||st===void 0?void 0:st.meta)||{},oe=((vt=v==null?void 0:v.nodeSize)===null||vt===void 0?void 0:vt.meta)||{},Ee=((mt=v==null?void 0:v.nodeSize)===null||mt===void 0?void 0:mt.node)||{},ve=It.nodeSize.bridge;return{graph:{meta:Object.assign(It.graph.meta,kt)},subScene:{meta:Object.assign(It.subScene.meta,Vt)},nodeSize:{meta:Object.assign(It.nodeSize.meta,oe),node:Object.assign(It.nodeSize.node,Ee),bridge:ve}}}function w(v){return`\u25EC${v}\u25EC`}const M=w("ROOT"),P=w("BRIDGE_GRAPH");var L,p,b,S;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(L||(L={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(p||(p={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(b||(b={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(S||(S={}));var x=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof _.g!="undefined"?_.g:typeof self!="undefined"?self:{};function y(v,N){return v(N={exports:{}},N.exports),N.exports}var A=function(){this.__data__=[],this.size=0},E=function(v,N){return v===N||v!=v&&N!=N},D=function(v,N){for(var $=v.length;$--;)if(E(v[$][0],N))return $;return-1},B=Array.prototype.splice,m=function(v){var N=this.__data__,$=D(N,v);return!($<0)&&($==N.length-1?N.pop():B.call(N,$,1),--this.size,!0)},f=function(v){var N=this.__data__,$=D(N,v);return $<0?void 0:N[$][1]},W=function(v){return D(this.__data__,v)>-1},X=function(v,N){var $=this.__data__,st=D($,v);return st<0?(++this.size,$.push([v,N])):$[st][1]=N,this};function z(v){var N=-1,$=v==null?0:v.length;for(this.clear();++N<$;){var st=v[N];this.set(st[0],st[1])}}z.prototype.clear=A,z.prototype.delete=m,z.prototype.get=f,z.prototype.has=W,z.prototype.set=X;var U=z,j=function(){this.__data__=new U,this.size=0},V=function(v){var N=this.__data__,$=N.delete(v);return this.size=N.size,$},J=function(v){return this.__data__.get(v)},Q=function(v){return this.__data__.has(v)},et=typeof x=="object"&&x&&x.Object===Object&&x,ut=typeof self=="object"&&self&&self.Object===Object&&self,it=et||ut||Function("return this")(),yt=it.Symbol,ft=Object.prototype,Bt=ft.hasOwnProperty,St=ft.toString,Et=yt?yt.toStringTag:void 0,Z=function(v){var N=Bt.call(v,Et),$=v[Et];try{v[Et]=void 0;var st=!0}catch(mt){}var vt=St.call(v);return st&&(N?v[Et]=$:delete v[Et]),vt},q=Object.prototype.toString,bt=function(v){return q.call(v)},Ct=yt?yt.toStringTag:void 0,nt=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":Ct&&Ct in Object(v)?Z(v):bt(v)},ht=function(v){var N=typeof v;return v!=null&&(N=="object"||N=="function")},At,Ot=function(v){if(!ht(v))return!1;var N=nt(v);return N=="[object Function]"||N=="[object GeneratorFunction]"||N=="[object AsyncFunction]"||N=="[object Proxy]"},xt=it["__core-js_shared__"],Dt=(At=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||""))?"Symbol(src)_1."+At:"",Yt=function(v){return!!Dt&&Dt in v},ie=Function.prototype.toString,re=function(v){if(v!=null){try{return ie.call(v)}catch(N){}try{return v+""}catch(N){}}return""},Pt=/^\[object .+?Constructor\]$/,ee=Function.prototype,ce=Object.prototype,Ut=ee.toString,te=ce.hasOwnProperty,ye=RegExp("^"+Ut.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=function(v){return!(!ht(v)||Yt(v))&&(Ot(v)?ye:Pt).test(re(v))},Kt=function(v,N){return v==null?void 0:v[N]},xe=function(v,N){var $=Kt(v,N);return ge($)?$:void 0},Tt=xe(it,"Map"),Ae=xe(Object,"create"),br=function(){this.__data__=Ae?Ae(null):{},this.size=0},Sr=function(v){var N=this.has(v)&&delete this.__data__[v];return this.size-=N?1:0,N},Mr=Object.prototype.hasOwnProperty,Pr=function(v){var N=this.__data__;if(Ae){var $=N[v];return $==="__lodash_hash_undefined__"?void 0:$}return Mr.call(N,v)?N[v]:void 0},on=Object.prototype.hasOwnProperty,Hr=function(v){var N=this.__data__;return Ae?N[v]!==void 0:on.call(N,v)},Sn=function(v,N){var $=this.__data__;return this.size+=this.has(v)?0:1,$[v]=Ae&&N===void 0?"__lodash_hash_undefined__":N,this};function In(v){var N=-1,$=v==null?0:v.length;for(this.clear();++N<$;){var st=v[N];this.set(st[0],st[1])}}In.prototype.clear=br,In.prototype.delete=Sr,In.prototype.get=Pr,In.prototype.has=Hr,In.prototype.set=Sn;var Nn=In,vr=function(){this.size=0,this.__data__={hash:new Nn,map:new(Tt||U),string:new Nn}},Ze=function(v){var N=typeof v;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?v!=="__proto__":v===null},Er=function(v,N){var $=v.__data__;return Ze(N)?$[typeof N=="string"?"string":"hash"]:$.map},ke=function(v){var N=Er(this,v).delete(v);return this.size-=N?1:0,N},Xe=function(v){return Er(this,v).get(v)},jr=function(v){return Er(this,v).has(v)},rn=function(v,N){var $=Er(this,v),st=$.size;return $.set(v,N),this.size+=$.size==st?0:1,this};function ir(v){var N=-1,$=v==null?0:v.length;for(this.clear();++N<$;){var st=v[N];this.set(st[0],st[1])}}ir.prototype.clear=vr,ir.prototype.delete=ke,ir.prototype.get=Xe,ir.prototype.has=jr,ir.prototype.set=rn;var Lr=ir,dn=function(v,N){var $=this.__data__;if($ instanceof U){var st=$.__data__;if(!Tt||st.length<199)return st.push([v,N]),this.size=++$.size,this;$=this.__data__=new Lr(st)}return $.set(v,N),this.size=$.size,this};function Zr(v){var N=this.__data__=new U(v);this.size=N.size}Zr.prototype.clear=j,Zr.prototype.delete=V,Zr.prototype.get=J,Zr.prototype.has=Q,Zr.prototype.set=dn;var wn=Zr,ln=function(v,N){for(var $=-1,st=v==null?0:v.length;++$<st&&N(v[$],$,v)!==!1;);return v},bn=function(){try{var v=xe(Object,"defineProperty");return v({},"",{}),v}catch(N){}}(),Pn=function(v,N,$){N=="__proto__"&&bn?bn(v,N,{configurable:!0,enumerable:!0,value:$,writable:!0}):v[N]=$},at=Object.prototype.hasOwnProperty,je=function(v,N,$){var st=v[N];at.call(v,N)&&E(st,$)&&($!==void 0||N in v)||Pn(v,N,$)},Zt=function(v,N,$,st){var vt=!$;$||($={});for(var mt=-1,It=N.length;++mt<It;){var kt=N[mt],Vt=st?st($[kt],v[kt],kt,$,v):void 0;Vt===void 0&&(Vt=v[kt]),vt?Pn($,kt,Vt):je($,kt,Vt)}return $},$t=function(v,N){for(var $=-1,st=Array(v);++$<v;)st[$]=N($);return st},Mt=function(v){return v!=null&&typeof v=="object"},be=function(v){return Mt(v)&&nt(v)=="[object Arguments]"},Nt=Object.prototype,Ht=Nt.hasOwnProperty,dt=Nt.propertyIsEnumerable,Gt=be(function(){return arguments}())?be:function(v){return Mt(v)&&Ht.call(v,"callee")&&!dt.call(v,"callee")},tt=Array.isArray,ot=function(){return!1},k=y(function(v,N){var $=N&&!N.nodeType&&N,st=$&&v&&!v.nodeType&&v,vt=st&&st.exports===$?it.Buffer:void 0,mt=(vt?vt.isBuffer:void 0)||ot;v.exports=mt}),C=/^(?:0|[1-9]\d*)$/,I=function(v,N){var $=typeof v;return!!(N=N==null?9007199254740991:N)&&($=="number"||$!="symbol"&&C.test(v))&&v>-1&&v%1==0&&v<N},H=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},gt={};gt["[object Float32Array]"]=gt["[object Float64Array]"]=gt["[object Int8Array]"]=gt["[object Int16Array]"]=gt["[object Int32Array]"]=gt["[object Uint8Array]"]=gt["[object Uint8ClampedArray]"]=gt["[object Uint16Array]"]=gt["[object Uint32Array]"]=!0,gt["[object Arguments]"]=gt["[object Array]"]=gt["[object ArrayBuffer]"]=gt["[object Boolean]"]=gt["[object DataView]"]=gt["[object Date]"]=gt["[object Error]"]=gt["[object Function]"]=gt["[object Map]"]=gt["[object Number]"]=gt["[object Object]"]=gt["[object RegExp]"]=gt["[object Set]"]=gt["[object String]"]=gt["[object WeakMap]"]=!1;var zt=function(v){return Mt(v)&&H(v.length)&&!!gt[nt(v)]},Rt=function(v){return function(N){return v(N)}},qt=y(function(v,N){var $=N&&!N.nodeType&&N,st=$&&v&&!v.nodeType&&v,vt=st&&st.exports===$&&et.process,mt=function(){try{var It=st&&st.require&&st.require("util").types;return It||vt&&vt.binding&&vt.binding("util")}catch(kt){}}();v.exports=mt}),Te=qt&&qt.isTypedArray,he=Te?Rt(Te):zt,Ue=Object.prototype.hasOwnProperty,cr=function(v,N){var $=tt(v),st=!$&&Gt(v),vt=!$&&!st&&k(v),mt=!$&&!st&&!vt&&he(v),It=$||st||vt||mt,kt=It?$t(v.length,String):[],Vt=kt.length;for(var oe in v)!N&&!Ue.call(v,oe)||It&&(oe=="length"||vt&&(oe=="offset"||oe=="parent")||mt&&(oe=="buffer"||oe=="byteLength"||oe=="byteOffset")||I(oe,Vt))||kt.push(oe);return kt},Ve=Object.prototype,Tr=function(v){var N=v&&v.constructor;return v===(typeof N=="function"&&N.prototype||Ve)},nn=function(v,N){return function($){return v(N($))}},He=nn(Object.keys,Object),ur=Object.prototype.hasOwnProperty,Ar=function(v){if(!Tr(v))return He(v);var N=[];for(var $ in Object(v))ur.call(v,$)&&$!="constructor"&&N.push($);return N},Cr=function(v){return v!=null&&H(v.length)&&!Ot(v)},se=function(v){return Cr(v)?cr(v):Ar(v)},Xt=function(v,N){return v&&Zt(N,se(N),v)},fe=function(v){var N=[];if(v!=null)for(var $ in Object(v))N.push($);return N},Me=Object.prototype.hasOwnProperty,pe=function(v){if(!ht(v))return fe(v);var N=Tr(v),$=[];for(var st in v)(st!="constructor"||!N&&Me.call(v,st))&&$.push(st);return $},Re=function(v){return Cr(v)?cr(v,!0):pe(v)},nr=function(v,N){return v&&Zt(N,Re(N),v)},fr=y(function(v,N){var $=N&&!N.nodeType&&N,st=$&&v&&!v.nodeType&&v,vt=st&&st.exports===$?it.Buffer:void 0,mt=vt?vt.allocUnsafe:void 0;v.exports=function(It,kt){if(kt)return It.slice();var Vt=It.length,oe=mt?mt(Vt):new It.constructor(Vt);return It.copy(oe),oe}}),tn=function(v,N){var $=-1,st=v.length;for(N||(N=Array(st));++$<st;)N[$]=v[$];return N},Ln=function(v,N){for(var $=-1,st=v==null?0:v.length,vt=0,mt=[];++$<st;){var It=v[$];N(It,$,v)&&(mt[vt++]=It)}return mt},sn=function(){return[]},Xn=Object.prototype.propertyIsEnumerable,an=Object.getOwnPropertySymbols,Bn=an?function(v){return v==null?[]:(v=Object(v),Ln(an(v),function(N){return Xn.call(v,N)}))}:sn,Jn=function(v,N){return Zt(v,Bn(v),N)},oa=function(v,N){for(var $=-1,st=N.length,vt=v.length;++$<st;)v[vt+$]=N[$];return v},sa=nn(Object.getPrototypeOf,Object),xi=Object.getOwnPropertySymbols?function(v){for(var N=[];v;)oa(N,Bn(v)),v=sa(v);return N}:sn,Na=function(v,N){return Zt(v,xi(v),N)},Ra=function(v,N,$){var st=N(v);return tt(v)?st:oa(st,$(v))},ri=function(v){return Ra(v,se,Bn)},Ci=function(v){return Ra(v,Re,xi)},Ni=xe(it,"DataView"),Ri=xe(it,"Promise"),pa=xe(it,"Set"),ki=xe(it,"WeakMap"),eo=re(Ni),za=re(Tt),Ei=re(Ri),Bi=re(pa),go=re(ki),Pi=nt;(Ni&&Pi(new Ni(new ArrayBuffer(1)))!="[object DataView]"||Tt&&Pi(new Tt)!="[object Map]"||Ri&&Pi(Ri.resolve())!="[object Promise]"||pa&&Pi(new pa)!="[object Set]"||ki&&Pi(new ki)!="[object WeakMap]")&&(Pi=function(v){var N=nt(v),$=N=="[object Object]"?v.constructor:void 0,st=$?re($):"";if(st)switch(st){case eo:return"[object DataView]";case za:return"[object Map]";case Ei:return"[object Promise]";case Bi:return"[object Set]";case go:return"[object WeakMap]"}return N});var Wi=Pi,ro=Object.prototype.hasOwnProperty,mo=function(v){var N=v.length,$=new v.constructor(N);return N&&typeof v[0]=="string"&&ro.call(v,"index")&&($.index=v.index,$.input=v.input),$},oi=it.Uint8Array,Ti=function(v){var N=new v.constructor(v.byteLength);return new oi(N).set(new oi(v)),N},Hn=function(v,N){var $=N?Ti(v.buffer):v.buffer;return new v.constructor($,v.byteOffset,v.byteLength)},Jt=/\w*$/,ue=function(v){var N=new v.constructor(v.source,Jt.exec(v));return N.lastIndex=v.lastIndex,N},Pe=yt?yt.prototype:void 0,rr=Pe?Pe.valueOf:void 0,Or=function(v){return rr?Object(rr.call(v)):{}},Ir=function(v,N){var $=N?Ti(v.buffer):v.buffer;return new v.constructor($,v.byteOffset,v.length)},xr=function(v,N,$){var st=v.constructor;switch(N){case"[object ArrayBuffer]":return Ti(v);case"[object Boolean]":case"[object Date]":return new st(+v);case"[object DataView]":return Hn(v,$);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ir(v,$);case"[object Map]":return new st;case"[object Number]":case"[object String]":return new st(v);case"[object RegExp]":return ue(v);case"[object Set]":return new st;case"[object Symbol]":return Or(v)}},Kr=Object.create,un=function(){function v(){}return function(N){if(!ht(N))return{};if(Kr)return Kr(N);v.prototype=N;var $=new v;return v.prototype=void 0,$}}(),Mn=function(v){return typeof v.constructor!="function"||Tr(v)?{}:un(sa(v))},Kn=function(v){return Mt(v)&&Wi(v)=="[object Map]"},Un=qt&&qt.isMap,ra=Un?Rt(Un):Kn,na=function(v){return Mt(v)&&Wi(v)=="[object Set]"},Ya=qt&&qt.isSet,ua=Ya?Rt(Ya):na,Qn={};Qn["[object Arguments]"]=Qn["[object Array]"]=Qn["[object ArrayBuffer]"]=Qn["[object DataView]"]=Qn["[object Boolean]"]=Qn["[object Date]"]=Qn["[object Float32Array]"]=Qn["[object Float64Array]"]=Qn["[object Int8Array]"]=Qn["[object Int16Array]"]=Qn["[object Int32Array]"]=Qn["[object Map]"]=Qn["[object Number]"]=Qn["[object Object]"]=Qn["[object RegExp]"]=Qn["[object Set]"]=Qn["[object String]"]=Qn["[object Symbol]"]=Qn["[object Uint8Array]"]=Qn["[object Uint8ClampedArray]"]=Qn["[object Uint16Array]"]=Qn["[object Uint32Array]"]=!0,Qn["[object Error]"]=Qn["[object Function]"]=Qn["[object WeakMap]"]=!1;var Ga=function v(N,$,st,vt,mt,It){var kt,Vt=1&$,oe=2&$,Ee=4&$;if(st&&(kt=mt?st(N,vt,mt,It):st(N)),kt!==void 0)return kt;if(!ht(N))return N;var ve=tt(N);if(ve){if(kt=mo(N),!Vt)return tn(N,kt)}else{var Ge=Wi(N),ar=Ge=="[object Function]"||Ge=="[object GeneratorFunction]";if(k(N))return fr(N,Vt);if(Ge=="[object Object]"||Ge=="[object Arguments]"||ar&&!mt){if(kt=oe||ar?{}:Mn(N),!Vt)return oe?Na(N,nr(kt,N)):Jn(N,Xt(kt,N))}else{if(!Qn[Ge])return mt?N:{};kt=xr(N,Ge,Vt)}}It||(It=new wn);var Ur=It.get(N);if(Ur)return Ur;It.set(N,kt),ua(N)?N.forEach(function(pr){kt.add(v(pr,$,st,pr,N,It))}):ra(N)&&N.forEach(function(pr,gr){kt.set(gr,v(pr,$,st,gr,N,It))});var dr=ve?void 0:(Ee?oe?Ci:ri:oe?Re:se)(N);return ln(dr||N,function(pr,gr){dr&&(pr=N[gr=pr]),je(kt,gr,v(pr,$,st,gr,N,It))}),kt},Da=function(v){return Ga(v,4)},xa=function(v){return function(){return v}},si=function(v){return function(N,$,st){for(var vt=-1,mt=Object(N),It=st(N),kt=It.length;kt--;){var Vt=It[v?kt:++vt];if($(mt[Vt],Vt,mt)===!1)break}return N}}(),Qa=function(v,N){return v&&si(v,N,se)},ka=function(v,N){return function($,st){if($==null)return $;if(!Cr($))return v($,st);for(var vt=$.length,mt=N?vt:-1,It=Object($);(N?mt--:++mt<vt)&&st(It[mt],mt,It)!==!1;);return $}}(Qa),_a=function(v){return v},va=function(v){return typeof v=="function"?v:_a},ci=function(v,N){return(tt(v)?ln:ka)(v,va(N))},ni=ci,fi=function(v,N){var $=[];return ka(v,function(st,vt,mt){N(st,vt,mt)&&$.push(st)}),$},Fi=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},Ai=function(v){return this.__data__.has(v)};function Yi(v){var N=-1,$=v==null?0:v.length;for(this.__data__=new Lr;++N<$;)this.add(v[N])}Yi.prototype.add=Yi.prototype.push=Fi,Yi.prototype.has=Ai;var Oo=Yi,Io=function(v,N){for(var $=-1,st=v==null?0:v.length;++$<st;)if(N(v[$],$,v))return!0;return!1},Li=function(v,N){return v.has(N)},Ba=function(v,N,$,st,vt,mt){var It=1&$,kt=v.length,Vt=N.length;if(kt!=Vt&&!(It&&Vt>kt))return!1;var oe=mt.get(v),Ee=mt.get(N);if(oe&&Ee)return oe==N&&Ee==v;var ve=-1,Ge=!0,ar=2&$?new Oo:void 0;for(mt.set(v,N),mt.set(N,v);++ve<kt;){var Ur=v[ve],dr=N[ve];if(st)var pr=It?st(dr,Ur,ve,N,v,mt):st(Ur,dr,ve,v,N,mt);if(pr!==void 0){if(pr)continue;Ge=!1;break}if(ar){if(!Io(N,function(gr,yn){if(!Li(ar,yn)&&(Ur===gr||vt(Ur,gr,$,st,mt)))return ar.push(yn)})){Ge=!1;break}}else if(Ur!==dr&&!vt(Ur,dr,$,st,mt)){Ge=!1;break}}return mt.delete(v),mt.delete(N),Ge},vi=function(v){var N=-1,$=Array(v.size);return v.forEach(function(st,vt){$[++N]=[vt,st]}),$},zi=function(v){var N=-1,$=Array(v.size);return v.forEach(function(st){$[++N]=st}),$},Sa=yt?yt.prototype:void 0,Xi=Sa?Sa.valueOf:void 0,co=function(v,N,$,st,vt,mt,It){switch($){case"[object DataView]":if(v.byteLength!=N.byteLength||v.byteOffset!=N.byteOffset)return!1;v=v.buffer,N=N.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=N.byteLength||!mt(new oi(v),new oi(N)));case"[object Boolean]":case"[object Date]":case"[object Number]":return E(+v,+N);case"[object Error]":return v.name==N.name&&v.message==N.message;case"[object RegExp]":case"[object String]":return v==N+"";case"[object Map]":var kt=vi;case"[object Set]":var Vt=1&st;if(kt||(kt=zi),v.size!=N.size&&!Vt)return!1;var oe=It.get(v);if(oe)return oe==N;st|=2,It.set(v,N);var Ee=Ba(kt(v),kt(N),st,vt,mt,It);return It.delete(v),Ee;case"[object Symbol]":if(Xi)return Xi.call(v)==Xi.call(N)}return!1},Mi=Object.prototype.hasOwnProperty,Lo=function(v,N,$,st,vt,mt){var It=1&$,kt=ri(v),Vt=kt.length;if(Vt!=ri(N).length&&!It)return!1;for(var oe=Vt;oe--;){var Ee=kt[oe];if(!(It?Ee in N:Mi.call(N,Ee)))return!1}var ve=mt.get(v),Ge=mt.get(N);if(ve&&Ge)return ve==N&&Ge==v;var ar=!0;mt.set(v,N),mt.set(N,v);for(var Ur=It;++oe<Vt;){var dr=v[Ee=kt[oe]],pr=N[Ee];if(st)var gr=It?st(pr,dr,Ee,N,v,mt):st(dr,pr,Ee,v,N,mt);if(!(gr===void 0?dr===pr||vt(dr,pr,$,st,mt):gr)){ar=!1;break}Ur||(Ur=Ee=="constructor")}if(ar&&!Ur){var yn=v.constructor,Rn=N.constructor;yn==Rn||!("constructor"in v)||!("constructor"in N)||typeof yn=="function"&&yn instanceof yn&&typeof Rn=="function"&&Rn instanceof Rn||(ar=!1)}return mt.delete(v),mt.delete(N),ar},pi=Object.prototype.hasOwnProperty,fo=function(v,N,$,st,vt,mt){var It=tt(v),kt=tt(N),Vt=It?"[object Array]":Wi(v),oe=kt?"[object Array]":Wi(N),Ee=(Vt=Vt=="[object Arguments]"?"[object Object]":Vt)=="[object Object]",ve=(oe=oe=="[object Arguments]"?"[object Object]":oe)=="[object Object]",Ge=Vt==oe;if(Ge&&k(v)){if(!k(N))return!1;It=!0,Ee=!1}if(Ge&&!Ee)return mt||(mt=new wn),It||he(v)?Ba(v,N,$,st,vt,mt):co(v,N,Vt,$,st,vt,mt);if(!(1&$)){var ar=Ee&&pi.call(v,"__wrapped__"),Ur=ve&&pi.call(N,"__wrapped__");if(ar||Ur){var dr=ar?v.value():v,pr=Ur?N.value():N;return mt||(mt=new wn),vt(dr,pr,$,st,mt)}}return!!Ge&&(mt||(mt=new wn),Lo(v,N,$,st,vt,mt))},Go=function v(N,$,st,vt,mt){return N===$||(N==null||$==null||!Mt(N)&&!Mt($)?N!=N&&$!=$:fo(N,$,st,vt,v,mt))},ts=function(v,N,$,st){var vt=$.length,mt=vt,It=!st;if(v==null)return!mt;for(v=Object(v);vt--;){var kt=$[vt];if(It&&kt[2]?kt[1]!==v[kt[0]]:!(kt[0]in v))return!1}for(;++vt<mt;){var Vt=(kt=$[vt])[0],oe=v[Vt],Ee=kt[1];if(It&&kt[2]){if(oe===void 0&&!(Vt in v))return!1}else{var ve=new wn;if(st)var Ge=st(oe,Ee,Vt,v,N,ve);if(!(Ge===void 0?Go(Ee,oe,3,st,ve):Ge))return!1}}return!0},ji=function(v){return v==v&&!ht(v)},Uo=function(v){for(var N=se(v),$=N.length;$--;){var st=N[$],vt=v[st];N[$]=[st,vt,ji(vt)]}return N},Wo=function(v,N){return function($){return $!=null&&$[v]===N&&(N!==void 0||v in Object($))}},fs=function(v){var N=Uo(v);return N.length==1&&N[0][2]?Wo(N[0][0],N[0][1]):function($){return $===v||ts($,v,N)}},ha=function(v){return typeof v=="symbol"||Mt(v)&&nt(v)=="[object Symbol]"},Wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Be=/^\w*$/,tr=function(v,N){if(tt(v))return!1;var $=typeof v;return!($!="number"&&$!="symbol"&&$!="boolean"&&v!=null&&!ha(v))||Be.test(v)||!Wt.test(v)||N!=null&&v in Object(N)};function mr(v,N){if(typeof v!="function"||N!=null&&typeof N!="function")throw new TypeError("Expected a function");var $=function(){var st=arguments,vt=N?N.apply(this,st):st[0],mt=$.cache;if(mt.has(vt))return mt.get(vt);var It=v.apply(this,st);return $.cache=mt.set(vt,It)||mt,It};return $.cache=new(mr.Cache||Lr),$}mr.Cache=Lr;var Vr=mr,cn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fn=/\\(\\)?/g,Ia=function(v){var N=Vr(v,function(st){return $.size===500&&$.clear(),st}),$=N.cache;return N}(function(v){var N=[];return v.charCodeAt(0)===46&&N.push(""),v.replace(cn,function($,st,vt,mt){N.push(vt?mt.replace(Fn,"$1"):st||$)}),N}),di=function(v,N){for(var $=-1,st=v==null?0:v.length,vt=Array(st);++$<st;)vt[$]=N(v[$],$,v);return vt},no=yt?yt.prototype:void 0,wo=no?no.toString:void 0,ds=function v(N){if(typeof N=="string")return N;if(tt(N))return di(N,v)+"";if(ha(N))return wo?wo.call(N):"";var $=N+"";return $=="0"&&1/N==-1/0?"-0":$},Oi=function(v){return v==null?"":ds(v)},ao=function(v,N){return tt(v)?v:tr(v,N)?[v]:Ia(Oi(v))},Yo=function(v){if(typeof v=="string"||ha(v))return v;var N=v+"";return N=="0"&&1/v==-1/0?"-0":N},hs=function(v,N){for(var $=0,st=(N=ao(N,v)).length;v!=null&&$<st;)v=v[Yo(N[$++])];return $&&$==st?v:void 0},qo=function(v,N,$){var st=v==null?void 0:hs(v,N);return st===void 0?$:st},Es=function(v,N){return v!=null&&N in Object(v)},As=function(v,N,$){for(var st=-1,vt=(N=ao(N,v)).length,mt=!1;++st<vt;){var It=Yo(N[st]);if(!(mt=v!=null&&$(v,It)))break;v=v[It]}return mt||++st!=vt?mt:!!(vt=v==null?0:v.length)&&H(vt)&&I(It,vt)&&(tt(v)||Gt(v))},ws=function(v,N){return v!=null&&As(v,N,Es)},nu=function(v,N){return tr(v)&&ji(N)?Wo(Yo(v),N):function($){var st=qo($,v);return st===void 0&&st===N?ws($,v):Go(N,st,3)}},Ko=function(v){return function(N){return N==null?void 0:N[v]}},os=function(v){return function(N){return hs(N,v)}},vs=function(v){return tr(v)?Ko(Yo(v)):os(v)},No=function(v){return typeof v=="function"?v:v==null?_a:typeof v=="object"?tt(v)?nu(v[0],v[1]):fs(v):vs(v)},xu=function(v,N){return(tt(v)?Ln:fi)(v,No(N))},Eu=Object.prototype.hasOwnProperty,Vi=function(v,N){return v!=null&&Eu.call(v,N)},So=function(v,N){return v!=null&&As(v,N,Vi)},Ro=Object.prototype.hasOwnProperty,h=function(v){if(v==null)return!0;if(Cr(v)&&(tt(v)||typeof v=="string"||typeof v.splice=="function"||k(v)||he(v)||Gt(v)))return!v.length;var N=Wi(v);if(N=="[object Map]"||N=="[object Set]")return!v.size;if(Tr(v))return!Ar(v).length;for(var $ in v)if(Ro.call(v,$))return!1;return!0},Y=function(v){return v===void 0},wt=function(v,N){var $=-1,st=Cr(v)?Array(v.length):[];return ka(v,function(vt,mt,It){st[++$]=N(vt,mt,It)}),st},Ft=function(v,N){return(tt(v)?di:wt)(v,No(N))},Qt=function(v,N,$,st){var vt=-1,mt=v==null?0:v.length;for(st&&mt&&($=v[++vt]);++vt<mt;)$=N($,v[vt],vt,v);return $},le=function(v,N,$,st,vt){return vt(v,function(mt,It,kt){$=st?(st=!1,mt):N($,mt,It,kt)}),$},de=function(v,N,$){var st=tt(v)?Qt:le,vt=arguments.length<3;return st(v,No(N),$,vt,ka)},_e=function(v){return typeof v=="string"||!tt(v)&&Mt(v)&&nt(v)=="[object String]"},Le=Ko("length"),Ye=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),or=function(v){return Ye.test(v)},Br="[\\ud800-\\udfff]",Gr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Fr="\\ud83c[\\udffb-\\udfff]",pn="[^\\ud800-\\udfff]",Dn="(?:\\ud83c[\\udde6-\\uddff]){2}",Qr="[\\ud800-\\udbff][\\udc00-\\udfff]",Vn="(?:"+Gr+"|"+Fr+")?",Ta="[\\ufe0e\\ufe0f]?"+Vn+("(?:\\u200d(?:"+[pn,Dn,Qr].join("|")+")[\\ufe0e\\ufe0f]?"+Vn+")*"),Oa="(?:"+[pn+Gr+"?",Gr,Dn,Qr,Br].join("|")+")",Ea=RegExp(Fr+"(?="+Fr+")|"+Oa+Ta,"g"),ca=function(v){for(var N=Ea.lastIndex=0;Ea.test(v);)++N;return N},ma=function(v){return or(v)?ca(v):Le(v)},io=function(v){if(v==null)return 0;if(Cr(v))return _e(v)?ma(v):v.length;var N=Wi(v);return N=="[object Map]"||N=="[object Set]"?v.size:Ar(v).length},$i=function(v,N,$){var st=tt(v),vt=st||k(v)||he(v);if(N=No(N),$==null){var mt=v&&v.constructor;$=vt?st?new mt:[]:ht(v)&&Ot(mt)?un(sa(v)):{}}return(vt?ln:Qa)(v,function(It,kt,Vt){return N($,It,kt,Vt)}),$},Hi=yt?yt.isConcatSpreadable:void 0,Qi=function(v){return tt(v)||Gt(v)||!!(Hi&&v&&v[Hi])},qi=function v(N,$,st,vt,mt){var It=-1,kt=N.length;for(st||(st=Qi),mt||(mt=[]);++It<kt;){var Vt=N[It];$>0&&st(Vt)?$>1?v(Vt,$-1,st,vt,mt):oa(mt,Vt):vt||(mt[mt.length]=Vt)}return mt},ho=function(v,N,$){switch($.length){case 0:return v.call(N);case 1:return v.call(N,$[0]);case 2:return v.call(N,$[0],$[1]);case 3:return v.call(N,$[0],$[1],$[2])}return v.apply(N,$)},Mo=Math.max,Xa=function(v,N,$){return N=Mo(N===void 0?v.length-1:N,0),function(){for(var st=arguments,vt=-1,mt=Mo(st.length-N,0),It=Array(mt);++vt<mt;)It[vt]=st[N+vt];vt=-1;for(var kt=Array(N+1);++vt<N;)kt[vt]=st[vt];return kt[N]=$(It),ho(v,this,kt)}},hi=bn?function(v,N){return bn(v,"toString",{configurable:!0,enumerable:!1,value:xa(N),writable:!0})}:_a,Os=Date.now,ps=function(v){var N=0,$=0;return function(){var st=Os(),vt=16-(st-$);if($=st,vt>0){if(++N>=800)return arguments[0]}else N=0;return v.apply(void 0,arguments)}}(hi),es=function(v,N){return ps(Xa(v,N,_a),v+"")},au=function(v,N,$,st){for(var vt=v.length,mt=$+(st?1:-1);st?mt--:++mt<vt;)if(N(v[mt],mt,v))return mt;return-1},xc=function(v){return v!=v},sf=function(v,N,$){for(var st=$-1,vt=v.length;++st<vt;)if(v[st]===N)return st;return-1},uf=function(v,N,$){return N==N?sf(v,N,$):au(v,xc,$)},Ec=function(v,N){return!!(v!=null&&v.length)&&uf(v,N,0)>-1},rd=function(v,N,$){for(var st=-1,vt=v==null?0:v.length;++st<vt;)if($(N,v[st]))return!0;return!1},wc=function(){},Ju=pa&&1/zi(new pa([,-0]))[1]==1/0?function(v){return new pa(v)}:wc,lf=function(v,N,$){var st=-1,vt=Ec,mt=v.length,It=!0,kt=[],Vt=kt;if($)It=!1,vt=rd;else if(mt>=200){var oe=N?null:Ju(v);if(oe)return zi(oe);It=!1,vt=Li,Vt=new Oo}else Vt=N?[]:kt;t:for(;++st<mt;){var Ee=v[st],ve=N?N(Ee):Ee;if(Ee=$||Ee!==0?Ee:0,It&&ve==ve){for(var Ge=Vt.length;Ge--;)if(Vt[Ge]===ve)continue t;N&&Vt.push(ve),kt.push(Ee)}else vt(Vt,ve,$)||(Vt!==kt&&Vt.push(ve),kt.push(Ee))}return kt},Sc=function(v){return Mt(v)&&Cr(v)},cf=es(function(v){return lf(qi(v,1,Sc,!0))}),nd=function(v,N){return di(N,function($){return v[$]})},iu,ff=function(v){return v==null?[]:nd(v,se(v))};try{iu={clone:Da,constant:xa,each:ni,filter:xu,has:So,isArray:tt,isEmpty:h,isFunction:Ot,isUndefined:Y,keys:se,map:Ft,reduce:de,size:io,transform:$i,union:cf,values:ff}}catch(v){}iu||(iu=window._);var Wn=iu,wu=ja;function ja(v){this._isDirected=!Wn.has(v,"directed")||v.directed,this._isMultigraph=!!Wn.has(v,"multigraph")&&v.multigraph,this._isCompound=!!Wn.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=Wn.constant(void 0),this._defaultEdgeLabelFn=Wn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Mc(v,N){v[N]?v[N]++:v[N]=1}function Pl(v,N){--v[N]||delete v[N]}function ou(v,N,$,st){var vt=""+N,mt=""+$;if(!v&&vt>mt){var It=vt;vt=mt,mt=It}return vt+""+mt+""+(Wn.isUndefined(st)?"\0":st)}function _c(v,N,$,st){var vt=""+N,mt=""+$;if(!v&&vt>mt){var It=vt;vt=mt,mt=It}var kt={v:vt,w:mt};return st&&(kt.name=st),kt}function Cc(v,N){return ou(v,N.v,N.w,N.name)}ja.prototype._nodeCount=0,ja.prototype._edgeCount=0,ja.prototype.isDirected=function(){return this._isDirected},ja.prototype.isMultigraph=function(){return this._isMultigraph},ja.prototype.isCompound=function(){return this._isCompound},ja.prototype.setGraph=function(v){return this._label=v,this},ja.prototype.graph=function(){return this._label},ja.prototype.setDefaultNodeLabel=function(v){return Wn.isFunction(v)||(v=Wn.constant(v)),this._defaultNodeLabelFn=v,this},ja.prototype.nodeCount=function(){return this._nodeCount},ja.prototype.nodes=function(){return Wn.keys(this._nodes)},ja.prototype.sources=function(){var v=this;return Wn.filter(this.nodes(),function(N){return Wn.isEmpty(v._in[N])})},ja.prototype.sinks=function(){var v=this;return Wn.filter(this.nodes(),function(N){return Wn.isEmpty(v._out[N])})},ja.prototype.setNodes=function(v,N){var $=arguments,st=this;return Wn.each(v,function(vt){$.length>1?st.setNode(vt,N):st.setNode(vt)}),this},ja.prototype.setNode=function(v,N){return Wn.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=N),this):(this._nodes[v]=arguments.length>1?N:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},ja.prototype.node=function(v){return this._nodes[v]},ja.prototype.hasNode=function(v){return Wn.has(this._nodes,v)},ja.prototype.removeNode=function(v){var N=this;if(Wn.has(this._nodes,v)){var $=function(st){N.removeEdge(N._edgeObjs[st])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],Wn.each(this.children(v),function(st){N.setParent(st)}),delete this._children[v]),Wn.each(Wn.keys(this._in[v]),$),delete this._in[v],delete this._preds[v],Wn.each(Wn.keys(this._out[v]),$),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},ja.prototype.setParent=function(v,N){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Wn.isUndefined(N))N="\0";else{for(var $=N+="";!Wn.isUndefined($);$=this.parent($))if($===v)throw new Error("Setting "+N+" as parent of "+v+" would create a cycle");this.setNode(N)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=N,this._children[N][v]=!0,this},ja.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},ja.prototype.parent=function(v){if(this._isCompound){var N=this._parent[v];if(N!=="\0")return N}},ja.prototype.children=function(v){if(Wn.isUndefined(v)&&(v="\0"),this._isCompound){var N=this._children[v];if(N)return Wn.keys(N)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},ja.prototype.predecessors=function(v){var N=this._preds[v];if(N)return Wn.keys(N)},ja.prototype.successors=function(v){var N=this._sucs[v];if(N)return Wn.keys(N)},ja.prototype.neighbors=function(v){var N=this.predecessors(v);if(N)return Wn.union(N,this.successors(v))},ja.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},ja.prototype.filterNodes=function(v){var N=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});N.setGraph(this.graph());var $=this;Wn.each(this._nodes,function(mt,It){v(It)&&N.setNode(It,mt)}),Wn.each(this._edgeObjs,function(mt){N.hasNode(mt.v)&&N.hasNode(mt.w)&&N.setEdge(mt,$.edge(mt))});var st={};function vt(mt){var It=$.parent(mt);return It===void 0||N.hasNode(It)?(st[mt]=It,It):It in st?st[It]:vt(It)}return this._isCompound&&Wn.each(N.nodes(),function(mt){N.setParent(mt,vt(mt))}),N},ja.prototype.setDefaultEdgeLabel=function(v){return Wn.isFunction(v)||(v=Wn.constant(v)),this._defaultEdgeLabelFn=v,this},ja.prototype.edgeCount=function(){return this._edgeCount},ja.prototype.edges=function(){return Wn.values(this._edgeObjs)},ja.prototype.setPath=function(v,N){var $=this,st=arguments;return Wn.reduce(v,function(vt,mt){return st.length>1?$.setEdge(vt,mt,N):$.setEdge(vt,mt),mt}),this},ja.prototype.setEdge=function(){var v,N,$,st,vt=!1,mt=arguments[0];typeof mt=="object"&&mt!==null&&"v"in mt?(v=mt.v,N=mt.w,$=mt.name,arguments.length===2&&(st=arguments[1],vt=!0)):(v=mt,N=arguments[1],$=arguments[3],arguments.length>2&&(st=arguments[2],vt=!0)),v=""+v,N=""+N,Wn.isUndefined($)||($=""+$);var It=ou(this._isDirected,v,N,$);if(Wn.has(this._edgeLabels,It))return vt&&(this._edgeLabels[It]=st),this;if(!Wn.isUndefined($)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(N),this._edgeLabels[It]=vt?st:this._defaultEdgeLabelFn(v,N,$);var kt=_c(this._isDirected,v,N,$);return v=kt.v,N=kt.w,Object.freeze(kt),this._edgeObjs[It]=kt,Mc(this._preds[N],v),Mc(this._sucs[v],N),this._in[N][It]=kt,this._out[v][It]=kt,this._edgeCount++,this},ja.prototype.edge=function(v,N,$){var st=arguments.length===1?Cc(this._isDirected,arguments[0]):ou(this._isDirected,v,N,$);return this._edgeLabels[st]},ja.prototype.hasEdge=function(v,N,$){var st=arguments.length===1?Cc(this._isDirected,arguments[0]):ou(this._isDirected,v,N,$);return Wn.has(this._edgeLabels,st)},ja.prototype.removeEdge=function(v,N,$){var st=arguments.length===1?Cc(this._isDirected,arguments[0]):ou(this._isDirected,v,N,$),vt=this._edgeObjs[st];return vt&&(v=vt.v,N=vt.w,delete this._edgeLabels[st],delete this._edgeObjs[st],Pl(this._preds[N],v),Pl(this._sucs[v],N),delete this._in[N][st],delete this._out[v][st],this._edgeCount--),this},ja.prototype.inEdges=function(v,N){var $=this._in[v];if($){var st=Wn.values($);return N?Wn.filter(st,function(vt){return vt.v===N}):st}},ja.prototype.outEdges=function(v,N){var $=this._out[v];if($){var st=Wn.values($);return N?Wn.filter(st,function(vt){return vt.w===N}):st}},ja.prototype.nodeEdges=function(v,N){var $=this.inEdges(v,N);if($)return $.concat(this.outEdges(v,N))};var Ll={Graph:wu,version:"2.1.8"},df={write:function(v){var N={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:hf(v),edges:gs(v)};return Wn.isUndefined(v.graph())||(N.value=Wn.clone(v.graph())),N},read:function(v){var N=new wu(v.options).setGraph(v.value);return Wn.each(v.nodes,function($){N.setNode($.v,$.value),$.parent&&N.setParent($.v,$.parent)}),Wn.each(v.edges,function($){N.setEdge({v:$.v,w:$.w,name:$.name},$.value)}),N}};function hf(v){return Wn.map(v.nodes(),function(N){var $=v.node(N),st=v.parent(N),vt={v:N};return Wn.isUndefined($)||(vt.value=$),Wn.isUndefined(st)||(vt.parent=st),vt})}function gs(v){return Wn.map(v.edges(),function(N){var $=v.edge(N),st={v:N.v,w:N.w};return Wn.isUndefined(N.name)||(st.name=N.name),Wn.isUndefined($)||(st.value=$),st})}var Tc=function(v){var N,$={},st=[];function vt(mt){Wn.has($,mt)||($[mt]=!0,N.push(mt),Wn.each(v.successors(mt),vt),Wn.each(v.predecessors(mt),vt))}return Wn.each(v.nodes(),function(mt){N=[],vt(mt),N.length&&st.push(N)}),st},Ws=yo;function yo(){this._arr=[],this._keyIndices={}}yo.prototype.size=function(){return this._arr.length},yo.prototype.keys=function(){return this._arr.map(function(v){return v.key})},yo.prototype.has=function(v){return Wn.has(this._keyIndices,v)},yo.prototype.priority=function(v){var N=this._keyIndices[v];if(N!==void 0)return this._arr[N].priority},yo.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},yo.prototype.add=function(v,N){var $=this._keyIndices;if(v=String(v),!Wn.has($,v)){var st=this._arr,vt=st.length;return $[v]=vt,st.push({key:v,priority:N}),this._decrease(vt),!0}return!1},yo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},yo.prototype.decrease=function(v,N){var $=this._keyIndices[v];if(N>this._arr[$].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[$].priority+" New: "+N);this._arr[$].priority=N,this._decrease($)},yo.prototype._heapify=function(v){var N=this._arr,$=2*v,st=$+1,vt=v;$<N.length&&(vt=N[$].priority<N[vt].priority?$:vt,st<N.length&&(vt=N[st].priority<N[vt].priority?st:vt),vt!==v&&(this._swap(v,vt),this._heapify(vt)))},yo.prototype._decrease=function(v){for(var N,$=this._arr,st=$[v].priority;v!==0&&!($[N=v>>1].priority<st);)this._swap(v,N),v=N},yo.prototype._swap=function(v,N){var $=this._arr,st=this._keyIndices,vt=$[v],mt=$[N];$[v]=mt,$[N]=vt,st[mt.key]=v,st[vt.key]=N};var Ys=function(v,N,$,st){return function(vt,mt,It,kt){var Vt,oe,Ee={},ve=new Ws,Ge=function(ar){var Ur=ar.v!==Vt?ar.v:ar.w,dr=Ee[Ur],pr=It(ar),gr=oe.distance+pr;if(pr<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ar+" Weight: "+pr);gr<dr.distance&&(dr.distance=gr,dr.predecessor=Vt,ve.decrease(Ur,gr))};for(vt.nodes().forEach(function(ar){var Ur=ar===mt?0:Number.POSITIVE_INFINITY;Ee[ar]={distance:Ur},ve.add(ar,Ur)});ve.size()>0&&(Vt=ve.removeMin(),(oe=Ee[Vt]).distance!==Number.POSITIVE_INFINITY);)kt(Vt).forEach(Ge);return Ee}(v,String(N),$||Is,st||function(vt){return v.outEdges(vt)})},Is=Wn.constant(1),Nl=function(v,N,$){return Wn.transform(v.nodes(),function(st,vt){st[vt]=Ys(v,vt,N,$)},{})},Ac=function(v){var N=0,$=[],st={},vt=[];function mt(It){var kt=st[It]={onStack:!0,lowlink:N,index:N++};if($.push(It),v.successors(It).forEach(function(Ee){Wn.has(st,Ee)?st[Ee].onStack&&(kt.lowlink=Math.min(kt.lowlink,st[Ee].index)):(mt(Ee),kt.lowlink=Math.min(kt.lowlink,st[Ee].lowlink))}),kt.lowlink===kt.index){var Vt,oe=[];do Vt=$.pop(),st[Vt].onStack=!1,oe.push(Vt);while(It!==Vt);vt.push(oe)}}return v.nodes().forEach(function(It){Wn.has(st,It)||mt(It)}),vt},vf=function(v){return Wn.filter(Ac(v),function(N){return N.length>1||N.length===1&&v.hasEdge(N[0],N[0])})},pf=function(v,N,$){return function(st,vt,mt){var It={},kt=st.nodes();return kt.forEach(function(Vt){It[Vt]={},It[Vt][Vt]={distance:0},kt.forEach(function(oe){Vt!==oe&&(It[Vt][oe]={distance:Number.POSITIVE_INFINITY})}),mt(Vt).forEach(function(oe){var Ee=oe.v===Vt?oe.w:oe.v,ve=vt(oe);It[Vt][Ee]={distance:ve,predecessor:Vt}})}),kt.forEach(function(Vt){var oe=It[Vt];kt.forEach(function(Ee){var ve=It[Ee];kt.forEach(function(Ge){var ar=ve[Vt],Ur=oe[Ge],dr=ve[Ge],pr=ar.distance+Ur.distance;pr<dr.distance&&(dr.distance=pr,dr.predecessor=Ur.predecessor)})})}),It}(v,N||gf,$||function(st){return v.outEdges(st)})},gf=Wn.constant(1),Rl=mf;function mf(v){var N={},$={},st=[];if(Wn.each(v.sinks(),function vt(mt){if(Wn.has($,mt))throw new kl;Wn.has(N,mt)||($[mt]=!0,N[mt]=!0,Wn.each(v.predecessors(mt),vt),delete $[mt],st.push(mt))}),Wn.size(N)!==v.nodeCount())throw new kl;return st}function kl(){}mf.CycleException=kl,kl.prototype=new Error;var yf=function(v,N,$){Wn.isArray(N)||(N=[N]);var st=(v.isDirected()?v.successors:v.neighbors).bind(v),vt=[],mt={};return Wn.each(N,function(It){if(!v.hasNode(It))throw new Error("Graph does not have node: "+It);Oc(v,It,$==="post",mt,st,vt)}),vt};function Oc(v,N,$,st,vt,mt){Wn.has(st,N)||(st[N]=!0,$||mt.push(N),Wn.each(vt(N),function(It){Oc(v,It,$,st,vt,mt)}),$&&mt.push(N))}var tl,Ic={Graph:Ll.Graph,json:df,alg:{components:Tc,dijkstra:Ys,dijkstraAll:Nl,findCycles:vf,floydWarshall:pf,isAcyclic:function(v){try{Rl(v)}catch(N){if(N instanceof Rl.CycleException)return!1;throw N}return!0},postorder:function(v,N){return yf(v,N,"post")},preorder:function(v,N){return yf(v,N,"pre")},prim:function(v,N){var $,st=new wu,vt={},mt=new Ws;function It(Vt){var oe=Vt.v===$?Vt.w:Vt.v,Ee=mt.priority(oe);if(Ee!==void 0){var ve=N(Vt);ve<Ee&&(vt[oe]=$,mt.decrease(oe,ve))}}if(v.nodeCount()===0)return st;Wn.each(v.nodes(),function(Vt){mt.add(Vt,Number.POSITIVE_INFINITY),st.setNode(Vt)}),mt.decrease(v.nodes()[0],0);for(var kt=!1;mt.size()>0;){if($=mt.removeMin(),Wn.has(vt,$))st.setEdge($,vt[$]);else{if(kt)throw new Error("Input graph is not connected: "+v);kt=!0}v.nodeEdges($).forEach(It)}return st},tarjan:Ac,topsort:Rl},version:Ll.version};try{tl=Ic}catch(v){}tl||(tl=window.graphlib);var ss=tl,Dc=function(v){return Ga(v,5)},el=function(v,N,$){if(!ht($))return!1;var st=typeof N;return!!(st=="number"?Cr($)&&I(N,$.length):st=="string"&&N in $)&&E($[N],v)},bf=Object.prototype,ad=bf.hasOwnProperty,Pc=es(function(v,N){v=Object(v);var $=-1,st=N.length,vt=st>2?N[2]:void 0;for(vt&&el(N[0],N[1],vt)&&(st=1);++$<st;)for(var mt=N[$],It=Re(mt),kt=-1,Vt=It.length;++kt<Vt;){var oe=It[kt],Ee=v[oe];(Ee===void 0||E(Ee,bf[oe])&&!ad.call(v,oe))&&(v[oe]=mt[oe])}return v}),rl=function(v){return function(N,$,st){var vt=Object(N);if(!Cr(N)){var mt=No($);N=se(N),$=function(kt){return mt(vt[kt],kt,vt)}}var It=v(N,$,st);return It>-1?vt[mt?N[It]:It]:void 0}},id=/^\s+|\s+$/g,Lc=/^[-+]0x[0-9a-f]+$/i,Nc=/^0b[01]+$/i,xf=/^0o[0-7]+$/i,nl=parseInt,Su=function(v){if(typeof v=="number")return v;if(ha(v))return NaN;if(ht(v)){var N=typeof v.valueOf=="function"?v.valueOf():v;v=ht(N)?N+"":N}if(typeof v!="string")return v===0?v:+v;v=v.replace(id,"");var $=Nc.test(v);return $||xf.test(v)?nl(v.slice(2),$?2:8):Lc.test(v)?NaN:+v},su=function(v){return v?(v=Su(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},Mu=function(v){var N=su(v),$=N%1;return N==N?$?N-$:N:0},al=Math.max,Ss=rl(function(v,N,$){var st=v==null?0:v.length;if(!st)return-1;var vt=$==null?0:Mu($);return vt<0&&(vt=al(st+vt,0)),au(v,No(N),vt)}),Ef=function(v){return v!=null&&v.length?qi(v,1):[]},_u=function(v,N){return v==null?v:si(v,va(N),Re)},od=function(v){var N=v==null?0:v.length;return N?v[N-1]:void 0},sd=function(v,N){var $={};return N=No(N),Qa(v,function(st,vt,mt){Pn($,vt,N(st,vt,mt))}),$},Bl=function(v,N,$){for(var st=-1,vt=v.length;++st<vt;){var mt=v[st],It=N(mt);if(It!=null&&(kt===void 0?It==It&&!ha(It):$(It,kt)))var kt=It,Vt=mt}return Vt},Rc=function(v,N){return v>N},ud=function(v){return v&&v.length?Bl(v,_a,Rc):void 0},il=function(v,N,$){($!==void 0&&!E(v[N],$)||$===void 0&&!(N in v))&&Pn(v,N,$)},wf=Function.prototype,ld=Object.prototype,Sf=wf.toString,Mf=ld.hasOwnProperty,ol=Sf.call(Object),Cu=function(v){if(!Mt(v)||nt(v)!="[object Object]")return!1;var N=sa(v);if(N===null)return!0;var $=Mf.call(N,"constructor")&&N.constructor;return typeof $=="function"&&$ instanceof $&&Sf.call($)==ol},Tu=function(v,N){if((N!=="constructor"||typeof v[N]!="function")&&N!="__proto__")return v[N]},Fl=function(v){return Zt(v,Re(v))},zl=function(v,N,$,st,vt,mt,It){var kt=Tu(v,$),Vt=Tu(N,$),oe=It.get(Vt);if(oe)il(v,$,oe);else{var Ee=mt?mt(kt,Vt,$+"",v,N,It):void 0,ve=Ee===void 0;if(ve){var Ge=tt(Vt),ar=!Ge&&k(Vt),Ur=!Ge&&!ar&&he(Vt);Ee=Vt,Ge||ar||Ur?tt(kt)?Ee=kt:Sc(kt)?Ee=tn(kt):ar?(ve=!1,Ee=fr(Vt,!0)):Ur?(ve=!1,Ee=Ir(Vt,!0)):Ee=[]:Cu(Vt)||Gt(Vt)?(Ee=kt,Gt(kt)?Ee=Fl(kt):ht(kt)&&!Ot(kt)||(Ee=Mn(Vt))):ve=!1}ve&&(It.set(Vt,Ee),vt(Ee,Vt,st,mt,It),It.delete(Vt)),il(v,$,Ee)}},Ao=function v(N,$,st,vt,mt){N!==$&&si($,function(It,kt){if(mt||(mt=new wn),ht(It))zl(N,$,kt,st,v,vt,mt);else{var Vt=vt?vt(Tu(N,kt),It,kt+"",N,$,mt):void 0;Vt===void 0&&(Vt=It),il(N,kt,Vt)}},Re)},uu=function(v){return es(function(N,$){var st=-1,vt=$.length,mt=vt>1?$[vt-1]:void 0,It=vt>2?$[2]:void 0;for(mt=v.length>3&&typeof mt=="function"?(vt--,mt):void 0,It&&el($[0],$[1],It)&&(mt=vt<3?void 0:mt,vt=1),N=Object(N);++st<vt;){var kt=$[st];kt&&v(N,kt,st,mt)}return N})}(function(v,N,$){Ao(v,N,$)}),_f=function(v,N){return v<N},lu=function(v){return v&&v.length?Bl(v,_a,_f):void 0},sl=function(v,N){return v&&v.length?Bl(v,No(N),_f):void 0},us=function(){return it.Date.now()},Ds=function(v,N,$,st){if(!ht(v))return v;for(var vt=-1,mt=(N=ao(N,v)).length,It=mt-1,kt=v;kt!=null&&++vt<mt;){var Vt=Yo(N[vt]),oe=$;if(Vt==="__proto__"||Vt==="constructor"||Vt==="prototype")return v;if(vt!=It){var Ee=kt[Vt];(oe=st?st(Ee,Vt,kt):void 0)===void 0&&(oe=ht(Ee)?Ee:I(N[vt+1])?[]:{})}je(kt,Vt,oe),kt=kt[Vt]}return v},Gl=function(v,N,$){for(var st=-1,vt=N.length,mt={};++st<vt;){var It=N[st],kt=hs(v,It);$(kt,It)&&Ds(mt,ao(It,v),kt)}return mt},Ul=function(v,N){return Gl(v,N,function($,st){return ws(v,st)})},kc=function(v){return ps(Xa(v,void 0,Ef),v+"")}(function(v,N){return v==null?{}:Ul(v,N)}),rs=Math.ceil,ul=Math.max,ll=function(v,N,$,st){for(var vt=-1,mt=ul(rs((N-v)/($||1)),0),It=Array(mt);mt--;)It[st?mt:++vt]=v,v+=$;return It},Wl=function(v){return function(N,$,st){return st&&typeof st!="number"&&el(N,$,st)&&($=st=void 0),N=su(N),$===void 0?($=N,N=0):$=su($),st=st===void 0?N<$?1:-1:su(st),ll(N,$,st,v)}}(),Bc=function(v,N){var $=v.length;for(v.sort(N);$--;)v[$]=v[$].value;return v},Cf=function(v,N){if(v!==N){var $=v!==void 0,st=v===null,vt=v==v,mt=ha(v),It=N!==void 0,kt=N===null,Vt=N==N,oe=ha(N);if(!kt&&!oe&&!mt&&v>N||mt&&It&&Vt&&!kt&&!oe||st&&It&&Vt||!$&&Vt||!vt)return 1;if(!st&&!mt&&!oe&&v<N||oe&&$&&vt&&!st&&!mt||kt&&$&&vt||!It&&vt||!Vt)return-1}return 0},Tf=function(v,N,$){for(var st=-1,vt=v.criteria,mt=N.criteria,It=vt.length,kt=$.length;++st<It;){var Vt=Cf(vt[st],mt[st]);if(Vt)return st>=kt?Vt:Vt*($[st]=="desc"?-1:1)}return v.index-N.index},cl=function(v,N,$){N=N.length?di(N,function(mt){return tt(mt)?function(It){return hs(It,mt.length===1?mt[0]:mt)}:mt}):[_a];var st=-1;N=di(N,Rt(No));var vt=wt(v,function(mt,It,kt){return{criteria:di(N,function(Vt){return Vt(mt)}),index:++st,value:mt}});return Bc(vt,function(mt,It){return Tf(mt,It,$)})},Yl=es(function(v,N){if(v==null)return[];var $=N.length;return $>1&&el(v,N[0],N[1])?N=[]:$>2&&el(N[0],N[1],N[2])&&(N=[N[0]]),cl(v,qi(N,1),[])}),Af=0,cd=function(v){var N=++Af;return Oi(v)+N},Of=function(v,N,$){for(var st=-1,vt=v.length,mt=N.length,It={};++st<vt;){var kt=st<mt?N[st]:void 0;$(It,v[st],kt)}return It},Au,Xl=function(v,N){return Of(v||[],N||[],je)};try{Au={cloneDeep:Dc,constant:xa,defaults:Pc,each:ni,filter:xu,find:Ss,flatten:Ef,forEach:ci,forIn:_u,has:So,isUndefined:Y,last:od,map:Ft,mapValues:sd,max:ud,merge:uu,min:lu,minBy:sl,now:us,pick:kc,range:Wl,reduce:de,sortBy:Yl,uniqueId:cd,values:ff,zipObject:Xl}}catch(v){}Au||(Au=window._);var qe=Au,fd=fl;function fl(){var v={};v._next=v._prev=v,this._sentinel=v}function dl(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function Fc(v,N){if(v!=="_next"&&v!=="_prev")return N}fl.prototype.dequeue=function(){var v=this._sentinel,N=v._prev;if(N!==v)return dl(N),N},fl.prototype.enqueue=function(v){var N=this._sentinel;v._prev&&v._next&&dl(v),v._next=N._next,N._next._prev=v,N._next=v,v._prev=N},fl.prototype.toString=function(){for(var v=[],N=this._sentinel,$=N._prev;$!==N;)v.push(JSON.stringify($,Fc)),$=$._prev;return"["+v.join(", ")+"]"};var zc=ss.Graph,Gc=function(v,N){if(v.nodeCount()<=1)return[];var $=function(vt,mt){var It=new zc,kt=0,Vt=0;qe.forEach(vt.nodes(),function(ve){It.setNode(ve,{v:ve,in:0,out:0})}),qe.forEach(vt.edges(),function(ve){var Ge=It.edge(ve.v,ve.w)||0,ar=mt(ve),Ur=Ge+ar;It.setEdge(ve.v,ve.w,Ur),Vt=Math.max(Vt,It.node(ve.v).out+=ar),kt=Math.max(kt,It.node(ve.w).in+=ar)});var oe=qe.range(Vt+kt+3).map(function(){return new fd}),Ee=kt+1;return qe.forEach(It.nodes(),function(ve){jl(oe,Ee,It.node(ve))}),{graph:It,buckets:oe,zeroIdx:Ee}}(v,N||If),st=function(vt,mt,It){for(var kt,Vt=[],oe=mt[mt.length-1],Ee=mt[0];vt.nodeCount();){for(;kt=Ee.dequeue();)cu(vt,mt,It,kt);for(;kt=oe.dequeue();)cu(vt,mt,It,kt);if(vt.nodeCount()){for(var ve=mt.length-2;ve>0;--ve)if(kt=mt[ve].dequeue()){Vt=Vt.concat(cu(vt,mt,It,kt,!0));break}}}return Vt}($.graph,$.buckets,$.zeroIdx);return qe.flatten(qe.map(st,function(vt){return v.outEdges(vt.v,vt.w)}),!0)},If=qe.constant(1);function cu(v,N,$,st,vt){var mt=vt?[]:void 0;return qe.forEach(v.inEdges(st.v),function(It){var kt=v.edge(It),Vt=v.node(It.v);vt&&mt.push({v:It.v,w:It.w}),Vt.out-=kt,jl(N,$,Vt)}),qe.forEach(v.outEdges(st.v),function(It){var kt=v.edge(It),Vt=It.w,oe=v.node(Vt);oe.in-=kt,jl(N,$,oe)}),v.removeNode(st.v),mt}function jl(v,N,$){$.out?$.in?v[$.out-$.in+N].enqueue($):v[v.length-1].enqueue($):v[0].enqueue($)}var hl={run:function(v){var N=v.graph().acyclicer==="greedy"?Gc(v,function($){return function(st){return $.edge(st).weight}}(v)):function($){var st=[],vt={},mt={};function It(kt){qe.has(mt,kt)||(mt[kt]=!0,vt[kt]=!0,qe.forEach($.outEdges(kt),function(Vt){qe.has(vt,Vt.w)?st.push(Vt):It(Vt.w)}),delete vt[kt])}return qe.forEach($.nodes(),It),st}(v);qe.forEach(N,function($){var st=v.edge($);v.removeEdge($),st.forwardName=$.name,st.reversed=!0,v.setEdge($.w,$.v,st,qe.uniqueId("rev"))})},undo:function(v){qe.forEach(v.edges(),function(N){var $=v.edge(N);if($.reversed){v.removeEdge(N);var st=$.forwardName;delete $.reversed,delete $.forwardName,v.setEdge(N.w,N.v,$,st)}})}},Ou=ss.Graph,_o={addDummyNode:Iu,simplify:function(v){var N=new Ou().setGraph(v.graph());return qe.forEach(v.nodes(),function($){N.setNode($,v.node($))}),qe.forEach(v.edges(),function($){var st=N.edge($.v,$.w)||{weight:0,minlen:1},vt=v.edge($);N.setEdge($.v,$.w,{weight:st.weight+vt.weight,minlen:Math.max(st.minlen,vt.minlen)})}),N},asNonCompoundGraph:function(v){var N=new Ou({multigraph:v.isMultigraph()}).setGraph(v.graph());return qe.forEach(v.nodes(),function($){v.children($).length||N.setNode($,v.node($))}),qe.forEach(v.edges(),function($){N.setEdge($,v.edge($))}),N},successorWeights:function(v){var N=qe.map(v.nodes(),function($){var st={};return qe.forEach(v.outEdges($),function(vt){st[vt.w]=(st[vt.w]||0)+v.edge(vt).weight}),st});return qe.zipObject(v.nodes(),N)},predecessorWeights:function(v){var N=qe.map(v.nodes(),function($){var st={};return qe.forEach(v.inEdges($),function(vt){st[vt.v]=(st[vt.v]||0)+v.edge(vt).weight}),st});return qe.zipObject(v.nodes(),N)},intersectRect:function(v,N){var $,st,vt=v.x,mt=v.y,It=N.x-vt,kt=N.y-mt,Vt=v.width/2,oe=v.height/2;if(!It&&!kt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(kt)*Vt>Math.abs(It)*oe?(kt<0&&(oe=-oe),$=oe*It/kt,st=oe):(It<0&&(Vt=-Vt),$=Vt,st=Vt*kt/It),{x:vt+$,y:mt+st}},buildLayerMatrix:function(v){var N=qe.map(qe.range(Uc(v)+1),function(){return[]});return qe.forEach(v.nodes(),function($){var st=v.node($),vt=st.rank;qe.isUndefined(vt)||(N[vt][st.order]=$)}),N},normalizeRanks:function(v){var N=qe.min(qe.map(v.nodes(),function($){return v.node($).rank}));qe.forEach(v.nodes(),function($){var st=v.node($);qe.has(st,"rank")&&(st.rank-=N)})},removeEmptyRanks:function(v){var N=qe.min(qe.map(v.nodes(),function(mt){return v.node(mt).rank})),$=[];qe.forEach(v.nodes(),function(mt){var It=v.node(mt).rank-N;$[It]||($[It]=[]),$[It].push(mt)});var st=0,vt=v.graph().nodeRankFactor;qe.forEach($,function(mt,It){qe.isUndefined(mt)&&It%vt!=0?--st:st&&qe.forEach(mt,function(kt){v.node(kt).rank+=st})})},addBorderNode:function(v,N,$,st){var vt={width:0,height:0};return arguments.length>=4&&(vt.rank=$,vt.order=st),Iu(v,"border",vt,N)},maxRank:Uc,partition:function(v,N){var $={lhs:[],rhs:[]};return qe.forEach(v,function(st){N(st)?$.lhs.push(st):$.rhs.push(st)}),$},time:function(v,N){var $=qe.now();try{return N()}finally{console.log(v+" time: "+(qe.now()-$)+"ms")}},notime:function(v,N){return N()}};function Iu(v,N,$,st){var vt;do vt=qe.uniqueId(st);while(v.hasNode(vt));return $.dummy=N,v.setNode(vt,$),vt}function Uc(v){return qe.max(qe.map(v.nodes(),function(N){var $=v.node(N).rank;if(!qe.isUndefined($))return $}))}var Xs={run:function(v){v.graph().dummyChains=[],qe.forEach(v.edges(),function(N){(function($,st){var vt,mt,It,kt=st.v,Vt=$.node(kt).rank,oe=st.w,Ee=$.node(oe).rank,ve=st.name,Ge=$.edge(st),ar=Ge.labelRank;if(Ee!==Vt+1){for($.removeEdge(st),It=0,++Vt;Vt<Ee;++It,++Vt)Ge.points=[],mt={width:0,height:0,edgeLabel:Ge,edgeObj:st,rank:Vt},vt=_o.addDummyNode($,"edge",mt,"_d"),Vt===ar&&(mt.width=Ge.width,mt.height=Ge.height,mt.dummy="edge-label",mt.labelpos=Ge.labelpos),$.setEdge(kt,vt,{weight:Ge.weight},ve),It===0&&$.graph().dummyChains.push(vt),kt=vt;$.setEdge(kt,oe,{weight:Ge.weight},ve)}})(v,N)})},undo:function(v){qe.forEach(v.graph().dummyChains,function(N){var $,st=v.node(N),vt=st.edgeLabel;for(v.setEdge(st.edgeObj,vt);st.dummy;)$=v.successors(N)[0],v.removeNode(N),vt.points.push({x:st.x,y:st.y}),st.dummy==="edge-label"&&(vt.x=st.x,vt.y=st.y,vt.width=st.width,vt.height=st.height),N=$,st=v.node(N)})}},Ms=function(v){var N={};qe.forEach(v.sources(),function $(st){var vt=v.node(st);if(qe.has(N,st))return vt.rank;N[st]=!0;var mt=qe.min(qe.map(v.outEdges(st),function(It){return $(It.w)-v.edge(It).minlen}));return mt!==Number.POSITIVE_INFINITY&&mt!=null||(mt=0),vt.rank=mt})},Du=function(v,N){return v.node(N.w).rank-v.node(N.v).rank-v.edge(N).minlen},fu=ss.Graph,Ps=Du,Pu=function(v){var N,$,st=new fu({directed:!1}),vt=v.nodes()[0],mt=v.nodeCount();for(st.setNode(vt,{});du(st,v)<mt;)N=js(st,v),$=st.hasNode(N.v)?Ps(v,N):-Ps(v,N),Ls(st,v,$);return st};function du(v,N){return qe.forEach(v.nodes(),function $(st){qe.forEach(N.nodeEdges(st),function(vt){var mt=vt.v,It=st===mt?vt.w:mt;v.hasNode(It)||Ps(N,vt)||(v.setNode(It,{}),v.setEdge(st,It,{}),$(It))})}),v.nodeCount()}function js(v,N){return qe.minBy(N.edges(),function($){if(v.hasNode($.v)!==v.hasNode($.w))return Ps(N,$)})}function Ls(v,N,$){qe.forEach(v.nodes(),function(st){N.node(st).rank+=$})}var Vl=Du,Hl=Ms,Lu=ss.alg.preorder,Zl=ss.alg.postorder,Kl=_o.simplify,Nu=ls;function ls(v){v=Kl(v),Hl(v);var N,$=Pu(v);for(Ql($),$l($,v);N=ql($);)hu($,v,N,Df($,v,N))}function $l(v,N){var $=Zl(v,v.nodes());$=$.slice(0,$.length-1),qe.forEach($,function(st){(function(vt,mt,It){var kt=vt.node(It).parent;vt.edge(It,kt).cutvalue=Ns(vt,mt,It)})(v,N,st)})}function Ns(v,N,$){var st=v.node($).parent,vt=!0,mt=N.edge($,st),It=0;return mt||(vt=!1,mt=N.edge(st,$)),It=mt.weight,qe.forEach(N.nodeEdges($),function(kt){var Vt,oe,Ee=kt.v===$,ve=Ee?kt.w:kt.v;if(ve!==st){var Ge=Ee===vt,ar=N.edge(kt).weight;if(It+=Ge?ar:-ar,Vt=$,oe=ve,v.hasEdge(Vt,oe)){var Ur=v.edge($,ve).cutvalue;It+=Ge?-Ur:Ur}}}),It}function Ql(v,N){arguments.length<2&&(N=v.nodes()[0]),Wc(v,{},1,N)}function Wc(v,N,$,st,vt){var mt=$,It=v.node(st);return N[st]=!0,qe.forEach(v.neighbors(st),function(kt){qe.has(N,kt)||($=Wc(v,N,$,kt,st))}),It.low=mt,It.lim=$++,vt?It.parent=vt:delete It.parent,$}function ql(v){return qe.find(v.edges(),function(N){return v.edge(N).cutvalue<0})}function Df(v,N,$){var st=$.v,vt=$.w;N.hasEdge(st,vt)||(st=$.w,vt=$.v);var mt=v.node(st),It=v.node(vt),kt=mt,Vt=!1;mt.lim>It.lim&&(kt=It,Vt=!0);var oe=qe.filter(N.edges(),function(Ee){return Vt===Yc(v,v.node(Ee.v),kt)&&Vt!==Yc(v,v.node(Ee.w),kt)});return qe.minBy(oe,function(Ee){return Vl(N,Ee)})}function hu(v,N,$,st){var vt=$.v,mt=$.w;v.removeEdge(vt,mt),v.setEdge(st.v,st.w,{}),Ql(v),$l(v,N),function(It,kt){var Vt=qe.find(It.nodes(),function(Ee){return!kt.node(Ee).parent}),oe=Lu(It,Vt);oe=oe.slice(1),qe.forEach(oe,function(Ee){var ve=It.node(Ee).parent,Ge=kt.edge(Ee,ve),ar=!1;Ge||(Ge=kt.edge(ve,Ee),ar=!0),kt.node(Ee).rank=kt.node(ve).rank+(ar?Ge.minlen:-Ge.minlen)})}(v,N)}function Yc(v,N,$){return $.low<=N.lim&&N.lim<=$.lim}ls.initLowLimValues=Ql,ls.initCutValues=$l,ls.calcCutValue=Ns,ls.leaveEdge=ql,ls.enterEdge=Df,ls.exchangeEdges=hu;var Jl=Ms,dd=function(v){switch(v.graph().ranker){case"network-simplex":Lf(v);break;case"tight-tree":(function(N){Jl(N),Pu(N)})(v);break;case"longest-path":Pf(v);break;default:Lf(v)}},Pf=Jl;function Lf(v){Nu(v)}var hd=function(v){var N=function($){var st={},vt=0;function mt(It){var kt=vt;qe.forEach($.children(It),mt),st[It]={low:kt,lim:vt++}}return qe.forEach($.children(),mt),st}(v);qe.forEach(v.graph().dummyChains,function($){for(var st=v.node($),vt=st.edgeObj,mt=function(ve,Ge,ar,Ur){var dr,pr,gr=[],yn=[],Rn=Math.min(Ge[ar].low,Ge[Ur].low),Cn=Math.max(Ge[ar].lim,Ge[Ur].lim);dr=ar;do dr=ve.parent(dr),gr.push(dr);while(dr&&(Ge[dr].low>Rn||Cn>Ge[dr].lim));for(pr=dr,dr=Ur;(dr=ve.parent(dr))!==pr;)yn.push(dr);return{path:gr.concat(yn.reverse()),lca:pr}}(v,N,vt.v,vt.w),It=mt.path,kt=mt.lca,Vt=0,oe=It[Vt],Ee=!0;$!==vt.w;){if(st=v.node($),Ee){for(;(oe=It[Vt])!==kt&&v.node(oe).maxRank<st.rank;)Vt++;oe===kt&&(Ee=!1)}if(!Ee){for(;Vt<It.length-1&&v.node(oe=It[Vt+1]).minRank<=st.rank;)Vt++;oe=It[Vt]}v.setParent($,oe),$=v.successors($)[0]}})},Nf={run:function(v){var N=_o.addDummyNode(v,"root",{},"_root"),$=function(It){var kt={};function Vt(oe,Ee){var ve=It.children(oe);ve&&ve.length&&qe.forEach(ve,function(Ge){Vt(Ge,Ee+1)}),kt[oe]=Ee}return qe.forEach(It.children(),function(oe){Vt(oe,1)}),kt}(v),st=qe.max(qe.values($))-1,vt=2*st+1;v.graph().nestingRoot=N,qe.forEach(v.edges(),function(It){v.edge(It).minlen*=vt});var mt=function(It){return qe.reduce(It.edges(),function(kt,Vt){return kt+It.edge(Vt).weight},0)}(v)+1;qe.forEach(v.children(),function(It){Rf(v,N,vt,mt,st,$,It)}),v.graph().nodeRankFactor=vt},cleanup:function(v){var N=v.graph();v.removeNode(N.nestingRoot),delete N.nestingRoot,qe.forEach(v.edges(),function($){v.edge($).nestingEdge&&v.removeEdge($)})}};function Rf(v,N,$,st,vt,mt,It){var kt=v.children(It);if(kt.length){var Vt=_o.addBorderNode(v,"_bt"),oe=_o.addBorderNode(v,"_bb"),Ee=v.node(It);v.setParent(Vt,It),Ee.borderTop=Vt,v.setParent(oe,It),Ee.borderBottom=oe,qe.forEach(kt,function(ve){Rf(v,N,$,st,vt,mt,ve);var Ge=v.node(ve),ar=Ge.borderTop?Ge.borderTop:ve,Ur=Ge.borderBottom?Ge.borderBottom:ve,dr=Ge.borderTop?st:2*st,pr=ar!==Ur?1:vt-mt[It]+1;v.setEdge(Vt,ar,{weight:dr,minlen:pr,nestingEdge:!0}),v.setEdge(Ur,oe,{weight:dr,minlen:pr,nestingEdge:!0})}),v.parent(It)||v.setEdge(N,Vt,{weight:0,minlen:vt+mt[It]})}else It!==N&&v.setEdge(N,It,{weight:0,minlen:$})}var vd=function(v){qe.forEach(v.children(),function N($){var st=v.children($),vt=v.node($);if(st.length&&qe.forEach(st,N),qe.has(vt,"minRank")){vt.borderLeft=[],vt.borderRight=[];for(var mt=vt.minRank,It=vt.maxRank+1;mt<It;++mt)kf(v,"borderLeft","_bl",$,vt,mt),kf(v,"borderRight","_br",$,vt,mt)}})};function kf(v,N,$,st,vt,mt){var It={width:0,height:0,rank:mt,borderType:N},kt=vt[N][mt-1],Vt=_o.addDummyNode(v,"border",It,$);vt[N][mt]=Vt,v.setParent(Vt,st),kt&&v.setEdge(kt,Vt,{weight:1})}var vl={adjust:function(v){var N=v.graph().rankdir.toLowerCase();N!=="lr"&&N!=="rl"||Bf(v)},undo:function(v){var N=v.graph().rankdir.toLowerCase();N!=="bt"&&N!=="rl"||function($){qe.forEach($.nodes(),function(st){Xc($.node(st))}),qe.forEach($.edges(),function(st){var vt=$.edge(st);qe.forEach(vt.points,Xc),qe.has(vt,"y")&&Xc(vt)})}(v),N!=="lr"&&N!=="rl"||(function($){qe.forEach($.nodes(),function(st){vu($.node(st))}),qe.forEach($.edges(),function(st){var vt=$.edge(st);qe.forEach(vt.points,vu),qe.has(vt,"x")&&vu(vt)})}(v),Bf(v))}};function Bf(v){qe.forEach(v.nodes(),function(N){Ru(v.node(N))}),qe.forEach(v.edges(),function(N){Ru(v.edge(N))})}function Ru(v){var N=v.width;v.width=v.height,v.height=N}function Xc(v){v.y=-v.y}function vu(v){var N=v.x;v.x=v.y,v.y=N}var tc=function(v){var N={},$=qe.filter(v.nodes(),function(kt){return!v.children(kt).length}),st=qe.max(qe.map($,function(kt){return v.node(kt).rank})),vt=qe.map(qe.range(st+1),function(){return[]});function mt(kt){if(!qe.has(N,kt)){N[kt]=!0;var Vt=v.node(kt);vt[Vt.rank].push(kt),qe.forEach(v.successors(kt),mt)}}var It=qe.sortBy($,function(kt){return v.node(kt).rank});return qe.forEach(It,mt),vt},ec=function(v,N){for(var $=0,st=1;st<N.length;++st)$+=pl(v,N[st-1],N[st]);return $};function pl(v,N,$){for(var st=qe.zipObject($,qe.map($,function(oe,Ee){return Ee})),vt=qe.flatten(qe.map(N,function(oe){return qe.sortBy(qe.map(v.outEdges(oe),function(Ee){return{pos:st[Ee.w],weight:v.edge(Ee).weight}}),"pos")}),!0),mt=1;mt<$.length;)mt<<=1;var It=2*mt-1;mt-=1;var kt=qe.map(new Array(It),function(){return 0}),Vt=0;return qe.forEach(vt.forEach(function(oe){var Ee=oe.pos+mt;kt[Ee]+=oe.weight;for(var ve=0;Ee>0;)Ee%2&&(ve+=kt[Ee+1]),kt[Ee=Ee-1>>1]+=oe.weight;Vt+=oe.weight*ve})),Vt}var Vs=function(v,N){return qe.map(N,function($){var st=v.inEdges($);if(st.length){var vt=qe.reduce(st,function(mt,It){var kt=v.edge(It),Vt=v.node(It.v);return{sum:mt.sum+kt.weight*Vt.order,weight:mt.weight+kt.weight}},{sum:0,weight:0});return{v:$,barycenter:vt.sum/vt.weight,weight:vt.weight}}return{v:$}})},ku=function(v,N){var $={};return qe.forEach(v,function(st,vt){var mt=$[st.v]={indegree:0,in:[],out:[],vs:[st.v],i:vt};qe.isUndefined(st.barycenter)||(mt.barycenter=st.barycenter,mt.weight=st.weight)}),qe.forEach(N.edges(),function(st){var vt=$[st.v],mt=$[st.w];qe.isUndefined(vt)||qe.isUndefined(mt)||(mt.indegree++,vt.out.push($[st.w]))}),function(st){var vt=[];function mt(Vt){return function(oe){oe.merged||(qe.isUndefined(oe.barycenter)||qe.isUndefined(Vt.barycenter)||oe.barycenter>=Vt.barycenter)&&function(Ee,ve){var Ge=0,ar=0;Ee.weight&&(Ge+=Ee.barycenter*Ee.weight,ar+=Ee.weight),ve.weight&&(Ge+=ve.barycenter*ve.weight,ar+=ve.weight),Ee.vs=ve.vs.concat(Ee.vs),Ee.barycenter=Ge/ar,Ee.weight=ar,Ee.i=Math.min(ve.i,Ee.i),ve.merged=!0}(Vt,oe)}}function It(Vt){return function(oe){oe.in.push(Vt),--oe.indegree==0&&st.push(oe)}}for(;st.length;){var kt=st.pop();vt.push(kt),qe.forEach(kt.in.reverse(),mt(kt)),qe.forEach(kt.out,It(kt))}return qe.map(qe.filter(vt,function(Vt){return!Vt.merged}),function(Vt){return qe.pick(Vt,["vs","i","barycenter","weight"])})}(qe.filter($,function(st){return!st.indegree}))},Bu=function(v,N){var $=_o.partition(v,function(ve){return qe.has(ve,"barycenter")}),st=$.lhs,vt=qe.sortBy($.rhs,function(ve){return-ve.i}),mt=[],It=0,kt=0,Vt=0;st.sort((oe=!!N,function(ve,Ge){return ve.barycenter<Ge.barycenter?-1:ve.barycenter>Ge.barycenter?1:oe?Ge.i-ve.i:ve.i-Ge.i})),Vt=gl(mt,vt,Vt),qe.forEach(st,function(ve){Vt+=ve.vs.length,mt.push(ve.vs),It+=ve.barycenter*ve.weight,kt+=ve.weight,Vt=gl(mt,vt,Vt)});var oe,Ee={vs:qe.flatten(mt,!0)};return kt&&(Ee.barycenter=It/kt,Ee.weight=kt),Ee};function gl(v,N,$){for(var st;N.length&&(st=qe.last(N)).i<=$;)N.pop(),v.push(st.vs),$++;return $}var rc=function v(N,$,st,vt){var mt=N.children($),It=N.node($),kt=It?It.borderLeft:void 0,Vt=It?It.borderRight:void 0,oe={};kt&&(mt=qe.filter(mt,function(dr){return dr!==kt&&dr!==Vt}));var Ee=Vs(N,mt);qe.forEach(Ee,function(dr){if(N.children(dr.v).length){var pr=v(N,dr.v,st,vt);oe[dr.v]=pr,qe.has(pr,"barycenter")&&(gr=dr,yn=pr,qe.isUndefined(gr.barycenter)?(gr.barycenter=yn.barycenter,gr.weight=yn.weight):(gr.barycenter=(gr.barycenter*gr.weight+yn.barycenter*yn.weight)/(gr.weight+yn.weight),gr.weight+=yn.weight))}var gr,yn});var ve=ku(Ee,st);(function(dr,pr){qe.forEach(dr,function(gr){gr.vs=qe.flatten(gr.vs.map(function(yn){return pr[yn]?pr[yn].vs:yn}),!0)})})(ve,oe);var Ge=Bu(ve,vt);if(kt&&(Ge.vs=qe.flatten([kt,Ge.vs,Vt],!0),N.predecessors(kt).length)){var ar=N.node(N.predecessors(kt)[0]),Ur=N.node(N.predecessors(Vt)[0]);qe.has(Ge,"barycenter")||(Ge.barycenter=0,Ge.weight=0),Ge.barycenter=(Ge.barycenter*Ge.weight+ar.order+Ur.order)/(Ge.weight+2),Ge.weight+=2}return Ge},nc=ss.Graph,ml=function(v,N,$){var st=function(mt){for(var It;mt.hasNode(It=qe.uniqueId("_root")););return It}(v),vt=new nc({compound:!0}).setGraph({root:st}).setDefaultNodeLabel(function(mt){return v.node(mt)});return qe.forEach(v.nodes(),function(mt){var It=v.node(mt),kt=v.parent(mt);(It.rank===N||It.minRank<=N&&N<=It.maxRank)&&(vt.setNode(mt),vt.setParent(mt,kt||st),qe.forEach(v[$](mt),function(Vt){var oe=Vt.v===mt?Vt.w:Vt.v,Ee=vt.edge(oe,mt),ve=qe.isUndefined(Ee)?0:Ee.weight;vt.setEdge(oe,mt,{weight:v.edge(Vt).weight+ve})}),qe.has(It,"minRank")&&vt.setNode(mt,{borderLeft:It.borderLeft[N],borderRight:It.borderRight[N]}))}),vt},ac=function(v,N,$){var st,vt={};qe.forEach($,function(mt){for(var It,kt,Vt=v.parent(mt);Vt;){if((It=v.parent(Vt))?(kt=vt[It],vt[It]=Vt):(kt=st,st=Vt),kt&&kt!==Vt)return void N.setEdge(kt,Vt);Vt=It}})},ic=ss.Graph,yl=function(v){var N=_o.maxRank(v),$=Fu(v,qe.range(1,N+1),"inEdges"),st=Fu(v,qe.range(N-1,-1,-1),"outEdges"),vt=tc(v);Gu(v,vt);for(var mt,It=Number.POSITIVE_INFINITY,kt=0,Vt=0;Vt<4;++kt,++Vt){zu(kt%2?$:st,kt%4>=2),vt=_o.buildLayerMatrix(v);var oe=ec(v,vt);oe<It&&(Vt=0,mt=qe.cloneDeep(vt),It=oe)}Gu(v,mt)};function Fu(v,N,$){return qe.map(N,function(st){return ml(v,st,$)})}function zu(v,N){var $=new ic;qe.forEach(v,function(st){var vt=st.graph().root,mt=rc(st,vt,$,N);qe.forEach(mt.vs,function(It,kt){st.node(It).order=kt}),ac(st,$,mt.vs)})}function Gu(v,N){qe.forEach(N,function($){qe.forEach($,function(st,vt){v.node(st).order=vt})})}var Ff=ss.Graph,bl=function(v){var N,$=_o.buildLayerMatrix(v),st=qe.merge(pu(v,$),zf(v,$)),vt={};qe.forEach(["u","d"],function(It){N=It==="u"?$:qe.values($).reverse(),qe.forEach(["l","r"],function(kt){kt==="r"&&(N=qe.map(N,function(ve){return qe.values(ve).reverse()}));var Vt=(It==="u"?v.predecessors:v.successors).bind(v),oe=Gf(v,N,st,Vt),Ee=Ud(v,N,oe.root,oe.align,kt==="r");kt==="r"&&(Ee=qe.mapValues(Ee,function(ve){return-ve})),vt[It+kt]=Ee})});var mt=Rs(v,vt);return Uf(vt,mt),Wf(vt,v.graph().align)};function pu(v,N){var $={};return qe.reduce(N,function(st,vt){var mt=0,It=0,kt=st.length,Vt=qe.last(vt);return qe.forEach(vt,function(oe,Ee){var ve=function(ar,Ur){if(ar.node(Ur).dummy)return qe.find(ar.predecessors(Ur),function(dr){return ar.node(dr).dummy})}(v,oe),Ge=ve?v.node(ve).order:kt;(ve||oe===Vt)&&(qe.forEach(vt.slice(It,Ee+1),function(ar){qe.forEach(v.predecessors(ar),function(Ur){var dr=v.node(Ur),pr=dr.order;!(pr<mt||Ge<pr)||dr.dummy&&v.node(ar).dummy||xl($,Ur,ar)})}),It=Ee+1,mt=Ge)}),vt}),$}function zf(v,N){var $={};function st(vt,mt,It,kt,Vt){var oe;qe.forEach(qe.range(mt,It),function(Ee){oe=vt[Ee],v.node(oe).dummy&&qe.forEach(v.predecessors(oe),function(ve){var Ge=v.node(ve);Ge.dummy&&(Ge.order<kt||Ge.order>Vt)&&xl($,ve,oe)})})}return qe.reduce(N,function(vt,mt){var It,kt=-1,Vt=0;return qe.forEach(mt,function(oe,Ee){if(v.node(oe).dummy==="border"){var ve=v.predecessors(oe);ve.length&&(It=v.node(ve[0]).order,st(mt,Vt,Ee,kt,It),Vt=Ee,kt=It)}st(mt,Vt,mt.length,It,vt.length)}),mt}),$}function xl(v,N,$){if(N>$){var st=N;N=$,$=st}var vt=v[N];vt||(v[N]=vt={}),vt[$]=!0}function pd(v,N,$){if(N>$){var st=N;N=$,$=st}return qe.has(v[N],$)}function Gf(v,N,$,st){var vt={},mt={},It={};return qe.forEach(N,function(kt){qe.forEach(kt,function(Vt,oe){vt[Vt]=Vt,mt[Vt]=Vt,It[Vt]=oe})}),qe.forEach(N,function(kt){var Vt=-1;qe.forEach(kt,function(oe){var Ee=st(oe);if(Ee.length)for(var ve=((Ee=qe.sortBy(Ee,function(dr){return It[dr]})).length-1)/2,Ge=Math.floor(ve),ar=Math.ceil(ve);Ge<=ar;++Ge){var Ur=Ee[Ge];mt[oe]===oe&&Vt<It[Ur]&&!pd($,oe,Ur)&&(mt[Ur]=oe,mt[oe]=vt[oe]=vt[Ur],Vt=It[Ur])}})}),{root:vt,align:mt}}function Ud(v,N,$,st,vt){var mt={},It=function(oe,Ee,ve,Ge){var ar=new Ff,Ur=oe.graph(),dr=function(pr,gr,yn){return function(Rn,Cn,qn){var $n,aa=Rn.node(Cn),ga=Rn.node(qn),da=0;if(da+=aa.width/2,qe.has(aa,"labelpos"))switch(aa.labelpos.toLowerCase()){case"l":$n=-aa.width/2;break;case"r":$n=aa.width/2}if($n&&(da+=yn?$n:-$n),$n=0,da+=(aa.dummy?gr:pr)/2,da+=(ga.dummy?gr:pr)/2,da+=ga.width/2,qe.has(ga,"labelpos"))switch(ga.labelpos.toLowerCase()){case"l":$n=ga.width/2;break;case"r":$n=-ga.width/2}return $n&&(da+=yn?$n:-$n),$n=0,da}}(Ur.nodesep,Ur.edgesep,Ge);return qe.forEach(Ee,function(pr){var gr;qe.forEach(pr,function(yn){var Rn=ve[yn];if(ar.setNode(Rn),gr){var Cn=ve[gr],qn=ar.edge(Cn,Rn);ar.setEdge(Cn,Rn,Math.max(dr(oe,yn,gr),qn||0))}gr=yn})}),ar}(v,N,$,vt),kt=vt?"borderLeft":"borderRight";function Vt(oe,Ee){for(var ve=It.nodes(),Ge=ve.pop(),ar={};Ge;)ar[Ge]?oe(Ge):(ar[Ge]=!0,ve.push(Ge),ve=ve.concat(Ee(Ge))),Ge=ve.pop()}return Vt(function(oe){mt[oe]=It.inEdges(oe).reduce(function(Ee,ve){return Math.max(Ee,mt[ve.v]+It.edge(ve))},0)},It.predecessors.bind(It)),Vt(function(oe){var Ee=It.outEdges(oe).reduce(function(Ge,ar){return Math.min(Ge,mt[ar.w]-It.edge(ar))},Number.POSITIVE_INFINITY),ve=v.node(oe);Ee!==Number.POSITIVE_INFINITY&&ve.borderType!==kt&&(mt[oe]=Math.max(mt[oe],Ee))},It.successors.bind(It)),qe.forEach(st,function(oe){mt[oe]=mt[$[oe]]}),mt}function Rs(v,N){return qe.minBy(qe.values(N),function($){var st=Number.NEGATIVE_INFINITY,vt=Number.POSITIVE_INFINITY;return qe.forIn($,function(mt,It){var kt=function(Vt,oe){return Vt.node(oe).width}(v,It)/2;st=Math.max(mt+kt,st),vt=Math.min(mt-kt,vt)}),st-vt})}function Uf(v,N){var $=qe.values(N),st=qe.min($),vt=qe.max($);qe.forEach(["u","d"],function(mt){qe.forEach(["l","r"],function(It){var kt,Vt=mt+It,oe=v[Vt];if(oe!==N){var Ee=qe.values(oe);(kt=It==="l"?st-qe.min(Ee):vt-qe.max(Ee))&&(v[Vt]=qe.mapValues(oe,function(ve){return ve+kt}))}})})}function Wf(v,N){return qe.mapValues(v.ul,function($,st){if(N)return v[N.toLowerCase()][st];var vt=qe.sortBy(qe.map(v,st));return(vt[1]+vt[2])/2})}var Yf=bl,Xf=function(v){(function(N){var $=_o.buildLayerMatrix(N),st=N.graph().ranksep,vt=0;qe.forEach($,function(mt){var It=qe.max(qe.map(mt,function(kt){return N.node(kt).height}));qe.forEach(mt,function(kt){N.node(kt).y=vt+It/2}),vt+=It+st})})(v=_o.asNonCompoundGraph(v)),qe.forEach(Yf(v),function(N,$){v.node($).x=N})},jc=_o.normalizeRanks,gd=_o.removeEmptyRanks,ko=_o,Vc=ss.Graph,Uu=function(v,N){var $=N&&N.debugTiming?ko.time:ko.notime;$("layout",function(){var st=$("  buildLayoutGraph",function(){return function(vt){var mt=new Vc({multigraph:!0,compound:!0}),It=gu(vt.graph());return mt.setGraph(qe.merge({},jf,gi(It,ks),qe.pick(It,oc))),qe.forEach(vt.nodes(),function(kt){var Vt=gu(vt.node(kt));mt.setNode(kt,qe.defaults(gi(Vt,El),ms)),mt.setParent(kt,vt.parent(kt))}),qe.forEach(vt.edges(),function(kt){var Vt=gu(vt.edge(kt));mt.setEdge(kt,qe.merge({},Bs,gi(Vt,Xo),qe.pick(Vt,oo)))}),mt}(v)});$("  runLayout",function(){(function(vt,mt){mt("    makeSpaceForEdgeLabels",function(){(function(It){var kt=It.graph();kt.ranksep/=2,qe.forEach(It.edges(),function(Vt){var oe=It.edge(Vt);oe.minlen*=2,oe.labelpos.toLowerCase()!=="c"&&(kt.rankdir==="TB"||kt.rankdir==="BT"?oe.width+=oe.labeloffset:oe.height+=oe.labeloffset)})})(vt)}),mt("    removeSelfEdges",function(){(function(It){qe.forEach(It.edges(),function(kt){if(kt.v===kt.w){var Vt=It.node(kt.v);Vt.selfEdges||(Vt.selfEdges=[]),Vt.selfEdges.push({e:kt,label:It.edge(kt)}),It.removeEdge(kt)}})})(vt)}),mt("    acyclic",function(){hl.run(vt)}),mt("    nestingGraph.run",function(){Nf.run(vt)}),mt("    rank",function(){dd(ko.asNonCompoundGraph(vt))}),mt("    injectEdgeLabelProxies",function(){(function(It){qe.forEach(It.edges(),function(kt){var Vt=It.edge(kt);if(Vt.width&&Vt.height){var oe=It.node(kt.v),Ee={rank:(It.node(kt.w).rank-oe.rank)/2+oe.rank,e:kt};ko.addDummyNode(It,"edge-proxy",Ee,"_ep")}})})(vt)}),mt("    removeEmptyRanks",function(){gd(vt)}),mt("    nestingGraph.cleanup",function(){Nf.cleanup(vt)}),mt("    normalizeRanks",function(){jc(vt)}),mt("    assignRankMinMax",function(){(function(It){var kt=0;qe.forEach(It.nodes(),function(Vt){var oe=It.node(Vt);oe.borderTop&&(oe.minRank=It.node(oe.borderTop).rank,oe.maxRank=It.node(oe.borderBottom).rank,kt=qe.max(kt,oe.maxRank))}),It.graph().maxRank=kt})(vt)}),mt("    removeEdgeLabelProxies",function(){(function(It){qe.forEach(It.nodes(),function(kt){var Vt=It.node(kt);Vt.dummy==="edge-proxy"&&(It.edge(Vt.e).labelRank=Vt.rank,It.removeNode(kt))})})(vt)}),mt("    normalize.run",function(){Xs.run(vt)}),mt("    parentDummyChains",function(){hd(vt)}),mt("    addBorderSegments",function(){vd(vt)}),mt("    order",function(){yl(vt)}),mt("    insertSelfEdges",function(){(function(It){var kt=ko.buildLayerMatrix(It);qe.forEach(kt,function(Vt){var oe=0;qe.forEach(Vt,function(Ee,ve){var Ge=It.node(Ee);Ge.order=ve+oe,qe.forEach(Ge.selfEdges,function(ar){ko.addDummyNode(It,"selfedge",{width:ar.label.width,height:ar.label.height,rank:Ge.rank,order:ve+ ++oe,e:ar.e,label:ar.label},"_se")}),delete Ge.selfEdges})})})(vt)}),mt("    adjustCoordinateSystem",function(){vl.adjust(vt)}),mt("    position",function(){Xf(vt)}),mt("    positionSelfEdges",function(){(function(It){qe.forEach(It.nodes(),function(kt){var Vt=It.node(kt);if(Vt.dummy==="selfedge"){var oe=It.node(Vt.e.v),Ee=oe.x+oe.width/2,ve=oe.y,Ge=Vt.x-Ee,ar=oe.height/2;It.setEdge(Vt.e,Vt.label),It.removeNode(kt),Vt.label.points=[{x:Ee+2*Ge/3,y:ve-ar},{x:Ee+5*Ge/6,y:ve-ar},{x:Ee+Ge,y:ve},{x:Ee+5*Ge/6,y:ve+ar},{x:Ee+2*Ge/3,y:ve+ar}],Vt.label.x=Vt.x,Vt.label.y=Vt.y}})})(vt)}),mt("    removeBorderNodes",function(){(function(It){qe.forEach(It.nodes(),function(kt){if(It.children(kt).length){var Vt=It.node(kt),oe=It.node(Vt.borderTop),Ee=It.node(Vt.borderBottom),ve=It.node(qe.last(Vt.borderLeft)),Ge=It.node(qe.last(Vt.borderRight));Vt.width=Math.abs(Ge.x-ve.x),Vt.height=Math.abs(Ee.y-oe.y),Vt.x=ve.x+Vt.width/2,Vt.y=oe.y+Vt.height/2}}),qe.forEach(It.nodes(),function(kt){It.node(kt).dummy==="border"&&It.removeNode(kt)})})(vt)}),mt("    normalize.undo",function(){Xs.undo(vt)}),mt("    fixupEdgeLabelCoords",function(){(function(It){qe.forEach(It.edges(),function(kt){var Vt=It.edge(kt);if(qe.has(Vt,"x"))switch(Vt.labelpos!=="l"&&Vt.labelpos!=="r"||(Vt.width-=Vt.labeloffset),Vt.labelpos){case"l":Vt.x-=Vt.width/2+Vt.labeloffset;break;case"r":Vt.x+=Vt.width/2+Vt.labeloffset}})})(vt)}),mt("    undoCoordinateSystem",function(){vl.undo(vt)}),mt("    translateGraph",function(){(function(It){var kt=Number.POSITIVE_INFINITY,Vt=0,oe=Number.POSITIVE_INFINITY,Ee=0,ve=It.graph(),Ge=ve.marginx||0,ar=ve.marginy||0;function Ur(dr){var pr=dr.x,gr=dr.y,yn=dr.width,Rn=dr.height;kt=Math.min(kt,pr-yn/2),Vt=Math.max(Vt,pr+yn/2),oe=Math.min(oe,gr-Rn/2),Ee=Math.max(Ee,gr+Rn/2)}qe.forEach(It.nodes(),function(dr){Ur(It.node(dr))}),qe.forEach(It.edges(),function(dr){var pr=It.edge(dr);qe.has(pr,"x")&&Ur(pr)}),kt-=Ge,oe-=ar,qe.forEach(It.nodes(),function(dr){var pr=It.node(dr);pr.x-=kt,pr.y-=oe}),qe.forEach(It.edges(),function(dr){var pr=It.edge(dr);qe.forEach(pr.points,function(gr){gr.x-=kt,gr.y-=oe}),qe.has(pr,"x")&&(pr.x-=kt),qe.has(pr,"y")&&(pr.y-=oe)}),ve.width=Vt-kt+Ge,ve.height=Ee-oe+ar})(vt)}),mt("    assignNodeIntersects",function(){(function(It){qe.forEach(It.edges(),function(kt){var Vt,oe,Ee=It.edge(kt),ve=It.node(kt.v),Ge=It.node(kt.w);Ee.points?(Vt=Ee.points[0],oe=Ee.points[Ee.points.length-1]):(Ee.points=[],Vt=Ge,oe=ve),Ee.points.unshift(ko.intersectRect(ve,Vt)),Ee.points.push(ko.intersectRect(Ge,oe))})})(vt)}),mt("    reversePoints",function(){(function(It){qe.forEach(It.edges(),function(kt){var Vt=It.edge(kt);Vt.reversed&&Vt.points.reverse()})})(vt)}),mt("    acyclic.undo",function(){hl.undo(vt)})})(st,$)}),$("  updateInputGraph",function(){(function(vt,mt){qe.forEach(vt.nodes(),function(It){var kt=vt.node(It),Vt=mt.node(It);kt&&(kt.x=Vt.x,kt.y=Vt.y,mt.children(It).length&&(kt.width=Vt.width,kt.height=Vt.height))}),qe.forEach(vt.edges(),function(It){var kt=vt.edge(It),Vt=mt.edge(It);kt.points=Vt.points,qe.has(Vt,"x")&&(kt.x=Vt.x,kt.y=Vt.y)}),vt.graph().width=mt.graph().width,vt.graph().height=mt.graph().height})(v,st)})})},ks=["nodesep","edgesep","ranksep","marginx","marginy"],jf={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},oc=["acyclicer","ranker","rankdir","align"],El=["width","height"],ms={width:0,height:0},Xo=["minlen","weight","width","height","labeloffset"],Bs={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},oo=["labelpos"];function gi(v,N){return qe.mapValues(qe.pick(v,N),Number)}function gu(v){var N={};return qe.forEach(v,function($,st){N[st.toLowerCase()]=$}),N}var Wu=ss.Graph,md={graphlib:ss,layout:Uu,debug:{debugOrdering:function(v){var N=_o.buildLayerMatrix(v),$=new Wu({compound:!0,multigraph:!0}).setGraph({});return qe.forEach(v.nodes(),function(st){$.setNode(st,{label:st}),$.setParent(st,"layer"+v.node(st).rank)}),qe.forEach(v.edges(),function(st){$.setEdge(st.v,st.w,{},st.name)}),qe.forEach(N,function(st,vt){var mt="layer"+vt;$.setNode(mt,{rank:"same"}),qe.reduce(st,function(It,kt){return $.setEdge(It,kt,{style:"invis"}),kt})}),$}},util:{time:_o.time,notime:_o.notime},version:"0.8.5"},sc=md.graphlib,Do=md.layout;class Vf{constructor(N){this.cardinality=1,this.include=p.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=L.NODE,this.name=N.name,this.attr=N.attr||{},this.inputs=N.inputs,this.path=N.path||[],this.width=N.width,this.height=N.height}}class Hf{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function yd(v){const N=new Hf;return v.nodes.map($=>new Vf($)).forEach($=>{N.nodes[$.name]=$,$.inputs.forEach(st=>{(function(vt,mt,It){It.name!==mt.name&&vt.edges.push(Object.assign(Object.assign({},It.attr),{v:It.name,w:mt.name}))})(N,$,st)})}),N}class Hs{constructor(N,$={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=p.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=L.META,this.path=[],this.name=N,this.metaGraph=Yu(N,b.META,$)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(N=>this.metaGraph.node(N))}leaves(){let N,$=[],st=[this];for(;st.length;){let vt=st.shift();vt.isGroupNode?(N=vt.metaGraph,N.nodes().forEach(mt=>st.push(N.node(mt)))):$.push(vt.name)}return $}}class Zf{constructor(N,$){this.v=N,this.w=$,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(N,$){this.baseEdgeList.push(N)}}function Hc(v,N={}){return new Hs(v,N)}function uc(v,N){return new Zf(v,N)}function Yu(v,N,$){const st=$||{},vt=new sc.Graph(st);return vt.setGraph({name:v,rankdir:st.rankdir,type:N,align:st.align}),vt}class Zc{constructor(N={}){this.graphOptions=N,this.index={},this.graphOptions.compound=!0,this.root=Hc(M,this.graphOptions),this.index[M]=this.root}getNodeMap(){return this.index}node(N){return this.index[N]}setNode(N,$){this.index[N]=$}getBridgeGraph(N){const $=this.index[N];if(!$)throw Error("Could not find node in hierarchy: "+N);if(!("metaGraph"in $))return null;const st=$;if(st.bridgeGraph)return st.bridgeGraph;const vt=Yu(P,b.BRIDGE,this.graphOptions);if(st.bridgeGraph=vt,!$.parentNode||!("metaGraph"in $.parentNode))return vt;const mt=$.parentNode;return[mt.metaGraph,this.getBridgeGraph(mt.name)].forEach(It=>{It.edges().filter(kt=>kt.v===N||kt.w===N).forEach(kt=>{const Vt=kt.w===N;It.edge(kt).baseEdgeList.forEach(oe=>{const[Ee,ve]=Vt?[oe.w,kt.v]:[oe.v,kt.w],Ge=this.getChildName(N,Ee),ar={v:Vt?ve:Ge,w:Vt?Ge:ve};let Ur=vt.edge(ar);Ur||(Ur=uc(ar.v,ar.w),Ur.inbound=Vt,vt.setEdge(ar.v,ar.w,Ur)),Ur.addBaseEdge(oe,this)})})}),vt}getChildName(N,$){let st=this.index[$];for(;st;){if(st.parentNode&&st.parentNode.name===N)return st.name;st=st.parentNode}throw Error("Could not find immediate child for descendant: "+$)}getPredecessors(N){const $=this.index[N];if(!$)throw Error("Could not find node with name: "+N);return this.getOneWayEdges($,!0)}getSuccessors(N){const $=this.index[N];if(!$)throw Error("Could not find node with name: "+N);return this.getOneWayEdges($,!1)}getOneWayEdges(N,$){const st=[];if(!N.parentNode||!N.parentNode.isGroupNode)return st;const vt=N.parentNode,mt=vt.metaGraph,It=this.getBridgeGraph(vt.name);return Kc(mt,N,$,st),Kc(It,N,$,st),st}}function Zs(v,N){const{rankDirection:$,align:st}=N,vt=new Zc({rankdir:$,align:st});return function(mt,It){Object.keys(It.nodes).forEach(kt=>{const Vt=It.nodes[kt],oe=Vt.path;let Ee=mt.root;Ee.depth=Math.max(oe.length,Ee.depth);for(let ve=0;ve<oe.length&&(Ee.depth=Math.max(Ee.depth,oe.length-ve),Ee.cardinality+=Vt.cardinality,ve!==oe.length-1);ve++){const Ge=oe[ve];let ar=mt.node(Ge);ar||(ar=Hc(Ge,mt.graphOptions),ar.path=Vt.path.slice(0,ve+1),ar.parentNode=Ee,mt.setNode(Ge,ar),Ee.metaGraph.setNode(Ge,ar)),Ee=ar}mt.setNode(Vt.name,Vt),Vt.parentNode=Ee,Ee.metaGraph.setNode(Vt.name,Vt)})}(vt,v),function(mt,It){const kt=mt.getNodeMap();let Vt=[],oe=[];const Ee=(ve,Ge)=>{let ar=0;for(;ve;)Ge[ar++]=ve.name,ve=ve.parentNode;return ar-1};It.edges.forEach(ve=>{Vt=[],oe=[];let Ge=Ee(It.nodes[ve.v],Vt),ar=Ee(It.nodes[ve.w],oe);for(;Vt[Ge]===oe[ar];)if(Ge--,ar--,Ge<0||ar<0)throw Error("No difference found between ancestor paths.");const Ur=kt[Vt[Ge+1]],dr=Vt[Ge],pr=oe[ar];let gr=Ur.metaGraph.edge(dr,pr);gr||(gr=uc(dr,pr),Ur.metaGraph.setEdge(dr,pr,gr)),gr.addBaseEdge(ve,mt)})}(vt,v),vt}function Kc(v,N,$,st){($?v.inEdges(N.name):v.outEdges(N.name)).forEach(vt=>{const mt=v.edge(vt);st.push(mt)})}class lc{constructor(N){this.hierarchy=N,this.index={},this.hasSubHierarchy={},this.root=new Se(this.hierarchy.root,this.hierarchy.graphOptions),this.index[N.root.name]=this.root,this.buildSubHierarchy(N.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(N){if(N in this.hasSubHierarchy)return;this.hasSubHierarchy[N]=!0;const $=this.index[N];if($.node.type!==L.META)return;const st=$,vt=st.node.metaGraph,mt=st.coreGraph;vt.nodes().forEach(Ee=>{const ve=this.getOrCreateRenderNodeByName(Ee);mt.setNode(Ee,ve)}),vt.edges().forEach(Ee=>{const ve=vt.edge(Ee),Ge=new Lt(ve);mt.setEdge(Ee.v,Ee.w,Ge)});const It=st.node.parentNode;if(!It)return;const kt=this.getRenderNodeByName(It.name),Vt=(Ee,...ve)=>ve.concat([Ee?"IN":"OUT"]).join("~~"),oe=this.hierarchy.getBridgeGraph(N);oe.edges().forEach(Ee=>{const ve=oe.edge(Ee),Ge=!!vt.node(Ee.w),[ar,Ur]=Ge?[Ee.w,Ee.v]:[Ee.v,Ee.w],dr=qn=>{const $n=Ge?{v:qn,w:N}:{v:N,w:qn};return kt.coreGraph.edge($n)};let pr=dr(Ur);pr||(pr=dr(Vt(Ge,Ur,It.name)));const gr=Vt(Ge,N),yn=Vt(Ge,Ur,N);let Rn=mt.node(yn);if(!Rn){let qn=mt.node(gr);if(!qn){const aa={name:gr,type:L.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:p.UNSPECIFIED,inbound:Ge,attr:{}};qn=new wl(aa),this.index[gr]=qn,mt.setNode(gr,qn)}const $n={name:yn,type:L.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:p.UNSPECIFIED,inbound:Ge,attr:{}};Rn=new wl($n),this.index[yn]=Rn,mt.setNode(yn,Rn),mt.setParent(yn,gr),qn.node.cardinality++}const Cn=new Lt(ve);Cn.adjoiningMetaEdge=pr,Ge?mt.setEdge(yn,ar,Cn):mt.setEdge(ar,yn,Cn)})}getOrCreateRenderNodeByName(N){if(!N)return null;if(N in this.index)return this.index[N];const $=this.getNodeByName(N);return $?(this.index[N]=$.isGroupNode?new Se($,this.hierarchy.graphOptions):new wl($),this.index[N]):null}getRenderNodeByName(N){return this.index[N]}getNodeByName(N){return this.hierarchy.node(N)}}class wl{constructor(N){this.node=N,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=N.width||0,this.height=N.height||0,this.displayName=N.name,this.attr=N.attr}}class Lt{constructor(N){this.metaEdge=N,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Se extends wl{constructor(N,$){super(N);const st=N.metaGraph.graph();$.compound=!0,this.coreGraph=Yu(st.name,b.CORE,$)}}function We(v,N){v.node.isGroupNode&&function($,st){const vt=R(st);$.coreGraph.nodes().map(mt=>$.coreGraph.node(mt)).forEach(mt=>{var It,kt,Vt,oe,Ee,ve;const{height:Ge,width:ar}=mt;switch(mt.node.type){case L.NODE:Object.assign(mt,vt.nodeSize.node),mt.height=Ge||vt.nodeSize.node.height,mt.width=ar||vt.nodeSize.node.width;break;case L.BRIDGE:Object.assign(mt,vt.nodeSize.bridge);break;case L.META:mt.expanded?We(mt,st):(Object.assign(mt,vt.nodeSize.meta),mt.height=vt.nodeSize.meta.height,mt.width=vt.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+mt.node.type)}if(!mt.expanded){const Ur=mt.attr;(function(dr,pr=!1){if(dr.coreBox.width=dr.width,dr.coreBox.height=dr.height,!pr){const gr=`${dr.displayName}`.length,yn=3;dr.width=Math.max(dr.coreBox.width,gr*yn)}})(mt,st&&(mt.node.type===0&&!!(!((kt=(It=st==null?void 0:st.nodeSize)===null||It===void 0?void 0:It.meta)===null||kt===void 0)&&kt.width)||mt.node.type===1&&(!!(!((oe=(Vt=st==null?void 0:st.nodeSize)===null||Vt===void 0?void 0:Vt.node)===null||oe===void 0)&&oe.width)||!!Ur.width)||mt.node.type===2&&!!(!((ve=(Ee=st==null?void 0:st.nodeSize)===null||Ee===void 0?void 0:Ee.bridge)===null||ve===void 0)&&ve.width)))}})}(v,N),v.node.type===L.META&&function($,st){const vt=R(st),mt=vt.subScene.meta;Object.assign($,mt);const{nodeSep:It,rankSep:kt,edgeSep:Vt,align:oe}=vt.graph.meta,Ee={nodesep:It,ranksep:kt,edgesep:Vt,align:oe};Object.assign($.coreBox,function(ar,Ur){const{ranksep:dr,nodesep:pr,edgesep:gr,align:yn}=Ur;Object.assign(ar.graph(),{ranksep:dr,nodesep:pr,edgesep:gr,align:yn});const Rn=[];if(ar.nodes().forEach(ga=>{ar.node(ga).node.type!==L.BRIDGE&&Rn.push(ga)}),!Rn.length)return{width:0,height:0};Do(ar);let Cn=1/0,qn=1/0,$n=-1/0,aa=-1/0;return Rn.forEach(ga=>{const da=ar.node(ga),Ii=.5*da.width,ya=da.x-Ii,Ji=da.x+Ii;Cn=ya<Cn?ya:Cn,$n=Ji>$n?Ji:$n;const mi=.5*da.height,Ua=da.y-mi,_i=da.y+mi;qn=Ua<qn?Ua:qn,aa=_i>aa?_i:aa}),ar.edges().forEach(ga=>{const da=ar.edge(ga),Ii=ar.node(da.metaEdge.v),ya=ar.node(da.metaEdge.w);if(da.points.length===3&&function(Ua){let _i=Rr(Ua[0],Ua[1]);for(let to=1;to<Ua.length-1;to++){const Co=Rr(Ua[to],Ua[to+1]);if(Math.abs(Co-_i)>1)return!1;_i=Co}return!0}(da.points)){if(Ii!=null){const Ua=Ii.expanded?Ii.x:qr(Ii);da.points[0].x=Ua}if(ya!=null){const Ua=ya.expanded?ya.x:qr(ya);da.points[2].x=Ua}da.points=[da.points[0],da.points[1]]}const Ji=da.points[da.points.length-2];ya!=null&&(da.points[da.points.length-1]=Nr(Ji,ya));const mi=da.points[1];Ii!=null&&(da.points[0]=Nr(mi,Ii)),da.points.forEach(Ua=>{Cn=Ua.x<Cn?Ua.x:Cn,$n=Ua.x>$n?Ua.x:$n,qn=Ua.y<qn?Ua.y:qn,aa=Ua.y>aa?Ua.y:aa})}),ar.nodes().forEach(ga=>{const da=ar.node(ga);da.x-=Cn,da.y-=qn}),ar.edges().forEach(ga=>{ar.edge(ga).points.forEach(da=>{da.x-=Cn,da.y-=qn})}),{width:$n-Cn,height:aa-qn}}($.coreGraph,Ee));let ve=0;$.coreGraph.nodeCount()>0&&ve++;const Ge=ve<=1?0:ve;$.coreBox.width+=Ge+Ge,$.coreBox.height=mt.labelHeight+$.coreBox.height,$.width=$.coreBox.width+mt.paddingLeft+mt.paddingRight,$.height=$.paddingTop+$.coreBox.height+$.paddingBottom}(v,N)}function Rr(v,N){const $=N.x-v.x,st=N.y-v.y;return 180*Math.atan(st/$)/Math.PI}function qr(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function Nr(v,N){const $=N.expanded?N.x:qr(N),st=N.y,vt=v.x-$,mt=v.y-st;let It,kt,Vt=N.expanded?N.width:N.coreBox.width,oe=N.expanded?N.height:N.coreBox.height;return Math.abs(mt)*Vt/2>Math.abs(vt)*oe/2?(mt<0&&(oe=-oe),It=mt===0?0:oe/2*vt/mt,kt=oe/2):(vt<0&&(Vt=-Vt),It=Vt/2,kt=vt===0?0:Vt/2*mt/vt),{x:$+It,y:st+kt}}function zr(v,N,$){var st,vt,mt,It;const kt=v.nodes.filter((ve,Ge,ar)=>ar.findIndex(Ur=>Ur.id===ve.id)!==Ge).map(ve=>ve.id);if(kt.length)throw new Error(`Duplicated ids found: ${kt.join(", ")}`);const Vt=function(ve){const Ge={nodes:[]},ar=ve.compound,Ur=Object.keys(ar||{}),dr=new Map,pr=(yn,Rn=[])=>{if(dr.has(yn))return dr.get(yn);for(let Cn=0;Cn<Ur.length;Cn++){let qn=Ur[Cn];if(ar&&ar[qn].indexOf(yn)!==-1)return Rn.unshift(qn),pr(qn,Rn)}return Rn.length===0&&dr.set(yn,Rn),Rn},gr=yn=>ve.edges.filter(Rn=>Rn.w===yn).map(Rn=>({name:Rn.v}));return ve.nodes.forEach(yn=>{const Rn=yn.id,Cn=[...pr(Rn),Rn];let qn=gr(Rn);Ge.nodes.push({name:Rn,path:Cn,inputs:qn,width:yn.width,height:yn.height,attr:Object.assign({},yn)})}),Ge}(v),oe=function(ve,Ge){const ar=(dr,pr)=>{for(let gr of pr.values())if(gr.includes(dr))return!0;return!1},Ur=(dr,pr=[])=>{if(Object.keys(dr).length===0)return[...new Set(pr)];const gr=new Map(Object.keys(dr).map(Rn=>[Rn,dr[Rn]])),yn={};for(let[Rn,Cn]of gr)ar(Rn,gr)?yn[Rn]=Cn:pr=pr.concat(Rn,Cn);return Ur(yn,pr)};return Ur(ve).filter(dr=>Ge.includes(dr))}(v.compound||{},(N==null?void 0:N.expanded)||[]),Ee=function(ve,Ge){return function(ar){return new lc(ar)}(Zs(yd(ve),Ge))}(Vt,{rankDirection:((vt=(st=$==null?void 0:$.graph)===null||st===void 0?void 0:st.meta)===null||vt===void 0?void 0:vt.rankDir)||(N==null?void 0:N.rankDirection)||g.graph.meta.rankDir,align:((It=(mt=$==null?void 0:$.graph)===null||mt===void 0?void 0:mt.meta)===null||It===void 0?void 0:It.align)||g.graph.meta.align});return function(ve,Ge){Ge.forEach(ar=>{const Ur=ve.getRenderInfoNodes().find(gr=>gr.displayName===ar);let dr=Ur&&Ur.node&&Ur.node.name||"";const pr=ve.getRenderNodeByName(dr);if(!pr)throw new Error(`No nodes found: ${dr}`);pr.expanded=!0,ve.buildSubHierarchy(dr)})}(Ee,oe),We(Ee.root,$),xn(Ee.root)}function hn(v,N=!1){const $=JSON.parse(JSON.stringify(v)),st={nodes:[$],edges:[...$.edges]};return $.nodes.forEach(function vt(mt){(mt.type===0||mt.type===1)&&st.nodes.push(mt),mt.type===0&&(st.edges=st.edges.concat(mt.edges)),Array.isArray(mt.nodes)&&mt.nodes.forEach(vt)}),N&&st.nodes.forEach(vt=>{const mt=st.nodes.find(It=>It.id===vt.parentNodeName);if(mt){const It=mt.x-mt.width/2+mt.paddingLeft,kt=mt.y-mt.height/2+mt.labelHeight+mt.paddingTop;mt.id!==M&&(vt.x+=It,vt.y+=kt),vt.type===0&&vt.edges.forEach(Vt=>{Vt.points.forEach(oe=>{oe.x+=vt.x-vt.width/2+vt.paddingLeft,oe.y+=vt.y-vt.height/2+vt.labelHeight+vt.paddingTop})})}}),st}function gn(v,N,$,st){var vt,mt;let It=[];const kt=((vt=$.find(ve=>ve.id===v))===null||vt===void 0?void 0:vt.path)||[],Vt=((mt=$.find(ve=>ve.id===N))===null||mt===void 0?void 0:mt.path)||[],oe=[M,...kt].slice(0,kt.length).reverse(),Ee=[M,...Vt].slice(0,Vt.length);return oe.forEach(ve=>{const Ge=$.find(ar=>ar.id===ve);It=It.concat(Ge.edges.filter(ar=>ar.baseEdgeList.some(Ur=>Ur.v===((st==null?void 0:st.v)||v)&&Ur.w===((st==null?void 0:st.w)||N))))}),Ee.filter(ve=>!oe.includes(ve)).forEach(ve=>{const Ge=$.find(ar=>ar.id===ve);It=It.concat(Ge.edges.filter(ar=>ar.baseEdgeList.some(Ur=>Ur.v===((st==null?void 0:st.v)||v)&&Ur.w===((st==null?void 0:st.w)||N))))}),It}function xn(v){const N=v.coreGraph.nodes().map(st=>v.coreGraph.node(st));return Object.assign(Object.assign({},mn(v)),{expanded:v.expanded,nodes:v.expanded?($=N,$.map(st=>st.node.type===L.META?xn(st):mn(st))):[],edges:v.expanded?_n(v):[]});var $}function mn(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function _n(v){return v.coreGraph.edges().map(N=>({renderInfoEdge:v.coreGraph.edge(N),edge:N})).filter(({renderInfoEdge:N})=>N.metaEdge).map(({edge:N,renderInfoEdge:$})=>{const st=function(vt,mt){const It=mt.points.map(kt=>Object.assign({},kt));if(mt.adjoiningMetaEdge){const kt=mt.adjoiningMetaEdge.points,Vt=mt.metaEdge.inbound,oe=Vt?kt[kt.length-1]:kt[0],Ee=It[Vt?0:It.length-1],ve=vt.x-vt.width/2,Ge=vt.y-vt.height/2,ar=oe.x-ve,Ur=oe.y-Ge,dr=-vt.paddingLeft,pr=-(vt.paddingTop+vt.labelHeight);Ee.x=ar+dr,Ee.y=Ur+pr}return It}(v,$);return{adjoiningEdge:$.adjoiningMetaEdge?{w:$.adjoiningMetaEdge.metaEdge.w,v:$.adjoiningMetaEdge.metaEdge.v}:null,inbound:$.metaEdge.inbound,w:N.w,v:N.v,points:st,weight:$.weight,baseEdgeList:$.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},533852:function(Ne,G,_){(function(g,R){Ne.exports=R(_(727484))})(this,function(g){"use strict";function R(P){return P&&typeof P=="object"&&"default"in P?P:{default:P}}var w=R(g),M={name:"zh-cn",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(P,L){return L==="W"?P+"\u5468":P+"\u65E5"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206",LLLL:"YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524D",s:"\u51E0\u79D2",m:"1 \u5206\u949F",mm:"%d \u5206\u949F",h:"1 \u5C0F\u65F6",hh:"%d \u5C0F\u65F6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4E2A\u6708",MM:"%d \u4E2A\u6708",y:"1 \u5E74",yy:"%d \u5E74"},meridiem:function(P,L){var p=100*P+L;return p<600?"\u51CC\u6668":p<900?"\u65E9\u4E0A":p<1100?"\u4E0A\u5348":p<1300?"\u4E2D\u5348":p<1800?"\u4E0B\u5348":"\u665A\u4E0A"}};return w.default.locale(M,null,!0),M})},414144:function(Ne,G){var _,g,R;(function(w,M){if(!0)g=[G,Ne],_=M,R=typeof _=="function"?_.apply(G,g):_,R!==void 0&&(Ne.exports=R);else var P})(this,function(w,M){"use strict";var P={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function L(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function p(x){try{delete window[x]}catch(y){window[x]=void 0}}function b(x){var y=document.getElementById(x);y&&document.getElementsByTagName("head")[0].removeChild(y)}function S(x){var y=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],A=x,E=y.timeout||P.timeout,D=y.jsonpCallback||P.jsonpCallback,B=void 0;return new Promise(function(m,f){var W=y.jsonpCallbackFunction||L(),X=D+"_"+W;window[W]=function(U){m({ok:!0,json:function(){return Promise.resolve(U)}}),B&&clearTimeout(B),b(X),p(W)},A+=A.indexOf("?")===-1?"?":"&";var z=document.createElement("script");z.setAttribute("src",""+A+D+"="+W),y.charset&&z.setAttribute("charset",y.charset),y.nonce&&z.setAttribute("nonce",y.nonce),y.referrerPolicy&&z.setAttribute("referrerPolicy",y.referrerPolicy),z.id=X,document.getElementsByTagName("head")[0].appendChild(z),B=setTimeout(function(){f(new Error("JSONP request to "+x+" timed out")),p(W),b(X),window[W]=function(){p(W)}},E),z.onerror=function(){f(new Error("JSONP request to "+x+" failed")),p(W),b(X),B&&clearTimeout(B)}})}M.exports=S})},417648:function(Ne){"use strict";var G="Function.prototype.bind called on incompatible ",_=Array.prototype.slice,g=Object.prototype.toString,R="[object Function]";Ne.exports=function(M){var P=this;if(typeof P!="function"||g.call(P)!==R)throw new TypeError(G+P);for(var L=_.call(arguments,1),p,b=function(){if(this instanceof p){var E=P.apply(this,L.concat(_.call(arguments)));return Object(E)===E?E:this}else return P.apply(M,L.concat(_.call(arguments)))},S=Math.max(0,P.length-L.length),x=[],y=0;y<S;y++)x.push("$"+y);if(p=Function("binder","return function ("+x.join(",")+"){ return binder.apply(this,arguments); }")(b),P.prototype){var A=function(){};A.prototype=P.prototype,p.prototype=new A,A.prototype=null}return p}},158612:function(Ne,G,_){"use strict";var g=_(417648);Ne.exports=Function.prototype.bind||g},340210:function(Ne,G,_){"use strict";var g,R=SyntaxError,w=Function,M=TypeError,P=function(yt){try{return w('"use strict"; return ('+yt+").constructor;")()}catch(ft){}},L=Object.getOwnPropertyDescriptor;if(L)try{L({},"")}catch(yt){L=null}var p=function(){throw new M},b=L?function(){try{return arguments.callee,p}catch(yt){try{return L(arguments,"callee").get}catch(ft){return p}}}():p,S=_(241405)(),x=_(728185)(),y=Object.getPrototypeOf||(x?function(yt){return yt.__proto__}:null),A={},E=typeof Uint8Array=="undefined"||!y?g:y(Uint8Array),D={"%AggregateError%":typeof AggregateError=="undefined"?g:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?g:ArrayBuffer,"%ArrayIteratorPrototype%":S&&y?y([][Symbol.iterator]()):g,"%AsyncFromSyncIteratorPrototype%":g,"%AsyncFunction%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":typeof Atomics=="undefined"?g:Atomics,"%BigInt%":typeof BigInt=="undefined"?g:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?g:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?g:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?g:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?g:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?g:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?g:FinalizationRegistry,"%Function%":w,"%GeneratorFunction%":A,"%Int8Array%":typeof Int8Array=="undefined"?g:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?g:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?g:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&y?y(y([][Symbol.iterator]())):g,"%JSON%":typeof JSON=="object"?JSON:g,"%Map%":typeof Map=="undefined"?g:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!S||!y?g:y(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?g:Promise,"%Proxy%":typeof Proxy=="undefined"?g:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?g:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?g:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!S||!y?g:y(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?g:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&y?y(""[Symbol.iterator]()):g,"%Symbol%":S?Symbol:g,"%SyntaxError%":R,"%ThrowTypeError%":b,"%TypedArray%":E,"%TypeError%":M,"%Uint8Array%":typeof Uint8Array=="undefined"?g:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?g:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?g:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?g:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?g:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?g:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?g:WeakSet};if(y)try{null.error}catch(yt){var B=y(y(yt));D["%Error.prototype%"]=B}var m=function yt(ft){var Bt;if(ft==="%AsyncFunction%")Bt=P("async function () {}");else if(ft==="%GeneratorFunction%")Bt=P("function* () {}");else if(ft==="%AsyncGeneratorFunction%")Bt=P("async function* () {}");else if(ft==="%AsyncGenerator%"){var St=yt("%AsyncGeneratorFunction%");St&&(Bt=St.prototype)}else if(ft==="%AsyncIteratorPrototype%"){var Et=yt("%AsyncGenerator%");Et&&y&&(Bt=y(Et.prototype))}return D[ft]=Bt,Bt},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},W=_(158612),X=_(117642),z=W.call(Function.call,Array.prototype.concat),U=W.call(Function.apply,Array.prototype.splice),j=W.call(Function.call,String.prototype.replace),V=W.call(Function.call,String.prototype.slice),J=W.call(Function.call,RegExp.prototype.exec),Q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,et=/\\(\\)?/g,ut=function(ft){var Bt=V(ft,0,1),St=V(ft,-1);if(Bt==="%"&&St!=="%")throw new R("invalid intrinsic syntax, expected closing `%`");if(St==="%"&&Bt!=="%")throw new R("invalid intrinsic syntax, expected opening `%`");var Et=[];return j(ft,Q,function(Z,q,bt,Ct){Et[Et.length]=bt?j(Ct,et,"$1"):q||Z}),Et},it=function(ft,Bt){var St=ft,Et;if(X(f,St)&&(Et=f[St],St="%"+Et[0]+"%"),X(D,St)){var Z=D[St];if(Z===A&&(Z=m(St)),typeof Z=="undefined"&&!Bt)throw new M("intrinsic "+ft+" exists, but is not available. Please file an issue!");return{alias:Et,name:St,value:Z}}throw new R("intrinsic "+ft+" does not exist!")};Ne.exports=function(ft,Bt){if(typeof ft!="string"||ft.length===0)throw new M("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Bt!="boolean")throw new M('"allowMissing" argument must be a boolean');if(J(/^%?[^%]*%?$/,ft)===null)throw new R("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var St=ut(ft),Et=St.length>0?St[0]:"",Z=it("%"+Et+"%",Bt),q=Z.name,bt=Z.value,Ct=!1,nt=Z.alias;nt&&(Et=nt[0],U(St,z([0,1],nt)));for(var ht=1,At=!0;ht<St.length;ht+=1){var Ot=St[ht],xt=V(Ot,0,1),Dt=V(Ot,-1);if((xt==='"'||xt==="'"||xt==="`"||Dt==='"'||Dt==="'"||Dt==="`")&&xt!==Dt)throw new R("property names with quotes must have matching quotes");if((Ot==="constructor"||!At)&&(Ct=!0),Et+="."+Ot,q="%"+Et+"%",X(D,q))bt=D[q];else if(bt!=null){if(!(Ot in bt)){if(!Bt)throw new M("base intrinsic for "+ft+" exists, but the property is not available.");return}if(L&&ht+1>=St.length){var Yt=L(bt,Ot);At=!!Yt,At&&"get"in Yt&&!("originalValue"in Yt.get)?bt=Yt.get:bt=bt[Ot]}else At=X(bt,Ot),bt=bt[Ot];At&&!Ct&&(D[q]=bt)}}return bt}},73633:function(Ne,G,_){"use strict";_.r(G),_.d(G,{ARRAY_TYPE:function(){return R},EPSILON:function(){return g},RANDOM:function(){return w},equals:function(){return p},setMatrixArrayType:function(){return M},toRadian:function(){return L}});var g=1e-6,R=typeof Float32Array!="undefined"?Float32Array:Array,w=Math.random;function M(b){R=b}var P=Math.PI/180;function L(b){return b*P}function p(b,S){return Math.abs(b-S)<=g*Math.max(1,Math.abs(b),Math.abs(S))}Math.hypot||(Math.hypot=function(){for(var b=0,S=arguments.length;S--;)b+=arguments[S]*arguments[S];return Math.sqrt(b)})},858204:function(Ne,G,_){"use strict";_.r(G),_.d(G,{glMatrix:function(){return p},mat2:function(){return g},mat2d:function(){return R},mat3:function(){return Sr},mat4:function(){return w},quat:function(){return P},quat2:function(){return L},vec2:function(){return Ro},vec3:function(){return Ar},vec4:function(){return M}});var g={};_.r(g),_.d(g,{LDU:function(){return Q},add:function(){return et},adjoint:function(){return m},clone:function(){return S},copy:function(){return x},create:function(){return b},determinant:function(){return f},equals:function(){return yt},exactEquals:function(){return it},frob:function(){return J},fromRotation:function(){return U},fromScaling:function(){return j},fromValues:function(){return A},identity:function(){return y},invert:function(){return B},mul:function(){return St},multiply:function(){return W},multiplyScalar:function(){return ft},multiplyScalarAndAdd:function(){return Bt},rotate:function(){return X},scale:function(){return z},set:function(){return E},str:function(){return V},sub:function(){return Et},subtract:function(){return ut},transpose:function(){return D}});var R={};_.r(R),_.d(R,{add:function(){return te},clone:function(){return q},copy:function(){return bt},create:function(){return Z},determinant:function(){return Ot},equals:function(){return Tt},exactEquals:function(){return xe},frob:function(){return Ut},fromRotation:function(){return re},fromScaling:function(){return Pt},fromTranslation:function(){return ee},fromValues:function(){return nt},identity:function(){return Ct},invert:function(){return At},mul:function(){return Ae},multiply:function(){return xt},multiplyScalar:function(){return ge},multiplyScalarAndAdd:function(){return Kt},rotate:function(){return Dt},scale:function(){return Yt},set:function(){return ht},str:function(){return ce},sub:function(){return br},subtract:function(){return ye},translate:function(){return ie}});var w={};_.r(w),_.d(w,{add:function(){return he},adjoint:function(){return Ze},clone:function(){return Pr},copy:function(){return on},create:function(){return Mr},determinant:function(){return Er},equals:function(){return nn},exactEquals:function(){return Tr},frob:function(){return Te},fromQuat:function(){return dt},fromQuat2:function(){return Zt},fromRotation:function(){return ln},fromRotationTranslation:function(){return je},fromRotationTranslationScale:function(){return Nt},fromRotationTranslationScaleOrigin:function(){return Ht},fromScaling:function(){return wn},fromTranslation:function(){return Zr},fromValues:function(){return Hr},fromXRotation:function(){return bn},fromYRotation:function(){return Pn},fromZRotation:function(){return at},frustum:function(){return Gt},getRotation:function(){return be},getScaling:function(){return Mt},getTranslation:function(){return $t},identity:function(){return In},invert:function(){return vr},lookAt:function(){return zt},mul:function(){return He},multiply:function(){return ke},multiplyScalar:function(){return cr},multiplyScalarAndAdd:function(){return Ve},ortho:function(){return H},orthoNO:function(){return I},orthoZO:function(){return gt},perspective:function(){return ot},perspectiveFromFieldOfView:function(){return C},perspectiveNO:function(){return tt},perspectiveZO:function(){return k},rotate:function(){return rn},rotateX:function(){return ir},rotateY:function(){return Lr},rotateZ:function(){return dn},scale:function(){return jr},set:function(){return Sn},str:function(){return qt},sub:function(){return ur},subtract:function(){return Ue},targetTo:function(){return Rt},translate:function(){return Xe},transpose:function(){return Nn}});var M={};_.r(M),_.d(M,{add:function(){return pe},ceil:function(){return tn},clone:function(){return se},copy:function(){return fe},create:function(){return Cr},cross:function(){return Ri},dist:function(){return oi},distance:function(){return oa},div:function(){return mo},divide:function(){return fr},dot:function(){return Ni},equals:function(){return Pi},exactEquals:function(){return go},floor:function(){return Ln},forEach:function(){return ue},fromValues:function(){return Xt},inverse:function(){return ri},len:function(){return Hn},length:function(){return xi},lerp:function(){return pa},max:function(){return Xn},min:function(){return sn},mul:function(){return ro},multiply:function(){return nr},negate:function(){return Ra},normalize:function(){return Ci},random:function(){return ki},round:function(){return an},scale:function(){return Bn},scaleAndAdd:function(){return Jn},set:function(){return Me},sqrDist:function(){return Ti},sqrLen:function(){return Jt},squaredDistance:function(){return sa},squaredLength:function(){return Na},str:function(){return Bi},sub:function(){return Wi},subtract:function(){return Re},transformMat4:function(){return eo},transformQuat:function(){return za},zero:function(){return Ei}});var P={};_.r(P),_.d(P,{add:function(){return ni},calculateW:function(){return Un},clone:function(){return ka},conjugate:function(){return Da},copy:function(){return va},create:function(){return Pe},dot:function(){return Ai},equals:function(){return Sa},exactEquals:function(){return zi},exp:function(){return ra},fromEuler:function(){return si},fromMat3:function(){return xa},fromValues:function(){return _a},getAngle:function(){return xr},getAxisAngle:function(){return Ir},identity:function(){return rr},invert:function(){return Ga},len:function(){return Io},length:function(){return Oo},lerp:function(){return Yi},ln:function(){return na},mul:function(){return fi},multiply:function(){return Kr},normalize:function(){return vi},pow:function(){return Ya},random:function(){return Qn},rotateX:function(){return un},rotateY:function(){return Mn},rotateZ:function(){return Kn},rotationTo:function(){return Xi},scale:function(){return Fi},set:function(){return ci},setAxes:function(){return Mi},setAxisAngle:function(){return Or},slerp:function(){return ua},sqlerp:function(){return co},sqrLen:function(){return Ba},squaredLength:function(){return Li},str:function(){return Qa}});var L={};_.r(L),_.d(L,{add:function(){return ao},clone:function(){return pi},conjugate:function(){return nu},copy:function(){return fs},create:function(){return Lo},dot:function(){return Es},equals:function(){return So},exactEquals:function(){return Vi},fromMat4:function(){return Wo},fromRotation:function(){return Uo},fromRotationTranslation:function(){return ts},fromRotationTranslationValues:function(){return Go},fromTranslation:function(){return ji},fromValues:function(){return fo},getDual:function(){return tr},getReal:function(){return Be},getTranslation:function(){return cn},identity:function(){return ha},invert:function(){return ws},len:function(){return os},length:function(){return Ko},lerp:function(){return As},mul:function(){return hs},multiply:function(){return Yo},normalize:function(){return xu},rotateAroundAxis:function(){return Oi},rotateByQuatAppend:function(){return wo},rotateByQuatPrepend:function(){return ds},rotateX:function(){return Ia},rotateY:function(){return di},rotateZ:function(){return no},scale:function(){return qo},set:function(){return Wt},setDual:function(){return Vr},setReal:function(){return mr},sqrLen:function(){return No},squaredLength:function(){return vs},str:function(){return Eu},translate:function(){return Fn}});var p=_(73633);function b(){var h=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function S(h){var Y=new p.ARRAY_TYPE(4);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y}function x(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h}function y(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function A(h,Y,wt,Ft){var Qt=new p.ARRAY_TYPE(4);return Qt[0]=h,Qt[1]=Y,Qt[2]=wt,Qt[3]=Ft,Qt}function E(h,Y,wt,Ft,Qt){return h[0]=Y,h[1]=wt,h[2]=Ft,h[3]=Qt,h}function D(h,Y){if(h===Y){var wt=Y[1];h[1]=Y[2],h[2]=wt}else h[0]=Y[0],h[1]=Y[2],h[2]=Y[1],h[3]=Y[3];return h}function B(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[3],de=wt*le-Qt*Ft;return de?(de=1/de,h[0]=le*de,h[1]=-Ft*de,h[2]=-Qt*de,h[3]=wt*de,h):null}function m(h,Y){var wt=Y[0];return h[0]=Y[3],h[1]=-Y[1],h[2]=-Y[2],h[3]=wt,h}function f(h){return h[0]*h[3]-h[2]*h[1]}function W(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=wt[0],Le=wt[1],Ye=wt[2],or=wt[3];return h[0]=Ft*_e+le*Le,h[1]=Qt*_e+de*Le,h[2]=Ft*Ye+le*or,h[3]=Qt*Ye+de*or,h}function X(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Math.sin(wt),Le=Math.cos(wt);return h[0]=Ft*Le+le*_e,h[1]=Qt*Le+de*_e,h[2]=Ft*-_e+le*Le,h[3]=Qt*-_e+de*Le,h}function z(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=wt[0],Le=wt[1];return h[0]=Ft*_e,h[1]=Qt*_e,h[2]=le*Le,h[3]=de*Le,h}function U(h,Y){var wt=Math.sin(Y),Ft=Math.cos(Y);return h[0]=Ft,h[1]=wt,h[2]=-wt,h[3]=Ft,h}function j(h,Y){return h[0]=Y[0],h[1]=0,h[2]=0,h[3]=Y[1],h}function V(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function J(h){return Math.hypot(h[0],h[1],h[2],h[3])}function Q(h,Y,wt,Ft){return h[2]=Ft[2]/Ft[0],wt[0]=Ft[0],wt[1]=Ft[1],wt[3]=Ft[3]-h[2]*wt[1],[h,Y,wt]}function et(h,Y,wt){return h[0]=Y[0]+wt[0],h[1]=Y[1]+wt[1],h[2]=Y[2]+wt[2],h[3]=Y[3]+wt[3],h}function ut(h,Y,wt){return h[0]=Y[0]-wt[0],h[1]=Y[1]-wt[1],h[2]=Y[2]-wt[2],h[3]=Y[3]-wt[3],h}function it(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]}function yt(h,Y){var wt=h[0],Ft=h[1],Qt=h[2],le=h[3],de=Y[0],_e=Y[1],Le=Y[2],Ye=Y[3];return Math.abs(wt-de)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(de))&&Math.abs(Ft-_e)<=p.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(_e))&&Math.abs(Qt-Le)<=p.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(Le))&&Math.abs(le-Ye)<=p.EPSILON*Math.max(1,Math.abs(le),Math.abs(Ye))}function ft(h,Y,wt){return h[0]=Y[0]*wt,h[1]=Y[1]*wt,h[2]=Y[2]*wt,h[3]=Y[3]*wt,h}function Bt(h,Y,wt,Ft){return h[0]=Y[0]+wt[0]*Ft,h[1]=Y[1]+wt[1]*Ft,h[2]=Y[2]+wt[2]*Ft,h[3]=Y[3]+wt[3]*Ft,h}var St=W,Et=ut;function Z(){var h=new p.ARRAY_TYPE(6);return p.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function q(h){var Y=new p.ARRAY_TYPE(6);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y[4]=h[4],Y[5]=h[5],Y}function bt(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[4]=Y[4],h[5]=Y[5],h}function Ct(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function nt(h,Y,wt,Ft,Qt,le){var de=new p.ARRAY_TYPE(6);return de[0]=h,de[1]=Y,de[2]=wt,de[3]=Ft,de[4]=Qt,de[5]=le,de}function ht(h,Y,wt,Ft,Qt,le,de){return h[0]=Y,h[1]=wt,h[2]=Ft,h[3]=Qt,h[4]=le,h[5]=de,h}function At(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[3],de=Y[4],_e=Y[5],Le=wt*le-Ft*Qt;return Le?(Le=1/Le,h[0]=le*Le,h[1]=-Ft*Le,h[2]=-Qt*Le,h[3]=wt*Le,h[4]=(Qt*_e-le*de)*Le,h[5]=(Ft*de-wt*_e)*Le,h):null}function Ot(h){return h[0]*h[3]-h[1]*h[2]}function xt(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Y[4],Le=Y[5],Ye=wt[0],or=wt[1],Br=wt[2],Gr=wt[3],Fr=wt[4],pn=wt[5];return h[0]=Ft*Ye+le*or,h[1]=Qt*Ye+de*or,h[2]=Ft*Br+le*Gr,h[3]=Qt*Br+de*Gr,h[4]=Ft*Fr+le*pn+_e,h[5]=Qt*Fr+de*pn+Le,h}function Dt(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Y[4],Le=Y[5],Ye=Math.sin(wt),or=Math.cos(wt);return h[0]=Ft*or+le*Ye,h[1]=Qt*or+de*Ye,h[2]=Ft*-Ye+le*or,h[3]=Qt*-Ye+de*or,h[4]=_e,h[5]=Le,h}function Yt(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Y[4],Le=Y[5],Ye=wt[0],or=wt[1];return h[0]=Ft*Ye,h[1]=Qt*Ye,h[2]=le*or,h[3]=de*or,h[4]=_e,h[5]=Le,h}function ie(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Y[4],Le=Y[5],Ye=wt[0],or=wt[1];return h[0]=Ft,h[1]=Qt,h[2]=le,h[3]=de,h[4]=Ft*Ye+le*or+_e,h[5]=Qt*Ye+de*or+Le,h}function re(h,Y){var wt=Math.sin(Y),Ft=Math.cos(Y);return h[0]=Ft,h[1]=wt,h[2]=-wt,h[3]=Ft,h[4]=0,h[5]=0,h}function Pt(h,Y){return h[0]=Y[0],h[1]=0,h[2]=0,h[3]=Y[1],h[4]=0,h[5]=0,h}function ee(h,Y){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=Y[0],h[5]=Y[1],h}function ce(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function Ut(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function te(h,Y,wt){return h[0]=Y[0]+wt[0],h[1]=Y[1]+wt[1],h[2]=Y[2]+wt[2],h[3]=Y[3]+wt[3],h[4]=Y[4]+wt[4],h[5]=Y[5]+wt[5],h}function ye(h,Y,wt){return h[0]=Y[0]-wt[0],h[1]=Y[1]-wt[1],h[2]=Y[2]-wt[2],h[3]=Y[3]-wt[3],h[4]=Y[4]-wt[4],h[5]=Y[5]-wt[5],h}function ge(h,Y,wt){return h[0]=Y[0]*wt,h[1]=Y[1]*wt,h[2]=Y[2]*wt,h[3]=Y[3]*wt,h[4]=Y[4]*wt,h[5]=Y[5]*wt,h}function Kt(h,Y,wt,Ft){return h[0]=Y[0]+wt[0]*Ft,h[1]=Y[1]+wt[1]*Ft,h[2]=Y[2]+wt[2]*Ft,h[3]=Y[3]+wt[3]*Ft,h[4]=Y[4]+wt[4]*Ft,h[5]=Y[5]+wt[5]*Ft,h}function xe(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]&&h[4]===Y[4]&&h[5]===Y[5]}function Tt(h,Y){var wt=h[0],Ft=h[1],Qt=h[2],le=h[3],de=h[4],_e=h[5],Le=Y[0],Ye=Y[1],or=Y[2],Br=Y[3],Gr=Y[4],Fr=Y[5];return Math.abs(wt-Le)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Le))&&Math.abs(Ft-Ye)<=p.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(Ye))&&Math.abs(Qt-or)<=p.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(or))&&Math.abs(le-Br)<=p.EPSILON*Math.max(1,Math.abs(le),Math.abs(Br))&&Math.abs(de-Gr)<=p.EPSILON*Math.max(1,Math.abs(de),Math.abs(Gr))&&Math.abs(_e-Fr)<=p.EPSILON*Math.max(1,Math.abs(_e),Math.abs(Fr))}var Ae=xt,br=ye,Sr=_(935600);function Mr(){var h=new p.ARRAY_TYPE(16);return p.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function Pr(h){var Y=new p.ARRAY_TYPE(16);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y[4]=h[4],Y[5]=h[5],Y[6]=h[6],Y[7]=h[7],Y[8]=h[8],Y[9]=h[9],Y[10]=h[10],Y[11]=h[11],Y[12]=h[12],Y[13]=h[13],Y[14]=h[14],Y[15]=h[15],Y}function on(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[4]=Y[4],h[5]=Y[5],h[6]=Y[6],h[7]=Y[7],h[8]=Y[8],h[9]=Y[9],h[10]=Y[10],h[11]=Y[11],h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15],h}function Hr(h,Y,wt,Ft,Qt,le,de,_e,Le,Ye,or,Br,Gr,Fr,pn,Dn){var Qr=new p.ARRAY_TYPE(16);return Qr[0]=h,Qr[1]=Y,Qr[2]=wt,Qr[3]=Ft,Qr[4]=Qt,Qr[5]=le,Qr[6]=de,Qr[7]=_e,Qr[8]=Le,Qr[9]=Ye,Qr[10]=or,Qr[11]=Br,Qr[12]=Gr,Qr[13]=Fr,Qr[14]=pn,Qr[15]=Dn,Qr}function Sn(h,Y,wt,Ft,Qt,le,de,_e,Le,Ye,or,Br,Gr,Fr,pn,Dn,Qr){return h[0]=Y,h[1]=wt,h[2]=Ft,h[3]=Qt,h[4]=le,h[5]=de,h[6]=_e,h[7]=Le,h[8]=Ye,h[9]=or,h[10]=Br,h[11]=Gr,h[12]=Fr,h[13]=pn,h[14]=Dn,h[15]=Qr,h}function In(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Nn(h,Y){if(h===Y){var wt=Y[1],Ft=Y[2],Qt=Y[3],le=Y[6],de=Y[7],_e=Y[11];h[1]=Y[4],h[2]=Y[8],h[3]=Y[12],h[4]=wt,h[6]=Y[9],h[7]=Y[13],h[8]=Ft,h[9]=le,h[11]=Y[14],h[12]=Qt,h[13]=de,h[14]=_e}else h[0]=Y[0],h[1]=Y[4],h[2]=Y[8],h[3]=Y[12],h[4]=Y[1],h[5]=Y[5],h[6]=Y[9],h[7]=Y[13],h[8]=Y[2],h[9]=Y[6],h[10]=Y[10],h[11]=Y[14],h[12]=Y[3],h[13]=Y[7],h[14]=Y[11],h[15]=Y[15];return h}function vr(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[3],de=Y[4],_e=Y[5],Le=Y[6],Ye=Y[7],or=Y[8],Br=Y[9],Gr=Y[10],Fr=Y[11],pn=Y[12],Dn=Y[13],Qr=Y[14],Vn=Y[15],Ta=wt*_e-Ft*de,Oa=wt*Le-Qt*de,Ea=wt*Ye-le*de,ca=Ft*Le-Qt*_e,ma=Ft*Ye-le*_e,io=Qt*Ye-le*Le,$i=or*Dn-Br*pn,Hi=or*Qr-Gr*pn,Qi=or*Vn-Fr*pn,qi=Br*Qr-Gr*Dn,ho=Br*Vn-Fr*Dn,Mo=Gr*Vn-Fr*Qr,Xa=Ta*Mo-Oa*ho+Ea*qi+ca*Qi-ma*Hi+io*$i;return Xa?(Xa=1/Xa,h[0]=(_e*Mo-Le*ho+Ye*qi)*Xa,h[1]=(Qt*ho-Ft*Mo-le*qi)*Xa,h[2]=(Dn*io-Qr*ma+Vn*ca)*Xa,h[3]=(Gr*ma-Br*io-Fr*ca)*Xa,h[4]=(Le*Qi-de*Mo-Ye*Hi)*Xa,h[5]=(wt*Mo-Qt*Qi+le*Hi)*Xa,h[6]=(Qr*Ea-pn*io-Vn*Oa)*Xa,h[7]=(or*io-Gr*Ea+Fr*Oa)*Xa,h[8]=(de*ho-_e*Qi+Ye*$i)*Xa,h[9]=(Ft*Qi-wt*ho-le*$i)*Xa,h[10]=(pn*ma-Dn*Ea+Vn*Ta)*Xa,h[11]=(Br*Ea-or*ma-Fr*Ta)*Xa,h[12]=(_e*Hi-de*qi-Le*$i)*Xa,h[13]=(wt*qi-Ft*Hi+Qt*$i)*Xa,h[14]=(Dn*Oa-pn*ca-Qr*Ta)*Xa,h[15]=(or*ca-Br*Oa+Gr*Ta)*Xa,h):null}function Ze(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[3],de=Y[4],_e=Y[5],Le=Y[6],Ye=Y[7],or=Y[8],Br=Y[9],Gr=Y[10],Fr=Y[11],pn=Y[12],Dn=Y[13],Qr=Y[14],Vn=Y[15];return h[0]=_e*(Gr*Vn-Fr*Qr)-Br*(Le*Vn-Ye*Qr)+Dn*(Le*Fr-Ye*Gr),h[1]=-(Ft*(Gr*Vn-Fr*Qr)-Br*(Qt*Vn-le*Qr)+Dn*(Qt*Fr-le*Gr)),h[2]=Ft*(Le*Vn-Ye*Qr)-_e*(Qt*Vn-le*Qr)+Dn*(Qt*Ye-le*Le),h[3]=-(Ft*(Le*Fr-Ye*Gr)-_e*(Qt*Fr-le*Gr)+Br*(Qt*Ye-le*Le)),h[4]=-(de*(Gr*Vn-Fr*Qr)-or*(Le*Vn-Ye*Qr)+pn*(Le*Fr-Ye*Gr)),h[5]=wt*(Gr*Vn-Fr*Qr)-or*(Qt*Vn-le*Qr)+pn*(Qt*Fr-le*Gr),h[6]=-(wt*(Le*Vn-Ye*Qr)-de*(Qt*Vn-le*Qr)+pn*(Qt*Ye-le*Le)),h[7]=wt*(Le*Fr-Ye*Gr)-de*(Qt*Fr-le*Gr)+or*(Qt*Ye-le*Le),h[8]=de*(Br*Vn-Fr*Dn)-or*(_e*Vn-Ye*Dn)+pn*(_e*Fr-Ye*Br),h[9]=-(wt*(Br*Vn-Fr*Dn)-or*(Ft*Vn-le*Dn)+pn*(Ft*Fr-le*Br)),h[10]=wt*(_e*Vn-Ye*Dn)-de*(Ft*Vn-le*Dn)+pn*(Ft*Ye-le*_e),h[11]=-(wt*(_e*Fr-Ye*Br)-de*(Ft*Fr-le*Br)+or*(Ft*Ye-le*_e)),h[12]=-(de*(Br*Qr-Gr*Dn)-or*(_e*Qr-Le*Dn)+pn*(_e*Gr-Le*Br)),h[13]=wt*(Br*Qr-Gr*Dn)-or*(Ft*Qr-Qt*Dn)+pn*(Ft*Gr-Qt*Br),h[14]=-(wt*(_e*Qr-Le*Dn)-de*(Ft*Qr-Qt*Dn)+pn*(Ft*Le-Qt*_e)),h[15]=wt*(_e*Gr-Le*Br)-de*(Ft*Gr-Qt*Br)+or*(Ft*Le-Qt*_e),h}function Er(h){var Y=h[0],wt=h[1],Ft=h[2],Qt=h[3],le=h[4],de=h[5],_e=h[6],Le=h[7],Ye=h[8],or=h[9],Br=h[10],Gr=h[11],Fr=h[12],pn=h[13],Dn=h[14],Qr=h[15],Vn=Y*de-wt*le,Ta=Y*_e-Ft*le,Oa=Y*Le-Qt*le,Ea=wt*_e-Ft*de,ca=wt*Le-Qt*de,ma=Ft*Le-Qt*_e,io=Ye*pn-or*Fr,$i=Ye*Dn-Br*Fr,Hi=Ye*Qr-Gr*Fr,Qi=or*Dn-Br*pn,qi=or*Qr-Gr*pn,ho=Br*Qr-Gr*Dn;return Vn*ho-Ta*qi+Oa*Qi+Ea*Hi-ca*$i+ma*io}function ke(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Y[4],Le=Y[5],Ye=Y[6],or=Y[7],Br=Y[8],Gr=Y[9],Fr=Y[10],pn=Y[11],Dn=Y[12],Qr=Y[13],Vn=Y[14],Ta=Y[15],Oa=wt[0],Ea=wt[1],ca=wt[2],ma=wt[3];return h[0]=Oa*Ft+Ea*_e+ca*Br+ma*Dn,h[1]=Oa*Qt+Ea*Le+ca*Gr+ma*Qr,h[2]=Oa*le+Ea*Ye+ca*Fr+ma*Vn,h[3]=Oa*de+Ea*or+ca*pn+ma*Ta,Oa=wt[4],Ea=wt[5],ca=wt[6],ma=wt[7],h[4]=Oa*Ft+Ea*_e+ca*Br+ma*Dn,h[5]=Oa*Qt+Ea*Le+ca*Gr+ma*Qr,h[6]=Oa*le+Ea*Ye+ca*Fr+ma*Vn,h[7]=Oa*de+Ea*or+ca*pn+ma*Ta,Oa=wt[8],Ea=wt[9],ca=wt[10],ma=wt[11],h[8]=Oa*Ft+Ea*_e+ca*Br+ma*Dn,h[9]=Oa*Qt+Ea*Le+ca*Gr+ma*Qr,h[10]=Oa*le+Ea*Ye+ca*Fr+ma*Vn,h[11]=Oa*de+Ea*or+ca*pn+ma*Ta,Oa=wt[12],Ea=wt[13],ca=wt[14],ma=wt[15],h[12]=Oa*Ft+Ea*_e+ca*Br+ma*Dn,h[13]=Oa*Qt+Ea*Le+ca*Gr+ma*Qr,h[14]=Oa*le+Ea*Ye+ca*Fr+ma*Vn,h[15]=Oa*de+Ea*or+ca*pn+ma*Ta,h}function Xe(h,Y,wt){var Ft=wt[0],Qt=wt[1],le=wt[2],de,_e,Le,Ye,or,Br,Gr,Fr,pn,Dn,Qr,Vn;return Y===h?(h[12]=Y[0]*Ft+Y[4]*Qt+Y[8]*le+Y[12],h[13]=Y[1]*Ft+Y[5]*Qt+Y[9]*le+Y[13],h[14]=Y[2]*Ft+Y[6]*Qt+Y[10]*le+Y[14],h[15]=Y[3]*Ft+Y[7]*Qt+Y[11]*le+Y[15]):(de=Y[0],_e=Y[1],Le=Y[2],Ye=Y[3],or=Y[4],Br=Y[5],Gr=Y[6],Fr=Y[7],pn=Y[8],Dn=Y[9],Qr=Y[10],Vn=Y[11],h[0]=de,h[1]=_e,h[2]=Le,h[3]=Ye,h[4]=or,h[5]=Br,h[6]=Gr,h[7]=Fr,h[8]=pn,h[9]=Dn,h[10]=Qr,h[11]=Vn,h[12]=de*Ft+or*Qt+pn*le+Y[12],h[13]=_e*Ft+Br*Qt+Dn*le+Y[13],h[14]=Le*Ft+Gr*Qt+Qr*le+Y[14],h[15]=Ye*Ft+Fr*Qt+Vn*le+Y[15]),h}function jr(h,Y,wt){var Ft=wt[0],Qt=wt[1],le=wt[2];return h[0]=Y[0]*Ft,h[1]=Y[1]*Ft,h[2]=Y[2]*Ft,h[3]=Y[3]*Ft,h[4]=Y[4]*Qt,h[5]=Y[5]*Qt,h[6]=Y[6]*Qt,h[7]=Y[7]*Qt,h[8]=Y[8]*le,h[9]=Y[9]*le,h[10]=Y[10]*le,h[11]=Y[11]*le,h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15],h}function rn(h,Y,wt,Ft){var Qt=Ft[0],le=Ft[1],de=Ft[2],_e=Math.hypot(Qt,le,de),Le,Ye,or,Br,Gr,Fr,pn,Dn,Qr,Vn,Ta,Oa,Ea,ca,ma,io,$i,Hi,Qi,qi,ho,Mo,Xa,hi;return _e<p.EPSILON?null:(_e=1/_e,Qt*=_e,le*=_e,de*=_e,Le=Math.sin(wt),Ye=Math.cos(wt),or=1-Ye,Br=Y[0],Gr=Y[1],Fr=Y[2],pn=Y[3],Dn=Y[4],Qr=Y[5],Vn=Y[6],Ta=Y[7],Oa=Y[8],Ea=Y[9],ca=Y[10],ma=Y[11],io=Qt*Qt*or+Ye,$i=le*Qt*or+de*Le,Hi=de*Qt*or-le*Le,Qi=Qt*le*or-de*Le,qi=le*le*or+Ye,ho=de*le*or+Qt*Le,Mo=Qt*de*or+le*Le,Xa=le*de*or-Qt*Le,hi=de*de*or+Ye,h[0]=Br*io+Dn*$i+Oa*Hi,h[1]=Gr*io+Qr*$i+Ea*Hi,h[2]=Fr*io+Vn*$i+ca*Hi,h[3]=pn*io+Ta*$i+ma*Hi,h[4]=Br*Qi+Dn*qi+Oa*ho,h[5]=Gr*Qi+Qr*qi+Ea*ho,h[6]=Fr*Qi+Vn*qi+ca*ho,h[7]=pn*Qi+Ta*qi+ma*ho,h[8]=Br*Mo+Dn*Xa+Oa*hi,h[9]=Gr*Mo+Qr*Xa+Ea*hi,h[10]=Fr*Mo+Vn*Xa+ca*hi,h[11]=pn*Mo+Ta*Xa+ma*hi,Y!==h&&(h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15]),h)}function ir(h,Y,wt){var Ft=Math.sin(wt),Qt=Math.cos(wt),le=Y[4],de=Y[5],_e=Y[6],Le=Y[7],Ye=Y[8],or=Y[9],Br=Y[10],Gr=Y[11];return Y!==h&&(h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15]),h[4]=le*Qt+Ye*Ft,h[5]=de*Qt+or*Ft,h[6]=_e*Qt+Br*Ft,h[7]=Le*Qt+Gr*Ft,h[8]=Ye*Qt-le*Ft,h[9]=or*Qt-de*Ft,h[10]=Br*Qt-_e*Ft,h[11]=Gr*Qt-Le*Ft,h}function Lr(h,Y,wt){var Ft=Math.sin(wt),Qt=Math.cos(wt),le=Y[0],de=Y[1],_e=Y[2],Le=Y[3],Ye=Y[8],or=Y[9],Br=Y[10],Gr=Y[11];return Y!==h&&(h[4]=Y[4],h[5]=Y[5],h[6]=Y[6],h[7]=Y[7],h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15]),h[0]=le*Qt-Ye*Ft,h[1]=de*Qt-or*Ft,h[2]=_e*Qt-Br*Ft,h[3]=Le*Qt-Gr*Ft,h[8]=le*Ft+Ye*Qt,h[9]=de*Ft+or*Qt,h[10]=_e*Ft+Br*Qt,h[11]=Le*Ft+Gr*Qt,h}function dn(h,Y,wt){var Ft=Math.sin(wt),Qt=Math.cos(wt),le=Y[0],de=Y[1],_e=Y[2],Le=Y[3],Ye=Y[4],or=Y[5],Br=Y[6],Gr=Y[7];return Y!==h&&(h[8]=Y[8],h[9]=Y[9],h[10]=Y[10],h[11]=Y[11],h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15]),h[0]=le*Qt+Ye*Ft,h[1]=de*Qt+or*Ft,h[2]=_e*Qt+Br*Ft,h[3]=Le*Qt+Gr*Ft,h[4]=Ye*Qt-le*Ft,h[5]=or*Qt-de*Ft,h[6]=Br*Qt-_e*Ft,h[7]=Gr*Qt-Le*Ft,h}function Zr(h,Y){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=Y[0],h[13]=Y[1],h[14]=Y[2],h[15]=1,h}function wn(h,Y){return h[0]=Y[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Y[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Y[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ln(h,Y,wt){var Ft=wt[0],Qt=wt[1],le=wt[2],de=Math.hypot(Ft,Qt,le),_e,Le,Ye;return de<p.EPSILON?null:(de=1/de,Ft*=de,Qt*=de,le*=de,_e=Math.sin(Y),Le=Math.cos(Y),Ye=1-Le,h[0]=Ft*Ft*Ye+Le,h[1]=Qt*Ft*Ye+le*_e,h[2]=le*Ft*Ye-Qt*_e,h[3]=0,h[4]=Ft*Qt*Ye-le*_e,h[5]=Qt*Qt*Ye+Le,h[6]=le*Qt*Ye+Ft*_e,h[7]=0,h[8]=Ft*le*Ye+Qt*_e,h[9]=Qt*le*Ye-Ft*_e,h[10]=le*le*Ye+Le,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function bn(h,Y){var wt=Math.sin(Y),Ft=Math.cos(Y);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Ft,h[6]=wt,h[7]=0,h[8]=0,h[9]=-wt,h[10]=Ft,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Pn(h,Y){var wt=Math.sin(Y),Ft=Math.cos(Y);return h[0]=Ft,h[1]=0,h[2]=-wt,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=wt,h[9]=0,h[10]=Ft,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function at(h,Y){var wt=Math.sin(Y),Ft=Math.cos(Y);return h[0]=Ft,h[1]=wt,h[2]=0,h[3]=0,h[4]=-wt,h[5]=Ft,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function je(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Ft+Ft,Le=Qt+Qt,Ye=le+le,or=Ft*_e,Br=Ft*Le,Gr=Ft*Ye,Fr=Qt*Le,pn=Qt*Ye,Dn=le*Ye,Qr=de*_e,Vn=de*Le,Ta=de*Ye;return h[0]=1-(Fr+Dn),h[1]=Br+Ta,h[2]=Gr-Vn,h[3]=0,h[4]=Br-Ta,h[5]=1-(or+Dn),h[6]=pn+Qr,h[7]=0,h[8]=Gr+Vn,h[9]=pn-Qr,h[10]=1-(or+Fr),h[11]=0,h[12]=wt[0],h[13]=wt[1],h[14]=wt[2],h[15]=1,h}function Zt(h,Y){var wt=new p.ARRAY_TYPE(3),Ft=-Y[0],Qt=-Y[1],le=-Y[2],de=Y[3],_e=Y[4],Le=Y[5],Ye=Y[6],or=Y[7],Br=Ft*Ft+Qt*Qt+le*le+de*de;return Br>0?(wt[0]=(_e*de+or*Ft+Le*le-Ye*Qt)*2/Br,wt[1]=(Le*de+or*Qt+Ye*Ft-_e*le)*2/Br,wt[2]=(Ye*de+or*le+_e*Qt-Le*Ft)*2/Br):(wt[0]=(_e*de+or*Ft+Le*le-Ye*Qt)*2,wt[1]=(Le*de+or*Qt+Ye*Ft-_e*le)*2,wt[2]=(Ye*de+or*le+_e*Qt-Le*Ft)*2),je(h,Y,wt),h}function $t(h,Y){return h[0]=Y[12],h[1]=Y[13],h[2]=Y[14],h}function Mt(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[4],de=Y[5],_e=Y[6],Le=Y[8],Ye=Y[9],or=Y[10];return h[0]=Math.hypot(wt,Ft,Qt),h[1]=Math.hypot(le,de,_e),h[2]=Math.hypot(Le,Ye,or),h}function be(h,Y){var wt=new p.ARRAY_TYPE(3);Mt(wt,Y);var Ft=1/wt[0],Qt=1/wt[1],le=1/wt[2],de=Y[0]*Ft,_e=Y[1]*Qt,Le=Y[2]*le,Ye=Y[4]*Ft,or=Y[5]*Qt,Br=Y[6]*le,Gr=Y[8]*Ft,Fr=Y[9]*Qt,pn=Y[10]*le,Dn=de+or+pn,Qr=0;return Dn>0?(Qr=Math.sqrt(Dn+1)*2,h[3]=.25*Qr,h[0]=(Br-Fr)/Qr,h[1]=(Gr-Le)/Qr,h[2]=(_e-Ye)/Qr):de>or&&de>pn?(Qr=Math.sqrt(1+de-or-pn)*2,h[3]=(Br-Fr)/Qr,h[0]=.25*Qr,h[1]=(_e+Ye)/Qr,h[2]=(Gr+Le)/Qr):or>pn?(Qr=Math.sqrt(1+or-de-pn)*2,h[3]=(Gr-Le)/Qr,h[0]=(_e+Ye)/Qr,h[1]=.25*Qr,h[2]=(Br+Fr)/Qr):(Qr=Math.sqrt(1+pn-de-or)*2,h[3]=(_e-Ye)/Qr,h[0]=(Gr+Le)/Qr,h[1]=(Br+Fr)/Qr,h[2]=.25*Qr),h}function Nt(h,Y,wt,Ft){var Qt=Y[0],le=Y[1],de=Y[2],_e=Y[3],Le=Qt+Qt,Ye=le+le,or=de+de,Br=Qt*Le,Gr=Qt*Ye,Fr=Qt*or,pn=le*Ye,Dn=le*or,Qr=de*or,Vn=_e*Le,Ta=_e*Ye,Oa=_e*or,Ea=Ft[0],ca=Ft[1],ma=Ft[2];return h[0]=(1-(pn+Qr))*Ea,h[1]=(Gr+Oa)*Ea,h[2]=(Fr-Ta)*Ea,h[3]=0,h[4]=(Gr-Oa)*ca,h[5]=(1-(Br+Qr))*ca,h[6]=(Dn+Vn)*ca,h[7]=0,h[8]=(Fr+Ta)*ma,h[9]=(Dn-Vn)*ma,h[10]=(1-(Br+pn))*ma,h[11]=0,h[12]=wt[0],h[13]=wt[1],h[14]=wt[2],h[15]=1,h}function Ht(h,Y,wt,Ft,Qt){var le=Y[0],de=Y[1],_e=Y[2],Le=Y[3],Ye=le+le,or=de+de,Br=_e+_e,Gr=le*Ye,Fr=le*or,pn=le*Br,Dn=de*or,Qr=de*Br,Vn=_e*Br,Ta=Le*Ye,Oa=Le*or,Ea=Le*Br,ca=Ft[0],ma=Ft[1],io=Ft[2],$i=Qt[0],Hi=Qt[1],Qi=Qt[2],qi=(1-(Dn+Vn))*ca,ho=(Fr+Ea)*ca,Mo=(pn-Oa)*ca,Xa=(Fr-Ea)*ma,hi=(1-(Gr+Vn))*ma,Os=(Qr+Ta)*ma,ps=(pn+Oa)*io,es=(Qr-Ta)*io,au=(1-(Gr+Dn))*io;return h[0]=qi,h[1]=ho,h[2]=Mo,h[3]=0,h[4]=Xa,h[5]=hi,h[6]=Os,h[7]=0,h[8]=ps,h[9]=es,h[10]=au,h[11]=0,h[12]=wt[0]+$i-(qi*$i+Xa*Hi+ps*Qi),h[13]=wt[1]+Hi-(ho*$i+hi*Hi+es*Qi),h[14]=wt[2]+Qi-(Mo*$i+Os*Hi+au*Qi),h[15]=1,h}function dt(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[3],de=wt+wt,_e=Ft+Ft,Le=Qt+Qt,Ye=wt*de,or=Ft*de,Br=Ft*_e,Gr=Qt*de,Fr=Qt*_e,pn=Qt*Le,Dn=le*de,Qr=le*_e,Vn=le*Le;return h[0]=1-Br-pn,h[1]=or+Vn,h[2]=Gr-Qr,h[3]=0,h[4]=or-Vn,h[5]=1-Ye-pn,h[6]=Fr+Dn,h[7]=0,h[8]=Gr+Qr,h[9]=Fr-Dn,h[10]=1-Ye-Br,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Gt(h,Y,wt,Ft,Qt,le,de){var _e=1/(wt-Y),Le=1/(Qt-Ft),Ye=1/(le-de);return h[0]=le*2*_e,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=le*2*Le,h[6]=0,h[7]=0,h[8]=(wt+Y)*_e,h[9]=(Qt+Ft)*Le,h[10]=(de+le)*Ye,h[11]=-1,h[12]=0,h[13]=0,h[14]=de*le*2*Ye,h[15]=0,h}function tt(h,Y,wt,Ft,Qt){var le=1/Math.tan(Y/2),de;return h[0]=le/wt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=le,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Qt!=null&&Qt!==1/0?(de=1/(Ft-Qt),h[10]=(Qt+Ft)*de,h[14]=2*Qt*Ft*de):(h[10]=-1,h[14]=-2*Ft),h}var ot=tt;function k(h,Y,wt,Ft,Qt){var le=1/Math.tan(Y/2),de;return h[0]=le/wt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=le,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Qt!=null&&Qt!==1/0?(de=1/(Ft-Qt),h[10]=Qt*de,h[14]=Qt*Ft*de):(h[10]=-1,h[14]=-Ft),h}function C(h,Y,wt,Ft){var Qt=Math.tan(Y.upDegrees*Math.PI/180),le=Math.tan(Y.downDegrees*Math.PI/180),de=Math.tan(Y.leftDegrees*Math.PI/180),_e=Math.tan(Y.rightDegrees*Math.PI/180),Le=2/(de+_e),Ye=2/(Qt+le);return h[0]=Le,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Ye,h[6]=0,h[7]=0,h[8]=-((de-_e)*Le*.5),h[9]=(Qt-le)*Ye*.5,h[10]=Ft/(wt-Ft),h[11]=-1,h[12]=0,h[13]=0,h[14]=Ft*wt/(wt-Ft),h[15]=0,h}function I(h,Y,wt,Ft,Qt,le,de){var _e=1/(Y-wt),Le=1/(Ft-Qt),Ye=1/(le-de);return h[0]=-2*_e,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Le,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Ye,h[11]=0,h[12]=(Y+wt)*_e,h[13]=(Qt+Ft)*Le,h[14]=(de+le)*Ye,h[15]=1,h}var H=I;function gt(h,Y,wt,Ft,Qt,le,de){var _e=1/(Y-wt),Le=1/(Ft-Qt),Ye=1/(le-de);return h[0]=-2*_e,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Le,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Ye,h[11]=0,h[12]=(Y+wt)*_e,h[13]=(Qt+Ft)*Le,h[14]=le*Ye,h[15]=1,h}function zt(h,Y,wt,Ft){var Qt,le,de,_e,Le,Ye,or,Br,Gr,Fr,pn=Y[0],Dn=Y[1],Qr=Y[2],Vn=Ft[0],Ta=Ft[1],Oa=Ft[2],Ea=wt[0],ca=wt[1],ma=wt[2];return Math.abs(pn-Ea)<p.EPSILON&&Math.abs(Dn-ca)<p.EPSILON&&Math.abs(Qr-ma)<p.EPSILON?In(h):(or=pn-Ea,Br=Dn-ca,Gr=Qr-ma,Fr=1/Math.hypot(or,Br,Gr),or*=Fr,Br*=Fr,Gr*=Fr,Qt=Ta*Gr-Oa*Br,le=Oa*or-Vn*Gr,de=Vn*Br-Ta*or,Fr=Math.hypot(Qt,le,de),Fr?(Fr=1/Fr,Qt*=Fr,le*=Fr,de*=Fr):(Qt=0,le=0,de=0),_e=Br*de-Gr*le,Le=Gr*Qt-or*de,Ye=or*le-Br*Qt,Fr=Math.hypot(_e,Le,Ye),Fr?(Fr=1/Fr,_e*=Fr,Le*=Fr,Ye*=Fr):(_e=0,Le=0,Ye=0),h[0]=Qt,h[1]=_e,h[2]=or,h[3]=0,h[4]=le,h[5]=Le,h[6]=Br,h[7]=0,h[8]=de,h[9]=Ye,h[10]=Gr,h[11]=0,h[12]=-(Qt*pn+le*Dn+de*Qr),h[13]=-(_e*pn+Le*Dn+Ye*Qr),h[14]=-(or*pn+Br*Dn+Gr*Qr),h[15]=1,h)}function Rt(h,Y,wt,Ft){var Qt=Y[0],le=Y[1],de=Y[2],_e=Ft[0],Le=Ft[1],Ye=Ft[2],or=Qt-wt[0],Br=le-wt[1],Gr=de-wt[2],Fr=or*or+Br*Br+Gr*Gr;Fr>0&&(Fr=1/Math.sqrt(Fr),or*=Fr,Br*=Fr,Gr*=Fr);var pn=Le*Gr-Ye*Br,Dn=Ye*or-_e*Gr,Qr=_e*Br-Le*or;return Fr=pn*pn+Dn*Dn+Qr*Qr,Fr>0&&(Fr=1/Math.sqrt(Fr),pn*=Fr,Dn*=Fr,Qr*=Fr),h[0]=pn,h[1]=Dn,h[2]=Qr,h[3]=0,h[4]=Br*Qr-Gr*Dn,h[5]=Gr*pn-or*Qr,h[6]=or*Dn-Br*pn,h[7]=0,h[8]=or,h[9]=Br,h[10]=Gr,h[11]=0,h[12]=Qt,h[13]=le,h[14]=de,h[15]=1,h}function qt(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function Te(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function he(h,Y,wt){return h[0]=Y[0]+wt[0],h[1]=Y[1]+wt[1],h[2]=Y[2]+wt[2],h[3]=Y[3]+wt[3],h[4]=Y[4]+wt[4],h[5]=Y[5]+wt[5],h[6]=Y[6]+wt[6],h[7]=Y[7]+wt[7],h[8]=Y[8]+wt[8],h[9]=Y[9]+wt[9],h[10]=Y[10]+wt[10],h[11]=Y[11]+wt[11],h[12]=Y[12]+wt[12],h[13]=Y[13]+wt[13],h[14]=Y[14]+wt[14],h[15]=Y[15]+wt[15],h}function Ue(h,Y,wt){return h[0]=Y[0]-wt[0],h[1]=Y[1]-wt[1],h[2]=Y[2]-wt[2],h[3]=Y[3]-wt[3],h[4]=Y[4]-wt[4],h[5]=Y[5]-wt[5],h[6]=Y[6]-wt[6],h[7]=Y[7]-wt[7],h[8]=Y[8]-wt[8],h[9]=Y[9]-wt[9],h[10]=Y[10]-wt[10],h[11]=Y[11]-wt[11],h[12]=Y[12]-wt[12],h[13]=Y[13]-wt[13],h[14]=Y[14]-wt[14],h[15]=Y[15]-wt[15],h}function cr(h,Y,wt){return h[0]=Y[0]*wt,h[1]=Y[1]*wt,h[2]=Y[2]*wt,h[3]=Y[3]*wt,h[4]=Y[4]*wt,h[5]=Y[5]*wt,h[6]=Y[6]*wt,h[7]=Y[7]*wt,h[8]=Y[8]*wt,h[9]=Y[9]*wt,h[10]=Y[10]*wt,h[11]=Y[11]*wt,h[12]=Y[12]*wt,h[13]=Y[13]*wt,h[14]=Y[14]*wt,h[15]=Y[15]*wt,h}function Ve(h,Y,wt,Ft){return h[0]=Y[0]+wt[0]*Ft,h[1]=Y[1]+wt[1]*Ft,h[2]=Y[2]+wt[2]*Ft,h[3]=Y[3]+wt[3]*Ft,h[4]=Y[4]+wt[4]*Ft,h[5]=Y[5]+wt[5]*Ft,h[6]=Y[6]+wt[6]*Ft,h[7]=Y[7]+wt[7]*Ft,h[8]=Y[8]+wt[8]*Ft,h[9]=Y[9]+wt[9]*Ft,h[10]=Y[10]+wt[10]*Ft,h[11]=Y[11]+wt[11]*Ft,h[12]=Y[12]+wt[12]*Ft,h[13]=Y[13]+wt[13]*Ft,h[14]=Y[14]+wt[14]*Ft,h[15]=Y[15]+wt[15]*Ft,h}function Tr(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]&&h[4]===Y[4]&&h[5]===Y[5]&&h[6]===Y[6]&&h[7]===Y[7]&&h[8]===Y[8]&&h[9]===Y[9]&&h[10]===Y[10]&&h[11]===Y[11]&&h[12]===Y[12]&&h[13]===Y[13]&&h[14]===Y[14]&&h[15]===Y[15]}function nn(h,Y){var wt=h[0],Ft=h[1],Qt=h[2],le=h[3],de=h[4],_e=h[5],Le=h[6],Ye=h[7],or=h[8],Br=h[9],Gr=h[10],Fr=h[11],pn=h[12],Dn=h[13],Qr=h[14],Vn=h[15],Ta=Y[0],Oa=Y[1],Ea=Y[2],ca=Y[3],ma=Y[4],io=Y[5],$i=Y[6],Hi=Y[7],Qi=Y[8],qi=Y[9],ho=Y[10],Mo=Y[11],Xa=Y[12],hi=Y[13],Os=Y[14],ps=Y[15];return Math.abs(wt-Ta)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Ta))&&Math.abs(Ft-Oa)<=p.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(Oa))&&Math.abs(Qt-Ea)<=p.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(Ea))&&Math.abs(le-ca)<=p.EPSILON*Math.max(1,Math.abs(le),Math.abs(ca))&&Math.abs(de-ma)<=p.EPSILON*Math.max(1,Math.abs(de),Math.abs(ma))&&Math.abs(_e-io)<=p.EPSILON*Math.max(1,Math.abs(_e),Math.abs(io))&&Math.abs(Le-$i)<=p.EPSILON*Math.max(1,Math.abs(Le),Math.abs($i))&&Math.abs(Ye-Hi)<=p.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Hi))&&Math.abs(or-Qi)<=p.EPSILON*Math.max(1,Math.abs(or),Math.abs(Qi))&&Math.abs(Br-qi)<=p.EPSILON*Math.max(1,Math.abs(Br),Math.abs(qi))&&Math.abs(Gr-ho)<=p.EPSILON*Math.max(1,Math.abs(Gr),Math.abs(ho))&&Math.abs(Fr-Mo)<=p.EPSILON*Math.max(1,Math.abs(Fr),Math.abs(Mo))&&Math.abs(pn-Xa)<=p.EPSILON*Math.max(1,Math.abs(pn),Math.abs(Xa))&&Math.abs(Dn-hi)<=p.EPSILON*Math.max(1,Math.abs(Dn),Math.abs(hi))&&Math.abs(Qr-Os)<=p.EPSILON*Math.max(1,Math.abs(Qr),Math.abs(Os))&&Math.abs(Vn-ps)<=p.EPSILON*Math.max(1,Math.abs(Vn),Math.abs(ps))}var He=ke,ur=Ue,Ar=_(277160);function Cr(){var h=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function se(h){var Y=new p.ARRAY_TYPE(4);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y}function Xt(h,Y,wt,Ft){var Qt=new p.ARRAY_TYPE(4);return Qt[0]=h,Qt[1]=Y,Qt[2]=wt,Qt[3]=Ft,Qt}function fe(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h}function Me(h,Y,wt,Ft,Qt){return h[0]=Y,h[1]=wt,h[2]=Ft,h[3]=Qt,h}function pe(h,Y,wt){return h[0]=Y[0]+wt[0],h[1]=Y[1]+wt[1],h[2]=Y[2]+wt[2],h[3]=Y[3]+wt[3],h}function Re(h,Y,wt){return h[0]=Y[0]-wt[0],h[1]=Y[1]-wt[1],h[2]=Y[2]-wt[2],h[3]=Y[3]-wt[3],h}function nr(h,Y,wt){return h[0]=Y[0]*wt[0],h[1]=Y[1]*wt[1],h[2]=Y[2]*wt[2],h[3]=Y[3]*wt[3],h}function fr(h,Y,wt){return h[0]=Y[0]/wt[0],h[1]=Y[1]/wt[1],h[2]=Y[2]/wt[2],h[3]=Y[3]/wt[3],h}function tn(h,Y){return h[0]=Math.ceil(Y[0]),h[1]=Math.ceil(Y[1]),h[2]=Math.ceil(Y[2]),h[3]=Math.ceil(Y[3]),h}function Ln(h,Y){return h[0]=Math.floor(Y[0]),h[1]=Math.floor(Y[1]),h[2]=Math.floor(Y[2]),h[3]=Math.floor(Y[3]),h}function sn(h,Y,wt){return h[0]=Math.min(Y[0],wt[0]),h[1]=Math.min(Y[1],wt[1]),h[2]=Math.min(Y[2],wt[2]),h[3]=Math.min(Y[3],wt[3]),h}function Xn(h,Y,wt){return h[0]=Math.max(Y[0],wt[0]),h[1]=Math.max(Y[1],wt[1]),h[2]=Math.max(Y[2],wt[2]),h[3]=Math.max(Y[3],wt[3]),h}function an(h,Y){return h[0]=Math.round(Y[0]),h[1]=Math.round(Y[1]),h[2]=Math.round(Y[2]),h[3]=Math.round(Y[3]),h}function Bn(h,Y,wt){return h[0]=Y[0]*wt,h[1]=Y[1]*wt,h[2]=Y[2]*wt,h[3]=Y[3]*wt,h}function Jn(h,Y,wt,Ft){return h[0]=Y[0]+wt[0]*Ft,h[1]=Y[1]+wt[1]*Ft,h[2]=Y[2]+wt[2]*Ft,h[3]=Y[3]+wt[3]*Ft,h}function oa(h,Y){var wt=Y[0]-h[0],Ft=Y[1]-h[1],Qt=Y[2]-h[2],le=Y[3]-h[3];return Math.hypot(wt,Ft,Qt,le)}function sa(h,Y){var wt=Y[0]-h[0],Ft=Y[1]-h[1],Qt=Y[2]-h[2],le=Y[3]-h[3];return wt*wt+Ft*Ft+Qt*Qt+le*le}function xi(h){var Y=h[0],wt=h[1],Ft=h[2],Qt=h[3];return Math.hypot(Y,wt,Ft,Qt)}function Na(h){var Y=h[0],wt=h[1],Ft=h[2],Qt=h[3];return Y*Y+wt*wt+Ft*Ft+Qt*Qt}function Ra(h,Y){return h[0]=-Y[0],h[1]=-Y[1],h[2]=-Y[2],h[3]=-Y[3],h}function ri(h,Y){return h[0]=1/Y[0],h[1]=1/Y[1],h[2]=1/Y[2],h[3]=1/Y[3],h}function Ci(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[3],de=wt*wt+Ft*Ft+Qt*Qt+le*le;return de>0&&(de=1/Math.sqrt(de)),h[0]=wt*de,h[1]=Ft*de,h[2]=Qt*de,h[3]=le*de,h}function Ni(h,Y){return h[0]*Y[0]+h[1]*Y[1]+h[2]*Y[2]+h[3]*Y[3]}function Ri(h,Y,wt,Ft){var Qt=wt[0]*Ft[1]-wt[1]*Ft[0],le=wt[0]*Ft[2]-wt[2]*Ft[0],de=wt[0]*Ft[3]-wt[3]*Ft[0],_e=wt[1]*Ft[2]-wt[2]*Ft[1],Le=wt[1]*Ft[3]-wt[3]*Ft[1],Ye=wt[2]*Ft[3]-wt[3]*Ft[2],or=Y[0],Br=Y[1],Gr=Y[2],Fr=Y[3];return h[0]=Br*Ye-Gr*Le+Fr*_e,h[1]=-(or*Ye)+Gr*de-Fr*le,h[2]=or*Le-Br*de+Fr*Qt,h[3]=-(or*_e)+Br*le-Gr*Qt,h}function pa(h,Y,wt,Ft){var Qt=Y[0],le=Y[1],de=Y[2],_e=Y[3];return h[0]=Qt+Ft*(wt[0]-Qt),h[1]=le+Ft*(wt[1]-le),h[2]=de+Ft*(wt[2]-de),h[3]=_e+Ft*(wt[3]-_e),h}function ki(h,Y){Y=Y||1;var wt,Ft,Qt,le,de,_e;do wt=p.RANDOM()*2-1,Ft=p.RANDOM()*2-1,de=wt*wt+Ft*Ft;while(de>=1);do Qt=p.RANDOM()*2-1,le=p.RANDOM()*2-1,_e=Qt*Qt+le*le;while(_e>=1);var Le=Math.sqrt((1-de)/_e);return h[0]=Y*wt,h[1]=Y*Ft,h[2]=Y*Qt*Le,h[3]=Y*le*Le,h}function eo(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3];return h[0]=wt[0]*Ft+wt[4]*Qt+wt[8]*le+wt[12]*de,h[1]=wt[1]*Ft+wt[5]*Qt+wt[9]*le+wt[13]*de,h[2]=wt[2]*Ft+wt[6]*Qt+wt[10]*le+wt[14]*de,h[3]=wt[3]*Ft+wt[7]*Qt+wt[11]*le+wt[15]*de,h}function za(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=wt[0],_e=wt[1],Le=wt[2],Ye=wt[3],or=Ye*Ft+_e*le-Le*Qt,Br=Ye*Qt+Le*Ft-de*le,Gr=Ye*le+de*Qt-_e*Ft,Fr=-de*Ft-_e*Qt-Le*le;return h[0]=or*Ye+Fr*-de+Br*-Le-Gr*-_e,h[1]=Br*Ye+Fr*-_e+Gr*-de-or*-Le,h[2]=Gr*Ye+Fr*-Le+or*-_e-Br*-de,h[3]=Y[3],h}function Ei(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function Bi(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function go(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]}function Pi(h,Y){var wt=h[0],Ft=h[1],Qt=h[2],le=h[3],de=Y[0],_e=Y[1],Le=Y[2],Ye=Y[3];return Math.abs(wt-de)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(de))&&Math.abs(Ft-_e)<=p.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(_e))&&Math.abs(Qt-Le)<=p.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(Le))&&Math.abs(le-Ye)<=p.EPSILON*Math.max(1,Math.abs(le),Math.abs(Ye))}var Wi=Re,ro=nr,mo=fr,oi=oa,Ti=sa,Hn=xi,Jt=Na,ue=function(){var h=Cr();return function(Y,wt,Ft,Qt,le,de){var _e,Le;for(wt||(wt=4),Ft||(Ft=0),Qt?Le=Math.min(Qt*wt+Ft,Y.length):Le=Y.length,_e=Ft;_e<Le;_e+=wt)h[0]=Y[_e],h[1]=Y[_e+1],h[2]=Y[_e+2],h[3]=Y[_e+3],le(h,h,de),Y[_e]=h[0],Y[_e+1]=h[1],Y[_e+2]=h[2],Y[_e+3]=h[3];return Y}}();function Pe(){var h=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function rr(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function Or(h,Y,wt){wt=wt*.5;var Ft=Math.sin(wt);return h[0]=Ft*Y[0],h[1]=Ft*Y[1],h[2]=Ft*Y[2],h[3]=Math.cos(wt),h}function Ir(h,Y){var wt=Math.acos(Y[3])*2,Ft=Math.sin(wt/2);return Ft>p.EPSILON?(h[0]=Y[0]/Ft,h[1]=Y[1]/Ft,h[2]=Y[2]/Ft):(h[0]=1,h[1]=0,h[2]=0),wt}function xr(h,Y){var wt=Ai(h,Y);return Math.acos(2*wt*wt-1)}function Kr(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=wt[0],Le=wt[1],Ye=wt[2],or=wt[3];return h[0]=Ft*or+de*_e+Qt*Ye-le*Le,h[1]=Qt*or+de*Le+le*_e-Ft*Ye,h[2]=le*or+de*Ye+Ft*Le-Qt*_e,h[3]=de*or-Ft*_e-Qt*Le-le*Ye,h}function un(h,Y,wt){wt*=.5;var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Math.sin(wt),Le=Math.cos(wt);return h[0]=Ft*Le+de*_e,h[1]=Qt*Le+le*_e,h[2]=le*Le-Qt*_e,h[3]=de*Le-Ft*_e,h}function Mn(h,Y,wt){wt*=.5;var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Math.sin(wt),Le=Math.cos(wt);return h[0]=Ft*Le-le*_e,h[1]=Qt*Le+de*_e,h[2]=le*Le+Ft*_e,h[3]=de*Le-Qt*_e,h}function Kn(h,Y,wt){wt*=.5;var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=Math.sin(wt),Le=Math.cos(wt);return h[0]=Ft*Le+Qt*_e,h[1]=Qt*Le-Ft*_e,h[2]=le*Le+de*_e,h[3]=de*Le-le*_e,h}function Un(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2];return h[0]=wt,h[1]=Ft,h[2]=Qt,h[3]=Math.sqrt(Math.abs(1-wt*wt-Ft*Ft-Qt*Qt)),h}function ra(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[3],de=Math.sqrt(wt*wt+Ft*Ft+Qt*Qt),_e=Math.exp(le),Le=de>0?_e*Math.sin(de)/de:0;return h[0]=wt*Le,h[1]=Ft*Le,h[2]=Qt*Le,h[3]=_e*Math.cos(de),h}function na(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[3],de=Math.sqrt(wt*wt+Ft*Ft+Qt*Qt),_e=de>0?Math.atan2(de,le)/de:0;return h[0]=wt*_e,h[1]=Ft*_e,h[2]=Qt*_e,h[3]=.5*Math.log(wt*wt+Ft*Ft+Qt*Qt+le*le),h}function Ya(h,Y,wt){return na(h,Y),Fi(h,h,wt),ra(h,h),h}function ua(h,Y,wt,Ft){var Qt=Y[0],le=Y[1],de=Y[2],_e=Y[3],Le=wt[0],Ye=wt[1],or=wt[2],Br=wt[3],Gr,Fr,pn,Dn,Qr;return Fr=Qt*Le+le*Ye+de*or+_e*Br,Fr<0&&(Fr=-Fr,Le=-Le,Ye=-Ye,or=-or,Br=-Br),1-Fr>p.EPSILON?(Gr=Math.acos(Fr),pn=Math.sin(Gr),Dn=Math.sin((1-Ft)*Gr)/pn,Qr=Math.sin(Ft*Gr)/pn):(Dn=1-Ft,Qr=Ft),h[0]=Dn*Qt+Qr*Le,h[1]=Dn*le+Qr*Ye,h[2]=Dn*de+Qr*or,h[3]=Dn*_e+Qr*Br,h}function Qn(h){var Y=p.RANDOM(),wt=p.RANDOM(),Ft=p.RANDOM(),Qt=Math.sqrt(1-Y),le=Math.sqrt(Y);return h[0]=Qt*Math.sin(2*Math.PI*wt),h[1]=Qt*Math.cos(2*Math.PI*wt),h[2]=le*Math.sin(2*Math.PI*Ft),h[3]=le*Math.cos(2*Math.PI*Ft),h}function Ga(h,Y){var wt=Y[0],Ft=Y[1],Qt=Y[2],le=Y[3],de=wt*wt+Ft*Ft+Qt*Qt+le*le,_e=de?1/de:0;return h[0]=-wt*_e,h[1]=-Ft*_e,h[2]=-Qt*_e,h[3]=le*_e,h}function Da(h,Y){return h[0]=-Y[0],h[1]=-Y[1],h[2]=-Y[2],h[3]=Y[3],h}function xa(h,Y){var wt=Y[0]+Y[4]+Y[8],Ft;if(wt>0)Ft=Math.sqrt(wt+1),h[3]=.5*Ft,Ft=.5/Ft,h[0]=(Y[5]-Y[7])*Ft,h[1]=(Y[6]-Y[2])*Ft,h[2]=(Y[1]-Y[3])*Ft;else{var Qt=0;Y[4]>Y[0]&&(Qt=1),Y[8]>Y[Qt*3+Qt]&&(Qt=2);var le=(Qt+1)%3,de=(Qt+2)%3;Ft=Math.sqrt(Y[Qt*3+Qt]-Y[le*3+le]-Y[de*3+de]+1),h[Qt]=.5*Ft,Ft=.5/Ft,h[3]=(Y[le*3+de]-Y[de*3+le])*Ft,h[le]=(Y[le*3+Qt]+Y[Qt*3+le])*Ft,h[de]=(Y[de*3+Qt]+Y[Qt*3+de])*Ft}return h}function si(h,Y,wt,Ft){var Qt=.5*Math.PI/180;Y*=Qt,wt*=Qt,Ft*=Qt;var le=Math.sin(Y),de=Math.cos(Y),_e=Math.sin(wt),Le=Math.cos(wt),Ye=Math.sin(Ft),or=Math.cos(Ft);return h[0]=le*Le*or-de*_e*Ye,h[1]=de*_e*or+le*Le*Ye,h[2]=de*Le*Ye-le*_e*or,h[3]=de*Le*or+le*_e*Ye,h}function Qa(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var ka=se,_a=Xt,va=fe,ci=Me,ni=pe,fi=Kr,Fi=Bn,Ai=Ni,Yi=pa,Oo=xi,Io=Oo,Li=Na,Ba=Li,vi=Ci,zi=go,Sa=Pi,Xi=function(){var h=Ar.create(),Y=Ar.fromValues(1,0,0),wt=Ar.fromValues(0,1,0);return function(Ft,Qt,le){var de=Ar.dot(Qt,le);return de<-.999999?(Ar.cross(h,Y,Qt),Ar.len(h)<1e-6&&Ar.cross(h,wt,Qt),Ar.normalize(h,h),Or(Ft,h,Math.PI),Ft):de>.999999?(Ft[0]=0,Ft[1]=0,Ft[2]=0,Ft[3]=1,Ft):(Ar.cross(h,Qt,le),Ft[0]=h[0],Ft[1]=h[1],Ft[2]=h[2],Ft[3]=1+de,vi(Ft,Ft))}}(),co=function(){var h=Pe(),Y=Pe();return function(wt,Ft,Qt,le,de,_e){return ua(h,Ft,de,_e),ua(Y,Qt,le,_e),ua(wt,h,Y,2*_e*(1-_e)),wt}}(),Mi=function(){var h=Sr.create();return function(Y,wt,Ft,Qt){return h[0]=Ft[0],h[3]=Ft[1],h[6]=Ft[2],h[1]=Qt[0],h[4]=Qt[1],h[7]=Qt[2],h[2]=-wt[0],h[5]=-wt[1],h[8]=-wt[2],vi(Y,xa(Y,h))}}();function Lo(){var h=new p.ARRAY_TYPE(8);return p.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function pi(h){var Y=new p.ARRAY_TYPE(8);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y[4]=h[4],Y[5]=h[5],Y[6]=h[6],Y[7]=h[7],Y}function fo(h,Y,wt,Ft,Qt,le,de,_e){var Le=new p.ARRAY_TYPE(8);return Le[0]=h,Le[1]=Y,Le[2]=wt,Le[3]=Ft,Le[4]=Qt,Le[5]=le,Le[6]=de,Le[7]=_e,Le}function Go(h,Y,wt,Ft,Qt,le,de){var _e=new p.ARRAY_TYPE(8);_e[0]=h,_e[1]=Y,_e[2]=wt,_e[3]=Ft;var Le=Qt*.5,Ye=le*.5,or=de*.5;return _e[4]=Le*Ft+Ye*wt-or*Y,_e[5]=Ye*Ft+or*h-Le*wt,_e[6]=or*Ft+Le*Y-Ye*h,_e[7]=-Le*h-Ye*Y-or*wt,_e}function ts(h,Y,wt){var Ft=wt[0]*.5,Qt=wt[1]*.5,le=wt[2]*.5,de=Y[0],_e=Y[1],Le=Y[2],Ye=Y[3];return h[0]=de,h[1]=_e,h[2]=Le,h[3]=Ye,h[4]=Ft*Ye+Qt*Le-le*_e,h[5]=Qt*Ye+le*de-Ft*Le,h[6]=le*Ye+Ft*_e-Qt*de,h[7]=-Ft*de-Qt*_e-le*Le,h}function ji(h,Y){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=Y[0]*.5,h[5]=Y[1]*.5,h[6]=Y[2]*.5,h[7]=0,h}function Uo(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function Wo(h,Y){var wt=Pe();be(wt,Y);var Ft=new p.ARRAY_TYPE(3);return $t(Ft,Y),ts(h,wt,Ft),h}function fs(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[4]=Y[4],h[5]=Y[5],h[6]=Y[6],h[7]=Y[7],h}function ha(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function Wt(h,Y,wt,Ft,Qt,le,de,_e,Le){return h[0]=Y,h[1]=wt,h[2]=Ft,h[3]=Qt,h[4]=le,h[5]=de,h[6]=_e,h[7]=Le,h}var Be=va;function tr(h,Y){return h[0]=Y[4],h[1]=Y[5],h[2]=Y[6],h[3]=Y[7],h}var mr=va;function Vr(h,Y){return h[4]=Y[0],h[5]=Y[1],h[6]=Y[2],h[7]=Y[3],h}function cn(h,Y){var wt=Y[4],Ft=Y[5],Qt=Y[6],le=Y[7],de=-Y[0],_e=-Y[1],Le=-Y[2],Ye=Y[3];return h[0]=(wt*Ye+le*de+Ft*Le-Qt*_e)*2,h[1]=(Ft*Ye+le*_e+Qt*de-wt*Le)*2,h[2]=(Qt*Ye+le*Le+wt*_e-Ft*de)*2,h}function Fn(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=wt[0]*.5,Le=wt[1]*.5,Ye=wt[2]*.5,or=Y[4],Br=Y[5],Gr=Y[6],Fr=Y[7];return h[0]=Ft,h[1]=Qt,h[2]=le,h[3]=de,h[4]=de*_e+Qt*Ye-le*Le+or,h[5]=de*Le+le*_e-Ft*Ye+Br,h[6]=de*Ye+Ft*Le-Qt*_e+Gr,h[7]=-Ft*_e-Qt*Le-le*Ye+Fr,h}function Ia(h,Y,wt){var Ft=-Y[0],Qt=-Y[1],le=-Y[2],de=Y[3],_e=Y[4],Le=Y[5],Ye=Y[6],or=Y[7],Br=_e*de+or*Ft+Le*le-Ye*Qt,Gr=Le*de+or*Qt+Ye*Ft-_e*le,Fr=Ye*de+or*le+_e*Qt-Le*Ft,pn=or*de-_e*Ft-Le*Qt-Ye*le;return un(h,Y,wt),Ft=h[0],Qt=h[1],le=h[2],de=h[3],h[4]=Br*de+pn*Ft+Gr*le-Fr*Qt,h[5]=Gr*de+pn*Qt+Fr*Ft-Br*le,h[6]=Fr*de+pn*le+Br*Qt-Gr*Ft,h[7]=pn*de-Br*Ft-Gr*Qt-Fr*le,h}function di(h,Y,wt){var Ft=-Y[0],Qt=-Y[1],le=-Y[2],de=Y[3],_e=Y[4],Le=Y[5],Ye=Y[6],or=Y[7],Br=_e*de+or*Ft+Le*le-Ye*Qt,Gr=Le*de+or*Qt+Ye*Ft-_e*le,Fr=Ye*de+or*le+_e*Qt-Le*Ft,pn=or*de-_e*Ft-Le*Qt-Ye*le;return Mn(h,Y,wt),Ft=h[0],Qt=h[1],le=h[2],de=h[3],h[4]=Br*de+pn*Ft+Gr*le-Fr*Qt,h[5]=Gr*de+pn*Qt+Fr*Ft-Br*le,h[6]=Fr*de+pn*le+Br*Qt-Gr*Ft,h[7]=pn*de-Br*Ft-Gr*Qt-Fr*le,h}function no(h,Y,wt){var Ft=-Y[0],Qt=-Y[1],le=-Y[2],de=Y[3],_e=Y[4],Le=Y[5],Ye=Y[6],or=Y[7],Br=_e*de+or*Ft+Le*le-Ye*Qt,Gr=Le*de+or*Qt+Ye*Ft-_e*le,Fr=Ye*de+or*le+_e*Qt-Le*Ft,pn=or*de-_e*Ft-Le*Qt-Ye*le;return Kn(h,Y,wt),Ft=h[0],Qt=h[1],le=h[2],de=h[3],h[4]=Br*de+pn*Ft+Gr*le-Fr*Qt,h[5]=Gr*de+pn*Qt+Fr*Ft-Br*le,h[6]=Fr*de+pn*le+Br*Qt-Gr*Ft,h[7]=pn*de-Br*Ft-Gr*Qt-Fr*le,h}function wo(h,Y,wt){var Ft=wt[0],Qt=wt[1],le=wt[2],de=wt[3],_e=Y[0],Le=Y[1],Ye=Y[2],or=Y[3];return h[0]=_e*de+or*Ft+Le*le-Ye*Qt,h[1]=Le*de+or*Qt+Ye*Ft-_e*le,h[2]=Ye*de+or*le+_e*Qt-Le*Ft,h[3]=or*de-_e*Ft-Le*Qt-Ye*le,_e=Y[4],Le=Y[5],Ye=Y[6],or=Y[7],h[4]=_e*de+or*Ft+Le*le-Ye*Qt,h[5]=Le*de+or*Qt+Ye*Ft-_e*le,h[6]=Ye*de+or*le+_e*Qt-Le*Ft,h[7]=or*de-_e*Ft-Le*Qt-Ye*le,h}function ds(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=wt[0],Le=wt[1],Ye=wt[2],or=wt[3];return h[0]=Ft*or+de*_e+Qt*Ye-le*Le,h[1]=Qt*or+de*Le+le*_e-Ft*Ye,h[2]=le*or+de*Ye+Ft*Le-Qt*_e,h[3]=de*or-Ft*_e-Qt*Le-le*Ye,_e=wt[4],Le=wt[5],Ye=wt[6],or=wt[7],h[4]=Ft*or+de*_e+Qt*Ye-le*Le,h[5]=Qt*or+de*Le+le*_e-Ft*Ye,h[6]=le*or+de*Ye+Ft*Le-Qt*_e,h[7]=de*or-Ft*_e-Qt*Le-le*Ye,h}function Oi(h,Y,wt,Ft){if(Math.abs(Ft)<p.EPSILON)return fs(h,Y);var Qt=Math.hypot(wt[0],wt[1],wt[2]);Ft=Ft*.5;var le=Math.sin(Ft),de=le*wt[0]/Qt,_e=le*wt[1]/Qt,Le=le*wt[2]/Qt,Ye=Math.cos(Ft),or=Y[0],Br=Y[1],Gr=Y[2],Fr=Y[3];h[0]=or*Ye+Fr*de+Br*Le-Gr*_e,h[1]=Br*Ye+Fr*_e+Gr*de-or*Le,h[2]=Gr*Ye+Fr*Le+or*_e-Br*de,h[3]=Fr*Ye-or*de-Br*_e-Gr*Le;var pn=Y[4],Dn=Y[5],Qr=Y[6],Vn=Y[7];return h[4]=pn*Ye+Vn*de+Dn*Le-Qr*_e,h[5]=Dn*Ye+Vn*_e+Qr*de-pn*Le,h[6]=Qr*Ye+Vn*Le+pn*_e-Dn*de,h[7]=Vn*Ye-pn*de-Dn*_e-Qr*Le,h}function ao(h,Y,wt){return h[0]=Y[0]+wt[0],h[1]=Y[1]+wt[1],h[2]=Y[2]+wt[2],h[3]=Y[3]+wt[3],h[4]=Y[4]+wt[4],h[5]=Y[5]+wt[5],h[6]=Y[6]+wt[6],h[7]=Y[7]+wt[7],h}function Yo(h,Y,wt){var Ft=Y[0],Qt=Y[1],le=Y[2],de=Y[3],_e=wt[4],Le=wt[5],Ye=wt[6],or=wt[7],Br=Y[4],Gr=Y[5],Fr=Y[6],pn=Y[7],Dn=wt[0],Qr=wt[1],Vn=wt[2],Ta=wt[3];return h[0]=Ft*Ta+de*Dn+Qt*Vn-le*Qr,h[1]=Qt*Ta+de*Qr+le*Dn-Ft*Vn,h[2]=le*Ta+de*Vn+Ft*Qr-Qt*Dn,h[3]=de*Ta-Ft*Dn-Qt*Qr-le*Vn,h[4]=Ft*or+de*_e+Qt*Ye-le*Le+Br*Ta+pn*Dn+Gr*Vn-Fr*Qr,h[5]=Qt*or+de*Le+le*_e-Ft*Ye+Gr*Ta+pn*Qr+Fr*Dn-Br*Vn,h[6]=le*or+de*Ye+Ft*Le-Qt*_e+Fr*Ta+pn*Vn+Br*Qr-Gr*Dn,h[7]=de*or-Ft*_e-Qt*Le-le*Ye+pn*Ta-Br*Dn-Gr*Qr-Fr*Vn,h}var hs=Yo;function qo(h,Y,wt){return h[0]=Y[0]*wt,h[1]=Y[1]*wt,h[2]=Y[2]*wt,h[3]=Y[3]*wt,h[4]=Y[4]*wt,h[5]=Y[5]*wt,h[6]=Y[6]*wt,h[7]=Y[7]*wt,h}var Es=Ai;function As(h,Y,wt,Ft){var Qt=1-Ft;return Es(Y,wt)<0&&(Ft=-Ft),h[0]=Y[0]*Qt+wt[0]*Ft,h[1]=Y[1]*Qt+wt[1]*Ft,h[2]=Y[2]*Qt+wt[2]*Ft,h[3]=Y[3]*Qt+wt[3]*Ft,h[4]=Y[4]*Qt+wt[4]*Ft,h[5]=Y[5]*Qt+wt[5]*Ft,h[6]=Y[6]*Qt+wt[6]*Ft,h[7]=Y[7]*Qt+wt[7]*Ft,h}function ws(h,Y){var wt=vs(Y);return h[0]=-Y[0]/wt,h[1]=-Y[1]/wt,h[2]=-Y[2]/wt,h[3]=Y[3]/wt,h[4]=-Y[4]/wt,h[5]=-Y[5]/wt,h[6]=-Y[6]/wt,h[7]=Y[7]/wt,h}function nu(h,Y){return h[0]=-Y[0],h[1]=-Y[1],h[2]=-Y[2],h[3]=Y[3],h[4]=-Y[4],h[5]=-Y[5],h[6]=-Y[6],h[7]=Y[7],h}var Ko=Oo,os=Ko,vs=Li,No=vs;function xu(h,Y){var wt=vs(Y);if(wt>0){wt=Math.sqrt(wt);var Ft=Y[0]/wt,Qt=Y[1]/wt,le=Y[2]/wt,de=Y[3]/wt,_e=Y[4],Le=Y[5],Ye=Y[6],or=Y[7],Br=Ft*_e+Qt*Le+le*Ye+de*or;h[0]=Ft,h[1]=Qt,h[2]=le,h[3]=de,h[4]=(_e-Ft*Br)/wt,h[5]=(Le-Qt*Br)/wt,h[6]=(Ye-le*Br)/wt,h[7]=(or-de*Br)/wt}return h}function Eu(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function Vi(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]&&h[4]===Y[4]&&h[5]===Y[5]&&h[6]===Y[6]&&h[7]===Y[7]}function So(h,Y){var wt=h[0],Ft=h[1],Qt=h[2],le=h[3],de=h[4],_e=h[5],Le=h[6],Ye=h[7],or=Y[0],Br=Y[1],Gr=Y[2],Fr=Y[3],pn=Y[4],Dn=Y[5],Qr=Y[6],Vn=Y[7];return Math.abs(wt-or)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(or))&&Math.abs(Ft-Br)<=p.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(Br))&&Math.abs(Qt-Gr)<=p.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(Gr))&&Math.abs(le-Fr)<=p.EPSILON*Math.max(1,Math.abs(le),Math.abs(Fr))&&Math.abs(de-pn)<=p.EPSILON*Math.max(1,Math.abs(de),Math.abs(pn))&&Math.abs(_e-Dn)<=p.EPSILON*Math.max(1,Math.abs(_e),Math.abs(Dn))&&Math.abs(Le-Qr)<=p.EPSILON*Math.max(1,Math.abs(Le),Math.abs(Qr))&&Math.abs(Ye-Vn)<=p.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Vn))}var Ro=_(631437)},935600:function(Ne,G,_){"use strict";_.r(G),_.d(G,{add:function(){return et},adjoint:function(){return y},clone:function(){return M},copy:function(){return P},create:function(){return R},determinant:function(){return A},equals:function(){return Bt},exactEquals:function(){return ft},frob:function(){return Q},fromMat2d:function(){return z},fromMat4:function(){return w},fromQuat:function(){return U},fromRotation:function(){return W},fromScaling:function(){return X},fromTranslation:function(){return f},fromValues:function(){return L},identity:function(){return b},invert:function(){return x},mul:function(){return St},multiply:function(){return E},multiplyScalar:function(){return it},multiplyScalarAndAdd:function(){return yt},normalFromMat4:function(){return j},projection:function(){return V},rotate:function(){return B},scale:function(){return m},set:function(){return p},str:function(){return J},sub:function(){return Et},subtract:function(){return ut},translate:function(){return D},transpose:function(){return S}});var g=_(73633);function R(){var Z=new g.ARRAY_TYPE(9);return g.ARRAY_TYPE!=Float32Array&&(Z[1]=0,Z[2]=0,Z[3]=0,Z[5]=0,Z[6]=0,Z[7]=0),Z[0]=1,Z[4]=1,Z[8]=1,Z}function w(Z,q){return Z[0]=q[0],Z[1]=q[1],Z[2]=q[2],Z[3]=q[4],Z[4]=q[5],Z[5]=q[6],Z[6]=q[8],Z[7]=q[9],Z[8]=q[10],Z}function M(Z){var q=new g.ARRAY_TYPE(9);return q[0]=Z[0],q[1]=Z[1],q[2]=Z[2],q[3]=Z[3],q[4]=Z[4],q[5]=Z[5],q[6]=Z[6],q[7]=Z[7],q[8]=Z[8],q}function P(Z,q){return Z[0]=q[0],Z[1]=q[1],Z[2]=q[2],Z[3]=q[3],Z[4]=q[4],Z[5]=q[5],Z[6]=q[6],Z[7]=q[7],Z[8]=q[8],Z}function L(Z,q,bt,Ct,nt,ht,At,Ot,xt){var Dt=new g.ARRAY_TYPE(9);return Dt[0]=Z,Dt[1]=q,Dt[2]=bt,Dt[3]=Ct,Dt[4]=nt,Dt[5]=ht,Dt[6]=At,Dt[7]=Ot,Dt[8]=xt,Dt}function p(Z,q,bt,Ct,nt,ht,At,Ot,xt,Dt){return Z[0]=q,Z[1]=bt,Z[2]=Ct,Z[3]=nt,Z[4]=ht,Z[5]=At,Z[6]=Ot,Z[7]=xt,Z[8]=Dt,Z}function b(Z){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=1,Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function S(Z,q){if(Z===q){var bt=q[1],Ct=q[2],nt=q[5];Z[1]=q[3],Z[2]=q[6],Z[3]=bt,Z[5]=q[7],Z[6]=Ct,Z[7]=nt}else Z[0]=q[0],Z[1]=q[3],Z[2]=q[6],Z[3]=q[1],Z[4]=q[4],Z[5]=q[7],Z[6]=q[2],Z[7]=q[5],Z[8]=q[8];return Z}function x(Z,q){var bt=q[0],Ct=q[1],nt=q[2],ht=q[3],At=q[4],Ot=q[5],xt=q[6],Dt=q[7],Yt=q[8],ie=Yt*At-Ot*Dt,re=-Yt*ht+Ot*xt,Pt=Dt*ht-At*xt,ee=bt*ie+Ct*re+nt*Pt;return ee?(ee=1/ee,Z[0]=ie*ee,Z[1]=(-Yt*Ct+nt*Dt)*ee,Z[2]=(Ot*Ct-nt*At)*ee,Z[3]=re*ee,Z[4]=(Yt*bt-nt*xt)*ee,Z[5]=(-Ot*bt+nt*ht)*ee,Z[6]=Pt*ee,Z[7]=(-Dt*bt+Ct*xt)*ee,Z[8]=(At*bt-Ct*ht)*ee,Z):null}function y(Z,q){var bt=q[0],Ct=q[1],nt=q[2],ht=q[3],At=q[4],Ot=q[5],xt=q[6],Dt=q[7],Yt=q[8];return Z[0]=At*Yt-Ot*Dt,Z[1]=nt*Dt-Ct*Yt,Z[2]=Ct*Ot-nt*At,Z[3]=Ot*xt-ht*Yt,Z[4]=bt*Yt-nt*xt,Z[5]=nt*ht-bt*Ot,Z[6]=ht*Dt-At*xt,Z[7]=Ct*xt-bt*Dt,Z[8]=bt*At-Ct*ht,Z}function A(Z){var q=Z[0],bt=Z[1],Ct=Z[2],nt=Z[3],ht=Z[4],At=Z[5],Ot=Z[6],xt=Z[7],Dt=Z[8];return q*(Dt*ht-At*xt)+bt*(-Dt*nt+At*Ot)+Ct*(xt*nt-ht*Ot)}function E(Z,q,bt){var Ct=q[0],nt=q[1],ht=q[2],At=q[3],Ot=q[4],xt=q[5],Dt=q[6],Yt=q[7],ie=q[8],re=bt[0],Pt=bt[1],ee=bt[2],ce=bt[3],Ut=bt[4],te=bt[5],ye=bt[6],ge=bt[7],Kt=bt[8];return Z[0]=re*Ct+Pt*At+ee*Dt,Z[1]=re*nt+Pt*Ot+ee*Yt,Z[2]=re*ht+Pt*xt+ee*ie,Z[3]=ce*Ct+Ut*At+te*Dt,Z[4]=ce*nt+Ut*Ot+te*Yt,Z[5]=ce*ht+Ut*xt+te*ie,Z[6]=ye*Ct+ge*At+Kt*Dt,Z[7]=ye*nt+ge*Ot+Kt*Yt,Z[8]=ye*ht+ge*xt+Kt*ie,Z}function D(Z,q,bt){var Ct=q[0],nt=q[1],ht=q[2],At=q[3],Ot=q[4],xt=q[5],Dt=q[6],Yt=q[7],ie=q[8],re=bt[0],Pt=bt[1];return Z[0]=Ct,Z[1]=nt,Z[2]=ht,Z[3]=At,Z[4]=Ot,Z[5]=xt,Z[6]=re*Ct+Pt*At+Dt,Z[7]=re*nt+Pt*Ot+Yt,Z[8]=re*ht+Pt*xt+ie,Z}function B(Z,q,bt){var Ct=q[0],nt=q[1],ht=q[2],At=q[3],Ot=q[4],xt=q[5],Dt=q[6],Yt=q[7],ie=q[8],re=Math.sin(bt),Pt=Math.cos(bt);return Z[0]=Pt*Ct+re*At,Z[1]=Pt*nt+re*Ot,Z[2]=Pt*ht+re*xt,Z[3]=Pt*At-re*Ct,Z[4]=Pt*Ot-re*nt,Z[5]=Pt*xt-re*ht,Z[6]=Dt,Z[7]=Yt,Z[8]=ie,Z}function m(Z,q,bt){var Ct=bt[0],nt=bt[1];return Z[0]=Ct*q[0],Z[1]=Ct*q[1],Z[2]=Ct*q[2],Z[3]=nt*q[3],Z[4]=nt*q[4],Z[5]=nt*q[5],Z[6]=q[6],Z[7]=q[7],Z[8]=q[8],Z}function f(Z,q){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=1,Z[5]=0,Z[6]=q[0],Z[7]=q[1],Z[8]=1,Z}function W(Z,q){var bt=Math.sin(q),Ct=Math.cos(q);return Z[0]=Ct,Z[1]=bt,Z[2]=0,Z[3]=-bt,Z[4]=Ct,Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function X(Z,q){return Z[0]=q[0],Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=q[1],Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function z(Z,q){return Z[0]=q[0],Z[1]=q[1],Z[2]=0,Z[3]=q[2],Z[4]=q[3],Z[5]=0,Z[6]=q[4],Z[7]=q[5],Z[8]=1,Z}function U(Z,q){var bt=q[0],Ct=q[1],nt=q[2],ht=q[3],At=bt+bt,Ot=Ct+Ct,xt=nt+nt,Dt=bt*At,Yt=Ct*At,ie=Ct*Ot,re=nt*At,Pt=nt*Ot,ee=nt*xt,ce=ht*At,Ut=ht*Ot,te=ht*xt;return Z[0]=1-ie-ee,Z[3]=Yt-te,Z[6]=re+Ut,Z[1]=Yt+te,Z[4]=1-Dt-ee,Z[7]=Pt-ce,Z[2]=re-Ut,Z[5]=Pt+ce,Z[8]=1-Dt-ie,Z}function j(Z,q){var bt=q[0],Ct=q[1],nt=q[2],ht=q[3],At=q[4],Ot=q[5],xt=q[6],Dt=q[7],Yt=q[8],ie=q[9],re=q[10],Pt=q[11],ee=q[12],ce=q[13],Ut=q[14],te=q[15],ye=bt*Ot-Ct*At,ge=bt*xt-nt*At,Kt=bt*Dt-ht*At,xe=Ct*xt-nt*Ot,Tt=Ct*Dt-ht*Ot,Ae=nt*Dt-ht*xt,br=Yt*ce-ie*ee,Sr=Yt*Ut-re*ee,Mr=Yt*te-Pt*ee,Pr=ie*Ut-re*ce,on=ie*te-Pt*ce,Hr=re*te-Pt*Ut,Sn=ye*Hr-ge*on+Kt*Pr+xe*Mr-Tt*Sr+Ae*br;return Sn?(Sn=1/Sn,Z[0]=(Ot*Hr-xt*on+Dt*Pr)*Sn,Z[1]=(xt*Mr-At*Hr-Dt*Sr)*Sn,Z[2]=(At*on-Ot*Mr+Dt*br)*Sn,Z[3]=(nt*on-Ct*Hr-ht*Pr)*Sn,Z[4]=(bt*Hr-nt*Mr+ht*Sr)*Sn,Z[5]=(Ct*Mr-bt*on-ht*br)*Sn,Z[6]=(ce*Ae-Ut*Tt+te*xe)*Sn,Z[7]=(Ut*Kt-ee*Ae-te*ge)*Sn,Z[8]=(ee*Tt-ce*Kt+te*ye)*Sn,Z):null}function V(Z,q,bt){return Z[0]=2/q,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=-2/bt,Z[5]=0,Z[6]=-1,Z[7]=1,Z[8]=1,Z}function J(Z){return"mat3("+Z[0]+", "+Z[1]+", "+Z[2]+", "+Z[3]+", "+Z[4]+", "+Z[5]+", "+Z[6]+", "+Z[7]+", "+Z[8]+")"}function Q(Z){return Math.hypot(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],Z[8])}function et(Z,q,bt){return Z[0]=q[0]+bt[0],Z[1]=q[1]+bt[1],Z[2]=q[2]+bt[2],Z[3]=q[3]+bt[3],Z[4]=q[4]+bt[4],Z[5]=q[5]+bt[5],Z[6]=q[6]+bt[6],Z[7]=q[7]+bt[7],Z[8]=q[8]+bt[8],Z}function ut(Z,q,bt){return Z[0]=q[0]-bt[0],Z[1]=q[1]-bt[1],Z[2]=q[2]-bt[2],Z[3]=q[3]-bt[3],Z[4]=q[4]-bt[4],Z[5]=q[5]-bt[5],Z[6]=q[6]-bt[6],Z[7]=q[7]-bt[7],Z[8]=q[8]-bt[8],Z}function it(Z,q,bt){return Z[0]=q[0]*bt,Z[1]=q[1]*bt,Z[2]=q[2]*bt,Z[3]=q[3]*bt,Z[4]=q[4]*bt,Z[5]=q[5]*bt,Z[6]=q[6]*bt,Z[7]=q[7]*bt,Z[8]=q[8]*bt,Z}function yt(Z,q,bt,Ct){return Z[0]=q[0]+bt[0]*Ct,Z[1]=q[1]+bt[1]*Ct,Z[2]=q[2]+bt[2]*Ct,Z[3]=q[3]+bt[3]*Ct,Z[4]=q[4]+bt[4]*Ct,Z[5]=q[5]+bt[5]*Ct,Z[6]=q[6]+bt[6]*Ct,Z[7]=q[7]+bt[7]*Ct,Z[8]=q[8]+bt[8]*Ct,Z}function ft(Z,q){return Z[0]===q[0]&&Z[1]===q[1]&&Z[2]===q[2]&&Z[3]===q[3]&&Z[4]===q[4]&&Z[5]===q[5]&&Z[6]===q[6]&&Z[7]===q[7]&&Z[8]===q[8]}function Bt(Z,q){var bt=Z[0],Ct=Z[1],nt=Z[2],ht=Z[3],At=Z[4],Ot=Z[5],xt=Z[6],Dt=Z[7],Yt=Z[8],ie=q[0],re=q[1],Pt=q[2],ee=q[3],ce=q[4],Ut=q[5],te=q[6],ye=q[7],ge=q[8];return Math.abs(bt-ie)<=g.EPSILON*Math.max(1,Math.abs(bt),Math.abs(ie))&&Math.abs(Ct-re)<=g.EPSILON*Math.max(1,Math.abs(Ct),Math.abs(re))&&Math.abs(nt-Pt)<=g.EPSILON*Math.max(1,Math.abs(nt),Math.abs(Pt))&&Math.abs(ht-ee)<=g.EPSILON*Math.max(1,Math.abs(ht),Math.abs(ee))&&Math.abs(At-ce)<=g.EPSILON*Math.max(1,Math.abs(At),Math.abs(ce))&&Math.abs(Ot-Ut)<=g.EPSILON*Math.max(1,Math.abs(Ot),Math.abs(Ut))&&Math.abs(xt-te)<=g.EPSILON*Math.max(1,Math.abs(xt),Math.abs(te))&&Math.abs(Dt-ye)<=g.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(ye))&&Math.abs(Yt-ge)<=g.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(ge))}var St=E,Et=ut},631437:function(Ne,G,_){"use strict";_.r(G),_.d(G,{add:function(){return p},angle:function(){return Z},ceil:function(){return y},clone:function(){return w},copy:function(){return P},create:function(){return R},cross:function(){return et},dist:function(){return Dt},distance:function(){return W},div:function(){return xt},divide:function(){return x},dot:function(){return Q},equals:function(){return nt},exactEquals:function(){return Ct},floor:function(){return A},forEach:function(){return re},fromValues:function(){return M},inverse:function(){return V},len:function(){return ht},length:function(){return z},lerp:function(){return ut},max:function(){return D},min:function(){return E},mul:function(){return Ot},multiply:function(){return S},negate:function(){return j},normalize:function(){return J},random:function(){return it},rotate:function(){return Et},round:function(){return B},scale:function(){return m},scaleAndAdd:function(){return f},set:function(){return L},sqrDist:function(){return Yt},sqrLen:function(){return ie},squaredDistance:function(){return X},squaredLength:function(){return U},str:function(){return bt},sub:function(){return At},subtract:function(){return b},transformMat2:function(){return yt},transformMat2d:function(){return ft},transformMat3:function(){return Bt},transformMat4:function(){return St},zero:function(){return q}});var g=_(73633);function R(){var Pt=new g.ARRAY_TYPE(2);return g.ARRAY_TYPE!=Float32Array&&(Pt[0]=0,Pt[1]=0),Pt}function w(Pt){var ee=new g.ARRAY_TYPE(2);return ee[0]=Pt[0],ee[1]=Pt[1],ee}function M(Pt,ee){var ce=new g.ARRAY_TYPE(2);return ce[0]=Pt,ce[1]=ee,ce}function P(Pt,ee){return Pt[0]=ee[0],Pt[1]=ee[1],Pt}function L(Pt,ee,ce){return Pt[0]=ee,Pt[1]=ce,Pt}function p(Pt,ee,ce){return Pt[0]=ee[0]+ce[0],Pt[1]=ee[1]+ce[1],Pt}function b(Pt,ee,ce){return Pt[0]=ee[0]-ce[0],Pt[1]=ee[1]-ce[1],Pt}function S(Pt,ee,ce){return Pt[0]=ee[0]*ce[0],Pt[1]=ee[1]*ce[1],Pt}function x(Pt,ee,ce){return Pt[0]=ee[0]/ce[0],Pt[1]=ee[1]/ce[1],Pt}function y(Pt,ee){return Pt[0]=Math.ceil(ee[0]),Pt[1]=Math.ceil(ee[1]),Pt}function A(Pt,ee){return Pt[0]=Math.floor(ee[0]),Pt[1]=Math.floor(ee[1]),Pt}function E(Pt,ee,ce){return Pt[0]=Math.min(ee[0],ce[0]),Pt[1]=Math.min(ee[1],ce[1]),Pt}function D(Pt,ee,ce){return Pt[0]=Math.max(ee[0],ce[0]),Pt[1]=Math.max(ee[1],ce[1]),Pt}function B(Pt,ee){return Pt[0]=Math.round(ee[0]),Pt[1]=Math.round(ee[1]),Pt}function m(Pt,ee,ce){return Pt[0]=ee[0]*ce,Pt[1]=ee[1]*ce,Pt}function f(Pt,ee,ce,Ut){return Pt[0]=ee[0]+ce[0]*Ut,Pt[1]=ee[1]+ce[1]*Ut,Pt}function W(Pt,ee){var ce=ee[0]-Pt[0],Ut=ee[1]-Pt[1];return Math.hypot(ce,Ut)}function X(Pt,ee){var ce=ee[0]-Pt[0],Ut=ee[1]-Pt[1];return ce*ce+Ut*Ut}function z(Pt){var ee=Pt[0],ce=Pt[1];return Math.hypot(ee,ce)}function U(Pt){var ee=Pt[0],ce=Pt[1];return ee*ee+ce*ce}function j(Pt,ee){return Pt[0]=-ee[0],Pt[1]=-ee[1],Pt}function V(Pt,ee){return Pt[0]=1/ee[0],Pt[1]=1/ee[1],Pt}function J(Pt,ee){var ce=ee[0],Ut=ee[1],te=ce*ce+Ut*Ut;return te>0&&(te=1/Math.sqrt(te)),Pt[0]=ee[0]*te,Pt[1]=ee[1]*te,Pt}function Q(Pt,ee){return Pt[0]*ee[0]+Pt[1]*ee[1]}function et(Pt,ee,ce){var Ut=ee[0]*ce[1]-ee[1]*ce[0];return Pt[0]=Pt[1]=0,Pt[2]=Ut,Pt}function ut(Pt,ee,ce,Ut){var te=ee[0],ye=ee[1];return Pt[0]=te+Ut*(ce[0]-te),Pt[1]=ye+Ut*(ce[1]-ye),Pt}function it(Pt,ee){ee=ee||1;var ce=g.RANDOM()*2*Math.PI;return Pt[0]=Math.cos(ce)*ee,Pt[1]=Math.sin(ce)*ee,Pt}function yt(Pt,ee,ce){var Ut=ee[0],te=ee[1];return Pt[0]=ce[0]*Ut+ce[2]*te,Pt[1]=ce[1]*Ut+ce[3]*te,Pt}function ft(Pt,ee,ce){var Ut=ee[0],te=ee[1];return Pt[0]=ce[0]*Ut+ce[2]*te+ce[4],Pt[1]=ce[1]*Ut+ce[3]*te+ce[5],Pt}function Bt(Pt,ee,ce){var Ut=ee[0],te=ee[1];return Pt[0]=ce[0]*Ut+ce[3]*te+ce[6],Pt[1]=ce[1]*Ut+ce[4]*te+ce[7],Pt}function St(Pt,ee,ce){var Ut=ee[0],te=ee[1];return Pt[0]=ce[0]*Ut+ce[4]*te+ce[12],Pt[1]=ce[1]*Ut+ce[5]*te+ce[13],Pt}function Et(Pt,ee,ce,Ut){var te=ee[0]-ce[0],ye=ee[1]-ce[1],ge=Math.sin(Ut),Kt=Math.cos(Ut);return Pt[0]=te*Kt-ye*ge+ce[0],Pt[1]=te*ge+ye*Kt+ce[1],Pt}function Z(Pt,ee){var ce=Pt[0],Ut=Pt[1],te=ee[0],ye=ee[1],ge=Math.sqrt(ce*ce+Ut*Ut)*Math.sqrt(te*te+ye*ye),Kt=ge&&(ce*te+Ut*ye)/ge;return Math.acos(Math.min(Math.max(Kt,-1),1))}function q(Pt){return Pt[0]=0,Pt[1]=0,Pt}function bt(Pt){return"vec2("+Pt[0]+", "+Pt[1]+")"}function Ct(Pt,ee){return Pt[0]===ee[0]&&Pt[1]===ee[1]}function nt(Pt,ee){var ce=Pt[0],Ut=Pt[1],te=ee[0],ye=ee[1];return Math.abs(ce-te)<=g.EPSILON*Math.max(1,Math.abs(ce),Math.abs(te))&&Math.abs(Ut-ye)<=g.EPSILON*Math.max(1,Math.abs(Ut),Math.abs(ye))}var ht=z,At=b,Ot=S,xt=x,Dt=W,Yt=X,ie=U,re=function(){var Pt=R();return function(ee,ce,Ut,te,ye,ge){var Kt,xe;for(ce||(ce=2),Ut||(Ut=0),te?xe=Math.min(te*ce+Ut,ee.length):xe=ee.length,Kt=Ut;Kt<xe;Kt+=ce)Pt[0]=ee[Kt],Pt[1]=ee[Kt+1],ye(Pt,Pt,ge),ee[Kt]=Pt[0],ee[Kt+1]=Pt[1];return ee}}()},277160:function(Ne,G,_){"use strict";_.r(G),_.d(G,{add:function(){return b},angle:function(){return Ct},bezier:function(){return yt},ceil:function(){return A},clone:function(){return w},copy:function(){return L},create:function(){return R},cross:function(){return et},dist:function(){return ie},distance:function(){return X},div:function(){return Yt},divide:function(){return y},dot:function(){return Q},equals:function(){return Ot},exactEquals:function(){return At},floor:function(){return E},forEach:function(){return ce},fromValues:function(){return P},hermite:function(){return it},inverse:function(){return V},len:function(){return Pt},length:function(){return M},lerp:function(){return ut},max:function(){return B},min:function(){return D},mul:function(){return Dt},multiply:function(){return x},negate:function(){return j},normalize:function(){return J},random:function(){return ft},rotateX:function(){return Z},rotateY:function(){return q},rotateZ:function(){return bt},round:function(){return m},scale:function(){return f},scaleAndAdd:function(){return W},set:function(){return p},sqrDist:function(){return re},sqrLen:function(){return ee},squaredDistance:function(){return z},squaredLength:function(){return U},str:function(){return ht},sub:function(){return xt},subtract:function(){return S},transformMat3:function(){return St},transformMat4:function(){return Bt},transformQuat:function(){return Et},zero:function(){return nt}});var g=_(73633);function R(){var Ut=new g.ARRAY_TYPE(3);return g.ARRAY_TYPE!=Float32Array&&(Ut[0]=0,Ut[1]=0,Ut[2]=0),Ut}function w(Ut){var te=new g.ARRAY_TYPE(3);return te[0]=Ut[0],te[1]=Ut[1],te[2]=Ut[2],te}function M(Ut){var te=Ut[0],ye=Ut[1],ge=Ut[2];return Math.hypot(te,ye,ge)}function P(Ut,te,ye){var ge=new g.ARRAY_TYPE(3);return ge[0]=Ut,ge[1]=te,ge[2]=ye,ge}function L(Ut,te){return Ut[0]=te[0],Ut[1]=te[1],Ut[2]=te[2],Ut}function p(Ut,te,ye,ge){return Ut[0]=te,Ut[1]=ye,Ut[2]=ge,Ut}function b(Ut,te,ye){return Ut[0]=te[0]+ye[0],Ut[1]=te[1]+ye[1],Ut[2]=te[2]+ye[2],Ut}function S(Ut,te,ye){return Ut[0]=te[0]-ye[0],Ut[1]=te[1]-ye[1],Ut[2]=te[2]-ye[2],Ut}function x(Ut,te,ye){return Ut[0]=te[0]*ye[0],Ut[1]=te[1]*ye[1],Ut[2]=te[2]*ye[2],Ut}function y(Ut,te,ye){return Ut[0]=te[0]/ye[0],Ut[1]=te[1]/ye[1],Ut[2]=te[2]/ye[2],Ut}function A(Ut,te){return Ut[0]=Math.ceil(te[0]),Ut[1]=Math.ceil(te[1]),Ut[2]=Math.ceil(te[2]),Ut}function E(Ut,te){return Ut[0]=Math.floor(te[0]),Ut[1]=Math.floor(te[1]),Ut[2]=Math.floor(te[2]),Ut}function D(Ut,te,ye){return Ut[0]=Math.min(te[0],ye[0]),Ut[1]=Math.min(te[1],ye[1]),Ut[2]=Math.min(te[2],ye[2]),Ut}function B(Ut,te,ye){return Ut[0]=Math.max(te[0],ye[0]),Ut[1]=Math.max(te[1],ye[1]),Ut[2]=Math.max(te[2],ye[2]),Ut}function m(Ut,te){return Ut[0]=Math.round(te[0]),Ut[1]=Math.round(te[1]),Ut[2]=Math.round(te[2]),Ut}function f(Ut,te,ye){return Ut[0]=te[0]*ye,Ut[1]=te[1]*ye,Ut[2]=te[2]*ye,Ut}function W(Ut,te,ye,ge){return Ut[0]=te[0]+ye[0]*ge,Ut[1]=te[1]+ye[1]*ge,Ut[2]=te[2]+ye[2]*ge,Ut}function X(Ut,te){var ye=te[0]-Ut[0],ge=te[1]-Ut[1],Kt=te[2]-Ut[2];return Math.hypot(ye,ge,Kt)}function z(Ut,te){var ye=te[0]-Ut[0],ge=te[1]-Ut[1],Kt=te[2]-Ut[2];return ye*ye+ge*ge+Kt*Kt}function U(Ut){var te=Ut[0],ye=Ut[1],ge=Ut[2];return te*te+ye*ye+ge*ge}function j(Ut,te){return Ut[0]=-te[0],Ut[1]=-te[1],Ut[2]=-te[2],Ut}function V(Ut,te){return Ut[0]=1/te[0],Ut[1]=1/te[1],Ut[2]=1/te[2],Ut}function J(Ut,te){var ye=te[0],ge=te[1],Kt=te[2],xe=ye*ye+ge*ge+Kt*Kt;return xe>0&&(xe=1/Math.sqrt(xe)),Ut[0]=te[0]*xe,Ut[1]=te[1]*xe,Ut[2]=te[2]*xe,Ut}function Q(Ut,te){return Ut[0]*te[0]+Ut[1]*te[1]+Ut[2]*te[2]}function et(Ut,te,ye){var ge=te[0],Kt=te[1],xe=te[2],Tt=ye[0],Ae=ye[1],br=ye[2];return Ut[0]=Kt*br-xe*Ae,Ut[1]=xe*Tt-ge*br,Ut[2]=ge*Ae-Kt*Tt,Ut}function ut(Ut,te,ye,ge){var Kt=te[0],xe=te[1],Tt=te[2];return Ut[0]=Kt+ge*(ye[0]-Kt),Ut[1]=xe+ge*(ye[1]-xe),Ut[2]=Tt+ge*(ye[2]-Tt),Ut}function it(Ut,te,ye,ge,Kt,xe){var Tt=xe*xe,Ae=Tt*(2*xe-3)+1,br=Tt*(xe-2)+xe,Sr=Tt*(xe-1),Mr=Tt*(3-2*xe);return Ut[0]=te[0]*Ae+ye[0]*br+ge[0]*Sr+Kt[0]*Mr,Ut[1]=te[1]*Ae+ye[1]*br+ge[1]*Sr+Kt[1]*Mr,Ut[2]=te[2]*Ae+ye[2]*br+ge[2]*Sr+Kt[2]*Mr,Ut}function yt(Ut,te,ye,ge,Kt,xe){var Tt=1-xe,Ae=Tt*Tt,br=xe*xe,Sr=Ae*Tt,Mr=3*xe*Ae,Pr=3*br*Tt,on=br*xe;return Ut[0]=te[0]*Sr+ye[0]*Mr+ge[0]*Pr+Kt[0]*on,Ut[1]=te[1]*Sr+ye[1]*Mr+ge[1]*Pr+Kt[1]*on,Ut[2]=te[2]*Sr+ye[2]*Mr+ge[2]*Pr+Kt[2]*on,Ut}function ft(Ut,te){te=te||1;var ye=g.RANDOM()*2*Math.PI,ge=g.RANDOM()*2-1,Kt=Math.sqrt(1-ge*ge)*te;return Ut[0]=Math.cos(ye)*Kt,Ut[1]=Math.sin(ye)*Kt,Ut[2]=ge*te,Ut}function Bt(Ut,te,ye){var ge=te[0],Kt=te[1],xe=te[2],Tt=ye[3]*ge+ye[7]*Kt+ye[11]*xe+ye[15];return Tt=Tt||1,Ut[0]=(ye[0]*ge+ye[4]*Kt+ye[8]*xe+ye[12])/Tt,Ut[1]=(ye[1]*ge+ye[5]*Kt+ye[9]*xe+ye[13])/Tt,Ut[2]=(ye[2]*ge+ye[6]*Kt+ye[10]*xe+ye[14])/Tt,Ut}function St(Ut,te,ye){var ge=te[0],Kt=te[1],xe=te[2];return Ut[0]=ge*ye[0]+Kt*ye[3]+xe*ye[6],Ut[1]=ge*ye[1]+Kt*ye[4]+xe*ye[7],Ut[2]=ge*ye[2]+Kt*ye[5]+xe*ye[8],Ut}function Et(Ut,te,ye){var ge=ye[0],Kt=ye[1],xe=ye[2],Tt=ye[3],Ae=te[0],br=te[1],Sr=te[2],Mr=Kt*Sr-xe*br,Pr=xe*Ae-ge*Sr,on=ge*br-Kt*Ae,Hr=Kt*on-xe*Pr,Sn=xe*Mr-ge*on,In=ge*Pr-Kt*Mr,Nn=Tt*2;return Mr*=Nn,Pr*=Nn,on*=Nn,Hr*=2,Sn*=2,In*=2,Ut[0]=Ae+Mr+Hr,Ut[1]=br+Pr+Sn,Ut[2]=Sr+on+In,Ut}function Z(Ut,te,ye,ge){var Kt=[],xe=[];return Kt[0]=te[0]-ye[0],Kt[1]=te[1]-ye[1],Kt[2]=te[2]-ye[2],xe[0]=Kt[0],xe[1]=Kt[1]*Math.cos(ge)-Kt[2]*Math.sin(ge),xe[2]=Kt[1]*Math.sin(ge)+Kt[2]*Math.cos(ge),Ut[0]=xe[0]+ye[0],Ut[1]=xe[1]+ye[1],Ut[2]=xe[2]+ye[2],Ut}function q(Ut,te,ye,ge){var Kt=[],xe=[];return Kt[0]=te[0]-ye[0],Kt[1]=te[1]-ye[1],Kt[2]=te[2]-ye[2],xe[0]=Kt[2]*Math.sin(ge)+Kt[0]*Math.cos(ge),xe[1]=Kt[1],xe[2]=Kt[2]*Math.cos(ge)-Kt[0]*Math.sin(ge),Ut[0]=xe[0]+ye[0],Ut[1]=xe[1]+ye[1],Ut[2]=xe[2]+ye[2],Ut}function bt(Ut,te,ye,ge){var Kt=[],xe=[];return Kt[0]=te[0]-ye[0],Kt[1]=te[1]-ye[1],Kt[2]=te[2]-ye[2],xe[0]=Kt[0]*Math.cos(ge)-Kt[1]*Math.sin(ge),xe[1]=Kt[0]*Math.sin(ge)+Kt[1]*Math.cos(ge),xe[2]=Kt[2],Ut[0]=xe[0]+ye[0],Ut[1]=xe[1]+ye[1],Ut[2]=xe[2]+ye[2],Ut}function Ct(Ut,te){var ye=Ut[0],ge=Ut[1],Kt=Ut[2],xe=te[0],Tt=te[1],Ae=te[2],br=Math.sqrt(ye*ye+ge*ge+Kt*Kt),Sr=Math.sqrt(xe*xe+Tt*Tt+Ae*Ae),Mr=br*Sr,Pr=Mr&&Q(Ut,te)/Mr;return Math.acos(Math.min(Math.max(Pr,-1),1))}function nt(Ut){return Ut[0]=0,Ut[1]=0,Ut[2]=0,Ut}function ht(Ut){return"vec3("+Ut[0]+", "+Ut[1]+", "+Ut[2]+")"}function At(Ut,te){return Ut[0]===te[0]&&Ut[1]===te[1]&&Ut[2]===te[2]}function Ot(Ut,te){var ye=Ut[0],ge=Ut[1],Kt=Ut[2],xe=te[0],Tt=te[1],Ae=te[2];return Math.abs(ye-xe)<=g.EPSILON*Math.max(1,Math.abs(ye),Math.abs(xe))&&Math.abs(ge-Tt)<=g.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Tt))&&Math.abs(Kt-Ae)<=g.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(Ae))}var xt=S,Dt=x,Yt=y,ie=X,re=z,Pt=M,ee=U,ce=function(){var Ut=R();return function(te,ye,ge,Kt,xe,Tt){var Ae,br;for(ye||(ye=3),ge||(ge=0),Kt?br=Math.min(Kt*ye+ge,te.length):br=te.length,Ae=ge;Ae<br;Ae+=ye)Ut[0]=te[Ae],Ut[1]=te[Ae+1],Ut[2]=te[Ae+2],xe(Ut,Ut,Tt),te[Ae]=Ut[0],te[Ae+1]=Ut[1],te[Ae+2]=Ut[2];return te}}()},728185:function(Ne){"use strict";var G={foo:{}},_=Object;Ne.exports=function(){return{__proto__:G}.foo===G.foo&&!({__proto__:null}instanceof _)}},241405:function(Ne,G,_){"use strict";var g=typeof Symbol!="undefined"&&Symbol,R=_(455419);Ne.exports=function(){return typeof g!="function"||typeof Symbol!="function"||typeof g("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:R()}},455419:function(Ne){"use strict";Ne.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},g=Symbol("test"),R=Object(g);if(typeof g=="string"||Object.prototype.toString.call(g)!=="[object Symbol]"||Object.prototype.toString.call(R)!=="[object Symbol]")return!1;var w=42;_[g]=w;for(g in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var M=Object.getOwnPropertySymbols(_);if(M.length!==1||M[0]!==g||!Object.prototype.propertyIsEnumerable.call(_,g))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var P=Object.getOwnPropertyDescriptor(_,g);if(P.value!==w||P.enumerable!==!0)return!1}return!0}},117642:function(Ne,G,_){"use strict";var g=_(158612);Ne.exports=g.call(Function.call,Object.prototype.hasOwnProperty)},738186:function(Ne){var G=[],_=[],g="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function R(M,P){if(P=P||{},M===void 0)throw new Error(g);var L=P.prepend===!0?"prepend":"append",p=P.container!==void 0?P.container:document.querySelector("head"),b=G.indexOf(p);b===-1&&(b=G.push(p)-1,_[b]={});var S;return _[b]!==void 0&&_[b][L]!==void 0?S=_[b][L]:(S=_[b][L]=w(),L==="prepend"?p.insertBefore(S,p.childNodes[0]):p.appendChild(S)),M.charCodeAt(0)===65279&&(M=M.substr(1,M.length)),S.styleSheet?S.styleSheet.cssText+=M:S.textContent+=M,S}function w(){var M=document.createElement("style");return M.setAttribute("type","text/css"),M}Ne.exports=R,Ne.exports.insertCss=R},896874:function(Ne){function G(_,g,R){switch(R.length){case 0:return _.call(g);case 1:return _.call(g,R[0]);case 2:return _.call(g,R[0],R[1]);case 3:return _.call(g,R[0],R[1],R[2])}return _.apply(g,R)}Ne.exports=G},829932:function(Ne){function G(_,g){for(var R=-1,w=_==null?0:_.length,M=Array(w);++R<w;)M[R]=g(_[R],R,_);return M}Ne.exports=G},920731:function(Ne,G,_){var g=_(288668),R=_(447443),w=_(301196),M=_(829932),P=_(307518),L=_(274757),p=200;function b(S,x,y,A){var E=-1,D=R,B=!0,m=S.length,f=[],W=x.length;if(!m)return f;y&&(x=M(x,P(y))),A?(D=w,B=!1):x.length>=p&&(D=L,B=!1,x=new g(x));t:for(;++E<m;){var X=S[E],z=y==null?X:y(X);if(X=A||X!==0?X:0,B&&z===z){for(var U=W;U--;)if(x[U]===z)continue t;f.push(X)}else D(x,z,A)||f.push(X)}return f}Ne.exports=b},238749:function(Ne,G,_){var g=_(644239),R=_(541780),w=_(637005),M="[object Arguments]",P="[object Array]",L="[object Boolean]",p="[object Date]",b="[object Error]",S="[object Function]",x="[object Map]",y="[object Number]",A="[object Object]",E="[object RegExp]",D="[object Set]",B="[object String]",m="[object WeakMap]",f="[object ArrayBuffer]",W="[object DataView]",X="[object Float32Array]",z="[object Float64Array]",U="[object Int8Array]",j="[object Int16Array]",V="[object Int32Array]",J="[object Uint8Array]",Q="[object Uint8ClampedArray]",et="[object Uint16Array]",ut="[object Uint32Array]",it={};it[X]=it[z]=it[U]=it[j]=it[V]=it[J]=it[Q]=it[et]=it[ut]=!0,it[M]=it[P]=it[f]=it[L]=it[W]=it[p]=it[b]=it[S]=it[x]=it[y]=it[A]=it[E]=it[D]=it[B]=it[m]=!1;function yt(ft){return w(ft)&&R(ft.length)&&!!it[g(ft)]}Ne.exports=yt},105976:function(Ne,G,_){var g=_(406557),R=_(545357),w=_(430061);function M(P,L){return w(R(P,L,g),P+"")}Ne.exports=M},356560:function(Ne,G,_){var g=_(575703),R=_(538777),w=_(406557),M=R?function(P,L){return R(P,"toString",{configurable:!0,enumerable:!1,value:g(L),writable:!0})}:w;Ne.exports=M},307518:function(Ne){function G(_){return function(g){return _(g)}}Ne.exports=G},538777:function(Ne,G,_){var g=_(610852),R=function(){try{var w=g(Object,"defineProperty");return w({},"",{}),w}catch(M){}}();Ne.exports=R},385924:function(Ne,G,_){var g=_(205569),R=g(Object.getPrototypeOf,Object);Ne.exports=R},531167:function(Ne,G,_){Ne=_.nmd(Ne);var g=_(431957),R=G&&!G.nodeType&&G,w=R&&!0&&Ne&&!Ne.nodeType&&Ne,M=w&&w.exports===R,P=M&&g.process,L=function(){try{var p=w&&w.require&&w.require("util").types;return p||P&&P.binding&&P.binding("util")}catch(b){}}();Ne.exports=L},205569:function(Ne){function G(_,g){return function(R){return _(g(R))}}Ne.exports=G},545357:function(Ne,G,_){var g=_(896874),R=Math.max;function w(M,P,L){return P=R(P===void 0?M.length-1:P,0),function(){for(var p=arguments,b=-1,S=R(p.length-P,0),x=Array(S);++b<S;)x[b]=p[P+b];b=-1;for(var y=Array(P+1);++b<P;)y[b]=p[b];return y[P]=L(x),g(M,this,y)}}Ne.exports=w},430061:function(Ne,G,_){var g=_(356560),R=_(521275),w=R(g);Ne.exports=w},521275:function(Ne){var G=800,_=16,g=Date.now;function R(w){var M=0,P=0;return function(){var L=g(),p=_-(L-P);if(P=L,p>0){if(++M>=G)return arguments[0]}else M=0;return w.apply(void 0,arguments)}}Ne.exports=R},575703:function(Ne){function G(_){return function(){return _}}Ne.exports=G},291966:function(Ne,G,_){var g=_(920731),R=_(121078),w=_(105976),M=_(229246),P=w(function(L,p){return M(L)?g(L,R(p,1,M,!0)):[]});Ne.exports=P},406557:function(Ne){function G(_){return _}Ne.exports=G},498612:function(Ne,G,_){var g=_(623560),R=_(541780);function w(M){return M!=null&&R(M.length)&&!g(M)}Ne.exports=w},229246:function(Ne,G,_){var g=_(498612),R=_(637005);function w(M){return R(M)&&g(M)}Ne.exports=w},541780:function(Ne){var G=9007199254740991;function _(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=G}Ne.exports=_},281763:function(Ne,G,_){var g=_(644239),R=_(637005),w="[object Number]";function M(P){return typeof P=="number"||R(P)&&g(P)==w}Ne.exports=M},968630:function(Ne,G,_){var g=_(644239),R=_(385924),w=_(637005),M="[object Object]",P=Function.prototype,L=Object.prototype,p=P.toString,b=L.hasOwnProperty,S=p.call(Object);function x(y){if(!w(y)||g(y)!=M)return!1;var A=R(y);if(A===null)return!0;var E=b.call(A,"constructor")&&A.constructor;return typeof E=="function"&&E instanceof E&&p.call(E)==S}Ne.exports=x},936719:function(Ne,G,_){var g=_(238749),R=_(307518),w=_(531167),M=w&&w.isTypedArray,P=M?R(M):g;Ne.exports=P},252796:function(Ne,G,_){Ne.exports=_(410643)},913264:function(Ne){"use strict";var G=!!(typeof window!="undefined"&&window.document&&window.document.createElement),_={canUseDOM:G,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:G&&!!(window.addEventListener||window.attachEvent),canUseViewport:G&&!!window.screen,isInWorker:!G};Ne.exports=_},784518:function(Ne){var G=!1,_,g,R,w,M,P,L,p,b,S,x,y,A,E,D;function B(){if(!G){G=!0;var f=navigator.userAgent,W=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(f),X=/(Mac OS X)|(Windows)|(Linux)/.exec(f);if(y=/\b(iPhone|iP[ao]d)/.exec(f),A=/\b(iP[ao]d)/.exec(f),S=/Android/i.exec(f),E=/FBAN\/\w+;/i.exec(f),D=/Mobile/i.exec(f),x=!!/Win64/.exec(f),W){_=W[1]?parseFloat(W[1]):W[5]?parseFloat(W[5]):NaN,_&&document&&document.documentMode&&(_=document.documentMode);var z=/(?:Trident\/(\d+.\d+))/.exec(f);P=z?parseFloat(z[1])+4:_,g=W[2]?parseFloat(W[2]):NaN,R=W[3]?parseFloat(W[3]):NaN,w=W[4]?parseFloat(W[4]):NaN,w?(W=/(?:Chrome\/(\d+\.\d+))/.exec(f),M=W&&W[1]?parseFloat(W[1]):NaN):M=NaN}else _=g=R=M=w=NaN;if(X){if(X[1]){var U=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(f);L=U?parseFloat(U[1].replace("_",".")):!0}else L=!1;p=!!X[2],b=!!X[3]}else L=p=b=!1}}var m={ie:function(){return B()||_},ieCompatibilityMode:function(){return B()||P>_},ie64:function(){return m.ie()&&x},firefox:function(){return B()||g},opera:function(){return B()||R},webkit:function(){return B()||w},safari:function(){return m.webkit()},chrome:function(){return B()||M},windows:function(){return B()||p},osx:function(){return B()||L},linux:function(){return B()||b},iphone:function(){return B()||y},mobile:function(){return B()||y||A||S||D},nativeApp:function(){return B()||E},android:function(){return B()||S},ipad:function(){return B()||A}};Ne.exports=m},396534:function(Ne,G,_){"use strict";var g=_(913264),R;g.canUseDOM&&(R=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function w(M,P){if(!g.canUseDOM||P&&!("addEventListener"in document))return!1;var L="on"+M,p=L in document;if(!p){var b=document.createElement("div");b.setAttribute(L,"return;"),p=typeof b[L]=="function"}return!p&&R&&M==="wheel"&&(p=document.implementation.hasFeature("Events.wheel","3.0")),p}Ne.exports=w},410643:function(Ne,G,_){"use strict";var g=_(784518),R=_(396534),w=10,M=40,P=800;function L(p){var b=0,S=0,x=0,y=0;return"detail"in p&&(S=p.detail),"wheelDelta"in p&&(S=-p.wheelDelta/120),"wheelDeltaY"in p&&(S=-p.wheelDeltaY/120),"wheelDeltaX"in p&&(b=-p.wheelDeltaX/120),"axis"in p&&p.axis===p.HORIZONTAL_AXIS&&(b=S,S=0),x=b*w,y=S*w,"deltaY"in p&&(y=p.deltaY),"deltaX"in p&&(x=p.deltaX),(x||y)&&p.deltaMode&&(p.deltaMode==1?(x*=M,y*=M):(x*=P,y*=P)),x&&!b&&(b=x<1?-1:1),y&&!S&&(S=y<1?-1:1),{spinX:b,spinY:S,pixelX:x,pixelY:y}}L.getEventType=function(){return g.firefox()?"DOMMouseScroll":R("wheel")?"wheel":"mousewheel"},Ne.exports=L},470631:function(Ne,G,_){var g=typeof Map=="function"&&Map.prototype,R=Object.getOwnPropertyDescriptor&&g?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,w=g&&R&&typeof R.get=="function"?R.get:null,M=g&&Map.prototype.forEach,P=typeof Set=="function"&&Set.prototype,L=Object.getOwnPropertyDescriptor&&P?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,p=P&&L&&typeof L.get=="function"?L.get:null,b=P&&Set.prototype.forEach,S=typeof WeakMap=="function"&&WeakMap.prototype,x=S?WeakMap.prototype.has:null,y=typeof WeakSet=="function"&&WeakSet.prototype,A=y?WeakSet.prototype.has:null,E=typeof WeakRef=="function"&&WeakRef.prototype,D=E?WeakRef.prototype.deref:null,B=Boolean.prototype.valueOf,m=Object.prototype.toString,f=Function.prototype.toString,W=String.prototype.match,X=String.prototype.slice,z=String.prototype.replace,U=String.prototype.toUpperCase,j=String.prototype.toLowerCase,V=RegExp.prototype.test,J=Array.prototype.concat,Q=Array.prototype.join,et=Array.prototype.slice,ut=Math.floor,it=typeof BigInt=="function"?BigInt.prototype.valueOf:null,yt=Object.getOwnPropertySymbols,ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",St=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Bt||"symbol")?Symbol.toStringTag:null,Et=Object.prototype.propertyIsEnumerable,Z=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ke){return ke.__proto__}:null);function q(ke,Xe){if(ke===1/0||ke===-1/0||ke!==ke||ke&&ke>-1e3&&ke<1e3||V.call(/e/,Xe))return Xe;var jr=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ke=="number"){var rn=ke<0?-ut(-ke):ut(ke);if(rn!==ke){var ir=String(rn),Lr=X.call(Xe,ir.length+1);return z.call(ir,jr,"$&_")+"."+z.call(z.call(Lr,/([0-9]{3})/g,"$&_"),/_$/,"")}}return z.call(Xe,jr,"$&_")}var bt=_(824654),Ct=bt.custom,nt=ee(Ct)?Ct:null;Ne.exports=function ke(Xe,jr,rn,ir){var Lr=jr||{};if(te(Lr,"quoteStyle")&&Lr.quoteStyle!=="single"&&Lr.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(te(Lr,"maxStringLength")&&(typeof Lr.maxStringLength=="number"?Lr.maxStringLength<0&&Lr.maxStringLength!==1/0:Lr.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var dn=te(Lr,"customInspect")?Lr.customInspect:!0;if(typeof dn!="boolean"&&dn!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(te(Lr,"indent")&&Lr.indent!==null&&Lr.indent!=="	"&&!(parseInt(Lr.indent,10)===Lr.indent&&Lr.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(te(Lr,"numericSeparator")&&typeof Lr.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Zr=Lr.numericSeparator;if(typeof Xe=="undefined")return"undefined";if(Xe===null)return"null";if(typeof Xe=="boolean")return Xe?"true":"false";if(typeof Xe=="string")return Pr(Xe,Lr);if(typeof Xe=="number"){if(Xe===0)return 1/0/Xe>0?"0":"-0";var wn=String(Xe);return Zr?q(Xe,wn):wn}if(typeof Xe=="bigint"){var ln=String(Xe)+"n";return Zr?q(Xe,ln):ln}var bn=typeof Lr.depth=="undefined"?5:Lr.depth;if(typeof rn=="undefined"&&(rn=0),rn>=bn&&bn>0&&typeof Xe=="object")return Ot(Xe)?"[Array]":"[Object]";var Pn=vr(Lr,rn);if(typeof ir=="undefined")ir=[];else if(Kt(ir,Xe)>=0)return"[Circular]";function at(zt,Rt,qt){if(Rt&&(ir=et.call(ir),ir.push(Rt)),qt){var Te={depth:Lr.depth};return te(Lr,"quoteStyle")&&(Te.quoteStyle=Lr.quoteStyle),ke(zt,Te,rn+1,ir)}return ke(zt,Lr,rn+1,ir)}if(typeof Xe=="function"&&!Dt(Xe)){var je=ge(Xe),Zt=Er(Xe,at);return"[Function"+(je?": "+je:" (anonymous)")+"]"+(Zt.length>0?" { "+Q.call(Zt,", ")+" }":"")}if(ee(Xe)){var $t=Bt?z.call(String(Xe),/^(Symbol\(.*\))_[^)]*$/,"$1"):ft.call(Xe);return typeof Xe=="object"&&!Bt?Hr($t):$t}if(Mr(Xe)){for(var Mt="<"+j.call(String(Xe.nodeName)),be=Xe.attributes||[],Nt=0;Nt<be.length;Nt++)Mt+=" "+be[Nt].name+"="+ht(At(be[Nt].value),"double",Lr);return Mt+=">",Xe.childNodes&&Xe.childNodes.length&&(Mt+="..."),Mt+="</"+j.call(String(Xe.nodeName))+">",Mt}if(Ot(Xe)){if(Xe.length===0)return"[]";var Ht=Er(Xe,at);return Pn&&!Nn(Ht)?"["+Ze(Ht,Pn)+"]":"[ "+Q.call(Ht,", ")+" ]"}if(Yt(Xe)){var dt=Er(Xe,at);return!("cause"in Error.prototype)&&"cause"in Xe&&!Et.call(Xe,"cause")?"{ ["+String(Xe)+"] "+Q.call(J.call("[cause]: "+at(Xe.cause),dt),", ")+" }":dt.length===0?"["+String(Xe)+"]":"{ ["+String(Xe)+"] "+Q.call(dt,", ")+" }"}if(typeof Xe=="object"&&dn){if(nt&&typeof Xe[nt]=="function"&&bt)return bt(Xe,{depth:bn-rn});if(dn!=="symbol"&&typeof Xe.inspect=="function")return Xe.inspect()}if(xe(Xe)){var Gt=[];return M&&M.call(Xe,function(zt,Rt){Gt.push(at(Rt,Xe,!0)+" => "+at(zt,Xe))}),In("Map",w.call(Xe),Gt,Pn)}if(br(Xe)){var tt=[];return b&&b.call(Xe,function(zt){tt.push(at(zt,Xe))}),In("Set",p.call(Xe),tt,Pn)}if(Tt(Xe))return Sn("WeakMap");if(Sr(Xe))return Sn("WeakSet");if(Ae(Xe))return Sn("WeakRef");if(re(Xe))return Hr(at(Number(Xe)));if(ce(Xe))return Hr(at(it.call(Xe)));if(Pt(Xe))return Hr(B.call(Xe));if(ie(Xe))return Hr(at(String(Xe)));if(!xt(Xe)&&!Dt(Xe)){var ot=Er(Xe,at),k=Z?Z(Xe)===Object.prototype:Xe instanceof Object||Xe.constructor===Object,C=Xe instanceof Object?"":"null prototype",I=!k&&St&&Object(Xe)===Xe&&St in Xe?X.call(ye(Xe),8,-1):C?"Object":"",H=k||typeof Xe.constructor!="function"?"":Xe.constructor.name?Xe.constructor.name+" ":"",gt=H+(I||C?"["+Q.call(J.call([],I||[],C||[]),": ")+"] ":"");return ot.length===0?gt+"{}":Pn?gt+"{"+Ze(ot,Pn)+"}":gt+"{ "+Q.call(ot,", ")+" }"}return String(Xe)};function ht(ke,Xe,jr){var rn=(jr.quoteStyle||Xe)==="double"?'"':"'";return rn+ke+rn}function At(ke){return z.call(String(ke),/"/g,"&quot;")}function Ot(ke){return ye(ke)==="[object Array]"&&(!St||!(typeof ke=="object"&&St in ke))}function xt(ke){return ye(ke)==="[object Date]"&&(!St||!(typeof ke=="object"&&St in ke))}function Dt(ke){return ye(ke)==="[object RegExp]"&&(!St||!(typeof ke=="object"&&St in ke))}function Yt(ke){return ye(ke)==="[object Error]"&&(!St||!(typeof ke=="object"&&St in ke))}function ie(ke){return ye(ke)==="[object String]"&&(!St||!(typeof ke=="object"&&St in ke))}function re(ke){return ye(ke)==="[object Number]"&&(!St||!(typeof ke=="object"&&St in ke))}function Pt(ke){return ye(ke)==="[object Boolean]"&&(!St||!(typeof ke=="object"&&St in ke))}function ee(ke){if(Bt)return ke&&typeof ke=="object"&&ke instanceof Symbol;if(typeof ke=="symbol")return!0;if(!ke||typeof ke!="object"||!ft)return!1;try{return ft.call(ke),!0}catch(Xe){}return!1}function ce(ke){if(!ke||typeof ke!="object"||!it)return!1;try{return it.call(ke),!0}catch(Xe){}return!1}var Ut=Object.prototype.hasOwnProperty||function(ke){return ke in this};function te(ke,Xe){return Ut.call(ke,Xe)}function ye(ke){return m.call(ke)}function ge(ke){if(ke.name)return ke.name;var Xe=W.call(f.call(ke),/^function\s*([\w$]+)/);return Xe?Xe[1]:null}function Kt(ke,Xe){if(ke.indexOf)return ke.indexOf(Xe);for(var jr=0,rn=ke.length;jr<rn;jr++)if(ke[jr]===Xe)return jr;return-1}function xe(ke){if(!w||!ke||typeof ke!="object")return!1;try{w.call(ke);try{p.call(ke)}catch(Xe){return!0}return ke instanceof Map}catch(Xe){}return!1}function Tt(ke){if(!x||!ke||typeof ke!="object")return!1;try{x.call(ke,x);try{A.call(ke,A)}catch(Xe){return!0}return ke instanceof WeakMap}catch(Xe){}return!1}function Ae(ke){if(!D||!ke||typeof ke!="object")return!1;try{return D.call(ke),!0}catch(Xe){}return!1}function br(ke){if(!p||!ke||typeof ke!="object")return!1;try{p.call(ke);try{w.call(ke)}catch(Xe){return!0}return ke instanceof Set}catch(Xe){}return!1}function Sr(ke){if(!A||!ke||typeof ke!="object")return!1;try{A.call(ke,A);try{x.call(ke,x)}catch(Xe){return!0}return ke instanceof WeakSet}catch(Xe){}return!1}function Mr(ke){return!ke||typeof ke!="object"?!1:typeof HTMLElement!="undefined"&&ke instanceof HTMLElement?!0:typeof ke.nodeName=="string"&&typeof ke.getAttribute=="function"}function Pr(ke,Xe){if(ke.length>Xe.maxStringLength){var jr=ke.length-Xe.maxStringLength,rn="... "+jr+" more character"+(jr>1?"s":"");return Pr(X.call(ke,0,Xe.maxStringLength),Xe)+rn}var ir=z.call(z.call(ke,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,on);return ht(ir,"single",Xe)}function on(ke){var Xe=ke.charCodeAt(0),jr={8:"b",9:"t",10:"n",12:"f",13:"r"}[Xe];return jr?"\\"+jr:"\\x"+(Xe<16?"0":"")+U.call(Xe.toString(16))}function Hr(ke){return"Object("+ke+")"}function Sn(ke){return ke+" { ? }"}function In(ke,Xe,jr,rn){var ir=rn?Ze(jr,rn):Q.call(jr,", ");return ke+" ("+Xe+") {"+ir+"}"}function Nn(ke){for(var Xe=0;Xe<ke.length;Xe++)if(Kt(ke[Xe],`
`)>=0)return!1;return!0}function vr(ke,Xe){var jr;if(ke.indent==="	")jr="	";else if(typeof ke.indent=="number"&&ke.indent>0)jr=Q.call(Array(ke.indent+1)," ");else return null;return{base:jr,prev:Q.call(Array(Xe+1),jr)}}function Ze(ke,Xe){if(ke.length===0)return"";var jr=`
`+Xe.prev+Xe.base;return jr+Q.call(ke,","+jr)+`
`+Xe.prev}function Er(ke,Xe){var jr=Ot(ke),rn=[];if(jr){rn.length=ke.length;for(var ir=0;ir<ke.length;ir++)rn[ir]=te(ke,ir)?Xe(ke[ir],ke):""}var Lr=typeof yt=="function"?yt(ke):[],dn;if(Bt){dn={};for(var Zr=0;Zr<Lr.length;Zr++)dn["$"+Lr[Zr]]=Lr[Zr]}for(var wn in ke)te(ke,wn)&&(jr&&String(Number(wn))===wn&&wn<ke.length||Bt&&dn["$"+wn]instanceof Symbol||(V.call(/[^\w$]/,wn)?rn.push(Xe(wn,ke)+": "+Xe(ke[wn],ke)):rn.push(wn+": "+Xe(ke[wn],ke))));if(typeof yt=="function")for(var ln=0;ln<Lr.length;ln++)Et.call(ke,Lr[ln])&&rn.push("["+Xe(Lr[ln])+"]: "+Xe(ke[Lr[ln]],ke));return rn}},75:function(Ne,G,_){var g=_(734155);(function(){var R,w,M,P,L,p;typeof performance!="undefined"&&performance!==null&&performance.now?Ne.exports=function(){return performance.now()}:typeof g!="undefined"&&g!==null&&g.hrtime?(Ne.exports=function(){return(R()-L)/1e6},w=g.hrtime,R=function(){var b;return b=w(),b[0]*1e9+b[1]},P=R(),p=g.uptime()*1e9,L=P-p):Date.now?(Ne.exports=function(){return Date.now()-M},M=Date.now()):(Ne.exports=function(){return new Date().getTime()-M},M=new Date().getTime())}).call(this)},134569:function(Ne){"use strict";var G=String.prototype.replace,_=/%20/g,g={RFC1738:"RFC1738",RFC3986:"RFC3986"};Ne.exports={default:g.RFC3986,formatters:{RFC1738:function(R){return G.call(R,_,"+")},RFC3986:function(R){return String(R)}},RFC1738:g.RFC1738,RFC3986:g.RFC3986}},280129:function(Ne,G,_){"use strict";var g=_(458261),R=_(355235),w=_(134569);Ne.exports={formats:w,parse:R,stringify:g}},355235:function(Ne,G,_){"use strict";var g=_(412769),R=Object.prototype.hasOwnProperty,w=Array.isArray,M={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:g.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},P=function(E){return E.replace(/&#(\d+);/g,function(D,B){return String.fromCharCode(parseInt(B,10))})},L=function(E,D){return E&&typeof E=="string"&&D.comma&&E.indexOf(",")>-1?E.split(","):E},p="utf8=%26%2310003%3B",b="utf8=%E2%9C%93",S=function(D,B){var m={},f=B.ignoreQueryPrefix?D.replace(/^\?/,""):D,W=B.parameterLimit===1/0?void 0:B.parameterLimit,X=f.split(B.delimiter,W),z=-1,U,j=B.charset;if(B.charsetSentinel)for(U=0;U<X.length;++U)X[U].indexOf("utf8=")===0&&(X[U]===b?j="utf-8":X[U]===p&&(j="iso-8859-1"),z=U,U=X.length);for(U=0;U<X.length;++U)if(U!==z){var V=X[U],J=V.indexOf("]="),Q=J===-1?V.indexOf("="):J+1,et,ut;Q===-1?(et=B.decoder(V,M.decoder,j,"key"),ut=B.strictNullHandling?null:""):(et=B.decoder(V.slice(0,Q),M.decoder,j,"key"),ut=g.maybeMap(L(V.slice(Q+1),B),function(it){return B.decoder(it,M.decoder,j,"value")})),ut&&B.interpretNumericEntities&&j==="iso-8859-1"&&(ut=P(ut)),V.indexOf("[]=")>-1&&(ut=w(ut)?[ut]:ut),R.call(m,et)?m[et]=g.combine(m[et],ut):m[et]=ut}return m},x=function(E,D,B,m){for(var f=m?D:L(D,B),W=E.length-1;W>=0;--W){var X,z=E[W];if(z==="[]"&&B.parseArrays)X=[].concat(f);else{X=B.plainObjects?Object.create(null):{};var U=z.charAt(0)==="["&&z.charAt(z.length-1)==="]"?z.slice(1,-1):z,j=parseInt(U,10);!B.parseArrays&&U===""?X={0:f}:!isNaN(j)&&z!==U&&String(j)===U&&j>=0&&B.parseArrays&&j<=B.arrayLimit?(X=[],X[j]=f):U!=="__proto__"&&(X[U]=f)}f=X}return f},y=function(D,B,m,f){if(D){var W=m.allowDots?D.replace(/\.([^.[]+)/g,"[$1]"):D,X=/(\[[^[\]]*])/,z=/(\[[^[\]]*])/g,U=m.depth>0&&X.exec(W),j=U?W.slice(0,U.index):W,V=[];if(j){if(!m.plainObjects&&R.call(Object.prototype,j)&&!m.allowPrototypes)return;V.push(j)}for(var J=0;m.depth>0&&(U=z.exec(W))!==null&&J<m.depth;){if(J+=1,!m.plainObjects&&R.call(Object.prototype,U[1].slice(1,-1))&&!m.allowPrototypes)return;V.push(U[1])}return U&&V.push("["+W.slice(U.index)+"]"),x(V,B,m,f)}},A=function(D){if(!D)return M;if(D.decoder!==null&&D.decoder!==void 0&&typeof D.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof D.charset!="undefined"&&D.charset!=="utf-8"&&D.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var B=typeof D.charset=="undefined"?M.charset:D.charset;return{allowDots:typeof D.allowDots=="undefined"?M.allowDots:!!D.allowDots,allowPrototypes:typeof D.allowPrototypes=="boolean"?D.allowPrototypes:M.allowPrototypes,allowSparse:typeof D.allowSparse=="boolean"?D.allowSparse:M.allowSparse,arrayLimit:typeof D.arrayLimit=="number"?D.arrayLimit:M.arrayLimit,charset:B,charsetSentinel:typeof D.charsetSentinel=="boolean"?D.charsetSentinel:M.charsetSentinel,comma:typeof D.comma=="boolean"?D.comma:M.comma,decoder:typeof D.decoder=="function"?D.decoder:M.decoder,delimiter:typeof D.delimiter=="string"||g.isRegExp(D.delimiter)?D.delimiter:M.delimiter,depth:typeof D.depth=="number"||D.depth===!1?+D.depth:M.depth,ignoreQueryPrefix:D.ignoreQueryPrefix===!0,interpretNumericEntities:typeof D.interpretNumericEntities=="boolean"?D.interpretNumericEntities:M.interpretNumericEntities,parameterLimit:typeof D.parameterLimit=="number"?D.parameterLimit:M.parameterLimit,parseArrays:D.parseArrays!==!1,plainObjects:typeof D.plainObjects=="boolean"?D.plainObjects:M.plainObjects,strictNullHandling:typeof D.strictNullHandling=="boolean"?D.strictNullHandling:M.strictNullHandling}};Ne.exports=function(E,D){var B=A(D);if(E===""||E===null||typeof E=="undefined")return B.plainObjects?Object.create(null):{};for(var m=typeof E=="string"?S(E,B):E,f=B.plainObjects?Object.create(null):{},W=Object.keys(m),X=0;X<W.length;++X){var z=W[X],U=y(z,m[z],B,typeof E=="string");f=g.merge(f,U,B)}return B.allowSparse===!0?f:g.compact(f)}},458261:function(Ne,G,_){"use strict";var g=_(937478),R=_(412769),w=_(134569),M=Object.prototype.hasOwnProperty,P={brackets:function(f){return f+"[]"},comma:"comma",indices:function(f,W){return f+"["+W+"]"},repeat:function(f){return f}},L=Array.isArray,p=Array.prototype.push,b=function(m,f){p.apply(m,L(f)?f:[f])},S=Date.prototype.toISOString,x=w.default,y={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:R.encode,encodeValuesOnly:!1,format:x,formatter:w.formatters[x],indices:!1,serializeDate:function(f){return S.call(f)},skipNulls:!1,strictNullHandling:!1},A=function(f){return typeof f=="string"||typeof f=="number"||typeof f=="boolean"||typeof f=="symbol"||typeof f=="bigint"},E={},D=function m(f,W,X,z,U,j,V,J,Q,et,ut,it,yt,ft,Bt,St){for(var Et=f,Z=St,q=0,bt=!1;(Z=Z.get(E))!==void 0&&!bt;){var Ct=Z.get(f);if(q+=1,typeof Ct!="undefined"){if(Ct===q)throw new RangeError("Cyclic object value");bt=!0}typeof Z.get(E)=="undefined"&&(q=0)}if(typeof J=="function"?Et=J(W,Et):Et instanceof Date?Et=ut(Et):X==="comma"&&L(Et)&&(Et=R.maybeMap(Et,function(ee){return ee instanceof Date?ut(ee):ee})),Et===null){if(U)return V&&!ft?V(W,y.encoder,Bt,"key",it):W;Et=""}if(A(Et)||R.isBuffer(Et)){if(V){var nt=ft?W:V(W,y.encoder,Bt,"key",it);return[yt(nt)+"="+yt(V(Et,y.encoder,Bt,"value",it))]}return[yt(W)+"="+yt(String(Et))]}var ht=[];if(typeof Et=="undefined")return ht;var At;if(X==="comma"&&L(Et))ft&&V&&(Et=R.maybeMap(Et,V)),At=[{value:Et.length>0?Et.join(",")||null:void 0}];else if(L(J))At=J;else{var Ot=Object.keys(Et);At=Q?Ot.sort(Q):Ot}for(var xt=z&&L(Et)&&Et.length===1?W+"[]":W,Dt=0;Dt<At.length;++Dt){var Yt=At[Dt],ie=typeof Yt=="object"&&typeof Yt.value!="undefined"?Yt.value:Et[Yt];if(!(j&&ie===null)){var re=L(Et)?typeof X=="function"?X(xt,Yt):xt:xt+(et?"."+Yt:"["+Yt+"]");St.set(f,q);var Pt=g();Pt.set(E,St),b(ht,m(ie,re,X,z,U,j,X==="comma"&&ft&&L(Et)?null:V,J,Q,et,ut,it,yt,ft,Bt,Pt))}}return ht},B=function(f){if(!f)return y;if(f.encoder!==null&&typeof f.encoder!="undefined"&&typeof f.encoder!="function")throw new TypeError("Encoder has to be a function.");var W=f.charset||y.charset;if(typeof f.charset!="undefined"&&f.charset!=="utf-8"&&f.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var X=w.default;if(typeof f.format!="undefined"){if(!M.call(w.formatters,f.format))throw new TypeError("Unknown format option provided.");X=f.format}var z=w.formatters[X],U=y.filter;return(typeof f.filter=="function"||L(f.filter))&&(U=f.filter),{addQueryPrefix:typeof f.addQueryPrefix=="boolean"?f.addQueryPrefix:y.addQueryPrefix,allowDots:typeof f.allowDots=="undefined"?y.allowDots:!!f.allowDots,charset:W,charsetSentinel:typeof f.charsetSentinel=="boolean"?f.charsetSentinel:y.charsetSentinel,delimiter:typeof f.delimiter=="undefined"?y.delimiter:f.delimiter,encode:typeof f.encode=="boolean"?f.encode:y.encode,encoder:typeof f.encoder=="function"?f.encoder:y.encoder,encodeValuesOnly:typeof f.encodeValuesOnly=="boolean"?f.encodeValuesOnly:y.encodeValuesOnly,filter:U,format:X,formatter:z,serializeDate:typeof f.serializeDate=="function"?f.serializeDate:y.serializeDate,skipNulls:typeof f.skipNulls=="boolean"?f.skipNulls:y.skipNulls,sort:typeof f.sort=="function"?f.sort:null,strictNullHandling:typeof f.strictNullHandling=="boolean"?f.strictNullHandling:y.strictNullHandling}};Ne.exports=function(m,f){var W=m,X=B(f),z,U;typeof X.filter=="function"?(U=X.filter,W=U("",W)):L(X.filter)&&(U=X.filter,z=U);var j=[];if(typeof W!="object"||W===null)return"";var V;f&&f.arrayFormat in P?V=f.arrayFormat:f&&"indices"in f?V=f.indices?"indices":"repeat":V="indices";var J=P[V];if(f&&"commaRoundTrip"in f&&typeof f.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Q=J==="comma"&&f&&f.commaRoundTrip;z||(z=Object.keys(W)),X.sort&&z.sort(X.sort);for(var et=g(),ut=0;ut<z.length;++ut){var it=z[ut];X.skipNulls&&W[it]===null||b(j,D(W[it],it,J,Q,X.strictNullHandling,X.skipNulls,X.encode?X.encoder:null,X.filter,X.sort,X.allowDots,X.serializeDate,X.format,X.formatter,X.encodeValuesOnly,X.charset,et))}var yt=j.join(X.delimiter),ft=X.addQueryPrefix===!0?"?":"";return X.charsetSentinel&&(X.charset==="iso-8859-1"?ft+="utf8=%26%2310003%3B&":ft+="utf8=%E2%9C%93&"),yt.length>0?ft+yt:""}},412769:function(Ne,G,_){"use strict";var g=_(134569),R=Object.prototype.hasOwnProperty,w=Array.isArray,M=function(){for(var m=[],f=0;f<256;++f)m.push("%"+((f<16?"0":"")+f.toString(16)).toUpperCase());return m}(),P=function(f){for(;f.length>1;){var W=f.pop(),X=W.obj[W.prop];if(w(X)){for(var z=[],U=0;U<X.length;++U)typeof X[U]!="undefined"&&z.push(X[U]);W.obj[W.prop]=z}}},L=function(f,W){for(var X=W&&W.plainObjects?Object.create(null):{},z=0;z<f.length;++z)typeof f[z]!="undefined"&&(X[z]=f[z]);return X},p=function m(f,W,X){if(!W)return f;if(typeof W!="object"){if(w(f))f.push(W);else if(f&&typeof f=="object")(X&&(X.plainObjects||X.allowPrototypes)||!R.call(Object.prototype,W))&&(f[W]=!0);else return[f,W];return f}if(!f||typeof f!="object")return[f].concat(W);var z=f;return w(f)&&!w(W)&&(z=L(f,X)),w(f)&&w(W)?(W.forEach(function(U,j){if(R.call(f,j)){var V=f[j];V&&typeof V=="object"&&U&&typeof U=="object"?f[j]=m(V,U,X):f.push(U)}else f[j]=U}),f):Object.keys(W).reduce(function(U,j){var V=W[j];return R.call(U,j)?U[j]=m(U[j],V,X):U[j]=V,U},z)},b=function(f,W){return Object.keys(W).reduce(function(X,z){return X[z]=W[z],X},f)},S=function(m,f,W){var X=m.replace(/\+/g," ");if(W==="iso-8859-1")return X.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(X)}catch(z){return X}},x=function(f,W,X,z,U){if(f.length===0)return f;var j=f;if(typeof f=="symbol"?j=Symbol.prototype.toString.call(f):typeof f!="string"&&(j=String(f)),X==="iso-8859-1")return escape(j).replace(/%u[0-9a-f]{4}/gi,function(et){return"%26%23"+parseInt(et.slice(2),16)+"%3B"});for(var V="",J=0;J<j.length;++J){var Q=j.charCodeAt(J);if(Q===45||Q===46||Q===95||Q===126||Q>=48&&Q<=57||Q>=65&&Q<=90||Q>=97&&Q<=122||U===g.RFC1738&&(Q===40||Q===41)){V+=j.charAt(J);continue}if(Q<128){V=V+M[Q];continue}if(Q<2048){V=V+(M[192|Q>>6]+M[128|Q&63]);continue}if(Q<55296||Q>=57344){V=V+(M[224|Q>>12]+M[128|Q>>6&63]+M[128|Q&63]);continue}J+=1,Q=65536+((Q&1023)<<10|j.charCodeAt(J)&1023),V+=M[240|Q>>18]+M[128|Q>>12&63]+M[128|Q>>6&63]+M[128|Q&63]}return V},y=function(f){for(var W=[{obj:{o:f},prop:"o"}],X=[],z=0;z<W.length;++z)for(var U=W[z],j=U.obj[U.prop],V=Object.keys(j),J=0;J<V.length;++J){var Q=V[J],et=j[Q];typeof et=="object"&&et!==null&&X.indexOf(et)===-1&&(W.push({obj:j,prop:Q}),X.push(et))}return P(W),f},A=function(f){return Object.prototype.toString.call(f)==="[object RegExp]"},E=function(f){return!f||typeof f!="object"?!1:!!(f.constructor&&f.constructor.isBuffer&&f.constructor.isBuffer(f))},D=function(f,W){return[].concat(f,W)},B=function(f,W){if(w(f)){for(var X=[],z=0;z<f.length;z+=1)X.push(W(f[z]));return X}return W(f)};Ne.exports={arrayToObject:L,assign:b,combine:D,compact:y,decode:S,encode:x,isBuffer:E,isRegExp:A,maybeMap:B,merge:p}},654087:function(Ne,G,_){for(var g=_(75),R=typeof window=="undefined"?_.g:window,w=["moz","webkit"],M="AnimationFrame",P=R["request"+M],L=R["cancel"+M]||R["cancelRequest"+M],p=0;!P&&p<w.length;p++)P=R[w[p]+"Request"+M],L=R[w[p]+"Cancel"+M]||R[w[p]+"CancelRequest"+M];if(!P||!L){var b=0,S=0,x=[],y=1e3/60;P=function(A){if(x.length===0){var E=g(),D=Math.max(0,y-(E-b));b=D+E,setTimeout(function(){var B=x.slice(0);x.length=0;for(var m=0;m<B.length;m++)if(!B[m].cancelled)try{B[m].callback(b)}catch(f){setTimeout(function(){throw f},0)}},Math.round(D))}return x.push({handle:++S,callback:A,cancelled:!1}),S},L=function(A){for(var E=0;E<x.length;E++)x[E].handle===A&&(x[E].cancelled=!0)}}Ne.exports=function(A){return P.call(R,A)},Ne.exports.cancel=function(){L.apply(R,arguments)},Ne.exports.polyfill=function(A){A||(A=R),A.requestAnimationFrame=P,A.cancelAnimationFrame=L}},174219:function(Ne,G){"use strict";var _;_={value:!0},G.Z=void 0;var g={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};G.Z=g},585369:function(Ne,G){"use strict";var _;_={value:!0},G.Z=void 0;var g={locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",yearFormat:"YYYY\u5E74",dayFormat:"D\u65E5",dateFormat:"YYYY\u5E74M\u6708D\u65E5",dateTimeFormat:"YYYY\u5E74M\u6708D\u65E5 HH\u65F6mm\u5206ss\u79D2",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA"},R=g;G.Z=R},752376:function(Ne,G,_){"use strict";_.d(G,{Z:function(){return je}});var g=_(671002),R=_(601413),w=_(297685),M=_(700091),P=_(667294);function L(Zt){var $t=[];return P.Children.forEach(Zt,function(Mt){$t.push(Mt)}),$t}function p(Zt,$t){var Mt=null;return Zt&&Zt.forEach(function(be){Mt||!be||be.key===$t&&(Mt=be)}),Mt}function b(Zt,$t){var Mt=[],be={},Nt=[],Ht=null;return Zt.forEach(function(dt){dt&&(dt.key&&p($t,dt.key)?(Nt.length&&(be[dt.key]=Nt,Nt=[]),Ht=dt.key):dt.key&&Nt.push(dt))}),Ht||(Mt=Mt.concat(Nt)),$t.forEach(function(dt){dt&&(dt.key&&be.hasOwnProperty(dt.key)&&(Mt=Mt.concat(be[dt.key])),Mt.push(dt),dt.key===Ht&&(Mt=Mt.concat(Nt)))}),Mt}function S(Zt,$t,Mt){var be;return typeof Zt=="function"?be=Zt({key:$t,index:Mt}):be=Zt,be}function x(Zt){return Zt&&Zt.children}var y=!(typeof window!="undefined"&&window.document&&window.document.createElement),A=y?P.useEffect:P.useLayoutEffect,E=_(974902),D=_(973935),B=_(364687),m=_.n(B),f=_(115861),W=_(215671),X=_(143144),z=_(952191);function U(){}var j=z.rV,V=/.*shadow$/gi,J=!(typeof window!="undefined"&&window.document&&window.document.createElement),Q=Date.now;function et(Zt){if(typeof Zt=="string"){if(Zt.charAt(0).match(/m/i)){var $t=document.createElementNS("http://www.w3.org/2000/svg","path");return $t.setAttributeNS(null,"d",Zt),$t}return document.querySelector(Zt)}else if(Zt.style)return Zt;throw new Error("Error while parsing the path")}var ut={type:"to",duration:450,delay:0,repeat:0,repeatDelay:0,appearTo:0,yoyo:!1,ease:"easeInOutQuad",onStart:U,onUpdate:U,onComplete:U,onRepeat:U,startAt:{}},it={animation:{},paused:!1,reverse:!1,delay:0,repeat:0,repeatDelay:0,yoyo:!1,moment:null,resetStyle:!1,regionStartTime:0,regionEndTime:void 0,onChange:U,onChangeTimeline:U},yt=function($t){var Mt={};return Object.keys(it).forEach(function(be){Mt[be]=typeof $t[be]=="undefined"?it[be]:$t[be]}),Mt.delay&&(Mt.delay=Math.round(Mt.delay)),$t.repeatDelay&&(Mt.repeatDelay=Math.round(Mt.repeatDelay)),Mt},ft=function($t){if(Array.isArray($t)||!$t)return $t;if($t.length){var Mt=Array.prototype.slice.call($t);return Mt.length?[$t]:Mt}return[$t]},Bt=function($t){return $t.length===1?$t[0]:$t},St=function($t,Mt){var be=Mt.appearTo,Nt=be===void 0?0:be,Ht=Mt.delay,dt=Ht===void 0?0:Ht,Gt=Mt.duration,tt=Gt===void 0?450:Gt,ot=Mt.repeat,k=Mt.repeatDelay;if(typeof Nt=="string")return 0;var C,I=0;return typeof $t.appearTo=="number"?$t.appearTo:(typeof $t.appearTo=="string"&&$t.appearTo.charAt(1)==="="&&(I=parseFloat($t.appearTo.replace("=",""))),C=Nt+dt+tt+I,ot===-1?C=Number.MAX_VALUE:ot&&(C=Nt+dt+tt*(ot+1)+(k||0)*ot+I),C)},Et=function($t){switch($t){case"opacity":case"scaleX":case"scaleY":case"scale":return 1;default:return 0}},Z=function($t,Mt){var be=typeof $t=="string"?parseFloat($t):$t;return q(be,Mt.vars,1,Mt.count,Mt.unit)},q=function($t,Mt,be){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",Ht=arguments.length>4?arguments[4]:void 0;return Nt==="+="||Nt==="-="?$t+Mt*be+(Ht||0):(Mt-$t)*be+$t+(Ht||0)},bt=function($t){if(!$t)return{};var Mt=typeof window!="undefined"&&document.defaultView?document.defaultView.getComputedStyle($t):{};return Mt},Ct={margin:1,padding:1,borderWidth:1,borderRadius:1};function nt(Zt){var $t=Zt.target,Mt=Zt.computedStyle,be=Zt.style,Nt=Zt.value,Ht=Zt.startUnit,dt=Zt.endUnit,Gt=Zt.fixed,tt=Zt.isOriginWidth,ot=Zt.useCurrentTarget;if(J)return Nt;var k=/(?:Left|Right|Width|X)/i.test(be)||tt;k=be==="padding"||be==="marign"?!0:k;var C=be.indexOf("border")!==-1||be.indexOf("translate")!==-1||be==="transformOrigin"||ot?$t:$t.parentNode||document.body;C=Gt?document.body:C;var I,H,gt;switch(Ht){case"%":I=parseFloat(Nt)/100*(k?C.clientWidth:C.clientHeight);break;case"vw":I=parseFloat(Nt)*document.body.clientWidth/100;break;case"vh":I=parseFloat(Nt)*document.body.clientHeight/100;break;case"em":Mt?I=parseFloat(Nt)*parseFloat(Mt.fontSize):(gt="em",I=parseFloat(Nt));break;case"rem":{Mt?(H=window.getComputedStyle(document.getElementsByTagName("html")[0]),I=parseFloat(Nt)*parseFloat(H.fontSize)):(gt="rem",I=parseFloat(Nt));break}default:I=parseFloat(Nt);break}switch(dt){case"%":I=I?I*100/(k?C.clientWidth:C.clientHeight):0;break;case"vw":I=parseFloat(Nt)/document.body.clientWidth*100;break;case"vh":I=parseFloat(Nt)/document.body.clientHeight*100;break;case"em":Mt?I=parseFloat(Nt)/parseFloat(Mt.fontSize):(gt="em",I=parseFloat(Nt));break;case"rem":{Mt?(H=H||window.getComputedStyle(document.getElementsByTagName("html")[0]),I=parseFloat(Nt)/parseFloat(H.fontSize)):(gt="rem",I=parseFloat(Nt));break}default:break}return gt&&console.warn("Warning: Element is not 'DOM, can not use '".concat(gt,"', automatically convert to animation units.")),I}function ht(Zt){if(typeof Zt=="string")return Zt;var $t=Zt.perspective,Mt=Zt.rotate,be=Zt.rotateX,Nt=Zt.rotateY,Ht=Zt.scaleX,dt=Zt.scaleY,Gt=Zt.scaleZ,tt=Zt.skewX,ot=Zt.skewY,k=typeof Zt.translateX=="string"?Zt.translateX:"".concat(Zt.translateX,"px"),C=typeof Zt.translateY=="string"?Zt.translateY:"".concat(Zt.translateY,"px"),I=typeof Zt.translateZ=="string"?Zt.translateZ:"".concat(Zt.translateZ,"px"),H=tt||ot?"skew(".concat(tt,"deg,").concat(ot,"deg)"):"",gt=Mt?"rotate(".concat(Mt,"deg)"):"",zt=Ht!==1||dt!==1||Gt!==1?"scale3d(".concat(Ht,",").concat(dt,",").concat(Gt,")"):"",Rt=be?"rotateX(".concat(be,"deg)"):"",qt=Nt?"rotateY(".concat(Nt,"deg)"):"",Te=$t?"perspective(".concat($t,"px)"):"",he=zt||gt||Rt||qt||H?"":"translate(0px, 0px)",Ue=Zt.translateZ?"translate3d(".concat(k,",").concat(C,",").concat(I,")"):(Zt.translateX||Zt.translateY)&&"translate(".concat(k,",").concat(C,")")||he;return"".concat(Te," ").concat(Ue," ").concat(zt," ").concat(gt," ").concat(Rt," ").concat(qt," ").concat(H).trim()}var At={brightness:1,saturate:1,contrast:1,grayScale:0,hueRotate:"0deg",sepia:0,invert:0},Ot=(0,X.Z)(function Zt(){var $t=this;(0,W.Z)(this,Zt),this.push=function(Mt){ft(Mt).forEach(function(be){$t[be.className]=be})},this.register=this.push}),xt=new Ot,Dt=/%|vw|vh|em|rem/i,Yt=(0,X.Z)(function Zt($t){var Mt=this;(0,W.Z)(this,Zt),this.props=void 0,this.computedStyle=void 0,this.root=void 0,this.index=void 0,this.targetIndex=void 0,this.tweenVars={},this.transformName=void 0,this.filterName=void 0,this.target=void 0,this.start={},this.startAt={},this.propsData={data:{},type:{},unit:{},count:{},splitStr:{},isTransform:{}},this.setDefaultData=function(){var be=Mt.props;for(var Nt in be){var Ht=be[Nt],dt=Ht.split&&Ht.split(/\s+|,/).length>1||Nt.match(/color|fill|stroke/i)||Nt.match(/shadow/i),Gt=(Nt==="background"||Nt==="backgroundImage")&&Ht.match(/[a-z|-]+\(([\s\S]*?)\)/gi);if(Gt){Mt.propsData.data[Nt]={value:Ht,plugin:xt.GradientsPlugin};continue}if(dt){Mt.propsData.data[Nt]={value:Ht,plugin:xt.ArrayPlugin};continue}var tt=(0,z.Lo)(Nt),ot=Mt.getTweenData(tt,be[Nt]);Mt.propsData.data[tt]=ot.data[tt],Mt.propsData.type[tt]=ot.type[tt],Mt.propsData.unit[tt]=ot.unit[tt],Mt.propsData.count[tt]=ot.count[tt],Mt.propsData.isTransform[tt]=(0,z.dt)(tt)==="transform",ot.splitStr[tt]&&(Mt.propsData.splitStr[tt]=ot.splitStr[tt])}},this.getTweenData=function(be,Nt){var Ht={data:{},isTransform:{},type:{},unit:{},count:{},splitStr:{}},dt=Nt;Ht.data[be]=dt;var Gt=typeof Ht.data[be]=="string";Ht.unit[be]=Gt?Ht.data[be].replace(/[^a-z|%]/g,""):"",Ht.count[be]=Gt?Ht.data[be].replace(/[^+|=|-]/g,""):"";var tt=Gt?parseFloat(Ht.data[be].replace(/[a-z|%|=]/g,"")):Ht.data[be];return Ht.data[be]=!tt&&tt!==0?Ht.data[be]:tt,Ht},this.setStartAtValue=function(be,Nt){return(0,g.Z)(Nt)==="object"?Z(be,Nt):be},this.getAnimStart=function(){var be=Mt.target,Nt=Mt.root,Ht=Mt.targetIndex,dt=Mt.propsData,Gt=Mt.startAt,tt=Mt.start,ot=Mt.tweenVars,k={};for(var C in Gt)k[(0,z.Lo)(C)]=Gt[C];Mt.computedStyle=Mt.computedStyle||bt(be),ot.style=ot.style||{};var I,H;for(var gt in dt.data){var zt,Rt=dt.data[gt];if(Rt.plugin){var qt=new Rt.plugin(Rt.value,gt);qt.target=be,qt.root=Nt,qt.parent=parent,qt.index=Mt.index,qt.targetIndex=Ht,qt.tweenVars=ot,qt.startAt=Mt.startAt,qt.computedStyle=Mt.computedStyle,Rt.plugin=qt,tt[gt]=qt.getAnimStart();continue}var Te=(0,z.dt)(gt),he=Te==="transform"?Mt.transformName:Te;he=Te==="filter"?Mt.filterName:he;var Ue=ot.style[he],cr=Ue!=null?Ue:Mt.computedStyle[Te],Ve=(zt=k[gt])!==null&&zt!==void 0?zt:cr,Tr=dt.unit[gt],nn="";if(Te==="transform"){I=I||(Ve===Ue?(0,R.Z)({},Ue):(0,z.Ck)(Mt.computedStyle[Mt.transformName]));var He=I[gt];if(k&&gt in k){var ur,Ar;He=Mt.setStartAtValue((ur=(Ar=k[gt].vars)!==null&&Ar!==void 0?Ar:Ue==null?void 0:Ue[gt])!==null&&ur!==void 0?ur:He,k[gt]),nn=k[gt].unit,gt==="scale"?(I.scaleX=He,I.scaleY=He):I[gt]=He}nn!==Tr&&(He=nt({target:be,computedStyle:Mt.computedStyle,style:Te,value:He,startUnit:nn,endUnit:Tr}),gt==="scale"?(I.scaleX=He,I.scaleY=He):I[gt]=He),tt[Mt.transformName]=I}else if(Te==="filter"){var Cr=z._T.filterConvert[gt]||gt;H=H||(Ve===Ue?(0,R.Z)({},Ue):(0,z.GX)(cr)||{}),H[Cr]=H[Cr]||At[Cr];var se=H[Cr];if(k&&gt in k){var Xt;se=Mt.setStartAtValue((Xt=k[gt].vars)!==null&&Xt!==void 0?Xt:se,k[gt]),nn=k[gt].unit,H[Cr]=se}if(Tr!==nn){var fe;H[Cr]=nt({target:be,computedStyle:Mt.computedStyle,style:Te,value:se,startUnit:nn,endUnit:Tr,fixed:((fe=Mt.computedStyle)===null||fe===void 0?void 0:fe.position)==="fixed"})}tt[Mt.filterName]=H}else{var Me;if(Ve=(Me=k[gt])!==null&&Me!==void 0?Me:cr,(!Ve||Ve==="none"||Ve==="auto")&&(Ve=""),Tr=dt.unit[Te],nn=(0,g.Z)(Ve)==="object"?Ve.unit:"".concat(Ve).replace(/[^a-z|%]/g,""),Ve=Mt.setStartAtValue(cr,k[gt]),Tr!==nn){var pe;Ve=nt({target:be,computedStyle:Mt.computedStyle,style:Te,value:parseFloat(Ve),startUnit:nn,endUnit:Tr,fixed:((pe=Mt.computedStyle)===null||pe===void 0?void 0:pe.position)==="fixed"})}var Re=parseFloat(Ve);tt[Te]=isNaN(Re)?Et(Te):Re}}return tt},this.render=function(be){var Nt=Mt.propsData,Ht=Mt.start,dt=Mt.tweenVars,Gt=dt.style||{};Ht[Mt.transformName]&&!Gt[Mt.transformName]&&(Gt[Mt.transformName]=(0,R.Z)({},Ht[Mt.transformName])),Ht[Mt.filterName]&&!Gt[Mt.filterName]&&(Gt[Mt.filterName]=(0,R.Z)({},Ht[Mt.filterName]));var tt=Gt[Mt.transformName],ot=Gt[Mt.filterName],k=Nt.data,C=Nt.unit,I=Nt.count,H=Nt.isTransform;for(var gt in k){var zt=k[gt];if(zt.plugin){Gt[gt]=zt.plugin.render(be);continue}var Rt=H[gt],qt=Rt?Ht[Mt.transformName][gt]:Ht[gt],Te=C[gt],he=I[gt];if(Rt){if(gt==="scale"){var Ue=Ht[Mt.transformName].scaleX,cr=Ht[Mt.transformName].scaleY;he.charAt(1)==="="?(tt.scaleX=Ue+zt*be,tt.scaleY=cr+zt*be):(tt.scaleX=(zt-Ue)*be+Ue,tt.scaleY=(zt-cr)*be+cr)}else tt[gt]=q(parseFloat(qt),zt,be,he,Te);tt.text=ht(Gt[Mt.transformName])}else if(z._T.filter.indexOf(gt)>=0){var Ve=z._T.filterConvert[gt]||gt;qt=parseFloat(Ht[Mt.filterName][Ve])||0,ot[Ve]=q(qt,zt,be,he,Te),ot.text="";for(var Tr in ot)Tr!=="text"&&(ot.text="".concat(ot.text," ").concat(Tr,"(").concat(ot[Tr],")").trim())}else{var nn=(0,z.YJ)(gt,0);nn=typeof nn=="number"?0:nn.replace(/[^a-z|%]/g,""),Te=Te||nn,typeof zt=="string"?Gt[gt]=zt:Gt[gt]=q(qt,zt,be,he,Te)}}return Gt},this.props=$t,this.transformName=(0,z.Yf)("transform"),this.filterName=(0,z.Yf)("filter")||"filter",this.setDefaultData()});Yt.key="style",Yt.className="style";var ie=Yt,re=_(497326),Pt=_(360136),ee=_(973568),ce=(0,X.Z)(function Zt($t,Mt){(0,W.Z)(this,Zt),this.value=void 0,this.key=void 0,this.root=void 0,this.index=void 0,this.style={},this.start={},this.startAt={},this.target=void 0,this.value=$t,this.key=Mt});ce.className=void 0,ce.key=void 0;var Ut=function(Zt){(0,Pt.Z)(Mt,Zt);var $t=(0,ee.Z)(Mt);function Mt(be,Nt){var Ht;(0,W.Z)(this,Mt),Ht=$t.call(this,be,Nt),Ht.value=void 0,Ht.key=void 0,Ht.start=[],Ht.tweenVars={},Ht.vars={},Ht.computedStyle=void 0,Ht.propsData={data:[],unit:[],count:[]},Ht.setDefaultData=function(tt,ot){var k=(0,re.Z)(Ht),C=k.propsData,I=k.value,H=(0,E.Z)(I);if(tt==="color"){var gt;H[3]=(gt=H[3])!==null&&gt!==void 0?gt:1}C.type=tt,C.data=H.map(function(zt){return!parseFloat(zt)&&parseFloat(zt)!==0?zt:parseFloat(zt)}),C.unit=H.map(function(zt){return zt.toString().replace(/[^a-z|%]/g,"")}),C.count=H.map(function(zt){return zt.toString().replace(/[^+|=|-]/g,"")}),ot&&(C.splitStr=ot)},Ht.convertToMarksArray=function(tt,ot,k,C){var I=(k||"").toString().replace(/[^a-z|%]/g,""),H=typeof C=="number"?tt[C]:void 0;return I===H?parseFloat(k):!parseFloat(k)&&parseFloat(k)!==0?k:nt({target:Ht.target,computedStyle:Ht.computedStyle,style:ot,value:k,startUnit:I,endUnit:H,isOriginWidth:ot==="transformOrigin"&&!C})},Ht.getAnimStart=function(){var tt,ot,k,C,I=(0,re.Z)(Ht),H=I.startAt,gt=I.target,zt=I.key,Rt=I.propsData,qt=I.computedStyle,Te=I.tweenVars,he=(tt=(ot=(k=H==null?void 0:H[zt])!==null&&k!==void 0?k:qt?(C=Te.style)===null||C===void 0?void 0:C[zt]:Te[zt])!==null&&ot!==void 0?ot:(qt||gt)[zt])!==null&&tt!==void 0?tt:"",Ue=Rt.data.indexOf("inset"),cr;if(Ue!==-1&&!he.match("inset")&&Rt.type==="shadow"&&(cr=he,he=""),(!he||he==="none"||he==="auto")&&(he=""),he=Rt.type==="shadow"?(0,z.hy)(he,zt):he,he=Rt.type==="color"?(0,z.lu)(he):he,he=Rt.type==="string"?he.split(/[\s|,]/):he,Ct[zt]){var Ve,Tr,nn,He;he[1]=(Ve=he[1])!==null&&Ve!==void 0?Ve:he[0],he[2]=(Tr=he[2])!==null&&Tr!==void 0?Tr:he[0],he[3]=(nn=(He=he[3])!==null&&He!==void 0?He:he[1])!==null&&nn!==void 0?nn:he[0]}var ur=Rt.unit,Ar=he.map(function(Cr,se){return parseFloat(Cr).toString()==="NaN"?Cr:Ht.convertToMarksArray(ur,zt,Cr,se)});return Ht.start=Ar.concat(Ue>=0?"inset":[]),Ht.start.oldShadow=cr,Ht.start},Ht.render=function(tt){var ot=(0,re.Z)(Ht),k=ot.start,C=ot.propsData,I=C.type,H=C.splitStr,gt=C.data,zt=C.count,Rt=C.unit,qt=gt.map(function(Ve,Tr){return typeof Ve=="string"?Ve:q(k[Tr],Ve,tt,zt[Tr],Rt[Tr])});switch(I){case"string":qt=qt.join(H);break;case"color":qt=(0,z.Lq)(qt);break;case"shadow":{var Te=qt.indexOf("inset")>=0,he=Te?qt.filter(function(Ve){return Ve!=="inset"}):qt,Ue=he.slice(0,he.length-4).map(function(Ve){return typeof Ve=="number"?"".concat(Ve,"px"):Ve}),cr=(0,z.Lq)(he.slice(he.length-4,he.length));qt="".concat(k.oldShadow?"".concat(k.oldShadow,","):"").concat(Ue.join(" ")," ").concat(cr," ").concat(Te?"inset":"").trim();break}default:break}return qt},Ht.value=be,Ht.key=Nt;var dt="",Gt="";return typeof be=="string"&&(Nt.match(V)?(Ht.value=(0,z.hy)(be,Nt),dt="shadow"):Nt.match(/color|fill|stroke/i)||be.match(j)?(Ht.value=(0,z.lu)(be),dt="color"):(Gt=be.replace(/[^\s|,]/g,"").replace(/\s+/g," "),Ht.value=be.split(/[\s|,]/),dt="string")),Ht.setDefaultData(dt,Gt),Ht}return(0,X.Z)(Mt)}(ce);Ut.className="ArrayPlugin";var te=Ut,ye={linear:{"to top":"0deg","to top right":"45deg","to right top":"45deg","to right":"90deg","to right bottom":"135deg","to bottom right":"135deg","to bottom":"180deg","to bottom left":"225deg","to left bottom":"225deg","to left":"270deg","to left top":"315deg","to top left":"315deg"},radial:{center:"50% 50%",top:"50% 0%","top right":"100% 0%","right top":"100% 0%",right:"100% 50%","right bottom":"100% 100%","bottom right":"100% 100%",bottom:"50% 100%","bottom left":"0% 100%","left bottom":"0% 100%",left:"0% 50%","left top":"0% 0%","top left":"0% 0%"}},ge=["closest-side","closest-corner","farthest-side","farthest-corner"],Kt=function($t,Mt,be){console.warn("Warning: The gradient ".concat($t,"(").concat(Mt," => ").concat(be,") is different, which has been automatically converted to animation gradient ").concat($t,"(").concat(be,")."))},xe=function($t){return $t==="url"||$t.indexOf("image")>=0||$t==="paint"||$t==="cross-fade"||$t==="element"},Tt=function(Zt){(0,Pt.Z)(Mt,Zt);var $t=(0,ee.Z)(Mt);function Mt(be){var Nt;return(0,W.Z)(this,Mt),Nt=$t.call(this,be,"backgroundImage"),Nt.value=void 0,Nt.tweenVars={},Nt.vars=[],Nt.computedStyle=void 0,Nt.defaultStartVars=[],Nt.getPosition=function(Ht){return Ht.map(function(dt){return{data:parseFloat(dt),unit:dt.replace(/[^a-z|%]/g,"")}})},Nt.getAngle=function(Ht,dt){var Gt=Ht.replace(/-|gradient|repeating]/g,""),tt,ot,k,C;switch(Gt){case"linear":{k=Nt.getPosition((ye.linear[dt]||dt||ye.linear["to bottom"]).split(" "));break}case"radial":{var I=dt.split(" ");tt=I.find(function(qt){return ge.indexOf(qt)>=0})||ge[3],ot=I.find(function(qt){return qt==="circle"||qt==="ellipse"})||"ellipse";var H=new RegExp("".concat(tt,"|").concat(ot,"|at"),"g"),gt=dt.replace(H,"").trim();C=Nt.getPosition((ye.radial[gt]||gt||ye.radial.center).split(" "));break}case"conic":{var zt=dt.split("at").map(function(qt){return qt.trim()}),Rt=(zt[0]||"").split(" ");ot=Rt[0]||"from",k=Nt.getPosition([Rt[1]||"0deg"]),C=Nt.getPosition((ye.radial[zt[1]]||zt[1]||ye.radial.center).split(" "));break}default:break}return{extent:tt,shape:ot,angle:k,position:C}},Nt.valueToIValue=function(Ht){if(!Ht)return[];var dt=Ht.replace(/\),\s+?(url|radial|conic|linear|repeating|image|element|cross|paint)/,")#,#$1").split("#,#");return dt.map(function(Gt){var tt=Gt.replace(/([a-z|-]+)\((.*)\)/,"$1").trim();if(tt==="url")return{type:tt,values:Gt};var ot=Gt.replace(/([a-z|-]+)\((.*)\)/,"$2").replace(/#([0-9a-f]{6}|[0-9a-f]{3})|(rgb[a]?|hsl)+\(\d+\,[\s+]?\d+[\%]?\,[\s+]?\d+[\%]?(\,\d+)?\)/gi,function(H){return H.replace(/\s+/g,"")}).replace(/\,([a-z|#|\s+])/g,"#,#$1").split("#,#").map(function(H){return H.trim()}),k=ot[0].match(j)?"":ot[0];k&&ot.splice(0,1);var C=Nt.getAngle(tt,k),I=ot.map(function(H){var gt=H.trim().split(/\s+/),zt,Rt=(gt[0].match(j),gt[0]);return Rt&&(gt.splice(0,1),zt=(0,z.lu)(Rt)),{color:zt,positions:gt.map(function(qt){return{data:parseFloat(qt),unit:qt.toString().replace(/[^a-z|%]/g,"")}})}});return{type:tt,angle:C,values:I}})},Nt.getAnimStart=function(){var Ht,dt=(0,re.Z)(Nt),Gt=dt.startAt,tt=dt.key,ot=dt.computedStyle,k=dt.target,C=dt.vars,I=dt.tweenVars,H=(0,R.Z)({},Gt),gt=(Ht=I[tt])!==null&&Ht!==void 0?Ht:(ot||k)[tt];(!gt||gt==="none"||gt==="auto")&&(gt=""),H[tt]=H[tt]||gt,H[tt]=H[tt]?Nt.valueToIValue(H[tt]):Nt.defaultStartVars;var zt=Math.max(C.length,H[tt].length),Rt=(zt===H[tt].length?H[tt]:C).map(function(qt,Te){var he,Ue,cr=H[tt][Te]||Nt.defaultStartVars[Te],Ve=C[Te]||cr;if((!cr||cr.type!==Ve.type)&&(cr.type!==Ve.type&&Kt("type",cr.type,Ve.type),cr=Nt.defaultStartVars[Te]),xe(Ve.type)||typeof Ve.values=="string"||typeof cr.values=="string")return(0,R.Z)({},Ve);if(((he=Ve.angle)===null||he===void 0?void 0:he.extent)!==((Ue=cr.angle)===null||Ue===void 0?void 0:Ue.extent)){var Tr,nn;Kt("extent keyword",(Tr=cr.angle)===null||Tr===void 0?void 0:Tr.extent,(nn=Ve.angle)===null||nn===void 0?void 0:nn.extent)}var He=Math.max(cr.values.length,Ve.values.length),ur=He===cr.values.length?cr.values:Ve.values;return cr.values=ur.map(function(Ar,Cr){var se=cr.values[Cr],Xt=Ve.values[Cr]||se;return(0,R.Z)((0,R.Z)({},se),{},{positions:(Xt||se).positions.map(function(fe,Me){var pe=se?se.positions[Me]||se.positions[se.positions.length-1]:Xt.positions[Xt.positions.length-1],Re=fe||pe;return!pe&&se&&cr.values.length&&(pe={data:100/(cr.values.length-1)*Cr,unit:"%"}),Re.unit!==pe.unit&&Kt("units",pe.unit,Re.unit),{data:pe.data,unit:Re.unit}})})}),cr});return Nt.start=Rt,Nt.start},Nt.render=function(Ht){var dt="",Gt=Math.max(Nt.vars.length,Nt.start.length);return(Gt===Nt.vars.length?Nt.vars:Nt.start).forEach(function(tt,ot){var k=Nt.start[ot],C=Nt.vars[ot]||k;if(xe(C.type)||typeof C.values=="string"||!C.angle){dt+="".concat(dt?",":""," ").concat(C.values).trim();return}var I=Math.max(k.values.length,C.values.length),H=(I===k.values.length?k.values:C.values).map(function(Te,he){var Ue=k.values[he],cr=C.values[he];cr||(cr=Ue);var Ve=Ue.color,Tr=Ue.positions;!Ve&&cr.color&&(Ve=(0,E.Z)(cr.color)),Tr||(Tr=cr.positions.map(function(ur){return(0,R.Z)({},ur)}));var nn=cr.color?cr.color.map(function(ur,Ar){return q(Ve[Ar],ur,Ht)}):cr.color,He=cr.positions.map(function(ur,Ar){return"".concat(q(Tr[Ar].data,ur.data,Ht)).concat(ur.unit)}).join(" ");return"".concat(nn?(0,z.Lq)(nn):nn||""," ").concat(He).trim()}),gt=C.angle,zt=gt.angle&&gt.angle.map(function(Te,he){return"".concat(q(k.angle.angle[he].data,Te.data,Ht)).concat(Te.unit)}).join(" "),Rt=gt.position&&gt.position.map(function(Te,he){return"".concat(q(k.angle.position[he].data,Te.data,Ht)).concat(Te.unit)}).join(" "),qt="".concat(gt.extent||""," ").concat(gt.shape||""," ").concat(zt||""," ").concat(Rt?"at ".concat(Rt):"").trim();dt+="".concat(dt?",":""," ").concat(C.type,"(").concat(qt?"".concat(qt,","):"").concat(H.join(","),")").trim()}),dt},Nt.value=be,Nt.vars=Nt.valueToIValue(be),Nt.defaultStartVars=Nt.vars.map(function(Ht){return xe(Ht.type)||typeof Ht.values=="string"?(0,R.Z)({},Ht):(0,R.Z)((0,R.Z)({},Ht),{},{values:Ht.values.map(function(dt){var Gt;return dt.color&&typeof dt.color!="string"?(Gt=(0,E.Z)(dt.color),Gt[3]=0):Gt=dt.color,{color:Gt,positions:(0,E.Z)(dt.positions)}})})}),Nt}return(0,X.Z)(Mt)}(ce);Tt.className="GradientsPlugin";var Ae=_(654087),br=_.n(Ae),Sr=function(){function Zt(){var $t=this;(0,W.Z)(this,Zt),this.lagThreshold=150,this.adjustedLag=33,this.emptyTime=0,this.elapsed=0,this.frameFPS=1e3/240,this.startTime=0,this.prevTime=0,this.useTimeout=!1,this.lastUpdate=this.startTime,this.nextTime=this.frameFPS,this.req=void 0,this.id=-1,this.tweenId=0,this.tickFn=[],this.state="sleep",this.time=0,this.frame=0,this.removeReq=function(Mt){return $t.useTimeout?clearTimeout(Mt):(0,Ae.cancel)(Mt)},this.tick=function(){var Mt=$t.tickFn;$t.startTime||($t.startTime=Q()-$t.frameFPS,$t.lastUpdate=$t.startTime),$t.elapsed=Q()-$t.lastUpdate,$t.elapsed>$t.lagThreshold&&($t.startTime+=$t.elapsed-$t.adjustedLag),$t.lastUpdate+=$t.elapsed,$t.time=$t.lastUpdate-$t.startTime;var be=$t.time-$t.nextTime;if(be>0){$t.frame++,$t.nextTime+=be+(be>=$t.frameFPS?4:$t.frameFPS-be);for(var Nt=$t.time-$t.prevTime,Ht=0;Ht<Mt.length;Ht++)Mt[Ht].fn({time:$t.time,elapsed:Nt<$t.frameFPS?$t.frameFPS:Nt});$t.prevTime=$t.time}if(!$t.tickFn.length&&($t.emptyTime||($t.emptyTime=$t.time+500),$t.time>=$t.emptyTime)){$t.emptyTime=0,$t.sleep();return}$t.req&&($t.id=$t.req($t.tick))},this.wake=function(){$t.id&&$t.sleep(),$t.req=$t.useTimeout?function(Mt){return setTimeout(Mt,$t.frameFPS)}:br(),$t.tick(),$t.state="wake"},this.sleep=function(){$t.removeReq($t.id),$t.id=-1,$t.req=void 0,$t.state="sleep"},this.add=function(Mt){var be="TweenOneTicker_".concat($t.tweenId);return $t.tweenId+=1,$t.tickFn.findIndex(function(Nt){return Nt.key===be})===-1&&$t.tickFn.push({key:be,fn:Mt}),$t.emptyTime=0,$t.req||$t.wake(),be},this.clear=function(Mt){$t.tickFn=$t.tickFn.filter(function(be){return be.key!==Mt&&be.fn!==Mt})},this.timeout=function(Mt,be){if(typeof Mt!="function")return console.warn("not function");var Nt=$t.time,Ht=$t.add(function(){var dt=$t.time-Nt;dt>=(be||0)&&($t.clear(Ht),Mt())});return Ht},this.interval=function(Mt,be){if(typeof Mt!="function")return console.warn("not function"),null;var Nt=$t.time;return $t.add(function(){var Ht=$t.time-Nt;Ht>=(be||0)&&(Nt=$t.time,Mt())})}}return(0,X.Z)(Zt,[{key:"fps",value:function(Mt,be){this.frameFPS=1e3/(Mt||240),this.nextTime=this.time+this.frameFPS,this.useTimeout=typeof be=="undefined"?this.useTimeout:be,this.useTimeout&&(this.req=function(Nt){return setTimeout(Nt,Mt)})}}]),Zt}(),Mr=new Sr,Pr=Mr,on=function(){function Zt(){var $t=this;(0,W.Z)(this,Zt),this.children=[],this.autoSleep=200,this.tickerKey=void 0,this.startTime=void 0,this.addChild=function(Mt){$t.children.indexOf(Mt)===-1?($t.children.push(Mt),$t.updateTickerState()):$t.start()},this.removeChild=function(Mt){$t.children=$t.children.filter(function(be){return be!==Mt}),$t.updateTickerState()},this.kill=function(Mt){$t.children=$t.children.filter(function(be){var Nt=be.root.targets,Ht=Nt.map(function(Gt,tt){if(Mt.indexOf(Gt)===-1)return Gt;delete Gt._tweenOneVars});be.root.targets=Ht;var dt=!!Ht.filter(function(Gt){return Gt}).length;return dt||be.kill(),dt}),$t.updateTickerState()},this.killAll=function(Mt){Mt&&($t.children.forEach(function(be){be==null||be.root.targets.forEach(function(Nt){Nt&&delete Nt._tweenOneVars})}),$t.children=[]),Pr.clear($t.tickerKey),$t.tickerKey=void 0},this.getTotalTime=function(){for(var Mt=0,be=0;be<$t.children.length;be++){var Nt=$t.children[be],Ht=Nt.pausedState?0:Nt.startTime+Nt.totalTime;Mt?Mt=Math.max(Ht,Mt):Mt=Ht}return Mt},this.updateTickerState=function(){!$t.children.length||!$t.children.some(function(Mt){return!(Mt!=null&&Mt.pausedState)&&(!(Mt!=null&&Mt.reverseState)&&Mt.progressTime<Mt.totalTime||(Mt==null?void 0:Mt.reverseState)&&Mt.progressTime>0)})?$t.killAll(!$t.children.length):$t.start()},this.start=function(){$t.tickerKey||($t.tickerKey=Pr.add($t.render))},this.render=function(Mt){for(var be=Mt.time,Nt=Mt.elapsed,Ht=Nt===void 0?0:Nt,dt=$t.children,Gt=dt.length,tt=0;tt<Gt;tt++){var ot=dt[tt];if(ot){var k=ot.startTime-Ht,C=ot.startTime+ot.totalTime+Ht;be>k&&be<C&&!ot.pausedState&&ot.render({time:be,elapsed:Ht})}}}}return(0,X.Z)(Zt,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),Zt}(),Hr=on,Sn=_(141e3),In=_.n(Sn);In().path=function(Zt,$t){var Mt=$t||{};if(J)return"linear";for(var be=et(Zt),Nt=be.getTotalLength(),Ht=Mt.rect||100,dt=Mt.lengthPixel||200,Gt=[],tt=0;tt<dt-1;tt++)Gt.push(be.getPointAtLength(Nt/(dt-1)*tt));return Gt.push(be.getPointAtLength(dt)),function(k,C,I,H){var gt=In().linear(k,C,I,H),zt=Ht*gt,Rt=Gt.filter(function(qt){return qt.x>=zt})[0]||be.getPointAtLength(gt*Nt);return 1-Rt.y/Ht}};var Nn=In(),vr=function(){function Zt($t){var Mt=this;(0,W.Z)(this,Zt),this.item=void 0,this.vars={},this.start=void 0,this.parent=void 0,this.root=void 0,this.startAt={},this.mode=void 0,this.appearTo=0,this.props={},this.index=void 0,this.register=void 0,this.reverseStart=void 0,this.repeatNum=0,this.prevMoment=void 0,this.easing=void 0,this.changeValueToVars=function(dt,Gt,tt){var ot=(Array.isArray(Gt)||dt.match(/color|fill|stroke/i)||dt.match(V)&&typeof Gt=="string"||typeof Gt=="string"&&Gt.split(/[\s|,]/).length>1)&&!(dt in xt);if(dt in xt||ot)return tt?Gt:{value:Gt,plugins:[],array:ot};var k=parseFloat(Gt.toString().replace(/=/g,"")),C=Gt.toString().replace(/[^a-z|%]/g,""),I=Gt.toString().charAt(1)==="="?Gt.toString().replace(/[^\+\=|\-\=]/gi,""):"";return{vars:k,unit:C,count:I}},this.setEase=function(dt){if(typeof dt=="function"){Mt.easing=dt;return}else if(dt.match(/,/g)){Mt.easing=Nn.path(dt);return}Mt.easing=Nn[dt]},this.getTotalTime=function(){var dt=Mt.props,Gt=dt.duration,tt=Gt===void 0?450:Gt,ot=dt.delay,k=ot===void 0?0:ot,C=dt.repeat,I=C===void 0?0:C,H=dt.repeatDelay,gt=H===void 0?0:H;return I===-1?Number.MAX_VALUE:k+tt*(I+1)+gt*I},this.getEaseToRatio=function(dt,Gt){var tt=Mt.props.ease,ot=tt===void 0?"":tt;return(dt===0||dt===1)&&!(typeof ot=="function"||ot.match(/,/g))?dt:Mt.easing(Gt?1-dt:dt,Gt?1:0,Gt?0:1,1)},this.setRatioToVars=function(dt){for(var Gt=Mt.vars,tt=Mt.root,ot=0;ot<tt.targets.length;ot++)if(tt.targets[ot])for(var k in Gt){var C=Gt[k];if(C.plugins){k==="PathMotion"?tt.vars[ot].style=C.plugins[ot].render(dt):tt.vars[ot][k]=C.plugins[ot].render(dt);continue}var I=C.vars,H=C.count,gt=C.unit,zt=Mt.start[ot][k];tt.vars[ot][k]=q(zt,I,dt,H,gt)}},this.onRegisterAnimate=function(){Mt.register=!0;for(var dt=Mt.root,Gt=Mt.parent,tt=Mt.startAt,ot=[],k=0;k<dt.targets.length;k++){var C=dt.targets[k],I=dt.vars[k],H={};for(var gt in Mt.vars){var zt=Mt.vars[gt];if(zt.plugins){var Rt=new xt[zt.array?"ArrayPlugin":gt](zt.value,gt);Rt.target=C,Rt.root=dt,Rt.parent=Gt,Rt.targetIndex=k,Rt.tweenVars=I,Rt.index=Mt.index,Rt.startAt=tt,H[gt]=Rt.getAnimStart(),zt.plugins.push(Rt)}else{var qt,Te,he=(qt=dt.attr?C.getAttribute(gt):I[gt]||C[gt])!==null&&qt!==void 0?qt:Et(gt),Ue=(Te=tt[gt])!==null&&Te!==void 0?Te:he,cr=(0,g.Z)(Ue)==="object"&&"vars"in Ue&&"count"in Ue,Ve=cr?Ue.unit:"".concat(Ue).replace(/[^a-z|%]/g,""),Tr=zt.unit;Ve&&Ve!==Tr&&console.warn("Different units, start unit ".concat(Ve,", to value unit ").concat(Tr,", remove start unit.")),H[gt]=cr?Z(he,Ue):parseFloat(Ue)}}ot.push(H)}Mt.start=ot},this.overflowRatio=function(dt){var Gt=dt<0?0:dt,tt=Mt.props.duration;return Gt=Gt>tt?tt:Gt,Gt},this.render=function(dt){var Gt=dt.moment,tt=dt.fps,ot=tt===void 0?0:tt,k=dt.silence,C=dt.render,I=Mt.parent,H=Mt.root,gt=Mt.props,zt=Bt(H.targets),Rt=I.onChange,qt=gt.repeat,Te=qt===void 0?0:qt,he=gt.type,Ue=he===void 0?"to":he,cr=gt.duration,Ve=cr===void 0?450:cr,Tr=gt.delay,nn=Tr===void 0?0:Tr,He=gt.repeatDelay,ur=He===void 0?0:He,Ar=gt.yoyo;Te=Te===-1?Number.MAX_VALUE:Te;var Cr=Gt-nn,se=Math.floor(Cr/(Ve+ur))||0;se=se>Te?Te:se,se=se<0?0:se,Cr=Cr-(Ve+ur)*se;var Xt=!!(Ar&&se%2),fe=Ue==="from",Me=Xt&&fe?!1:Xt||fe;Cr=Me?Ve-Cr:Cr;var pe=fe?0:nn,Re=Me?1:0;if(!Mt.register&&Gt>=pe&&(Mt.onRegisterAnimate(),(Me&&Cr<=0||!Me&&Cr>=Ve&&Ve)&&(Mt.prevMoment=Gt,Re=Me?0:1),Mt.setRatioToVars(Re),Rt({index:Mt.index,vars:H.vars})),Mt.register&&Gt>nn-ot&&Gt<Mt.totalTime+ot){Cr=Mt.overflowRatio(Cr),Re=Me?1:0,Gt>=Mt.totalTime&&Mt.mode!=="onComplete"&&Mt.prevMoment!==void 0||Mt.prevMoment===void 0&&Gt>=Mt.totalTime&&Ve?(Re=Me?0:1,Mt.mode="onComplete",Mt.props.onComplete&&Mt.props.onComplete({mode:Mt.mode,index:Mt.index,moment:Cr,ratio:Re,targets:zt,vars:Bt(H.vars)})):Mt.prevMoment===void 0||Gt<=0&&Gt>-ot&&Mt.mode!=="onStart"&&Mt.prevMoment>Gt?(Mt.mode="onStart",Mt.props.onStart&&Mt.props.onStart({mode:Mt.mode,index:Mt.index,moment:Cr,ratio:Re,targets:zt,vars:Bt(H.vars)})):(Re=Cr&&Ve?Cr/Ve:0,Mt.mode="onUpdate",Mt.props.onUpdate&&Mt.props.onUpdate({mode:Mt.mode,index:Mt.index,moment:Cr,ratio:Re,targets:zt,vars:Bt(H.vars)})),Te&&se!==Mt.repeatNum&&Gt&&Mt.mode==="onUpdate"&&(Mt.mode="onRepeat",Mt.props.onRepeat&&Mt.props.onRepeat({mode:Mt.mode,index:Mt.index,moment:Cr,ratio:Re,targets:zt,vars:Bt(Mt.root.vars)})),Mt.setRatioToVars(Mt.getEaseToRatio(Re,fe)),Te&&(Mt.repeatNum=se);var nr={mode:Mt.mode,moment:Cr,repeat:se,ratio:Re,targets:H.targets,vars:H.vars,index:Mt.index};k&&(nr.silence=k),C&&(nr.render=C),Rt(nr),Mt.prevMoment=Gt}},this.item=$t,this.startAt=(0,R.Z)({},$t.startAt),Object.keys(this.startAt).forEach(function(dt){Mt.startAt[dt]=Mt.changeValueToVars(dt,Mt.startAt[dt],!0)});var be={};for(var Nt in $t){var Ht=$t[Nt];Nt in ut?be[Nt]=Ht:this.vars[Nt]=this.changeValueToVars(Nt,Ht)}this.props=(0,R.Z)((0,R.Z)({},ut),be),this.setEase(this.props.ease)}return(0,X.Z)(Zt,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),Zt}(),Ze=(0,X.Z)(function Zt($t){var Mt=this;(0,W.Z)(this,Zt),this.props=void 0,this.id=void 0,this.children=[],this.totalTime=0,this.totalTimeRegion=0,this.childTotalTime=0,this.childRegionTotalTime=0,this.prevMoment=void 0,this.progressTime=0,this.progressMoment=-1,this.startMoment=0,this.startTime=0,this.repeatNum=0,this.mode="onTimelineStart",this.pausedState=void 0,this.reverseState=void 0,this.root=void 0,this.parent=void 0,this.regionStartTime=0,this.regionEndTime=void 0,this.onChangeChild=void 0,this.onChangeTimeline=void 0,this.init=function(){for(var dt=Mt.props,Gt=dt.reverse,tt=dt.animation,ot=dt.moment,k=ft(tt),C=0;C<k.length;C++){var I=k[C];I.type==="set"&&(I.duration=0);var H=new vr(I);H.index=C;var gt=C?St(I,k[C-1]):0;I.appearTo=gt,H.appearTo=gt,Mt.addChild(H)}Mt.render({time:(Gt?Mt.totalTime:0)+Mt.startTime,elapsed:16.67}),Mt.totalTime||Mt.render({time:(Gt?Mt.totalTime:0)+Mt.startTime,elapsed:16.67}),ot?Mt.goto(ot):Mt.play()},this.addChild=function(dt){dt.parent=Mt,dt.root=Mt.root,Mt.children.indexOf(dt)===-1&&(Mt.children.push(dt),Mt.setTotalTime())},this.setTotalTime=function(){Mt.childTotalTime=0,Mt.childRegionTotalTime=0;for(var dt=0;dt<Mt.children.length;dt++){var Gt=Mt.children[dt];if(Gt.appearTo!==Mt.childTotalTime){var tt=Gt.appearTo+Gt.totalTime;tt>Mt.childTotalTime&&(Mt.childTotalTime=tt,Mt.childRegionTotalTime=tt)}else Mt.childTotalTime+=Gt.totalTime,Mt.childRegionTotalTime+=Gt.totalTime}Mt.regionStartTime&&(Mt.childRegionTotalTime-=Mt.regionStartTime),Mt.regionEndTime&&(Mt.childRegionTotalTime=Mt.regionEndTime-Mt.regionStartTime);var ot=Mt.props,k=ot.repeat,C=k===void 0?0:k,I=ot.repeatDelay,H=I===void 0?0:I,gt=ot.delay;Mt.totalTime=C===-1?Number.MAX_VALUE:gt+Mt.childTotalTime*(C+1)+H*C,Mt.totalTimeRegion=C===-1?Number.MAX_VALUE:gt+Mt.childRegionTotalTime*(C+1)+H*C},this.setStartTimeOrMoment=function(dt){Mt.startTime=Pr.time,Mt.startMoment=dt||Mt.progressMoment},this.reRenderCall=function(){Mt.render({time:Mt.startTime,elapsed:Pr.elapsed||Pr.frameFPS})},this.play=function(dt){if(dt){var tt;(tt=Mt.parent)===null||tt===void 0||tt.updateTickerState()}else{var Gt;(Gt=Mt.parent)===null||Gt===void 0||Gt.addChild(Mt)}},this.paused=function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Mt.pausedState=dt,Mt.setStartTimeOrMoment(),Mt.play(dt)},this.reverse=function(dt){Mt.reverseState=dt,Mt.setStartTimeOrMoment(),Mt.play(Mt.pausedState)},this.goto=function(dt,Gt){var tt=dt-Mt.regionStartTime;Mt.startTime=Pr.time,Mt.startMoment=tt>Mt.totalTime?Mt.totalTime:tt,Mt.progressMoment=Mt.startMoment,Mt.progressTime=tt,Mt.play(Mt.pausedState),Mt.reRenderCall(),!!Gt!==Mt.pausedState&&Mt.paused(Gt)},this.kill=function(dt){if(typeof dt=="number")Mt.paused(),delete Mt.children[dt],Mt.setTotalTime(),Mt.paused(!1);else{var Gt;Mt.children=[],(Gt=Mt.parent)===null||Gt===void 0||Gt.removeChild(Mt)}},this.onChange=function(dt){dt.timelineMoment=Mt.progressMoment,Mt.onChangeChild(dt)},this.render=function(dt){var Gt=dt.time,tt=dt.elapsed,ot=tt||Pr.frameFPS||0,k=Mt.totalTime,C=Mt.totalTimeRegion,I=Mt.childTotalTime,H=Mt.childRegionTotalTime,gt=Mt.children,zt=Mt.props,Rt=Mt.startTime,qt=Mt.reverseState,Te=Mt.pausedState,he=Mt.startMoment,Ue=Mt.onChangeTimeline,cr=Mt.parent,Ve=Mt.root,Tr=Mt.prevMoment,nn=Mt.regionStartTime,He=zt.repeatDelay,ur=He===void 0?0:He,Ar=zt.yoyo,Cr=zt.delay,se=zt.repeat,Xt=se===void 0?0:se;Xt=Xt===-1?Number.MAX_VALUE:Xt;var fe=Gt-Rt-Cr,Me=qt?he-fe:fe+he;if(!(Me<-ot)){var pe=Me<0?0:Me;pe=pe>k?k:pe,pe=he<nn?Me:pe,pe=he>C?he:pe;var Re=Xt?Math.floor(pe/(H+ur)):0;Re=Xt&&Re>Xt?Xt:Re;var nr=pe-(H+ur)*Re,fr=!!(Ar&&Re%2);nr=fr?H-nr:nr,nr=nn+nr;var tn=qt?!fr:fr;if(Mt.mode="onTimelineUpdate",typeof Tr!="number"&&(Mt.mode="onTimelineStart"),pe>=C-Cr&&typeof Tr=="number"&&(Mt.mode="onTimelineComplete"),Re!==Mt.repeatNum&&(Mt.mode="onTimelineRepeat",pe>I*Re&&pe<I*Re+ot)){for(var Ln=tn?0:gt.length-1;tn?Ln<=gt.length-1:Ln>=0;tn?Ln++:Ln--){var sn=gt[Ln];tn||(sn.prevMoment=void 0),sn.render({moment:tn?sn.totalTime:0,fps:ot})}Ue({moment:pe,totalTime:k,repeat:Re,mode:Mt.mode,targets:Ve.targets}),Mt.mode="onTimelineUpdate"}Xt&&(Mt.repeatNum=Re),Mt.progressMoment=pe,Mt.prevMoment=pe,Mt.progressTime=fe;for(var Xn=0;Xn<gt.length;Xn++){var an=gt[Xn],Bn=an.totalTime+an.appearTo,Jn=nr>=an.appearTo-ot&&nr<Bn+ot;if((an.mode!=="onComplete"&&nr>Bn+ot&&!fr&&an.totalTime||typeof an.mode=="undefined"&&!an.totalTime)&&(an.render({moment:an.totalTime,fps:ot}),an.prevMoment=void 0),nr<an.appearTo-ot&&an.mode&&an.mode!=="onStart"&&(an.render({moment:an.appearTo,fps:ot,silence:!0}),an.prevMoment=void 0,an.mode=void 0),Jn){var oa=nr<0?0:nr;if(nr>Bn&&an.mode==="onComplete"&&!fr)return;oa=nr>Bn?Bn:nr,an.render({moment:oa-an.appearTo,fps:ot}),Bn||(an.render({moment:an.totalTime,fps:ot,render:!0}),an.prevMoment=void 0)}}Ue({moment:pe,totalTime:k,repeat:Re,mode:Mt.mode,targets:Ve.targets}),(Te||C&&Me+Cr>=C&&!qt||qt&&Me+Cr<=0||!gt.length)&&(cr==null||cr.removeChild(Mt))}},this.props=$t;var be=this.props,Nt=be.paused,Ht=be.reverse;this.reverseState=Ht,this.pausedState=Nt,this.regionStartTime=$t.regionStartTime||0,this.regionEndTime=$t.regionEndTime});xt.push(te),xt.push(Tt),xt.push(ie);var Er=0,ke=new Hr,Xe=function(){function Zt($t,Mt){var be=this;(0,W.Z)(this,Zt),this.targets=void 0,this.props=void 0,this.timeline=void 0,this.animate=void 0,this.$reverse=!1,this.vars=[],this.initTime=void 0,this.attr=void 0,this.init=function(){var Nt=(0,f.Z)(m().mark(function Ht(dt){var Gt;return m().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:Gt=yt(dt),be.targets[0].tagName&&!be.attr&&(Gt.animation=ft(Gt.animation).map(function(k){var C={style:{}};for(var I in k)I in xt||I in ut?C[I]=k[I]:C.style[I]=k[I];return Object.keys(C.style).length||delete C.style,k.duration&&(k.duration=Math.round(k.duration)),k.delay&&(k.delay=Math.round(k.delay)),k.appearTo&&(k.appearTo=Math.round(k.appearTo)),k.repeatDelay&&(k.repeatDelay=Math.round(k.repeatDelay)),C})),be.animate=new Ze(Gt),be.animate.id="TweenOne_".concat(Er),Er++,be.animate.startTime=be.initTime,be.animate.onChangeChild=be.onChange,be.animate.onChangeTimeline=be.onChangeTimeline,be.animate.root=be,be.animate.parent=be.timeline,be.animate.init();case 11:case"end":return ot.stop()}},Ht)}));return function(Ht){return Nt.apply(this,arguments)}}(),this.renderToDom=function(){for(var Nt=0;Nt<be.vars.length;Nt++){var Ht=be.vars[Nt];for(var dt in Ht){var Gt=Ht[dt],tt=be.targets[Nt];if(tt)if(be.props.attr&&tt.tagName&&tt.setAttribute){if(dt==="style")for(var ot in Gt)tt.style[ot]=Gt[dt];tt.setAttribute(dt,Gt)}else if(dt in xt){var k=xt[dt].key;if(typeof tt[k]=="function")tt[k](Gt.attr,Gt.path);else if((0,g.Z)(Gt)==="object"&&(0,g.Z)(tt[k])==="object"&&k)for(var C in Gt){var I=Gt[C];k==="__self"?tt[C]=I:tt[k][C]=(0,g.Z)(I)==="object"&&I.text||I}else tt[k||dt]=Gt}else tt[dt]=Gt}}},this.onChange=function(Nt){Nt.mode==="onComplete"&&Nt.render&&be.renderToDom(),Nt.mode&&be.props.onChange&&!Nt.silence&&(Nt.targets=Bt(Nt.targets),Nt.vars=Bt(Nt.vars),be.props.onChange(Nt))},this.onChangeTimeline=function(Nt){if(be.renderToDom(),Nt.mode==="onTimelineComplete"){var Ht;(Ht=Nt.targets)===null||Ht===void 0||Ht.forEach(function(dt){delete dt._tweenOneVars})}Nt.mode&&be.props.onChangeTimeline&&(Nt.targets=Bt(Nt.targets),Nt.vars=Bt(be.vars),be.props.onChangeTimeline(Nt))},this.goto=function(Nt,Ht){be.targets.forEach(function(dt){dt&&Object.keys(dt._tweenOneVars||{}).forEach(function(Gt){delete dt._tweenOneVars[Gt]})}),be.animate.goto(Nt,Ht)},this.kill=function(Nt){be.animate.kill(Nt)},this.targets=$t,this.props=Mt,this.timeline=ke,this.initTime=Pr.time,this.attr=Mt.attr,$t.forEach(function(Nt){be.vars.push(Nt._tweenOneVars)}),this.init(Mt)}return(0,X.Z)(Zt,[{key:"paused",get:function(){return this.animate.pausedState},set:function(Mt){this.animate.paused(Mt)}},{key:"reverse",get:function(){return this.$reverse},set:function(Mt){this.$reverse=Mt,this.animate.reverse(Mt)}},{key:"regionStartTime",get:function(){return this.animate.regionStartTime},set:function(Mt){this.animate.regionStartTime=Mt,this.animate.setTotalTime()}},{key:"regionEndTime",get:function(){return this.animate.regionEndTime||this.animate.totalTime},set:function(Mt){this.animate.regionEndTime=Mt,this.animate.setTotalTime()}}]),Zt}(),jr=function($t,Mt){if(!$t){console.error("Error: targets is undefined.");return}Pr.state!=="wake"&&Pr.wake();var be=ft($t).map(function(Gt){return Gt._tweenOneVars=Gt._tweenOneVars||{},Gt}),Nt=be.filter(function(Gt){return Gt.tagName}),Ht=be.filter(function(Gt){return!Gt.tagName}),dt=[];return Nt.length&&dt.push(new Xe(Nt,Mt)),Ht.length&&dt.push(new Xe(Ht,Mt)),Bt(dt)};jr.kill=function(Zt){typeof Zt=="undefined"?ke.killAll(!0):ke.kill(ft(Zt))},jr.plugins=xt;var rn=jr,ir=rn;function Lr(Zt){return!Zt&&Zt!==0?[]:Array.isArray(Zt)?Zt:[Zt]}function dn(Zt,$t){if(!Zt||!$t)return!1;var Mt=Object.keys(Zt),be=Object.keys($t);return Mt.length&&be.length&&Mt.length===be.length?!Mt.some(function(Nt){var Ht=Zt[Nt],dt=$t[Nt];if(Array.isArray(Ht)&&Array.isArray(dt)){var Gt=Ht.join(),tt=dt.join();Gt===tt&&!Gt.match(/\[object object\]/gi)&&(Ht=Gt,dt=tt)}return Ht!==dt}):!1}function Zr(Zt,$t){if(Zt===$t||dn(Zt,$t))return!0;if(!Zt||!$t||Object.keys(Zt).length!==Object.keys($t).length)return!1;var Mt=!0,be=function(Ht,dt){var Gt=Object.keys(Ht).length>Object.keys(dt).length?Ht:dt,tt=Object.keys(Ht).length>Object.keys(dt).length?dt:Ht;Object.keys(Gt).forEach(function(ot){Mt&&(ot in tt||(Mt=!1),(0,g.Z)(Gt[ot])==="object"&&(0,g.Z)(tt[ot])==="object"?Mt=Zr(Gt[ot],tt[ot]):typeof Gt[ot]=="function"&&typeof tt[ot]=="function"?Gt[ot].toString().replace(/\s+/g,"")!==tt[ot].toString().replace(/\s+/g,"")&&(Mt=!1):Gt[ot]!==tt[ot]&&(Mt=!1))})};return Array.isArray(Zt)&&Array.isArray($t)?Zt.forEach(function(Nt,Ht){be(Nt,$t[Ht])}):be(Zt,$t),Mt}var wn=["component","componentProps","animation","attr","paused","reverse","repeat","repeatDelay","yoyo","moment","onChange","onChangeTimeline","resetStyle","killPrevAnim"],ln=P.forwardRef(function(Zt,$t){var Mt=Zt.component,be=Mt===void 0?"div":Mt,Nt=Zt.componentProps,Ht=Zt.animation,dt=Zt.attr,Gt=Zt.paused,tt=Zt.reverse,ot=Zt.repeat,k=Zt.repeatDelay,C=Zt.yoyo,I=Zt.moment,H=Zt.onChange,gt=Zt.onChangeTimeline,zt=Zt.resetStyle,Rt=Zt.killPrevAnim,qt=Rt===void 0?!0:Rt,Te=(0,M.Z)(Zt,wn),he=Te||{},Ue=he.children,cr=he.className,Ve=he.style,Tr=Ve===void 0?{}:Ve,nn=(0,P.useRef)(),He=(0,P.useRef)(),ur=(0,P.useRef)(),Ar=function(tn,Ln){var sn=ur.current;if(sn){if(tn==="moment"){typeof Ln=="number"&&sn.goto(Ln,Gt);return}sn[tn]=!!Ln}};A(function(){Ar("paused",Gt)},[Gt]),A(function(){Ar("moment",I)},[I]),A(function(){Ar("reverse",tt)},[tt]),A(function(){if(!nn.current)return console.warn("Warning: TweenOne domRef is error.");if(!Zr(Ht,He.current)){var fr=Lr(nn.current).map(function(sn){return sn instanceof Element||!(sn instanceof P.Component)?sn:(0,D.findDOMNode)(sn)}).filter(function(sn,Xn){return sn instanceof Element?sn:(console.warn("Warning: TweenOne tag[".concat(Xn,"] is not dom.")),!1)});if(ur.current&&qt&&ur.current.kill(),zt&&ur.current){var tn=be?Tr:(0,R.Z)((0,R.Z)({},Tr),Ue.props.style),Ln=Object.keys(tn).map(function(sn){return"".concat((0,z.Rs)(sn),":").concat((0,z.YJ)(sn,tn[sn]))}).join(";");fr.forEach(function(sn){sn.setAttribute("style",Ln),delete sn._tweenOneVars})}ur.current=Ht&&ir(fr,{animation:Ht,attr:dt,yoyo:C,moment:I,repeat:ot,reverse:tt,paused:Gt,repeatDelay:k,onChange:H,onChangeTimeline:gt}),He.current=Ht}},[Ht]),(0,P.useEffect)(function(){return function(){ur.current&&ur.current.kill&&ur.current.kill()}},[]);var Cr=function(tn){nn.current=tn,$t&&"current"in $t?$t.current=tn:typeof $t=="function"&&$t(tn)};if(!be&&Ue&&typeof Ue!="string"&&typeof Ue!="boolean"&&typeof Ue!="number"){var se=Ue.props,Xt=se||{},fe=Xt.style,Me=Xt.className,pe=Me===void 0?"":Me,Re=(0,R.Z)((0,R.Z)({},fe),Tr),nr=cr?"".concat(cr," ").concat(pe).trim():pe;return P.cloneElement(Ue,{style:Re,ref:Cr,className:(0,E.Z)(new Set(nr.split(/\s+/))).join(" ").trim()||void 0})}return be?(0,P.createElement)(be,(0,R.Z)((0,R.Z)({ref:Cr},Te),Nt)):(console.warn("Warning: component is null, children must be ReactElement."),Ue)});ln.isTweenOne=!0,ln.displayName="TweenOne";var bn=ln,Pn=["component","componentProps","leave","enter","appear","resetStyle","animatingClassName","onEnd","exclusive"],at=P.forwardRef(function(Zt,$t){var Mt=Zt.component,be=Mt===void 0?"div":Mt,Nt=Zt.componentProps,Ht=Nt===void 0?{}:Nt,dt=Zt.leave,Gt=dt===void 0?{x:-50,opacity:0}:dt,tt=Zt.enter,ot=tt===void 0?{x:50,opacity:0,type:"from"}:tt,k=Zt.appear,C=k===void 0?!0:k,I=Zt.resetStyle,H=I===void 0?!0:I,gt=Zt.animatingClassName,zt=gt===void 0?["tween-one-entering","tween-one-leaving"]:gt,Rt=Zt.onEnd,qt=Rt===void 0?function(){}:Rt,Te=Zt.exclusive,he=Te===void 0?!1:Te,Ue=(0,M.Z)(Zt,Pn),cr=(0,P.useRef)([]),Ve=(0,P.useRef)([]),Tr=(0,P.useRef)({}),nn=(0,P.useRef)(!1),He=(0,P.useRef)([]),ur=(0,P.useRef)({}),Ar=L(x(Zt)),Cr=(0,P.useRef)(Ar),se=(0,P.useState)(Ar),Xt=(0,w.Z)(se,2),fe=Xt[0],Me=Xt[1],pe=function(an){var Bn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Jn=an.key;return Tr.current[Jn]=P.createElement(bn,(0,R.Z)((0,R.Z)({},Bn),{},{key:Jn,component:null}),an),Tr.current[Jn]},Re=function(an,Bn){var Jn=an.replace(zt[Bn?1:0],"").trim();return Jn.indexOf(zt[Bn?0:1])===-1&&(Jn="".concat(Jn," ").concat(zt[Bn?0:1]).trim()),Jn},nr=function(an,Bn){var Jn=b(Bn,an);return cr.current=[],Ve.current=[],an.forEach(function(oa){if(oa){var sa=oa.key,xi=p(Bn,sa);sa&&Tr.current[sa]&&(Tr.current[sa]=P.cloneElement(Tr.current[sa],{},oa)),!xi&&sa&&cr.current.push(sa)}}),Bn.forEach(function(oa){if(oa){var sa=oa.key,xi=p(an,sa);!xi&&sa&&(Ve.current.push(sa),delete Tr.current[sa])}}),Jn},fr=function(){if(!Object.keys(ur.current).length&&He.current.length){var an=nr(He.current[He.current.length-1],Cr.current);Me(an),He.current=[]}},tn=function(an,Bn,Jn){var oa=Jn.targets,sa=(0,g.Z)(oa.className)==="object"&&"baseVal"in oa.className,xi=Bn==="enter"||Bn==="appear";if(an&&Jn.mode==="onTimelineComplete"){if(delete ur.current[an],sa?oa.className.baseVal=oa.className.baseVal.replace(zt[xi?0:1],"").trim():oa.className=oa.className.replace(zt[xi?0:1],"").trim(),xi)cr.current.splice(cr.current.indexOf(an),1),cr.current.length||fr();else if(Bn==="leave"&&(Ve.current.splice(Ve.current.indexOf(an),1),Cr.current=Cr.current.filter(function(Ra){return an!==Ra.key}),!Ve.current.length)){var Na=Cr.current.map(function(Ra){return Ra.key});Object.keys(Tr.current).forEach(function(Ra){Na.indexOf(Ra)===-1&&delete Tr.current[Ra]}),Me(Cr.current)}qt({key:an,type:Bn,target:Jn.targets})}},Ln=function(an,Bn,Jn){var oa=Jn==="leave"?Gt:ot;if(Jn==="appear"){var sa=S(C,an.key,Bn);oa=sa&&ot||null}var xi=S(oa,an.key,Bn),Na=function(Ni){tn(an.key,Jn,Ni)},Ra=Jn==="appear"&&!C?an.props.className:Re(an.props.className||"",Jn==="enter"||Jn==="appear")||void 0,ri={key:an.key,animation:xi,onChangeTimeline:Na,resetStyle:H,className:Ra};return(an.key&&cr.current.concat(Ve.current).indexOf(an.key)>=0||!nn.current&&oa)&&an.key&&!Tr.current[an.key]&&(ur.current[an.key]=Jn),pe(an,ri)};A(function(){if(nn.current){var Xn=L(Zt.children).filter(function(Bn){return Bn}),an=L(Cr.current);Object.keys(ur.current).length&&!he?He.current.push(Xn):Me(nr(Xn,an))}},[Zt.children]),A(function(){fr()}),(0,P.useEffect)(function(){nn.current=!0},[]),Cr.current=fe;var sn=fe.map(function(Xn,an){if(!Xn||!Xn.key)return Xn;var Bn=Xn.key;return Ve.current.indexOf(Bn)>=0?Ln(Xn,Ve.current.indexOf(Bn),"leave"):(cr.current.indexOf(Bn)>=0||ur.current[Bn]&&Ve.current.indexOf(Bn)===-1)&&!(ur.current[Bn]==="enter"&&Tr.current[Bn])?Ln(Xn,cr.current.indexOf(Bn),"enter"):nn.current?Tr.current[Bn]:Ln(Xn,an,"appear")});return y?be?(0,P.createElement)(be,(0,R.Z)((0,R.Z)((0,R.Z)({},Ue),Ht),{},{ref:$t}),Zt.children):P.createElement(P.Fragment,null,Zt.children):be?(0,P.createElement)(be,(0,R.Z)((0,R.Z)((0,R.Z)({},Ue),Ht),{},{ref:$t}),sn):sn[0]?(0,P.cloneElement)(sn[0],{ref:$t}):null});at.displayName="TweenOneGroup",at.isTweenOneGroup=!0;var je=at},217857:function(Ne,G,_){"use strict";var g;g={value:!0};var R=_(667294),w=_(308273);function M(et,ut){var it=et==null?null:typeof Symbol!="undefined"&&et[Symbol.iterator]||et["@@iterator"];if(it!=null){var yt,ft,Bt,St,Et=[],Z=!0,q=!1;try{if(Bt=(it=it.call(et)).next,ut===0){if(Object(it)!==it)return;Z=!1}else for(;!(Z=(yt=Bt.call(it)).done)&&(Et.push(yt.value),Et.length!==ut);Z=!0);}catch(bt){q=!0,ft=bt}finally{try{if(!Z&&it.return!=null&&(St=it.return(),Object(St)!==St))return}finally{if(q)throw ft}}return Et}}function P(et,ut){var it=Object.keys(et);if(Object.getOwnPropertySymbols){var yt=Object.getOwnPropertySymbols(et);ut&&(yt=yt.filter(function(ft){return Object.getOwnPropertyDescriptor(et,ft).enumerable})),it.push.apply(it,yt)}return it}function L(et){for(var ut=1;ut<arguments.length;ut++){var it=arguments[ut]!=null?arguments[ut]:{};ut%2?P(Object(it),!0).forEach(function(yt){p(et,yt,it[yt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(it)):P(Object(it)).forEach(function(yt){Object.defineProperty(et,yt,Object.getOwnPropertyDescriptor(it,yt))})}return et}function p(et,ut,it){return ut=f(ut),ut in et?Object.defineProperty(et,ut,{value:it,enumerable:!0,configurable:!0,writable:!0}):et[ut]=it,et}function b(){return b=Object.assign?Object.assign.bind():function(et){for(var ut=1;ut<arguments.length;ut++){var it=arguments[ut];for(var yt in it)Object.prototype.hasOwnProperty.call(it,yt)&&(et[yt]=it[yt])}return et},b.apply(this,arguments)}function S(et,ut){if(et==null)return{};var it={},yt=Object.keys(et),ft,Bt;for(Bt=0;Bt<yt.length;Bt++)ft=yt[Bt],!(ut.indexOf(ft)>=0)&&(it[ft]=et[ft]);return it}function x(et,ut){if(et==null)return{};var it=S(et,ut),yt,ft;if(Object.getOwnPropertySymbols){var Bt=Object.getOwnPropertySymbols(et);for(ft=0;ft<Bt.length;ft++)yt=Bt[ft],!(ut.indexOf(yt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,yt)&&(it[yt]=et[yt])}return it}function y(et,ut){return A(et)||M(et,ut)||E(et,ut)||B()}function A(et){if(Array.isArray(et))return et}function E(et,ut){if(et){if(typeof et=="string")return D(et,ut);var it=Object.prototype.toString.call(et).slice(8,-1);if(it==="Object"&&et.constructor&&(it=et.constructor.name),it==="Map"||it==="Set")return Array.from(et);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return D(et,ut)}}function D(et,ut){(ut==null||ut>et.length)&&(ut=et.length);for(var it=0,yt=new Array(ut);it<ut;it++)yt[it]=et[it];return yt}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(et,ut){if(typeof et!="object"||et===null)return et;var it=et[Symbol.toPrimitive];if(it!==void 0){var yt=it.call(et,ut||"default");if(typeof yt!="object")return yt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ut==="string"?String:Number)(et)}function f(et){var ut=m(et,"string");return typeof ut=="symbol"?ut:String(ut)}var W=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?R.useLayoutEffect:R.useEffect;function X(et){var ut=R.useRef(et);return W(function(){ut.current=et}),R.useCallback(function(){for(var it=arguments.length,yt=new Array(it),ft=0;ft<it;ft++)yt[ft]=arguments[ft];return ut.current.apply(void 0,yt)},[])}var z=function(ut,it){var yt=it.decimal,ft=it.decimals,Bt=it.duration,St=it.easingFn,Et=it.end,Z=it.formattingFn,q=it.numerals,bt=it.prefix,Ct=it.separator,nt=it.start,ht=it.suffix,At=it.useEasing,Ot=it.useGrouping,xt=it.useIndianSeparators,Dt=it.enableScrollSpy,Yt=it.scrollSpyDelay,ie=it.scrollSpyOnce;return new w.CountUp(ut,Et,{startVal:nt,duration:Bt,decimal:yt,decimalPlaces:ft,easingFn:St,formattingFn:Z,numerals:q,separator:Ct,prefix:bt,suffix:ht,useEasing:At,useIndianSeparators:xt,useGrouping:Ot,enableScrollSpy:Dt,scrollSpyDelay:Yt,scrollSpyOnce:ie})},U=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],j={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},V=function(ut){var it=Object.fromEntries(Object.entries(ut).filter(function(te){var ye=y(te,2),ge=ye[1];return ge!==void 0})),yt=R.useMemo(function(){return L(L({},j),it)},[ut]),ft=yt.ref,Bt=yt.startOnMount,St=yt.enableReinitialize,Et=yt.delay,Z=yt.onEnd,q=yt.onStart,bt=yt.onPauseResume,Ct=yt.onReset,nt=yt.onUpdate,ht=x(yt,U),At=R.useRef(),Ot=R.useRef(),xt=R.useRef(!1),Dt=X(function(){return z(typeof ft=="string"?ft:ft.current,ht)}),Yt=X(function(te){var ye=At.current;if(ye&&!te)return ye;var ge=Dt();return At.current=ge,ge}),ie=X(function(){var te=function(){return Yt(!0).start(function(){Z==null||Z({pauseResume:re,reset:Pt,start:ce,update:ee})})};Et&&Et>0?Ot.current=setTimeout(te,Et*1e3):te(),q==null||q({pauseResume:re,reset:Pt,update:ee})}),re=X(function(){Yt().pauseResume(),bt==null||bt({reset:Pt,start:ce,update:ee})}),Pt=X(function(){Yt().el&&(Ot.current&&clearTimeout(Ot.current),Yt().reset(),Ct==null||Ct({pauseResume:re,start:ce,update:ee}))}),ee=X(function(te){Yt().update(te),nt==null||nt({pauseResume:re,reset:Pt,start:ce})}),ce=X(function(){Pt(),ie()}),Ut=X(function(te){Bt&&(te&&Pt(),ie())});return R.useEffect(function(){xt.current?St&&Ut(!0):(xt.current=!0,Ut())},[St,xt,Ut,Et,ut.start,ut.suffix,ut.prefix,ut.duration,ut.separator,ut.decimals,ut.decimal,ut.formattingFn]),R.useEffect(function(){return function(){Pt()}},[Pt]),{start:ce,pauseResume:re,reset:Pt,update:ee,getCountUp:Yt}},J=["className","redraw","containerProps","children","style"],Q=function(ut){var it=ut.className,yt=ut.redraw,ft=ut.containerProps,Bt=ut.children,St=ut.style,Et=x(ut,J),Z=R.useRef(null),q=R.useRef(!1),bt=V(L(L({},Et),{},{ref:Z,startOnMount:typeof Bt!="function"||ut.delay===0,enableReinitialize:!1})),Ct=bt.start,nt=bt.reset,ht=bt.update,At=bt.pauseResume,Ot=bt.getCountUp,xt=X(function(){Ct()}),Dt=X(function(re){ut.preserveValue||nt(),ht(re)}),Yt=X(function(){if(typeof ut.children=="function"&&!(Z.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}Ot()});R.useEffect(function(){Yt()},[Yt]),R.useEffect(function(){q.current&&Dt(ut.end)},[ut.end,Dt]);var ie=yt&&ut;return R.useEffect(function(){yt&&q.current&&xt()},[xt,yt,ie]),R.useEffect(function(){!yt&&q.current&&xt()},[xt,yt,ut.start,ut.suffix,ut.prefix,ut.duration,ut.separator,ut.decimals,ut.decimal,ut.className,ut.formattingFn]),R.useEffect(function(){q.current=!0},[]),typeof Bt=="function"?Bt({countUpRef:Z,start:Ct,reset:nt,update:ht,pauseResume:At,getCountUp:Ot}):R.createElement("span",b({className:it,ref:Z,style:St},ft),typeof ut.start!="undefined"?Ot().formattingFn(ut.start):"")};G.ZP=Q,g=V},175668:function(Ne,G,_){"use strict";function g(nt){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ht){return typeof ht}:function(ht){return ht&&typeof Symbol=="function"&&ht.constructor===Symbol&&ht!==Symbol.prototype?"symbol":typeof ht},g(nt)}Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"DraggableCore",{enumerable:!0,get:function(){return S.default}}),G.default=void 0;var R=D(_(667294)),w=A(_(45697)),M=A(_(973935)),P=A(_(386010)),L=_(381825),p=_(102849),b=_(909280),S=A(_(180783)),x=A(_(955904)),y=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function A(nt){return nt&&nt.__esModule?nt:{default:nt}}function E(nt){if(typeof WeakMap!="function")return null;var ht=new WeakMap,At=new WeakMap;return(E=function(xt){return xt?At:ht})(nt)}function D(nt,ht){if(!ht&&nt&&nt.__esModule)return nt;if(nt===null||g(nt)!=="object"&&typeof nt!="function")return{default:nt};var At=E(ht);if(At&&At.has(nt))return At.get(nt);var Ot={},xt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Dt in nt)if(Dt!=="default"&&Object.prototype.hasOwnProperty.call(nt,Dt)){var Yt=xt?Object.getOwnPropertyDescriptor(nt,Dt):null;Yt&&(Yt.get||Yt.set)?Object.defineProperty(Ot,Dt,Yt):Ot[Dt]=nt[Dt]}return Ot.default=nt,At&&At.set(nt,Ot),Ot}function B(){return B=Object.assign||function(nt){for(var ht=1;ht<arguments.length;ht++){var At=arguments[ht];for(var Ot in At)Object.prototype.hasOwnProperty.call(At,Ot)&&(nt[Ot]=At[Ot])}return nt},B.apply(this,arguments)}function m(nt,ht){if(nt==null)return{};var At=f(nt,ht),Ot,xt;if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(nt);for(xt=0;xt<Dt.length;xt++)Ot=Dt[xt],!(ht.indexOf(Ot)>=0)&&Object.prototype.propertyIsEnumerable.call(nt,Ot)&&(At[Ot]=nt[Ot])}return At}function f(nt,ht){if(nt==null)return{};var At={},Ot=Object.keys(nt),xt,Dt;for(Dt=0;Dt<Ot.length;Dt++)xt=Ot[Dt],!(ht.indexOf(xt)>=0)&&(At[xt]=nt[xt]);return At}function W(nt,ht){var At=Object.keys(nt);if(Object.getOwnPropertySymbols){var Ot=Object.getOwnPropertySymbols(nt);ht&&(Ot=Ot.filter(function(xt){return Object.getOwnPropertyDescriptor(nt,xt).enumerable})),At.push.apply(At,Ot)}return At}function X(nt){for(var ht=1;ht<arguments.length;ht++){var At=arguments[ht]!=null?arguments[ht]:{};ht%2?W(Object(At),!0).forEach(function(Ot){bt(nt,Ot,At[Ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(At)):W(Object(At)).forEach(function(Ot){Object.defineProperty(nt,Ot,Object.getOwnPropertyDescriptor(At,Ot))})}return nt}function z(nt,ht){return Q(nt)||J(nt,ht)||j(nt,ht)||U()}function U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(nt,ht){if(nt){if(typeof nt=="string")return V(nt,ht);var At=Object.prototype.toString.call(nt).slice(8,-1);if(At==="Object"&&nt.constructor&&(At=nt.constructor.name),At==="Map"||At==="Set")return Array.from(nt);if(At==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(At))return V(nt,ht)}}function V(nt,ht){(ht==null||ht>nt.length)&&(ht=nt.length);for(var At=0,Ot=new Array(ht);At<ht;At++)Ot[At]=nt[At];return Ot}function J(nt,ht){var At=nt==null?null:typeof Symbol!="undefined"&&nt[Symbol.iterator]||nt["@@iterator"];if(At!=null){var Ot=[],xt=!0,Dt=!1,Yt,ie;try{for(At=At.call(nt);!(xt=(Yt=At.next()).done)&&(Ot.push(Yt.value),!(ht&&Ot.length===ht));xt=!0);}catch(re){Dt=!0,ie=re}finally{try{!xt&&At.return!=null&&At.return()}finally{if(Dt)throw ie}}return Ot}}function Q(nt){if(Array.isArray(nt))return nt}function et(nt,ht){if(!(nt instanceof ht))throw new TypeError("Cannot call a class as a function")}function ut(nt,ht){for(var At=0;At<ht.length;At++){var Ot=ht[At];Ot.enumerable=Ot.enumerable||!1,Ot.configurable=!0,"value"in Ot&&(Ot.writable=!0),Object.defineProperty(nt,Ot.key,Ot)}}function it(nt,ht,At){return ht&&ut(nt.prototype,ht),At&&ut(nt,At),Object.defineProperty(nt,"prototype",{writable:!1}),nt}function yt(nt,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(ht&&ht.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Object.defineProperty(nt,"prototype",{writable:!1}),ht&&ft(nt,ht)}function ft(nt,ht){return ft=Object.setPrototypeOf||function(Ot,xt){return Ot.__proto__=xt,Ot},ft(nt,ht)}function Bt(nt){var ht=Z();return function(){var Ot=q(nt),xt;if(ht){var Dt=q(this).constructor;xt=Reflect.construct(Ot,arguments,Dt)}else xt=Ot.apply(this,arguments);return St(this,xt)}}function St(nt,ht){if(ht&&(g(ht)==="object"||typeof ht=="function"))return ht;if(ht!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Et(nt)}function Et(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}function q(nt){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(At){return At.__proto__||Object.getPrototypeOf(At)},q(nt)}function bt(nt,ht,At){return ht in nt?Object.defineProperty(nt,ht,{value:At,enumerable:!0,configurable:!0,writable:!0}):nt[ht]=At,nt}var Ct=function(nt){yt(At,nt);var ht=Bt(At);function At(Ot){var xt;return et(this,At),xt=ht.call(this,Ot),bt(Et(xt),"onDragStart",function(Dt,Yt){(0,x.default)("Draggable: onDragStart: %j",Yt);var ie=xt.props.onStart(Dt,(0,p.createDraggableData)(Et(xt),Yt));if(ie===!1)return!1;xt.setState({dragging:!0,dragged:!0})}),bt(Et(xt),"onDrag",function(Dt,Yt){if(!xt.state.dragging)return!1;(0,x.default)("Draggable: onDrag: %j",Yt);var ie=(0,p.createDraggableData)(Et(xt),Yt),re={x:ie.x,y:ie.y};if(xt.props.bounds){var Pt=re.x,ee=re.y;re.x+=xt.state.slackX,re.y+=xt.state.slackY;var ce=(0,p.getBoundPosition)(Et(xt),re.x,re.y),Ut=z(ce,2),te=Ut[0],ye=Ut[1];re.x=te,re.y=ye,re.slackX=xt.state.slackX+(Pt-re.x),re.slackY=xt.state.slackY+(ee-re.y),ie.x=re.x,ie.y=re.y,ie.deltaX=re.x-xt.state.x,ie.deltaY=re.y-xt.state.y}var ge=xt.props.onDrag(Dt,ie);if(ge===!1)return!1;xt.setState(re)}),bt(Et(xt),"onDragStop",function(Dt,Yt){if(!xt.state.dragging)return!1;var ie=xt.props.onStop(Dt,(0,p.createDraggableData)(Et(xt),Yt));if(ie===!1)return!1;(0,x.default)("Draggable: onDragStop: %j",Yt);var re={dragging:!1,slackX:0,slackY:0},Pt=Boolean(xt.props.position);if(Pt){var ee=xt.props.position,ce=ee.x,Ut=ee.y;re.x=ce,re.y=Ut}xt.setState(re)}),xt.state={dragging:!1,dragged:!1,x:Ot.position?Ot.position.x:Ot.defaultPosition.x,y:Ot.position?Ot.position.y:Ot.defaultPosition.y,prevPropsPosition:X({},Ot.position),slackX:0,slackY:0,isElementSVG:!1},Ot.position&&!(Ot.onDrag||Ot.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),xt}return it(At,[{key:"componentDidMount",value:function(){typeof window.SVGElement!="undefined"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var xt,Dt,Yt;return(xt=(Dt=this.props)===null||Dt===void 0||(Yt=Dt.nodeRef)===null||Yt===void 0?void 0:Yt.current)!==null&&xt!==void 0?xt:M.default.findDOMNode(this)}},{key:"render",value:function(){var xt,Dt=this.props,Yt=Dt.axis,ie=Dt.bounds,re=Dt.children,Pt=Dt.defaultPosition,ee=Dt.defaultClassName,ce=Dt.defaultClassNameDragging,Ut=Dt.defaultClassNameDragged,te=Dt.position,ye=Dt.positionOffset,ge=Dt.scale,Kt=m(Dt,y),xe={},Tt=null,Ae=Boolean(te),br=!Ae||this.state.dragging,Sr=te||Pt,Mr={x:(0,p.canDragX)(this)&&br?this.state.x:Sr.x,y:(0,p.canDragY)(this)&&br?this.state.y:Sr.y};this.state.isElementSVG?Tt=(0,L.createSVGTransform)(Mr,ye):xe=(0,L.createCSSTransform)(Mr,ye);var Pr=(0,P.default)(re.props.className||"",ee,(xt={},bt(xt,ce,this.state.dragging),bt(xt,Ut,this.state.dragged),xt));return R.createElement(S.default,B({},Kt,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),R.cloneElement(R.Children.only(re),{className:Pr,style:X(X({},re.props.style),xe),transform:Tt}))}}],[{key:"getDerivedStateFromProps",value:function(xt,Dt){var Yt=xt.position,ie=Dt.prevPropsPosition;return Yt&&(!ie||Yt.x!==ie.x||Yt.y!==ie.y)?((0,x.default)("Draggable: getDerivedStateFromProps %j",{position:Yt,prevPropsPosition:ie}),{x:Yt.x,y:Yt.y,prevPropsPosition:X({},Yt)}):null}}]),At}(R.Component);G.default=Ct,bt(Ct,"displayName","Draggable"),bt(Ct,"propTypes",X(X({},S.default.propTypes),{},{axis:w.default.oneOf(["both","x","y","none"]),bounds:w.default.oneOfType([w.default.shape({left:w.default.number,right:w.default.number,top:w.default.number,bottom:w.default.number}),w.default.string,w.default.oneOf([!1])]),defaultClassName:w.default.string,defaultClassNameDragging:w.default.string,defaultClassNameDragged:w.default.string,defaultPosition:w.default.shape({x:w.default.number,y:w.default.number}),positionOffset:w.default.shape({x:w.default.oneOfType([w.default.number,w.default.string]),y:w.default.oneOfType([w.default.number,w.default.string])}),position:w.default.shape({x:w.default.number,y:w.default.number}),className:b.dontSetMe,style:b.dontSetMe,transform:b.dontSetMe})),bt(Ct,"defaultProps",X(X({},S.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},180783:function(Ne,G,_){"use strict";function g(St){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et},g(St)}Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var R=y(_(667294)),w=S(_(45697)),M=S(_(973935)),P=_(381825),L=_(102849),p=_(909280),b=S(_(955904));function S(St){return St&&St.__esModule?St:{default:St}}function x(St){if(typeof WeakMap!="function")return null;var Et=new WeakMap,Z=new WeakMap;return(x=function(bt){return bt?Z:Et})(St)}function y(St,Et){if(!Et&&St&&St.__esModule)return St;if(St===null||g(St)!=="object"&&typeof St!="function")return{default:St};var Z=x(Et);if(Z&&Z.has(St))return Z.get(St);var q={},bt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ct in St)if(Ct!=="default"&&Object.prototype.hasOwnProperty.call(St,Ct)){var nt=bt?Object.getOwnPropertyDescriptor(St,Ct):null;nt&&(nt.get||nt.set)?Object.defineProperty(q,Ct,nt):q[Ct]=St[Ct]}return q.default=St,Z&&Z.set(St,q),q}function A(St,Et){return f(St)||m(St,Et)||D(St,Et)||E()}function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(St,Et){if(St){if(typeof St=="string")return B(St,Et);var Z=Object.prototype.toString.call(St).slice(8,-1);if(Z==="Object"&&St.constructor&&(Z=St.constructor.name),Z==="Map"||Z==="Set")return Array.from(St);if(Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return B(St,Et)}}function B(St,Et){(Et==null||Et>St.length)&&(Et=St.length);for(var Z=0,q=new Array(Et);Z<Et;Z++)q[Z]=St[Z];return q}function m(St,Et){var Z=St==null?null:typeof Symbol!="undefined"&&St[Symbol.iterator]||St["@@iterator"];if(Z!=null){var q=[],bt=!0,Ct=!1,nt,ht;try{for(Z=Z.call(St);!(bt=(nt=Z.next()).done)&&(q.push(nt.value),!(Et&&q.length===Et));bt=!0);}catch(At){Ct=!0,ht=At}finally{try{!bt&&Z.return!=null&&Z.return()}finally{if(Ct)throw ht}}return q}}function f(St){if(Array.isArray(St))return St}function W(St,Et){if(!(St instanceof Et))throw new TypeError("Cannot call a class as a function")}function X(St,Et){for(var Z=0;Z<Et.length;Z++){var q=Et[Z];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(St,q.key,q)}}function z(St,Et,Z){return Et&&X(St.prototype,Et),Z&&X(St,Z),Object.defineProperty(St,"prototype",{writable:!1}),St}function U(St,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");St.prototype=Object.create(Et&&Et.prototype,{constructor:{value:St,writable:!0,configurable:!0}}),Object.defineProperty(St,"prototype",{writable:!1}),Et&&j(St,Et)}function j(St,Et){return j=Object.setPrototypeOf||function(q,bt){return q.__proto__=bt,q},j(St,Et)}function V(St){var Et=et();return function(){var q=ut(St),bt;if(Et){var Ct=ut(this).constructor;bt=Reflect.construct(q,arguments,Ct)}else bt=q.apply(this,arguments);return J(this,bt)}}function J(St,Et){if(Et&&(g(Et)==="object"||typeof Et=="function"))return Et;if(Et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q(St)}function Q(St){if(St===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return St}function et(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(St){return!1}}function ut(St){return ut=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},ut(St)}function it(St,Et,Z){return Et in St?Object.defineProperty(St,Et,{value:Z,enumerable:!0,configurable:!0,writable:!0}):St[Et]=Z,St}var yt={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},ft=yt.mouse,Bt=function(St){U(Z,St);var Et=V(Z);function Z(){var q;W(this,Z);for(var bt=arguments.length,Ct=new Array(bt),nt=0;nt<bt;nt++)Ct[nt]=arguments[nt];return q=Et.call.apply(Et,[this].concat(Ct)),it(Q(q),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),it(Q(q),"mounted",!1),it(Q(q),"handleDragStart",function(ht){if(q.props.onMouseDown(ht),!q.props.allowAnyClick&&typeof ht.button=="number"&&ht.button!==0)return!1;var At=q.findDOMNode();if(!At||!At.ownerDocument||!At.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Ot=At.ownerDocument;if(!(q.props.disabled||!(ht.target instanceof Ot.defaultView.Node)||q.props.handle&&!(0,P.matchesSelectorAndParentsTo)(ht.target,q.props.handle,At)||q.props.cancel&&(0,P.matchesSelectorAndParentsTo)(ht.target,q.props.cancel,At))){ht.type==="touchstart"&&ht.preventDefault();var xt=(0,P.getTouchIdentifier)(ht);q.setState({touchIdentifier:xt});var Dt=(0,L.getControlPosition)(ht,xt,Q(q));if(Dt!=null){var Yt=Dt.x,ie=Dt.y,re=(0,L.createCoreData)(Q(q),Yt,ie);(0,b.default)("DraggableCore: handleDragStart: %j",re),(0,b.default)("calling",q.props.onStart);var Pt=q.props.onStart(ht,re);Pt===!1||q.mounted===!1||(q.props.enableUserSelectHack&&(0,P.addUserSelectStyles)(Ot),q.setState({dragging:!0,lastX:Yt,lastY:ie}),(0,P.addEvent)(Ot,ft.move,q.handleDrag),(0,P.addEvent)(Ot,ft.stop,q.handleDragStop))}}}),it(Q(q),"handleDrag",function(ht){var At=(0,L.getControlPosition)(ht,q.state.touchIdentifier,Q(q));if(At!=null){var Ot=At.x,xt=At.y;if(Array.isArray(q.props.grid)){var Dt=Ot-q.state.lastX,Yt=xt-q.state.lastY,ie=(0,L.snapToGrid)(q.props.grid,Dt,Yt),re=A(ie,2);if(Dt=re[0],Yt=re[1],!Dt&&!Yt)return;Ot=q.state.lastX+Dt,xt=q.state.lastY+Yt}var Pt=(0,L.createCoreData)(Q(q),Ot,xt);(0,b.default)("DraggableCore: handleDrag: %j",Pt);var ee=q.props.onDrag(ht,Pt);if(ee===!1||q.mounted===!1){try{q.handleDragStop(new MouseEvent("mouseup"))}catch(Ut){var ce=document.createEvent("MouseEvents");ce.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),q.handleDragStop(ce)}return}q.setState({lastX:Ot,lastY:xt})}}),it(Q(q),"handleDragStop",function(ht){if(q.state.dragging){var At=(0,L.getControlPosition)(ht,q.state.touchIdentifier,Q(q));if(At!=null){var Ot=At.x,xt=At.y;if(Array.isArray(q.props.grid)){var Dt=Ot-q.state.lastX||0,Yt=xt-q.state.lastY||0,ie=(0,L.snapToGrid)(q.props.grid,Dt,Yt),re=A(ie,2);Dt=re[0],Yt=re[1],Ot=q.state.lastX+Dt,xt=q.state.lastY+Yt}var Pt=(0,L.createCoreData)(Q(q),Ot,xt),ee=q.props.onStop(ht,Pt);if(ee===!1||q.mounted===!1)return!1;var ce=q.findDOMNode();ce&&q.props.enableUserSelectHack&&(0,P.removeUserSelectStyles)(ce.ownerDocument),(0,b.default)("DraggableCore: handleDragStop: %j",Pt),q.setState({dragging:!1,lastX:NaN,lastY:NaN}),ce&&((0,b.default)("DraggableCore: Removing handlers"),(0,P.removeEvent)(ce.ownerDocument,ft.move,q.handleDrag),(0,P.removeEvent)(ce.ownerDocument,ft.stop,q.handleDragStop))}}}),it(Q(q),"onMouseDown",function(ht){return ft=yt.mouse,q.handleDragStart(ht)}),it(Q(q),"onMouseUp",function(ht){return ft=yt.mouse,q.handleDragStop(ht)}),it(Q(q),"onTouchStart",function(ht){return ft=yt.touch,q.handleDragStart(ht)}),it(Q(q),"onTouchEnd",function(ht){return ft=yt.touch,q.handleDragStop(ht)}),q}return z(Z,[{key:"componentDidMount",value:function(){this.mounted=!0;var bt=this.findDOMNode();bt&&(0,P.addEvent)(bt,yt.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var bt=this.findDOMNode();if(bt){var Ct=bt.ownerDocument;(0,P.removeEvent)(Ct,yt.mouse.move,this.handleDrag),(0,P.removeEvent)(Ct,yt.touch.move,this.handleDrag),(0,P.removeEvent)(Ct,yt.mouse.stop,this.handleDragStop),(0,P.removeEvent)(Ct,yt.touch.stop,this.handleDragStop),(0,P.removeEvent)(bt,yt.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,P.removeUserSelectStyles)(Ct)}}},{key:"findDOMNode",value:function(){var bt,Ct,nt;return(bt=this.props)!==null&&bt!==void 0&&bt.nodeRef?(Ct=this.props)===null||Ct===void 0||(nt=Ct.nodeRef)===null||nt===void 0?void 0:nt.current:M.default.findDOMNode(this)}},{key:"render",value:function(){return R.cloneElement(R.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),Z}(R.Component);G.default=Bt,it(Bt,"displayName","DraggableCore"),it(Bt,"propTypes",{allowAnyClick:w.default.bool,disabled:w.default.bool,enableUserSelectHack:w.default.bool,offsetParent:function(Et,Z){if(Et[Z]&&Et[Z].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:w.default.arrayOf(w.default.number),handle:w.default.string,cancel:w.default.string,nodeRef:w.default.object,onStart:w.default.func,onDrag:w.default.func,onStop:w.default.func,onMouseDown:w.default.func,scale:w.default.number,className:p.dontSetMe,style:p.dontSetMe,transform:p.dontSetMe}),it(Bt,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},861193:function(Ne,G,_){"use strict";var g=_(175668),R=g.default,w=g.DraggableCore;Ne.exports=R,Ne.exports.default=R,Ne.exports.DraggableCore=w},381825:function(Ne,G,_){"use strict";function g(it){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(yt){return typeof yt}:function(yt){return yt&&typeof Symbol=="function"&&yt.constructor===Symbol&&yt!==Symbol.prototype?"symbol":typeof yt},g(it)}Object.defineProperty(G,"__esModule",{value:!0}),G.addClassName=et,G.addEvent=A,G.addUserSelectStyles=J,G.createCSSTransform=X,G.createSVGTransform=z,G.getTouch=j,G.getTouchIdentifier=V,G.getTranslation=U,G.innerHeight=m,G.innerWidth=f,G.matchesSelector=x,G.matchesSelectorAndParentsTo=y,G.offsetXYFromParent=W,G.outerHeight=D,G.outerWidth=B,G.removeClassName=ut,G.removeEvent=E,G.removeUserSelectStyles=Q;var R=_(909280),w=P(_(138650));function M(it){if(typeof WeakMap!="function")return null;var yt=new WeakMap,ft=new WeakMap;return(M=function(St){return St?ft:yt})(it)}function P(it,yt){if(!yt&&it&&it.__esModule)return it;if(it===null||g(it)!=="object"&&typeof it!="function")return{default:it};var ft=M(yt);if(ft&&ft.has(it))return ft.get(it);var Bt={},St=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in it)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(it,Et)){var Z=St?Object.getOwnPropertyDescriptor(it,Et):null;Z&&(Z.get||Z.set)?Object.defineProperty(Bt,Et,Z):Bt[Et]=it[Et]}return Bt.default=it,ft&&ft.set(it,Bt),Bt}function L(it,yt){var ft=Object.keys(it);if(Object.getOwnPropertySymbols){var Bt=Object.getOwnPropertySymbols(it);yt&&(Bt=Bt.filter(function(St){return Object.getOwnPropertyDescriptor(it,St).enumerable})),ft.push.apply(ft,Bt)}return ft}function p(it){for(var yt=1;yt<arguments.length;yt++){var ft=arguments[yt]!=null?arguments[yt]:{};yt%2?L(Object(ft),!0).forEach(function(Bt){b(it,Bt,ft[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(it,Object.getOwnPropertyDescriptors(ft)):L(Object(ft)).forEach(function(Bt){Object.defineProperty(it,Bt,Object.getOwnPropertyDescriptor(ft,Bt))})}return it}function b(it,yt,ft){return yt in it?Object.defineProperty(it,yt,{value:ft,enumerable:!0,configurable:!0,writable:!0}):it[yt]=ft,it}var S="";function x(it,yt){return S||(S=(0,R.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(ft){return(0,R.isFunction)(it[ft])})),(0,R.isFunction)(it[S])?it[S](yt):!1}function y(it,yt,ft){var Bt=it;do{if(x(Bt,yt))return!0;if(Bt===ft)return!1;Bt=Bt.parentNode}while(Bt);return!1}function A(it,yt,ft,Bt){if(it){var St=p({capture:!0},Bt);it.addEventListener?it.addEventListener(yt,ft,St):it.attachEvent?it.attachEvent("on"+yt,ft):it["on"+yt]=ft}}function E(it,yt,ft,Bt){if(it){var St=p({capture:!0},Bt);it.removeEventListener?it.removeEventListener(yt,ft,St):it.detachEvent?it.detachEvent("on"+yt,ft):it["on"+yt]=null}}function D(it){var yt=it.clientHeight,ft=it.ownerDocument.defaultView.getComputedStyle(it);return yt+=(0,R.int)(ft.borderTopWidth),yt+=(0,R.int)(ft.borderBottomWidth),yt}function B(it){var yt=it.clientWidth,ft=it.ownerDocument.defaultView.getComputedStyle(it);return yt+=(0,R.int)(ft.borderLeftWidth),yt+=(0,R.int)(ft.borderRightWidth),yt}function m(it){var yt=it.clientHeight,ft=it.ownerDocument.defaultView.getComputedStyle(it);return yt-=(0,R.int)(ft.paddingTop),yt-=(0,R.int)(ft.paddingBottom),yt}function f(it){var yt=it.clientWidth,ft=it.ownerDocument.defaultView.getComputedStyle(it);return yt-=(0,R.int)(ft.paddingLeft),yt-=(0,R.int)(ft.paddingRight),yt}function W(it,yt,ft){var Bt=yt===yt.ownerDocument.body,St=Bt?{left:0,top:0}:yt.getBoundingClientRect(),Et=(it.clientX+yt.scrollLeft-St.left)/ft,Z=(it.clientY+yt.scrollTop-St.top)/ft;return{x:Et,y:Z}}function X(it,yt){var ft=U(it,yt,"px");return b({},(0,w.browserPrefixToKey)("transform",w.default),ft)}function z(it,yt){var ft=U(it,yt,"");return ft}function U(it,yt,ft){var Bt=it.x,St=it.y,Et="translate(".concat(Bt).concat(ft,",").concat(St).concat(ft,")");if(yt){var Z="".concat(typeof yt.x=="string"?yt.x:yt.x+ft),q="".concat(typeof yt.y=="string"?yt.y:yt.y+ft);Et="translate(".concat(Z,", ").concat(q,")")+Et}return Et}function j(it,yt){return it.targetTouches&&(0,R.findInArray)(it.targetTouches,function(ft){return yt===ft.identifier})||it.changedTouches&&(0,R.findInArray)(it.changedTouches,function(ft){return yt===ft.identifier})}function V(it){if(it.targetTouches&&it.targetTouches[0])return it.targetTouches[0].identifier;if(it.changedTouches&&it.changedTouches[0])return it.changedTouches[0].identifier}function J(it){if(it){var yt=it.getElementById("react-draggable-style-el");yt||(yt=it.createElement("style"),yt.type="text/css",yt.id="react-draggable-style-el",yt.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,yt.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,it.getElementsByTagName("head")[0].appendChild(yt)),it.body&&et(it.body,"react-draggable-transparent-selection")}}function Q(it){if(it)try{if(it.body&&ut(it.body,"react-draggable-transparent-selection"),it.selection)it.selection.empty();else{var yt=(it.defaultView||window).getSelection();yt&&yt.type!=="Caret"&&yt.removeAllRanges()}}catch(ft){}}function et(it,yt){it.classList?it.classList.add(yt):it.className.match(new RegExp("(?:^|\\s)".concat(yt,"(?!\\S)")))||(it.className+=" ".concat(yt))}function ut(it,yt){it.classList?it.classList.remove(yt):it.className=it.className.replace(new RegExp("(?:^|\\s)".concat(yt,"(?!\\S)"),"g"),"")}},138650:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.browserPrefixToKey=R,G.browserPrefixToStyle=w,G.default=void 0,G.getPrefix=g;var _=["Moz","Webkit","O","ms"];function g(){var L,p,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window=="undefined")return"";var S=(L=window.document)===null||L===void 0||(p=L.documentElement)===null||p===void 0?void 0:p.style;if(!S||b in S)return"";for(var x=0;x<_.length;x++)if(R(b,_[x])in S)return _[x];return""}function R(L,p){return p?"".concat(p).concat(M(L)):L}function w(L,p){return p?"-".concat(p.toLowerCase(),"-").concat(L):L}function M(L){for(var p="",b=!0,S=0;S<L.length;S++)b?(p+=L[S].toUpperCase(),b=!1):L[S]==="-"?b=!0:p+=L[S];return p}var P=g();G.default=P},955904:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=_;function _(){var g}},102849:function(Ne,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.canDragX=P,G.canDragY=L,G.createCoreData=b,G.createDraggableData=S,G.getBoundPosition=w,G.getControlPosition=p,G.snapToGrid=M;var g=_(909280),R=_(381825);function w(A,E,D){if(!A.props.bounds)return[E,D];var B=A.props.bounds;B=typeof B=="string"?B:x(B);var m=y(A);if(typeof B=="string"){var f=m.ownerDocument,W=f.defaultView,X;if(B==="parent"?X=m.parentNode:X=f.querySelector(B),!(X instanceof W.HTMLElement))throw new Error('Bounds selector "'+B+'" could not find an element.');var z=X,U=W.getComputedStyle(m),j=W.getComputedStyle(z);B={left:-m.offsetLeft+(0,g.int)(j.paddingLeft)+(0,g.int)(U.marginLeft),top:-m.offsetTop+(0,g.int)(j.paddingTop)+(0,g.int)(U.marginTop),right:(0,R.innerWidth)(z)-(0,R.outerWidth)(m)-m.offsetLeft+(0,g.int)(j.paddingRight)-(0,g.int)(U.marginRight),bottom:(0,R.innerHeight)(z)-(0,R.outerHeight)(m)-m.offsetTop+(0,g.int)(j.paddingBottom)-(0,g.int)(U.marginBottom)}}return(0,g.isNum)(B.right)&&(E=Math.min(E,B.right)),(0,g.isNum)(B.bottom)&&(D=Math.min(D,B.bottom)),(0,g.isNum)(B.left)&&(E=Math.max(E,B.left)),(0,g.isNum)(B.top)&&(D=Math.max(D,B.top)),[E,D]}function M(A,E,D){var B=Math.round(E/A[0])*A[0],m=Math.round(D/A[1])*A[1];return[B,m]}function P(A){return A.props.axis==="both"||A.props.axis==="x"}function L(A){return A.props.axis==="both"||A.props.axis==="y"}function p(A,E,D){var B=typeof E=="number"?(0,R.getTouch)(A,E):null;if(typeof E=="number"&&!B)return null;var m=y(D),f=D.props.offsetParent||m.offsetParent||m.ownerDocument.body;return(0,R.offsetXYFromParent)(B||A,f,D.props.scale)}function b(A,E,D){var B=A.state,m=!(0,g.isNum)(B.lastX),f=y(A);return m?{node:f,deltaX:0,deltaY:0,lastX:E,lastY:D,x:E,y:D}:{node:f,deltaX:E-B.lastX,deltaY:D-B.lastY,lastX:B.lastX,lastY:B.lastY,x:E,y:D}}function S(A,E){var D=A.props.scale;return{node:E.node,x:A.state.x+E.deltaX/D,y:A.state.y+E.deltaY/D,deltaX:E.deltaX/D,deltaY:E.deltaY/D,lastX:A.state.x,lastY:A.state.y}}function x(A){return{left:A.left,top:A.top,right:A.right,bottom:A.bottom}}function y(A){var E=A.findDOMNode();if(!E)throw new Error("<DraggableCore>: Unmounted during event!");return E}},909280:function(Ne,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.dontSetMe=M,G.findInArray=_,G.int=w,G.isFunction=g,G.isNum=R;function _(P,L){for(var p=0,b=P.length;p<b;p++)if(L.apply(L,[P[p],p,P]))return P[p]}function g(P){return typeof P=="function"||Object.prototype.toString.call(P)==="[object Function]"}function R(P){return typeof P=="number"&&!isNaN(P)}function w(P){return parseInt(P,10)}function M(P,L,p){if(P[L])return new Error("Invalid prop ".concat(L," passed to ").concat(p," - do not set this, set it on the child."))}},797005:function(Ne,G,_){var g;function R(p){if(!p||typeof window=="undefined")return;const b=document.createElement("style");return b.setAttribute("type","text/css"),b.innerHTML=p,document.head.appendChild(b),p}g={value:!0};var w=_(667294);function M(p){return p&&typeof p=="object"&&"default"in p?p:{default:p}}var P=M(w);R(`.marquee-container {
  overflow-x: hidden !important;
  display: flex !important;
  flex-direction: row !important;
  position: relative;
  width: var(--width);
  transform: var(--transform);
}
.marquee-container:hover div {
  animation-play-state: var(--pause-on-hover);
}
.marquee-container:active div {
  animation-play-state: var(--pause-on-click);
}

.overlay {
  position: absolute;
  width: 100%;
  height: 100%;
}
.overlay::before, .overlay::after {
  background: linear-gradient(to right, var(--gradient-color));
  content: "";
  height: 100%;
  position: absolute;
  width: var(--gradient-width);
  z-index: 2;
}
.overlay::after {
  right: 0;
  top: 0;
  transform: rotateZ(180deg);
}
.overlay::before {
  left: 0;
  top: 0;
}

.marquee {
  flex: 0 0 auto;
  min-width: var(--min-width);
  z-index: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
  animation-play-state: var(--play);
  animation-delay: var(--delay);
  animation-direction: var(--direction);
}
@keyframes scroll {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.initial-child-container {
  flex: 0 0 auto;
  display: flex;
  min-width: auto;
  flex-direction: row;
}

.child {
  transform: var(--transform);
}`);const L=w.forwardRef(function({style:b={},className:S="",autoFill:x=!1,play:y=!0,pauseOnHover:A=!1,pauseOnClick:E=!1,direction:D="left",speed:B=50,delay:m=0,loop:f=0,gradient:W=!1,gradientColor:X=[255,255,255],gradientWidth:z=200,onFinish:U,onCycleComplete:j,children:V},J){const[Q,et]=w.useState(0),[ut,it]=w.useState(0),[yt,ft]=w.useState(1),[Bt,St]=w.useState(!1),Et=w.useRef(null),Z=J||Et,q=w.useRef(null),bt=w.useCallback(()=>{if(q.current&&Z.current){const Yt=Z.current.getBoundingClientRect(),ie=q.current.getBoundingClientRect();let re=Yt.width,Pt=ie.width;(D==="up"||D==="down")&&(re=Yt.height,Pt=ie.height),ft(x&&re&&Pt&&Pt<re?Math.ceil(re/Pt):1),et(re),it(Pt)}},[x,Z,D]);w.useEffect(()=>{if(Bt&&(bt(),q.current&&Z.current)){const Yt=new ResizeObserver(()=>bt());return Yt.observe(Z.current),Yt.observe(q.current),()=>{Yt&&Yt.disconnect()}}},[bt,Z,Bt]),w.useEffect(()=>{bt()},[bt,V]),w.useEffect(()=>{St(!0)},[]);const Ct=w.useMemo(()=>x?ut*yt/B:ut<Q?Q/B:ut/B,[x,Q,ut,yt,B]),nt=`rgba(${X[0]}, ${X[1]}, ${X[2]}`,ht=w.useMemo(()=>Object.assign(Object.assign({},b),{["--pause-on-hover"]:!y||A?"paused":"running",["--pause-on-click"]:!y||A&&!E||E?"paused":"running",["--width"]:D==="up"||D==="down"?"100vh":"100%",["--transform"]:D==="up"?"rotate(-90deg)":D==="down"?"rotate(90deg)":"none"}),[b,y,A,E,D]),At=w.useMemo(()=>({["--gradient-color"]:`${nt}, 1), ${nt}, 0)`,["--gradient-width"]:typeof z=="number"?`${z}px`:z}),[nt,z]),Ot=w.useMemo(()=>({["--play"]:y?"running":"paused",["--direction"]:D==="left"?"normal":"reverse",["--duration"]:`${Ct}s`,["--delay"]:`${m}s`,["--iteration-count"]:f?`${f}`:"infinite",["--min-width"]:x?"auto":"100%"}),[y,D,Ct,m,f,x]),xt=w.useMemo(()=>({["--transform"]:D==="up"?"rotate(90deg)":D==="down"?"rotate(-90deg)":"none"}),[D]),Dt=w.useCallback(Yt=>[...Array(Number.isFinite(Yt)&&Yt>=0?Yt:0)].map((ie,re)=>P.default.createElement(w.Fragment,{key:re},w.Children.map(V,Pt=>P.default.createElement("div",{style:xt,className:"child"},Pt)))),[xt,V]);return Bt?P.default.createElement("div",{ref:Z,style:ht,className:"marquee-container "+S},W&&P.default.createElement("div",{style:At,className:"overlay"}),P.default.createElement("div",{className:"marquee",style:Ot,onAnimationIteration:j,onAnimationEnd:U},P.default.createElement("div",{className:"initial-child-container",ref:q},w.Children.map(V,Yt=>P.default.createElement("div",{style:xt,className:"child"},Yt))),Dt(yt-1)),P.default.createElement("div",{className:"marquee",style:Ot},Dt(yt))):null});G.Z=L},537763:function(Ne,G,_){Ne.exports=function(g){var R={};function w(M){if(R[M])return R[M].exports;var P=R[M]={exports:{},id:M,loaded:!1};return g[M].call(P.exports,P,P.exports,w),P.loaded=!0,P.exports}return w.m=g,w.c=R,w.p="",w(0)}([function(g,R,w){g.exports=w(1)},function(g,R,w){"use strict";Object.defineProperty(R,"__esModule",{value:!0});function M(p){return p&&p.__esModule?p:{default:p}}var P=w(2),L=M(P);R.default=L.default,g.exports=R.default},function(g,R,w){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var M=Object.assign||function(D){for(var B=1;B<arguments.length;B++){var m=arguments[B];for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(D[f]=m[f])}return D};R.default=E;function P(D){return D&&D.__esModule?D:{default:D}}function L(D,B){var m={};for(var f in D)B.indexOf(f)>=0||Object.prototype.hasOwnProperty.call(D,f)&&(m[f]=D[f]);return m}var p=w(3),b=w(4),S=P(b),x=w(14),y=w(15),A=P(y);E.propTypes={activeClassName:S.default.string,activeIndex:S.default.number,activeStyle:S.default.object,autoEscape:S.default.bool,className:S.default.string,findChunks:S.default.func,highlightClassName:S.default.oneOfType([S.default.object,S.default.string]),highlightStyle:S.default.object,highlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),sanitize:S.default.func,searchWords:S.default.arrayOf(S.default.oneOfType([S.default.string,S.default.instanceOf(RegExp)])).isRequired,textToHighlight:S.default.string.isRequired,unhighlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),unhighlightClassName:S.default.string,unhighlightStyle:S.default.object};function E(D){var B=D.activeClassName,m=B===void 0?"":B,f=D.activeIndex,W=f===void 0?-1:f,X=D.activeStyle,z=D.autoEscape,U=D.caseSensitive,j=U===void 0?!1:U,V=D.className,J=D.findChunks,Q=D.highlightClassName,et=Q===void 0?"":Q,ut=D.highlightStyle,it=ut===void 0?{}:ut,yt=D.highlightTag,ft=yt===void 0?"mark":yt,Bt=D.sanitize,St=D.searchWords,Et=D.textToHighlight,Z=D.unhighlightTag,q=Z===void 0?"span":Z,bt=D.unhighlightClassName,Ct=bt===void 0?"":bt,nt=D.unhighlightStyle,ht=L(D,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),At=(0,p.findAll)({autoEscape:z,caseSensitive:j,findChunks:J,sanitize:Bt,searchWords:St,textToHighlight:Et}),Ot=ft,xt=-1,Dt="",Yt=void 0,ie=function(ee){var ce={};for(var Ut in ee)ce[Ut.toLowerCase()]=ee[Ut];return ce},re=(0,A.default)(ie);return(0,x.createElement)("span",M({className:V},ht,{children:At.map(function(Pt,ee){var ce=Et.substr(Pt.start,Pt.end-Pt.start);if(Pt.highlight){xt++;var Ut=void 0;typeof et=="object"?j?Ut=et[ce]:(et=re(et),Ut=et[ce.toLowerCase()]):Ut=et;var te=xt===+W;Dt=Ut+" "+(te?m:""),Yt=te===!0&&X!=null?Object.assign({},it,X):it;var ye={children:ce,className:Dt,key:ee,style:Yt};return typeof Ot!="string"&&(ye.highlightIndex=xt),(0,x.createElement)(Ot,ye)}else return(0,x.createElement)(q,{children:ce,className:Ct,key:ee,style:nt})})}))}g.exports=R.default},function(g,R){g.exports=function(w){var M={};function P(L){if(M[L])return M[L].exports;var p=M[L]={exports:{},id:L,loaded:!1};return w[L].call(p.exports,p,p.exports,P),p.loaded=!0,p.exports}return P.m=w,P.c=M,P.p="",P(0)}([function(w,M,P){w.exports=P(1)},function(w,M,P){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var L=P(2);Object.defineProperty(M,"combineChunks",{enumerable:!0,get:function(){return L.combineChunks}}),Object.defineProperty(M,"fillInChunks",{enumerable:!0,get:function(){return L.fillInChunks}}),Object.defineProperty(M,"findAll",{enumerable:!0,get:function(){return L.findAll}}),Object.defineProperty(M,"findChunks",{enumerable:!0,get:function(){return L.findChunks}})},function(w,M){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var P=M.findAll=function(A){var E=A.autoEscape,D=A.caseSensitive,B=D===void 0?!1:D,m=A.findChunks,f=m===void 0?p:m,W=A.sanitize,X=A.searchWords,z=A.textToHighlight;return b({chunksToHighlight:L({chunks:f({autoEscape:E,caseSensitive:B,sanitize:W,searchWords:X,textToHighlight:z})}),totalLength:z?z.length:0})},L=M.combineChunks=function(A){var E=A.chunks;return E=E.sort(function(D,B){return D.start-B.start}).reduce(function(D,B){if(D.length===0)return[B];var m=D.pop();if(B.start<=m.end){var f=Math.max(m.end,B.end);D.push({start:m.start,end:f})}else D.push(m,B);return D},[]),E},p=function(A){var E=A.autoEscape,D=A.caseSensitive,B=A.sanitize,m=B===void 0?S:B,f=A.searchWords,W=A.textToHighlight;return W=m(W),f.filter(function(X){return X}).reduce(function(X,z){z=m(z),E&&(z=x(z));for(var U=new RegExp(z,D?"g":"gi"),j=void 0;j=U.exec(W);){var V=j.index,J=U.lastIndex;J>V&&X.push({start:V,end:J}),j.index==U.lastIndex&&U.lastIndex++}return X},[])};M.findChunks=p;var b=M.fillInChunks=function(A){var E=A.chunksToHighlight,D=A.totalLength,B=[],m=function(X,z,U){z-X>0&&B.push({start:X,end:z,highlight:U})};if(E.length===0)m(0,D,!1);else{var f=0;E.forEach(function(W){m(f,W.start,!1),m(W.start,W.end,!0),f=W.end}),m(f,D,!1)}return B};function S(y){return y}function x(y){return y.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}])},function(g,R,w){(function(M){if(M.env.NODE_ENV!=="production"){var P=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,L=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===P},p=!0;g.exports=w(6)(L,p)}else g.exports=w(13)()}).call(R,w(5))},function(g,R){var w=g.exports={},M,P;function L(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?M=setTimeout:M=L}catch(W){M=L}try{typeof clearTimeout=="function"?P=clearTimeout:P=p}catch(W){P=p}})();function b(W){if(M===setTimeout)return setTimeout(W,0);if((M===L||!M)&&setTimeout)return M=setTimeout,setTimeout(W,0);try{return M(W,0)}catch(X){try{return M.call(null,W,0)}catch(z){return M.call(this,W,0)}}}function S(W){if(P===clearTimeout)return clearTimeout(W);if((P===p||!P)&&clearTimeout)return P=clearTimeout,clearTimeout(W);try{return P(W)}catch(X){try{return P.call(null,W)}catch(z){return P.call(this,W)}}}var x=[],y=!1,A,E=-1;function D(){!y||!A||(y=!1,A.length?x=A.concat(x):E=-1,x.length&&B())}function B(){if(!y){var W=b(D);y=!0;for(var X=x.length;X;){for(A=x,x=[];++E<X;)A&&A[E].run();E=-1,X=x.length}A=null,y=!1,S(W)}}w.nextTick=function(W){var X=new Array(arguments.length-1);if(arguments.length>1)for(var z=1;z<arguments.length;z++)X[z-1]=arguments[z];x.push(new m(W,X)),x.length===1&&!y&&b(B)};function m(W,X){this.fun=W,this.array=X}m.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function f(){}w.on=f,w.addListener=f,w.once=f,w.off=f,w.removeListener=f,w.removeAllListeners=f,w.emit=f,w.prependListener=f,w.prependOnceListener=f,w.listeners=function(W){return[]},w.binding=function(W){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(W){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},function(g,R,w){(function(M){"use strict";var P=w(7),L=w(8),p=w(9),b=w(10),S=w(11),x=w(12);g.exports=function(y,A){var E=typeof Symbol=="function"&&Symbol.iterator,D="@@iterator";function B(nt){var ht=nt&&(E&&nt[E]||nt[D]);if(typeof ht=="function")return ht}var m="<<anonymous>>",f={array:U("array"),bool:U("boolean"),func:U("function"),number:U("number"),object:U("object"),string:U("string"),symbol:U("symbol"),any:j(),arrayOf:V,element:J(),instanceOf:Q,node:yt(),objectOf:ut,oneOf:et,oneOfType:it,shape:ft,exact:Bt};function W(nt,ht){return nt===ht?nt!==0||1/nt===1/ht:nt!==nt&&ht!==ht}function X(nt){this.message=nt,this.stack=""}X.prototype=Error.prototype;function z(nt){if(M.env.NODE_ENV!=="production")var ht={},At=0;function Ot(Dt,Yt,ie,re,Pt,ee,ce){if(re=re||m,ee=ee||ie,ce!==S){if(A)L(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(M.env.NODE_ENV!=="production"&&typeof console!="undefined"){var Ut=re+":"+ie;!ht[Ut]&&At<3&&(p(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",ee,re),ht[Ut]=!0,At++)}}return Yt[ie]==null?Dt?Yt[ie]===null?new X("The "+Pt+" `"+ee+"` is marked as required "+("in `"+re+"`, but its value is `null`.")):new X("The "+Pt+" `"+ee+"` is marked as required in "+("`"+re+"`, but its value is `undefined`.")):null:nt(Yt,ie,re,Pt,ee)}var xt=Ot.bind(null,!1);return xt.isRequired=Ot.bind(null,!0),xt}function U(nt){function ht(At,Ot,xt,Dt,Yt,ie){var re=At[Ot],Pt=Z(re);if(Pt!==nt){var ee=q(re);return new X("Invalid "+Dt+" `"+Yt+"` of type "+("`"+ee+"` supplied to `"+xt+"`, expected ")+("`"+nt+"`."))}return null}return z(ht)}function j(){return z(P.thatReturnsNull)}function V(nt){function ht(At,Ot,xt,Dt,Yt){if(typeof nt!="function")return new X("Property `"+Yt+"` of component `"+xt+"` has invalid PropType notation inside arrayOf.");var ie=At[Ot];if(!Array.isArray(ie)){var re=Z(ie);return new X("Invalid "+Dt+" `"+Yt+"` of type "+("`"+re+"` supplied to `"+xt+"`, expected an array."))}for(var Pt=0;Pt<ie.length;Pt++){var ee=nt(ie,Pt,xt,Dt,Yt+"["+Pt+"]",S);if(ee instanceof Error)return ee}return null}return z(ht)}function J(){function nt(ht,At,Ot,xt,Dt){var Yt=ht[At];if(!y(Yt)){var ie=Z(Yt);return new X("Invalid "+xt+" `"+Dt+"` of type "+("`"+ie+"` supplied to `"+Ot+"`, expected a single ReactElement."))}return null}return z(nt)}function Q(nt){function ht(At,Ot,xt,Dt,Yt){if(!(At[Ot]instanceof nt)){var ie=nt.name||m,re=Ct(At[Ot]);return new X("Invalid "+Dt+" `"+Yt+"` of type "+("`"+re+"` supplied to `"+xt+"`, expected ")+("instance of `"+ie+"`."))}return null}return z(ht)}function et(nt){if(!Array.isArray(nt))return M.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOf, expected an instance of array."),P.thatReturnsNull;function ht(At,Ot,xt,Dt,Yt){for(var ie=At[Ot],re=0;re<nt.length;re++)if(W(ie,nt[re]))return null;var Pt=JSON.stringify(nt);return new X("Invalid "+Dt+" `"+Yt+"` of value `"+ie+"` "+("supplied to `"+xt+"`, expected one of "+Pt+"."))}return z(ht)}function ut(nt){function ht(At,Ot,xt,Dt,Yt){if(typeof nt!="function")return new X("Property `"+Yt+"` of component `"+xt+"` has invalid PropType notation inside objectOf.");var ie=At[Ot],re=Z(ie);if(re!=="object")return new X("Invalid "+Dt+" `"+Yt+"` of type "+("`"+re+"` supplied to `"+xt+"`, expected an object."));for(var Pt in ie)if(ie.hasOwnProperty(Pt)){var ee=nt(ie,Pt,xt,Dt,Yt+"."+Pt,S);if(ee instanceof Error)return ee}return null}return z(ht)}function it(nt){if(!Array.isArray(nt))return M.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),P.thatReturnsNull;for(var ht=0;ht<nt.length;ht++){var At=nt[ht];if(typeof At!="function")return p(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",bt(At),ht),P.thatReturnsNull}function Ot(xt,Dt,Yt,ie,re){for(var Pt=0;Pt<nt.length;Pt++){var ee=nt[Pt];if(ee(xt,Dt,Yt,ie,re,S)==null)return null}return new X("Invalid "+ie+" `"+re+"` supplied to "+("`"+Yt+"`."))}return z(Ot)}function yt(){function nt(ht,At,Ot,xt,Dt){return St(ht[At])?null:new X("Invalid "+xt+" `"+Dt+"` supplied to "+("`"+Ot+"`, expected a ReactNode."))}return z(nt)}function ft(nt){function ht(At,Ot,xt,Dt,Yt){var ie=At[Ot],re=Z(ie);if(re!=="object")return new X("Invalid "+Dt+" `"+Yt+"` of type `"+re+"` "+("supplied to `"+xt+"`, expected `object`."));for(var Pt in nt){var ee=nt[Pt];if(ee){var ce=ee(ie,Pt,xt,Dt,Yt+"."+Pt,S);if(ce)return ce}}return null}return z(ht)}function Bt(nt){function ht(At,Ot,xt,Dt,Yt){var ie=At[Ot],re=Z(ie);if(re!=="object")return new X("Invalid "+Dt+" `"+Yt+"` of type `"+re+"` "+("supplied to `"+xt+"`, expected `object`."));var Pt=b({},At[Ot],nt);for(var ee in Pt){var ce=nt[ee];if(!ce)return new X("Invalid "+Dt+" `"+Yt+"` key `"+ee+"` supplied to `"+xt+"`.\nBad object: "+JSON.stringify(At[Ot],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(nt),null,"  "));var Ut=ce(ie,ee,xt,Dt,Yt+"."+ee,S);if(Ut)return Ut}return null}return z(ht)}function St(nt){switch(typeof nt){case"number":case"string":case"undefined":return!0;case"boolean":return!nt;case"object":if(Array.isArray(nt))return nt.every(St);if(nt===null||y(nt))return!0;var ht=B(nt);if(ht){var At=ht.call(nt),Ot;if(ht!==nt.entries){for(;!(Ot=At.next()).done;)if(!St(Ot.value))return!1}else for(;!(Ot=At.next()).done;){var xt=Ot.value;if(xt&&!St(xt[1]))return!1}}else return!1;return!0;default:return!1}}function Et(nt,ht){return nt==="symbol"||ht["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&ht instanceof Symbol}function Z(nt){var ht=typeof nt;return Array.isArray(nt)?"array":nt instanceof RegExp?"object":Et(ht,nt)?"symbol":ht}function q(nt){if(typeof nt=="undefined"||nt===null)return""+nt;var ht=Z(nt);if(ht==="object"){if(nt instanceof Date)return"date";if(nt instanceof RegExp)return"regexp"}return ht}function bt(nt){var ht=q(nt);switch(ht){case"array":case"object":return"an "+ht;case"boolean":case"date":case"regexp":return"a "+ht;default:return ht}}function Ct(nt){return!nt.constructor||!nt.constructor.name?m:nt.constructor.name}return f.checkPropTypes=x,f.PropTypes=f,f}}).call(R,w(5))},function(g,R){"use strict";function w(P){return function(){return P}}var M=function(){};M.thatReturns=w,M.thatReturnsFalse=w(!1),M.thatReturnsTrue=w(!0),M.thatReturnsNull=w(null),M.thatReturnsThis=function(){return this},M.thatReturnsArgument=function(P){return P},g.exports=M},function(g,R,w){(function(M){"use strict";var P=function(b){};M.env.NODE_ENV!=="production"&&(P=function(b){if(b===void 0)throw new Error("invariant requires an error message argument")});function L(p,b,S,x,y,A,E,D){if(P(b),!p){var B;if(b===void 0)B=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[S,x,y,A,E,D],f=0;B=new Error(b.replace(/%s/g,function(){return m[f++]})),B.name="Invariant Violation"}throw B.framesToPop=1,B}}g.exports=L}).call(R,w(5))},function(g,R,w){(function(M){"use strict";var P=w(7),L=P;if(M.env.NODE_ENV!=="production"){var p=function(S){for(var x=arguments.length,y=Array(x>1?x-1:0),A=1;A<x;A++)y[A-1]=arguments[A];var E=0,D="Warning: "+S.replace(/%s/g,function(){return y[E++]});typeof console!="undefined"&&console.error(D);try{throw new Error(D)}catch(B){}};L=function(S,x){if(x===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(x.indexOf("Failed Composite propType: ")!==0&&!S){for(var y=arguments.length,A=Array(y>2?y-2:0),E=2;E<y;E++)A[E-2]=arguments[E];p.apply(void 0,[x].concat(A))}}}g.exports=L}).call(R,w(5))},function(g,R){"use strict";var w=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;function L(b){if(b==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(b)}function p(){try{if(!Object.assign)return!1;var b=new String("abc");if(b[5]="de",Object.getOwnPropertyNames(b)[0]==="5")return!1;for(var S={},x=0;x<10;x++)S["_"+String.fromCharCode(x)]=x;var y=Object.getOwnPropertyNames(S).map(function(E){return S[E]});if(y.join("")!=="0123456789")return!1;var A={};return"abcdefghijklmnopqrst".split("").forEach(function(E){A[E]=E}),Object.keys(Object.assign({},A)).join("")==="abcdefghijklmnopqrst"}catch(E){return!1}}g.exports=p()?Object.assign:function(b,S){for(var x,y=L(b),A,E=1;E<arguments.length;E++){x=Object(arguments[E]);for(var D in x)M.call(x,D)&&(y[D]=x[D]);if(w){A=w(x);for(var B=0;B<A.length;B++)P.call(x,A[B])&&(y[A[B]]=x[A[B]])}}return y}},function(g,R){"use strict";var w="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";g.exports=w},function(g,R,w){(function(M){"use strict";if(M.env.NODE_ENV!=="production")var P=w(8),L=w(9),p=w(11),b={};function S(x,y,A,E,D){if(M.env.NODE_ENV!=="production"){for(var B in x)if(x.hasOwnProperty(B)){var m;try{P(typeof x[B]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",E||"React class",A,B,typeof x[B]),m=x[B](y,B,E,A,null,p)}catch(W){m=W}if(L(!m||m instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",E||"React class",A,B,typeof m),m instanceof Error&&!(m.message in b)){b[m.message]=!0;var f=D?D():"";L(!1,"Failed %s type: %s%s",A,m.message,f!=null?f:"")}}}}g.exports=S}).call(R,w(5))},function(g,R,w){"use strict";var M=w(7),P=w(8),L=w(11);g.exports=function(){function p(x,y,A,E,D,B){B!==L&&P(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}p.isRequired=p;function b(){return p}var S={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:b,element:p,instanceOf:b,node:p,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return S.checkPropTypes=M,S.PropTypes=S,S}},function(g,R){g.exports=_(667294)},function(g,R){"use strict";var w=function(L,p){return L===p};function M(P){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,p=void 0,b=[],S=void 0,x=!1,y=function(D,B){return L(D,b[B])},A=function(){for(var D=arguments.length,B=Array(D),m=0;m<D;m++)B[m]=arguments[m];return x&&p===this&&B.length===b.length&&B.every(y)||(x=!0,p=this,b=B,S=P.apply(this,B)),S};return A}g.exports=M}])},58533:function(Ne,G,_){"use strict";var g=_(667294);var R=function(x,y){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var D in E)E.hasOwnProperty(D)&&(A[D]=E[D])},R(x,y)};function w(x,y){R(x,y);function A(){this.constructor=x}x.prototype=y===null?Object.create(y):(A.prototype=y.prototype,new A)}var M=function(){return M=Object.assign||function(y){for(var A,E=1,D=arguments.length;E<D;E++){A=arguments[E];for(var B in A)Object.prototype.hasOwnProperty.call(A,B)&&(y[B]=A[B])}return y},M.apply(this,arguments)};function P(x,y,A,E){var D,B=!1,m=0;function f(){D&&clearTimeout(D)}function W(){f(),B=!0}typeof y!="boolean"&&(E=A,A=y,y=void 0);function X(){var z=this,U=Date.now()-m,j=arguments;if(B)return;function V(){m=Date.now(),A.apply(z,j)}function J(){D=void 0}E&&!D&&V(),f(),E===void 0&&U>x?V():y!==!0&&(D=setTimeout(E?J:V,E===void 0?x-U:x))}return X.cancel=W,X}var L={Pixel:"Pixel",Percent:"Percent"},p={unit:L.Percent,value:.8};function b(x){return typeof x=="number"?{unit:L.Percent,value:x*100}:typeof x=="string"?x.match(/^(\d*(\.\d+)?)px$/)?{unit:L.Pixel,value:parseFloat(x)}:x.match(/^(\d*(\.\d+)?)%$/)?{unit:L.Percent,value:parseFloat(x)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),p):(console.warn("scrollThreshold should be string or number"),p)}var S=function(x){w(y,x);function y(A){var E=x.call(this,A)||this;return E.lastScrollTop=0,E.actionTriggered=!1,E.startY=0,E.currentY=0,E.dragging=!1,E.maxPullDownDistance=0,E.getScrollableTarget=function(){return E.props.scrollableTarget instanceof HTMLElement?E.props.scrollableTarget:typeof E.props.scrollableTarget=="string"?document.getElementById(E.props.scrollableTarget):(E.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},E.onStart=function(D){E.lastScrollTop||(E.dragging=!0,D instanceof MouseEvent?E.startY=D.pageY:D instanceof TouchEvent&&(E.startY=D.touches[0].pageY),E.currentY=E.startY,E._infScroll&&(E._infScroll.style.willChange="transform",E._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},E.onMove=function(D){E.dragging&&(D instanceof MouseEvent?E.currentY=D.pageY:D instanceof TouchEvent&&(E.currentY=D.touches[0].pageY),!(E.currentY<E.startY)&&(E.currentY-E.startY>=Number(E.props.pullDownToRefreshThreshold)&&E.setState({pullToRefreshThresholdBreached:!0}),!(E.currentY-E.startY>E.maxPullDownDistance*1.5)&&E._infScroll&&(E._infScroll.style.overflow="visible",E._infScroll.style.transform="translate3d(0px, "+(E.currentY-E.startY)+"px, 0px)")))},E.onEnd=function(){E.startY=0,E.currentY=0,E.dragging=!1,E.state.pullToRefreshThresholdBreached&&(E.props.refreshFunction&&E.props.refreshFunction(),E.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){E._infScroll&&(E._infScroll.style.overflow="auto",E._infScroll.style.transform="none",E._infScroll.style.willChange="unset")})},E.onScrollListener=function(D){typeof E.props.onScroll=="function"&&setTimeout(function(){return E.props.onScroll&&E.props.onScroll(D)},0);var B=E.props.height||E._scrollableNode?D.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!E.actionTriggered){var m=E.props.inverse?E.isElementAtTop(B,E.props.scrollThreshold):E.isElementAtBottom(B,E.props.scrollThreshold);m&&E.props.hasMore&&(E.actionTriggered=!0,E.setState({showLoader:!0}),E.props.next&&E.props.next()),E.lastScrollTop=B.scrollTop}},E.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:A.dataLength},E.throttledOnScrollListener=P(150,E.onScrollListener).bind(E),E.onStart=E.onStart.bind(E),E.onMove=E.onMove.bind(E),E.onEnd=E.onEnd.bind(E),E}return y.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},y.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},y.prototype.componentDidUpdate=function(A){this.props.dataLength!==A.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},y.getDerivedStateFromProps=function(A,E){var D=A.dataLength!==E.prevDataLength;return D?M(M({},E),{prevDataLength:A.dataLength}):null},y.prototype.isElementAtTop=function(A,E){E===void 0&&(E=.8);var D=A===document.body||A===document.documentElement?window.screen.availHeight:A.clientHeight,B=b(E);return B.unit===L.Pixel?A.scrollTop<=B.value+D-A.scrollHeight+1:A.scrollTop<=B.value/100+D-A.scrollHeight+1},y.prototype.isElementAtBottom=function(A,E){E===void 0&&(E=.8);var D=A===document.body||A===document.documentElement?window.screen.availHeight:A.clientHeight,B=b(E);return B.unit===L.Pixel?A.scrollTop+D>=A.scrollHeight-B.value:A.scrollTop+D>=B.value/100*A.scrollHeight},y.prototype.render=function(){var A=this,E=M({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),D=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),B=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return g.createElement("div",{style:B,className:"infinite-scroll-component__outerdiv"},g.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(m){return A._infScroll=m},style:E},this.props.pullDownToRefresh&&g.createElement("div",{style:{position:"relative"},ref:function(m){return A._pullDown=m}},g.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!D&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},y}(g.Component);G.Z=S},122827:function(Ne,G,_){"use strict";G.__esModule=!0,G.default=void 0;var g=p(_(667294)),R=_(861193),w=_(459069),M=_(100448),P=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function L(W){if(typeof WeakMap!="function")return null;var X=new WeakMap,z=new WeakMap;return(L=function(j){return j?z:X})(W)}function p(W,X){if(!X&&W&&W.__esModule)return W;if(W===null||typeof W!="object"&&typeof W!="function")return{default:W};var z=L(X);if(z&&z.has(W))return z.get(W);var U={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in W)if(V!=="default"&&Object.prototype.hasOwnProperty.call(W,V)){var J=j?Object.getOwnPropertyDescriptor(W,V):null;J&&(J.get||J.set)?Object.defineProperty(U,V,J):U[V]=W[V]}return U.default=W,z&&z.set(W,U),U}function b(){return b=Object.assign?Object.assign.bind():function(W){for(var X=1;X<arguments.length;X++){var z=arguments[X];for(var U in z)Object.prototype.hasOwnProperty.call(z,U)&&(W[U]=z[U])}return W},b.apply(this,arguments)}function S(W,X){if(W==null)return{};var z={},U=Object.keys(W),j,V;for(V=0;V<U.length;V++)j=U[V],!(X.indexOf(j)>=0)&&(z[j]=W[j]);return z}function x(W,X){var z=Object.keys(W);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(W);X&&(U=U.filter(function(j){return Object.getOwnPropertyDescriptor(W,j).enumerable})),z.push.apply(z,U)}return z}function y(W){for(var X=1;X<arguments.length;X++){var z=arguments[X]!=null?arguments[X]:{};X%2?x(Object(z),!0).forEach(function(U){A(W,U,z[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(z)):x(Object(z)).forEach(function(U){Object.defineProperty(W,U,Object.getOwnPropertyDescriptor(z,U))})}return W}function A(W,X,z){return X=E(X),X in W?Object.defineProperty(W,X,{value:z,enumerable:!0,configurable:!0,writable:!0}):W[X]=z,W}function E(W){var X=D(W,"string");return typeof X=="symbol"?X:String(X)}function D(W,X){if(typeof W!="object"||W===null)return W;var z=W[Symbol.toPrimitive];if(z!==void 0){var U=z.call(W,X||"default");if(typeof U!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(X==="string"?String:Number)(W)}function B(W,X){W.prototype=Object.create(X.prototype),W.prototype.constructor=W,m(W,X)}function m(W,X){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,j){return U.__proto__=j,U},m(W,X)}var f=function(W){B(X,W);function X(){for(var U,j=arguments.length,V=new Array(j),J=0;J<j;J++)V[J]=arguments[J];return U=W.call.apply(W,[this].concat(V))||this,U.handleRefs={},U.lastHandleRect=null,U.slack=null,U}var z=X.prototype;return z.componentWillUnmount=function(){this.resetData()},z.resetData=function(){this.lastHandleRect=this.slack=null},z.runConstraints=function(j,V){var J=this.props,Q=J.minConstraints,et=J.maxConstraints,ut=J.lockAspectRatio;if(!Q&&!et&&!ut)return[j,V];if(ut){var it=this.props.width/this.props.height,yt=j-this.props.width,ft=V-this.props.height;Math.abs(yt)>Math.abs(ft*it)?V=j/it:j=V*it}var Bt=j,St=V,Et=this.slack||[0,0],Z=Et[0],q=Et[1];return j+=Z,V+=q,Q&&(j=Math.max(Q[0],j),V=Math.max(Q[1],V)),et&&(j=Math.min(et[0],j),V=Math.min(et[1],V)),this.slack=[Z+(Bt-j),q+(St-V)],[j,V]},z.resizeHandler=function(j,V){var J=this;return function(Q,et){var ut=et.node,it=et.deltaX,yt=et.deltaY;j==="onResizeStart"&&J.resetData();var ft=(J.props.axis==="both"||J.props.axis==="x")&&V!=="n"&&V!=="s",Bt=(J.props.axis==="both"||J.props.axis==="y")&&V!=="e"&&V!=="w";if(!(!ft&&!Bt)){var St=V[0],Et=V[V.length-1],Z=ut.getBoundingClientRect();if(J.lastHandleRect!=null){if(Et==="w"){var q=Z.left-J.lastHandleRect.left;it+=q}if(St==="n"){var bt=Z.top-J.lastHandleRect.top;yt+=bt}}J.lastHandleRect=Z,Et==="w"&&(it=-it),St==="n"&&(yt=-yt);var Ct=J.props.width+(ft?it/J.props.transformScale:0),nt=J.props.height+(Bt?yt/J.props.transformScale:0),ht=J.runConstraints(Ct,nt);Ct=ht[0],nt=ht[1];var At=Ct!==J.props.width||nt!==J.props.height,Ot=typeof J.props[j]=="function"?J.props[j]:null,xt=j==="onResize"&&!At;Ot&&!xt&&(Q.persist==null||Q.persist(),Ot(Q,{node:ut,size:{width:Ct,height:nt},handle:V})),j==="onResizeStop"&&J.resetData()}}},z.renderResizeHandle=function(j,V){var J=this.props.handle;if(!J)return g.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+j,ref:V});if(typeof J=="function")return J(j,V);var Q=typeof J.type=="string",et=y({ref:V},Q?{}:{handleAxis:j});return g.cloneElement(J,et)},z.render=function(){var j=this,V=this.props,J=V.children,Q=V.className,et=V.draggableOpts,ut=V.width,it=V.height,yt=V.handle,ft=V.handleSize,Bt=V.lockAspectRatio,St=V.axis,Et=V.minConstraints,Z=V.maxConstraints,q=V.onResize,bt=V.onResizeStop,Ct=V.onResizeStart,nt=V.resizeHandles,ht=V.transformScale,At=S(V,P);return(0,w.cloneElement)(J,y(y({},At),{},{className:(Q?Q+" ":"")+"react-resizable",children:[].concat(J.props.children,nt.map(function(Ot){var xt,Dt=(xt=j.handleRefs[Ot])!=null?xt:j.handleRefs[Ot]=g.createRef();return g.createElement(R.DraggableCore,b({},et,{nodeRef:Dt,key:"resizableHandle-"+Ot,onStop:j.resizeHandler("onResizeStop",Ot),onStart:j.resizeHandler("onResizeStart",Ot),onDrag:j.resizeHandler("onResize",Ot)}),j.renderResizeHandle(Ot,Dt))}))}))},X}(g.Component);G.default=f,f.propTypes=M.resizableProps,f.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},808735:function(Ne,G,_){"use strict";var g;g=!0,G.default=void 0;var R=S(_(667294)),w=p(_(45697)),M=p(_(122827)),P=_(100448),L=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function p(z){return z&&z.__esModule?z:{default:z}}function b(z){if(typeof WeakMap!="function")return null;var U=new WeakMap,j=new WeakMap;return(b=function(J){return J?j:U})(z)}function S(z,U){if(!U&&z&&z.__esModule)return z;if(z===null||typeof z!="object"&&typeof z!="function")return{default:z};var j=b(U);if(j&&j.has(z))return j.get(z);var V={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in z)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(z,Q)){var et=J?Object.getOwnPropertyDescriptor(z,Q):null;et&&(et.get||et.set)?Object.defineProperty(V,Q,et):V[Q]=z[Q]}return V.default=z,j&&j.set(z,V),V}function x(){return x=Object.assign?Object.assign.bind():function(z){for(var U=1;U<arguments.length;U++){var j=arguments[U];for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&(z[V]=j[V])}return z},x.apply(this,arguments)}function y(z,U){var j=Object.keys(z);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(z);U&&(V=V.filter(function(J){return Object.getOwnPropertyDescriptor(z,J).enumerable})),j.push.apply(j,V)}return j}function A(z){for(var U=1;U<arguments.length;U++){var j=arguments[U]!=null?arguments[U]:{};U%2?y(Object(j),!0).forEach(function(V){E(z,V,j[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(j)):y(Object(j)).forEach(function(V){Object.defineProperty(z,V,Object.getOwnPropertyDescriptor(j,V))})}return z}function E(z,U,j){return U=D(U),U in z?Object.defineProperty(z,U,{value:j,enumerable:!0,configurable:!0,writable:!0}):z[U]=j,z}function D(z){var U=B(z,"string");return typeof U=="symbol"?U:String(U)}function B(z,U){if(typeof z!="object"||z===null)return z;var j=z[Symbol.toPrimitive];if(j!==void 0){var V=j.call(z,U||"default");if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(z)}function m(z,U){if(z==null)return{};var j={},V=Object.keys(z),J,Q;for(Q=0;Q<V.length;Q++)J=V[Q],!(U.indexOf(J)>=0)&&(j[J]=z[J]);return j}function f(z,U){z.prototype=Object.create(U.prototype),z.prototype.constructor=z,W(z,U)}function W(z,U){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,J){return V.__proto__=J,V},W(z,U)}var X=function(z){f(U,z);function U(){for(var V,J=arguments.length,Q=new Array(J),et=0;et<J;et++)Q[et]=arguments[et];return V=z.call.apply(z,[this].concat(Q))||this,V.state={width:V.props.width,height:V.props.height,propsWidth:V.props.width,propsHeight:V.props.height},V.onResize=function(ut,it){var yt=it.size;V.props.onResize?(ut.persist==null||ut.persist(),V.setState(yt,function(){return V.props.onResize&&V.props.onResize(ut,it)})):V.setState(yt)},V}U.getDerivedStateFromProps=function(J,Q){return Q.propsWidth!==J.width||Q.propsHeight!==J.height?{width:J.width,height:J.height,propsWidth:J.width,propsHeight:J.height}:null};var j=U.prototype;return j.render=function(){var J=this.props,Q=J.handle,et=J.handleSize,ut=J.onResize,it=J.onResizeStart,yt=J.onResizeStop,ft=J.draggableOpts,Bt=J.minConstraints,St=J.maxConstraints,Et=J.lockAspectRatio,Z=J.axis,q=J.width,bt=J.height,Ct=J.resizeHandles,nt=J.style,ht=J.transformScale,At=m(J,L);return R.createElement(M.default,{axis:Z,draggableOpts:ft,handle:Q,handleSize:et,height:this.state.height,lockAspectRatio:Et,maxConstraints:St,minConstraints:Bt,onResizeStart:it,onResize:this.onResize,onResizeStop:yt,resizeHandles:Ct,transformScale:ht,width:this.state.width},R.createElement("div",x({},At,{style:A(A({},nt),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},U}(R.Component);G.default=X,X.propTypes=A(A({},P.resizableProps),{},{children:w.default.element})},100448:function(Ne,G,_){"use strict";G.__esModule=!0,G.resizableProps=void 0;var g=w(_(45697)),R=_(861193);function w(P){return P&&P.__esModule?P:{default:P}}var M={axis:g.default.oneOf(["both","x","y","none"]),className:g.default.string,children:g.default.element.isRequired,draggableOpts:g.default.shape({allowAnyClick:g.default.bool,cancel:g.default.string,children:g.default.node,disabled:g.default.bool,enableUserSelectHack:g.default.bool,offsetParent:g.default.node,grid:g.default.arrayOf(g.default.number),handle:g.default.string,nodeRef:g.default.object,onStart:g.default.func,onDrag:g.default.func,onStop:g.default.func,onMouseDown:g.default.func,scale:g.default.number}),height:function(){for(var L=arguments.length,p=new Array(L),b=0;b<L;b++)p[b]=arguments[b];var S=p[0];if(S.axis==="both"||S.axis==="y"){var x;return(x=g.default.number).isRequired.apply(x,p)}return g.default.number.apply(g.default,p)},handle:g.default.oneOfType([g.default.node,g.default.func]),handleSize:g.default.arrayOf(g.default.number),lockAspectRatio:g.default.bool,maxConstraints:g.default.arrayOf(g.default.number),minConstraints:g.default.arrayOf(g.default.number),onResizeStop:g.default.func,onResizeStart:g.default.func,onResize:g.default.func,resizeHandles:g.default.arrayOf(g.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:g.default.number,width:function(){for(var L=arguments.length,p=new Array(L),b=0;b<L;b++)p[b]=arguments[b];var S=p[0];if(S.axis==="both"||S.axis==="x"){var x;return(x=g.default.number).isRequired.apply(x,p)}return g.default.number.apply(g.default,p)}};G.resizableProps=M},459069:function(Ne,G,_){"use strict";G.__esModule=!0,G.cloneElement=b;var g=R(_(667294));function R(S){return S&&S.__esModule?S:{default:S}}function w(S,x){var y=Object.keys(S);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(S);x&&(A=A.filter(function(E){return Object.getOwnPropertyDescriptor(S,E).enumerable})),y.push.apply(y,A)}return y}function M(S){for(var x=1;x<arguments.length;x++){var y=arguments[x]!=null?arguments[x]:{};x%2?w(Object(y),!0).forEach(function(A){P(S,A,y[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(y)):w(Object(y)).forEach(function(A){Object.defineProperty(S,A,Object.getOwnPropertyDescriptor(y,A))})}return S}function P(S,x,y){return x=L(x),x in S?Object.defineProperty(S,x,{value:y,enumerable:!0,configurable:!0,writable:!0}):S[x]=y,S}function L(S){var x=p(S,"string");return typeof x=="symbol"?x:String(x)}function p(S,x){if(typeof S!="object"||S===null)return S;var y=S[Symbol.toPrimitive];if(y!==void 0){var A=y.call(S,x||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(S)}function b(S,x){return x.style&&S.props.style&&(x.style=M(M({},S.props.style),x.style)),x.className&&S.props.className&&(x.className=S.props.className+" "+x.className),g.default.cloneElement(S,x)}},101706:function(Ne,G,_){"use strict";Ne.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},Ne.exports.Resizable=_(122827).default,Ne.exports.ResizableBox=_(808735).default},491907:function(Ne,G,_){"use strict";_.d(G,{cd:function(){return St}});var g=_(487462),R=_(497326),w=_(589611);function M(ge,Kt){ge.prototype=Object.create(Kt.prototype),ge.prototype.constructor=ge,(0,w.Z)(ge,Kt)}var P=function(Kt,xe){return Kt===xe};function L(ge,Kt){Kt===void 0&&(Kt=P);var xe,Tt=[],Ae,br=!1,Sr=function(on,Hr){return Kt(on,Tt[Hr])},Mr=function(){for(var on=arguments.length,Hr=new Array(on),Sn=0;Sn<on;Sn++)Hr[Sn]=arguments[Sn];return br&&xe===this&&Hr.length===Tt.length&&Hr.every(Sr)||(Ae=ge.apply(this,Hr),br=!0,xe=this,Tt=Hr),Ae};return Mr}var p=L,b=_(667294),S=typeof performance=="object"&&typeof performance.now=="function",x=S?function(){return performance.now()}:function(){return Date.now()};function y(ge){cancelAnimationFrame(ge.id)}function A(ge,Kt){var xe=x();function Tt(){x()-xe>=Kt?ge.call(null):Ae.id=requestAnimationFrame(Tt)}var Ae={id:requestAnimationFrame(Tt)};return Ae}var E=-1;function D(ge){if(ge===void 0&&(ge=!1),E===-1||ge){var Kt=document.createElement("div"),xe=Kt.style;xe.width="50px",xe.height="50px",xe.overflow="scroll",document.body.appendChild(Kt),E=Kt.offsetWidth-Kt.clientWidth,document.body.removeChild(Kt)}return E}var B=null;function m(ge){if(ge===void 0&&(ge=!1),B===null||ge){var Kt=document.createElement("div"),xe=Kt.style;xe.width="50px",xe.height="50px",xe.overflow="scroll",xe.direction="rtl";var Tt=document.createElement("div"),Ae=Tt.style;return Ae.width="100px",Ae.height="100px",Kt.appendChild(Tt),document.body.appendChild(Kt),Kt.scrollLeft>0?B="positive-descending":(Kt.scrollLeft=1,Kt.scrollLeft===0?B="negative":B="positive-ascending"),document.body.removeChild(Kt),B}return B}var f=150,W=function(Kt){var xe=Kt.columnIndex,Tt=Kt.data,Ae=Kt.rowIndex;return Ae+":"+xe},X=null,z=null,U=null;function j(ge){var Kt,xe=ge.getColumnOffset,Tt=ge.getColumnStartIndexForOffset,Ae=ge.getColumnStopIndexForStartIndex,br=ge.getColumnWidth,Sr=ge.getEstimatedTotalHeight,Mr=ge.getEstimatedTotalWidth,Pr=ge.getOffsetForColumnAndAlignment,on=ge.getOffsetForRowAndAlignment,Hr=ge.getRowHeight,Sn=ge.getRowOffset,In=ge.getRowStartIndexForOffset,Nn=ge.getRowStopIndexForStartIndex,vr=ge.initInstanceProps,Ze=ge.shouldResetStyleCacheOnItemSizeChange,Er=ge.validateProps;return Kt=function(ke){M(Xe,ke);function Xe(rn){var ir;return ir=ke.call(this,rn)||this,ir._instanceProps=vr(ir.props,(0,R.Z)(ir)),ir._resetIsScrollingTimeoutId=null,ir._outerRef=void 0,ir.state={instance:(0,R.Z)(ir),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof ir.props.initialScrollLeft=="number"?ir.props.initialScrollLeft:0,scrollTop:typeof ir.props.initialScrollTop=="number"?ir.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},ir._callOnItemsRendered=void 0,ir._callOnItemsRendered=p(function(Lr,dn,Zr,wn,ln,bn,Pn,at){return ir.props.onItemsRendered({overscanColumnStartIndex:Lr,overscanColumnStopIndex:dn,overscanRowStartIndex:Zr,overscanRowStopIndex:wn,visibleColumnStartIndex:ln,visibleColumnStopIndex:bn,visibleRowStartIndex:Pn,visibleRowStopIndex:at})}),ir._callOnScroll=void 0,ir._callOnScroll=p(function(Lr,dn,Zr,wn,ln){return ir.props.onScroll({horizontalScrollDirection:Zr,scrollLeft:Lr,scrollTop:dn,verticalScrollDirection:wn,scrollUpdateWasRequested:ln})}),ir._getItemStyle=void 0,ir._getItemStyle=function(Lr,dn){var Zr=ir.props,wn=Zr.columnWidth,ln=Zr.direction,bn=Zr.rowHeight,Pn=ir._getItemStyleCache(Ze&&wn,Ze&&ln,Ze&&bn),at=Lr+":"+dn,je;if(Pn.hasOwnProperty(at))je=Pn[at];else{var Zt=xe(ir.props,dn,ir._instanceProps),$t=ln==="rtl";Pn[at]=je={position:"absolute",left:$t?void 0:Zt,right:$t?Zt:void 0,top:Sn(ir.props,Lr,ir._instanceProps),height:Hr(ir.props,Lr,ir._instanceProps),width:br(ir.props,dn,ir._instanceProps)}}return je},ir._getItemStyleCache=void 0,ir._getItemStyleCache=p(function(Lr,dn,Zr){return{}}),ir._onScroll=function(Lr){var dn=Lr.currentTarget,Zr=dn.clientHeight,wn=dn.clientWidth,ln=dn.scrollLeft,bn=dn.scrollTop,Pn=dn.scrollHeight,at=dn.scrollWidth;ir.setState(function(je){if(je.scrollLeft===ln&&je.scrollTop===bn)return null;var Zt=ir.props.direction,$t=ln;if(Zt==="rtl")switch(m()){case"negative":$t=-ln;break;case"positive-descending":$t=at-wn-ln;break}$t=Math.max(0,Math.min($t,at-wn));var Mt=Math.max(0,Math.min(bn,Pn-Zr));return{isScrolling:!0,horizontalScrollDirection:je.scrollLeft<ln?"forward":"backward",scrollLeft:$t,scrollTop:Mt,verticalScrollDirection:je.scrollTop<bn?"forward":"backward",scrollUpdateWasRequested:!1}},ir._resetIsScrollingDebounced)},ir._outerRefSetter=function(Lr){var dn=ir.props.outerRef;ir._outerRef=Lr,typeof dn=="function"?dn(Lr):dn!=null&&typeof dn=="object"&&dn.hasOwnProperty("current")&&(dn.current=Lr)},ir._resetIsScrollingDebounced=function(){ir._resetIsScrollingTimeoutId!==null&&y(ir._resetIsScrollingTimeoutId),ir._resetIsScrollingTimeoutId=A(ir._resetIsScrolling,f)},ir._resetIsScrolling=function(){ir._resetIsScrollingTimeoutId=null,ir.setState({isScrolling:!1},function(){ir._getItemStyleCache(-1)})},ir}Xe.getDerivedStateFromProps=function(ir,Lr){return V(ir,Lr),Er(ir),null};var jr=Xe.prototype;return jr.scrollTo=function(ir){var Lr=ir.scrollLeft,dn=ir.scrollTop;Lr!==void 0&&(Lr=Math.max(0,Lr)),dn!==void 0&&(dn=Math.max(0,dn)),this.setState(function(Zr){return Lr===void 0&&(Lr=Zr.scrollLeft),dn===void 0&&(dn=Zr.scrollTop),Zr.scrollLeft===Lr&&Zr.scrollTop===dn?null:{horizontalScrollDirection:Zr.scrollLeft<Lr?"forward":"backward",scrollLeft:Lr,scrollTop:dn,scrollUpdateWasRequested:!0,verticalScrollDirection:Zr.scrollTop<dn?"forward":"backward"}},this._resetIsScrollingDebounced)},jr.scrollToItem=function(ir){var Lr=ir.align,dn=Lr===void 0?"auto":Lr,Zr=ir.columnIndex,wn=ir.rowIndex,ln=this.props,bn=ln.columnCount,Pn=ln.height,at=ln.rowCount,je=ln.width,Zt=this.state,$t=Zt.scrollLeft,Mt=Zt.scrollTop,be=D();Zr!==void 0&&(Zr=Math.max(0,Math.min(Zr,bn-1))),wn!==void 0&&(wn=Math.max(0,Math.min(wn,at-1)));var Nt=Sr(this.props,this._instanceProps),Ht=Mr(this.props,this._instanceProps),dt=Ht>je?be:0,Gt=Nt>Pn?be:0;this.scrollTo({scrollLeft:Zr!==void 0?Pr(this.props,Zr,dn,$t,this._instanceProps,Gt):$t,scrollTop:wn!==void 0?on(this.props,wn,dn,Mt,this._instanceProps,dt):Mt})},jr.componentDidMount=function(){var ir=this.props,Lr=ir.initialScrollLeft,dn=ir.initialScrollTop;if(this._outerRef!=null){var Zr=this._outerRef;typeof Lr=="number"&&(Zr.scrollLeft=Lr),typeof dn=="number"&&(Zr.scrollTop=dn)}this._callPropsCallbacks()},jr.componentDidUpdate=function(){var ir=this.props.direction,Lr=this.state,dn=Lr.scrollLeft,Zr=Lr.scrollTop,wn=Lr.scrollUpdateWasRequested;if(wn&&this._outerRef!=null){var ln=this._outerRef;if(ir==="rtl")switch(m()){case"negative":ln.scrollLeft=-dn;break;case"positive-ascending":ln.scrollLeft=dn;break;default:var bn=ln.clientWidth,Pn=ln.scrollWidth;ln.scrollLeft=Pn-bn-dn;break}else ln.scrollLeft=Math.max(0,dn);ln.scrollTop=Math.max(0,Zr)}this._callPropsCallbacks()},jr.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&y(this._resetIsScrollingTimeoutId)},jr.render=function(){var ir=this.props,Lr=ir.children,dn=ir.className,Zr=ir.columnCount,wn=ir.direction,ln=ir.height,bn=ir.innerRef,Pn=ir.innerElementType,at=ir.innerTagName,je=ir.itemData,Zt=ir.itemKey,$t=Zt===void 0?W:Zt,Mt=ir.outerElementType,be=ir.outerTagName,Nt=ir.rowCount,Ht=ir.style,dt=ir.useIsScrolling,Gt=ir.width,tt=this.state.isScrolling,ot=this._getHorizontalRangeToRender(),k=ot[0],C=ot[1],I=this._getVerticalRangeToRender(),H=I[0],gt=I[1],zt=[];if(Zr>0&&Nt)for(var Rt=H;Rt<=gt;Rt++)for(var qt=k;qt<=C;qt++)zt.push((0,b.createElement)(Lr,{columnIndex:qt,data:je,isScrolling:dt?tt:void 0,key:$t({columnIndex:qt,data:je,rowIndex:Rt}),rowIndex:Rt,style:this._getItemStyle(Rt,qt)}));var Te=Sr(this.props,this._instanceProps),he=Mr(this.props,this._instanceProps);return(0,b.createElement)(Mt||be||"div",{className:dn,onScroll:this._onScroll,ref:this._outerRefSetter,style:(0,g.Z)({position:"relative",height:ln,width:Gt,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:wn},Ht)},(0,b.createElement)(Pn||at||"div",{children:zt,ref:bn,style:{height:Te,pointerEvents:tt?"none":void 0,width:he}}))},jr._callPropsCallbacks=function(){var ir=this.props,Lr=ir.columnCount,dn=ir.onItemsRendered,Zr=ir.onScroll,wn=ir.rowCount;if(typeof dn=="function"&&Lr>0&&wn>0){var ln=this._getHorizontalRangeToRender(),bn=ln[0],Pn=ln[1],at=ln[2],je=ln[3],Zt=this._getVerticalRangeToRender(),$t=Zt[0],Mt=Zt[1],be=Zt[2],Nt=Zt[3];this._callOnItemsRendered(bn,Pn,$t,Mt,at,je,be,Nt)}if(typeof Zr=="function"){var Ht=this.state,dt=Ht.horizontalScrollDirection,Gt=Ht.scrollLeft,tt=Ht.scrollTop,ot=Ht.scrollUpdateWasRequested,k=Ht.verticalScrollDirection;this._callOnScroll(Gt,tt,dt,k,ot)}},jr._getHorizontalRangeToRender=function(){var ir=this.props,Lr=ir.columnCount,dn=ir.overscanColumnCount,Zr=ir.overscanColumnsCount,wn=ir.overscanCount,ln=ir.rowCount,bn=this.state,Pn=bn.horizontalScrollDirection,at=bn.isScrolling,je=bn.scrollLeft,Zt=dn||Zr||wn||1;if(Lr===0||ln===0)return[0,0,0,0];var $t=Tt(this.props,je,this._instanceProps),Mt=Ae(this.props,$t,je,this._instanceProps),be=!at||Pn==="backward"?Math.max(1,Zt):1,Nt=!at||Pn==="forward"?Math.max(1,Zt):1;return[Math.max(0,$t-be),Math.max(0,Math.min(Lr-1,Mt+Nt)),$t,Mt]},jr._getVerticalRangeToRender=function(){var ir=this.props,Lr=ir.columnCount,dn=ir.overscanCount,Zr=ir.overscanRowCount,wn=ir.overscanRowsCount,ln=ir.rowCount,bn=this.state,Pn=bn.isScrolling,at=bn.verticalScrollDirection,je=bn.scrollTop,Zt=Zr||wn||dn||1;if(Lr===0||ln===0)return[0,0,0,0];var $t=In(this.props,je,this._instanceProps),Mt=Nn(this.props,$t,je,this._instanceProps),be=!Pn||at==="backward"?Math.max(1,Zt):1,Nt=!Pn||at==="forward"?Math.max(1,Zt):1;return[Math.max(0,$t-be),Math.max(0,Math.min(ln-1,Mt+Nt)),$t,Mt]},Xe}(b.PureComponent),Kt.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},Kt}var V=function(Kt,xe){var Tt=Kt.children,Ae=Kt.direction,br=Kt.height,Sr=Kt.innerTagName,Mr=Kt.outerTagName,Pr=Kt.overscanColumnsCount,on=Kt.overscanCount,Hr=Kt.overscanRowsCount,Sn=Kt.width,In=xe.instance},J=50,Q=function(Kt,xe){var Tt=Kt.rowCount,Ae=xe.rowMetadataMap,br=xe.estimatedRowHeight,Sr=xe.lastMeasuredRowIndex,Mr=0;if(Sr>=Tt&&(Sr=Tt-1),Sr>=0){var Pr=Ae[Sr];Mr=Pr.offset+Pr.size}var on=Tt-Sr-1,Hr=on*br;return Mr+Hr},et=function(Kt,xe){var Tt=Kt.columnCount,Ae=xe.columnMetadataMap,br=xe.estimatedColumnWidth,Sr=xe.lastMeasuredColumnIndex,Mr=0;if(Sr>=Tt&&(Sr=Tt-1),Sr>=0){var Pr=Ae[Sr];Mr=Pr.offset+Pr.size}var on=Tt-Sr-1,Hr=on*br;return Mr+Hr},ut=function(Kt,xe,Tt,Ae){var br,Sr,Mr;if(Kt==="column"?(br=Ae.columnMetadataMap,Sr=xe.columnWidth,Mr=Ae.lastMeasuredColumnIndex):(br=Ae.rowMetadataMap,Sr=xe.rowHeight,Mr=Ae.lastMeasuredRowIndex),Tt>Mr){var Pr=0;if(Mr>=0){var on=br[Mr];Pr=on.offset+on.size}for(var Hr=Mr+1;Hr<=Tt;Hr++){var Sn=Sr(Hr);br[Hr]={offset:Pr,size:Sn},Pr+=Sn}Kt==="column"?Ae.lastMeasuredColumnIndex=Tt:Ae.lastMeasuredRowIndex=Tt}return br[Tt]},it=function(Kt,xe,Tt,Ae){var br,Sr;Kt==="column"?(br=Tt.columnMetadataMap,Sr=Tt.lastMeasuredColumnIndex):(br=Tt.rowMetadataMap,Sr=Tt.lastMeasuredRowIndex);var Mr=Sr>0?br[Sr].offset:0;return Mr>=Ae?yt(Kt,xe,Tt,Sr,0,Ae):ft(Kt,xe,Tt,Math.max(0,Sr),Ae)},yt=function(Kt,xe,Tt,Ae,br,Sr){for(;br<=Ae;){var Mr=br+Math.floor((Ae-br)/2),Pr=ut(Kt,xe,Mr,Tt).offset;if(Pr===Sr)return Mr;Pr<Sr?br=Mr+1:Pr>Sr&&(Ae=Mr-1)}return br>0?br-1:0},ft=function(Kt,xe,Tt,Ae,br){for(var Sr=Kt==="column"?xe.columnCount:xe.rowCount,Mr=1;Ae<Sr&&ut(Kt,xe,Ae,Tt).offset<br;)Ae+=Mr,Mr*=2;return yt(Kt,xe,Tt,Math.min(Ae,Sr-1),Math.floor(Ae/2),br)},Bt=function(Kt,xe,Tt,Ae,br,Sr,Mr){var Pr=Kt==="column"?xe.width:xe.height,on=ut(Kt,xe,Tt,Sr),Hr=Kt==="column"?et(xe,Sr):Q(xe,Sr),Sn=Math.max(0,Math.min(Hr-Pr,on.offset)),In=Math.max(0,on.offset-Pr+Mr+on.size);switch(Ae==="smart"&&(br>=In-Pr&&br<=Sn+Pr?Ae="auto":Ae="center"),Ae){case"start":return Sn;case"end":return In;case"center":return Math.round(In+(Sn-In)/2);case"auto":default:return br>=In&&br<=Sn?br:In>Sn||br<In?In:Sn}},St=j({getColumnOffset:function(Kt,xe,Tt){return ut("column",Kt,xe,Tt).offset},getColumnStartIndexForOffset:function(Kt,xe,Tt){return it("column",Kt,Tt,xe)},getColumnStopIndexForStartIndex:function(Kt,xe,Tt,Ae){for(var br=Kt.columnCount,Sr=Kt.width,Mr=ut("column",Kt,xe,Ae),Pr=Tt+Sr,on=Mr.offset+Mr.size,Hr=xe;Hr<br-1&&on<Pr;)Hr++,on+=ut("column",Kt,Hr,Ae).size;return Hr},getColumnWidth:function(Kt,xe,Tt){return Tt.columnMetadataMap[xe].size},getEstimatedTotalHeight:Q,getEstimatedTotalWidth:et,getOffsetForColumnAndAlignment:function(Kt,xe,Tt,Ae,br,Sr){return Bt("column",Kt,xe,Tt,Ae,br,Sr)},getOffsetForRowAndAlignment:function(Kt,xe,Tt,Ae,br,Sr){return Bt("row",Kt,xe,Tt,Ae,br,Sr)},getRowOffset:function(Kt,xe,Tt){return ut("row",Kt,xe,Tt).offset},getRowHeight:function(Kt,xe,Tt){return Tt.rowMetadataMap[xe].size},getRowStartIndexForOffset:function(Kt,xe,Tt){return it("row",Kt,Tt,xe)},getRowStopIndexForStartIndex:function(Kt,xe,Tt,Ae){for(var br=Kt.rowCount,Sr=Kt.height,Mr=ut("row",Kt,xe,Ae),Pr=Tt+Sr,on=Mr.offset+Mr.size,Hr=xe;Hr<br-1&&on<Pr;)Hr++,on+=ut("row",Kt,Hr,Ae).size;return Hr},initInstanceProps:function(Kt,xe){var Tt=Kt,Ae=Tt.estimatedColumnWidth,br=Tt.estimatedRowHeight,Sr={columnMetadataMap:{},estimatedColumnWidth:Ae||J,estimatedRowHeight:br||J,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return xe.resetAfterColumnIndex=function(Mr,Pr){Pr===void 0&&(Pr=!0),xe.resetAfterIndices({columnIndex:Mr,shouldForceUpdate:Pr})},xe.resetAfterRowIndex=function(Mr,Pr){Pr===void 0&&(Pr=!0),xe.resetAfterIndices({rowIndex:Mr,shouldForceUpdate:Pr})},xe.resetAfterIndices=function(Mr){var Pr=Mr.columnIndex,on=Mr.rowIndex,Hr=Mr.shouldForceUpdate,Sn=Hr===void 0?!0:Hr;typeof Pr=="number"&&(Sr.lastMeasuredColumnIndex=Math.min(Sr.lastMeasuredColumnIndex,Pr-1)),typeof on=="number"&&(Sr.lastMeasuredRowIndex=Math.min(Sr.lastMeasuredRowIndex,on-1)),xe._getItemStyleCache(-1),Sn&&xe.forceUpdate()},Sr},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(Kt){var xe=Kt.columnWidth,Tt=Kt.rowHeight}}),Et=150,Z=function(Kt,xe){return Kt},q=null,bt=null;function Ct(ge){var Kt,xe=ge.getItemOffset,Tt=ge.getEstimatedTotalSize,Ae=ge.getItemSize,br=ge.getOffsetForIndexAndAlignment,Sr=ge.getStartIndexForOffset,Mr=ge.getStopIndexForStartIndex,Pr=ge.initInstanceProps,on=ge.shouldResetStyleCacheOnItemSizeChange,Hr=ge.validateProps;return Kt=function(Sn){M(In,Sn);function In(vr){var Ze;return Ze=Sn.call(this,vr)||this,Ze._instanceProps=Pr(Ze.props,(0,R.Z)(Ze)),Ze._outerRef=void 0,Ze._resetIsScrollingTimeoutId=null,Ze.state={instance:(0,R.Z)(Ze),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof Ze.props.initialScrollOffset=="number"?Ze.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},Ze._callOnItemsRendered=void 0,Ze._callOnItemsRendered=p(function(Er,ke,Xe,jr){return Ze.props.onItemsRendered({overscanStartIndex:Er,overscanStopIndex:ke,visibleStartIndex:Xe,visibleStopIndex:jr})}),Ze._callOnScroll=void 0,Ze._callOnScroll=p(function(Er,ke,Xe){return Ze.props.onScroll({scrollDirection:Er,scrollOffset:ke,scrollUpdateWasRequested:Xe})}),Ze._getItemStyle=void 0,Ze._getItemStyle=function(Er){var ke=Ze.props,Xe=ke.direction,jr=ke.itemSize,rn=ke.layout,ir=Ze._getItemStyleCache(on&&jr,on&&rn,on&&Xe),Lr;if(ir.hasOwnProperty(Er))Lr=ir[Er];else{var dn=xe(Ze.props,Er,Ze._instanceProps),Zr=Ae(Ze.props,Er,Ze._instanceProps),wn=Xe==="horizontal"||rn==="horizontal",ln=Xe==="rtl",bn=wn?dn:0;ir[Er]=Lr={position:"absolute",left:ln?void 0:bn,right:ln?bn:void 0,top:wn?0:dn,height:wn?"100%":Zr,width:wn?Zr:"100%"}}return Lr},Ze._getItemStyleCache=void 0,Ze._getItemStyleCache=p(function(Er,ke,Xe){return{}}),Ze._onScrollHorizontal=function(Er){var ke=Er.currentTarget,Xe=ke.clientWidth,jr=ke.scrollLeft,rn=ke.scrollWidth;Ze.setState(function(ir){if(ir.scrollOffset===jr)return null;var Lr=Ze.props.direction,dn=jr;if(Lr==="rtl")switch(m()){case"negative":dn=-jr;break;case"positive-descending":dn=rn-Xe-jr;break}return dn=Math.max(0,Math.min(dn,rn-Xe)),{isScrolling:!0,scrollDirection:ir.scrollOffset<jr?"forward":"backward",scrollOffset:dn,scrollUpdateWasRequested:!1}},Ze._resetIsScrollingDebounced)},Ze._onScrollVertical=function(Er){var ke=Er.currentTarget,Xe=ke.clientHeight,jr=ke.scrollHeight,rn=ke.scrollTop;Ze.setState(function(ir){if(ir.scrollOffset===rn)return null;var Lr=Math.max(0,Math.min(rn,jr-Xe));return{isScrolling:!0,scrollDirection:ir.scrollOffset<Lr?"forward":"backward",scrollOffset:Lr,scrollUpdateWasRequested:!1}},Ze._resetIsScrollingDebounced)},Ze._outerRefSetter=function(Er){var ke=Ze.props.outerRef;Ze._outerRef=Er,typeof ke=="function"?ke(Er):ke!=null&&typeof ke=="object"&&ke.hasOwnProperty("current")&&(ke.current=Er)},Ze._resetIsScrollingDebounced=function(){Ze._resetIsScrollingTimeoutId!==null&&y(Ze._resetIsScrollingTimeoutId),Ze._resetIsScrollingTimeoutId=A(Ze._resetIsScrolling,Et)},Ze._resetIsScrolling=function(){Ze._resetIsScrollingTimeoutId=null,Ze.setState({isScrolling:!1},function(){Ze._getItemStyleCache(-1,null)})},Ze}In.getDerivedStateFromProps=function(Ze,Er){return nt(Ze,Er),Hr(Ze),null};var Nn=In.prototype;return Nn.scrollTo=function(Ze){Ze=Math.max(0,Ze),this.setState(function(Er){return Er.scrollOffset===Ze?null:{scrollDirection:Er.scrollOffset<Ze?"forward":"backward",scrollOffset:Ze,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},Nn.scrollToItem=function(Ze,Er){Er===void 0&&(Er="auto");var ke=this.props,Xe=ke.itemCount,jr=ke.layout,rn=this.state.scrollOffset;Ze=Math.max(0,Math.min(Ze,Xe-1));var ir=0;if(this._outerRef){var Lr=this._outerRef;jr==="vertical"?ir=Lr.scrollWidth>Lr.clientWidth?D():0:ir=Lr.scrollHeight>Lr.clientHeight?D():0}this.scrollTo(br(this.props,Ze,Er,rn,this._instanceProps,ir))},Nn.componentDidMount=function(){var Ze=this.props,Er=Ze.direction,ke=Ze.initialScrollOffset,Xe=Ze.layout;if(typeof ke=="number"&&this._outerRef!=null){var jr=this._outerRef;Er==="horizontal"||Xe==="horizontal"?jr.scrollLeft=ke:jr.scrollTop=ke}this._callPropsCallbacks()},Nn.componentDidUpdate=function(){var Ze=this.props,Er=Ze.direction,ke=Ze.layout,Xe=this.state,jr=Xe.scrollOffset,rn=Xe.scrollUpdateWasRequested;if(rn&&this._outerRef!=null){var ir=this._outerRef;if(Er==="horizontal"||ke==="horizontal")if(Er==="rtl")switch(m()){case"negative":ir.scrollLeft=-jr;break;case"positive-ascending":ir.scrollLeft=jr;break;default:var Lr=ir.clientWidth,dn=ir.scrollWidth;ir.scrollLeft=dn-Lr-jr;break}else ir.scrollLeft=jr;else ir.scrollTop=jr}this._callPropsCallbacks()},Nn.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&y(this._resetIsScrollingTimeoutId)},Nn.render=function(){var Ze=this.props,Er=Ze.children,ke=Ze.className,Xe=Ze.direction,jr=Ze.height,rn=Ze.innerRef,ir=Ze.innerElementType,Lr=Ze.innerTagName,dn=Ze.itemCount,Zr=Ze.itemData,wn=Ze.itemKey,ln=wn===void 0?Z:wn,bn=Ze.layout,Pn=Ze.outerElementType,at=Ze.outerTagName,je=Ze.style,Zt=Ze.useIsScrolling,$t=Ze.width,Mt=this.state.isScrolling,be=Xe==="horizontal"||bn==="horizontal",Nt=be?this._onScrollHorizontal:this._onScrollVertical,Ht=this._getRangeToRender(),dt=Ht[0],Gt=Ht[1],tt=[];if(dn>0)for(var ot=dt;ot<=Gt;ot++)tt.push((0,b.createElement)(Er,{data:Zr,key:ln(ot,Zr),index:ot,isScrolling:Zt?Mt:void 0,style:this._getItemStyle(ot)}));var k=Tt(this.props,this._instanceProps);return(0,b.createElement)(Pn||at||"div",{className:ke,onScroll:Nt,ref:this._outerRefSetter,style:(0,g.Z)({position:"relative",height:jr,width:$t,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:Xe},je)},(0,b.createElement)(ir||Lr||"div",{children:tt,ref:rn,style:{height:be?"100%":k,pointerEvents:Mt?"none":void 0,width:be?k:"100%"}}))},Nn._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var Ze=this.props.itemCount;if(Ze>0){var Er=this._getRangeToRender(),ke=Er[0],Xe=Er[1],jr=Er[2],rn=Er[3];this._callOnItemsRendered(ke,Xe,jr,rn)}}if(typeof this.props.onScroll=="function"){var ir=this.state,Lr=ir.scrollDirection,dn=ir.scrollOffset,Zr=ir.scrollUpdateWasRequested;this._callOnScroll(Lr,dn,Zr)}},Nn._getRangeToRender=function(){var Ze=this.props,Er=Ze.itemCount,ke=Ze.overscanCount,Xe=this.state,jr=Xe.isScrolling,rn=Xe.scrollDirection,ir=Xe.scrollOffset;if(Er===0)return[0,0,0,0];var Lr=Sr(this.props,ir,this._instanceProps),dn=Mr(this.props,Lr,ir,this._instanceProps),Zr=!jr||rn==="backward"?Math.max(1,ke):1,wn=!jr||rn==="forward"?Math.max(1,ke):1;return[Math.max(0,Lr-Zr),Math.max(0,Math.min(Er-1,dn+wn)),Lr,dn]},In}(b.PureComponent),Kt.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},Kt}var nt=function(Kt,xe){var Tt=Kt.children,Ae=Kt.direction,br=Kt.height,Sr=Kt.layout,Mr=Kt.innerTagName,Pr=Kt.outerTagName,on=Kt.width,Hr=xe.instance;if(!1)var Sn},ht=50,At=function(Kt,xe,Tt){var Ae=Kt,br=Ae.itemSize,Sr=Tt.itemMetadataMap,Mr=Tt.lastMeasuredIndex;if(xe>Mr){var Pr=0;if(Mr>=0){var on=Sr[Mr];Pr=on.offset+on.size}for(var Hr=Mr+1;Hr<=xe;Hr++){var Sn=br(Hr);Sr[Hr]={offset:Pr,size:Sn},Pr+=Sn}Tt.lastMeasuredIndex=xe}return Sr[xe]},Ot=function(Kt,xe,Tt){var Ae=xe.itemMetadataMap,br=xe.lastMeasuredIndex,Sr=br>0?Ae[br].offset:0;return Sr>=Tt?xt(Kt,xe,br,0,Tt):Dt(Kt,xe,Math.max(0,br),Tt)},xt=function(Kt,xe,Tt,Ae,br){for(;Ae<=Tt;){var Sr=Ae+Math.floor((Tt-Ae)/2),Mr=At(Kt,Sr,xe).offset;if(Mr===br)return Sr;Mr<br?Ae=Sr+1:Mr>br&&(Tt=Sr-1)}return Ae>0?Ae-1:0},Dt=function(Kt,xe,Tt,Ae){for(var br=Kt.itemCount,Sr=1;Tt<br&&At(Kt,Tt,xe).offset<Ae;)Tt+=Sr,Sr*=2;return xt(Kt,xe,Math.min(Tt,br-1),Math.floor(Tt/2),Ae)},Yt=function(Kt,xe){var Tt=Kt.itemCount,Ae=xe.itemMetadataMap,br=xe.estimatedItemSize,Sr=xe.lastMeasuredIndex,Mr=0;if(Sr>=Tt&&(Sr=Tt-1),Sr>=0){var Pr=Ae[Sr];Mr=Pr.offset+Pr.size}var on=Tt-Sr-1,Hr=on*br;return Mr+Hr},ie=Ct({getItemOffset:function(Kt,xe,Tt){return At(Kt,xe,Tt).offset},getItemSize:function(Kt,xe,Tt){return Tt.itemMetadataMap[xe].size},getEstimatedTotalSize:Yt,getOffsetForIndexAndAlignment:function(Kt,xe,Tt,Ae,br,Sr){var Mr=Kt.direction,Pr=Kt.height,on=Kt.layout,Hr=Kt.width,Sn=Mr==="horizontal"||on==="horizontal",In=Sn?Hr:Pr,Nn=At(Kt,xe,br),vr=Yt(Kt,br),Ze=Math.max(0,Math.min(vr-In,Nn.offset)),Er=Math.max(0,Nn.offset-In+Nn.size+Sr);switch(Tt==="smart"&&(Ae>=Er-In&&Ae<=Ze+In?Tt="auto":Tt="center"),Tt){case"start":return Ze;case"end":return Er;case"center":return Math.round(Er+(Ze-Er)/2);case"auto":default:return Ae>=Er&&Ae<=Ze?Ae:Ae<Er?Er:Ze}},getStartIndexForOffset:function(Kt,xe,Tt){return Ot(Kt,Tt,xe)},getStopIndexForStartIndex:function(Kt,xe,Tt,Ae){for(var br=Kt.direction,Sr=Kt.height,Mr=Kt.itemCount,Pr=Kt.layout,on=Kt.width,Hr=br==="horizontal"||Pr==="horizontal",Sn=Hr?on:Sr,In=At(Kt,xe,Ae),Nn=Tt+Sn,vr=In.offset+In.size,Ze=xe;Ze<Mr-1&&vr<Nn;)Ze++,vr+=At(Kt,Ze,Ae).size;return Ze},initInstanceProps:function(Kt,xe){var Tt=Kt,Ae=Tt.estimatedItemSize,br={itemMetadataMap:{},estimatedItemSize:Ae||ht,lastMeasuredIndex:-1};return xe.resetAfterIndex=function(Sr,Mr){Mr===void 0&&(Mr=!0),br.lastMeasuredIndex=Math.min(br.lastMeasuredIndex,Sr-1),xe._getItemStyleCache(-1),Mr&&xe.forceUpdate()},br},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(Kt){var xe=Kt.itemSize}}),re=j({getColumnOffset:function(Kt,xe){var Tt=Kt.columnWidth;return xe*Tt},getColumnWidth:function(Kt,xe){var Tt=Kt.columnWidth;return Tt},getRowOffset:function(Kt,xe){var Tt=Kt.rowHeight;return xe*Tt},getRowHeight:function(Kt,xe){var Tt=Kt.rowHeight;return Tt},getEstimatedTotalHeight:function(Kt){var xe=Kt.rowCount,Tt=Kt.rowHeight;return Tt*xe},getEstimatedTotalWidth:function(Kt){var xe=Kt.columnCount,Tt=Kt.columnWidth;return Tt*xe},getOffsetForColumnAndAlignment:function(Kt,xe,Tt,Ae,br,Sr){var Mr=Kt.columnCount,Pr=Kt.columnWidth,on=Kt.width,Hr=Math.max(0,Mr*Pr-on),Sn=Math.min(Hr,xe*Pr),In=Math.max(0,xe*Pr-on+Sr+Pr);switch(Tt==="smart"&&(Ae>=In-on&&Ae<=Sn+on?Tt="auto":Tt="center"),Tt){case"start":return Sn;case"end":return In;case"center":var Nn=Math.round(In+(Sn-In)/2);return Nn<Math.ceil(on/2)?0:Nn>Hr+Math.floor(on/2)?Hr:Nn;case"auto":default:return Ae>=In&&Ae<=Sn?Ae:In>Sn||Ae<In?In:Sn}},getOffsetForRowAndAlignment:function(Kt,xe,Tt,Ae,br,Sr){var Mr=Kt.rowHeight,Pr=Kt.height,on=Kt.rowCount,Hr=Math.max(0,on*Mr-Pr),Sn=Math.min(Hr,xe*Mr),In=Math.max(0,xe*Mr-Pr+Sr+Mr);switch(Tt==="smart"&&(Ae>=In-Pr&&Ae<=Sn+Pr?Tt="auto":Tt="center"),Tt){case"start":return Sn;case"end":return In;case"center":var Nn=Math.round(In+(Sn-In)/2);return Nn<Math.ceil(Pr/2)?0:Nn>Hr+Math.floor(Pr/2)?Hr:Nn;case"auto":default:return Ae>=In&&Ae<=Sn?Ae:In>Sn||Ae<In?In:Sn}},getColumnStartIndexForOffset:function(Kt,xe){var Tt=Kt.columnWidth,Ae=Kt.columnCount;return Math.max(0,Math.min(Ae-1,Math.floor(xe/Tt)))},getColumnStopIndexForStartIndex:function(Kt,xe,Tt){var Ae=Kt.columnWidth,br=Kt.columnCount,Sr=Kt.width,Mr=xe*Ae,Pr=Math.ceil((Sr+Tt-Mr)/Ae);return Math.max(0,Math.min(br-1,xe+Pr-1))},getRowStartIndexForOffset:function(Kt,xe){var Tt=Kt.rowHeight,Ae=Kt.rowCount;return Math.max(0,Math.min(Ae-1,Math.floor(xe/Tt)))},getRowStopIndexForStartIndex:function(Kt,xe,Tt){var Ae=Kt.rowHeight,br=Kt.rowCount,Sr=Kt.height,Mr=xe*Ae,Pr=Math.ceil((Sr+Tt-Mr)/Ae);return Math.max(0,Math.min(br-1,xe+Pr-1))},initInstanceProps:function(Kt){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(Kt){var xe=Kt.columnWidth,Tt=Kt.rowHeight}}),Pt=Ct({getItemOffset:function(Kt,xe){var Tt=Kt.itemSize;return xe*Tt},getItemSize:function(Kt,xe){var Tt=Kt.itemSize;return Tt},getEstimatedTotalSize:function(Kt){var xe=Kt.itemCount,Tt=Kt.itemSize;return Tt*xe},getOffsetForIndexAndAlignment:function(Kt,xe,Tt,Ae,br,Sr){var Mr=Kt.direction,Pr=Kt.height,on=Kt.itemCount,Hr=Kt.itemSize,Sn=Kt.layout,In=Kt.width,Nn=Mr==="horizontal"||Sn==="horizontal",vr=Nn?In:Pr,Ze=Math.max(0,on*Hr-vr),Er=Math.min(Ze,xe*Hr),ke=Math.max(0,xe*Hr-vr+Hr+Sr);switch(Tt==="smart"&&(Ae>=ke-vr&&Ae<=Er+vr?Tt="auto":Tt="center"),Tt){case"start":return Er;case"end":return ke;case"center":{var Xe=Math.round(ke+(Er-ke)/2);return Xe<Math.ceil(vr/2)?0:Xe>Ze+Math.floor(vr/2)?Ze:Xe}case"auto":default:return Ae>=ke&&Ae<=Er?Ae:Ae<ke?ke:Er}},getStartIndexForOffset:function(Kt,xe){var Tt=Kt.itemCount,Ae=Kt.itemSize;return Math.max(0,Math.min(Tt-1,Math.floor(xe/Ae)))},getStopIndexForStartIndex:function(Kt,xe,Tt){var Ae=Kt.direction,br=Kt.height,Sr=Kt.itemCount,Mr=Kt.itemSize,Pr=Kt.layout,on=Kt.width,Hr=Ae==="horizontal"||Pr==="horizontal",Sn=xe*Mr,In=Hr?on:br,Nn=Math.ceil((In+Tt-Sn)/Mr);return Math.max(0,Math.min(Sr-1,xe+Nn-1))},initInstanceProps:function(Kt){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(Kt){var xe=Kt.itemSize}});function ee(ge,Kt){for(var xe in ge)if(!(xe in Kt))return!0;for(var Tt in Kt)if(ge[Tt]!==Kt[Tt])return!0;return!1}var ce=null,Ut=null;function te(ge,Kt){var xe=ge.style,Tt=_objectWithoutPropertiesLoose(ge,ce),Ae=Kt.style,br=_objectWithoutPropertiesLoose(Kt,Ut);return!ee(xe,Ae)&&!ee(Tt,br)}function ye(ge,Kt){return!te(this.props,ge)||ee(this.state,Kt)}},481550:function(Ne){(function(G,_){Ne.exports=_()})(this,function(){"use strict";var G=function(Lt){return Lt instanceof Uint8Array||Lt instanceof Uint16Array||Lt instanceof Uint32Array||Lt instanceof Int8Array||Lt instanceof Int16Array||Lt instanceof Int32Array||Lt instanceof Float32Array||Lt instanceof Float64Array||Lt instanceof Uint8ClampedArray},_=function(Lt,Se){for(var We=Object.keys(Se),Rr=0;Rr<We.length;++Rr)Lt[We[Rr]]=Se[We[Rr]];return Lt},g=`
`;function R(Lt){return typeof atob!="undefined"?atob(Lt):"base64:"+Lt}function w(Lt){var Se=new Error("(regl) "+Lt);throw console.error(Se),Se}function M(Lt,Se){Lt||w(Se)}function P(Lt){return Lt?": "+Lt:""}function L(Lt,Se,We){Lt in Se||w("unknown parameter ("+Lt+")"+P(We)+". possible values: "+Object.keys(Se).join())}function p(Lt,Se){G(Lt)||w("invalid parameter type"+P(Se)+". must be a typed array")}function b(Lt,Se){switch(Se){case"number":return typeof Lt=="number";case"object":return typeof Lt=="object";case"string":return typeof Lt=="string";case"boolean":return typeof Lt=="boolean";case"function":return typeof Lt=="function";case"undefined":return typeof Lt=="undefined";case"symbol":return typeof Lt=="symbol"}}function S(Lt,Se,We){b(Lt,Se)||w("invalid parameter type"+P(We)+". expected "+Se+", got "+typeof Lt)}function x(Lt,Se){Lt>=0&&(Lt|0)===Lt||w("invalid parameter type, ("+Lt+")"+P(Se)+". must be a nonnegative integer")}function y(Lt,Se,We){Se.indexOf(Lt)<0&&w("invalid value"+P(We)+". must be one of: "+Se)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(Lt){Object.keys(Lt).forEach(function(Se){A.indexOf(Se)<0&&w('invalid regl constructor argument "'+Se+'". must be one of '+A)})}function D(Lt,Se){for(Lt=Lt+"";Lt.length<Se;)Lt=" "+Lt;return Lt}function B(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function m(Lt,Se){this.number=Lt,this.line=Se,this.errors=[]}function f(Lt,Se,We){this.file=Lt,this.line=Se,this.message=We}function W(){var Lt=new Error,Se=(Lt.stack||Lt).toString(),We=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Se);if(We)return We[1];var Rr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Se);return Rr?Rr[1]:"unknown"}function X(){var Lt=new Error,Se=(Lt.stack||Lt).toString(),We=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Se);if(We)return We[1];var Rr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Se);return Rr?Rr[1]:"unknown"}function z(Lt,Se){var We=Lt.split(`
`),Rr=1,qr=0,Nr={unknown:new B,0:new B};Nr.unknown.name=Nr[0].name=Se||W(),Nr.unknown.lines.push(new m(0,""));for(var zr=0;zr<We.length;++zr){var hn=We[zr],gn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(hn);if(gn)switch(gn[1]){case"line":var xn=/(\d+)(\s+\d+)?/.exec(gn[2]);xn&&(Rr=xn[1]|0,xn[2]&&(qr=xn[2]|0,qr in Nr||(Nr[qr]=new B)));break;case"define":var mn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(gn[2]);mn&&(Nr[qr].name=mn[1]?R(mn[2]):mn[2]);break}Nr[qr].lines.push(new m(Rr++,hn))}return Object.keys(Nr).forEach(function(_n){var v=Nr[_n];v.lines.forEach(function(N){v.index[N.number]=N})}),Nr}function U(Lt){var Se=[];return Lt.split(`
`).forEach(function(We){if(!(We.length<5)){var Rr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(We);Rr?Se.push(new f(Rr[1]|0,Rr[2]|0,Rr[3].trim())):We.length>0&&Se.push(new f("unknown",0,We))}}),Se}function j(Lt,Se){Se.forEach(function(We){var Rr=Lt[We.file];if(Rr){var qr=Rr.index[We.line];if(qr){qr.errors.push(We),Rr.hasErrors=!0;return}}Lt.unknown.hasErrors=!0,Lt.unknown.lines[0].errors.push(We)})}function V(Lt,Se,We,Rr,qr){if(!Lt.getShaderParameter(Se,Lt.COMPILE_STATUS)){var Nr=Lt.getShaderInfoLog(Se),zr=Rr===Lt.FRAGMENT_SHADER?"fragment":"vertex";ft(We,"string",zr+" shader source must be a string",qr);var hn=z(We,qr),gn=U(Nr);j(hn,gn),Object.keys(hn).forEach(function(xn){var mn=hn[xn];if(!mn.hasErrors)return;var _n=[""],v=[""];function N($,st){_n.push($),v.push(st||"")}N("file number "+xn+": "+mn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),mn.lines.forEach(function($){if($.errors.length>0){N(D($.number,4)+"|  ","background-color:yellow; font-weight:bold"),N($.line+g,"color:red; background-color:yellow; font-weight:bold");var st=0;$.errors.forEach(function(vt){var mt=vt.message,It=/^\s*'(.*)'\s*:\s*(.*)$/.exec(mt);if(It){var kt=It[1];switch(mt=It[2],kt){case"assign":kt="=";break}st=Math.max($.line.indexOf(kt,st),0)}else st=0;N(D("| ",6)),N(D("^^^",st+3)+g,"font-weight:bold"),N(D("| ",6)),N(mt+g,"font-weight:bold")}),N(D("| ",6)+g)}else N(D($.number,4)+"|  "),N($.line+g,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=_n.join("%c"),console.log.apply(console,v)):console.log(_n.join(""))}),M.raise("Error compiling "+zr+" shader, "+hn[0].name)}}function J(Lt,Se,We,Rr,qr){if(!Lt.getProgramParameter(Se,Lt.LINK_STATUS)){var Nr=Lt.getProgramInfoLog(Se),zr=z(We,qr),hn=z(Rr,qr),gn='Error linking program with vertex shader, "'+hn[0].name+'", and fragment shader "'+zr[0].name+'"';typeof document!="undefined"?console.log("%c"+gn+g+"%c"+Nr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(gn+g+Nr),M.raise(gn)}}function Q(Lt){Lt._commandRef=W()}function et(Lt,Se,We,Rr){Q(Lt);function qr(gn){return gn?Rr.id(gn):0}Lt._fragId=qr(Lt.static.frag),Lt._vertId=qr(Lt.static.vert);function Nr(gn,xn){Object.keys(xn).forEach(function(mn){gn[Rr.id(mn)]=!0})}var zr=Lt._uniformSet={};Nr(zr,Se.static),Nr(zr,Se.dynamic);var hn=Lt._attributeSet={};Nr(hn,We.static),Nr(hn,We.dynamic),Lt._hasCount="count"in Lt.static||"count"in Lt.dynamic||"elements"in Lt.static||"elements"in Lt.dynamic}function ut(Lt,Se){var We=X();w(Lt+" in command "+(Se||W())+(We==="unknown"?"":" called from "+We))}function it(Lt,Se,We){Lt||ut(Se,We||W())}function yt(Lt,Se,We,Rr){Lt in Se||ut("unknown parameter ("+Lt+")"+P(We)+". possible values: "+Object.keys(Se).join(),Rr||W())}function ft(Lt,Se,We,Rr){b(Lt,Se)||ut("invalid parameter type"+P(We)+". expected "+Se+", got "+typeof Lt,Rr||W())}function Bt(Lt){Lt()}function St(Lt,Se,We){Lt.texture?y(Lt.texture._texture.internalformat,Se,"unsupported texture format for attachment"):y(Lt.renderbuffer._renderbuffer.format,We,"unsupported renderbuffer format for attachment")}var Et=33071,Z=9728,q=9984,bt=9985,Ct=9986,nt=9987,ht=5120,At=5121,Ot=5122,xt=5123,Dt=5124,Yt=5125,ie=5126,re=32819,Pt=32820,ee=33635,ce=34042,Ut=36193,te={};te[ht]=te[At]=1,te[Ot]=te[xt]=te[Ut]=te[ee]=te[re]=te[Pt]=2,te[Dt]=te[Yt]=te[ie]=te[ce]=4;function ye(Lt,Se){return Lt===Pt||Lt===re||Lt===ee?2:Lt===ce?4:te[Lt]*Se}function ge(Lt){return!(Lt&Lt-1)&&!!Lt}function Kt(Lt,Se,We){var Rr,qr=Se.width,Nr=Se.height,zr=Se.channels;M(qr>0&&qr<=We.maxTextureSize&&Nr>0&&Nr<=We.maxTextureSize,"invalid texture shape"),(Lt.wrapS!==Et||Lt.wrapT!==Et)&&M(ge(qr)&&ge(Nr),"incompatible wrap mode for texture, both width and height must be power of 2"),Se.mipmask===1?qr!==1&&Nr!==1&&M(Lt.minFilter!==q&&Lt.minFilter!==Ct&&Lt.minFilter!==bt&&Lt.minFilter!==nt,"min filter requires mipmap"):(M(ge(qr)&&ge(Nr),"texture must be a square power of 2 to support mipmapping"),M(Se.mipmask===(qr<<1)-1,"missing or incomplete mipmap data")),Se.type===ie&&(We.extensions.indexOf("oes_texture_float_linear")<0&&M(Lt.minFilter===Z&&Lt.magFilter===Z,"filter not supported, must enable oes_texture_float_linear"),M(!Lt.genMipmaps,"mipmap generation not supported with float textures"));var hn=Se.images;for(Rr=0;Rr<16;++Rr)if(hn[Rr]){var gn=qr>>Rr,xn=Nr>>Rr;M(Se.mipmask&1<<Rr,"missing mipmap data");var mn=hn[Rr];if(M(mn.width===gn&&mn.height===xn,"invalid shape for mip images"),M(mn.format===Se.format&&mn.internalformat===Se.internalformat&&mn.type===Se.type,"incompatible type for mip image"),!mn.compressed)if(mn.data){var _n=Math.ceil(ye(mn.type,zr)*gn/mn.unpackAlignment)*mn.unpackAlignment;M(mn.data.byteLength===_n*xn,"invalid data for image, buffer size is inconsistent with image format")}else mn.element||mn.copy}else Lt.genMipmaps||M((Se.mipmask&1<<Rr)===0,"extra mipmap data");Se.compressed&&M(!Lt.genMipmaps,"mipmap generation for compressed images not supported")}function xe(Lt,Se,We,Rr){var qr=Lt.width,Nr=Lt.height,zr=Lt.channels;M(qr>0&&qr<=Rr.maxTextureSize&&Nr>0&&Nr<=Rr.maxTextureSize,"invalid texture shape"),M(qr===Nr,"cube map must be square"),M(Se.wrapS===Et&&Se.wrapT===Et,"wrap mode not supported by cube map");for(var hn=0;hn<We.length;++hn){var gn=We[hn];M(gn.width===qr&&gn.height===Nr,"inconsistent cube map face shape"),Se.genMipmaps&&(M(!gn.compressed,"can not generate mipmap for compressed textures"),M(gn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var xn=gn.images,mn=0;mn<16;++mn){var _n=xn[mn];if(_n){var v=qr>>mn,N=Nr>>mn;M(gn.mipmask&1<<mn,"missing mipmap data"),M(_n.width===v&&_n.height===N,"invalid shape for mip images"),M(_n.format===Lt.format&&_n.internalformat===Lt.internalformat&&_n.type===Lt.type,"incompatible type for mip image"),_n.compressed||(_n.data?M(_n.data.byteLength===v*N*Math.max(ye(_n.type,zr),_n.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):_n.element||_n.copy)}}}}var Tt=_(M,{optional:Bt,raise:w,commandRaise:ut,command:it,parameter:L,commandParameter:yt,constructor:E,type:S,commandType:ft,isTypedArray:p,nni:x,oneOf:y,shaderError:V,linkError:J,callSite:X,saveCommandRef:Q,saveDrawInfo:et,framebufferFormat:St,guessCommand:W,texture2D:Kt,textureCube:xe}),Ae=0,br=0,Sr=5,Mr=6;function Pr(Lt,Se){this.id=Ae++,this.type=Lt,this.data=Se}function on(Lt){return Lt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Hr(Lt){if(Lt.length===0)return[];var Se=Lt.charAt(0),We=Lt.charAt(Lt.length-1);if(Lt.length>1&&Se===We&&(Se==='"'||Se==="'"))return['"'+on(Lt.substr(1,Lt.length-2))+'"'];var Rr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Lt);if(Rr)return Hr(Lt.substr(0,Rr.index)).concat(Hr(Rr[1])).concat(Hr(Lt.substr(Rr.index+Rr[0].length)));var qr=Lt.split(".");if(qr.length===1)return['"'+on(Lt)+'"'];for(var Nr=[],zr=0;zr<qr.length;++zr)Nr=Nr.concat(Hr(qr[zr]));return Nr}function Sn(Lt){return"["+Hr(Lt).join("][")+"]"}function In(Lt,Se){return new Pr(Lt,Sn(Se+""))}function Nn(Lt){return typeof Lt=="function"&&!Lt._reglType||Lt instanceof Pr}function vr(Lt,Se){if(typeof Lt=="function")return new Pr(br,Lt);if(typeof Lt=="number"||typeof Lt=="boolean")return new Pr(Sr,Lt);if(Array.isArray(Lt))return new Pr(Mr,Lt.map((We,Rr)=>vr(We,Se+"["+Rr+"]")));if(Lt instanceof Pr)return Lt;Tt(!1,"invalid option type in uniform "+Se)}var Ze={DynamicVariable:Pr,define:In,isDynamic:Nn,unbox:vr,accessor:Sn},Er={next:typeof requestAnimationFrame=="function"?function(Lt){return requestAnimationFrame(Lt)}:function(Lt){return setTimeout(Lt,16)},cancel:typeof cancelAnimationFrame=="function"?function(Lt){return cancelAnimationFrame(Lt)}:clearTimeout},ke=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Xe(){var Lt={"":0},Se=[""];return{id:function(We){var Rr=Lt[We];return Rr||(Rr=Lt[We]=Se.length,Se.push(We),Rr)},str:function(We){return Se[We]}}}function jr(Lt,Se,We){var Rr=document.createElement("canvas");_(Rr.style,{border:0,margin:0,padding:0,top:0,left:0}),Lt.appendChild(Rr),Lt===document.body&&(Rr.style.position="absolute",_(Lt.style,{margin:0,padding:0}));function qr(){var hn=window.innerWidth,gn=window.innerHeight;if(Lt!==document.body){var xn=Lt.getBoundingClientRect();hn=xn.right-xn.left,gn=xn.bottom-xn.top}Rr.width=We*hn,Rr.height=We*gn,_(Rr.style,{width:hn+"px",height:gn+"px"})}var Nr;Lt!==document.body&&typeof ResizeObserver=="function"?(Nr=new ResizeObserver(function(){setTimeout(qr)}),Nr.observe(Lt)):window.addEventListener("resize",qr,!1);function zr(){Nr?Nr.disconnect():window.removeEventListener("resize",qr),Lt.removeChild(Rr)}return qr(),{canvas:Rr,onDestroy:zr}}function rn(Lt,Se){function We(Rr){try{return Lt.getContext(Rr,Se)}catch(qr){return null}}return We("webgl")||We("experimental-webgl")||We("webgl-experimental")}function ir(Lt){return typeof Lt.nodeName=="string"&&typeof Lt.appendChild=="function"&&typeof Lt.getBoundingClientRect=="function"}function Lr(Lt){return typeof Lt.drawArrays=="function"||typeof Lt.drawElements=="function"}function dn(Lt){return typeof Lt=="string"?Lt.split():(Tt(Array.isArray(Lt),"invalid extension array"),Lt)}function Zr(Lt){return typeof Lt=="string"?(Tt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Lt)):Lt}function wn(Lt){var Se=Lt||{},We,Rr,qr,Nr,zr={},hn=[],gn=[],xn=typeof window=="undefined"?1:window.devicePixelRatio,mn=!1,_n=function($){$&&Tt.raise($)},v=function(){};if(typeof Se=="string"?(Tt(typeof document!="undefined","selector queries only supported in DOM enviroments"),We=document.querySelector(Se),Tt(We,"invalid query string for element")):typeof Se=="object"?ir(Se)?We=Se:Lr(Se)?(Nr=Se,qr=Nr.canvas):(Tt.constructor(Se),"gl"in Se?Nr=Se.gl:"canvas"in Se?qr=Zr(Se.canvas):"container"in Se&&(Rr=Zr(Se.container)),"attributes"in Se&&(zr=Se.attributes,Tt.type(zr,"object","invalid context attributes")),"extensions"in Se&&(hn=dn(Se.extensions)),"optionalExtensions"in Se&&(gn=dn(Se.optionalExtensions)),"onDone"in Se&&(Tt.type(Se.onDone,"function","invalid or missing onDone callback"),_n=Se.onDone),"profile"in Se&&(mn=!!Se.profile),"pixelRatio"in Se&&(xn=+Se.pixelRatio,Tt(xn>0,"invalid pixel ratio"))):Tt.raise("invalid arguments to regl"),We&&(We.nodeName.toLowerCase()==="canvas"?qr=We:Rr=We),!Nr){if(!qr){Tt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var N=jr(Rr||document.body,_n,xn);if(!N)return null;qr=N.canvas,v=N.onDestroy}zr.premultipliedAlpha===void 0&&(zr.premultipliedAlpha=!0),Nr=rn(qr,zr)}return Nr?{gl:Nr,canvas:qr,container:Rr,extensions:hn,optionalExtensions:gn,pixelRatio:xn,profile:mn,onDone:_n,onDestroy:v}:(v(),_n("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ln(Lt,Se){var We={};function Rr(zr){Tt.type(zr,"string","extension name must be string");var hn=zr.toLowerCase(),gn;try{gn=We[hn]=Lt.getExtension(hn)}catch(xn){}return!!gn}for(var qr=0;qr<Se.extensions.length;++qr){var Nr=Se.extensions[qr];if(!Rr(Nr))return Se.onDestroy(),Se.onDone('"'+Nr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Se.optionalExtensions.forEach(Rr),{extensions:We,restore:function(){Object.keys(We).forEach(function(zr){if(We[zr]&&!Rr(zr))throw new Error("(regl): error restoring extension "+zr)})}}}function bn(Lt,Se){for(var We=Array(Lt),Rr=0;Rr<Lt;++Rr)We[Rr]=Se(Rr);return We}var Pn=5120,at=5121,je=5122,Zt=5123,$t=5124,Mt=5125,be=5126;function Nt(Lt){for(var Se=16;Se<=1<<28;Se*=16)if(Lt<=Se)return Se;return 0}function Ht(Lt){var Se,We;return Se=(Lt>65535)<<4,Lt>>>=Se,We=(Lt>255)<<3,Lt>>>=We,Se|=We,We=(Lt>15)<<2,Lt>>>=We,Se|=We,We=(Lt>3)<<1,Lt>>>=We,Se|=We,Se|Lt>>1}function dt(){var Lt=bn(8,function(){return[]});function Se(Nr){var zr=Nt(Nr),hn=Lt[Ht(zr)>>2];return hn.length>0?hn.pop():new ArrayBuffer(zr)}function We(Nr){Lt[Ht(Nr.byteLength)>>2].push(Nr)}function Rr(Nr,zr){var hn=null;switch(Nr){case Pn:hn=new Int8Array(Se(zr),0,zr);break;case at:hn=new Uint8Array(Se(zr),0,zr);break;case je:hn=new Int16Array(Se(2*zr),0,zr);break;case Zt:hn=new Uint16Array(Se(2*zr),0,zr);break;case $t:hn=new Int32Array(Se(4*zr),0,zr);break;case Mt:hn=new Uint32Array(Se(4*zr),0,zr);break;case be:hn=new Float32Array(Se(4*zr),0,zr);break;default:return null}return hn.length!==zr?hn.subarray(0,zr):hn}function qr(Nr){We(Nr.buffer)}return{alloc:Se,free:We,allocType:Rr,freeType:qr}}var Gt=dt();Gt.zero=dt();var tt=3408,ot=3410,k=3411,C=3412,I=3413,H=3414,gt=3415,zt=33901,Rt=33902,qt=3379,Te=3386,he=34921,Ue=36347,cr=36348,Ve=35661,Tr=35660,nn=34930,He=36349,ur=34076,Ar=34024,Cr=7936,se=7937,Xt=7938,fe=35724,Me=34047,pe=36063,Re=34852,nr=3553,fr=34067,tn=34069,Ln=33984,sn=6408,Xn=5126,an=5121,Bn=36160,Jn=36053,oa=36064,sa=16384,xi=function(Lt,Se){var We=1;Se.ext_texture_filter_anisotropic&&(We=Lt.getParameter(Me));var Rr=1,qr=1;Se.webgl_draw_buffers&&(Rr=Lt.getParameter(Re),qr=Lt.getParameter(pe));var Nr=!!Se.oes_texture_float;if(Nr){var zr=Lt.createTexture();Lt.bindTexture(nr,zr),Lt.texImage2D(nr,0,sn,1,1,0,sn,Xn,null);var hn=Lt.createFramebuffer();if(Lt.bindFramebuffer(Bn,hn),Lt.framebufferTexture2D(Bn,oa,nr,zr,0),Lt.bindTexture(nr,null),Lt.checkFramebufferStatus(Bn)!==Jn)Nr=!1;else{Lt.viewport(0,0,1,1),Lt.clearColor(1,0,0,1),Lt.clear(sa);var gn=Gt.allocType(Xn,4);Lt.readPixels(0,0,1,1,sn,Xn,gn),Lt.getError()?Nr=!1:(Lt.deleteFramebuffer(hn),Lt.deleteTexture(zr),Nr=gn[0]===1),Gt.freeType(gn)}}var xn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),mn=!0;if(!xn){var _n=Lt.createTexture(),v=Gt.allocType(an,36);Lt.activeTexture(Ln),Lt.bindTexture(fr,_n),Lt.texImage2D(tn,0,sn,3,3,0,sn,an,v),Gt.freeType(v),Lt.bindTexture(fr,null),Lt.deleteTexture(_n),mn=!Lt.getError()}return{colorBits:[Lt.getParameter(ot),Lt.getParameter(k),Lt.getParameter(C),Lt.getParameter(I)],depthBits:Lt.getParameter(H),stencilBits:Lt.getParameter(gt),subpixelBits:Lt.getParameter(tt),extensions:Object.keys(Se).filter(function(N){return!!Se[N]}),maxAnisotropic:We,maxDrawbuffers:Rr,maxColorAttachments:qr,pointSizeDims:Lt.getParameter(zt),lineWidthDims:Lt.getParameter(Rt),maxViewportDims:Lt.getParameter(Te),maxCombinedTextureUnits:Lt.getParameter(Ve),maxCubeMapSize:Lt.getParameter(ur),maxRenderbufferSize:Lt.getParameter(Ar),maxTextureUnits:Lt.getParameter(nn),maxTextureSize:Lt.getParameter(qt),maxAttributes:Lt.getParameter(he),maxVertexUniforms:Lt.getParameter(Ue),maxVertexTextureUnits:Lt.getParameter(Tr),maxVaryingVectors:Lt.getParameter(cr),maxFragmentUniforms:Lt.getParameter(He),glsl:Lt.getParameter(fe),renderer:Lt.getParameter(se),vendor:Lt.getParameter(Cr),version:Lt.getParameter(Xt),readFloat:Nr,npotTextureCube:mn}};function Na(Lt){return!!Lt&&typeof Lt=="object"&&Array.isArray(Lt.shape)&&Array.isArray(Lt.stride)&&typeof Lt.offset=="number"&&Lt.shape.length===Lt.stride.length&&(Array.isArray(Lt.data)||G(Lt.data))}var Ra=function(Lt){return Object.keys(Lt).map(function(Se){return Lt[Se]})},ri={shape:eo,flatten:ki};function Ci(Lt,Se,We){for(var Rr=0;Rr<Se;++Rr)We[Rr]=Lt[Rr]}function Ni(Lt,Se,We,Rr){for(var qr=0,Nr=0;Nr<Se;++Nr)for(var zr=Lt[Nr],hn=0;hn<We;++hn)Rr[qr++]=zr[hn]}function Ri(Lt,Se,We,Rr,qr,Nr){for(var zr=Nr,hn=0;hn<Se;++hn)for(var gn=Lt[hn],xn=0;xn<We;++xn)for(var mn=gn[xn],_n=0;_n<Rr;++_n)qr[zr++]=mn[_n]}function pa(Lt,Se,We,Rr,qr){for(var Nr=1,zr=We+1;zr<Se.length;++zr)Nr*=Se[zr];var hn=Se[We];if(Se.length-We===4){var gn=Se[We+1],xn=Se[We+2],mn=Se[We+3];for(zr=0;zr<hn;++zr)Ri(Lt[zr],gn,xn,mn,Rr,qr),qr+=Nr}else for(zr=0;zr<hn;++zr)pa(Lt[zr],Se,We+1,Rr,qr),qr+=Nr}function ki(Lt,Se,We,Rr){var qr=1;if(Se.length)for(var Nr=0;Nr<Se.length;++Nr)qr*=Se[Nr];else qr=0;var zr=Rr||Gt.allocType(We,qr);switch(Se.length){case 0:break;case 1:Ci(Lt,Se[0],zr);break;case 2:Ni(Lt,Se[0],Se[1],zr);break;case 3:Ri(Lt,Se[0],Se[1],Se[2],zr,0);break;default:pa(Lt,Se,0,zr,0)}return zr}function eo(Lt){for(var Se=[],We=Lt;We.length;We=We[0])Se.push(We.length);return Se}var za={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ei=5120,Bi=5122,go=5124,Pi=5121,Wi=5123,ro=5125,mo=5126,oi=5126,Ti={int8:Ei,int16:Bi,int32:go,uint8:Pi,uint16:Wi,uint32:ro,float:mo,float32:oi},Hn=35048,Jt=35040,ue={dynamic:Hn,stream:Jt,static:35044},Pe=ri.flatten,rr=ri.shape,Or=35044,Ir=35040,xr=5121,Kr=5126,un=[];un[5120]=1,un[5122]=2,un[5124]=4,un[5121]=1,un[5123]=2,un[5125]=4,un[5126]=4;function Mn(Lt){return za[Object.prototype.toString.call(Lt)]|0}function Kn(Lt,Se){for(var We=0;We<Se.length;++We)Lt[We]=Se[We]}function Un(Lt,Se,We,Rr,qr,Nr,zr){for(var hn=0,gn=0;gn<We;++gn)for(var xn=0;xn<Rr;++xn)Lt[hn++]=Se[qr*gn+Nr*xn+zr]}function ra(Lt,Se,We,Rr){var qr=0,Nr={};function zr(st){this.id=qr++,this.buffer=Lt.createBuffer(),this.type=st,this.usage=Or,this.byteLength=0,this.dimension=1,this.dtype=xr,this.persistentData=null,We.profile&&(this.stats={size:0})}zr.prototype.bind=function(){Lt.bindBuffer(this.type,this.buffer)},zr.prototype.destroy=function(){v(this)};var hn=[];function gn(st,vt){var mt=hn.pop();return mt||(mt=new zr(st)),mt.bind(),_n(mt,vt,Ir,0,1,!1),mt}function xn(st){hn.push(st)}function mn(st,vt,mt){st.byteLength=vt.byteLength,Lt.bufferData(st.type,vt,mt)}function _n(st,vt,mt,It,kt,Vt){var oe;if(st.usage=mt,Array.isArray(vt)){if(st.dtype=It||Kr,vt.length>0){var Ee;if(Array.isArray(vt[0])){oe=rr(vt);for(var ve=1,Ge=1;Ge<oe.length;++Ge)ve*=oe[Ge];st.dimension=ve,Ee=Pe(vt,oe,st.dtype),mn(st,Ee,mt),Vt?st.persistentData=Ee:Gt.freeType(Ee)}else if(typeof vt[0]=="number"){st.dimension=kt;var ar=Gt.allocType(st.dtype,vt.length);Kn(ar,vt),mn(st,ar,mt),Vt?st.persistentData=ar:Gt.freeType(ar)}else G(vt[0])?(st.dimension=vt[0].length,st.dtype=It||Mn(vt[0])||Kr,Ee=Pe(vt,[vt.length,vt[0].length],st.dtype),mn(st,Ee,mt),Vt?st.persistentData=Ee:Gt.freeType(Ee)):Tt.raise("invalid buffer data")}}else if(G(vt))st.dtype=It||Mn(vt),st.dimension=kt,mn(st,vt,mt),Vt&&(st.persistentData=new Uint8Array(new Uint8Array(vt.buffer)));else if(Na(vt)){oe=vt.shape;var Ur=vt.stride,dr=vt.offset,pr=0,gr=0,yn=0,Rn=0;oe.length===1?(pr=oe[0],gr=1,yn=Ur[0],Rn=0):oe.length===2?(pr=oe[0],gr=oe[1],yn=Ur[0],Rn=Ur[1]):Tt.raise("invalid shape"),st.dtype=It||Mn(vt.data)||Kr,st.dimension=gr;var Cn=Gt.allocType(st.dtype,pr*gr);Un(Cn,vt.data,pr,gr,yn,Rn,dr),mn(st,Cn,mt),Vt?st.persistentData=Cn:Gt.freeType(Cn)}else vt instanceof ArrayBuffer?(st.dtype=xr,st.dimension=kt,mn(st,vt,mt),Vt&&(st.persistentData=new Uint8Array(new Uint8Array(vt)))):Tt.raise("invalid buffer data")}function v(st){Se.bufferCount--,Rr(st);var vt=st.buffer;Tt(vt,"buffer must not be deleted already"),Lt.deleteBuffer(vt),st.buffer=null,delete Nr[st.id]}function N(st,vt,mt,It){Se.bufferCount++;var kt=new zr(vt);Nr[kt.id]=kt;function Vt(ve){var Ge=Or,ar=null,Ur=0,dr=0,pr=1;return Array.isArray(ve)||G(ve)||Na(ve)||ve instanceof ArrayBuffer?ar=ve:typeof ve=="number"?Ur=ve|0:ve&&(Tt.type(ve,"object","buffer arguments must be an object, a number or an array"),"data"in ve&&(Tt(ar===null||Array.isArray(ar)||G(ar)||Na(ar),"invalid data for buffer"),ar=ve.data),"usage"in ve&&(Tt.parameter(ve.usage,ue,"invalid buffer usage"),Ge=ue[ve.usage]),"type"in ve&&(Tt.parameter(ve.type,Ti,"invalid buffer type"),dr=Ti[ve.type]),"dimension"in ve&&(Tt.type(ve.dimension,"number","invalid dimension"),pr=ve.dimension|0),"length"in ve&&(Tt.nni(Ur,"buffer length must be a nonnegative integer"),Ur=ve.length|0)),kt.bind(),ar?_n(kt,ar,Ge,dr,pr,It):(Ur&&Lt.bufferData(kt.type,Ur,Ge),kt.dtype=dr||xr,kt.usage=Ge,kt.dimension=pr,kt.byteLength=Ur),We.profile&&(kt.stats.size=kt.byteLength*un[kt.dtype]),Vt}function oe(ve,Ge){Tt(Ge+ve.byteLength<=kt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ve.byteLength+" starting from offset "+Ge+" to a buffer of size "+kt.byteLength),Lt.bufferSubData(kt.type,Ge,ve)}function Ee(ve,Ge){var ar=(Ge||0)|0,Ur;if(kt.bind(),G(ve)||ve instanceof ArrayBuffer)oe(ve,ar);else if(Array.isArray(ve)){if(ve.length>0)if(typeof ve[0]=="number"){var dr=Gt.allocType(kt.dtype,ve.length);Kn(dr,ve),oe(dr,ar),Gt.freeType(dr)}else if(Array.isArray(ve[0])||G(ve[0])){Ur=rr(ve);var pr=Pe(ve,Ur,kt.dtype);oe(pr,ar),Gt.freeType(pr)}else Tt.raise("invalid buffer data")}else if(Na(ve)){Ur=ve.shape;var gr=ve.stride,yn=0,Rn=0,Cn=0,qn=0;Ur.length===1?(yn=Ur[0],Rn=1,Cn=gr[0],qn=0):Ur.length===2?(yn=Ur[0],Rn=Ur[1],Cn=gr[0],qn=gr[1]):Tt.raise("invalid shape");var $n=Array.isArray(ve.data)?kt.dtype:Mn(ve.data),aa=Gt.allocType($n,yn*Rn);Un(aa,ve.data,yn,Rn,Cn,qn,ve.offset),oe(aa,ar),Gt.freeType(aa)}else Tt.raise("invalid data for buffer subdata");return Vt}return mt||Vt(st),Vt._reglType="buffer",Vt._buffer=kt,Vt.subdata=Ee,We.profile&&(Vt.stats=kt.stats),Vt.destroy=function(){v(kt)},Vt}function $(){Ra(Nr).forEach(function(st){st.buffer=Lt.createBuffer(),Lt.bindBuffer(st.type,st.buffer),Lt.bufferData(st.type,st.persistentData||st.byteLength,st.usage)})}return We.profile&&(Se.getTotalBufferSize=function(){var st=0;return Object.keys(Nr).forEach(function(vt){st+=Nr[vt].stats.size}),st}),{create:N,createStream:gn,destroyStream:xn,clear:function(){Ra(Nr).forEach(v),hn.forEach(v)},getBuffer:function(st){return st&&st._buffer instanceof zr?st._buffer:null},restore:$,_initBuffer:_n}}var na=0,Ya=0,ua=1,Qn=1,Ga=4,Da=4,xa={points:na,point:Ya,lines:ua,line:Qn,triangles:Ga,triangle:Da,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},si=0,Qa=1,ka=4,_a=5120,va=5121,ci=5122,ni=5123,fi=5124,Fi=5125,Ai=34963,Yi=35040,Oo=35044;function Io(Lt,Se,We,Rr){var qr={},Nr=0,zr={uint8:va,uint16:ni};Se.oes_element_index_uint&&(zr.uint32=Fi);function hn($){this.id=Nr++,qr[this.id]=this,this.buffer=$,this.primType=ka,this.vertCount=0,this.type=0}hn.prototype.bind=function(){this.buffer.bind()};var gn=[];function xn($){var st=gn.pop();return st||(st=new hn(We.create(null,Ai,!0,!1)._buffer)),_n(st,$,Yi,-1,-1,0,0),st}function mn($){gn.push($)}function _n($,st,vt,mt,It,kt,Vt){$.buffer.bind();var oe;if(st){var Ee=Vt;!Vt&&(!G(st)||Na(st)&&!G(st.data))&&(Ee=Se.oes_element_index_uint?Fi:ni),We._initBuffer($.buffer,st,vt,Ee,3)}else Lt.bufferData(Ai,kt,vt),$.buffer.dtype=oe||va,$.buffer.usage=vt,$.buffer.dimension=3,$.buffer.byteLength=kt;if(oe=Vt,!Vt){switch($.buffer.dtype){case va:case _a:oe=va;break;case ni:case ci:oe=ni;break;case Fi:case fi:oe=Fi;break;default:Tt.raise("unsupported type for element array")}$.buffer.dtype=oe}$.type=oe,Tt(oe!==Fi||!!Se.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ve=It;ve<0&&(ve=$.buffer.byteLength,oe===ni?ve>>=1:oe===Fi&&(ve>>=2)),$.vertCount=ve;var Ge=mt;if(mt<0){Ge=ka;var ar=$.buffer.dimension;ar===1&&(Ge=si),ar===2&&(Ge=Qa),ar===3&&(Ge=ka)}$.primType=Ge}function v($){Rr.elementsCount--,Tt($.buffer!==null,"must not double destroy elements"),delete qr[$.id],$.buffer.destroy(),$.buffer=null}function N($,st){var vt=We.create(null,Ai,!0),mt=new hn(vt._buffer);Rr.elementsCount++;function It(kt){if(!kt)vt(),mt.primType=ka,mt.vertCount=0,mt.type=va;else if(typeof kt=="number")vt(kt),mt.primType=ka,mt.vertCount=kt|0,mt.type=va;else{var Vt=null,oe=Oo,Ee=-1,ve=-1,Ge=0,ar=0;Array.isArray(kt)||G(kt)||Na(kt)?Vt=kt:(Tt.type(kt,"object","invalid arguments for elements"),"data"in kt&&(Vt=kt.data,Tt(Array.isArray(Vt)||G(Vt)||Na(Vt),"invalid data for element buffer")),"usage"in kt&&(Tt.parameter(kt.usage,ue,"invalid element buffer usage"),oe=ue[kt.usage]),"primitive"in kt&&(Tt.parameter(kt.primitive,xa,"invalid element buffer primitive"),Ee=xa[kt.primitive]),"count"in kt&&(Tt(typeof kt.count=="number"&&kt.count>=0,"invalid vertex count for elements"),ve=kt.count|0),"type"in kt&&(Tt.parameter(kt.type,zr,"invalid buffer type"),ar=zr[kt.type]),"length"in kt?Ge=kt.length|0:(Ge=ve,ar===ni||ar===ci?Ge*=2:(ar===Fi||ar===fi)&&(Ge*=4))),_n(mt,Vt,oe,Ee,ve,Ge,ar)}return It}return It($),It._reglType="elements",It._elements=mt,It.subdata=function(kt,Vt){return vt.subdata(kt,Vt),It},It.destroy=function(){v(mt)},It}return{create:N,createStream:xn,destroyStream:mn,getElements:function($){return typeof $=="function"&&$._elements instanceof hn?$._elements:null},clear:function(){Ra(qr).forEach(v)}}}var Li=new Float32Array(1),Ba=new Uint32Array(Li.buffer),vi=5123;function zi(Lt){for(var Se=Gt.allocType(vi,Lt.length),We=0;We<Lt.length;++We)if(isNaN(Lt[We]))Se[We]=65535;else if(Lt[We]===1/0)Se[We]=31744;else if(Lt[We]===-1/0)Se[We]=64512;else{Li[0]=Lt[We];var Rr=Ba[0],qr=Rr>>>31<<15,Nr=(Rr<<1>>>24)-127,zr=Rr>>13&(1<<10)-1;if(Nr<-24)Se[We]=qr;else if(Nr<-14){var hn=-14-Nr;Se[We]=qr+(zr+(1<<10)>>hn)}else Nr>15?Se[We]=qr+31744:Se[We]=qr+(Nr+15<<10)+zr}return Se}function Sa(Lt){return Array.isArray(Lt)||G(Lt)}var Xi=function(Lt){return!(Lt&Lt-1)&&!!Lt},co=34467,Mi=3553,Lo=34067,pi=34069,fo=6408,Go=6406,ts=6407,ji=6409,Uo=6410,Wo=32854,fs=32855,ha=36194,Wt=32819,Be=32820,tr=33635,mr=34042,Vr=6402,cn=34041,Fn=35904,Ia=35906,di=36193,no=33776,wo=33777,ds=33778,Oi=33779,ao=35986,Yo=35987,hs=34798,qo=35840,Es=35841,As=35842,ws=35843,nu=36196,Ko=5121,os=5123,vs=5125,No=5126,xu=10242,Eu=10243,Vi=10497,So=33071,Ro=33648,h=10240,Y=10241,wt=9728,Ft=9729,Qt=9984,le=9985,de=9986,_e=9987,Le=33170,Ye=4352,or=4353,Br=4354,Gr=34046,Fr=3317,pn=37440,Dn=37441,Qr=37443,Vn=37444,Ta=33984,Oa=[Qt,de,le,_e],Ea=[0,ji,Uo,ts,fo],ca={};ca[ji]=ca[Go]=ca[Vr]=1,ca[cn]=ca[Uo]=2,ca[ts]=ca[Fn]=3,ca[fo]=ca[Ia]=4;function ma(Lt){return"[object "+Lt+"]"}var io=ma("HTMLCanvasElement"),$i=ma("OffscreenCanvas"),Hi=ma("CanvasRenderingContext2D"),Qi=ma("ImageBitmap"),qi=ma("HTMLImageElement"),ho=ma("HTMLVideoElement"),Mo=Object.keys(za).concat([io,$i,Hi,Qi,qi,ho]),Xa=[];Xa[Ko]=1,Xa[No]=4,Xa[di]=2,Xa[os]=2,Xa[vs]=4;var hi=[];hi[Wo]=2,hi[fs]=2,hi[ha]=2,hi[cn]=4,hi[no]=.5,hi[wo]=.5,hi[ds]=1,hi[Oi]=1,hi[ao]=.5,hi[Yo]=1,hi[hs]=1,hi[qo]=.5,hi[Es]=.25,hi[As]=.5,hi[ws]=.25,hi[nu]=.5;function Os(Lt){return Array.isArray(Lt)&&(Lt.length===0||typeof Lt[0]=="number")}function ps(Lt){if(!Array.isArray(Lt))return!1;var Se=Lt.length;return!(Se===0||!Sa(Lt[0]))}function es(Lt){return Object.prototype.toString.call(Lt)}function au(Lt){return es(Lt)===io}function xc(Lt){return es(Lt)===$i}function sf(Lt){return es(Lt)===Hi}function uf(Lt){return es(Lt)===Qi}function Ec(Lt){return es(Lt)===qi}function rd(Lt){return es(Lt)===ho}function wc(Lt){if(!Lt)return!1;var Se=es(Lt);return Mo.indexOf(Se)>=0?!0:Os(Lt)||ps(Lt)||Na(Lt)}function Ju(Lt){return za[Object.prototype.toString.call(Lt)]|0}function lf(Lt,Se){var We=Se.length;switch(Lt.type){case Ko:case os:case vs:case No:var Rr=Gt.allocType(Lt.type,We);Rr.set(Se),Lt.data=Rr;break;case di:Lt.data=zi(Se);break;default:Tt.raise("unsupported texture type, must specify a typed array")}}function Sc(Lt,Se){return Gt.allocType(Lt.type===di?No:Lt.type,Se)}function cf(Lt,Se){Lt.type===di?(Lt.data=zi(Se),Gt.freeType(Se)):Lt.data=Se}function nd(Lt,Se,We,Rr,qr,Nr){for(var zr=Lt.width,hn=Lt.height,gn=Lt.channels,xn=zr*hn*gn,mn=Sc(Lt,xn),_n=0,v=0;v<hn;++v)for(var N=0;N<zr;++N)for(var $=0;$<gn;++$)mn[_n++]=Se[We*N+Rr*v+qr*$+Nr];cf(Lt,mn)}function iu(Lt,Se,We,Rr,qr,Nr){var zr;if(typeof hi[Lt]!="undefined"?zr=hi[Lt]:zr=ca[Lt]*Xa[Se],Nr&&(zr*=6),qr){for(var hn=0,gn=We;gn>=1;)hn+=zr*gn*gn,gn/=2;return hn}else return zr*We*Rr}function ff(Lt,Se,We,Rr,qr,Nr,zr){var hn={"don't care":Ye,"dont care":Ye,nice:Br,fast:or},gn={repeat:Vi,clamp:So,mirror:Ro},xn={nearest:wt,linear:Ft},mn=_({mipmap:_e,"nearest mipmap nearest":Qt,"linear mipmap nearest":le,"nearest mipmap linear":de,"linear mipmap linear":_e},xn),_n={none:0,browser:Vn},v={uint8:Ko,rgba4:Wt,rgb565:tr,"rgb5 a1":Be},N={alpha:Go,luminance:ji,"luminance alpha":Uo,rgb:ts,rgba:fo,rgba4:Wo,"rgb5 a1":fs,rgb565:ha},$={};Se.ext_srgb&&(N.srgb=Fn,N.srgba=Ia),Se.oes_texture_float&&(v.float32=v.float=No),Se.oes_texture_half_float&&(v.float16=v["half float"]=di),Se.webgl_depth_texture&&(_(N,{depth:Vr,"depth stencil":cn}),_(v,{uint16:os,uint32:vs,"depth stencil":mr})),Se.webgl_compressed_texture_s3tc&&_($,{"rgb s3tc dxt1":no,"rgba s3tc dxt1":wo,"rgba s3tc dxt3":ds,"rgba s3tc dxt5":Oi}),Se.webgl_compressed_texture_atc&&_($,{"rgb atc":ao,"rgba atc explicit alpha":Yo,"rgba atc interpolated alpha":hs}),Se.webgl_compressed_texture_pvrtc&&_($,{"rgb pvrtc 4bppv1":qo,"rgb pvrtc 2bppv1":Es,"rgba pvrtc 4bppv1":As,"rgba pvrtc 2bppv1":ws}),Se.webgl_compressed_texture_etc1&&($["rgb etc1"]=nu);var st=Array.prototype.slice.call(Lt.getParameter(co));Object.keys($).forEach(function(ze){var kr=$[ze];st.indexOf(kr)>=0&&(N[ze]=kr)});var vt=Object.keys(N);We.textureFormats=vt;var mt=[];Object.keys(N).forEach(function(ze){var kr=N[ze];mt[kr]=ze});var It=[];Object.keys(v).forEach(function(ze){var kr=v[ze];It[kr]=ze});var kt=[];Object.keys(xn).forEach(function(ze){var kr=xn[ze];kt[kr]=ze});var Vt=[];Object.keys(mn).forEach(function(ze){var kr=mn[ze];Vt[kr]=ze});var oe=[];Object.keys(gn).forEach(function(ze){var kr=gn[ze];oe[kr]=ze});var Ee=vt.reduce(function(ze,kr){var Dr=N[kr];return Dr===ji||Dr===Go||Dr===ji||Dr===Uo||Dr===Vr||Dr===cn||Se.ext_srgb&&(Dr===Fn||Dr===Ia)?ze[Dr]=Dr:Dr===fs||kr.indexOf("rgba")>=0?ze[Dr]=fo:ze[Dr]=ts,ze},{});function ve(){this.internalformat=fo,this.format=fo,this.type=Ko,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Vn,this.width=0,this.height=0,this.channels=0}function Ge(ze,kr){ze.internalformat=kr.internalformat,ze.format=kr.format,ze.type=kr.type,ze.compressed=kr.compressed,ze.premultiplyAlpha=kr.premultiplyAlpha,ze.flipY=kr.flipY,ze.unpackAlignment=kr.unpackAlignment,ze.colorSpace=kr.colorSpace,ze.width=kr.width,ze.height=kr.height,ze.channels=kr.channels}function ar(ze,kr){if(!(typeof kr!="object"||!kr)){if("premultiplyAlpha"in kr&&(Tt.type(kr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ze.premultiplyAlpha=kr.premultiplyAlpha),"flipY"in kr&&(Tt.type(kr.flipY,"boolean","invalid texture flip"),ze.flipY=kr.flipY),"alignment"in kr&&(Tt.oneOf(kr.alignment,[1,2,4,8],"invalid texture unpack alignment"),ze.unpackAlignment=kr.alignment),"colorSpace"in kr&&(Tt.parameter(kr.colorSpace,_n,"invalid colorSpace"),ze.colorSpace=_n[kr.colorSpace]),"type"in kr){var Dr=kr.type;Tt(Se.oes_texture_float||!(Dr==="float"||Dr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Tt(Se.oes_texture_half_float||!(Dr==="half float"||Dr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Tt(Se.webgl_depth_texture||!(Dr==="uint16"||Dr==="uint32"||Dr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Tt.parameter(Dr,v,"invalid texture type"),ze.type=v[Dr]}var Yn=ze.width,Pa=ze.height,Ie=ze.channels,me=!1;"shape"in kr?(Tt(Array.isArray(kr.shape)&&kr.shape.length>=2,"shape must be an array"),Yn=kr.shape[0],Pa=kr.shape[1],kr.shape.length===3&&(Ie=kr.shape[2],Tt(Ie>0&&Ie<=4,"invalid number of channels"),me=!0),Tt(Yn>=0&&Yn<=We.maxTextureSize,"invalid width"),Tt(Pa>=0&&Pa<=We.maxTextureSize,"invalid height")):("radius"in kr&&(Yn=Pa=kr.radius,Tt(Yn>=0&&Yn<=We.maxTextureSize,"invalid radius")),"width"in kr&&(Yn=kr.width,Tt(Yn>=0&&Yn<=We.maxTextureSize,"invalid width")),"height"in kr&&(Pa=kr.height,Tt(Pa>=0&&Pa<=We.maxTextureSize,"invalid height")),"channels"in kr&&(Ie=kr.channels,Tt(Ie>0&&Ie<=4,"invalid number of channels"),me=!0)),ze.width=Yn|0,ze.height=Pa|0,ze.channels=Ie|0;var $e=!1;if("format"in kr){var yr=kr.format;Tt(Se.webgl_depth_texture||!(yr==="depth"||yr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Tt.parameter(yr,N,"invalid texture format");var wr=ze.internalformat=N[yr];ze.format=Ee[wr],yr in v&&("type"in kr||(ze.type=v[yr])),yr in $&&(ze.compressed=!0),$e=!0}!me&&$e?ze.channels=ca[ze.format]:me&&!$e?ze.channels!==Ea[ze.format]&&(ze.format=ze.internalformat=Ea[ze.channels]):$e&&me&&Tt(ze.channels===ca[ze.format],"number of channels inconsistent with specified format")}}function Ur(ze){Lt.pixelStorei(pn,ze.flipY),Lt.pixelStorei(Dn,ze.premultiplyAlpha),Lt.pixelStorei(Qr,ze.colorSpace),Lt.pixelStorei(Fr,ze.unpackAlignment)}function dr(){ve.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function pr(ze,kr){var Dr=null;if(wc(kr)?Dr=kr:kr&&(Tt.type(kr,"object","invalid pixel data type"),ar(ze,kr),"x"in kr&&(ze.xOffset=kr.x|0),"y"in kr&&(ze.yOffset=kr.y|0),wc(kr.data)&&(Dr=kr.data)),Tt(!ze.compressed||Dr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),kr.copy){Tt(!Dr,"can not specify copy and data field for the same texture");var Yn=qr.viewportWidth,Pa=qr.viewportHeight;ze.width=ze.width||Yn-ze.xOffset,ze.height=ze.height||Pa-ze.yOffset,ze.needsCopy=!0,Tt(ze.xOffset>=0&&ze.xOffset<Yn&&ze.yOffset>=0&&ze.yOffset<Pa&&ze.width>0&&ze.width<=Yn&&ze.height>0&&ze.height<=Pa,"copy texture read out of bounds")}else if(!Dr)ze.width=ze.width||1,ze.height=ze.height||1,ze.channels=ze.channels||4;else if(G(Dr))ze.channels=ze.channels||4,ze.data=Dr,!("type"in kr)&&ze.type===Ko&&(ze.type=Ju(Dr));else if(Os(Dr))ze.channels=ze.channels||4,lf(ze,Dr),ze.alignment=1,ze.needsFree=!0;else if(Na(Dr)){var Ie=Dr.data;!Array.isArray(Ie)&&ze.type===Ko&&(ze.type=Ju(Ie));var me=Dr.shape,$e=Dr.stride,yr,wr,er,Je,lr,De;me.length===3?(er=me[2],De=$e[2]):(Tt(me.length===2,"invalid ndarray pixel data, must be 2 or 3D"),er=1,De=1),yr=me[0],wr=me[1],Je=$e[0],lr=$e[1],ze.alignment=1,ze.width=yr,ze.height=wr,ze.channels=er,ze.format=ze.internalformat=Ea[er],ze.needsFree=!0,nd(ze,Ie,Je,lr,De,Dr.offset)}else if(au(Dr)||xc(Dr)||sf(Dr))au(Dr)||xc(Dr)?ze.element=Dr:ze.element=Dr.canvas,ze.width=ze.element.width,ze.height=ze.element.height,ze.channels=4;else if(uf(Dr))ze.element=Dr,ze.width=Dr.width,ze.height=Dr.height,ze.channels=4;else if(Ec(Dr))ze.element=Dr,ze.width=Dr.naturalWidth,ze.height=Dr.naturalHeight,ze.channels=4;else if(rd(Dr))ze.element=Dr,ze.width=Dr.videoWidth,ze.height=Dr.videoHeight,ze.channels=4;else if(ps(Dr)){var Qe=ze.width||Dr[0].length,Ce=ze.height||Dr.length,hr=ze.channels;Sa(Dr[0][0])?hr=hr||Dr[0][0].length:hr=hr||1;for(var _r=ri.shape(Dr),$r=1,en=0;en<_r.length;++en)$r*=_r[en];var Wr=Sc(ze,$r);ri.flatten(Dr,_r,"",Wr),cf(ze,Wr),ze.alignment=1,ze.width=Qe,ze.height=Ce,ze.channels=hr,ze.format=ze.internalformat=Ea[hr],ze.needsFree=!0}ze.type===No?Tt(We.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ze.type===di&&Tt(We.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function gr(ze,kr,Dr){var Yn=ze.element,Pa=ze.data,Ie=ze.internalformat,me=ze.format,$e=ze.type,yr=ze.width,wr=ze.height;Ur(ze),Yn?Lt.texImage2D(kr,Dr,me,me,$e,Yn):ze.compressed?Lt.compressedTexImage2D(kr,Dr,Ie,yr,wr,0,Pa):ze.needsCopy?(Rr(),Lt.copyTexImage2D(kr,Dr,me,ze.xOffset,ze.yOffset,yr,wr,0)):Lt.texImage2D(kr,Dr,me,yr,wr,0,me,$e,Pa||null)}function yn(ze,kr,Dr,Yn,Pa){var Ie=ze.element,me=ze.data,$e=ze.internalformat,yr=ze.format,wr=ze.type,er=ze.width,Je=ze.height;Ur(ze),Ie?Lt.texSubImage2D(kr,Pa,Dr,Yn,yr,wr,Ie):ze.compressed?Lt.compressedTexSubImage2D(kr,Pa,Dr,Yn,$e,er,Je,me):ze.needsCopy?(Rr(),Lt.copyTexSubImage2D(kr,Pa,Dr,Yn,ze.xOffset,ze.yOffset,er,Je)):Lt.texSubImage2D(kr,Pa,Dr,Yn,er,Je,yr,wr,me)}var Rn=[];function Cn(){return Rn.pop()||new dr}function qn(ze){ze.needsFree&&Gt.freeType(ze.data),dr.call(ze),Rn.push(ze)}function $n(){ve.call(this),this.genMipmaps=!1,this.mipmapHint=Ye,this.mipmask=0,this.images=Array(16)}function aa(ze,kr,Dr){var Yn=ze.images[0]=Cn();ze.mipmask=1,Yn.width=ze.width=kr,Yn.height=ze.height=Dr,Yn.channels=ze.channels=4}function ga(ze,kr){var Dr=null;if(wc(kr))Dr=ze.images[0]=Cn(),Ge(Dr,ze),pr(Dr,kr),ze.mipmask=1;else if(ar(ze,kr),Array.isArray(kr.mipmap))for(var Yn=kr.mipmap,Pa=0;Pa<Yn.length;++Pa)Dr=ze.images[Pa]=Cn(),Ge(Dr,ze),Dr.width>>=Pa,Dr.height>>=Pa,pr(Dr,Yn[Pa]),ze.mipmask|=1<<Pa;else Dr=ze.images[0]=Cn(),Ge(Dr,ze),pr(Dr,kr),ze.mipmask=1;Ge(ze,ze.images[0]),ze.compressed&&(ze.internalformat===no||ze.internalformat===wo||ze.internalformat===ds||ze.internalformat===Oi)&&Tt(ze.width%4===0&&ze.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function da(ze,kr){for(var Dr=ze.images,Yn=0;Yn<Dr.length;++Yn){if(!Dr[Yn])return;gr(Dr[Yn],kr,Yn)}}var Ii=[];function ya(){var ze=Ii.pop()||new $n;ve.call(ze),ze.mipmask=0;for(var kr=0;kr<16;++kr)ze.images[kr]=null;return ze}function Ji(ze){for(var kr=ze.images,Dr=0;Dr<kr.length;++Dr)kr[Dr]&&qn(kr[Dr]),kr[Dr]=null;Ii.push(ze)}function mi(){this.minFilter=wt,this.magFilter=wt,this.wrapS=So,this.wrapT=So,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ye}function Ua(ze,kr){if("min"in kr){var Dr=kr.min;Tt.parameter(Dr,mn),ze.minFilter=mn[Dr],Oa.indexOf(ze.minFilter)>=0&&!("faces"in kr)&&(ze.genMipmaps=!0)}if("mag"in kr){var Yn=kr.mag;Tt.parameter(Yn,xn),ze.magFilter=xn[Yn]}var Pa=ze.wrapS,Ie=ze.wrapT;if("wrap"in kr){var me=kr.wrap;typeof me=="string"?(Tt.parameter(me,gn),Pa=Ie=gn[me]):Array.isArray(me)&&(Tt.parameter(me[0],gn),Tt.parameter(me[1],gn),Pa=gn[me[0]],Ie=gn[me[1]])}else{if("wrapS"in kr){var $e=kr.wrapS;Tt.parameter($e,gn),Pa=gn[$e]}if("wrapT"in kr){var yr=kr.wrapT;Tt.parameter(yr,gn),Ie=gn[yr]}}if(ze.wrapS=Pa,ze.wrapT=Ie,"anisotropic"in kr){var wr=kr.anisotropic;Tt(typeof wr=="number"&&wr>=1&&wr<=We.maxAnisotropic,"aniso samples must be between 1 and "),ze.anisotropic=kr.anisotropic}if("mipmap"in kr){var er=!1;switch(typeof kr.mipmap){case"string":Tt.parameter(kr.mipmap,hn,"invalid mipmap hint"),ze.mipmapHint=hn[kr.mipmap],ze.genMipmaps=!0,er=!0;break;case"boolean":er=ze.genMipmaps=kr.mipmap;break;case"object":Tt(Array.isArray(kr.mipmap),"invalid mipmap type"),ze.genMipmaps=!1,er=!0;break;default:Tt.raise("invalid mipmap type")}er&&!("min"in kr)&&(ze.minFilter=Qt)}}function _i(ze,kr){Lt.texParameteri(kr,Y,ze.minFilter),Lt.texParameteri(kr,h,ze.magFilter),Lt.texParameteri(kr,xu,ze.wrapS),Lt.texParameteri(kr,Eu,ze.wrapT),Se.ext_texture_filter_anisotropic&&Lt.texParameteri(kr,Gr,ze.anisotropic),ze.genMipmaps&&(Lt.hint(Le,ze.mipmapHint),Lt.generateMipmap(kr))}var to=0,Co={},Po=We.maxTextureUnits,bo=Array(Po).map(function(){return null});function Ca(ze){ve.call(this),this.mipmask=0,this.internalformat=fo,this.id=to++,this.refCount=1,this.target=ze,this.texture=Lt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new mi,zr.profile&&(this.stats={size:0})}function Bo(ze){Lt.activeTexture(Ta),Lt.bindTexture(ze.target,ze.texture)}function Ka(){var ze=bo[0];ze?Lt.bindTexture(ze.target,ze.texture):Lt.bindTexture(Mi,null)}function ia(ze){var kr=ze.texture;Tt(kr,"must not double destroy texture");var Dr=ze.unit,Yn=ze.target;Dr>=0&&(Lt.activeTexture(Ta+Dr),Lt.bindTexture(Yn,null),bo[Dr]=null),Lt.deleteTexture(kr),ze.texture=null,ze.params=null,ze.pixels=null,ze.refCount=0,delete Co[ze.id],Nr.textureCount--}_(Ca.prototype,{bind:function(){var ze=this;ze.bindCount+=1;var kr=ze.unit;if(kr<0){for(var Dr=0;Dr<Po;++Dr){var Yn=bo[Dr];if(Yn){if(Yn.bindCount>0)continue;Yn.unit=-1}bo[Dr]=ze,kr=Dr;break}kr>=Po&&Tt.raise("insufficient number of texture units"),zr.profile&&Nr.maxTextureUnits<kr+1&&(Nr.maxTextureUnits=kr+1),ze.unit=kr,Lt.activeTexture(Ta+kr),Lt.bindTexture(ze.target,ze.texture)}return kr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ia(this)}});function Fa(ze,kr){var Dr=new Ca(Mi);Co[Dr.id]=Dr,Nr.textureCount++;function Yn(me,$e){var yr=Dr.texInfo;mi.call(yr);var wr=ya();return typeof me=="number"?typeof $e=="number"?aa(wr,me|0,$e|0):aa(wr,me|0,me|0):me?(Tt.type(me,"object","invalid arguments to regl.texture"),Ua(yr,me),ga(wr,me)):aa(wr,1,1),yr.genMipmaps&&(wr.mipmask=(wr.width<<1)-1),Dr.mipmask=wr.mipmask,Ge(Dr,wr),Tt.texture2D(yr,wr,We),Dr.internalformat=wr.internalformat,Yn.width=wr.width,Yn.height=wr.height,Bo(Dr),da(wr,Mi),_i(yr,Mi),Ka(),Ji(wr),zr.profile&&(Dr.stats.size=iu(Dr.internalformat,Dr.type,wr.width,wr.height,yr.genMipmaps,!1)),Yn.format=mt[Dr.internalformat],Yn.type=It[Dr.type],Yn.mag=kt[yr.magFilter],Yn.min=Vt[yr.minFilter],Yn.wrapS=oe[yr.wrapS],Yn.wrapT=oe[yr.wrapT],Yn}function Pa(me,$e,yr,wr){Tt(!!me,"must specify image data");var er=$e|0,Je=yr|0,lr=wr|0,De=Cn();return Ge(De,Dr),De.width=0,De.height=0,pr(De,me),De.width=De.width||(Dr.width>>lr)-er,De.height=De.height||(Dr.height>>lr)-Je,Tt(Dr.type===De.type&&Dr.format===De.format&&Dr.internalformat===De.internalformat,"incompatible format for texture.subimage"),Tt(er>=0&&Je>=0&&er+De.width<=Dr.width&&Je+De.height<=Dr.height,"texture.subimage write out of bounds"),Tt(Dr.mipmask&1<<lr,"missing mipmap data"),Tt(De.data||De.element||De.needsCopy,"missing image data"),Bo(Dr),yn(De,Mi,er,Je,lr),Ka(),qn(De),Yn}function Ie(me,$e){var yr=me|0,wr=$e|0||yr;if(yr===Dr.width&&wr===Dr.height)return Yn;Yn.width=Dr.width=yr,Yn.height=Dr.height=wr,Bo(Dr);for(var er=0;Dr.mipmask>>er;++er){var Je=yr>>er,lr=wr>>er;if(!Je||!lr)break;Lt.texImage2D(Mi,er,Dr.format,Je,lr,0,Dr.format,Dr.type,null)}return Ka(),zr.profile&&(Dr.stats.size=iu(Dr.internalformat,Dr.type,yr,wr,!1,!1)),Yn}return Yn(ze,kr),Yn.subimage=Pa,Yn.resize=Ie,Yn._reglType="texture2d",Yn._texture=Dr,zr.profile&&(Yn.stats=Dr.stats),Yn.destroy=function(){Dr.decRef()},Yn}function Za(ze,kr,Dr,Yn,Pa,Ie){var me=new Ca(Lo);Co[me.id]=me,Nr.cubeCount++;var $e=new Array(6);function yr(Je,lr,De,Qe,Ce,hr){var _r,$r=me.texInfo;for(mi.call($r),_r=0;_r<6;++_r)$e[_r]=ya();if(typeof Je=="number"||!Je){var en=Je|0||1;for(_r=0;_r<6;++_r)aa($e[_r],en,en)}else if(typeof Je=="object")if(lr)ga($e[0],Je),ga($e[1],lr),ga($e[2],De),ga($e[3],Qe),ga($e[4],Ce),ga($e[5],hr);else if(Ua($r,Je),ar(me,Je),"faces"in Je){var Wr=Je.faces;for(Tt(Array.isArray(Wr)&&Wr.length===6,"cube faces must be a length 6 array"),_r=0;_r<6;++_r)Tt(typeof Wr[_r]=="object"&&!!Wr[_r],"invalid input for cube map face"),Ge($e[_r],me),ga($e[_r],Wr[_r])}else for(_r=0;_r<6;++_r)ga($e[_r],Je);else Tt.raise("invalid arguments to cube map");for(Ge(me,$e[0]),We.npotTextureCube||Tt(Xi(me.width)&&Xi(me.height),"your browser does not support non power or two texture dimensions"),$r.genMipmaps?me.mipmask=($e[0].width<<1)-1:me.mipmask=$e[0].mipmask,Tt.textureCube(me,$r,$e,We),me.internalformat=$e[0].internalformat,yr.width=$e[0].width,yr.height=$e[0].height,Bo(me),_r=0;_r<6;++_r)da($e[_r],pi+_r);for(_i($r,Lo),Ka(),zr.profile&&(me.stats.size=iu(me.internalformat,me.type,yr.width,yr.height,$r.genMipmaps,!0)),yr.format=mt[me.internalformat],yr.type=It[me.type],yr.mag=kt[$r.magFilter],yr.min=Vt[$r.minFilter],yr.wrapS=oe[$r.wrapS],yr.wrapT=oe[$r.wrapT],_r=0;_r<6;++_r)Ji($e[_r]);return yr}function wr(Je,lr,De,Qe,Ce){Tt(!!lr,"must specify image data"),Tt(typeof Je=="number"&&Je===(Je|0)&&Je>=0&&Je<6,"invalid face");var hr=De|0,_r=Qe|0,$r=Ce|0,en=Cn();return Ge(en,me),en.width=0,en.height=0,pr(en,lr),en.width=en.width||(me.width>>$r)-hr,en.height=en.height||(me.height>>$r)-_r,Tt(me.type===en.type&&me.format===en.format&&me.internalformat===en.internalformat,"incompatible format for texture.subimage"),Tt(hr>=0&&_r>=0&&hr+en.width<=me.width&&_r+en.height<=me.height,"texture.subimage write out of bounds"),Tt(me.mipmask&1<<$r,"missing mipmap data"),Tt(en.data||en.element||en.needsCopy,"missing image data"),Bo(me),yn(en,pi+Je,hr,_r,$r),Ka(),qn(en),yr}function er(Je){var lr=Je|0;if(lr!==me.width){yr.width=me.width=lr,yr.height=me.height=lr,Bo(me);for(var De=0;De<6;++De)for(var Qe=0;me.mipmask>>Qe;++Qe)Lt.texImage2D(pi+De,Qe,me.format,lr>>Qe,lr>>Qe,0,me.format,me.type,null);return Ka(),zr.profile&&(me.stats.size=iu(me.internalformat,me.type,yr.width,yr.height,!1,!0)),yr}}return yr(ze,kr,Dr,Yn,Pa,Ie),yr.subimage=wr,yr.resize=er,yr._reglType="textureCube",yr._texture=me,zr.profile&&(yr.stats=me.stats),yr.destroy=function(){me.decRef()},yr}function xo(){for(var ze=0;ze<Po;++ze)Lt.activeTexture(Ta+ze),Lt.bindTexture(Mi,null),bo[ze]=null;Ra(Co).forEach(ia),Nr.cubeCount=0,Nr.textureCount=0}zr.profile&&(Nr.getTotalTextureSize=function(){var ze=0;return Object.keys(Co).forEach(function(kr){ze+=Co[kr].stats.size}),ze});function Ks(){for(var ze=0;ze<Po;++ze){var kr=bo[ze];kr&&(kr.bindCount=0,kr.unit=-1,bo[ze]=null)}Ra(Co).forEach(function(Dr){Dr.texture=Lt.createTexture(),Lt.bindTexture(Dr.target,Dr.texture);for(var Yn=0;Yn<32;++Yn)if(Dr.mipmask&1<<Yn)if(Dr.target===Mi)Lt.texImage2D(Mi,Yn,Dr.internalformat,Dr.width>>Yn,Dr.height>>Yn,0,Dr.internalformat,Dr.type,null);else for(var Pa=0;Pa<6;++Pa)Lt.texImage2D(pi+Pa,Yn,Dr.internalformat,Dr.width>>Yn,Dr.height>>Yn,0,Dr.internalformat,Dr.type,null);_i(Dr.texInfo,Dr.target)})}function cc(){for(var ze=0;ze<Po;++ze){var kr=bo[ze];kr&&(kr.bindCount=0,kr.unit=-1,bo[ze]=null),Lt.activeTexture(Ta+ze),Lt.bindTexture(Mi,null),Lt.bindTexture(Lo,null)}}return{create2D:Fa,createCube:Za,clear:xo,getTexture:function(ze){return null},restore:Ks,refresh:cc}}var Wn=36161,wu=32854,ja=32855,Mc=36194,Pl=33189,ou=36168,_c=34041,Cc=35907,Ll=34836,df=34842,hf=34843,gs=[];gs[wu]=2,gs[ja]=2,gs[Mc]=2,gs[Pl]=2,gs[ou]=1,gs[_c]=4,gs[Cc]=4,gs[Ll]=16,gs[df]=8,gs[hf]=6;function Tc(Lt,Se,We){return gs[Lt]*Se*We}var Ws=function(Lt,Se,We,Rr,qr){var Nr={rgba4:wu,rgb565:Mc,"rgb5 a1":ja,depth:Pl,stencil:ou,"depth stencil":_c};Se.ext_srgb&&(Nr.srgba=Cc),Se.ext_color_buffer_half_float&&(Nr.rgba16f=df,Nr.rgb16f=hf),Se.webgl_color_buffer_float&&(Nr.rgba32f=Ll);var zr=[];Object.keys(Nr).forEach(function(N){var $=Nr[N];zr[$]=N});var hn=0,gn={};function xn(N){this.id=hn++,this.refCount=1,this.renderbuffer=N,this.format=wu,this.width=0,this.height=0,qr.profile&&(this.stats={size:0})}xn.prototype.decRef=function(){--this.refCount<=0&&mn(this)};function mn(N){var $=N.renderbuffer;Tt($,"must not double destroy renderbuffer"),Lt.bindRenderbuffer(Wn,null),Lt.deleteRenderbuffer($),N.renderbuffer=null,N.refCount=0,delete gn[N.id],Rr.renderbufferCount--}function _n(N,$){var st=new xn(Lt.createRenderbuffer());gn[st.id]=st,Rr.renderbufferCount++;function vt(It,kt){var Vt=0,oe=0,Ee=wu;if(typeof It=="object"&&It){var ve=It;if("shape"in ve){var Ge=ve.shape;Tt(Array.isArray(Ge)&&Ge.length>=2,"invalid renderbuffer shape"),Vt=Ge[0]|0,oe=Ge[1]|0}else"radius"in ve&&(Vt=oe=ve.radius|0),"width"in ve&&(Vt=ve.width|0),"height"in ve&&(oe=ve.height|0);"format"in ve&&(Tt.parameter(ve.format,Nr,"invalid renderbuffer format"),Ee=Nr[ve.format])}else typeof It=="number"?(Vt=It|0,typeof kt=="number"?oe=kt|0:oe=Vt):It?Tt.raise("invalid arguments to renderbuffer constructor"):Vt=oe=1;if(Tt(Vt>0&&oe>0&&Vt<=We.maxRenderbufferSize&&oe<=We.maxRenderbufferSize,"invalid renderbuffer size"),!(Vt===st.width&&oe===st.height&&Ee===st.format))return vt.width=st.width=Vt,vt.height=st.height=oe,st.format=Ee,Lt.bindRenderbuffer(Wn,st.renderbuffer),Lt.renderbufferStorage(Wn,Ee,Vt,oe),Tt(Lt.getError()===0,"invalid render buffer format"),qr.profile&&(st.stats.size=Tc(st.format,st.width,st.height)),vt.format=zr[st.format],vt}function mt(It,kt){var Vt=It|0,oe=kt|0||Vt;return Vt===st.width&&oe===st.height||(Tt(Vt>0&&oe>0&&Vt<=We.maxRenderbufferSize&&oe<=We.maxRenderbufferSize,"invalid renderbuffer size"),vt.width=st.width=Vt,vt.height=st.height=oe,Lt.bindRenderbuffer(Wn,st.renderbuffer),Lt.renderbufferStorage(Wn,st.format,Vt,oe),Tt(Lt.getError()===0,"invalid render buffer format"),qr.profile&&(st.stats.size=Tc(st.format,st.width,st.height))),vt}return vt(N,$),vt.resize=mt,vt._reglType="renderbuffer",vt._renderbuffer=st,qr.profile&&(vt.stats=st.stats),vt.destroy=function(){st.decRef()},vt}qr.profile&&(Rr.getTotalRenderbufferSize=function(){var N=0;return Object.keys(gn).forEach(function($){N+=gn[$].stats.size}),N});function v(){Ra(gn).forEach(function(N){N.renderbuffer=Lt.createRenderbuffer(),Lt.bindRenderbuffer(Wn,N.renderbuffer),Lt.renderbufferStorage(Wn,N.format,N.width,N.height)}),Lt.bindRenderbuffer(Wn,null)}return{create:_n,clear:function(){Ra(gn).forEach(mn)},restore:v}},yo=36160,Ys=36161,Is=3553,Nl=34069,Ac=36064,vf=36096,pf=36128,gf=33306,Rl=36053,mf=36054,kl=36055,yf=36057,Oc=36061,tl=36193,Ic=5121,ss=5126,Dc=6407,el=6408,bf=6402,ad=[Dc,el],Pc=[];Pc[el]=4,Pc[Dc]=3;var rl=[];rl[Ic]=1,rl[ss]=4,rl[tl]=2;var id=32854,Lc=32855,Nc=36194,xf=33189,nl=36168,Su=34041,su=35907,Mu=34836,al=34842,Ss=34843,Ef=[id,Lc,Nc,su,al,Ss,Mu],_u={};_u[Rl]="complete",_u[mf]="incomplete attachment",_u[yf]="incomplete dimensions",_u[kl]="incomplete, missing attachment",_u[Oc]="unsupported";function od(Lt,Se,We,Rr,qr,Nr){var zr={cur:null,next:null,dirty:!1,setFBO:null},hn=["rgba"],gn=["rgba4","rgb565","rgb5 a1"];Se.ext_srgb&&gn.push("srgba"),Se.ext_color_buffer_half_float&&gn.push("rgba16f","rgb16f"),Se.webgl_color_buffer_float&&gn.push("rgba32f");var xn=["uint8"];Se.oes_texture_half_float&&xn.push("half float","float16"),Se.oes_texture_float&&xn.push("float","float32");function mn(dr,pr,gr){this.target=dr,this.texture=pr,this.renderbuffer=gr;var yn=0,Rn=0;pr?(yn=pr.width,Rn=pr.height):gr&&(yn=gr.width,Rn=gr.height),this.width=yn,this.height=Rn}function _n(dr){dr&&(dr.texture&&dr.texture._texture.decRef(),dr.renderbuffer&&dr.renderbuffer._renderbuffer.decRef())}function v(dr,pr,gr){if(dr)if(dr.texture){var yn=dr.texture._texture,Rn=Math.max(1,yn.width),Cn=Math.max(1,yn.height);Tt(Rn===pr&&Cn===gr,"inconsistent width/height for supplied texture"),yn.refCount+=1}else{var qn=dr.renderbuffer._renderbuffer;Tt(qn.width===pr&&qn.height===gr,"inconsistent width/height for renderbuffer"),qn.refCount+=1}}function N(dr,pr){pr&&(pr.texture?Lt.framebufferTexture2D(yo,dr,pr.target,pr.texture._texture.texture,0):Lt.framebufferRenderbuffer(yo,dr,Ys,pr.renderbuffer._renderbuffer.renderbuffer))}function $(dr){var pr=Is,gr=null,yn=null,Rn=dr;typeof dr=="object"&&(Rn=dr.data,"target"in dr&&(pr=dr.target|0)),Tt.type(Rn,"function","invalid attachment data");var Cn=Rn._reglType;return Cn==="texture2d"?(gr=Rn,Tt(pr===Is)):Cn==="textureCube"?(gr=Rn,Tt(pr>=Nl&&pr<Nl+6,"invalid cube map target")):Cn==="renderbuffer"?(yn=Rn,pr=Ys):Tt.raise("invalid regl object for attachment"),new mn(pr,gr,yn)}function st(dr,pr,gr,yn,Rn){if(gr){var Cn=Rr.create2D({width:dr,height:pr,format:yn,type:Rn});return Cn._texture.refCount=0,new mn(Is,Cn,null)}else{var qn=qr.create({width:dr,height:pr,format:yn});return qn._renderbuffer.refCount=0,new mn(Ys,null,qn)}}function vt(dr){return dr&&(dr.texture||dr.renderbuffer)}function mt(dr,pr,gr){dr&&(dr.texture?dr.texture.resize(pr,gr):dr.renderbuffer&&dr.renderbuffer.resize(pr,gr),dr.width=pr,dr.height=gr)}var It=0,kt={};function Vt(){this.id=It++,kt[this.id]=this,this.framebuffer=Lt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function oe(dr){dr.colorAttachments.forEach(_n),_n(dr.depthAttachment),_n(dr.stencilAttachment),_n(dr.depthStencilAttachment)}function Ee(dr){var pr=dr.framebuffer;Tt(pr,"must not double destroy framebuffer"),Lt.deleteFramebuffer(pr),dr.framebuffer=null,Nr.framebufferCount--,delete kt[dr.id]}function ve(dr){var pr;Lt.bindFramebuffer(yo,dr.framebuffer);var gr=dr.colorAttachments;for(pr=0;pr<gr.length;++pr)N(Ac+pr,gr[pr]);for(pr=gr.length;pr<We.maxColorAttachments;++pr)Lt.framebufferTexture2D(yo,Ac+pr,Is,null,0);Lt.framebufferTexture2D(yo,gf,Is,null,0),Lt.framebufferTexture2D(yo,vf,Is,null,0),Lt.framebufferTexture2D(yo,pf,Is,null,0),N(vf,dr.depthAttachment),N(pf,dr.stencilAttachment),N(gf,dr.depthStencilAttachment);var yn=Lt.checkFramebufferStatus(yo);!Lt.isContextLost()&&yn!==Rl&&Tt.raise("framebuffer configuration not supported, status = "+_u[yn]),Lt.bindFramebuffer(yo,zr.next?zr.next.framebuffer:null),zr.cur=zr.next,Lt.getError()}function Ge(dr,pr){var gr=new Vt;Nr.framebufferCount++;function yn(Cn,qn){var $n;Tt(zr.next!==gr,"can not update framebuffer which is currently in use");var aa=0,ga=0,da=!0,Ii=!0,ya=null,Ji=!0,mi="rgba",Ua="uint8",_i=1,to=null,Co=null,Po=null,bo=!1;if(typeof Cn=="number")aa=Cn|0,ga=qn|0||aa;else if(!Cn)aa=ga=1;else{Tt.type(Cn,"object","invalid arguments for framebuffer");var Ca=Cn;if("shape"in Ca){var Bo=Ca.shape;Tt(Array.isArray(Bo)&&Bo.length>=2,"invalid shape for framebuffer"),aa=Bo[0],ga=Bo[1]}else"radius"in Ca&&(aa=ga=Ca.radius),"width"in Ca&&(aa=Ca.width),"height"in Ca&&(ga=Ca.height);("color"in Ca||"colors"in Ca)&&(ya=Ca.color||Ca.colors,Array.isArray(ya)&&Tt(ya.length===1||Se.webgl_draw_buffers,"multiple render targets not supported")),ya||("colorCount"in Ca&&(_i=Ca.colorCount|0,Tt(_i>0,"invalid color buffer count")),"colorTexture"in Ca&&(Ji=!!Ca.colorTexture,mi="rgba4"),"colorType"in Ca&&(Ua=Ca.colorType,Ji?(Tt(Se.oes_texture_float||!(Ua==="float"||Ua==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Tt(Se.oes_texture_half_float||!(Ua==="half float"||Ua==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ua==="half float"||Ua==="float16"?(Tt(Se.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),mi="rgba16f"):(Ua==="float"||Ua==="float32")&&(Tt(Se.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),mi="rgba32f"),Tt.oneOf(Ua,xn,"invalid color type")),"colorFormat"in Ca&&(mi=Ca.colorFormat,hn.indexOf(mi)>=0?Ji=!0:gn.indexOf(mi)>=0?Ji=!1:Ji?Tt.oneOf(Ca.colorFormat,hn,"invalid color format for texture"):Tt.oneOf(Ca.colorFormat,gn,"invalid color format for renderbuffer"))),("depthTexture"in Ca||"depthStencilTexture"in Ca)&&(bo=!!(Ca.depthTexture||Ca.depthStencilTexture),Tt(!bo||Se.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ca&&(typeof Ca.depth=="boolean"?da=Ca.depth:(to=Ca.depth,Ii=!1)),"stencil"in Ca&&(typeof Ca.stencil=="boolean"?Ii=Ca.stencil:(Co=Ca.stencil,da=!1)),"depthStencil"in Ca&&(typeof Ca.depthStencil=="boolean"?da=Ii=Ca.depthStencil:(Po=Ca.depthStencil,da=!1,Ii=!1))}var Ka=null,ia=null,Fa=null,Za=null;if(Array.isArray(ya))Ka=ya.map($);else if(ya)Ka=[$(ya)];else for(Ka=new Array(_i),$n=0;$n<_i;++$n)Ka[$n]=st(aa,ga,Ji,mi,Ua);Tt(Se.webgl_draw_buffers||Ka.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Tt(Ka.length<=We.maxColorAttachments,"too many color attachments, not supported"),aa=aa||Ka[0].width,ga=ga||Ka[0].height,to?ia=$(to):da&&!Ii&&(ia=st(aa,ga,bo,"depth","uint32")),Co?Fa=$(Co):Ii&&!da&&(Fa=st(aa,ga,!1,"stencil","uint8")),Po?Za=$(Po):!to&&!Co&&Ii&&da&&(Za=st(aa,ga,bo,"depth stencil","depth stencil")),Tt(!!to+!!Co+!!Po<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var xo=null;for($n=0;$n<Ka.length;++$n)if(v(Ka[$n],aa,ga),Tt(!Ka[$n]||Ka[$n].texture&&ad.indexOf(Ka[$n].texture._texture.format)>=0||Ka[$n].renderbuffer&&Ef.indexOf(Ka[$n].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+$n+" is invalid"),Ka[$n]&&Ka[$n].texture){var Ks=Pc[Ka[$n].texture._texture.format]*rl[Ka[$n].texture._texture.type];xo===null?xo=Ks:Tt(xo===Ks,"all color attachments much have the same number of bits per pixel.")}return v(ia,aa,ga),Tt(!ia||ia.texture&&ia.texture._texture.format===bf||ia.renderbuffer&&ia.renderbuffer._renderbuffer.format===xf,"invalid depth attachment for framebuffer object"),v(Fa,aa,ga),Tt(!Fa||Fa.renderbuffer&&Fa.renderbuffer._renderbuffer.format===nl,"invalid stencil attachment for framebuffer object"),v(Za,aa,ga),Tt(!Za||Za.texture&&Za.texture._texture.format===Su||Za.renderbuffer&&Za.renderbuffer._renderbuffer.format===Su,"invalid depth-stencil attachment for framebuffer object"),oe(gr),gr.width=aa,gr.height=ga,gr.colorAttachments=Ka,gr.depthAttachment=ia,gr.stencilAttachment=Fa,gr.depthStencilAttachment=Za,yn.color=Ka.map(vt),yn.depth=vt(ia),yn.stencil=vt(Fa),yn.depthStencil=vt(Za),yn.width=gr.width,yn.height=gr.height,ve(gr),yn}function Rn(Cn,qn){Tt(zr.next!==gr,"can not resize a framebuffer which is currently in use");var $n=Math.max(Cn|0,1),aa=Math.max(qn|0||$n,1);if($n===gr.width&&aa===gr.height)return yn;for(var ga=gr.colorAttachments,da=0;da<ga.length;++da)mt(ga[da],$n,aa);return mt(gr.depthAttachment,$n,aa),mt(gr.stencilAttachment,$n,aa),mt(gr.depthStencilAttachment,$n,aa),gr.width=yn.width=$n,gr.height=yn.height=aa,ve(gr),yn}return yn(dr,pr),_(yn,{resize:Rn,_reglType:"framebuffer",_framebuffer:gr,destroy:function(){Ee(gr),oe(gr)},use:function(Cn){zr.setFBO({framebuffer:yn},Cn)}})}function ar(dr){var pr=Array(6);function gr(Rn){var Cn;Tt(pr.indexOf(zr.next)<0,"can not update framebuffer which is currently in use");var qn={color:null},$n=0,aa=null,ga="rgba",da="uint8",Ii=1;if(typeof Rn=="number")$n=Rn|0;else if(!Rn)$n=1;else{Tt.type(Rn,"object","invalid arguments for framebuffer");var ya=Rn;if("shape"in ya){var Ji=ya.shape;Tt(Array.isArray(Ji)&&Ji.length>=2,"invalid shape for framebuffer"),Tt(Ji[0]===Ji[1],"cube framebuffer must be square"),$n=Ji[0]}else"radius"in ya&&($n=ya.radius|0),"width"in ya?($n=ya.width|0,"height"in ya&&Tt(ya.height===$n,"must be square")):"height"in ya&&($n=ya.height|0);("color"in ya||"colors"in ya)&&(aa=ya.color||ya.colors,Array.isArray(aa)&&Tt(aa.length===1||Se.webgl_draw_buffers,"multiple render targets not supported")),aa||("colorCount"in ya&&(Ii=ya.colorCount|0,Tt(Ii>0,"invalid color buffer count")),"colorType"in ya&&(Tt.oneOf(ya.colorType,xn,"invalid color type"),da=ya.colorType),"colorFormat"in ya&&(ga=ya.colorFormat,Tt.oneOf(ya.colorFormat,hn,"invalid color format for texture"))),"depth"in ya&&(qn.depth=ya.depth),"stencil"in ya&&(qn.stencil=ya.stencil),"depthStencil"in ya&&(qn.depthStencil=ya.depthStencil)}var mi;if(aa)if(Array.isArray(aa))for(mi=[],Cn=0;Cn<aa.length;++Cn)mi[Cn]=aa[Cn];else mi=[aa];else{mi=Array(Ii);var Ua={radius:$n,format:ga,type:da};for(Cn=0;Cn<Ii;++Cn)mi[Cn]=Rr.createCube(Ua)}for(qn.color=Array(mi.length),Cn=0;Cn<mi.length;++Cn){var _i=mi[Cn];Tt(typeof _i=="function"&&_i._reglType==="textureCube","invalid cube map"),$n=$n||_i.width,Tt(_i.width===$n&&_i.height===$n,"invalid cube map shape"),qn.color[Cn]={target:Nl,data:mi[Cn]}}for(Cn=0;Cn<6;++Cn){for(var to=0;to<mi.length;++to)qn.color[to].target=Nl+Cn;Cn>0&&(qn.depth=pr[0].depth,qn.stencil=pr[0].stencil,qn.depthStencil=pr[0].depthStencil),pr[Cn]?pr[Cn](qn):pr[Cn]=Ge(qn)}return _(gr,{width:$n,height:$n,color:mi})}function yn(Rn){var Cn,qn=Rn|0;if(Tt(qn>0&&qn<=We.maxCubeMapSize,"invalid radius for cube fbo"),qn===gr.width)return gr;var $n=gr.color;for(Cn=0;Cn<$n.length;++Cn)$n[Cn].resize(qn);for(Cn=0;Cn<6;++Cn)pr[Cn].resize(qn);return gr.width=gr.height=qn,gr}return gr(dr),_(gr,{faces:pr,resize:yn,_reglType:"framebufferCube",destroy:function(){pr.forEach(function(Rn){Rn.destroy()})}})}function Ur(){zr.cur=null,zr.next=null,zr.dirty=!0,Ra(kt).forEach(function(dr){dr.framebuffer=Lt.createFramebuffer(),ve(dr)})}return _(zr,{getFramebuffer:function(dr){if(typeof dr=="function"&&dr._reglType==="framebuffer"){var pr=dr._framebuffer;if(pr instanceof Vt)return pr}return null},create:Ge,createCube:ar,clear:function(){Ra(kt).forEach(Ee)},restore:Ur})}var sd=5126,Bl=34962;function Rc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=sd,this.offset=0,this.stride=0,this.divisor=0}function ud(Lt,Se,We,Rr,qr){for(var Nr=We.maxAttributes,zr=new Array(Nr),hn=0;hn<Nr;++hn)zr[hn]=new Rc;var gn=0,xn={},mn={Record:Rc,scope:{},state:zr,currentVAO:null,targetVAO:null,restore:v()?kt:function(){},createVAO:Vt,getVAO:$,destroyBuffer:_n,setVAO:v()?st:vt,clear:v()?mt:function(){}};function _n(oe){for(var Ee=0;Ee<zr.length;++Ee){var ve=zr[Ee];ve.buffer===oe&&(Lt.disableVertexAttribArray(Ee),ve.buffer=null)}}function v(){return Se.oes_vertex_array_object}function N(){return Se.angle_instanced_arrays}function $(oe){return typeof oe=="function"&&oe._vao?oe._vao:null}function st(oe){if(oe!==mn.currentVAO){var Ee=v();oe?Ee.bindVertexArrayOES(oe.vao):Ee.bindVertexArrayOES(null),mn.currentVAO=oe}}function vt(oe){if(oe!==mn.currentVAO){if(oe)oe.bindAttrs();else for(var Ee=N(),ve=0;ve<zr.length;++ve){var Ge=zr[ve];Ge.buffer?(Lt.enableVertexAttribArray(ve),Lt.vertexAttribPointer(ve,Ge.size,Ge.type,Ge.normalized,Ge.stride,Ge.offfset),Ee&&Ge.divisor&&Ee.vertexAttribDivisorANGLE(ve,Ge.divisor)):(Lt.disableVertexAttribArray(ve),Lt.vertexAttrib4f(ve,Ge.x,Ge.y,Ge.z,Ge.w))}mn.currentVAO=oe}}function mt(){Ra(xn).forEach(function(oe){oe.destroy()})}function It(){this.id=++gn,this.attributes=[];var oe=v();oe?this.vao=oe.createVertexArrayOES():this.vao=null,xn[this.id]=this,this.buffers=[]}It.prototype.bindAttrs=function(){for(var oe=N(),Ee=this.attributes,ve=0;ve<Ee.length;++ve){var Ge=Ee[ve];Ge.buffer?(Lt.enableVertexAttribArray(ve),Lt.bindBuffer(Bl,Ge.buffer.buffer),Lt.vertexAttribPointer(ve,Ge.size,Ge.type,Ge.normalized,Ge.stride,Ge.offset),oe&&Ge.divisor&&oe.vertexAttribDivisorANGLE(ve,Ge.divisor)):(Lt.disableVertexAttribArray(ve),Lt.vertexAttrib4f(ve,Ge.x,Ge.y,Ge.z,Ge.w))}for(var ar=Ee.length;ar<Nr;++ar)Lt.disableVertexAttribArray(ar)},It.prototype.refresh=function(){var oe=v();oe&&(oe.bindVertexArrayOES(this.vao),this.bindAttrs(),mn.currentVAO=this)},It.prototype.destroy=function(){if(this.vao){var oe=v();this===mn.currentVAO&&(mn.currentVAO=null,oe.bindVertexArrayOES(null)),oe.deleteVertexArrayOES(this.vao),this.vao=null}xn[this.id]&&(delete xn[this.id],Rr.vaoCount-=1)};function kt(){var oe=v();oe&&Ra(xn).forEach(function(Ee){Ee.refresh()})}function Vt(oe){var Ee=new It;Rr.vaoCount+=1;function ve(Ge){Tt(Array.isArray(Ge),"arguments to vertex array constructor must be an array"),Tt(Ge.length<Nr,"too many attributes"),Tt(Ge.length>0,"must specify at least one attribute");var ar={},Ur=Ee.attributes;Ur.length=Ge.length;for(var dr=0;dr<Ge.length;++dr){var pr=Ge[dr],gr=Ur[dr]=new Rc,yn=pr.data||pr;if(Array.isArray(yn)||G(yn)||Na(yn)){var Rn;Ee.buffers[dr]&&(Rn=Ee.buffers[dr],G(yn)&&Rn._buffer.byteLength>=yn.byteLength?Rn.subdata(yn):(Rn.destroy(),Ee.buffers[dr]=null)),Ee.buffers[dr]||(Rn=Ee.buffers[dr]=qr.create(pr,Bl,!1,!0)),gr.buffer=qr.getBuffer(Rn),gr.size=gr.buffer.dimension|0,gr.normalized=!1,gr.type=gr.buffer.dtype,gr.offset=0,gr.stride=0,gr.divisor=0,gr.state=1,ar[dr]=1}else qr.getBuffer(pr)?(gr.buffer=qr.getBuffer(pr),gr.size=gr.buffer.dimension|0,gr.normalized=!1,gr.type=gr.buffer.dtype,gr.offset=0,gr.stride=0,gr.divisor=0,gr.state=1):qr.getBuffer(pr.buffer)?(gr.buffer=qr.getBuffer(pr.buffer),gr.size=(+pr.size||gr.buffer.dimension)|0,gr.normalized=!!pr.normalized||!1,"type"in pr?(Tt.parameter(pr.type,Ti,"invalid buffer type"),gr.type=Ti[pr.type]):gr.type=gr.buffer.dtype,gr.offset=(pr.offset||0)|0,gr.stride=(pr.stride||0)|0,gr.divisor=(pr.divisor||0)|0,gr.state=1,Tt(gr.size>=1&&gr.size<=4,"size must be between 1 and 4"),Tt(gr.offset>=0,"invalid offset"),Tt(gr.stride>=0&&gr.stride<=255,"stride must be between 0 and 255"),Tt(gr.divisor>=0,"divisor must be positive"),Tt(!gr.divisor||!!Se.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in pr?(Tt(dr>0,"first attribute must not be a constant"),gr.x=+pr.x||0,gr.y=+pr.y||0,gr.z=+pr.z||0,gr.w=+pr.w||0,gr.state=2):Tt(!1,"invalid attribute spec for location "+dr)}for(var Cn=0;Cn<Ee.buffers.length;++Cn)!ar[Cn]&&Ee.buffers[Cn]&&(Ee.buffers[Cn].destroy(),Ee.buffers[Cn]=null);return Ee.refresh(),ve}return ve.destroy=function(){for(var Ge=0;Ge<Ee.buffers.length;++Ge)Ee.buffers[Ge]&&Ee.buffers[Ge].destroy();Ee.buffers.length=0,Ee.destroy()},ve._vao=Ee,ve._reglType="vao",ve(oe)}return mn}var il=35632,wf=35633,ld=35718,Sf=35721;function Mf(Lt,Se,We,Rr){var qr={},Nr={};function zr(st,vt,mt,It){this.name=st,this.id=vt,this.location=mt,this.info=It}function hn(st,vt){for(var mt=0;mt<st.length;++mt)if(st[mt].id===vt.id){st[mt].location=vt.location;return}st.push(vt)}function gn(st,vt,mt){var It=st===il?qr:Nr,kt=It[vt];if(!kt){var Vt=Se.str(vt);kt=Lt.createShader(st),Lt.shaderSource(kt,Vt),Lt.compileShader(kt),Tt.shaderError(Lt,kt,Vt,st,mt),It[vt]=kt}return kt}var xn={},mn=[],_n=0;function v(st,vt){this.id=_n++,this.fragId=st,this.vertId=vt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Rr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function N(st,vt,mt){var It,kt,Vt=gn(il,st.fragId),oe=gn(wf,st.vertId),Ee=st.program=Lt.createProgram();if(Lt.attachShader(Ee,Vt),Lt.attachShader(Ee,oe),mt)for(It=0;It<mt.length;++It){var ve=mt[It];Lt.bindAttribLocation(Ee,ve[0],ve[1])}Lt.linkProgram(Ee),Tt.linkError(Lt,Ee,Se.str(st.fragId),Se.str(st.vertId),vt);var Ge=Lt.getProgramParameter(Ee,ld);Rr.profile&&(st.stats.uniformsCount=Ge);var ar=st.uniforms;for(It=0;It<Ge;++It)if(kt=Lt.getActiveUniform(Ee,It),kt)if(kt.size>1)for(var Ur=0;Ur<kt.size;++Ur){var dr=kt.name.replace("[0]","["+Ur+"]");hn(ar,new zr(dr,Se.id(dr),Lt.getUniformLocation(Ee,dr),kt))}else hn(ar,new zr(kt.name,Se.id(kt.name),Lt.getUniformLocation(Ee,kt.name),kt));var pr=Lt.getProgramParameter(Ee,Sf);Rr.profile&&(st.stats.attributesCount=pr);var gr=st.attributes;for(It=0;It<pr;++It)kt=Lt.getActiveAttrib(Ee,It),kt&&hn(gr,new zr(kt.name,Se.id(kt.name),Lt.getAttribLocation(Ee,kt.name),kt))}Rr.profile&&(We.getMaxUniformsCount=function(){var st=0;return mn.forEach(function(vt){vt.stats.uniformsCount>st&&(st=vt.stats.uniformsCount)}),st},We.getMaxAttributesCount=function(){var st=0;return mn.forEach(function(vt){vt.stats.attributesCount>st&&(st=vt.stats.attributesCount)}),st});function $(){qr={},Nr={};for(var st=0;st<mn.length;++st)N(mn[st],null,mn[st].attributes.map(function(vt){return[vt.location,vt.name]}))}return{clear:function(){var st=Lt.deleteShader.bind(Lt);Ra(qr).forEach(st),qr={},Ra(Nr).forEach(st),Nr={},mn.forEach(function(vt){Lt.deleteProgram(vt.program)}),mn.length=0,xn={},We.shaderCount=0},program:function(st,vt,mt,It){Tt.command(st>=0,"missing vertex shader",mt),Tt.command(vt>=0,"missing fragment shader",mt);var kt=xn[vt];kt||(kt=xn[vt]={});var Vt=kt[st];if(Vt&&(Vt.refCount++,!It))return Vt;var oe=new v(vt,st);return We.shaderCount++,N(oe,mt,It),Vt||(kt[st]=oe),mn.push(oe),_(oe,{destroy:function(){if(oe.refCount--,oe.refCount<=0){Lt.deleteProgram(oe.program);var Ee=mn.indexOf(oe);mn.splice(Ee,1),We.shaderCount--}kt[oe.vertId].refCount<=0&&(Lt.deleteShader(Nr[oe.vertId]),delete Nr[oe.vertId],delete xn[oe.fragId][oe.vertId]),Object.keys(xn[oe.fragId]).length||(Lt.deleteShader(qr[oe.fragId]),delete qr[oe.fragId],delete xn[oe.fragId])}})},restore:$,shader:gn,frag:-1,vert:-1}}var ol=6408,Cu=5121,Tu=3333,Fl=5126;function zl(Lt,Se,We,Rr,qr,Nr,zr){function hn(mn){var _n;Se.next===null?(Tt(qr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),_n=Cu):(Tt(Se.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),_n=Se.next.colorAttachments[0].texture._texture.type,Nr.oes_texture_float?(Tt(_n===Cu||_n===Fl,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),_n===Fl&&Tt(zr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Tt(_n===Cu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,N=0,$=Rr.framebufferWidth,st=Rr.framebufferHeight,vt=null;G(mn)?vt=mn:mn&&(Tt.type(mn,"object","invalid arguments to regl.read()"),v=mn.x|0,N=mn.y|0,Tt(v>=0&&v<Rr.framebufferWidth,"invalid x offset for regl.read"),Tt(N>=0&&N<Rr.framebufferHeight,"invalid y offset for regl.read"),$=(mn.width||Rr.framebufferWidth-v)|0,st=(mn.height||Rr.framebufferHeight-N)|0,vt=mn.data||null),vt&&(_n===Cu?Tt(vt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):_n===Fl&&Tt(vt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Tt($>0&&$+v<=Rr.framebufferWidth,"invalid width for read pixels"),Tt(st>0&&st+N<=Rr.framebufferHeight,"invalid height for read pixels"),We();var mt=$*st*4;return vt||(_n===Cu?vt=new Uint8Array(mt):_n===Fl&&(vt=vt||new Float32Array(mt))),Tt.isTypedArray(vt,"data buffer for regl.read() must be a typedarray"),Tt(vt.byteLength>=mt,"data buffer for regl.read() too small"),Lt.pixelStorei(Tu,4),Lt.readPixels(v,N,$,st,ol,_n,vt),vt}function gn(mn){var _n;return Se.setFBO({framebuffer:mn.framebuffer},function(){_n=hn(mn)}),_n}function xn(mn){return!mn||!("framebuffer"in mn)?hn(mn):gn(mn)}return xn}function Ao(Lt){return Array.prototype.slice.call(Lt)}function uu(Lt){return Ao(Lt).join("")}function _f(){var Lt=0,Se=[],We=[];function Rr(_n){for(var v=0;v<We.length;++v)if(We[v]===_n)return Se[v];var N="g"+Lt++;return Se.push(N),We.push(_n),N}function qr(){var _n=[];function v(){_n.push.apply(_n,Ao(arguments))}var N=[];function $(){var st="v"+Lt++;return N.push(st),arguments.length>0&&(_n.push(st,"="),_n.push.apply(_n,Ao(arguments)),_n.push(";")),st}return _(v,{def:$,toString:function(){return uu([N.length>0?"var "+N.join(",")+";":"",uu(_n)])}})}function Nr(){var _n=qr(),v=qr(),N=_n.toString,$=v.toString;function st(vt,mt){v(vt,mt,"=",_n.def(vt,mt),";")}return _(function(){_n.apply(_n,Ao(arguments))},{def:_n.def,entry:_n,exit:v,save:st,set:function(vt,mt,It){st(vt,mt),_n(vt,mt,"=",It,";")},toString:function(){return N()+$()}})}function zr(){var _n=uu(arguments),v=Nr(),N=Nr(),$=v.toString,st=N.toString;return _(v,{then:function(){return v.apply(v,Ao(arguments)),this},else:function(){return N.apply(N,Ao(arguments)),this},toString:function(){var vt=st();return vt&&(vt="else{"+vt+"}"),uu(["if(",_n,"){",$(),"}",vt])}})}var hn=qr(),gn={};function xn(_n,v){var N=[];function $(){var kt="a"+N.length;return N.push(kt),kt}v=v||0;for(var st=0;st<v;++st)$();var vt=Nr(),mt=vt.toString,It=gn[_n]=_(vt,{arg:$,toString:function(){return uu(["function(",N.join(),"){",mt(),"}"])}});return It}function mn(){var _n=['"use strict";',hn,"return {"];Object.keys(gn).forEach(function($){_n.push('"',$,'":',gn[$].toString(),",")}),_n.push("}");var v=uu(_n).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),N=Function.apply(null,Se.concat(v));return N.apply(null,We)}return{global:hn,link:Rr,block:qr,proc:xn,scope:Nr,cond:zr,compile:mn}}var lu="xyzw".split(""),sl=5121,us=1,Ds=2,Gl=0,Ul=1,kc=2,rs=3,ul=4,ll=5,Wl=6,Bc="dither",Cf="blend.enable",Tf="blend.color",cl="blend.equation",Yl="blend.func",Af="depth.enable",cd="depth.func",Of="depth.range",Au="depth.mask",Xl="colorMask",qe="cull.enable",fd="cull.face",fl="frontFace",dl="lineWidth",Fc="polygonOffset.enable",zc="polygonOffset.offset",Gc="sample.alpha",If="sample.enable",cu="sample.coverage",jl="stencil.enable",hl="stencil.mask",Ou="stencil.func",_o="stencil.opFront",Iu="stencil.opBack",Uc="scissor.enable",Xs="scissor.box",Ms="viewport",Du="profile",fu="framebuffer",Ps="vert",Pu="frag",du="elements",js="primitive",Ls="count",Vl="offset",Hl="instances",Lu="vao",Zl="Width",Kl="Height",Nu=fu+Zl,ls=fu+Kl,$l=Ms+Zl,Ns=Ms+Kl,Ql="drawingBuffer",Wc=Ql+Zl,ql=Ql+Kl,Df=[Yl,cl,Ou,_o,Iu,cu,Ms,Xs,zc],hu=34962,Yc=34963,Jl=35632,dd=35633,Pf=3553,Lf=34067,hd=2884,Nf=3042,Rf=3024,vd=2960,kf=2929,vl=3089,Bf=32823,Ru=32926,Xc=32928,vu=5126,tc=35664,ec=35665,pl=35666,Vs=5124,ku=35667,Bu=35668,gl=35669,rc=35670,nc=35671,ml=35672,ac=35673,ic=35674,yl=35675,Fu=35676,zu=35678,Gu=35680,Ff=4,bl=1028,pu=1029,zf=2304,xl=2305,pd=32775,Gf=32776,Ud=519,Rs=7680,Uf=0,Wf=1,Yf=32774,Xf=513,jc=36160,gd=36064,ko={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Vc=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Uu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ks={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},jf={frag:Jl,vert:dd},oc={cw:zf,ccw:xl};function El(Lt){return Array.isArray(Lt)||G(Lt)||Na(Lt)}function ms(Lt){return Lt.sort(function(Se,We){return Se===Ms?-1:We===Ms?1:Se<We?-1:1})}function Xo(Lt,Se,We,Rr){this.thisDep=Lt,this.contextDep=Se,this.propDep=We,this.append=Rr}function Bs(Lt){return Lt&&!(Lt.thisDep||Lt.contextDep||Lt.propDep)}function oo(Lt){return new Xo(!1,!1,!1,Lt)}function gi(Lt,Se){var We=Lt.type;if(We===Gl){var Rr=Lt.data.length;return new Xo(!0,Rr>=1,Rr>=2,Se)}else if(We===ul){var qr=Lt.data;return new Xo(qr.thisDep,qr.contextDep,qr.propDep,Se)}else{if(We===ll)return new Xo(!1,!1,!1,Se);if(We===Wl){for(var Nr=!1,zr=!1,hn=!1,gn=0;gn<Lt.data.length;++gn){var xn=Lt.data[gn];if(xn.type===Ul)hn=!0;else if(xn.type===kc)zr=!0;else if(xn.type===rs)Nr=!0;else if(xn.type===Gl){Nr=!0;var mn=xn.data;mn>=1&&(zr=!0),mn>=2&&(hn=!0)}else xn.type===ul&&(Nr=Nr||xn.data.thisDep,zr=zr||xn.data.contextDep,hn=hn||xn.data.propDep)}return new Xo(Nr,zr,hn,Se)}else return new Xo(We===rs,We===kc,We===Ul,Se)}}var gu=new Xo(!1,!1,!1,function(){});function Wu(Lt,Se,We,Rr,qr,Nr,zr,hn,gn,xn,mn,_n,v,N,$){var st=xn.Record,vt={add:32774,subtract:32778,"reverse subtract":32779};We.ext_blend_minmax&&(vt.min=pd,vt.max=Gf);var mt=We.angle_instanced_arrays,It=We.webgl_draw_buffers,kt={dirty:!0,profile:$.profile},Vt={},oe=[],Ee={},ve={};function Ge(Ie){return Ie.replace(".","_")}function ar(Ie,me,$e){var yr=Ge(Ie);oe.push(Ie),Vt[yr]=kt[yr]=!!$e,Ee[yr]=me}function Ur(Ie,me,$e){var yr=Ge(Ie);oe.push(Ie),Array.isArray($e)?(kt[yr]=$e.slice(),Vt[yr]=$e.slice()):kt[yr]=Vt[yr]=$e,ve[yr]=me}ar(Bc,Rf),ar(Cf,Nf),Ur(Tf,"blendColor",[0,0,0,0]),Ur(cl,"blendEquationSeparate",[Yf,Yf]),Ur(Yl,"blendFuncSeparate",[Wf,Uf,Wf,Uf]),ar(Af,kf,!0),Ur(cd,"depthFunc",Xf),Ur(Of,"depthRange",[0,1]),Ur(Au,"depthMask",!0),Ur(Xl,Xl,[!0,!0,!0,!0]),ar(qe,hd),Ur(fd,"cullFace",pu),Ur(fl,fl,xl),Ur(dl,dl,1),ar(Fc,Bf),Ur(zc,"polygonOffset",[0,0]),ar(Gc,Ru),ar(If,Xc),Ur(cu,"sampleCoverage",[1,!1]),ar(jl,vd),Ur(hl,"stencilMask",-1),Ur(Ou,"stencilFunc",[Ud,0,-1]),Ur(_o,"stencilOpSeparate",[bl,Rs,Rs,Rs]),Ur(Iu,"stencilOpSeparate",[pu,Rs,Rs,Rs]),ar(Uc,vl),Ur(Xs,"scissor",[0,0,Lt.drawingBufferWidth,Lt.drawingBufferHeight]),Ur(Ms,Ms,[0,0,Lt.drawingBufferWidth,Lt.drawingBufferHeight]);var dr={gl:Lt,context:v,strings:Se,next:Vt,current:kt,draw:_n,elements:Nr,buffer:qr,shader:mn,attributes:xn.state,vao:xn,uniforms:gn,framebuffer:hn,extensions:We,timer:N,isBufferArgs:El},pr={primTypes:xa,compareFuncs:Uu,blendFuncs:ko,blendEquations:vt,stencilOps:ks,glTypes:Ti,orientationType:oc};Tt.optional(function(){dr.isArrayLike=Sa}),It&&(pr.backBuffer=[pu],pr.drawBuffer=bn(Rr.maxDrawbuffers,function(Ie){return Ie===0?[0]:bn(Ie,function(me){return gd+me})}));var gr=0;function yn(){var Ie=_f(),me=Ie.link,$e=Ie.global;Ie.id=gr++,Ie.batchId="0";var yr=me(dr),wr=Ie.shared={props:"a0"};Object.keys(dr).forEach(function(Qe){wr[Qe]=$e.def(yr,".",Qe)}),Tt.optional(function(){Ie.CHECK=me(Tt),Ie.commandStr=Tt.guessCommand(),Ie.command=me(Ie.commandStr),Ie.assert=function(Qe,Ce,hr){Qe("if(!(",Ce,"))",this.CHECK,".commandRaise(",me(hr),",",this.command,");")},pr.invalidBlendCombinations=Vc});var er=Ie.next={},Je=Ie.current={};Object.keys(ve).forEach(function(Qe){Array.isArray(kt[Qe])&&(er[Qe]=$e.def(wr.next,".",Qe),Je[Qe]=$e.def(wr.current,".",Qe))});var lr=Ie.constants={};Object.keys(pr).forEach(function(Qe){lr[Qe]=$e.def(JSON.stringify(pr[Qe]))}),Ie.invoke=function(Qe,Ce){switch(Ce.type){case Gl:var hr=["this",wr.context,wr.props,Ie.batchId];return Qe.def(me(Ce.data),".call(",hr.slice(0,Math.max(Ce.data.length+1,4)),")");case Ul:return Qe.def(wr.props,Ce.data);case kc:return Qe.def(wr.context,Ce.data);case rs:return Qe.def("this",Ce.data);case ul:return Ce.data.append(Ie,Qe),Ce.data.ref;case ll:return Ce.data.toString();case Wl:return Ce.data.map(function(_r){return Ie.invoke(Qe,_r)})}},Ie.attribCache={};var De={};return Ie.scopeAttrib=function(Qe){var Ce=Se.id(Qe);if(Ce in De)return De[Ce];var hr=xn.scope[Ce];hr||(hr=xn.scope[Ce]=new st);var _r=De[Ce]=me(hr);return _r},Ie}function Rn(Ie){var me=Ie.static,$e=Ie.dynamic,yr;if(Du in me){var wr=!!me[Du];yr=oo(function(Je,lr){return wr}),yr.enable=wr}else if(Du in $e){var er=$e[Du];yr=gi(er,function(Je,lr){return Je.invoke(lr,er)})}return yr}function Cn(Ie,me){var $e=Ie.static,yr=Ie.dynamic;if(fu in $e){var wr=$e[fu];return wr?(wr=hn.getFramebuffer(wr),Tt.command(wr,"invalid framebuffer object"),oo(function(Je,lr){var De=Je.link(wr),Qe=Je.shared;lr.set(Qe.framebuffer,".next",De);var Ce=Qe.context;return lr.set(Ce,"."+Nu,De+".width"),lr.set(Ce,"."+ls,De+".height"),De})):oo(function(Je,lr){var De=Je.shared;lr.set(De.framebuffer,".next","null");var Qe=De.context;return lr.set(Qe,"."+Nu,Qe+"."+Wc),lr.set(Qe,"."+ls,Qe+"."+ql),"null"})}else if(fu in yr){var er=yr[fu];return gi(er,function(Je,lr){var De=Je.invoke(lr,er),Qe=Je.shared,Ce=Qe.framebuffer,hr=lr.def(Ce,".getFramebuffer(",De,")");Tt.optional(function(){Je.assert(lr,"!"+De+"||"+hr,"invalid framebuffer object")}),lr.set(Ce,".next",hr);var _r=Qe.context;return lr.set(_r,"."+Nu,hr+"?"+hr+".width:"+_r+"."+Wc),lr.set(_r,"."+ls,hr+"?"+hr+".height:"+_r+"."+ql),hr})}else return null}function qn(Ie,me,$e){var yr=Ie.static,wr=Ie.dynamic;function er(De){if(De in yr){var Qe=yr[De];Tt.commandType(Qe,"object","invalid "+De,$e.commandStr);var Ce=!0,hr=Qe.x|0,_r=Qe.y|0,$r,en;return"width"in Qe?($r=Qe.width|0,Tt.command($r>=0,"invalid "+De,$e.commandStr)):Ce=!1,"height"in Qe?(en=Qe.height|0,Tt.command(en>=0,"invalid "+De,$e.commandStr)):Ce=!1,new Xo(!Ce&&me&&me.thisDep,!Ce&&me&&me.contextDep,!Ce&&me&&me.propDep,function(ea,Aa){var Zn=ea.shared.context,la=$r;"width"in Qe||(la=Aa.def(Zn,".",Nu,"-",hr));var Ma=en;return"height"in Qe||(Ma=Aa.def(Zn,".",ls,"-",_r)),[hr,_r,la,Ma]})}else if(De in wr){var Wr=wr[De],En=gi(Wr,function(ea,Aa){var Zn=ea.invoke(Aa,Wr);Tt.optional(function(){ea.assert(Aa,Zn+"&&typeof "+Zn+'==="object"',"invalid "+De)});var la=ea.shared.context,Ma=Aa.def(Zn,".x|0"),ti=Aa.def(Zn,".y|0"),Zi=Aa.def('"width" in ',Zn,"?",Zn,".width|0:","(",la,".",Nu,"-",Ma,")"),ns=Aa.def('"height" in ',Zn,"?",Zn,".height|0:","(",la,".",ls,"-",ti,")");return Tt.optional(function(){ea.assert(Aa,Zi+">=0&&"+ns+">=0","invalid "+De)}),[Ma,ti,Zi,ns]});return me&&(En.thisDep=En.thisDep||me.thisDep,En.contextDep=En.contextDep||me.contextDep,En.propDep=En.propDep||me.propDep),En}else return me?new Xo(me.thisDep,me.contextDep,me.propDep,function(ea,Aa){var Zn=ea.shared.context;return[0,0,Aa.def(Zn,".",Nu),Aa.def(Zn,".",ls)]}):null}var Je=er(Ms);if(Je){var lr=Je;Je=new Xo(Je.thisDep,Je.contextDep,Je.propDep,function(De,Qe){var Ce=lr.append(De,Qe),hr=De.shared.context;return Qe.set(hr,"."+$l,Ce[2]),Qe.set(hr,"."+Ns,Ce[3]),Ce})}return{viewport:Je,scissor_box:er(Xs)}}function $n(Ie,me){var $e=Ie.static,yr=typeof $e[Pu]=="string"&&typeof $e[Ps]=="string";if(yr){if(Object.keys(me.dynamic).length>0)return null;var wr=me.static,er=Object.keys(wr);if(er.length>0&&typeof wr[er[0]]=="number"){for(var Je=[],lr=0;lr<er.length;++lr)Tt(typeof wr[er[lr]]=="number","must specify all vertex attribute locations when using vaos"),Je.push([wr[er[lr]]|0,er[lr]]);return Je}}return null}function aa(Ie,me,$e){var yr=Ie.static,wr=Ie.dynamic;function er(Ce){if(Ce in yr){var hr=Se.id(yr[Ce]);Tt.optional(function(){mn.shader(jf[Ce],hr,Tt.guessCommand())});var _r=oo(function(){return hr});return _r.id=hr,_r}else if(Ce in wr){var $r=wr[Ce];return gi($r,function(en,Wr){var En=en.invoke(Wr,$r),ea=Wr.def(en.shared.strings,".id(",En,")");return Tt.optional(function(){Wr(en.shared.shader,".shader(",jf[Ce],",",ea,",",en.command,");")}),ea})}return null}var Je=er(Pu),lr=er(Ps),De=null,Qe;return Bs(Je)&&Bs(lr)?(De=mn.program(lr.id,Je.id,null,$e),Qe=oo(function(Ce,hr){return Ce.link(De)})):Qe=new Xo(Je&&Je.thisDep||lr&&lr.thisDep,Je&&Je.contextDep||lr&&lr.contextDep,Je&&Je.propDep||lr&&lr.propDep,function(Ce,hr){var _r=Ce.shared.shader,$r;Je?$r=Je.append(Ce,hr):$r=hr.def(_r,".",Pu);var en;lr?en=lr.append(Ce,hr):en=hr.def(_r,".",Ps);var Wr=_r+".program("+en+","+$r;return Tt.optional(function(){Wr+=","+Ce.command}),hr.def(Wr+")")}),{frag:Je,vert:lr,progVar:Qe,program:De}}function ga(Ie,me){var $e=Ie.static,yr=Ie.dynamic;function wr(){if(du in $e){var Ce=$e[du];El(Ce)?Ce=Nr.getElements(Nr.create(Ce,!0)):Ce&&(Ce=Nr.getElements(Ce),Tt.command(Ce,"invalid elements",me.commandStr));var hr=oo(function($r,en){if(Ce){var Wr=$r.link(Ce);return $r.ELEMENTS=Wr,Wr}return $r.ELEMENTS=null,null});return hr.value=Ce,hr}else if(du in yr){var _r=yr[du];return gi(_r,function($r,en){var Wr=$r.shared,En=Wr.isBufferArgs,ea=Wr.elements,Aa=$r.invoke(en,_r),Zn=en.def("null"),la=en.def(En,"(",Aa,")"),Ma=$r.cond(la).then(Zn,"=",ea,".createStream(",Aa,");").else(Zn,"=",ea,".getElements(",Aa,");");return Tt.optional(function(){$r.assert(Ma.else,"!"+Aa+"||"+Zn,"invalid elements")}),en.entry(Ma),en.exit($r.cond(la).then(ea,".destroyStream(",Zn,");")),$r.ELEMENTS=Zn,Zn})}return null}var er=wr();function Je(){if(js in $e){var Ce=$e[js];return Tt.commandParameter(Ce,xa,"invalid primitve",me.commandStr),oo(function(_r,$r){return xa[Ce]})}else if(js in yr){var hr=yr[js];return gi(hr,function(_r,$r){var en=_r.constants.primTypes,Wr=_r.invoke($r,hr);return Tt.optional(function(){_r.assert($r,Wr+" in "+en,"invalid primitive, must be one of "+Object.keys(xa))}),$r.def(en,"[",Wr,"]")})}else if(er)return Bs(er)?er.value?oo(function(_r,$r){return $r.def(_r.ELEMENTS,".primType")}):oo(function(){return Ff}):new Xo(er.thisDep,er.contextDep,er.propDep,function(_r,$r){var en=_r.ELEMENTS;return $r.def(en,"?",en,".primType:",Ff)});return null}function lr(Ce,hr){if(Ce in $e){var _r=$e[Ce]|0;return Tt.command(!hr||_r>=0,"invalid "+Ce,me.commandStr),oo(function(en,Wr){return hr&&(en.OFFSET=_r),_r})}else if(Ce in yr){var $r=yr[Ce];return gi($r,function(en,Wr){var En=en.invoke(Wr,$r);return hr&&(en.OFFSET=En,Tt.optional(function(){en.assert(Wr,En+">=0","invalid "+Ce)})),En})}else if(hr&&er)return oo(function(en,Wr){return en.OFFSET="0",0});return null}var De=lr(Vl,!0);function Qe(){if(Ls in $e){var Ce=$e[Ls]|0;return Tt.command(typeof Ce=="number"&&Ce>=0,"invalid vertex count",me.commandStr),oo(function(){return Ce})}else if(Ls in yr){var hr=yr[Ls];return gi(hr,function(en,Wr){var En=en.invoke(Wr,hr);return Tt.optional(function(){en.assert(Wr,"typeof "+En+'==="number"&&'+En+">=0&&"+En+"===("+En+"|0)","invalid vertex count")}),En})}else if(er)if(Bs(er)){if(er)return De?new Xo(De.thisDep,De.contextDep,De.propDep,function(en,Wr){var En=Wr.def(en.ELEMENTS,".vertCount-",en.OFFSET);return Tt.optional(function(){en.assert(Wr,En+">=0","invalid vertex offset/element buffer too small")}),En}):oo(function(en,Wr){return Wr.def(en.ELEMENTS,".vertCount")});var _r=oo(function(){return-1});return Tt.optional(function(){_r.MISSING=!0}),_r}else{var $r=new Xo(er.thisDep||De.thisDep,er.contextDep||De.contextDep,er.propDep||De.propDep,function(en,Wr){var En=en.ELEMENTS;return en.OFFSET?Wr.def(En,"?",En,".vertCount-",en.OFFSET,":-1"):Wr.def(En,"?",En,".vertCount:-1")});return Tt.optional(function(){$r.DYNAMIC=!0}),$r}return null}return{elements:er,primitive:Je(),count:Qe(),instances:lr(Hl,!1),offset:De}}function da(Ie,me){var $e=Ie.static,yr=Ie.dynamic,wr={};return oe.forEach(function(er){var Je=Ge(er);function lr(De,Qe){if(er in $e){var Ce=De($e[er]);wr[Je]=oo(function(){return Ce})}else if(er in yr){var hr=yr[er];wr[Je]=gi(hr,function(_r,$r){return Qe(_r,$r,_r.invoke($r,hr))})}}switch(er){case qe:case Cf:case Bc:case jl:case Af:case Uc:case Fc:case Gc:case If:case Au:return lr(function(De){return Tt.commandType(De,"boolean",er,me.commandStr),De},function(De,Qe,Ce){return Tt.optional(function(){De.assert(Qe,"typeof "+Ce+'==="boolean"',"invalid flag "+er,De.commandStr)}),Ce});case cd:return lr(function(De){return Tt.commandParameter(De,Uu,"invalid "+er,me.commandStr),Uu[De]},function(De,Qe,Ce){var hr=De.constants.compareFuncs;return Tt.optional(function(){De.assert(Qe,Ce+" in "+hr,"invalid "+er+", must be one of "+Object.keys(Uu))}),Qe.def(hr,"[",Ce,"]")});case Of:return lr(function(De){return Tt.command(Sa(De)&&De.length===2&&typeof De[0]=="number"&&typeof De[1]=="number"&&De[0]<=De[1],"depth range is 2d array",me.commandStr),De},function(De,Qe,Ce){Tt.optional(function(){De.assert(Qe,De.shared.isArrayLike+"("+Ce+")&&"+Ce+".length===2&&typeof "+Ce+'[0]==="number"&&typeof '+Ce+'[1]==="number"&&'+Ce+"[0]<="+Ce+"[1]","depth range must be a 2d array")});var hr=Qe.def("+",Ce,"[0]"),_r=Qe.def("+",Ce,"[1]");return[hr,_r]});case Yl:return lr(function(De){Tt.commandType(De,"object","blend.func",me.commandStr);var Qe="srcRGB"in De?De.srcRGB:De.src,Ce="srcAlpha"in De?De.srcAlpha:De.src,hr="dstRGB"in De?De.dstRGB:De.dst,_r="dstAlpha"in De?De.dstAlpha:De.dst;return Tt.commandParameter(Qe,ko,Je+".srcRGB",me.commandStr),Tt.commandParameter(Ce,ko,Je+".srcAlpha",me.commandStr),Tt.commandParameter(hr,ko,Je+".dstRGB",me.commandStr),Tt.commandParameter(_r,ko,Je+".dstAlpha",me.commandStr),Tt.command(Vc.indexOf(Qe+", "+hr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Qe+", "+hr+")",me.commandStr),[ko[Qe],ko[hr],ko[Ce],ko[_r]]},function(De,Qe,Ce){var hr=De.constants.blendFuncs;Tt.optional(function(){De.assert(Qe,Ce+"&&typeof "+Ce+'==="object"',"invalid blend func, must be an object")});function _r(Zn,la){var Ma=Qe.def('"',Zn,la,'" in ',Ce,"?",Ce,".",Zn,la,":",Ce,".",Zn);return Tt.optional(function(){De.assert(Qe,Ma+" in "+hr,"invalid "+er+"."+Zn+la+", must be one of "+Object.keys(ko))}),Ma}var $r=_r("src","RGB"),en=_r("dst","RGB");Tt.optional(function(){var Zn=De.constants.invalidBlendCombinations;De.assert(Qe,Zn+".indexOf("+$r+'+", "+'+en+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Wr=Qe.def(hr,"[",$r,"]"),En=Qe.def(hr,"[",_r("src","Alpha"),"]"),ea=Qe.def(hr,"[",en,"]"),Aa=Qe.def(hr,"[",_r("dst","Alpha"),"]");return[Wr,ea,En,Aa]});case cl:return lr(function(De){if(typeof De=="string")return Tt.commandParameter(De,vt,"invalid "+er,me.commandStr),[vt[De],vt[De]];if(typeof De=="object")return Tt.commandParameter(De.rgb,vt,er+".rgb",me.commandStr),Tt.commandParameter(De.alpha,vt,er+".alpha",me.commandStr),[vt[De.rgb],vt[De.alpha]];Tt.commandRaise("invalid blend.equation",me.commandStr)},function(De,Qe,Ce){var hr=De.constants.blendEquations,_r=Qe.def(),$r=Qe.def(),en=De.cond("typeof ",Ce,'==="string"');return Tt.optional(function(){function Wr(En,ea,Aa){De.assert(En,Aa+" in "+hr,"invalid "+ea+", must be one of "+Object.keys(vt))}Wr(en.then,er,Ce),De.assert(en.else,Ce+"&&typeof "+Ce+'==="object"',"invalid "+er),Wr(en.else,er+".rgb",Ce+".rgb"),Wr(en.else,er+".alpha",Ce+".alpha")}),en.then(_r,"=",$r,"=",hr,"[",Ce,"];"),en.else(_r,"=",hr,"[",Ce,".rgb];",$r,"=",hr,"[",Ce,".alpha];"),Qe(en),[_r,$r]});case Tf:return lr(function(De){return Tt.command(Sa(De)&&De.length===4,"blend.color must be a 4d array",me.commandStr),bn(4,function(Qe){return+De[Qe]})},function(De,Qe,Ce){return Tt.optional(function(){De.assert(Qe,De.shared.isArrayLike+"("+Ce+")&&"+Ce+".length===4","blend.color must be a 4d array")}),bn(4,function(hr){return Qe.def("+",Ce,"[",hr,"]")})});case hl:return lr(function(De){return Tt.commandType(De,"number",Je,me.commandStr),De|0},function(De,Qe,Ce){return Tt.optional(function(){De.assert(Qe,"typeof "+Ce+'==="number"',"invalid stencil.mask")}),Qe.def(Ce,"|0")});case Ou:return lr(function(De){Tt.commandType(De,"object",Je,me.commandStr);var Qe=De.cmp||"keep",Ce=De.ref||0,hr="mask"in De?De.mask:-1;return Tt.commandParameter(Qe,Uu,er+".cmp",me.commandStr),Tt.commandType(Ce,"number",er+".ref",me.commandStr),Tt.commandType(hr,"number",er+".mask",me.commandStr),[Uu[Qe],Ce,hr]},function(De,Qe,Ce){var hr=De.constants.compareFuncs;Tt.optional(function(){function Wr(){De.assert(Qe,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Wr(Ce+"&&typeof ",Ce,'==="object"'),Wr('!("cmp" in ',Ce,")||(",Ce,".cmp in ",hr,")")});var _r=Qe.def('"cmp" in ',Ce,"?",hr,"[",Ce,".cmp]",":",Rs),$r=Qe.def(Ce,".ref|0"),en=Qe.def('"mask" in ',Ce,"?",Ce,".mask|0:-1");return[_r,$r,en]});case _o:case Iu:return lr(function(De){Tt.commandType(De,"object",Je,me.commandStr);var Qe=De.fail||"keep",Ce=De.zfail||"keep",hr=De.zpass||"keep";return Tt.commandParameter(Qe,ks,er+".fail",me.commandStr),Tt.commandParameter(Ce,ks,er+".zfail",me.commandStr),Tt.commandParameter(hr,ks,er+".zpass",me.commandStr),[er===Iu?pu:bl,ks[Qe],ks[Ce],ks[hr]]},function(De,Qe,Ce){var hr=De.constants.stencilOps;Tt.optional(function(){De.assert(Qe,Ce+"&&typeof "+Ce+'==="object"',"invalid "+er)});function _r($r){return Tt.optional(function(){De.assert(Qe,'!("'+$r+'" in '+Ce+")||("+Ce+"."+$r+" in "+hr+")","invalid "+er+"."+$r+", must be one of "+Object.keys(ks))}),Qe.def('"',$r,'" in ',Ce,"?",hr,"[",Ce,".",$r,"]:",Rs)}return[er===Iu?pu:bl,_r("fail"),_r("zfail"),_r("zpass")]});case zc:return lr(function(De){Tt.commandType(De,"object",Je,me.commandStr);var Qe=De.factor|0,Ce=De.units|0;return Tt.commandType(Qe,"number",Je+".factor",me.commandStr),Tt.commandType(Ce,"number",Je+".units",me.commandStr),[Qe,Ce]},function(De,Qe,Ce){Tt.optional(function(){De.assert(Qe,Ce+"&&typeof "+Ce+'==="object"',"invalid "+er)});var hr=Qe.def(Ce,".factor|0"),_r=Qe.def(Ce,".units|0");return[hr,_r]});case fd:return lr(function(De){var Qe=0;return De==="front"?Qe=bl:De==="back"&&(Qe=pu),Tt.command(!!Qe,Je,me.commandStr),Qe},function(De,Qe,Ce){return Tt.optional(function(){De.assert(Qe,Ce+'==="front"||'+Ce+'==="back"',"invalid cull.face")}),Qe.def(Ce,'==="front"?',bl,":",pu)});case dl:return lr(function(De){return Tt.command(typeof De=="number"&&De>=Rr.lineWidthDims[0]&&De<=Rr.lineWidthDims[1],"invalid line width, must be a positive number between "+Rr.lineWidthDims[0]+" and "+Rr.lineWidthDims[1],me.commandStr),De},function(De,Qe,Ce){return Tt.optional(function(){De.assert(Qe,"typeof "+Ce+'==="number"&&'+Ce+">="+Rr.lineWidthDims[0]+"&&"+Ce+"<="+Rr.lineWidthDims[1],"invalid line width")}),Ce});case fl:return lr(function(De){return Tt.commandParameter(De,oc,Je,me.commandStr),oc[De]},function(De,Qe,Ce){return Tt.optional(function(){De.assert(Qe,Ce+'==="cw"||'+Ce+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Qe.def(Ce+'==="cw"?'+zf+":"+xl)});case Xl:return lr(function(De){return Tt.command(Sa(De)&&De.length===4,"color.mask must be length 4 array",me.commandStr),De.map(function(Qe){return!!Qe})},function(De,Qe,Ce){return Tt.optional(function(){De.assert(Qe,De.shared.isArrayLike+"("+Ce+")&&"+Ce+".length===4","invalid color.mask")}),bn(4,function(hr){return"!!"+Ce+"["+hr+"]"})});case cu:return lr(function(De){Tt.command(typeof De=="object"&&De,Je,me.commandStr);var Qe="value"in De?De.value:1,Ce=!!De.invert;return Tt.command(typeof Qe=="number"&&Qe>=0&&Qe<=1,"sample.coverage.value must be a number between 0 and 1",me.commandStr),[Qe,Ce]},function(De,Qe,Ce){Tt.optional(function(){De.assert(Qe,Ce+"&&typeof "+Ce+'==="object"',"invalid sample.coverage")});var hr=Qe.def('"value" in ',Ce,"?+",Ce,".value:1"),_r=Qe.def("!!",Ce,".invert");return[hr,_r]})}}),wr}function Ii(Ie,me){var $e=Ie.static,yr=Ie.dynamic,wr={};return Object.keys($e).forEach(function(er){var Je=$e[er],lr;if(typeof Je=="number"||typeof Je=="boolean")lr=oo(function(){return Je});else if(typeof Je=="function"){var De=Je._reglType;De==="texture2d"||De==="textureCube"?lr=oo(function(Qe){return Qe.link(Je)}):De==="framebuffer"||De==="framebufferCube"?(Tt.command(Je.color.length>0,'missing color attachment for framebuffer sent to uniform "'+er+'"',me.commandStr),lr=oo(function(Qe){return Qe.link(Je.color[0])})):Tt.commandRaise('invalid data for uniform "'+er+'"',me.commandStr)}else Sa(Je)?lr=oo(function(Qe){var Ce=Qe.global.def("[",bn(Je.length,function(hr){return Tt.command(typeof Je[hr]=="number"||typeof Je[hr]=="boolean","invalid uniform "+er,Qe.commandStr),Je[hr]}),"]");return Ce}):Tt.commandRaise('invalid or missing data for uniform "'+er+'"',me.commandStr);lr.value=Je,wr[er]=lr}),Object.keys(yr).forEach(function(er){var Je=yr[er];wr[er]=gi(Je,function(lr,De){return lr.invoke(De,Je)})}),wr}function ya(Ie,me){var $e=Ie.static,yr=Ie.dynamic,wr={};return Object.keys($e).forEach(function(er){var Je=$e[er],lr=Se.id(er),De=new st;if(El(Je))De.state=us,De.buffer=qr.getBuffer(qr.create(Je,hu,!1,!0)),De.type=0;else{var Qe=qr.getBuffer(Je);if(Qe)De.state=us,De.buffer=Qe,De.type=0;else if(Tt.command(typeof Je=="object"&&Je,"invalid data for attribute "+er,me.commandStr),"constant"in Je){var Ce=Je.constant;De.buffer="null",De.state=Ds,typeof Ce=="number"?De.x=Ce:(Tt.command(Sa(Ce)&&Ce.length>0&&Ce.length<=4,"invalid constant for attribute "+er,me.commandStr),lu.forEach(function(ea,Aa){Aa<Ce.length&&(De[ea]=Ce[Aa])}))}else{El(Je.buffer)?Qe=qr.getBuffer(qr.create(Je.buffer,hu,!1,!0)):Qe=qr.getBuffer(Je.buffer),Tt.command(!!Qe,'missing buffer for attribute "'+er+'"',me.commandStr);var hr=Je.offset|0;Tt.command(hr>=0,'invalid offset for attribute "'+er+'"',me.commandStr);var _r=Je.stride|0;Tt.command(_r>=0&&_r<256,'invalid stride for attribute "'+er+'", must be integer betweeen [0, 255]',me.commandStr);var $r=Je.size|0;Tt.command(!("size"in Je)||$r>0&&$r<=4,'invalid size for attribute "'+er+'", must be 1,2,3,4',me.commandStr);var en=!!Je.normalized,Wr=0;"type"in Je&&(Tt.commandParameter(Je.type,Ti,"invalid type for attribute "+er,me.commandStr),Wr=Ti[Je.type]);var En=Je.divisor|0;"divisor"in Je&&(Tt.command(En===0||mt,'cannot specify divisor for attribute "'+er+'", instancing not supported',me.commandStr),Tt.command(En>=0,'invalid divisor for attribute "'+er+'"',me.commandStr)),Tt.optional(function(){var ea=me.commandStr,Aa=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Je).forEach(function(Zn){Tt.command(Aa.indexOf(Zn)>=0,'unknown parameter "'+Zn+'" for attribute pointer "'+er+'" (valid parameters are '+Aa+")",ea)})}),De.buffer=Qe,De.state=us,De.size=$r,De.normalized=en,De.type=Wr||Qe.dtype,De.offset=hr,De.stride=_r,De.divisor=En}}wr[er]=oo(function(ea,Aa){var Zn=ea.attribCache;if(lr in Zn)return Zn[lr];var la={isStream:!1};return Object.keys(De).forEach(function(Ma){la[Ma]=De[Ma]}),De.buffer&&(la.buffer=ea.link(De.buffer),la.type=la.type||la.buffer+".dtype"),Zn[lr]=la,la})}),Object.keys(yr).forEach(function(er){var Je=yr[er];function lr(De,Qe){var Ce=De.invoke(Qe,Je),hr=De.shared,_r=De.constants,$r=hr.isBufferArgs,en=hr.buffer;Tt.optional(function(){De.assert(Qe,Ce+"&&(typeof "+Ce+'==="object"||typeof '+Ce+'==="function")&&('+$r+"("+Ce+")||"+en+".getBuffer("+Ce+")||"+en+".getBuffer("+Ce+".buffer)||"+$r+"("+Ce+'.buffer)||("constant" in '+Ce+"&&(typeof "+Ce+'.constant==="number"||'+hr.isArrayLike+"("+Ce+".constant))))",'invalid dynamic attribute "'+er+'"')});var Wr={isStream:Qe.def(!1)},En=new st;En.state=us,Object.keys(En).forEach(function(la){Wr[la]=Qe.def(""+En[la])});var ea=Wr.buffer,Aa=Wr.type;Qe("if(",$r,"(",Ce,")){",Wr.isStream,"=true;",ea,"=",en,".createStream(",hu,",",Ce,");",Aa,"=",ea,".dtype;","}else{",ea,"=",en,".getBuffer(",Ce,");","if(",ea,"){",Aa,"=",ea,".dtype;",'}else if("constant" in ',Ce,"){",Wr.state,"=",Ds,";","if(typeof "+Ce+'.constant === "number"){',Wr[lu[0]],"=",Ce,".constant;",lu.slice(1).map(function(la){return Wr[la]}).join("="),"=0;","}else{",lu.map(function(la,Ma){return Wr[la]+"="+Ce+".constant.length>"+Ma+"?"+Ce+".constant["+Ma+"]:0;"}).join(""),"}}else{","if(",$r,"(",Ce,".buffer)){",ea,"=",en,".createStream(",hu,",",Ce,".buffer);","}else{",ea,"=",en,".getBuffer(",Ce,".buffer);","}",Aa,'="type" in ',Ce,"?",_r.glTypes,"[",Ce,".type]:",ea,".dtype;",Wr.normalized,"=!!",Ce,".normalized;");function Zn(la){Qe(Wr[la],"=",Ce,".",la,"|0;")}return Zn("size"),Zn("offset"),Zn("stride"),Zn("divisor"),Qe("}}"),Qe.exit("if(",Wr.isStream,"){",en,".destroyStream(",ea,");","}"),Wr}wr[er]=gi(Je,lr)}),wr}function Ji(Ie,me){var $e=Ie.static,yr=Ie.dynamic;if(Lu in $e){var wr=$e[Lu];return wr!==null&&xn.getVAO(wr)===null&&(wr=xn.createVAO(wr)),oo(function(Je){return Je.link(xn.getVAO(wr))})}else if(Lu in yr){var er=yr[Lu];return gi(er,function(Je,lr){var De=Je.invoke(lr,er);return lr.def(Je.shared.vao+".getVAO("+De+")")})}return null}function mi(Ie){var me=Ie.static,$e=Ie.dynamic,yr={};return Object.keys(me).forEach(function(wr){var er=me[wr];yr[wr]=oo(function(Je,lr){return typeof er=="number"||typeof er=="boolean"?""+er:Je.link(er)})}),Object.keys($e).forEach(function(wr){var er=$e[wr];yr[wr]=gi(er,function(Je,lr){return Je.invoke(lr,er)})}),yr}function Ua(Ie,me,$e,yr,wr){var er=Ie.static,Je=Ie.dynamic;Tt.optional(function(){var Zn=[fu,Ps,Pu,du,js,Vl,Ls,Hl,Du,Lu].concat(oe);function la(Ma){Object.keys(Ma).forEach(function(ti){Tt.command(Zn.indexOf(ti)>=0,'unknown parameter "'+ti+'"',wr.commandStr)})}la(er),la(Je)});var lr=$n(Ie,me),De=Cn(Ie,wr),Qe=qn(Ie,De,wr),Ce=ga(Ie,wr),hr=da(Ie,wr),_r=aa(Ie,wr,lr);function $r(Zn){var la=Qe[Zn];la&&(hr[Zn]=la)}$r(Ms),$r(Ge(Xs));var en=Object.keys(hr).length>0,Wr={framebuffer:De,draw:Ce,shader:_r,state:hr,dirty:en,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Wr.profile=Rn(Ie,wr),Wr.uniforms=Ii($e,wr),Wr.drawVAO=Wr.scopeVAO=Ji(Ie,wr),!Wr.drawVAO&&_r.program&&!lr&&We.angle_instanced_arrays){var En=!0,ea=_r.program.attributes.map(function(Zn){var la=me.static[Zn];return En=En&&!!la,la});if(En&&ea.length>0){var Aa=xn.getVAO(xn.createVAO(ea));Wr.drawVAO=new Xo(null,null,null,function(Zn,la){return Zn.link(Aa)}),Wr.useVAO=!0}}return lr?Wr.useVAO=!0:Wr.attributes=ya(me,wr),Wr.context=mi(yr,wr),Wr}function _i(Ie,me,$e){var yr=Ie.shared,wr=yr.context,er=Ie.scope();Object.keys($e).forEach(function(Je){me.save(wr,"."+Je);var lr=$e[Je],De=lr.append(Ie,me);Array.isArray(De)?er(wr,".",Je,"=[",De.join(),"];"):er(wr,".",Je,"=",De,";")}),me(er)}function to(Ie,me,$e,yr){var wr=Ie.shared,er=wr.gl,Je=wr.framebuffer,lr;It&&(lr=me.def(wr.extensions,".webgl_draw_buffers"));var De=Ie.constants,Qe=De.drawBuffer,Ce=De.backBuffer,hr;$e?hr=$e.append(Ie,me):hr=me.def(Je,".next"),yr||me("if(",hr,"!==",Je,".cur){"),me("if(",hr,"){",er,".bindFramebuffer(",jc,",",hr,".framebuffer);"),It&&me(lr,".drawBuffersWEBGL(",Qe,"[",hr,".colorAttachments.length]);"),me("}else{",er,".bindFramebuffer(",jc,",null);"),It&&me(lr,".drawBuffersWEBGL(",Ce,");"),me("}",Je,".cur=",hr,";"),yr||me("}")}function Co(Ie,me,$e){var yr=Ie.shared,wr=yr.gl,er=Ie.current,Je=Ie.next,lr=yr.current,De=yr.next,Qe=Ie.cond(lr,".dirty");oe.forEach(function(Ce){var hr=Ge(Ce);if(!(hr in $e.state)){var _r,$r;if(hr in Je){_r=Je[hr],$r=er[hr];var en=bn(kt[hr].length,function(En){return Qe.def(_r,"[",En,"]")});Qe(Ie.cond(en.map(function(En,ea){return En+"!=="+$r+"["+ea+"]"}).join("||")).then(wr,".",ve[hr],"(",en,");",en.map(function(En,ea){return $r+"["+ea+"]="+En}).join(";"),";"))}else{_r=Qe.def(De,".",hr);var Wr=Ie.cond(_r,"!==",lr,".",hr);Qe(Wr),hr in Ee?Wr(Ie.cond(_r).then(wr,".enable(",Ee[hr],");").else(wr,".disable(",Ee[hr],");"),lr,".",hr,"=",_r,";"):Wr(wr,".",ve[hr],"(",_r,");",lr,".",hr,"=",_r,";")}}}),Object.keys($e.state).length===0&&Qe(lr,".dirty=false;"),me(Qe)}function Po(Ie,me,$e,yr){var wr=Ie.shared,er=Ie.current,Je=wr.current,lr=wr.gl;ms(Object.keys($e)).forEach(function(De){var Qe=$e[De];if(!(yr&&!yr(Qe))){var Ce=Qe.append(Ie,me);if(Ee[De]){var hr=Ee[De];Bs(Qe)?Ce?me(lr,".enable(",hr,");"):me(lr,".disable(",hr,");"):me(Ie.cond(Ce).then(lr,".enable(",hr,");").else(lr,".disable(",hr,");")),me(Je,".",De,"=",Ce,";")}else if(Sa(Ce)){var _r=er[De];me(lr,".",ve[De],"(",Ce,");",Ce.map(function($r,en){return _r+"["+en+"]="+$r}).join(";"),";")}else me(lr,".",ve[De],"(",Ce,");",Je,".",De,"=",Ce,";")}})}function bo(Ie,me){mt&&(Ie.instancing=me.def(Ie.shared.extensions,".angle_instanced_arrays"))}function Ca(Ie,me,$e,yr,wr){var er=Ie.shared,Je=Ie.stats,lr=er.current,De=er.timer,Qe=$e.profile;function Ce(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var hr,_r;function $r(Zn){hr=me.def(),Zn(hr,"=",Ce(),";"),typeof wr=="string"?Zn(Je,".count+=",wr,";"):Zn(Je,".count++;"),N&&(yr?(_r=me.def(),Zn(_r,"=",De,".getNumPendingQueries();")):Zn(De,".beginQuery(",Je,");"))}function en(Zn){Zn(Je,".cpuTime+=",Ce(),"-",hr,";"),N&&(yr?Zn(De,".pushScopeStats(",_r,",",De,".getNumPendingQueries(),",Je,");"):Zn(De,".endQuery();"))}function Wr(Zn){var la=me.def(lr,".profile");me(lr,".profile=",Zn,";"),me.exit(lr,".profile=",la,";")}var En;if(Qe){if(Bs(Qe)){Qe.enable?($r(me),en(me.exit),Wr("true")):Wr("false");return}En=Qe.append(Ie,me),Wr(En)}else En=me.def(lr,".profile");var ea=Ie.block();$r(ea),me("if(",En,"){",ea,"}");var Aa=Ie.block();en(Aa),me.exit("if(",En,"){",Aa,"}")}function Bo(Ie,me,$e,yr,wr){var er=Ie.shared;function Je(De){switch(De){case tc:case ku:case nc:return 2;case ec:case Bu:case ml:return 3;case pl:case gl:case ac:return 4;default:return 1}}function lr(De,Qe,Ce){var hr=er.gl,_r=me.def(De,".location"),$r=me.def(er.attributes,"[",_r,"]"),en=Ce.state,Wr=Ce.buffer,En=[Ce.x,Ce.y,Ce.z,Ce.w],ea=["buffer","normalized","offset","stride"];function Aa(){me("if(!",$r,".buffer){",hr,".enableVertexAttribArray(",_r,");}");var la=Ce.type,Ma;if(Ce.size?Ma=me.def(Ce.size,"||",Qe):Ma=Qe,me("if(",$r,".type!==",la,"||",$r,".size!==",Ma,"||",ea.map(function(Zi){return $r+"."+Zi+"!=="+Ce[Zi]}).join("||"),"){",hr,".bindBuffer(",hu,",",Wr,".buffer);",hr,".vertexAttribPointer(",[_r,Ma,la,Ce.normalized,Ce.stride,Ce.offset],");",$r,".type=",la,";",$r,".size=",Ma,";",ea.map(function(Zi){return $r+"."+Zi+"="+Ce[Zi]+";"}).join(""),"}"),mt){var ti=Ce.divisor;me("if(",$r,".divisor!==",ti,"){",Ie.instancing,".vertexAttribDivisorANGLE(",[_r,ti],");",$r,".divisor=",ti,";}")}}function Zn(){me("if(",$r,".buffer){",hr,".disableVertexAttribArray(",_r,");",$r,".buffer=null;","}if(",lu.map(function(la,Ma){return $r+"."+la+"!=="+En[Ma]}).join("||"),"){",hr,".vertexAttrib4f(",_r,",",En,");",lu.map(function(la,Ma){return $r+"."+la+"="+En[Ma]+";"}).join(""),"}")}en===us?Aa():en===Ds?Zn():(me("if(",en,"===",us,"){"),Aa(),me("}else{"),Zn(),me("}"))}yr.forEach(function(De){var Qe=De.name,Ce=$e.attributes[Qe],hr;if(Ce){if(!wr(Ce))return;hr=Ce.append(Ie,me)}else{if(!wr(gu))return;var _r=Ie.scopeAttrib(Qe);Tt.optional(function(){Ie.assert(me,_r+".state","missing attribute "+Qe)}),hr={},Object.keys(new st).forEach(function($r){hr[$r]=me.def(_r,".",$r)})}lr(Ie.link(De),Je(De.info.type),hr)})}function Ka(Ie,me,$e,yr,wr){for(var er=Ie.shared,Je=er.gl,lr,De=0;De<yr.length;++De){var Qe=yr[De],Ce=Qe.name,hr=Qe.info.type,_r=$e.uniforms[Ce],$r=Ie.link(Qe),en=$r+".location",Wr;if(_r){if(!wr(_r))continue;if(Bs(_r)){var En=_r.value;if(Tt.command(En!==null&&typeof En!="undefined",'missing uniform "'+Ce+'"',Ie.commandStr),hr===zu||hr===Gu){Tt.command(typeof En=="function"&&(hr===zu&&(En._reglType==="texture2d"||En._reglType==="framebuffer")||hr===Gu&&(En._reglType==="textureCube"||En._reglType==="framebufferCube")),"invalid texture for uniform "+Ce,Ie.commandStr);var ea=Ie.link(En._texture||En.color[0]._texture);me(Je,".uniform1i(",en,",",ea+".bind());"),me.exit(ea,".unbind();")}else if(hr===ic||hr===yl||hr===Fu){Tt.optional(function(){Tt.command(Sa(En),"invalid matrix for uniform "+Ce,Ie.commandStr),Tt.command(hr===ic&&En.length===4||hr===yl&&En.length===9||hr===Fu&&En.length===16,"invalid length for matrix uniform "+Ce,Ie.commandStr)});var Aa=Ie.global.def("new Float32Array(["+Array.prototype.slice.call(En)+"])"),Zn=2;hr===yl?Zn=3:hr===Fu&&(Zn=4),me(Je,".uniformMatrix",Zn,"fv(",en,",false,",Aa,");")}else{switch(hr){case vu:Tt.commandType(En,"number","uniform "+Ce,Ie.commandStr),lr="1f";break;case tc:Tt.command(Sa(En)&&En.length===2,"uniform "+Ce,Ie.commandStr),lr="2f";break;case ec:Tt.command(Sa(En)&&En.length===3,"uniform "+Ce,Ie.commandStr),lr="3f";break;case pl:Tt.command(Sa(En)&&En.length===4,"uniform "+Ce,Ie.commandStr),lr="4f";break;case rc:Tt.commandType(En,"boolean","uniform "+Ce,Ie.commandStr),lr="1i";break;case Vs:Tt.commandType(En,"number","uniform "+Ce,Ie.commandStr),lr="1i";break;case nc:Tt.command(Sa(En)&&En.length===2,"uniform "+Ce,Ie.commandStr),lr="2i";break;case ku:Tt.command(Sa(En)&&En.length===2,"uniform "+Ce,Ie.commandStr),lr="2i";break;case ml:Tt.command(Sa(En)&&En.length===3,"uniform "+Ce,Ie.commandStr),lr="3i";break;case Bu:Tt.command(Sa(En)&&En.length===3,"uniform "+Ce,Ie.commandStr),lr="3i";break;case ac:Tt.command(Sa(En)&&En.length===4,"uniform "+Ce,Ie.commandStr),lr="4i";break;case gl:Tt.command(Sa(En)&&En.length===4,"uniform "+Ce,Ie.commandStr),lr="4i";break}me(Je,".uniform",lr,"(",en,",",Sa(En)?Array.prototype.slice.call(En):En,");")}continue}else Wr=_r.append(Ie,me)}else{if(!wr(gu))continue;Wr=me.def(er.uniforms,"[",Se.id(Ce),"]")}hr===zu?(Tt(!Array.isArray(Wr),"must specify a scalar prop for textures"),me("if(",Wr,"&&",Wr,'._reglType==="framebuffer"){',Wr,"=",Wr,".color[0];","}")):hr===Gu&&(Tt(!Array.isArray(Wr),"must specify a scalar prop for cube maps"),me("if(",Wr,"&&",Wr,'._reglType==="framebufferCube"){',Wr,"=",Wr,".color[0];","}")),Tt.optional(function(){function ns(Fs,Kf){Ie.assert(me,Fs,'bad data or missing for uniform "'+Ce+'".  '+Kf)}function bd(Fs){Tt(!Array.isArray(Wr),"must not specify an array type for uniform"),ns("typeof "+Wr+'==="'+Fs+'"',"invalid type, expected "+Fs)}function _s(Fs,Kf){Array.isArray(Wr)?Tt(Wr.length===Fs,"must have length "+Fs):ns(er.isArrayLike+"("+Wr+")&&"+Wr+".length==="+Fs,"invalid vector, should have length "+Fs,Ie.commandStr)}function Ch(Fs){Tt(!Array.isArray(Wr),"must not specify a value type"),ns("typeof "+Wr+'==="function"&&'+Wr+'._reglType==="texture'+(Fs===Pf?"2d":"Cube")+'"',"invalid texture type",Ie.commandStr)}switch(hr){case Vs:bd("number");break;case ku:_s(2,"number");break;case Bu:_s(3,"number");break;case gl:_s(4,"number");break;case vu:bd("number");break;case tc:_s(2,"number");break;case ec:_s(3,"number");break;case pl:_s(4,"number");break;case rc:bd("boolean");break;case nc:_s(2,"boolean");break;case ml:_s(3,"boolean");break;case ac:_s(4,"boolean");break;case ic:_s(4,"number");break;case yl:_s(9,"number");break;case Fu:_s(16,"number");break;case zu:Ch(Pf);break;case Gu:Ch(Lf);break}});var la=1;switch(hr){case zu:case Gu:var Ma=me.def(Wr,"._texture");me(Je,".uniform1i(",en,",",Ma,".bind());"),me.exit(Ma,".unbind();");continue;case Vs:case rc:lr="1i";break;case ku:case nc:lr="2i",la=2;break;case Bu:case ml:lr="3i",la=3;break;case gl:case ac:lr="4i",la=4;break;case vu:lr="1f";break;case tc:lr="2f",la=2;break;case ec:lr="3f",la=3;break;case pl:lr="4f",la=4;break;case ic:lr="Matrix2fv";break;case yl:lr="Matrix3fv";break;case Fu:lr="Matrix4fv";break}if(me(Je,".uniform",lr,"(",en,","),lr.charAt(0)==="M"){var ti=Math.pow(hr-ic+2,2),Zi=Ie.global.def("new Float32Array(",ti,")");Array.isArray(Wr)?me("false,(",bn(ti,function(ns){return Zi+"["+ns+"]="+Wr[ns]}),",",Zi,")"):me("false,(Array.isArray(",Wr,")||",Wr," instanceof Float32Array)?",Wr,":(",bn(ti,function(ns){return Zi+"["+ns+"]="+Wr+"["+ns+"]"}),",",Zi,")")}else la>1?me(bn(la,function(ns){return Array.isArray(Wr)?Wr[ns]:Wr+"["+ns+"]"})):(Tt(!Array.isArray(Wr),"uniform value must not be an array"),me(Wr));me(");")}}function ia(Ie,me,$e,yr){var wr=Ie.shared,er=wr.gl,Je=wr.draw,lr=yr.draw;function De(){var Ma=lr.elements,ti,Zi=me;return Ma?((Ma.contextDep&&yr.contextDynamic||Ma.propDep)&&(Zi=$e),ti=Ma.append(Ie,Zi)):ti=Zi.def(Je,".",du),ti&&Zi("if("+ti+")"+er+".bindBuffer("+Yc+","+ti+".buffer.buffer);"),ti}function Qe(){var Ma=lr.count,ti,Zi=me;return Ma?((Ma.contextDep&&yr.contextDynamic||Ma.propDep)&&(Zi=$e),ti=Ma.append(Ie,Zi),Tt.optional(function(){Ma.MISSING&&Ie.assert(me,"false","missing vertex count"),Ma.DYNAMIC&&Ie.assert(Zi,ti+">=0","missing vertex count")})):(ti=Zi.def(Je,".",Ls),Tt.optional(function(){Ie.assert(Zi,ti+">=0","missing vertex count")})),ti}var Ce=De();function hr(Ma){var ti=lr[Ma];return ti?ti.contextDep&&yr.contextDynamic||ti.propDep?ti.append(Ie,$e):ti.append(Ie,me):me.def(Je,".",Ma)}var _r=hr(js),$r=hr(Vl),en=Qe();if(typeof en=="number"){if(en===0)return}else $e("if(",en,"){"),$e.exit("}");var Wr,En;mt&&(Wr=hr(Hl),En=Ie.instancing);var ea=Ce+".type",Aa=lr.elements&&Bs(lr.elements);function Zn(){function Ma(){$e(En,".drawElementsInstancedANGLE(",[_r,en,ea,$r+"<<(("+ea+"-"+sl+")>>1)",Wr],");")}function ti(){$e(En,".drawArraysInstancedANGLE(",[_r,$r,en,Wr],");")}Ce?Aa?Ma():($e("if(",Ce,"){"),Ma(),$e("}else{"),ti(),$e("}")):ti()}function la(){function Ma(){$e(er+".drawElements("+[_r,en,ea,$r+"<<(("+ea+"-"+sl+")>>1)"]+");")}function ti(){$e(er+".drawArrays("+[_r,$r,en]+");")}Ce?Aa?Ma():($e("if(",Ce,"){"),Ma(),$e("}else{"),ti(),$e("}")):ti()}mt&&(typeof Wr!="number"||Wr>=0)?typeof Wr=="string"?($e("if(",Wr,">0){"),Zn(),$e("}else if(",Wr,"<0){"),la(),$e("}")):Zn():la()}function Fa(Ie,me,$e,yr,wr){var er=yn(),Je=er.proc("body",wr);return Tt.optional(function(){er.commandStr=me.commandStr,er.command=er.link(me.commandStr)}),mt&&(er.instancing=Je.def(er.shared.extensions,".angle_instanced_arrays")),Ie(er,Je,$e,yr),er.compile().body}function Za(Ie,me,$e,yr){bo(Ie,me),$e.useVAO?$e.drawVAO?me(Ie.shared.vao,".setVAO(",$e.drawVAO.append(Ie,me),");"):me(Ie.shared.vao,".setVAO(",Ie.shared.vao,".targetVAO);"):(me(Ie.shared.vao,".setVAO(null);"),Bo(Ie,me,$e,yr.attributes,function(){return!0})),Ka(Ie,me,$e,yr.uniforms,function(){return!0}),ia(Ie,me,me,$e)}function xo(Ie,me){var $e=Ie.proc("draw",1);bo(Ie,$e),_i(Ie,$e,me.context),to(Ie,$e,me.framebuffer),Co(Ie,$e,me),Po(Ie,$e,me.state),Ca(Ie,$e,me,!1,!0);var yr=me.shader.progVar.append(Ie,$e);if($e(Ie.shared.gl,".useProgram(",yr,".program);"),me.shader.program)Za(Ie,$e,me,me.shader.program);else{$e(Ie.shared.vao,".setVAO(null);");var wr=Ie.global.def("{}"),er=$e.def(yr,".id"),Je=$e.def(wr,"[",er,"]");$e(Ie.cond(Je).then(Je,".call(this,a0);").else(Je,"=",wr,"[",er,"]=",Ie.link(function(lr){return Fa(Za,Ie,me,lr,1)}),"(",yr,");",Je,".call(this,a0);"))}Object.keys(me.state).length>0&&$e(Ie.shared.current,".dirty=true;")}function Ks(Ie,me,$e,yr){Ie.batchId="a1",bo(Ie,me);function wr(){return!0}Bo(Ie,me,$e,yr.attributes,wr),Ka(Ie,me,$e,yr.uniforms,wr),ia(Ie,me,me,$e)}function cc(Ie,me,$e,yr){bo(Ie,me);var wr=$e.contextDep,er=me.def(),Je="a0",lr="a1",De=me.def();Ie.shared.props=De,Ie.batchId=er;var Qe=Ie.scope(),Ce=Ie.scope();me(Qe.entry,"for(",er,"=0;",er,"<",lr,";++",er,"){",De,"=",Je,"[",er,"];",Ce,"}",Qe.exit);function hr(ea){return ea.contextDep&&wr||ea.propDep}function _r(ea){return!hr(ea)}if($e.needsContext&&_i(Ie,Ce,$e.context),$e.needsFramebuffer&&to(Ie,Ce,$e.framebuffer),Po(Ie,Ce,$e.state,hr),$e.profile&&hr($e.profile)&&Ca(Ie,Ce,$e,!1,!0),yr)$e.useVAO?$e.drawVAO?hr($e.drawVAO)?Ce(Ie.shared.vao,".setVAO(",$e.drawVAO.append(Ie,Ce),");"):Qe(Ie.shared.vao,".setVAO(",$e.drawVAO.append(Ie,Qe),");"):Qe(Ie.shared.vao,".setVAO(",Ie.shared.vao,".targetVAO);"):(Qe(Ie.shared.vao,".setVAO(null);"),Bo(Ie,Qe,$e,yr.attributes,_r),Bo(Ie,Ce,$e,yr.attributes,hr)),Ka(Ie,Qe,$e,yr.uniforms,_r),Ka(Ie,Ce,$e,yr.uniforms,hr),ia(Ie,Qe,Ce,$e);else{var $r=Ie.global.def("{}"),en=$e.shader.progVar.append(Ie,Ce),Wr=Ce.def(en,".id"),En=Ce.def($r,"[",Wr,"]");Ce(Ie.shared.gl,".useProgram(",en,".program);","if(!",En,"){",En,"=",$r,"[",Wr,"]=",Ie.link(function(ea){return Fa(Ks,Ie,$e,ea,2)}),"(",en,");}",En,".call(this,a0[",er,"],",er,");")}}function ze(Ie,me){var $e=Ie.proc("batch",2);Ie.batchId="0",bo(Ie,$e);var yr=!1,wr=!0;Object.keys(me.context).forEach(function($r){yr=yr||me.context[$r].propDep}),yr||(_i(Ie,$e,me.context),wr=!1);var er=me.framebuffer,Je=!1;er?(er.propDep?yr=Je=!0:er.contextDep&&yr&&(Je=!0),Je||to(Ie,$e,er)):to(Ie,$e,null),me.state.viewport&&me.state.viewport.propDep&&(yr=!0);function lr($r){return $r.contextDep&&yr||$r.propDep}Co(Ie,$e,me),Po(Ie,$e,me.state,function($r){return!lr($r)}),(!me.profile||!lr(me.profile))&&Ca(Ie,$e,me,!1,"a1"),me.contextDep=yr,me.needsContext=wr,me.needsFramebuffer=Je;var De=me.shader.progVar;if(De.contextDep&&yr||De.propDep)cc(Ie,$e,me,null);else{var Qe=De.append(Ie,$e);if($e(Ie.shared.gl,".useProgram(",Qe,".program);"),me.shader.program)cc(Ie,$e,me,me.shader.program);else{$e(Ie.shared.vao,".setVAO(null);");var Ce=Ie.global.def("{}"),hr=$e.def(Qe,".id"),_r=$e.def(Ce,"[",hr,"]");$e(Ie.cond(_r).then(_r,".call(this,a0,a1);").else(_r,"=",Ce,"[",hr,"]=",Ie.link(function($r){return Fa(cc,Ie,me,$r,2)}),"(",Qe,");",_r,".call(this,a0,a1);"))}}Object.keys(me.state).length>0&&$e(Ie.shared.current,".dirty=true;")}function kr(Ie,me){var $e=Ie.proc("scope",3);Ie.batchId="a2";var yr=Ie.shared,wr=yr.current;_i(Ie,$e,me.context),me.framebuffer&&me.framebuffer.append(Ie,$e),ms(Object.keys(me.state)).forEach(function(Je){var lr=me.state[Je],De=lr.append(Ie,$e);Sa(De)?De.forEach(function(Qe,Ce){$e.set(Ie.next[Je],"["+Ce+"]",Qe)}):$e.set(yr.next,"."+Je,De)}),Ca(Ie,$e,me,!0,!0),[du,Vl,Ls,Hl,js].forEach(function(Je){var lr=me.draw[Je];lr&&$e.set(yr.draw,"."+Je,""+lr.append(Ie,$e))}),Object.keys(me.uniforms).forEach(function(Je){var lr=me.uniforms[Je].append(Ie,$e);Array.isArray(lr)&&(lr="["+lr.join()+"]"),$e.set(yr.uniforms,"["+Se.id(Je)+"]",lr)}),Object.keys(me.attributes).forEach(function(Je){var lr=me.attributes[Je].append(Ie,$e),De=Ie.scopeAttrib(Je);Object.keys(new st).forEach(function(Qe){$e.set(De,"."+Qe,lr[Qe])})}),me.scopeVAO&&$e.set(yr.vao,".targetVAO",me.scopeVAO.append(Ie,$e));function er(Je){var lr=me.shader[Je];lr&&$e.set(yr.shader,"."+Je,lr.append(Ie,$e))}er(Ps),er(Pu),Object.keys(me.state).length>0&&($e(wr,".dirty=true;"),$e.exit(wr,".dirty=true;")),$e("a1(",Ie.shared.context,",a0,",Ie.batchId,");")}function Dr(Ie){if(!(typeof Ie!="object"||Sa(Ie))){for(var me=Object.keys(Ie),$e=0;$e<me.length;++$e)if(Ze.isDynamic(Ie[me[$e]]))return!0;return!1}}function Yn(Ie,me,$e){var yr=me.static[$e];if(!yr||!Dr(yr))return;var wr=Ie.global,er=Object.keys(yr),Je=!1,lr=!1,De=!1,Qe=Ie.global.def("{}");er.forEach(function(hr){var _r=yr[hr];if(Ze.isDynamic(_r)){typeof _r=="function"&&(_r=yr[hr]=Ze.unbox(_r));var $r=gi(_r,null);Je=Je||$r.thisDep,De=De||$r.propDep,lr=lr||$r.contextDep}else{switch(wr(Qe,".",hr,"="),typeof _r){case"number":wr(_r);break;case"string":wr('"',_r,'"');break;case"object":Array.isArray(_r)&&wr("[",_r.join(),"]");break;default:wr(Ie.link(_r));break}wr(";")}});function Ce(hr,_r){er.forEach(function($r){var en=yr[$r];if(Ze.isDynamic(en)){var Wr=hr.invoke(_r,en);_r(Qe,".",$r,"=",Wr,";")}})}me.dynamic[$e]=new Ze.DynamicVariable(ul,{thisDep:Je,contextDep:lr,propDep:De,ref:Qe,append:Ce}),delete me.static[$e]}function Pa(Ie,me,$e,yr,wr){var er=yn();er.stats=er.link(wr),Object.keys(me.static).forEach(function(lr){Yn(er,me,lr)}),Df.forEach(function(lr){Yn(er,Ie,lr)});var Je=Ua(Ie,me,$e,yr,er);return xo(er,Je),kr(er,Je),ze(er,Je),_(er.compile(),{destroy:function(){Je.shader.program.destroy()}})}return{next:Vt,current:kt,procs:function(){var Ie=yn(),me=Ie.proc("poll"),$e=Ie.proc("refresh"),yr=Ie.block();me(yr),$e(yr);var wr=Ie.shared,er=wr.gl,Je=wr.next,lr=wr.current;yr(lr,".dirty=false;"),to(Ie,me),to(Ie,$e,null,!0);var De;mt&&(De=Ie.link(mt)),We.oes_vertex_array_object&&$e(Ie.link(We.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Qe=0;Qe<Rr.maxAttributes;++Qe){var Ce=$e.def(wr.attributes,"[",Qe,"]"),hr=Ie.cond(Ce,".buffer");hr.then(er,".enableVertexAttribArray(",Qe,");",er,".bindBuffer(",hu,",",Ce,".buffer.buffer);",er,".vertexAttribPointer(",Qe,",",Ce,".size,",Ce,".type,",Ce,".normalized,",Ce,".stride,",Ce,".offset);").else(er,".disableVertexAttribArray(",Qe,");",er,".vertexAttrib4f(",Qe,",",Ce,".x,",Ce,".y,",Ce,".z,",Ce,".w);",Ce,".buffer=null;"),$e(hr),mt&&$e(De,".vertexAttribDivisorANGLE(",Qe,",",Ce,".divisor);")}return $e(Ie.shared.vao,".currentVAO=null;",Ie.shared.vao,".setVAO(",Ie.shared.vao,".targetVAO);"),Object.keys(Ee).forEach(function(_r){var $r=Ee[_r],en=yr.def(Je,".",_r),Wr=Ie.block();Wr("if(",en,"){",er,".enable(",$r,")}else{",er,".disable(",$r,")}",lr,".",_r,"=",en,";"),$e(Wr),me("if(",en,"!==",lr,".",_r,"){",Wr,"}")}),Object.keys(ve).forEach(function(_r){var $r=ve[_r],en=kt[_r],Wr,En,ea=Ie.block();if(ea(er,".",$r,"("),Sa(en)){var Aa=en.length;Wr=Ie.global.def(Je,".",_r),En=Ie.global.def(lr,".",_r),ea(bn(Aa,function(Zn){return Wr+"["+Zn+"]"}),");",bn(Aa,function(Zn){return En+"["+Zn+"]="+Wr+"["+Zn+"];"}).join("")),me("if(",bn(Aa,function(Zn){return Wr+"["+Zn+"]!=="+En+"["+Zn+"]"}).join("||"),"){",ea,"}")}else Wr=yr.def(Je,".",_r),En=yr.def(lr,".",_r),ea(Wr,");",lr,".",_r,"=",Wr,";"),me("if(",Wr,"!==",En,"){",ea,"}");$e(ea)}),Ie.compile()}(),compile:Pa}}function md(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var sc=34918,Do=34919,Vf=35007,Hf=function(Lt,Se){if(!Se.ext_disjoint_timer_query)return null;var We=[];function Rr(){return We.pop()||Se.ext_disjoint_timer_query.createQueryEXT()}function qr(mt){We.push(mt)}var Nr=[];function zr(mt){var It=Rr();Se.ext_disjoint_timer_query.beginQueryEXT(Vf,It),Nr.push(It),N(Nr.length-1,Nr.length,mt)}function hn(){Se.ext_disjoint_timer_query.endQueryEXT(Vf)}function gn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var xn=[];function mn(){return xn.pop()||new gn}function _n(mt){xn.push(mt)}var v=[];function N(mt,It,kt){var Vt=mn();Vt.startQueryIndex=mt,Vt.endQueryIndex=It,Vt.sum=0,Vt.stats=kt,v.push(Vt)}var $=[],st=[];function vt(){var mt,It,kt=Nr.length;if(kt!==0){st.length=Math.max(st.length,kt+1),$.length=Math.max($.length,kt+1),$[0]=0,st[0]=0;var Vt=0;for(mt=0,It=0;It<Nr.length;++It){var oe=Nr[It];Se.ext_disjoint_timer_query.getQueryObjectEXT(oe,Do)?(Vt+=Se.ext_disjoint_timer_query.getQueryObjectEXT(oe,sc),qr(oe)):Nr[mt++]=oe,$[It+1]=Vt,st[It+1]=mt}for(Nr.length=mt,mt=0,It=0;It<v.length;++It){var Ee=v[It],ve=Ee.startQueryIndex,Ge=Ee.endQueryIndex;Ee.sum+=$[Ge]-$[ve];var ar=st[ve],Ur=st[Ge];Ur===ar?(Ee.stats.gpuTime+=Ee.sum/1e6,_n(Ee)):(Ee.startQueryIndex=ar,Ee.endQueryIndex=Ur,v[mt++]=Ee)}v.length=mt}}return{beginQuery:zr,endQuery:hn,pushScopeStats:N,update:vt,getNumPendingQueries:function(){return Nr.length},clear:function(){We.push.apply(We,Nr);for(var mt=0;mt<We.length;mt++)Se.ext_disjoint_timer_query.deleteQueryEXT(We[mt]);Nr.length=0,We.length=0},restore:function(){Nr.length=0,We.length=0}}},yd=16384,Hs=256,Zf=1024,Hc=34962,uc="webglcontextlost",Yu="webglcontextrestored",Zc=1,Zs=2,Kc=3;function lc(Lt,Se){for(var We=0;We<Lt.length;++We)if(Lt[We]===Se)return We;return-1}function wl(Lt){var Se=wn(Lt);if(!Se)return null;var We=Se.gl,Rr=We.getContextAttributes(),qr=We.isContextLost(),Nr=ln(We,Se);if(!Nr)return null;var zr=Xe(),hn=md(),gn=Nr.extensions,xn=Hf(We,gn),mn=ke(),_n=We.drawingBufferWidth,v=We.drawingBufferHeight,N={tick:0,time:0,viewportWidth:_n,viewportHeight:v,framebufferWidth:_n,framebufferHeight:v,drawingBufferWidth:_n,drawingBufferHeight:v,pixelRatio:Se.pixelRatio},$={},st={elements:null,primitive:4,count:-1,offset:0,instances:-1},vt=xi(We,gn),mt=ra(We,hn,Se,kt),It=ud(We,gn,vt,hn,mt);function kt(ia){return It.destroyBuffer(ia)}var Vt=Io(We,gn,mt,hn),oe=Mf(We,zr,hn,Se),Ee=ff(We,gn,vt,function(){ar.procs.poll()},N,hn,Se),ve=Ws(We,gn,vt,hn,Se),Ge=od(We,gn,vt,Ee,ve,hn),ar=Wu(We,zr,gn,vt,mt,Vt,Ee,Ge,$,It,oe,st,N,xn,Se),Ur=zl(We,Ge,ar.procs.poll,N,Rr,gn,vt),dr=ar.next,pr=We.canvas,gr=[],yn=[],Rn=[],Cn=[Se.onDestroy],qn=null;function $n(){if(gr.length===0){xn&&xn.update(),qn=null;return}qn=Er.next($n),Po();for(var ia=gr.length-1;ia>=0;--ia){var Fa=gr[ia];Fa&&Fa(N,null,0)}We.flush(),xn&&xn.update()}function aa(){!qn&&gr.length>0&&(qn=Er.next($n))}function ga(){qn&&(Er.cancel($n),qn=null)}function da(ia){ia.preventDefault(),qr=!0,ga(),yn.forEach(function(Fa){Fa()})}function Ii(ia){We.getError(),qr=!1,Nr.restore(),oe.restore(),mt.restore(),Ee.restore(),ve.restore(),Ge.restore(),It.restore(),xn&&xn.restore(),ar.procs.refresh(),aa(),Rn.forEach(function(Fa){Fa()})}pr&&(pr.addEventListener(uc,da,!1),pr.addEventListener(Yu,Ii,!1));function ya(){gr.length=0,ga(),pr&&(pr.removeEventListener(uc,da),pr.removeEventListener(Yu,Ii)),oe.clear(),Ge.clear(),ve.clear(),Ee.clear(),Vt.clear(),mt.clear(),It.clear(),xn&&xn.clear(),Cn.forEach(function(ia){ia()})}function Ji(ia){Tt(!!ia,"invalid args to regl({...})"),Tt.type(ia,"object","invalid args to regl({...})");function Fa(wr){var er=_({},wr);delete er.uniforms,delete er.attributes,delete er.context,delete er.vao,"stencil"in er&&er.stencil.op&&(er.stencil.opBack=er.stencil.opFront=er.stencil.op,delete er.stencil.op);function Je(lr){if(lr in er){var De=er[lr];delete er[lr],Object.keys(De).forEach(function(Qe){er[lr+"."+Qe]=De[Qe]})}}return Je("blend"),Je("depth"),Je("cull"),Je("stencil"),Je("polygonOffset"),Je("scissor"),Je("sample"),"vao"in wr&&(er.vao=wr.vao),er}function Za(wr,er){var Je={},lr={};return Object.keys(wr).forEach(function(De){var Qe=wr[De];if(Ze.isDynamic(Qe)){lr[De]=Ze.unbox(Qe,De);return}else if(er&&Array.isArray(Qe)){for(var Ce=0;Ce<Qe.length;++Ce)if(Ze.isDynamic(Qe[Ce])){lr[De]=Ze.unbox(Qe,De);return}}Je[De]=Qe}),{dynamic:lr,static:Je}}var xo=Za(ia.context||{},!0),Ks=Za(ia.uniforms||{},!0),cc=Za(ia.attributes||{},!1),ze=Za(Fa(ia),!1),kr={gpuTime:0,cpuTime:0,count:0},Dr=ar.compile(ze,cc,Ks,xo,kr),Yn=Dr.draw,Pa=Dr.batch,Ie=Dr.scope,me=[];function $e(wr){for(;me.length<wr;)me.push(null);return me}function yr(wr,er){var Je;if(qr&&Tt.raise("context lost"),typeof wr=="function")return Ie.call(this,null,wr,0);if(typeof er=="function")if(typeof wr=="number")for(Je=0;Je<wr;++Je)Ie.call(this,null,er,Je);else if(Array.isArray(wr))for(Je=0;Je<wr.length;++Je)Ie.call(this,wr[Je],er,Je);else return Ie.call(this,wr,er,0);else if(typeof wr=="number"){if(wr>0)return Pa.call(this,$e(wr|0),wr|0)}else if(Array.isArray(wr)){if(wr.length)return Pa.call(this,wr,wr.length)}else return Yn.call(this,wr)}return _(yr,{stats:kr,destroy:function(){Dr.destroy()}})}var mi=Ge.setFBO=Ji({framebuffer:Ze.define.call(null,Zc,"framebuffer")});function Ua(ia,Fa){var Za=0;ar.procs.poll();var xo=Fa.color;xo&&(We.clearColor(+xo[0]||0,+xo[1]||0,+xo[2]||0,+xo[3]||0),Za|=yd),"depth"in Fa&&(We.clearDepth(+Fa.depth),Za|=Hs),"stencil"in Fa&&(We.clearStencil(Fa.stencil|0),Za|=Zf),Tt(!!Za,"called regl.clear with no buffer specified"),We.clear(Za)}function _i(ia){if(Tt(typeof ia=="object"&&ia,"regl.clear() takes an object as input"),"framebuffer"in ia)if(ia.framebuffer&&ia.framebuffer_reglType==="framebufferCube")for(var Fa=0;Fa<6;++Fa)mi(_({framebuffer:ia.framebuffer.faces[Fa]},ia),Ua);else mi(ia,Ua);else Ua(null,ia)}function to(ia){Tt.type(ia,"function","regl.frame() callback must be a function"),gr.push(ia);function Fa(){var Za=lc(gr,ia);Tt(Za>=0,"cannot cancel a frame twice");function xo(){var Ks=lc(gr,xo);gr[Ks]=gr[gr.length-1],gr.length-=1,gr.length<=0&&ga()}gr[Za]=xo}return aa(),{cancel:Fa}}function Co(){var ia=dr.viewport,Fa=dr.scissor_box;ia[0]=ia[1]=Fa[0]=Fa[1]=0,N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=ia[2]=Fa[2]=We.drawingBufferWidth,N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=ia[3]=Fa[3]=We.drawingBufferHeight}function Po(){N.tick+=1,N.time=Ca(),Co(),ar.procs.poll()}function bo(){Ee.refresh(),Co(),ar.procs.refresh(),xn&&xn.update()}function Ca(){return(ke()-mn)/1e3}bo();function Bo(ia,Fa){Tt.type(Fa,"function","listener callback must be a function");var Za;switch(ia){case"frame":return to(Fa);case"lost":Za=yn;break;case"restore":Za=Rn;break;case"destroy":Za=Cn;break;default:Tt.raise("invalid event, must be one of frame,lost,restore,destroy")}return Za.push(Fa),{cancel:function(){for(var xo=0;xo<Za.length;++xo)if(Za[xo]===Fa){Za[xo]=Za[Za.length-1],Za.pop();return}}}}var Ka=_(Ji,{clear:_i,prop:Ze.define.bind(null,Zc),context:Ze.define.bind(null,Zs),this:Ze.define.bind(null,Kc),draw:Ji({}),buffer:function(ia){return mt.create(ia,Hc,!1,!1)},elements:function(ia){return Vt.create(ia,!1)},texture:Ee.create2D,cube:Ee.createCube,renderbuffer:ve.create,framebuffer:Ge.create,framebufferCube:Ge.createCube,vao:It.createVAO,attributes:Rr,frame:to,on:Bo,limits:vt,hasExtension:function(ia){return vt.extensions.indexOf(ia.toLowerCase())>=0},read:Ur,destroy:ya,_gl:We,_refresh:bo,poll:function(){Po(),xn&&xn.update()},now:Ca,stats:hn});return Se.onDone(null,Ka),Ka}return wl})},937478:function(Ne,G,_){"use strict";var g=_(340210),R=_(921924),w=_(470631),M=g("%TypeError%"),P=g("%WeakMap%",!0),L=g("%Map%",!0),p=R("WeakMap.prototype.get",!0),b=R("WeakMap.prototype.set",!0),S=R("WeakMap.prototype.has",!0),x=R("Map.prototype.get",!0),y=R("Map.prototype.set",!0),A=R("Map.prototype.has",!0),E=function(f,W){for(var X=f,z;(z=X.next)!==null;X=z)if(z.key===W)return X.next=z.next,z.next=f.next,f.next=z,z},D=function(f,W){var X=E(f,W);return X&&X.value},B=function(f,W,X){var z=E(f,W);z?z.value=X:f.next={key:W,next:f.next,value:X}},m=function(f,W){return!!E(f,W)};Ne.exports=function(){var W,X,z,U={assert:function(j){if(!U.has(j))throw new M("Side channel does not contain "+w(j))},get:function(j){if(P&&j&&(typeof j=="object"||typeof j=="function")){if(W)return p(W,j)}else if(L){if(X)return x(X,j)}else if(z)return D(z,j)},has:function(j){if(P&&j&&(typeof j=="object"||typeof j=="function")){if(W)return S(W,j)}else if(L){if(X)return A(X,j)}else if(z)return m(z,j);return!1},set:function(j,V){P&&j&&(typeof j=="object"||typeof j=="function")?(W||(W=new P),b(W,j,V)):L?(X||(X=new L),y(X,j,V)):(z||(z={key:{},next:null}),B(z,j,V))}};return U}},952191:function(Ne,G){"use strict";var _;_={value:!0},_=m,G.Rs=f,_=W,_=X,G.Yf=z,G.Lo=U,G.lu=V,G.hy=J,G.Lq=Q,_=et,G.dt=ut,G.GX=it,_=yt,G.Ck=Bt,G.YJ=St,_=Et,_=Z,_=q,_=bt;var g={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R=["Webkit","ms","Moz","O"];function w(Ct,nt){return Ct+nt.charAt(0).toUpperCase()+nt.substring(1)}Object.keys(g).forEach(function(Ct){R.forEach(function(nt){g[w(nt,Ct)]=g[Ct]})});var M=/^(normal|none|(\b(url\([^)]*\)|chapter_counter|attr\([^)]*\)|(no-)?(open|close)-quote|inherit)((\b\s*)|$|\s+))+)$/,P=function(){return typeof document=="undefined"?!1:!!(navigator&&(navigator.userAgent.indexOf("MSIE 8.0")>0||navigator.userAgent.indexOf("MSIE 9.0")>0))}(),L=1e5,p={aqua:[0,255,255,1],lime:[0,255,0,1],silver:[192,192,192,1],black:[0,0,0,1],maroon:[128,0,0,1],teal:[0,128,128,1],blue:[0,0,255,1],navy:[0,0,128,1],white:[255,255,255,1],fuchsia:[255,0,255,1],olive:[128,128,0,1],yellow:[255,255,0,1],orange:[255,165,0,1],gray:[128,128,128,1],purple:[128,0,128,1],green:[0,128,0,1],red:[255,0,0,1],pink:[255,192,203,1],cyan:[0,255,255,1],transparent:[255,255,255,0]},b=Math.PI/180,S=180/Math.PI,x={_lists:{transformsBase:["translate","translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ","rotate"],transforms3D:["translate3d","translateZ","scaleZ","rotateX","rotateY","perspective"]},transformGroup:{translate:1,translate3d:1,scale:1,scale3d:1,rotate:1,rotate3d:1,skew:1},filter:["grayScale","sepia","hueRotate","invert","brightness","contrast","blur"],filterConvert:{grayScale:"grayscale",hueRotate:"hue-rotate"}};x._lists.transformsBase=P?x._lists.transformsBase:x._lists.transformsBase.concat(x._lists.transforms3D);var y=_=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})/,A=_=/((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|%|))(,[\s+]?(?:\d|\.\d)+(?:(deg|\%|)))?\)/,E=G.rV=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})|((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|%)?)(,[\s+]?(?:\d|\.\d)+(?:(deg|\%)?))?\)/,D=_=/(?:\d|\.\d)+(%?)/g,B=G._T=x;function m(Ct){return Ct.replace(/[A-Z]/,function(nt){return"-"+nt.toLocaleLowerCase()})}function f(Ct){return Ct.replace(/-(.?)/g,function(nt){return nt.replace("-","").toLocaleUpperCase()})}function W(Ct,nt){var ht=nt?Math.pow(10,nt):L,At=Ct|0,Ot=Ct-At,xt=Ct;if(Ot){var Dt=(Ot*ht+(Ct<0?-.5:.5)|0)/ht,Yt=Dt|0,ie=Dt.toString(),re=ie.split(".")[1]||"";xt=(Ct<0&&!(At+Yt)?"-":"")+(At+Yt)+"."+re}return parseFloat(xt)}function X(Ct){if(typeof document=="undefined")return null;var nt=["WebKitCSS","MozCSS","DOM","MsCSS","MSCSS","OCSS","CSS"].filter(function(ht){return ht+"Matrix"in window});return nt.length?new window[nt[0]+"Matrix"](Ct):(console.warn("Browsers do not support matrix."),"")}function z(Ct){if(typeof document=="undefined")return null;var nt=["O","Moz","ms","Ms","Webkit"];if(Ct!=="filter"&&Ct in document.body.style)return Ct;var ht=Ct.charAt(0).toUpperCase()+Ct.substr(1),At=nt.filter(function(Ot){return""+Ot+ht in document.body.style});return At[0]?""+At[0]+ht:null}function U(Ct){var nt=Ct;return nt=nt==="x"?"translateX":nt,nt=nt==="y"?"translateY":nt,nt=nt==="z"?"translateZ":nt,nt}var j=function(nt,ht,At){return At<0&&(At+=6),At>=6&&(At-=6),At<1?(ht-nt)*At+nt:At<3?ht:At<4?(ht-nt)*(4-At)+nt:nt};function V(Ct){var nt=p.transparent,ht=Ct,At=void 0,Ot=void 0,xt=void 0;if(!ht)nt=p.transparent;else if(p[ht])nt=p[ht];else if(typeof ht=="number")nt=[ht>>16,ht>>8&255,ht&255];else if(ht.charAt(ht.length-1)===","&&(ht=ht.substr(0,ht.length-1)),ht.match(y))ht=ht.substr(1),ht.length===3&&(At=ht.charAt(0),Ot=ht.charAt(1),xt=ht.charAt(2),ht=""+At+At+Ot+Ot+xt+xt+"ff"),ht.length===6&&(ht+="ff"),ht=parseInt(ht,16),nt=[ht>>24&255,ht>>16&255,ht>>8&255,parseFloat(((ht&255)/255).toFixed(2))];else if(ht.match(/^hsl/)){nt=ht.match(D);var Dt=nt[3];Dt=typeof Dt=="string"&&Dt.match("%")?parseFloat(Dt)/100:parseFloat(""+(Dt||"1"));var Yt=parseFloat(nt[0])/60,ie=parseFloat(nt[1])/100,re=parseFloat(nt[2])/100,Pt=re<=.5?re*(ie+1):re+ie-re*ie,ee=re*2-Pt;At=Math.round(j(ee,Pt,Yt+2)*255),Ot=Math.round(j(ee,Pt,Yt)*255),xt=Math.round(j(ee,Pt,Yt-2)*255),nt=[At,Ot,xt,Dt]}else nt=ht.match(D)||p.transparent,nt=nt.map(function(ce){return parseFloat(ce)}),nt.length===3&&nt.push(1);return nt}function J(Ct,nt){var ht=nt&&f(nt);if(!Ct)return ht==="boxShadow"?[0,0,0,0,0,0,0,0]:[0,0,0,0,0,0,0];var At=Ct.replace(/,\s+/gi,",").split(/\s+/).filter(function(ie){return ie}),Ot=At.indexOf("inset");Ot>=0&&At.splice(Ot,1);var xt=At.find(function(ie){return p[ie]||ie.match(/#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})|(rgb|hsl)+(?:a)?\((.*)\)/i)})||"black",Dt=At.indexOf(xt);At.splice(Dt,1);var Yt=V(xt);return Yt[3]=typeof Yt[3]=="number"?Yt[3]:1,ht==="boxShadow"&&At.length<4&&At.push(0),At.concat(Yt,Ot>=0?["inset"]:[])}function Q(Ct){var nt=Ct.length===4?"rgba":"rgb",ht=Ct.map(function(At,Ot){return Ot<3?Math.round(At):At});return nt+"("+ht.join(",")+")"}function et(Ct){return B._lists.transformsBase.indexOf(Ct)>=0?"transform":Ct}function ut(Ct){var nt=et(Ct);return B.filter.indexOf(nt)>=0?"filter":nt}function it(Ct){if(Ct==="none"||!Ct||Ct==="")return null;var nt=Ct.replace(/\s+/g,"").split(")").filter(function(At){return At}),ht={};return nt.forEach(function(At){var Ot=At.split("(");ht[Ot[0]]=Ot[1]}),ht}function yt(Ct){var nt=Ct.match(/(?:\-|\b)[\d\-\.e]+\b/gi),ht={};return nt.length===6?(ht.m11=parseFloat(nt[0]),ht.m12=parseFloat(nt[1]),ht.m13=0,ht.m14=0,ht.m21=parseFloat(nt[2]),ht.m22=parseFloat(nt[3]),ht.m23=0,ht.m24=0,ht.m31=0,ht.m32=0,ht.m33=1,ht.m34=0,ht.m41=parseFloat(nt[4]),ht.m42=parseFloat(nt[5]),ht.m43=0,ht.m44=0):nt.forEach(function(At,Ot){var xt=Ot%4+1,Dt=Math.floor(Ot/4)+1;ht["m"+Dt+xt]=parseFloat(At)}),ht}function ft(Ct){var nt={};return nt.translateX=0,nt.translateY=0,nt.translateZ=0,nt.rotate=0,nt.rotateX=0,nt.rotateY=0,nt.scaleX=1,nt.scaleY=1,nt.scaleZ=1,nt.skewX=0,nt.skewY=0,nt.perspective=0,(Ct.trim().match(/(\w+)\([^\)]+\)/ig)||[]).forEach(function(ht){var At=ht.split("("),Ot=At[0].trim(),xt=At[1].replace(")","").trim();xt.match(/%|em|rem/ig)&&console.warn("value("+xt+") must be absolute, not relative, has been converted to absolute."),xt=xt.replace(/px|deg|\)/ig,""),B.transformGroup[Ot]&&Ot!=="rotate"?(xt=xt.split(",").map(function(Dt){return parseFloat(Dt)}),Ot==="scale3d"||Ot==="translate3d"?["X","Y","Z"].forEach(function(Dt,Yt){var ie=Ot.substring(0,Ot.length-2);nt[""+ie+Dt]=xt[Yt]||nt[""+ie+Dt]}):Ot==="rotate3d"?(nt.rotateX=xt[0]&&xt[3]||nt.rotateX,nt.rotateY=xt[1]&&xt[3]||nt.rotateY,nt.rotate=xt[2]&&xt[3]||nt.rotate):["X","Y"].forEach(function(Dt,Yt){nt[""+Ot+Dt]=xt[Yt]||nt[""+Ot+Dt]})):Ot==="rotateZ"?nt.rotate=parseFloat(xt)||nt.rotate:nt[Ot]=parseFloat(xt)||nt[Ot]}),nt}function Bt(Ct){var nt=!Ct||Ct==="none"||Ct===""?"matrix(1, 0, 0, 1, 0, 0)":Ct;if(!nt.match("matrix"))return ft(Ct);var ht=yt(nt),At=ht.m11,Ot=ht.m12,xt=ht.m13,Dt=ht.m14,Yt=ht.m21,ie=ht.m22,re=ht.m23,Pt=ht.m24,ee=ht.m31,ce=ht.m32,Ut=ht.m33,te=ht.m34,ye=ht.m43,ge=void 0,Kt=void 0,xe=void 0,Tt={},Ae=Math.atan2(re,Ut),br=Math.tan(Yt),Sr=Math.tan(Ot),Mr=void 0,Pr=void 0;return Tt.rotateX=W(Ae*S)||0,Ae&&(Mr=Math.cos(-Ae),Pr=Math.sin(-Ae),ge=Yt*Mr+ee*Pr,Kt=ie*Mr+ce*Pr,xe=re*Mr+Ut*Pr,ee=Yt*-Pr+ee*Mr,ce=ie*-Pr+ce*Mr,Ut=re*-Pr+Ut*Mr,te=Pt*-Pr+te*Mr,Yt=ge,ie=Kt,re=xe),Ae=Math.atan2(-xt,Ut),Tt.rotateY=W(Ae*S)||0,Ae&&(Mr=Math.cos(-Ae),Pr=Math.sin(-Ae),ge=At*Mr-ee*Pr,Kt=Ot*Mr-ce*Pr,xe=xt*Mr-Ut*Pr,ce=Ot*Pr+ce*Mr,Ut=xt*Pr+Ut*Mr,te=Dt*Pr+te*Mr,At=ge,Ot=Kt,xt=xe),Ae=Math.atan2(Ot,At),Tt.rotate=W(Ae*S)||0,Ae&&(Mr=Math.cos(Ae),Pr=Math.sin(Ae),ge=At*Mr+Ot*Pr,Kt=Yt*Mr+ie*Pr,xe=ee*Mr+ce*Pr,Ot=Ot*Mr-At*Pr,ie=ie*Mr-Yt*Pr,ce=ce*Mr-ee*Pr,At=ge,Yt=Kt,ee=xe),Tt.rotateX&&Math.abs(Tt.rotateX)+Math.abs(Tt.rotate)>359.9&&(Tt.rotateX=Tt.rotate=0,Tt.rotateY=180-Tt.rotateY||0),Tt.scaleX=W(Math.sqrt(At*At+Ot*Ot+xt*xt)),Tt.scaleY=W(Math.sqrt(ie*ie+re*re)),Tt.scaleZ=W(Math.sqrt(ee*ee+ce*ce+Ut*Ut)),Tt.skewX=br===-Sr?0:br,Tt.skewY=Sr===-br?0:Sr,Tt.perspective=te?1/(te<0?-te:te):0,Tt.translateX=ht.m41,Tt.translateY=ht.m42,Tt.translateZ=ye,Tt}function St(Ct,nt){var ht=void 0;return!g[Ct]&&typeof nt=="number"?ht=" "+nt+"px":Ct==="content"&&!M.test(nt)&&(ht="'"+nt.replace(/'/g,"\\'")+"'"),ht||nt}function Et(Ct,nt){var ht=nt&&nt.toString().replace(/[^a-z|%]/ig,""),At="";return Ct.indexOf("translate")>=0||Ct.indexOf("perspective")>=0||Ct.indexOf("blur")>=0?At="px":(Ct.indexOf("skew")>=0||Ct.indexOf("rotate")>=0)&&(At="deg"),ht||At}function Z(Ct,nt,ht){return Ct+"("+nt+(ht||"")+")"}function q(Ct,nt){var ht=null;return Ct&&Ct.forEach(function(At){if(!ht){var Ot=At.split("(")[0],xt=Ot in B.transformGroup&&nt.substring(0,nt.length-1).indexOf(Ot)>=0,Dt=nt in B.transformGroup&&Ot.substring(0,Ot.length-1).indexOf(nt)>=0,Yt=Ot in B.transformGroup&&nt in B.transformGroup&&(Ot.substring(0,Ot.length-2)===nt||nt.substring(0,nt.length-2)===Ot);(Ot===nt||xt||Dt||Yt)&&(ht=At)}}),ht}function bt(Ct,nt){if(!Ct||Ct==="")return nt;if(!nt||nt==="")return Ct;var ht=Ct.replace(/\s/g,"").split(")").filter(function(Ot){return Ot!==""&&Ot}).map(function(Ot){return Ot+")"}),At=nt.replace(/\s/g,"").split(")").filter(function(Ot){return Ot!==""&&Ot});return At.forEach(function(Ot){var xt=Ot.split("("),Dt=xt[0],Yt=q(ht,Dt);if(!Yt)ht.push(Ot+")");else{var ie=ht.indexOf(Yt);ht[ie]=Ot+")"}}),ht.forEach(function(Ot,xt){Ot.indexOf("perspective")>=0&&xt&&(ht.splice(xt,1),ht.unshift(Ot))}),ht.join(" ").trim()}},141e3:function(Ne){"use strict";var G={linear:function(_,g,R,w){var M=R-g;return M*_/w+g},easeInQuad:function(_,g,R,w){var M=R-g;return M*(_/=w)*_+g},easeOutQuad:function(_,g,R,w){var M=R-g;return-M*(_/=w)*(_-2)+g},easeInOutQuad:function(_,g,R,w){var M=R-g;return(_/=w/2)<1?M/2*_*_+g:-M/2*(--_*(_-2)-1)+g},easeInCubic:function(_,g,R,w){var M=R-g;return M*(_/=w)*_*_+g},easeOutCubic:function(_,g,R,w){var M=R-g;return M*((_=_/w-1)*_*_+1)+g},easeInOutCubic:function(_,g,R,w){var M=R-g;return(_/=w/2)<1?M/2*_*_*_+g:M/2*((_-=2)*_*_+2)+g},easeInQuart:function(_,g,R,w){var M=R-g;return M*(_/=w)*_*_*_+g},easeOutQuart:function(_,g,R,w){var M=R-g;return-M*((_=_/w-1)*_*_*_-1)+g},easeInOutQuart:function(_,g,R,w){var M=R-g;return(_/=w/2)<1?M/2*_*_*_*_+g:-M/2*((_-=2)*_*_*_-2)+g},easeInQuint:function(_,g,R,w){var M=R-g;return M*(_/=w)*_*_*_*_+g},easeOutQuint:function(_,g,R,w){var M=R-g;return M*((_=_/w-1)*_*_*_*_+1)+g},easeInOutQuint:function(_,g,R,w){var M=R-g;return(_/=w/2)<1?M/2*_*_*_*_*_+g:M/2*((_-=2)*_*_*_*_+2)+g},easeInSine:function(_,g,R,w){var M=R-g;return-M*Math.cos(_/w*(Math.PI/2))+M+g},easeOutSine:function(_,g,R,w){var M=R-g;return M*Math.sin(_/w*(Math.PI/2))+g},easeInOutSine:function(_,g,R,w){var M=R-g;return-M/2*(Math.cos(Math.PI*_/w)-1)+g},easeInExpo:function(_,g,R,w){var M=R-g;return _==0?g:M*Math.pow(2,10*(_/w-1))+g},easeOutExpo:function(_,g,R,w){var M=R-g;return _==w?g+M:M*(-Math.pow(2,-10*_/w)+1)+g},easeInOutExpo:function(_,g,R,w){var M=R-g;return _===0?g:_===w?g+M:(_/=w/2)<1?M/2*Math.pow(2,10*(_-1))+g:M/2*(-Math.pow(2,-10*--_)+2)+g},easeInCirc:function(_,g,R,w){var M=R-g;return-M*(Math.sqrt(1-(_/=w)*_)-1)+g},easeOutCirc:function(_,g,R,w){var M=R-g;return M*Math.sqrt(1-(_=_/w-1)*_)+g},easeInOutCirc:function(_,g,R,w){var M=R-g;return(_/=w/2)<1?-M/2*(Math.sqrt(1-_*_)-1)+g:M/2*(Math.sqrt(1-(_-=2)*_)+1)+g},easeInElastic:function(_,g,R,w){var M=R-g,P,L,p;return p=1.70158,L=0,P=M,_===0?g:(_/=w)===1?g+M:(L||(L=w*.3),P<Math.abs(M)?(P=M,p=L/4):p=L/(2*Math.PI)*Math.asin(M/P),-(P*Math.pow(2,10*(_-=1))*Math.sin((_*w-p)*(2*Math.PI)/L))+g)},easeOutElastic:function(_,g,R,w){var M=R-g,P,L,p;return p=1.70158,L=0,P=M,_===0?g:(_/=w)===1?g+M:(L||(L=w*.3),P<Math.abs(M)?(P=M,p=L/4):p=L/(2*Math.PI)*Math.asin(M/P),P*Math.pow(2,-10*_)*Math.sin((_*w-p)*(2*Math.PI)/L)+M+g)},easeInOutElastic:function(_,g,R,w){var M=R-g,P,L,p;return p=1.70158,L=0,P=M,_===0?g:(_/=w/2)===2?g+M:(L||(L=w*.44999999999999996),P<Math.abs(M)?(P=M,p=L/4):p=L/(2*Math.PI)*Math.asin(M/P),_<1?-.5*(P*Math.pow(2,10*(_-=1))*Math.sin((_*w-p)*(2*Math.PI)/L))+g:P*Math.pow(2,-10*(_-=1))*Math.sin((_*w-p)*(2*Math.PI)/L)*.5+M+g)},easeInBack:function(_,g,R,w,M){var P=R-g;return M===void 0&&(M=1.70158),P*(_/=w)*_*((M+1)*_-M)+g},easeOutBack:function(_,g,R,w,M){var P=R-g;return M===void 0&&(M=1.70158),P*((_=_/w-1)*_*((M+1)*_+M)+1)+g},easeInOutBack:function(_,g,R,w,M){var P=R-g;return M===void 0&&(M=1.70158),(_/=w/2)<1?P/2*(_*_*(((M*=1.525)+1)*_-M))+g:P/2*((_-=2)*_*(((M*=1.525)+1)*_+M)+2)+g},easeInBounce:function(_,g,R,w){var M=R-g,P;return P=G.easeOutBounce(w-_,0,M,w),M-P+g},easeOutBounce:function(_,g,R,w){var M=R-g;return(_/=w)<.36363636363636365?M*(7.5625*_*_)+g:_<.7272727272727273?M*(7.5625*(_-=.5454545454545454)*_+.75)+g:_<.9090909090909091?M*(7.5625*(_-=.8181818181818182)*_+.9375)+g:M*(7.5625*(_-=.9545454545454546)*_+.984375)+g},easeInOutBounce:function(_,g,R,w){var M=R-g,P;return _<w/2?(P=G.easeInBounce(_*2,0,M,w),P*.5+g):(P=G.easeOutBounce(_*2-w,0,M,w),P*.5+M*.5+g)}};Ne.exports=G},364687:function(Ne,G,_){var g=_(817061)();Ne.exports=g;try{regeneratorRuntime=g}catch(R){typeof globalThis=="object"?globalThis.regeneratorRuntime=g:Function("r","regeneratorRuntime = r")(g)}},577134:function(Ne,G,_){"use strict";_.d(G,{Z:function(){return D}});var g=_(667294),R=_(785893),w=B=>{let m=B;for(;m=m.parentElement;){const f=getComputedStyle(m,null).getPropertyValue("overflow-y");if(m===document.body)return window;if(f==="auto"||f==="scroll"||f==="overlay")return m}return window},M=B=>B.firstChild?B.firstChild.offsetParent===B:!0,P=(B,m)=>{let f=B,W=0;M(m)||(W+=B.offsetTop-m.offsetTop,m=B.offsetParent,W+=-B.offsetTop);do W+=f.offsetTop,f=f.offsetParent;while(f&&f!==m);return W},L=B=>{let m=B.parentElement;for(;m&&getComputedStyle(m,null).getPropertyValue("display")==="contents";)m=m.parentElement;return m||window},p=null;typeof CSS!="undefined"&&CSS.supports&&(CSS.supports("position","sticky")?p="sticky":CSS.supports("position","-webkit-sticky")&&(p="-webkit-sticky"));var b=!1;try{const B=Object.defineProperty({},"passive",{get(){b={passive:!0}}}),m=()=>{};window.addEventListener("testPassive",m,B),window.removeEventListener("testPassive",m,B)}catch(B){}var S=B=>{const{el:m,onChange:f,unsubs:W,measure:X}=B;if(m===window){const z=()=>({top:0,left:0,height:window.innerHeight,width:window.innerWidth}),U=X(z()),j=()=>{Object.assign(U,X(z())),f()};return window.addEventListener("resize",j,b),W.push(()=>window.removeEventListener("resize",j)),U}else{const z=X(m.getBoundingClientRect()),U=()=>{Object.assign(z,X(m.getBoundingClientRect())),f()},j=new ResizeObserver(U);return j.observe(m),W.push(()=>j.disconnect()),z}},x=B=>{const m=getComputedStyle(B,null),f=parseInt(m.getPropertyValue("padding-top"),10),W=parseInt(m.getPropertyValue("padding-bottom"),10);return{top:f,bottom:W}},y=(B,m,f)=>{const{bottom:W,offsetBottom:X,offsetTop:z}=f,U=w(B);let j=!1;const V=()=>{j||requestAnimationFrame(()=>{const nt=et();nt!==Z&&q(nt),j=!1}),j=!0};let J=U===window?window.scrollY:U.scrollTop;const Q=nt=>{const{offsetTop:ht,height:At}=it,{naturalTop:Ot}=Bt,{height:xt}=St;return nt+ht+At>=Ot+xt+Et+X},et=()=>{const{height:nt}=it,{height:ht}=St;return ht+z+X<=nt?3:Q(J)?1:2},ut=U!==window&&M(U),it=S({el:U,onChange:V,unsubs:m,measure:({height:nt,top:ht})=>({height:nt,offsetTop:ut?ht:0})}),yt=L(B),ft=yt===window?{top:0,bottom:0}:x(yt),Bt=S({el:yt,onChange:V,unsubs:m,measure:({height:nt})=>({height:nt-ft.top-ft.bottom,naturalTop:yt===window?0:P(yt,U)+ft.top+it.offsetTop})}),St=S({el:B,onChange:V,unsubs:m,measure:({height:nt})=>({height:nt})});let Et=0,Z=et();const q=nt=>{const ht=Z;if(Z=nt,ht===2&&(Et=-1),nt===3){B.style.position=p,W?B.style.bottom=`${X}px`:B.style.top=`${z}px`;return}const{height:At,offsetTop:Ot}=it,{height:xt,naturalTop:Dt}=Bt,{height:Yt}=St;if(nt===2)if(B.style.position="relative",Et=ht===0?Math.max(0,Ot+J-Dt+z):Math.max(0,Ot+J+At-(Dt+Yt+X)),W){const ie=Math.max(0,xt-Yt-Et);B.style.bottom=`${ie}px`}else B.style.top=`${Et}px`;else B.style.position=p,nt===1?W?B.style.bottom=`${X}px`:B.style.top=`${At-Yt-X}px`:W?B.style.bottom=`${At-Yt-X}px`:B.style.top=`${z}px`};q(Z);const bt=nt=>{if(nt===J)return;const ht=nt-J;if(J=nt,Z===3)return;const{offsetTop:At,height:Ot}=it,{naturalTop:xt,height:Dt}=Bt,{height:Yt}=St;if(ht>0)if(Z===0){if(nt+At+z>xt){const ie=Math.max(0,At+J-xt+z);nt+At+Ot<=xt+Yt+ie+X?q(2):q(1)}}else Z===2&&Q(nt)&&q(1);else if(Z===1){if(At+nt+Ot<xt+Dt+X){const ie=Math.max(0,At+J+Ot-(xt+Yt+X));At+nt+z>=xt+ie?q(2):q(0)}}else Z===2&&At+nt+z<xt+Et&&q(0)},Ct=U===window?()=>bt(window.scrollY):()=>bt(U.scrollTop);U.addEventListener("scroll",Ct,b),U.addEventListener("mousewheel",Ct,b),m.push(()=>U.removeEventListener("scroll",Ct),()=>U.removeEventListener("mousewheel",Ct))},A=({offsetTop:B=0,offsetBottom:m=0,bottom:f=!1}={})=>{const[W,X]=(0,g.useState)(null);return(0,g.useEffect)(()=>{if(!W||!p)return;const z=[];return y(W,z,{offsetBottom:m,offsetTop:B,bottom:f}),()=>{z.forEach(U=>U())}},[W,m,B,f]),X},E=B=>{const{offsetTop:m,offsetBottom:f,bottom:W,children:X,className:z,style:U}=B,j=A({offsetTop:m,offsetBottom:f,bottom:W});return(0,R.jsx)("div",{className:z,style:U,ref:j,children:X})},D=E}}]);
}());